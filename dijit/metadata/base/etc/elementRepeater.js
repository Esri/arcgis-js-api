define(["dojo/_base/lang","dojo/_base/array","dojo/has","dojo/Deferred","./docUtil","./matchTopNodeUtil","../../../../kernel"],function(e,t,n,r,l,o,a){var i={_findClonedElement:function(e,n,r,l){var a,i=null,s=!0;if(n._isGxeElement)if(null!=l?l+="/":l="",l+=n.target,r===l){if(s=!1,a=o.evaluateXNodeMatch(e,n))return n}else s=!1,0===r.indexOf(l)&&(s=!0);else n._isGxeAttribute?s=!1:n._isGxeDescriptor&&null!=l&&(s=!1);return s&&t.some(n.getChildren(),function(t){return i=this._findClonedElement(e,t,r,l),i?!0:void 0},this),i},repeatElement:function(e,t,n){var o=new r;if(!t._isGxeElement)return o.resolve(null),o;var a=l.findDescriptorAndPath(t);if(!a.descriptor)return console.error("repeatElement: Unable to locate parent Descriptor for: ",t),o.resolve(null),o;var i=a.descriptor,s=a.path,d=i.newInstance();if(!d)return console.error("repeatElement: Cannot create a new Descriptor was null: ",t),o.resolve(null),o;var c=this._findClonedElement(t,d,a.path,null);return c?(e.adoptElement(c,n),o.resolve(c)):(console.error("repeatElement: Unable to locate new element instance for: ",s,t),o.resolve(null)),o}};return n("extend-esri")&&e.setObject("dijit.metadata.base.etc.elementRepeater",i,a),i});