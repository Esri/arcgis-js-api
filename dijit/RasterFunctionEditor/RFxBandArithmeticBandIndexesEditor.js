// COPYRIGHT © 2022 Esri
//
// All rights reserved under the copyright laws of the United States
// and applicable international laws, treaties, and conventions.
//
// This material is licensed for use under the Esri Master License
// Agreement (MLA), and is bound by the terms of that agreement.
// You may redistribute and use this code without modification,
// provided you adhere to the terms of the MLA and include this
// copyright notice.
//
// See use restrictions at http://www.esri.com/legal/pdfs/mla_e204_e300/english
//
// For additional information, contact:
// Environmental Systems Research Institute, Inc.
// Attn: Contracts and Legal Services Department
// 380 New York Street
// Redlands, California, USA 92373
// USA
//
// email: contracts@esri.com
//
// See http://js.arcgis.com/3.42/esri/copyright.txt for details.

define(["dojo/_base/declare","dojo/_base/lang","dojo/has","dojo/_base/array","dojo/i18n!../../nls/jsapi","dojo/text!./templates/RFxBandArithmeticBandIndexesEditor.html","dijit/_WidgetBase","dijit/_TemplatedMixin","dijit/_WidgetsInTemplateMixin","../../kernel"],(function(e,a,t,R,n,r,d,s,i,I){var N=e("RFxBandArithmeticBandIndexesEditor",[d,s,i],{widgetsInTemplate:!0,templateString:r,declaredClass:"esri.widgets.ToolModeler.RasterFunctionEditor.ArgumentEditors.RFxBandArithmeticBandIndexesEditor",constructor:function(){this.inherited(arguments),this._i18n=n.rasterFunctions.rfxArgs},postCreate:function(){this.inherited(arguments),this._setLabels(),this._attachMethodChangeListener(),this._setInitialState()},_setLabels:function(){this.inputArgs&&R.forEach(Object.keys(this.inputArgs),function(e){var a=this.inputArgs[e];this._templateArgLabel.innerHTML=a.displayName,a.input=this._templateArgInput,this._templateArgInput.set("value",a.value)}.bind(this))},_attachMethodChangeListener:function(){(this.triggerArgs&&this.triggerArgs.Method).input.on("change",this._handleMethodChange.bind(this))},_setInitialState:function(){var e=(this.triggerArgs&&this.triggerArgs.Method).value;this._handleMethodChange(e)},_handleMethodChange:function(e){var a=this._i18n.exampleName+": ",t=this._i18n.inputName+": ",R=this._i18n.outputName+": ",n=" ("+this._i18n.optionalName+")";switch(parseInt(e)){case 0:a+="(B3 - B1) / (B3 + B1)",t="",R="";break;case 1:a+="3 1",t+="NIR Red",R+="(NIR - Red) / (NIR + Red)";break;case 2:a+="3 1 0.33",t+="NIR Red L",R+="((NIR - Red) / (NIR + Red + L)) * (1 + L)";break;case 3:a+="3 1 0.33 0.5 1.5",t+="NIR Red s a X",R+="(s * (NIR - s * Red - a)) / (a * NIR + Red - a * s + X * (1 + s * s))";break;case 4:a+="3 1",t+="NIR Red",R+="(2 * NIR + 1 - Sqrt((2 * NIR + 1) ^ 2 - 8 * (NIR - Red))) / 2";break;case 5:a+="3 1",t+="NIR Red",R+="eta * (1 - 0.25 * eta) - ((Red - 0.125) / (1 - Red))",R+="<br>",R+="<br>",R+=" *eta = [2 * (NIR ^ 2 – Red ^ 2) + 1.5 * NIR + 0.5 * Red] / (NIR + Red + 0.5)";break;case 6:a+="3 1 0.33 0.5",t+="NIR Red a b",R+="(NIR - a * Red - b) / (Sqrt(1 + a ^ 2))";break;case 7:a+="1 2 3 4 5 7",t+="TM1 TM2 TM3 TM4 TM5 TM7",t+=n,R+="-0.2848 * TM1 - 0.2435 * TM2 - 0.5436 * TM3 + 0.7243 * TM4 + 0.084 * TM5 - 0.18 * TM7";break;case 8:a+="1 3 4 5 6",t+="Band1 Band3 Band4 Band5 Band6",t+=n,R+="<br>",R+=" Band1 = (Band5 / Band6) * 100",R+="<br>",R+=" Band2 = (Band5 / Band1) * 100",R+="<br>",R+=" Band3 = (Band3 / Band4) * (Band5 / Band4) * 100";break;case 9:a+="3 2 1",t+="Red Green Blue",R+="(Green - Red) / (Green + Red - Blue)";break;case 10:a+="3 1",t+="NIR Green",R+="(NIR - Green) / (NIR + Green)";break;case 11:a+="3 1",t+="NIR Red",R+="NIR / Red";break;case 12:a+="3 1",t+="NIR RedEdge",R+="(NIR - RedEdge) / (NIR + RedEdge)";break;case 13:a+="3 1",t+="NIR RedEdge",R+="NIR / RedEdge";break;case 14:a+="3 1 2",t+="NIR Green Red",R+="(1.5 * (1.2 * (NIR - Green) - 2.5 * (Red - Green) ) / Sqrt( (2 * NIR + 1) ^ 2 - (6 * NIR - 5 * Sqrt(Red) ) - 0.5 ) )";break;case 15:a+="3 2 1",t+="NIR RedEdge Green",R+="(100 * (NIR - RedEdge) - 10 * (NIR - Green))";break;case 16:a+="3 2",t+="NIR RedEdge",R+="(NIR / RedEdge) - 1.0";break;case 17:a+="3 1",t+="NIR Green",R+="(NIR / Green) - 1.0";break;case 18:a+="3 1",t+="NIR Green",R+="(Green - NIR) / (Green + NIR)";break;case 19:a+="3 2 1",t+="NIR Red Blue",R+="2.5 * [(NIR - Red)/ (NIR + (6 * Red) - (7.5 * Blue) + 1.0)]";break;case 20:a+="3 1",t+="Red Blue",R+="Red / Blue";break;case 21:a+="3 1",t+="SWIR NIR",R+="SWIR / NIR";break;case 22:a+="3 1",t+="SWIR1 SWIR2",R+="SWIR1 / SWIR2";break;case 23:a+="3 2 1",t+="Green NIR SWIR",R+="[Green – α * NIR – (1 – α) * SWIR ] / [Green + α * NIR + (1 – α) * SWIR]";break;case 24:a+="3 1",t+="Red NIR",R+="1/((0.1 -RED)^2 + (0.06 - NIR)^2)";break;case 25:a+="3 1",t+="NIR SWIR",R+="(NIR - SWIR) / (NIR + SWIR)";break;case 26:a+="3 1",t+="SWIR NIR",R+="(SWIR - NIR) / (SWIR + NIR)";break;case 27:a+="3 1",t+="NIR SWIR1",R+="(NIR - SWIR1) / (NIR + SWIR1)";break;case 28:case 29:a+="3 1",t+="Green SWIR",R+="(Green - SWIR) / (Green + SWIR)"}this._templateArgInput.set("placeHolder",a),this._templateInputDetails.innerHTML=t+"<br>"+R}});return t("extend-esri")&&a.setObject("dijit.RasterFunctionEditor.RFxBandArithmeticBandIndexesEditor",N,I),N}));