// COPYRIGHT Â© 2021 Esri
//
// All rights reserved under the copyright laws of the United States
// and applicable international laws, treaties, and conventions.
//
// This material is licensed for use under the Esri Master License
// Agreement (MLA), and is bound by the terms of that agreement.
// You may redistribute and use this code without modification,
// provided you adhere to the terms of the MLA and include this
// copyright notice.
//
// See use restrictions at http://www.esri.com/legal/pdfs/mla_e204_e300/english
//
// For additional information, contact:
// Environmental Systems Research Institute, Inc.
// Attn: Contracts and Legal Services Department
// 380 New York Street
// Redlands, California, USA 92373
// USA
//
// email: contracts@esri.com
//
// See http://js.arcgis.com/3.40/esri/copyright.txt for details.

define(["dojo/_base/declare","dojo/_base/lang","dojo/_base/array","dojo/i18n!../../nls/jsapi","dojo/text!./templates/RFxMultidimensionalDefinitionEditor.html","dojo/data/ItemFileReadStore","dojo/has","dojo/Evented","../../kernel","dijit/_WidgetBase","dijit/_TemplatedMixin","dijit/_WidgetsInTemplateMixin","dijit/_OnDijitClickMixin","./utils","./EditableGridMixin","./RFxGridBase","dijit/form/Select","dijit/form/ComboBox","dijit/form/NumberTextBox","./RFxRasterVariableGrid"],(function(i,e,t,n,a,s,r,o,l,d,h,u,f,m,c,_,V,g,b,D){var y=i("RFxMultidimensionalDefinitionEditor",[d,h,u,f,c],{declaredClass:"esri.dijit.RasterFunctionEditor.RFxMultidimensionalDefinitionEditor",templateString:a,widgetsInTemplate:!0,rasterVariableGrid:null,byValuesGrid:null,byRangesGrid:null,multidimensionalInfo:null,_layer:null,_dimensionDefinitionSelect:null,_iterationFormStartOfFirstIterationSelect:null,_iterationFormEndOfFirstIterationSelect:null,_iterationFormTimeUnitsContainer:null,_iterationFormStepTextbox:null,_iterationFormTimeUnits:null,selectedVariables:[],definitionType:"",widgetState:{},dimensionDefinition:{ALL:"ALL",BY_VALUES:"BY_VALUES",BY_RANGES:"BY_RANGES",BY_ITERATION:"BY_ITERATION",BY_INTERVAL:"BY_INTERVAL",BY_TARGET_RASTER:"BY_TARGET_RASTER"},dimensionDefinitionLabels:{ALL:"mdimDefTypeAll",BY_VALUES:"mdimDefTypeByValues",BY_RANGES:"mdimDefTypeByRanges",BY_ITERATION:"mdimDefTypeByIteration"},esriTimeUnitLabels:{HOURS:"esriTimeUnitsHours",DAYS:"esriTimeUnitsDays",WEEKS:"esriTimeUnitsWeeks",MONTHS:"esriTimeUnitsMonths",YEARS:"esriTimeUnitsYears"},stdTimeDimension:"StdTime",constructor:function(){this.inherited(arguments),this.widgetState={},this._i18n=n.rasterFunctions.enumLabels,this._i18n=e.mixin(this._i18n,n.rasterFunctions.rfxArgs)},postCreate:function(){this.inherited(arguments);var i=this._generateDropdownOptions(this.dimensionDefinitionLabels);this._dimensionDefinitionSelect=this._generateDropdownNode(i,this._dimensionDefinitionDivContainer);var t=this._generateDropdownOptions(this.esriTimeUnitLabels);this._iterationFormTimeUnits=this._generateDropdownNode(t,this._iterationFormTimeUnitsDropdown);var n=this._dimensionDefinitionSelect.getOptions("BY_TARGET_RASTER");this._isInterpolateByDimFunction()&&!n?(this._dimensionDefinitionSelect.addOption({value:this.dimensionDefinition.BY_INTERVAL,label:this._i18n.mdimDefTypeByInterval}),this._dimensionDefinitionSelect.addOption({value:this.dimensionDefinition.BY_TARGET_RASTER,label:this._i18n.mdimDefTypeByTargetRaster}),this._setupLayerSelect(),this._dimensionDefinitionSelect.removeOption(this.dimensionDefinition.ALL),this._dimensionDefinitionSelect.removeOption(this.dimensionDefinition.BY_ITERATION),this._dimensionDefinitionSelect.removeOption(this.dimensionDefinition.BY_RANGES),this._iterationStartLabel.innerHTML=this._i18n.intervalStart,this._iterationEndLabel.innerHTML=this._i18n.intervalEnd,this._iterationFormStartOfFirstIterationSelect=this._initilizeComboBox(this._startOfFirstIterationSelectContainer),this._iterationFormEndOfFirstIterationSelect=this._initilizeComboBox(this._endOfFirstIterationSelectContainer),this._iterationFormStartOfFirstIterationSelect.on("change",function(i){this._iterationFormStartOfFirstIterationSelect.set("value",i)}.bind(this)),this._iterationFormEndOfFirstIterationSelect.on("change",function(i){this._iterationFormEndOfFirstIterationSelect.set("value",i)}.bind(this))):(this._iterationFormStartOfFirstIterationSelect=this._generateDropdownNode([],this._startOfFirstIterationSelectContainer),this._iterationFormEndOfFirstIterationSelect=this._generateDropdownNode([],this._endOfFirstIterationSelectContainer));var a=this.layerArg&&"RasterFunctionTemplate"===this.layerArg.type;if(a||this.layerArg&&this.layerArg.input){this.defaultValue&&"string"==typeof this.defaultValue&&(this.defaultValue=JSON.parse(this.defaultValue));var s,r=this.layerArg.input;this.set("labelAttr","alias"),(a||r.declaredClass.indexOf("RFxRasterInput")>0&&r.value)&&(s=a?m.processRFTAsLayerInput(this.layerArg):r.getSelectedLayer(r.get("value").name),this._layer=s,s.getMultidimensionalInfo().then(e.hitch(this,(function(i){s.multidimensionalInfo=i,this.multidimensionalInfo=m.filterMDInfoIfMosiacRuleIsSet(s),this.selectedVariables=this.defaultValue&&this.defaultValue.variables,this.defaultValue&&this.defaultValue.definitionType?(this.definitionType=this.defaultValue.definitionType,this._dimensionDefinitionSelect.set("value",this.definitionType),this.widgetState[this.definitionType]=this.defaultValue):(this.definitionType=this._dimensionDefinitionSelect.value,this._dimensionDefinitionSelect.set("value",this.definitionType))}))).catch(e.hitch(this,(function(i){console.error("Error: Layer does not support multidimensional info"),this.selectedVariables="",this.definitionType=this._dimensionDefinitionSelect.value})))),this.defaultValue&&this.defaultValue.definitionType||(this.definitionType=this._dimensionDefinitionSelect.value,this._dimensionDefinitionSelect.set("value",this.definitionType)),this._dimensionDefinitionSelect.on("change",this._handleDimensionDefinitionSelectChange.bind(this)),this.rasterVariableGrid=new D({layerArg:this.layerArg,defaultValue:this.defaultValue&&this.defaultValue.variables},this._rasterVariableDiv),this.rasterVariableGrid.on("variable-grid-update",function(i){this._handleRasterVariableGridChange(i)}.bind(this)),this.rasterVariableGrid.startup()}},onRasterChange:function(i){if(this.layerArg&&this.layerArg.input){var t,n=this.layerArg.input;n.declaredClass.indexOf("RFxRasterInput")>0&&n.value&&(t=n.getSelectedLayer(n.get("value").name),this._layer=t,t&&t.getMultidimensionalInfo().then(e.hitch(this,(function(e){t.multidimensionalInfo=e,this.multidimensionalInfo=m.filterMDInfoIfMosiacRuleIsSet(t),this.rasterVariableGrid.onRasterChange(i),this.widgetState={}}))).catch(e.hitch(this,(function(e){console.error("Error: Layer does not support multidimensional info"),this.rasterVariableGrid.onRasterChange(i),this.widgetState={}})))),t&&n.value||(this.multidimensionalInfo=void 0,this.rasterVariableGrid.onRasterChange(i),this.widgetState={})}},_setupLayerSelect:function(){var i=[],e=!1;this.layerArg&&this.layerArg.input&&(i=this.layerArg.input.inputLayers,e=this.layerArg.input.allowScalar),this._layerSelect.set("inputLayers",i),this._layerSelect.set("allowScalar",e),this._layerSelect.startup()},_handleDimensionDefinitionSelectChange:function(i){switch(this.definitionType=i,this.defaultValue=this.widgetState[i],this.definitionType){case this.dimensionDefinition.BY_VALUES:this._createByValuesGrid(),m.UIModifier.show(this._byValuesGridDivContainer),m.UIModifier.show(this._byValuesGridLabel),m.UIModifier.hide(this._byRangesGridDivContainer),m.UIModifier.hide(this._byRangesGridLabel),m.UIModifier.hide(this._byIterationDivContainer),m.UIModifier.hide(this._byTargetRasterDivContainer);break;case this.dimensionDefinition.BY_RANGES:this._createByRangesGrid(),m.UIModifier.hide(this._byValuesGridDivContainer),m.UIModifier.hide(this._byValuesGridLabel),m.UIModifier.show(this._byRangesGridDivContainer),m.UIModifier.show(this._byRangesGridLabel),m.UIModifier.hide(this._byIterationDivContainer);break;case this.dimensionDefinition.BY_INTERVAL:case this.dimensionDefinition.BY_ITERATION:this._configureByIterationForm(),m.UIModifier.hide(this._byValuesGridDivContainer),m.UIModifier.hide(this._byValuesGridLabel),m.UIModifier.hide(this._byRangesGridDivContainer),m.UIModifier.hide(this._byRangesGridLabel),m.UIModifier.show(this._byIterationDivContainer),m.UIModifier.hide(this._byTargetRasterDivContainer);break;case this.dimensionDefinition.BY_TARGET_RASTER:m.UIModifier.hide(this._byValuesGridDivContainer),m.UIModifier.hide(this._byValuesGridLabel),m.UIModifier.hide(this._byRangesGridDivContainer),m.UIModifier.hide(this._byRangesGridLabel),m.UIModifier.hide(this._byIterationDivContainer),m.UIModifier.show(this._byTargetRasterDivContainer);break;default:m.UIModifier.hide(this._byValuesGridDivContainer),m.UIModifier.hide(this._byValuesGridLabel),m.UIModifier.hide(this._byRangesGridDivContainer),m.UIModifier.hide(this._byRangesGridLabel),m.UIModifier.hide(this._byIterationDivContainer),m.UIModifier.hide(this._byTargetRasterDivContainer)}this.emit("change",this._getWidgetState(!1))},_handleRasterVariableGridChange:function(i){var e=i.filter((function(i){return i.Select})).map((function(i){return i.value})),t=!m.isArrayEqual(this.selectedVariables,e);switch(this.selectedVariables=e,this.definitionType){case this.dimensionDefinition.BY_VALUES:t&&this.defaultValue&&(this.defaultValue.values=[]),this._createByValuesGrid();break;case this.dimensionDefinition.BY_RANGES:t&&this.defaultValue&&(this.defaultValue.maxValues=[],this.defaultValue.minValues=[]),this._createByRangesGrid();break;case this.dimensionDefinition.BY_INTERVAL:case this.dimensionDefinition.BY_ITERATION:t&&this.defaultValue&&(this.defaultValue.dimension="",this.defaultValue.startValue="",this.defaultValue.endValue=""),this._configureByIterationForm()}this.emit("change",this._getWidgetState(!1))},_getDimensionNameOfVariables:function(i,e){var t=m.getVariables({multiDimensionalData:i,selectedVariables:e}),n=m.getDimensions({variables:t}),a=m.mapObjectByProperty(n,"name");return m.removeDuplicatesFromArray(a).map(function(i){return{label:i,value:i,selected:!1,disabled:!1}}.bind(this))},_getDimensionValues:function(i,e,t){var n,a,s=m.getVariables({multiDimensionalData:i,selectedVariables:e}),r=m.getDimensions({variables:s,selectedDimension:t}),o=m.getFormattedDimensionValues(r);if(this.definitionType===this.dimensionDefinition.BY_VALUES)return o;if(m.dimensionHasRanges(r)){var l=m.getFormattedDimensionRanges(o);n=l.min,a=l.max}else n=this._cloneData(o),a=this._cloneData(o);return{startValueOptions:n,endValueOptions:a}},_createByValuesGrid:function(){var i=["dropdown","dropdown"],e=[this._i18n.dimensionName,this._i18n.valueName];this._isInterpolateByDimFunction()&&(i=["dropdown","combobox"]);var t=this._getGridSchema(["dimension","value"],i,e),n=this._getGridStoreData(),a=this._getDefaultValueObject(n[0]);this.byValuesGrid&&this.byValuesGrid.destroy(),this._byValuesGridDiv=document.createElement("div"),this._byValuesGridDivContainer.appendChild(this._byValuesGridDiv),this.byValuesGrid=new _({isForMultidimensional:!0,schema:t,data:n,hasIdColumn:!0,isExtensible:!0,defaultBlankObject:a},this._byValuesGridDiv),this.byValuesGrid.keepScrollPosition=!0,this.byValuesGrid.on("grid-data-change",this._handleByValuesGridChange.bind(this))},_handleByValuesGridChange:function(){var i=this._cloneData(this.defaultValue);this.defaultValue=this._getWidgetState(!0),this._correctByValuesGridsValidity(i,this.defaultValue);var e=this._getGridStoreData();this.byValuesGrid.updateStoreValue(e),this.defaultValue=this._getWidgetState(!0),this.emit("change",this._getWidgetState(!1))},_createByRangesGrid:function(){var i=[this._i18n.dimensionName,this._i18n.minValue,this._i18n.maxValue],e=this._getGridSchema(["dimension","minValue","maxValue"],["dropdown","dropdown","dropdown"],i),t=this._getGridStoreData(),n=this._getDefaultValueObject(t[0]);this.byRangesGrid&&this.byRangesGrid.destroy(),this._byRangesGridDiv=document.createElement("div"),this._byRangesGridDivContainer.appendChild(this._byRangesGridDiv),this.byRangesGrid=new _({isForMultidimensional:!0,schema:e,data:t,hasIdColumn:!0,isExtensible:!0,defaultBlankObject:n},this._byRangesGridDiv),this.byRangesGrid.keepScrollPosition=!0,this.byRangesGrid.on("grid-data-change",this._handlByRangesGridChange.bind(this))},_handlByRangesGridChange:function(){this.defaultValue=this._getWidgetState(!0);var i=this._getGridStoreData();this.byRangesGrid.updateStoreValue(i),this.defaultValue=this._getWidgetState(!0),this.emit("change",this._getWidgetState(!1))},_configureByIterationForm:function(){var i=this._isInterpolateByDimFunction(),e=this._getGridStoreData();this._iterationFormDimensionSelect.set("options",e.dimension),this._iterationFormStepTextbox.set("value",e.stepValue),this._iterationFormTimeUnits.set("value",e.units);var t=e.dimension.filter((function(i){return i.selected}))[0],n=e.startValue.filter((function(i){return i.selected}))[0],a=e.endValue.filter((function(i){return i.selected}))[0];if(i){var s=this._getComboBoxStore("label",e.startValue);this._iterationFormStartOfFirstIterationSelect.set("store",s);var r=this._getComboBoxStore("label",e.endValue);this._iterationFormEndOfFirstIterationSelect.set("store",r)}else this._iterationFormStartOfFirstIterationSelect.set("options",e.startValue),this._iterationFormEndOfFirstIterationSelect.set("options",e.endValue);this._iterationFormDimensionSelect.set("value",t&&t.value,!1),this._iterationFormStartOfFirstIterationSelect.set("value",n&&n.value||""),this._iterationFormEndOfFirstIterationSelect.set("value",a&&a.value||""),t&&t.value===this.stdTimeDimension?m.UIModifier.show(this._iterationFormTimeUnitsContainer):m.UIModifier.hide(this._iterationFormTimeUnitsContainer),t&&t.value||this._iterationFormDimensionSelect._setDisplay(""),i||n&&n.value||this._iterationFormStartOfFirstIterationSelect._setDisplay(""),i||a&&a.value||this._iterationFormEndOfFirstIterationSelect._setDisplay(""),this._iterationFormDimensionSelect.on("change",this._handleByIterationDimensionChange.bind(this))},_handleByIterationDimensionChange:function(){this.defaultValue=this._getWidgetState(!1),this.defaultValue.startValue="",this.defaultValue.endValue="",this._configureByIterationForm(),this.defaultValue=this._getWidgetState(!1),this.emit("change",this._getWidgetState(!1))},_getGridStoreData:function(){var i=this.layerArg&&"RasterFunctionTemplate"===this.layerArg.type;if(i||this.layerArg&&this.layerArg.input){var e,t=this.layerArg.input;if(i||t.declaredClass.indexOf("RFxRasterInput")>0&&t.value)switch(this.definitionType){case this.dimensionDefinition.BY_VALUES:e=this._createByValuesDataObject();break;case this.dimensionDefinition.BY_RANGES:e=this._createByRangesDataObject();break;case this.dimensionDefinition.BY_INTERVAL:case this.dimensionDefinition.BY_ITERATION:e=this._createByIterationDataObject()}if(!e)switch(this.definitionType){case this.dimensionDefinition.BY_VALUES:e=[{dimension:[],value:[]}];break;case this.dimensionDefinition.BY_RANGES:e=[{dimension:[],minValue:[],maxValue:[]}];break;case this.dimensionDefinition.BY_INTERVAL:case this.dimensionDefinition.BY_ITERATION:e={dimension:[],startValue:[],endValue:[],stepValue:3,units:"HOURS"}}return this._cloneData(e)}},_createByValuesDataObject:function(){var i=[],e=[],t=[];if(this.multidimensionalInfo){var n=this.multidimensionalInfo,a=n&&n.variables,s=this.selectedVariables;if(a){var r=this._getDimensionNameOfVariables(n,s);if(this.defaultValue&&this.defaultValue.dimensions&&this.defaultValue.values&&this.defaultValue.dimensions.length>0)e=this.defaultValue.dimensions,t=this.defaultValue.values;else e=[r[0]?r[0].value:""];return e.forEach((function(e,a){this._isItemInDropdown(r,e)||(e=r[0].value);var o=this._getDimensionValues(n,s,e),l=this._cloneData(r),d=t&&t[a]||"";this._makeDropdownSelection(l,e),this._makeDropdownSelection(o,d),i.push(this._cloneData({dimension:l,value:o}))}),this),i}}},_createByRangesDataObject:function(){var i,e=[],t=[],n=[];if(this.multidimensionalInfo){var a=this.multidimensionalInfo,s=a&&a.variables,r=this.selectedVariables;if(s){var o,l,d,h=this.defaultValue&&this.defaultValue.dimensions&&this.defaultValue.minValues&&this.defaultValue.maxValues;if(i=this._getDimensionNameOfVariables(a,r),h&&this.defaultValue.dimensions.length>0)o=this.defaultValue.dimensions,l=this.defaultValue.minValues,d=this.defaultValue.maxValues;else o=[i[0]?i[0].value:""];return o.forEach((function(s,o){this._isItemInDropdown(i,s)||(s=i[0].value);var h=this._getDimensionValues(a,r,s);t=this._cloneData(h.startValueOptions),n=this._cloneData(h.endValueOptions);var u=this._cloneData(i),f=l&&l[o]||"",m=d&&d[o]||"";this._makeDropdownSelection(u,s),this._makeDropdownSelection(t,f),this._makeDropdownSelection(n,m),e.push(this._cloneData({dimension:u,minValue:t,maxValue:n}))}),this),e}}},_createByIterationDataObject:function(){var i,e,t;if(this.multidimensionalInfo){var n=this.multidimensionalInfo,a=n&&n.variables,s=this.selectedVariables;if(a){var r,o,l,d=this.defaultValue&&this.defaultValue.dimension,h="",u="";if(i=this._getDimensionNameOfVariables(n,s),d)r=this.defaultValue.dimension,h=this.defaultValue.startValue,u=this.defaultValue.endValue,o=this.defaultValue.stepValue,l=this.defaultValue.units;else{r=i[0]?i[0].value:"";var f=this._layer.timeInfo&&this._layer.timeInfo.interval;o=f&&f.value,l=f&&f.unit&&f.unit.toUpperCase()}var m=this._getDimensionValues(n,s,r);return e=this._cloneData(m.startValueOptions),t=this._cloneData(m.endValueOptions),this._makeDropdownSelection(i,r),this._makeDropdownSelection(e,h),this._makeDropdownSelection(t,u),{dimension:i,startValue:e,endValue:t,stepValue:o,units:l}}}},_getGridSchema:function(i,e,t){return i.map((function(i,n){return{label:t[n],name:i,dataType:e[n]}}))},_getDefaultValueObject:function(i){var e=this._cloneData(i),t={label:" ",value:"",selected:!0,disabled:!0};return Object.keys(e).forEach((function(i,n){0!==n&&(e[i]=[]),e[i].unshift(t)}),this),e},_isInterpolateByDimFunction:function(){return this.attributes&&"interpolateByDim"===this.attributes},_cloneData:function(i){return e.clone(i)},_itemInArray:function(i,e){return i.some((function(i){return i.label===e.label}))},_makeDropdownSelection:function(i,e){var t=!1;if(i.forEach((function(i){i.value===e?(i.selected=!0,t=!0):i.selected=!1})),!t){var n={label:e,value:e,selected:!0,disabled:!0};i.unshift(n)}},_isItemInDropdown:function(i,e){return i.some((function(i){if(i.value===e)return!0}))},_generateDropdownNode:function(i,e){var t=document.createElement("div");return e.appendChild(t),new V({options:i},t)},_initilizeComboBox:function(i){var e=new s({data:{label:"label",items:[]}});return new g({store:e,value:" ",searchAttr:"label"},i)},_getComboBoxStore:function(i,e){return new s({data:{label:i,items:e}})},_generateTextBoxNode:function(i){var e=document.createElement("div");return i.appendChild(e),new b(null,e)},_generateDropdownOptions:function(i){return Object.keys(i).map(function(e){return{value:e,label:this._i18n[i[e]]}}.bind(this))},_correctByValuesGridsValidity:function(i,e){for(var t=0;t<(i&&i.dimensions&&i.dimensions.length||0);t++)i.dimensions[t]!==e.dimensions[t]&&(e.values[t]="")},_parseByValuesGridData:function(i,e){var t=[],n=[];return i.forEach((function(i){if("*"!==i.idNum){var a=i.dimension.filter((function(i){return i.selected})),s=i.value.filter((function(i){return i.selected}));if(1===a.length&&1===s.length){var r=a[0].value,o=s[0].value;"object"==typeof o&&o.length&&(o=o[0]),(e||""!==r&&""!==o)&&(t.push(r),n.push(o))}}})),{dimensions:t,values:n}},_parseByRangesGridData:function(i,e){var t=[],n=[],a=[];return i.forEach((function(i){if("*"!==i.idNum){var s=i.dimension.filter((function(i){return i.selected})),r=i.minValue.filter((function(i){return i.selected})),o=i.maxValue.filter((function(i){return i.selected}));if(1===s.length&&1===r.length&&1===o.length){var l=s[0].value,d=r[0].value,h=o[0].value;(e||""!==l&&""!==d&&""!==h)&&(t.push(l),n.push(d),a.push(h))}}})),{dimension:t,minValue:n,maxValue:a}},_getWidgetState:function(i){i||(i=!1);var e,t=this._dimensionDefinitionSelect.value,n={definitionType:t,variables:this.rasterVariableGrid&&this.rasterVariableGrid.get("value")};switch(t){case this.dimensionDefinition.BY_VALUES:var a=this.byValuesGrid&&this.byValuesGrid.getStoreValue()||[];e=this._parseByValuesGridData(a,i),n.dimensions=e.dimensions,n.values=e.values;break;case this.dimensionDefinition.BY_RANGES:var s=this.byRangesGrid.getStoreValue();e=this._parseByRangesGridData(s,i),n.dimensions=e.dimension,n.minValues=e.minValue,n.maxValues=e.maxValue;break;case this.dimensionDefinition.BY_INTERVAL:case this.dimensionDefinition.BY_ITERATION:n.dimension=this._iterationFormDimensionSelect.get("value"),n.startValue=this._iterationFormStartOfFirstIterationSelect.get("value"),n.endValue=this._iterationFormEndOfFirstIterationSelect.get("value"),n.stepValue=this._iterationFormStepTextbox.get("value"),n.dimension===this.stdTimeDimension&&(n.units=this._iterationFormTimeUnits.get("value"));break;case this.dimensionDefinition.BY_TARGET_RASTER:var r=this._layerSelect.get("value");if(!r)break;n.target=r.url}return this.widgetState[t]=n,n},_getValueAttr:function(){return JSON.stringify(this._getWidgetState(!1))}});return r("extend-esri")&&e.setObject("dijit.RasterFunctionEditor.RFxMultidimensionalDefinitionEditor",y,l),y}));