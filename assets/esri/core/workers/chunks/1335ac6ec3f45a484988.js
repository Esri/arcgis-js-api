"use strict";(self.webpackChunkRemoteClient=self.webpackChunkRemoteClient||[]).push([[1391,5732,661],{5732:(t,e,n)=>{n.d(e,{a:()=>i,c:()=>s,g:()=>r});var s="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};function r(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function i(t){throw new Error('Could not dynamically require "'+t+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}},46521:(t,e,n)=>{function s(){return[1,0,0,0,1,0,0,0,1]}function r(t,e){return new Float64Array(t,e,9)}n.d(e,{a:()=>r,c:()=>s}),Object.freeze(Object.defineProperty({__proto__:null,create:s,clone:function(t){return[t[0],t[1],t[2],t[3],t[4],t[5],t[6],t[7],t[8]]},fromValues:function(t,e,n,s,r,i,o,a,c){return[t,e,n,s,r,i,o,a,c]},createView:r},Symbol.toStringTag,{value:"Module"}))},52138:(t,e,n)=>{n.d(e,{a:()=>c,d:()=>_,e:()=>f,f:()=>d,g:()=>M,h:()=>y,i:()=>o,j:()=>T,k:()=>l,m:()=>h,s:()=>i,t:()=>a,v:()=>u,x:()=>O,y:()=>m});var s=n(65617),r=n(46851);function i(t,e,n,s,r,i,o,a,c,h,u,l,f,d,_,m,g){return t[0]=e,t[1]=n,t[2]=s,t[3]=r,t[4]=i,t[5]=o,t[6]=a,t[7]=c,t[8]=h,t[9]=u,t[10]=l,t[11]=f,t[12]=d,t[13]=_,t[14]=m,t[15]=g,t}function o(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function a(t,e){if(t===e){const n=e[1],s=e[2],r=e[3],i=e[6],o=e[7],a=e[11];t[1]=e[4],t[2]=e[8],t[3]=e[12],t[4]=n,t[6]=e[9],t[7]=e[13],t[8]=s,t[9]=i,t[11]=e[14],t[12]=r,t[13]=o,t[14]=a}else t[0]=e[0],t[1]=e[4],t[2]=e[8],t[3]=e[12],t[4]=e[1],t[5]=e[5],t[6]=e[9],t[7]=e[13],t[8]=e[2],t[9]=e[6],t[10]=e[10],t[11]=e[14],t[12]=e[3],t[13]=e[7],t[14]=e[11],t[15]=e[15];return t}function c(t,e){const n=e[0],s=e[1],r=e[2],i=e[3],o=e[4],a=e[5],c=e[6],h=e[7],u=e[8],l=e[9],f=e[10],d=e[11],_=e[12],m=e[13],g=e[14],p=e[15],M=n*a-s*o,b=n*c-r*o,T=n*h-i*o,y=s*c-r*a,O=s*h-i*a,R=r*h-i*c,S=u*m-l*_,E=u*g-f*_,A=u*p-d*_,x=l*g-f*m,N=l*p-d*m,v=f*p-d*g;let z=M*v-b*N+T*x+y*A-O*E+R*S;return z?(z=1/z,t[0]=(a*v-c*N+h*x)*z,t[1]=(r*N-s*v-i*x)*z,t[2]=(m*R-g*O+p*y)*z,t[3]=(f*O-l*R-d*y)*z,t[4]=(c*A-o*v-h*E)*z,t[5]=(n*v-r*A+i*E)*z,t[6]=(g*T-_*R-p*b)*z,t[7]=(u*R-f*T+d*b)*z,t[8]=(o*N-a*A+h*S)*z,t[9]=(s*A-n*N-i*S)*z,t[10]=(_*O-m*T+p*M)*z,t[11]=(l*T-u*O-d*M)*z,t[12]=(a*E-o*x-c*S)*z,t[13]=(n*x-s*E+r*S)*z,t[14]=(m*b-_*y-g*M)*z,t[15]=(u*y-l*b+f*M)*z,t):null}function h(t,e,n){const s=e[0],r=e[1],i=e[2],o=e[3],a=e[4],c=e[5],h=e[6],u=e[7],l=e[8],f=e[9],d=e[10],_=e[11],m=e[12],g=e[13],p=e[14],M=e[15];let b=n[0],T=n[1],y=n[2],O=n[3];return t[0]=b*s+T*a+y*l+O*m,t[1]=b*r+T*c+y*f+O*g,t[2]=b*i+T*h+y*d+O*p,t[3]=b*o+T*u+y*_+O*M,b=n[4],T=n[5],y=n[6],O=n[7],t[4]=b*s+T*a+y*l+O*m,t[5]=b*r+T*c+y*f+O*g,t[6]=b*i+T*h+y*d+O*p,t[7]=b*o+T*u+y*_+O*M,b=n[8],T=n[9],y=n[10],O=n[11],t[8]=b*s+T*a+y*l+O*m,t[9]=b*r+T*c+y*f+O*g,t[10]=b*i+T*h+y*d+O*p,t[11]=b*o+T*u+y*_+O*M,b=n[12],T=n[13],y=n[14],O=n[15],t[12]=b*s+T*a+y*l+O*m,t[13]=b*r+T*c+y*f+O*g,t[14]=b*i+T*h+y*d+O*p,t[15]=b*o+T*u+y*_+O*M,t}function u(t,e,n){const s=n[0],r=n[1],i=n[2];if(e===t)t[12]=e[0]*s+e[4]*r+e[8]*i+e[12],t[13]=e[1]*s+e[5]*r+e[9]*i+e[13],t[14]=e[2]*s+e[6]*r+e[10]*i+e[14],t[15]=e[3]*s+e[7]*r+e[11]*i+e[15];else{const n=e[0],o=e[1],a=e[2],c=e[3],h=e[4],u=e[5],l=e[6],f=e[7],d=e[8],_=e[9],m=e[10],g=e[11];t[0]=n,t[1]=o,t[2]=a,t[3]=c,t[4]=h,t[5]=u,t[6]=l,t[7]=f,t[8]=d,t[9]=_,t[10]=m,t[11]=g,t[12]=n*s+h*r+d*i+e[12],t[13]=o*s+u*r+_*i+e[13],t[14]=a*s+l*r+m*i+e[14],t[15]=c*s+f*r+g*i+e[15]}return t}function l(t,e,n){const s=n[0],r=n[1],i=n[2];return t[0]=e[0]*s,t[1]=e[1]*s,t[2]=e[2]*s,t[3]=e[3]*s,t[4]=e[4]*r,t[5]=e[5]*r,t[6]=e[6]*r,t[7]=e[7]*r,t[8]=e[8]*i,t[9]=e[9]*i,t[10]=e[10]*i,t[11]=e[11]*i,t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t}function f(t,e,n,s){let i,o,a,c,h,u,l,f,d,_,m,g,p,M,b,T,y,O,R,S,E,A,x,N,v=s[0],z=s[1],w=s[2],F=Math.sqrt(v*v+z*z+w*w);return F<(0,r.g)()?null:(F=1/F,v*=F,z*=F,w*=F,i=Math.sin(n),o=Math.cos(n),a=1-o,c=e[0],h=e[1],u=e[2],l=e[3],f=e[4],d=e[5],_=e[6],m=e[7],g=e[8],p=e[9],M=e[10],b=e[11],T=v*v*a+o,y=z*v*a+w*i,O=w*v*a-z*i,R=v*z*a-w*i,S=z*z*a+o,E=w*z*a+v*i,A=v*w*a+z*i,x=z*w*a-v*i,N=w*w*a+o,t[0]=c*T+f*y+g*O,t[1]=h*T+d*y+p*O,t[2]=u*T+_*y+M*O,t[3]=l*T+m*y+b*O,t[4]=c*R+f*S+g*E,t[5]=h*R+d*S+p*E,t[6]=u*R+_*S+M*E,t[7]=l*R+m*S+b*E,t[8]=c*A+f*x+g*N,t[9]=h*A+d*x+p*N,t[10]=u*A+_*x+M*N,t[11]=l*A+m*x+b*N,e!==t&&(t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t)}function d(t,e){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=e[0],t[13]=e[1],t[14]=e[2],t[15]=1,t}function _(t,e,n){if(0===e)return o(t);let s,i,a,c=n[0],h=n[1],u=n[2],l=Math.sqrt(c*c+h*h+u*u);return l<(0,r.g)()?null:(l=1/l,c*=l,h*=l,u*=l,s=Math.sin(e),i=Math.cos(e),a=1-i,t[0]=c*c*a+i,t[1]=h*c*a+u*s,t[2]=u*c*a-h*s,t[3]=0,t[4]=c*h*a-u*s,t[5]=h*h*a+i,t[6]=u*h*a+c*s,t[7]=0,t[8]=c*u*a+h*s,t[9]=h*u*a-c*s,t[10]=u*u*a+i,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t)}function m(t,e){const n=Math.sin(e),s=Math.cos(e);return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=s,t[6]=n,t[7]=0,t[8]=0,t[9]=-n,t[10]=s,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function g(t,e,n){const s=e[0],r=e[1],i=e[2],o=e[3],a=s+s,c=r+r,h=i+i,u=s*a,l=s*c,f=s*h,d=r*c,_=r*h,m=i*h,g=o*a,p=o*c,M=o*h;return t[0]=1-(d+m),t[1]=l+M,t[2]=f-p,t[3]=0,t[4]=l-M,t[5]=1-(u+m),t[6]=_+g,t[7]=0,t[8]=f+p,t[9]=_-g,t[10]=1-(u+d),t[11]=0,t[12]=n[0],t[13]=n[1],t[14]=n[2],t[15]=1,t}const p=(0,s.c)();function M(t,e,n,s){const r=e[0],i=e[1],o=e[2],a=e[3],c=r+r,h=i+i,u=o+o,l=r*c,f=r*h,d=r*u,_=i*h,m=i*u,g=o*u,p=a*c,M=a*h,b=a*u,T=s[0],y=s[1],O=s[2];return t[0]=(1-(_+g))*T,t[1]=(f+b)*T,t[2]=(d-M)*T,t[3]=0,t[4]=(f-b)*y,t[5]=(1-(l+g))*y,t[6]=(m+p)*y,t[7]=0,t[8]=(d+M)*O,t[9]=(m-p)*O,t[10]=(1-(l+_))*O,t[11]=0,t[12]=n[0],t[13]=n[1],t[14]=n[2],t[15]=1,t}function b(t,e,n){return t[0]=e[0]-n[0],t[1]=e[1]-n[1],t[2]=e[2]-n[2],t[3]=e[3]-n[3],t[4]=e[4]-n[4],t[5]=e[5]-n[5],t[6]=e[6]-n[6],t[7]=e[7]-n[7],t[8]=e[8]-n[8],t[9]=e[9]-n[9],t[10]=e[10]-n[10],t[11]=e[11]-n[11],t[12]=e[12]-n[12],t[13]=e[13]-n[13],t[14]=e[14]-n[14],t[15]=e[15]-n[15],t}function T(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]&&t[3]===e[3]&&t[4]===e[4]&&t[5]===e[5]&&t[6]===e[6]&&t[7]===e[7]&&t[8]===e[8]&&t[9]===e[9]&&t[10]===e[10]&&t[11]===e[11]&&t[12]===e[12]&&t[13]===e[13]&&t[14]===e[14]&&t[15]===e[15]}function y(t,e){if(t===e)return!0;const n=t[0],s=t[1],i=t[2],o=t[3],a=t[4],c=t[5],h=t[6],u=t[7],l=t[8],f=t[9],d=t[10],_=t[11],m=t[12],g=t[13],p=t[14],M=t[15],b=e[0],T=e[1],y=e[2],O=e[3],R=e[4],S=e[5],E=e[6],A=e[7],x=e[8],N=e[9],v=e[10],z=e[11],w=e[12],F=e[13],I=e[14],P=e[15],j=(0,r.g)();return Math.abs(n-b)<=j*Math.max(1,Math.abs(n),Math.abs(b))&&Math.abs(s-T)<=j*Math.max(1,Math.abs(s),Math.abs(T))&&Math.abs(i-y)<=j*Math.max(1,Math.abs(i),Math.abs(y))&&Math.abs(o-O)<=j*Math.max(1,Math.abs(o),Math.abs(O))&&Math.abs(a-R)<=j*Math.max(1,Math.abs(a),Math.abs(R))&&Math.abs(c-S)<=j*Math.max(1,Math.abs(c),Math.abs(S))&&Math.abs(h-E)<=j*Math.max(1,Math.abs(h),Math.abs(E))&&Math.abs(u-A)<=j*Math.max(1,Math.abs(u),Math.abs(A))&&Math.abs(l-x)<=j*Math.max(1,Math.abs(l),Math.abs(x))&&Math.abs(f-N)<=j*Math.max(1,Math.abs(f),Math.abs(N))&&Math.abs(d-v)<=j*Math.max(1,Math.abs(d),Math.abs(v))&&Math.abs(_-z)<=j*Math.max(1,Math.abs(_),Math.abs(z))&&Math.abs(m-w)<=j*Math.max(1,Math.abs(m),Math.abs(w))&&Math.abs(g-F)<=j*Math.max(1,Math.abs(g),Math.abs(F))&&Math.abs(p-I)<=j*Math.max(1,Math.abs(p),Math.abs(I))&&Math.abs(M-P)<=j*Math.max(1,Math.abs(M),Math.abs(P))}function O(t){const e=(0,r.g)(),n=t[0],s=t[1],i=t[2],o=t[4],a=t[5],c=t[6],h=t[8],u=t[9],l=t[10];return Math.abs(1-(n*n+o*o+h*h))<=e&&Math.abs(1-(s*s+a*a+u*u))<=e&&Math.abs(1-(i*i+c*c+l*l))<=e}const R=h,S=b;Object.freeze(Object.defineProperty({__proto__:null,copy:function(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t},set:i,identity:o,transpose:a,invert:c,adjoint:function(t,e){const n=e[0],s=e[1],r=e[2],i=e[3],o=e[4],a=e[5],c=e[6],h=e[7],u=e[8],l=e[9],f=e[10],d=e[11],_=e[12],m=e[13],g=e[14],p=e[15];return t[0]=a*(f*p-d*g)-l*(c*p-h*g)+m*(c*d-h*f),t[1]=-(s*(f*p-d*g)-l*(r*p-i*g)+m*(r*d-i*f)),t[2]=s*(c*p-h*g)-a*(r*p-i*g)+m*(r*h-i*c),t[3]=-(s*(c*d-h*f)-a*(r*d-i*f)+l*(r*h-i*c)),t[4]=-(o*(f*p-d*g)-u*(c*p-h*g)+_*(c*d-h*f)),t[5]=n*(f*p-d*g)-u*(r*p-i*g)+_*(r*d-i*f),t[6]=-(n*(c*p-h*g)-o*(r*p-i*g)+_*(r*h-i*c)),t[7]=n*(c*d-h*f)-o*(r*d-i*f)+u*(r*h-i*c),t[8]=o*(l*p-d*m)-u*(a*p-h*m)+_*(a*d-h*l),t[9]=-(n*(l*p-d*m)-u*(s*p-i*m)+_*(s*d-i*l)),t[10]=n*(a*p-h*m)-o*(s*p-i*m)+_*(s*h-i*a),t[11]=-(n*(a*d-h*l)-o*(s*d-i*l)+u*(s*h-i*a)),t[12]=-(o*(l*g-f*m)-u*(a*g-c*m)+_*(a*f-c*l)),t[13]=n*(l*g-f*m)-u*(s*g-r*m)+_*(s*f-r*l),t[14]=-(n*(a*g-c*m)-o*(s*g-r*m)+_*(s*c-r*a)),t[15]=n*(a*f-c*l)-o*(s*f-r*l)+u*(s*c-r*a),t},determinant:function(t){const e=t[0],n=t[1],s=t[2],r=t[3],i=t[4],o=t[5],a=t[6],c=t[7],h=t[8],u=t[9],l=t[10],f=t[11],d=t[12],_=t[13],m=t[14],g=t[15];return(e*o-n*i)*(l*g-f*m)-(e*a-s*i)*(u*g-f*_)+(e*c-r*i)*(u*m-l*_)+(n*a-s*o)*(h*g-f*d)-(n*c-r*o)*(h*m-l*d)+(s*c-r*a)*(h*_-u*d)},multiply:h,translate:u,scale:l,rotate:f,rotateX:function(t,e,n){const s=Math.sin(n),r=Math.cos(n),i=e[4],o=e[5],a=e[6],c=e[7],h=e[8],u=e[9],l=e[10],f=e[11];return e!==t&&(t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[4]=i*r+h*s,t[5]=o*r+u*s,t[6]=a*r+l*s,t[7]=c*r+f*s,t[8]=h*r-i*s,t[9]=u*r-o*s,t[10]=l*r-a*s,t[11]=f*r-c*s,t},rotateY:function(t,e,n){const s=Math.sin(n),r=Math.cos(n),i=e[0],o=e[1],a=e[2],c=e[3],h=e[8],u=e[9],l=e[10],f=e[11];return e!==t&&(t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[0]=i*r-h*s,t[1]=o*r-u*s,t[2]=a*r-l*s,t[3]=c*r-f*s,t[8]=i*s+h*r,t[9]=o*s+u*r,t[10]=a*s+l*r,t[11]=c*s+f*r,t},rotateZ:function(t,e,n){const s=Math.sin(n),r=Math.cos(n),i=e[0],o=e[1],a=e[2],c=e[3],h=e[4],u=e[5],l=e[6],f=e[7];return e!==t&&(t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[0]=i*r+h*s,t[1]=o*r+u*s,t[2]=a*r+l*s,t[3]=c*r+f*s,t[4]=h*r-i*s,t[5]=u*r-o*s,t[6]=l*r-a*s,t[7]=f*r-c*s,t},fromTranslation:d,fromScaling:function(t,e){return t[0]=e[0],t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=e[1],t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=e[2],t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},fromRotation:_,fromXRotation:m,fromYRotation:function(t,e){const n=Math.sin(e),s=Math.cos(e);return t[0]=s,t[1]=0,t[2]=-n,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=n,t[9]=0,t[10]=s,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},fromZRotation:function(t,e){const n=Math.sin(e),s=Math.cos(e);return t[0]=s,t[1]=n,t[2]=0,t[3]=0,t[4]=-n,t[5]=s,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},fromRotationTranslation:g,fromQuat2:function(t,e){const n=p,s=-e[0],r=-e[1],i=-e[2],o=e[3],a=e[4],c=e[5],h=e[6],u=e[7],l=s*s+r*r+i*i+o*o;return l>0?(n[0]=2*(a*o+u*s+c*i-h*r)/l,n[1]=2*(c*o+u*r+h*s-a*i)/l,n[2]=2*(h*o+u*i+a*r-c*s)/l):(n[0]=2*(a*o+u*s+c*i-h*r),n[1]=2*(c*o+u*r+h*s-a*i),n[2]=2*(h*o+u*i+a*r-c*s)),g(t,e,n),t},getTranslation:function(t,e){return t[0]=e[12],t[1]=e[13],t[2]=e[14],t},getScaling:function(t,e){const n=e[0],s=e[1],r=e[2],i=e[4],o=e[5],a=e[6],c=e[8],h=e[9],u=e[10];return t[0]=Math.sqrt(n*n+s*s+r*r),t[1]=Math.sqrt(i*i+o*o+a*a),t[2]=Math.sqrt(c*c+h*h+u*u),t},getRotation:function(t,e){const n=e[0]+e[5]+e[10];let s=0;return n>0?(s=2*Math.sqrt(n+1),t[3]=.25*s,t[0]=(e[6]-e[9])/s,t[1]=(e[8]-e[2])/s,t[2]=(e[1]-e[4])/s):e[0]>e[5]&&e[0]>e[10]?(s=2*Math.sqrt(1+e[0]-e[5]-e[10]),t[3]=(e[6]-e[9])/s,t[0]=.25*s,t[1]=(e[1]+e[4])/s,t[2]=(e[8]+e[2])/s):e[5]>e[10]?(s=2*Math.sqrt(1+e[5]-e[0]-e[10]),t[3]=(e[8]-e[2])/s,t[0]=(e[1]+e[4])/s,t[1]=.25*s,t[2]=(e[6]+e[9])/s):(s=2*Math.sqrt(1+e[10]-e[0]-e[5]),t[3]=(e[1]-e[4])/s,t[0]=(e[8]+e[2])/s,t[1]=(e[6]+e[9])/s,t[2]=.25*s),t},fromRotationTranslationScale:M,fromRotationTranslationScaleOrigin:function(t,e,n,s,r){const i=e[0],o=e[1],a=e[2],c=e[3],h=i+i,u=o+o,l=a+a,f=i*h,d=i*u,_=i*l,m=o*u,g=o*l,p=a*l,M=c*h,b=c*u,T=c*l,y=s[0],O=s[1],R=s[2],S=r[0],E=r[1],A=r[2],x=(1-(m+p))*y,N=(d+T)*y,v=(_-b)*y,z=(d-T)*O,w=(1-(f+p))*O,F=(g+M)*O,I=(_+b)*R,P=(g-M)*R,j=(1-(f+m))*R;return t[0]=x,t[1]=N,t[2]=v,t[3]=0,t[4]=z,t[5]=w,t[6]=F,t[7]=0,t[8]=I,t[9]=P,t[10]=j,t[11]=0,t[12]=n[0]+S-(x*S+z*E+I*A),t[13]=n[1]+E-(N*S+w*E+P*A),t[14]=n[2]+A-(v*S+F*E+j*A),t[15]=1,t},fromQuat:function(t,e){const n=e[0],s=e[1],r=e[2],i=e[3],o=n+n,a=s+s,c=r+r,h=n*o,u=s*o,l=s*a,f=r*o,d=r*a,_=r*c,m=i*o,g=i*a,p=i*c;return t[0]=1-l-_,t[1]=u+p,t[2]=f-g,t[3]=0,t[4]=u-p,t[5]=1-h-_,t[6]=d+m,t[7]=0,t[8]=f+g,t[9]=d-m,t[10]=1-h-l,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},frustum:function(t,e,n,s,r,i,o){const a=1/(n-e),c=1/(r-s),h=1/(i-o);return t[0]=2*i*a,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=2*i*c,t[6]=0,t[7]=0,t[8]=(n+e)*a,t[9]=(r+s)*c,t[10]=(o+i)*h,t[11]=-1,t[12]=0,t[13]=0,t[14]=o*i*2*h,t[15]=0,t},perspective:function(t,e,n,s,r){const i=1/Math.tan(e/2);let o;return t[0]=i/n,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=i,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[11]=-1,t[12]=0,t[13]=0,t[15]=0,null!=r&&r!==1/0?(o=1/(s-r),t[10]=(r+s)*o,t[14]=2*r*s*o):(t[10]=-1,t[14]=-2*s),t},perspectiveFromFieldOfView:function(t,e,n,s){const r=Math.tan(e.upDegrees*Math.PI/180),i=Math.tan(e.downDegrees*Math.PI/180),o=Math.tan(e.leftDegrees*Math.PI/180),a=Math.tan(e.rightDegrees*Math.PI/180),c=2/(o+a),h=2/(r+i);return t[0]=c,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=h,t[6]=0,t[7]=0,t[8]=-(o-a)*c*.5,t[9]=(r-i)*h*.5,t[10]=s/(n-s),t[11]=-1,t[12]=0,t[13]=0,t[14]=s*n/(n-s),t[15]=0,t},ortho:function(t,e,n,s,r,i,o){const a=1/(e-n),c=1/(s-r),h=1/(i-o);return t[0]=-2*a,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=-2*c,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=2*h,t[11]=0,t[12]=(e+n)*a,t[13]=(r+s)*c,t[14]=(o+i)*h,t[15]=1,t},lookAt:function(t,e,n,s){let i,a,c,h,u,l,f,d,_,m;const g=e[0],p=e[1],M=e[2],b=s[0],T=s[1],y=s[2],O=n[0],R=n[1],S=n[2],E=(0,r.g)();return Math.abs(g-O)<E&&Math.abs(p-R)<E&&Math.abs(M-S)<E?o(t):(f=g-O,d=p-R,_=M-S,m=1/Math.sqrt(f*f+d*d+_*_),f*=m,d*=m,_*=m,i=T*_-y*d,a=y*f-b*_,c=b*d-T*f,m=Math.sqrt(i*i+a*a+c*c),m?(m=1/m,i*=m,a*=m,c*=m):(i=0,a=0,c=0),h=d*c-_*a,u=_*i-f*c,l=f*a-d*i,m=Math.sqrt(h*h+u*u+l*l),m?(m=1/m,h*=m,u*=m,l*=m):(h=0,u=0,l=0),t[0]=i,t[1]=h,t[2]=f,t[3]=0,t[4]=a,t[5]=u,t[6]=d,t[7]=0,t[8]=c,t[9]=l,t[10]=_,t[11]=0,t[12]=-(i*g+a*p+c*M),t[13]=-(h*g+u*p+l*M),t[14]=-(f*g+d*p+_*M),t[15]=1,t)},targetTo:function(t,e,n,s){const r=e[0],i=e[1],o=e[2],a=s[0],c=s[1],h=s[2];let u=r-n[0],l=i-n[1],f=o-n[2],d=u*u+l*l+f*f;d>0&&(d=1/Math.sqrt(d),u*=d,l*=d,f*=d);let _=c*f-h*l,m=h*u-a*f,g=a*l-c*u;return d=_*_+m*m+g*g,d>0&&(d=1/Math.sqrt(d),_*=d,m*=d,g*=d),t[0]=_,t[1]=m,t[2]=g,t[3]=0,t[4]=l*g-f*m,t[5]=f*_-u*g,t[6]=u*m-l*_,t[7]=0,t[8]=u,t[9]=l,t[10]=f,t[11]=0,t[12]=r,t[13]=i,t[14]=o,t[15]=1,t},str:function(t){return"mat4("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+", "+t[4]+", "+t[5]+", "+t[6]+", "+t[7]+", "+t[8]+", "+t[9]+", "+t[10]+", "+t[11]+", "+t[12]+", "+t[13]+", "+t[14]+", "+t[15]+")"},frob:function(t){return Math.sqrt(t[0]**2+t[1]**2+t[2]**2+t[3]**2+t[4]**2+t[5]**2+t[6]**2+t[7]**2+t[8]**2+t[9]**2+t[10]**2+t[11]**2+t[12]**2+t[13]**2+t[14]**2+t[15]**2)},add:function(t,e,n){return t[0]=e[0]+n[0],t[1]=e[1]+n[1],t[2]=e[2]+n[2],t[3]=e[3]+n[3],t[4]=e[4]+n[4],t[5]=e[5]+n[5],t[6]=e[6]+n[6],t[7]=e[7]+n[7],t[8]=e[8]+n[8],t[9]=e[9]+n[9],t[10]=e[10]+n[10],t[11]=e[11]+n[11],t[12]=e[12]+n[12],t[13]=e[13]+n[13],t[14]=e[14]+n[14],t[15]=e[15]+n[15],t},subtract:b,multiplyScalar:function(t,e,n){return t[0]=e[0]*n,t[1]=e[1]*n,t[2]=e[2]*n,t[3]=e[3]*n,t[4]=e[4]*n,t[5]=e[5]*n,t[6]=e[6]*n,t[7]=e[7]*n,t[8]=e[8]*n,t[9]=e[9]*n,t[10]=e[10]*n,t[11]=e[11]*n,t[12]=e[12]*n,t[13]=e[13]*n,t[14]=e[14]*n,t[15]=e[15]*n,t},multiplyScalarAndAdd:function(t,e,n,s){return t[0]=e[0]+n[0]*s,t[1]=e[1]+n[1]*s,t[2]=e[2]+n[2]*s,t[3]=e[3]+n[3]*s,t[4]=e[4]+n[4]*s,t[5]=e[5]+n[5]*s,t[6]=e[6]+n[6]*s,t[7]=e[7]+n[7]*s,t[8]=e[8]+n[8]*s,t[9]=e[9]+n[9]*s,t[10]=e[10]+n[10]*s,t[11]=e[11]+n[11]*s,t[12]=e[12]+n[12]*s,t[13]=e[13]+n[13]*s,t[14]=e[14]+n[14]*s,t[15]=e[15]+n[15]*s,t},exactEquals:T,equals:y,isOrthoNormal:O,mul:R,sub:S},Symbol.toStringTag,{value:"Module"}))},13598:(t,e,n)=>{function s(){return[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]}function r(t){return[t[0],t[1],t[2],t[3],t[4],t[5],t[6],t[7],t[8],t[9],t[10],t[11],t[12],t[13],t[14],t[15]]}function i(t,e){return new Float64Array(t,e,16)}n.d(e,{I:()=>o,a:()=>i,b:()=>r,c:()=>s});const o=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];Object.freeze(Object.defineProperty({__proto__:null,create:s,clone:r,fromValues:function(t,e,n,s,r,i,o,a,c,h,u,l,f,d,_,m){return[t,e,n,s,r,i,o,a,c,h,u,l,f,d,_,m]},createView:i,IDENTITY:o},Symbol.toStringTag,{value:"Module"}))},94961:(t,e,n)=>{function s(){return[0,0,0,1]}function r(t){return[t[0],t[1],t[2],t[3]]}function i(t,e){return new Float64Array(t,e,4)}n.d(e,{I:()=>o,a:()=>s,b:()=>r,c:()=>i});const o=[0,0,0,1];Object.freeze(Object.defineProperty({__proto__:null,create:s,clone:r,fromValues:function(t,e,n,s){return[t,e,n,s]},createView:i,IDENTITY:o},Symbol.toStringTag,{value:"Module"}))},29268:(t,e,n)=>{n.d(e,{a:()=>M,c:()=>g,g:()=>b,h:()=>p,j:()=>O,m:()=>v}),n(80442);var s,r,i=n(92604),o=n(22021),a=n(70586),c=n(52138),h=n(17896),u=n(65617),l=n(98766),f=n(88669);(r=s||(s={}))[r.X=0]="X",r[r.Y=1]="Y",r[r.Z=2]="Z";var d=n(78341),_=n(61277),m=n(12981);function g(){return(0,f.c)()}function p(t,e=g()){return(0,l.c)(e,t)}function M(t){return t[3]}function b(t){return t}function T(t,e,n){if((0,a.Wi)(e))return!1;const{origin:s,direction:r}=e,i=y;i[0]=s[0]-t[0],i[1]=s[1]-t[1],i[2]=s[2]-t[2];const o=r[0]*r[0]+r[1]*r[1]+r[2]*r[2];if(0===o)return!1;const c=2*(r[0]*i[0]+r[1]*i[1]+r[2]*i[2]),h=c*c-4*o*(i[0]*i[0]+i[1]*i[1]+i[2]*i[2]-t[3]*t[3]);if(h<0)return!1;const u=Math.sqrt(h);let l=(-c-u)/(2*o);const f=(-c+u)/(2*o);return(l<0||f<l&&f>0)&&(l=f),!(l<0||(n&&(n[0]=s[0]+r[0]*l,n[1]=s[1]+r[1]*l,n[2]=s[2]+r[2]*l),0))}const y=(0,u.c)();function O(t,e){return T(t,e,null)}function R(t,e,n){const s=m.WM.get(),r=m.MP.get();(0,h.f)(s,e.origin,e.direction);const i=M(t);(0,h.f)(n,s,e.origin),(0,h.g)(n,n,1/(0,h.l)(n)*i);const o=E(t,e.origin),a=(0,_.EU)(e.origin,n);return(0,c.d)(r,a+o,s),(0,h.m)(n,n,r),n}function S(t,e,n){const s=(0,h.b)(m.WM.get(),e,t),r=(0,h.g)(m.WM.get(),s,t[3]/(0,h.l)(s));return(0,h.a)(n,r,t)}function E(t,e){const n=(0,h.b)(m.WM.get(),e,t),s=(0,h.l)(n),r=M(t),i=r+Math.abs(r-s);return(0,o.ZF)(r/i)}const A=(0,u.c)();function x(t,e,n,r){const i=(0,h.b)(A,e,t);switch(n){case s.X:{const t=(0,o.jE)(i,A)[2];return(0,h.s)(r,-Math.sin(t),Math.cos(t),0)}case s.Y:{const t=(0,o.jE)(i,A),e=t[1],n=t[2],s=Math.sin(e);return(0,h.s)(r,-s*Math.cos(n),-s*Math.sin(n),Math.cos(e))}case s.Z:return(0,h.n)(r,i);default:return}}function N(t,e){const n=(0,h.b)(z,e,t);return(0,h.l)(n)-t[3]}function v(t,e){const n=(0,h.d)(t,e),s=M(t);return n<=s*s}const z=(0,u.c)(),w=g();Object.freeze(Object.defineProperty({__proto__:null,create:g,copy:p,fromCenterAndRadius:function(t,e){return(0,f.f)(t[0],t[1],t[2],e)},wrap:function(t){return t},clear:function(t){t[0]=t[1]=t[2]=t[3]=0},fromRadius:function(t,e){return t[0]=t[1]=t[2]=0,t[3]=e,t},getRadius:M,getCenter:b,fromValues:function(t,e,n,s){return(0,f.f)(t,e,n,s)},elevate:function(t,e,n){return t!==n&&(0,h.c)(n,t),n[3]=t[3]+e,n},setExtent:function(t,e,n){return i.Z.getLogger("esri.geometry.support.sphere").error("sphere.setExtent is not yet supported"),t===n?n:p(t,n)},intersectRay:T,intersectsRay:O,intersectRayClosestSilhouette:function(t,e,n){if(T(t,e,n))return n;const s=R(t,e,m.WM.get());return(0,h.a)(n,e.origin,(0,h.g)(m.WM.get(),e.direction,(0,h.i)(e.origin,s)/(0,h.l)(e.direction))),n},closestPointOnSilhouette:R,closestPoint:function(t,e,n){return T(t,e,n)?n:((0,d.JI)(e,t,n),S(t,n,n))},projectPoint:S,distanceToSilhouette:function(t,e){const n=(0,h.b)(m.WM.get(),e,t),s=(0,h.p)(n),r=t[3]*t[3];return Math.sqrt(Math.abs(s-r))},angleToSilhouette:E,axisAt:x,altitudeAt:N,setAltitudeAt:function(t,e,n,r){const i=N(t,e),o=x(t,e,s.Z,z),a=(0,h.g)(z,o,n-i);return(0,h.a)(r,e,a)},containsPoint:v,tmpSphere:w},Symbol.toStringTag,{value:"Module"}))},97323:(t,e,n)=>{function s(){return[0,0]}function r(t,e){return[t,e]}function i(t,e){return new Float64Array(t,e,2)}function o(){return r(1,1)}function a(){return r(1,0)}function c(){return r(0,1)}n.d(e,{Z:()=>h,a:()=>s,c:()=>i});const h=[0,0],u=o(),l=a(),f=c();Object.freeze(Object.defineProperty({__proto__:null,create:s,clone:function(t){return[t[0],t[1]]},fromValues:r,fromArray:function(t){const e=[0,0],n=Math.min(2,t.length);for(let s=0;s<n;++s)e[s]=t[s];return e},createView:i,zeros:function(){return[0,0]},ones:o,unitX:a,unitY:c,ZEROS:h,ONES:u,UNIT_X:l,UNIT_Y:f},Symbol.toStringTag,{value:"Module"}))},88669:(t,e,n)=>{function s(){return[0,0,0,0]}function r(t,e,n,s){return[t,e,n,s]}function i(t,e){return new Float64Array(t,e,4)}function o(){return r(1,1,1,1)}function a(){return r(1,0,0,0)}function c(){return r(0,1,0,0)}function h(){return r(0,0,1,0)}function u(){return r(0,0,0,1)}n.d(e,{a:()=>i,c:()=>s,f:()=>r});const l=o(),f=a(),d=c(),_=h(),m=u();Object.freeze(Object.defineProperty({__proto__:null,create:s,clone:function(t){return[t[0],t[1],t[2],t[3]]},fromValues:r,fromArray:function(t){const e=[0,0,0,0],n=Math.min(4,t.length);for(let s=0;s<n;++s)e[s]=t[s];return e},createView:i,zeros:function(){return[0,0,0,0]},ones:o,unitX:a,unitY:c,unitZ:h,unitW:u,ZEROS:[0,0,0,0],ONES:l,UNIT_X:f,UNIT_Y:d,UNIT_Z:_,UNIT_W:m},Symbol.toStringTag,{value:"Module"}))},69801:(t,e,n)=>{n.d(e,{WJ:()=>c,Xq:()=>a});var s,r,i=n(70586),o=n(44553);(r=s||(s={}))[r.ALL=0]="ALL",r[r.SOME=1]="SOME";class a{constructor(t,e,n){this._namespace=t,this._storage=e,this._removeFunc=!1,this._hit=0,this._miss=0,this._storage.register(this),this._namespace+=":",n&&(this._storage.registerRemoveFunc(this._namespace,n),this._removeFunc=!0)}destroy(){this._storage.clear(this._namespace),this._removeFunc&&this._storage.deregisterRemoveFunc(this._namespace),this._storage.deregister(this),this._storage=null}get namespace(){return this._namespace.slice(0,-1)}get hitRate(){return this._hit/(this._hit+this._miss)}get size(){return this._storage.size}get maxSize(){return this._storage.maxSize}resetHitRate(){this._hit=this._miss=0}put(t,e,n,s=0){this._storage.put(this._namespace+t,e,n,s)}get(t){const e=this._storage.get(this._namespace+t);return void 0===e?++this._miss:++this._hit,e}pop(t){const e=this._storage.pop(this._namespace+t);return void 0===e?++this._miss:++this._hit,e}updateSize(t,e,n){this._storage.updateSize(this._namespace+t,e,n)}clear(){this._storage.clear(this._namespace)}clearAll(){this._storage.clearAll()}getStats(){return this._storage.getStats()}resetStats(){this._storage.resetStats()}}class c{constructor(t=10485760){this._maxSize=t,this._db=new Map,this._size=0,this._hit=0,this._miss=0,this._removeFuncs=new o.Z,this._users=new o.Z}destroy(){this.clearAll(),this._removeFuncs.clear(),this._users.clear(),this._db=null}register(t){this._users.push(t)}deregister(t){this._users.removeUnordered(t)}registerRemoveFunc(t,e){this._removeFuncs.push([t,e])}deregisterRemoveFunc(t){this._removeFuncs.filterInPlace((e=>e[0]!==t))}get size(){return this._size}get maxSize(){return this._maxSize}set maxSize(t){this._maxSize=Math.max(t,0),this._checkSizeLimit()}put(t,e,n,r){const i=this._db.get(t);if(i&&(this._size-=i.size,this._db.delete(t),i.entry!==e&&this._notifyRemove(t,i.entry,s.ALL)),n>this._maxSize)return void this._notifyRemove(t,e,s.ALL);if(void 0===e)return void console.warn("Refusing to cache undefined entry ");if(!n||n<0)return void console.warn("Refusing to cache entry with invalid size "+n);const o=1+Math.max(r,-3)- -3;this._db.set(t,{entry:e,size:n,lifetime:o,lives:o}),this._size+=n,this._checkSizeLimit()}updateSize(t,e,n){const r=this._db.get(t);if(r&&r.entry===e){for(this._size-=r.size;n>this._maxSize;){const r=this._notifyRemove(t,e,s.SOME);if(!((0,i.pC)(r)&&r>0))return void this._db.delete(t);n=r}r.size=n,this._size+=n,this._checkSizeLimit()}}pop(t){const e=this._db.get(t);if(e)return this._size-=e.size,this._db.delete(t),++this._hit,e.entry;++this._miss}get(t){const e=this._db.get(t);if(void 0!==e)return this._db.delete(t),e.lives=e.lifetime,this._db.set(t,e),++this._hit,e.entry;++this._miss}getStats(){const t={Size:Math.round(this._size/1048576)+"/"+Math.round(this._maxSize/1048576)+"MB","Hit rate":Math.round(100*this._getHitRate())+"%",Entries:this._db.size.toString()},e={},n=new Array;this._db.forEach(((t,s)=>{const r=t.lifetime;n[r]=(n[r]||0)+t.size,this._users.forAll((n=>{const r=n.namespace;if(s.startsWith(r)){const n=e[r]||0;e[r]=n+t.size}}))}));const s={};this._users.forAll((t=>{const n=t.namespace;if(!isNaN(t.hitRate)&&t.hitRate>0){const r=e[n]||0;e[n]=r,s[n]=Math.round(100*t.hitRate)+"%"}else s[n]="0%"}));const r=Object.keys(e);r.sort(((t,n)=>e[n]-e[t])),r.forEach((n=>t[n]=Math.round(e[n]/2**20)+"MB / "+s[n]));for(let e=n.length-1;e>=0;--e){const s=n[e];s&&(t["Priority "+(e+-3-1)]=Math.round(s/this.size*100)+"%")}return t}resetStats(){this._hit=this._miss=0,this._users.forAll((t=>t.resetHitRate()))}clear(t){this._db.forEach(((e,n)=>{n.startsWith(t)&&(this._size-=e.size,this._db.delete(n),this._notifyRemove(n,e.entry,s.ALL))}))}clearAll(){this._db.forEach(((t,e)=>this._notifyRemove(e,t.entry,s.ALL))),this._size=0,this._db.clear()}_getHitRate(){return this._hit/(this._hit+this._miss)}_notifyRemove(t,e,n){let s;return this._removeFuncs.some((r=>{if(t.startsWith(r[0])){const t=r[1](e,n);return"number"==typeof t&&(s=t),!0}return!1})),s}_checkSizeLimit(){if(!(this._size<=this._maxSize))for(const[t,e]of this._db){if(this._db.delete(t),e.lives<=1){this._size-=e.size;const n=this._notifyRemove(t,e.entry,s.SOME);(0,i.pC)(n)&&n>0&&(this._size+=n,e.lives=e.lifetime,e.size=n,this._db.set(t,e))}else--e.lives,this._db.set(t,e);if(this._size<=.9*this.maxSize)return}}}},22807:(t,e,n)=>{n.d(e,{x:()=>r});var s=n(41213);class r{constructor(t){this._allocator=t,this._items=[],this._itemsPtr=0,this._grow()}get(){return 0===this._itemsPtr&&(0,s.Y)((()=>this._reset())),this._itemsPtr===this._items.length&&this._grow(),this._items[this._itemsPtr++]}_reset(){const t=Math.min(3*Math.max(8,this._itemsPtr),this._itemsPtr+3*i);this._items.length=Math.min(t,this._items.length),this._itemsPtr=0}_grow(){for(let t=0;t<Math.max(8,Math.min(this._items.length,i));t++)this._items.push(this._allocator())}}const i=1024},10661:(t,e,n)=>{n.d(e,{s:()=>r});var s=n(39020);class r{constructor(){this._observers=[]}observe(t){return this._observers.includes(t)||this._observers.push(t),new s.X(this._observers,t)}notify(){const t=this._observers.slice();for(let e=0;e<t.length;++e){const n=t[e];n.onInvalidated(),n.onCommitted()}}}},43090:(t,e,n)=>{function s(t){return 32+t.length}function r(t){if(!t)return 0;let e=c;for(const n in t)if(t.hasOwnProperty(n)){const r=t[n];switch(typeof r){case"string":e+=s(r);break;case"number":e+=16;break;case"boolean":e+=4}}return e}function i(t){if(!t)return 0;if(Array.isArray(t))return function(t){const e=t.length;if(0===e||"number"==typeof t[0])return 32+8*e;let n=h;for(let s=0;s<e;s++)n+=o(t[s]);return n}(t);let e=c;for(const n in t)t.hasOwnProperty(n)&&(e+=o(t[n]));return e}function o(t){switch(typeof t){case"object":return i(t);case"string":return s(t);case"number":return 16;case"boolean":return 4;default:return 8}}function a(t,e){return h+t.length*e}n.d(e,{Ul:()=>i,Y8:()=>u,do:()=>a,f2:()=>r});const c=32,h=32;var u;!function(t){t[t.KILOBYTES=1024]="KILOBYTES",t[t.MEGABYTES=1048576]="MEGABYTES",t[t.GIGABYTES=1073741824]="GIGABYTES"}(u||(u={}))},16996:(t,e,n)=>{n.d(e,{Ue:()=>c,nF:()=>u,zk:()=>h});var s=n(22021),r=n(22807),i=n(17896),o=n(65617),a=n(12981);function c(t){return t?{origin:(0,o.a)(t.origin),vector:(0,o.a)(t.vector)}:{origin:(0,o.c)(),vector:(0,o.c)()}}function h(t,e,n=c()){return(0,i.c)(n.origin,t),(0,i.b)(n.vector,e,t),n}function u(t,e,n){return function(t,e,n,r,o){const{vector:c,origin:h}=t,u=(0,i.b)(a.WM.get(),e,h),l=(0,i.e)(c,u)/(0,i.p)(c);return(0,i.g)(o,c,(0,s.uZ)(l,0,1)),(0,i.a)(o,o,t.origin)}(t,e,0,0,n)}(0,o.c)(),(0,o.c)(),new r.x((()=>c()))},51806:(t,e,n)=>{n.d(e,{aX:()=>A});var s=n(68773),r=n(20102),i=n(92604),o=n(70586),a=n(38913),c=n(58901),h=n(82971),u=n(33955);const l={102100:{maxX:20037508.342788905,minX:-20037508.342788905,plus180Line:new c.Z({paths:[[[20037508.342788905,-20037508.342788905],[20037508.342788905,20037508.342788905]]],spatialReference:h.Z.WebMercator}),minus180Line:new c.Z({paths:[[[-20037508.342788905,-20037508.342788905],[-20037508.342788905,20037508.342788905]]],spatialReference:h.Z.WebMercator})},4326:{maxX:180,minX:-180,plus180Line:new c.Z({paths:[[[180,-180],[180,180]]],spatialReference:h.Z.WGS84}),minus180Line:new c.Z({paths:[[[-180,-180],[-180,180]]],spatialReference:h.Z.WGS84})}};function f(t,e){return Math.ceil((t-e)/(2*e))}function d(t,e){const n=_(t);for(const t of n)for(const n of t)n[0]+=e;return t}function _(t){return(0,u.oU)(t)?t.rings:t.paths}var m=n(8744),g=n(40488),p=(n(66577),n(3172)),M=n(11282),b=n(17452);const T=i.Z.getLogger("esri.geometry.support.normalizeUtils");function y(t){return"polygon"===t[0].type}function O(t){return"polyline"===t[0].type}function R(t,e,n){if(e){const e=function(t,e){if(!(t instanceof c.Z||t instanceof a.Z)){const t="straightLineDensify: the input geometry is neither polyline nor polygon";throw T.error(t),new r.Z(t)}const n=_(t),s=[];for(const t of n){const n=[];s.push(n),n.push([t[0][0],t[0][1]]);for(let s=0;s<t.length-1;s++){const r=t[s][0],i=t[s][1],o=t[s+1][0],a=t[s+1][1],c=Math.sqrt((o-r)*(o-r)+(a-i)*(a-i)),h=(a-i)/c,u=(o-r)/c,l=c/e;if(l>1){for(let t=1;t<=l-1;t++){const s=t*e,o=u*s+r,a=h*s+i;n.push([o,a])}const t=(c+Math.floor(l-1)*e)/2,s=u*t+r,o=h*t+i;n.push([s,o])}n.push([o,a])}}return function(t){return"polygon"===t.type}(t)?new a.Z({rings:s,spatialReference:t.spatialReference}):new c.Z({paths:s,spatialReference:t.spatialReference})}(t,1e6);t=(0,g.Sx)(e,!0)}return n&&(t=d(t,n)),t}function S(t,e,n){if(Array.isArray(t)){const s=t[0];if(s>e){const n=f(s,e);t[0]=s+n*(-2*e)}else if(s<n){const e=f(s,n);t[0]=s+e*(-2*n)}}else{const s=t.x;if(s>e){const n=f(s,e);t=t.clone().offset(n*(-2*e),0)}else if(s<n){const e=f(s,n);t=t.clone().offset(e*(-2*n),0)}}return t}function E(t,e){let n=-1;for(let s=0;s<e.cutIndexes.length;s++){const r=e.cutIndexes[s],i=e.geometries[s],o=_(i);for(let t=0;t<o.length;t++){const e=o[t];e.some((n=>{if(n[0]<180)return!0;{let n=0;for(let t=0;t<e.length;t++){const s=e[t][0];n=s>n?s:n}n=Number(n.toFixed(9));const s=-360*f(n,180);for(let n=0;n<e.length;n++){const e=i.getPoint(t,n);i.setPoint(t,n,e.clone().offset(s,0))}return!0}}))}if(r===n){if(y(t))for(const e of _(i))t[r]=t[r].addRing(e);else if(O(t))for(const e of _(i))t[r]=t[r].addPath(e)}else n=r,t[r]=i}return t}async function A(t,e,n){if(!Array.isArray(t))return A([t],e);e&&"string"!=typeof e&&T.warn("normalizeCentralMeridian()","The url object is deprecated, use the url string instead");const r="string"==typeof e?e:e?.url??s.Z.geometryServiceUrl;let i,h,_,y,O,x,N,v,z=0;const w=[],F=[];for(const e of t)if((0,o.Wi)(e))F.push(e);else if(i||(i=e.spatialReference,h=(0,m.C5)(i),_=i.isWebMercator,x=_?102100:4326,y=l[x].maxX,O=l[x].minX,N=l[x].plus180Line,v=l[x].minus180Line),h)if("mesh"===e.type)F.push(e);else if("point"===e.type)F.push(S(e.clone(),y,O));else if("multipoint"===e.type){const t=e.clone();t.points=t.points.map((t=>S(t,y,O))),F.push(t)}else if("extent"===e.type){const t=e.clone()._normalize(!1,!1,h);F.push(t.rings?new a.Z(t):t)}else if(e.extent){const t=e.extent,n=f(t.xmin,O)*(2*y);let s=0===n?e.clone():d(e.clone(),n);t.offset(n,0),t.intersects(N)&&t.xmax!==y?(z=t.xmax>z?t.xmax:z,s=R(s,_),w.push(s),F.push("cut")):t.intersects(v)&&t.xmin!==O?(z=t.xmax*(2*y)>z?t.xmax*(2*y):z,s=R(s,_,360),w.push(s),F.push("cut")):F.push(s)}else F.push(e.clone());else F.push(e);let I=f(z,y),P=-90;const j=I,L=new c.Z;for(;I>0;){const t=360*I-180;L.addPath([[t,P],[t,-1*P]]),P*=-1,I--}if(w.length>0&&j>0){const e=E(w,await async function(t,e,n,s){const r=(0,M.en)(t),i=e[0].spatialReference,o={...s,query:{...r.query,f:"json",sr:JSON.stringify(i),target:JSON.stringify({geometryType:(0,u.Ji)(e[0]),geometries:e}),cutter:JSON.stringify(n)}},a=await(0,p.default)(r.path+"/cut",o),{cutIndexes:c,geometries:h=[]}=a.data;return{cutIndexes:c,geometries:h.map((t=>{const e=(0,u.im)(t);return e.spatialReference=i,e}))}}(r,w,L,n)),s=[],i=[];for(let n=0;n<F.length;n++){const r=F[n];if("cut"!==r)i.push(r);else{const r=e.shift(),a=t[n];(0,o.pC)(a)&&"polygon"===a.type&&a.rings&&a.rings.length>1&&r.rings.length>=a.rings.length?(s.push(r),i.push("simplify")):i.push(_?(0,g.$)(r):r)}}if(!s.length)return i;const a=await async function(t,e,n){const s="string"==typeof t?(0,b.mN)(t):t,r=e[0].spatialReference,i=(0,u.Ji)(e[0]),o={...n,query:{...s.query,f:"json",sr:r.wkid?r.wkid:JSON.stringify(r),geometries:JSON.stringify((c=e,{geometryType:(0,u.Ji)(c[0]),geometries:c.map((t=>t.toJSON()))}))}},{data:a}=await(0,p.default)(s.path+"/simplify",o);var c;return function(t,e,n){const s=(0,u.q9)(e);return t.map((t=>{const e=s.fromJSON(t);return e.spatialReference=n,e}))}(a.geometries,i,r)}(r,s,n),c=[];for(let t=0;t<i.length;t++){const e=i[t];"simplify"!==e?c.push(e):c.push(_?(0,g.$)(a.shift()):a.shift())}return c}const B=[];for(let t=0;t<F.length;t++){const e=F[t];if("cut"!==e)B.push(e);else{const t=w.shift();B.push(!0===_?(0,g.$)(t):t)}}return B}},62073:(t,e,n)=>{n(22021),n(17896);var s,r,i=n(65617);n(29268),n(61277),n(12981),(0,i.c)(),(0,i.c)(),(0,i.c)(),(0,i.c)(),(0,i.c)(),(0,i.c)(),(0,i.c)(),(0,i.c)(),(0,i.c)(),(0,i.c)(),(r=s||(s={}))[r.NONE=0]="NONE",r[r.CLAMP=1]="CLAMP",r[r.INFINITE_MIN=4]="INFINITE_MIN",r[r.INFINITE_MAX=8]="INFINITE_MAX",s.INFINITE_MIN,s.INFINITE_MAX,s.INFINITE_MAX},78341:(t,e,n)=>{n.d(e,{JI:()=>h,Ue:()=>o,re:()=>c}),n(67676);var s=n(22807),r=n(17896),i=n(65617);function o(t){return t?a((0,i.a)(t.origin),(0,i.a)(t.direction)):a((0,i.c)(),(0,i.c)())}function a(t,e){return{origin:t,direction:e}}function c(t,e){const n=u.get();return n.origin=t,n.direction=e,n}function h(t,e,n){const s=(0,r.e)(t.direction,(0,r.b)(n,e,t.origin));return(0,r.a)(n,t.origin,(0,r.g)(n,t.direction,s)),n}n(12981);const u=new s.x((()=>o()))},61277:(t,e,n)=>{n.d(e,{EU:()=>o});var s=n(22021),r=n(17896),i=n(65617);function o(t,e){const n=(0,r.e)(t,e)/((0,r.l)(t)*(0,r.l)(e));return-(0,s.ZF)(n)}(0,i.c)(),(0,i.c)()},12981:(t,e,n)=>{n.d(e,{MP:()=>_,WM:()=>d});var s=n(43090),r=n(41213),i=n(46521),o=n(13598),a=n(94961),c=n(97323),h=n(65617),u=n(88669);class l{constructor(t,e,n){this._itemByteSize=t,this._itemCreate=e,this._buffers=new Array,this._items=new Array,this._itemsPtr=0,this._itemsPerBuffer=Math.ceil(n/this._itemByteSize)}get(){0===this._itemsPtr&&(0,r.Y)((()=>this._reset()));const t=Math.floor(this._itemsPtr/this._itemsPerBuffer);for(;this._buffers.length<=t;){const t=new ArrayBuffer(this._itemsPerBuffer*this._itemByteSize);for(let e=0;e<this._itemsPerBuffer;++e)this._items.push(this._itemCreate(t,e*this._itemByteSize));this._buffers.push(t)}return this._items[this._itemsPtr++]}_reset(){const t=2*(Math.floor(this._itemsPtr/this._itemsPerBuffer)+1);for(;this._buffers.length>t;)this._buffers.pop(),this._items.length=this._buffers.length*this._itemsPerBuffer;this._itemsPtr=0}static createVec2f64(t=f){return new l(16,c.c,t)}static createVec3f64(t=f){return new l(24,h.b,t)}static createVec4f64(t=f){return new l(32,u.a,t)}static createMat3f64(t=f){return new l(72,i.a,t)}static createMat4f64(t=f){return new l(128,o.a,t)}static createQuatf64(t=f){return new l(32,a.c,t)}get test(){return{size:this._buffers.length*this._itemsPerBuffer*this._itemByteSize}}}const f=4*s.Y8.KILOBYTES,d=(l.createVec2f64(),l.createVec3f64()),_=(l.createVec4f64(),l.createMat3f64(),l.createMat4f64());l.createQuatf64()},11282:(t,e,n)=>{n.d(e,{cv:()=>a,en:()=>o,lA:()=>i}),n(68773),n(40330);var s=n(22974),r=n(17452);function i(t,e){return e?{...e,query:{...t,...e.query}}:{query:t}}function o(t){return"string"==typeof t?(0,r.mN)(t):(0,s.d9)(t)}function a(t,e,n){const s={};for(const r in t){if("declaredClass"===r)continue;const i=t[r];if(null!=i&&"function"!=typeof i)if(Array.isArray(i)){s[r]=[];for(let t=0;t<i.length;t++)s[r][t]=a(i[t])}else if("object"==typeof i)if(i.toJSON){const t=i.toJSON(n&&n[r]);s[r]=e?t:JSON.stringify(t)}else s[r]=e?i:JSON.stringify(i);else s[r]=i}return s}n(71058)},11726:(t,e,n)=>{n.d(e,{hu:()=>r,yK:()=>i}),n(97323),n(98766),(0,n(88669).c)();class s{constructor(t){this.message=t}toString(){return`AssertException: ${this.message}`}}function r(t,e){if(!t)throw e=e||"assert",console.log(new Error(e).stack),new s(e)}function i(t,e,n,s){let r,i=(n[0]-t[0])/e[0],o=(s[0]-t[0])/e[0];i>o&&(r=i,i=o,o=r);let a=(n[1]-t[1])/e[1],c=(s[1]-t[1])/e[1];if(a>c&&(r=a,a=c,c=r),i>c||a>o)return!1;a>i&&(i=a),c<o&&(o=c);let h=(n[2]-t[2])/e[2],u=(s[2]-t[2])/e[2];return h>u&&(r=h,h=u,u=r),!(i>u||h>o||(u<o&&(o=u),o<0))}},73248:(t,e,n)=>{n.r(e),n.d(e,{default:()=>nt});var s,r,i,o,a,c=n(43697),h=n(70586),u=n(95330),l=(n(92604),n(75215),n(67676),n(20102),n(80442),n(52011)),f=n(17896),d=n(65617),_=n(16996),m=n(29268),g=n(26993),p=n(71143),M=n(44553),b=n(22807),T=(n(52138),n(98766),n(88669)),y=n(78341);function O(t){return t?{ray:(0,y.Ue)(t.ray),c0:t.c0,c1:t.c1}:{ray:(0,y.Ue)(),c0:0,c1:Number.MAX_VALUE}}function R(t,e){for(let n=0;n<o.NUM;n++){const s=t[n];if(s[0]*e[0]+s[1]*e[1]+s[2]*e[2]+s[3]>=e[3])return!1}return!0}n(12981),new b.x((()=>O())),n(62073),(i=s||(s={}))[i.LEFT=0]="LEFT",i[i.RIGHT=1]="RIGHT",i[i.BOTTOM=2]="BOTTOM",i[i.TOP=3]="TOP",i[i.NEAR=4]="NEAR",i[i.FAR=5]="FAR",function(t){t[t.NEAR_BOTTOM_LEFT=0]="NEAR_BOTTOM_LEFT",t[t.NEAR_BOTTOM_RIGHT=1]="NEAR_BOTTOM_RIGHT",t[t.NEAR_TOP_RIGHT=2]="NEAR_TOP_RIGHT",t[t.NEAR_TOP_LEFT=3]="NEAR_TOP_LEFT",t[t.FAR_BOTTOM_LEFT=4]="FAR_BOTTOM_LEFT",t[t.FAR_BOTTOM_RIGHT=5]="FAR_BOTTOM_RIGHT",t[t.FAR_TOP_RIGHT=6]="FAR_TOP_RIGHT",t[t.FAR_TOP_LEFT=7]="FAR_TOP_LEFT"}(r||(r={})),r.FAR_BOTTOM_RIGHT,r.NEAR_BOTTOM_RIGHT,r.NEAR_BOTTOM_LEFT,r.FAR_BOTTOM_LEFT,r.NEAR_BOTTOM_LEFT,r.NEAR_BOTTOM_RIGHT,r.NEAR_TOP_RIGHT,r.NEAR_TOP_LEFT,r.FAR_BOTTOM_RIGHT,r.FAR_BOTTOM_LEFT,r.FAR_TOP_LEFT,r.FAR_TOP_RIGHT,r.NEAR_BOTTOM_RIGHT,r.FAR_BOTTOM_RIGHT,r.FAR_TOP_RIGHT,r.NEAR_TOP_RIGHT,r.FAR_BOTTOM_LEFT,r.NEAR_BOTTOM_LEFT,r.NEAR_TOP_LEFT,r.FAR_TOP_LEFT,r.FAR_TOP_LEFT,r.NEAR_TOP_LEFT,r.NEAR_TOP_RIGHT,r.FAR_TOP_RIGHT,function(t){t[t.NUM=6]="NUM"}(o||(o={})),function(t){t[t.NUM=8]="NUM"}(a||(a={})),(0,T.f)(-1,-1,-1,1),(0,T.f)(1,-1,-1,1),(0,T.f)(1,1,-1,1),(0,T.f)(-1,1,-1,1),(0,T.f)(-1,-1,1,1),(0,T.f)(1,-1,1,1),(0,T.f)(1,1,1,1),(0,T.f)(-1,1,1,1),new b.x(O),(0,d.c)(),(0,d.c)(),(0,d.c)(),(0,d.c)(),(0,d.c)(),(0,d.c)(),(0,d.c)(),(0,d.c)();var S,E,A=n(11726);class x{constructor(t,e){this._objectToBoundingSphere=t,this._maximumObjectsPerNode=10,this._maximumDepth=20,this._degenerateObjects=new Set,this._root=new N,this._objectCount=0,e&&(void 0!==e.maximumObjectsPerNode&&(this._maximumObjectsPerNode=e.maximumObjectsPerNode),void 0!==e.maximumDepth&&(this._maximumDepth=e.maximumDepth))}get bounds(){return this._root.bounds}get halfSize(){return this._root.halfSize}get root(){return this._root.node}get maximumObjectsPerNode(){return this._maximumObjectsPerNode}get maximumDepth(){return this._maximumDepth}get objectCount(){return this._objectCount}destroy(){this._degenerateObjects.clear(),N.clearPool(),q[0]=null,V.prune(),J.prune()}add(t,e=t.length){this._objectCount+=e,this._grow(t,e);const n=N.acquire();for(let s=0;s<e;s++){const e=t[s];this._isDegenerate(e)?this._degenerateObjects.add(e):(n.init(this._root),this._add(e,n))}N.release(n)}remove(t,e=null){this._objectCount-=t.length;const n=N.acquire();for(const s of t){const t=(0,h.pC)(e)?e:(0,m.h)(this._objectToBoundingSphere(s),W);j(t[3])?(n.init(this._root),this._remove(s,t,n)):this._degenerateObjects.delete(s)}N.release(n),this._shrink()}update(t,e){if(!j(e[3])&&this._isDegenerate(t))return;const n=function(t){return q[0]=t,q}(t);this.remove(n,e),this.add(n)}forEachAlongRay(t,e,n){const s=(0,y.re)(t,e);this._forEachNode(this._root,(t=>{if(!this._intersectsNode(s,t))return!1;const e=t.node;return e.terminals.forAll((t=>{this._intersectsObject(s,t)&&n(t)})),null!==e.residents&&e.residents.forAll((t=>{this._intersectsObject(s,t)&&n(t)})),!0}))}forEachAlongRayWithVerticalOffset(t,e,n,s){const r=(0,y.re)(t,e);this._forEachNode(this._root,(t=>{if(!this._intersectsNodeWithOffset(r,t,s))return!1;const e=t.node;return e.terminals.forAll((t=>{this._intersectsObjectWithOffset(r,t,s)&&n(t)})),null!==e.residents&&e.residents.forAll((t=>{this._intersectsObjectWithOffset(r,t,s)&&n(t)})),!0}))}forEach(t){this._forEachNode(this._root,(e=>{const n=e.node;return n.terminals.forAll(t),null!==n.residents&&n.residents.forAll(t),!0})),this._degenerateObjects.forEach(t)}forEachDegenerateObject(t){this._degenerateObjects.forEach(t)}findClosest(t,e,n,s=(()=>!0),r=1/0){let i=1/0,o=1/0,a=null;const c=I(t,e),h=c=>{if(--r,!s(c))return;const h=this._objectToBoundingSphere(c);if(!R(n,h))return;const u=P(t,e,(0,m.g)(h)),l=u-h[3],f=u+h[3];l<i&&(i=l,o=f,a=c)};return this._forEachNodeDepthOrdered(this._root,(s=>{if(r<=0||!R(n,s.bounds))return!1;if((0,f.g)(D,c,s.halfSize),(0,f.a)(D,D,s.bounds),P(t,e,D)>o)return!1;const i=s.node;return i.terminals.forAll((t=>h(t))),null!==i.residents&&i.residents.forAll((t=>h(t))),!0}),t,e),a}forEachInDepthRange(t,e,n,s,r,i,o){let a=-1/0,c=1/0;const h={setRange:t=>{n===x.DepthOrder.FRONT_TO_BACK?(a=Math.max(a,t.near),c=Math.min(c,t.far)):(a=Math.max(a,-t.far),c=Math.min(c,-t.near))}};h.setRange(s);const u=P(e,n,t),l=I(e,n),d=I(e,-n),_=t=>{if(!o(t))return;const s=this._objectToBoundingSphere(t),l=(0,m.g)(s),f=P(e,n,l)-u,d=f-s[3],_=f+s[3];d>c||_<a||!R(i,s)||r(t,h)};this._forEachNodeDepthOrdered(this._root,(t=>{if(!R(i,t.bounds))return!1;if((0,f.g)(D,l,t.halfSize),(0,f.a)(D,D,t.bounds),P(e,n,D)-u>c)return!1;if((0,f.g)(D,d,t.halfSize),(0,f.a)(D,D,t.bounds),P(e,n,D)-u<a)return!1;const s=t.node;return s.terminals.forAll((t=>_(t))),null!==s.residents&&s.residents.forAll((t=>_(t))),!0}),e,n)}forEachNode(t){this._forEachNode(this._root,(e=>t(e.node,e.bounds,e.halfSize)))}forEachNeighbor(t,e){const n=(0,m.a)(e),s=(0,m.g)(e),r=e=>{const r=this._objectToBoundingSphere(e),i=(0,m.a)(r),o=n+i;return!((0,f.d)((0,m.g)(r),s)-o*o<=0)||t(e)};let i=!0;const o=t=>{i&&(i=r(t))};this._forEachNode(this._root,(t=>{const e=(0,m.a)(t.bounds),r=n+e;if((0,f.d)((0,m.g)(t.bounds),s)-r*r>0)return!1;const a=t.node;return a.terminals.forAll(o),i&&null!==a.residents&&a.residents.forAll(o),i})),i&&this.forEachDegenerateObject(o)}_intersectsNode(t,e){return w(e.bounds,2*-e.halfSize,G),w(e.bounds,2*e.halfSize,k),(0,A.yK)(t.origin,t.direction,G,k)}_intersectsNodeWithOffset(t,e,n){return w(e.bounds,2*-e.halfSize,G),w(e.bounds,2*e.halfSize,k),n.applyToMinMax(G,k),(0,A.yK)(t.origin,t.direction,G,k)}_intersectsObject(t,e){const n=this._objectToBoundingSphere(e);return!(n[3]>0)||(0,m.j)(n,t)}_intersectsObjectWithOffset(t,e,n){const s=this._objectToBoundingSphere(e);return!(s[3]>0)||(0,m.j)(n.applyToBoundingSphere(s),t)}_forEachNode(t,e){let n=N.acquire().init(t);const s=[n];for(;0!==s.length;){if(n=s.pop(),e(n)&&!n.isLeaf())for(let t=0;t<n.node.children.length;t++)n.node.children[t]&&s.push(N.acquire().init(n).advance(t));N.release(n)}}_forEachNodeDepthOrdered(t,e,n,s=x.DepthOrder.FRONT_TO_BACK){let r=N.acquire().init(t);const i=[r];for(function(t,e,n){if(!J.length)for(let t=0;t<8;++t)J.push({index:0,distance:0});for(let n=0;n<8;++n){const s=L[n];J.data[n].index=n,J.data[n].distance=P(t,e,s)}J.sort(((t,e)=>t.distance-e.distance));for(let t=0;t<8;++t)n[t]=J.data[t].index}(n,s,K);0!==i.length;){if(r=i.pop(),e(r)&&!r.isLeaf())for(let t=7;t>=0;--t){const e=K[t];r.node.children[e]&&i.push(N.acquire().init(r).advance(e))}N.release(r)}}_remove(t,e,n){V.clear();const s=n.advanceTo(e,((t,e)=>{V.push(t.node),V.push(e)}))?n.node.terminals:n.node.residents;if(s.removeUnordered(t),0===s.length)for(let t=V.length-2;t>=0;t-=2){const e=V.data[t],n=V.data[t+1];if(!this._purge(e,n))break}}_nodeIsEmpty(t){if(0!==t.terminals.length)return!1;if(null!==t.residents)return 0===t.residents.length;for(let e=0;e<t.children.length;e++)if(t.children[e])return!1;return!0}_purge(t,e){return e>=0&&(t.children[e]=null),!!this._nodeIsEmpty(t)&&(null===t.residents&&(t.residents=new M.Z({shrink:!0})),!0)}_add(t,e){e.advanceTo(this._objectToBoundingSphere(t))?e.node.terminals.push(t):(e.node.residents.push(t),e.node.residents.length>this._maximumObjectsPerNode&&e.depth<this._maximumDepth&&this._split(e))}_split(t){const e=t.node.residents;t.node.residents=null;for(let n=0;n<e.length;n++){const s=N.acquire().init(t);this._add(e.getItemAt(n),s),N.release(s)}}_grow(t,e){if(0!==e&&(F(t,e,(t=>this._objectToBoundingSphere(t)),H),j(H[3])&&!this._fitsInsideTree(H)))if(this._nodeIsEmpty(this._root.node))(0,m.h)(H,this._root.bounds),this._root.halfSize=1.25*H[3];else{const t=this._rootBoundsForRootAsSubNode(H);this._placingRootViolatesMaxDepth(t)?this._rebuildTree(H,t):this._growRootAsSubNode(t),N.release(t)}}_rebuildTree(t,e){(0,f.c)(U,e.bounds),U[3]=e.halfSize,F([t,U],2,(t=>t),X);const n=N.acquire().init(this._root);this._root.initFrom(null,X,1.25*X[3]),this._forEachNode(n,(t=>(this.add(t.node.terminals.data,t.node.terminals.length),null!==t.node.residents&&this.add(t.node.residents.data,t.node.residents.length),!0))),N.release(n)}_placingRootViolatesMaxDepth(t){const e=Math.log(t.halfSize/this._root.halfSize)*Math.LOG2E;let n=0;return this._forEachNode(this._root,(t=>(n=Math.max(n,t.depth),n+e<=this._maximumDepth))),n+e>this._maximumDepth}_rootBoundsForRootAsSubNode(t){const e=t[3],n=t;let s=-1/0;const r=this._root.bounds,i=this._root.halfSize;for(let t=0;t<3;t++){const o=r[t]-i-(n[t]-e),a=n[t]+e-(r[t]+i),c=Math.max(0,Math.ceil(o/(2*i))),h=Math.max(0,Math.ceil(a/(2*i)))+1,u=2**Math.ceil(Math.log(c+h)*Math.LOG2E);s=Math.max(s,u),Y[t].min=c,Y[t].max=h}for(let t=0;t<3;t++){let e=Y[t].min,n=Y[t].max;const o=(s-(e+n))/2;e+=Math.ceil(o),n+=Math.floor(o);const a=r[t]-i-e*i*2;Z[t]=a+(n+e)*i}return Z[3]=s*i*C,N.acquire().initFrom(null,Z,s*i,0)}_growRootAsSubNode(t){const e=this._root.node;(0,f.c)(H,this._root.bounds),H[3]=this._root.halfSize,this._root.init(t),t.advanceTo(H,null,!0),t.node.children=e.children,t.node.residents=e.residents,t.node.terminals=e.terminals}_shrink(){for(;;){const t=this._findShrinkIndex();if(-1===t)break;this._root.advance(t),this._root.depth=0}}_findShrinkIndex(){if(0!==this._root.node.terminals.length||this._root.isLeaf())return-1;let t=null;const e=this._root.node.children;let n=0,s=0;for(;s<e.length&&null==t;)n=s++,t=e[n];for(;s<e.length;)if(e[s++])return-1;return n}_isDegenerate(t){return!j(this._objectToBoundingSphere(t)[3])}_fitsInsideTree(t){const e=this._root.bounds,n=this._root.halfSize;return t[3]<=n&&t[0]>=e[0]-n&&t[0]<=e[0]+n&&t[1]>=e[1]-n&&t[1]<=e[1]+n&&t[2]>=e[2]-n&&t[2]<=e[2]+n}}class N{constructor(){this.bounds=(0,m.c)(),this.halfSize=0,this.initFrom(null,null,0,0)}init(t){return this.initFrom(t.node,t.bounds,t.halfSize,t.depth)}initFrom(t,e,n,s=this.depth){return this.node=(0,h.pC)(t)?t:N.createEmptyNode(),(0,h.pC)(e)&&(0,m.h)(e,this.bounds),this.halfSize=n,this.depth=s,this}advance(t){let e=this.node.children[t];e||(e=N.createEmptyNode(),this.node.children[t]=e),this.node=e,this.halfSize/=2,this.depth++;const n=L[t];return this.bounds[0]+=n[0]*this.halfSize,this.bounds[1]+=n[1]*this.halfSize,this.bounds[2]+=n[2]*this.halfSize,this.bounds[3]=this.halfSize*C,this}advanceTo(t,e,n=!1){for(;;){if(this.isTerminalFor(t))return e&&e(this,-1),!0;if(this.isLeaf()){if(!n)return e&&e(this,-1),!1;this.node.residents=null}const s=this._childIndex(t);e&&e(this,s),this.advance(s)}}isLeaf(){return null!=this.node.residents}isTerminalFor(t){return t[3]>this.halfSize/2}_childIndex(t){const e=this.bounds;return(e[0]<t[0]?1:0)+(e[1]<t[1]?2:0)+(e[2]<t[2]?4:0)}static createEmptyNode(){return{children:[null,null,null,null,null,null,null,null],terminals:new M.Z({shrink:!0}),residents:new M.Z({shrink:!0})}}static acquire(){return N._pool.acquire()}static release(t){N._pool.release(t)}static clearPool(){N._pool.prune()}}function v(t,e){t[0]=Math.min(t[0],e[0]-e[3]),t[1]=Math.min(t[1],e[1]-e[3]),t[2]=Math.min(t[2],e[2]-e[3])}function z(t,e){t[0]=Math.max(t[0],e[0]+e[3]),t[1]=Math.max(t[1],e[1]+e[3]),t[2]=Math.max(t[2],e[2]+e[3])}function w(t,e,n){n[0]=t[0]+e,n[1]=t[1]+e,n[2]=t[2]+e}function F(t,e,n,s){if(1===e){const e=n(t[0]);(0,m.h)(e,s)}else{G[0]=1/0,G[1]=1/0,G[2]=1/0,k[0]=-1/0,k[1]=-1/0,k[2]=-1/0;for(let s=0;s<e;s++){const e=n(t[s]);j(e[3])&&(v(G,e),z(k,e))}(0,f.h)(s,G,k,.5),s[3]=Math.max(k[0]-G[0],k[1]-G[1],k[2]-G[2])/2}}function I(t,e){let n,s=1/0;for(let r=0;r<8;++r){const i=P(t,e,B[r]);i<s&&(s=i,n=B[r])}return n}function P(t,e,n){return e*(t[0]*n[0]+t[1]*n[1]+t[2]*n[2])}function j(t){return!isNaN(t)&&t!==-1/0&&t!==1/0&&t>0}N._pool=new p.Z(N),S=x||(x={}),(E=S.DepthOrder||(S.DepthOrder={}))[E.FRONT_TO_BACK=1]="FRONT_TO_BACK",E[E.BACK_TO_FRONT=-1]="BACK_TO_FRONT";const L=[(0,d.f)(-1,-1,-1),(0,d.f)(1,-1,-1),(0,d.f)(-1,1,-1),(0,d.f)(1,1,-1),(0,d.f)(-1,-1,1),(0,d.f)(1,-1,1),(0,d.f)(-1,1,1),(0,d.f)(1,1,1)],B=[(0,d.f)(-1,-1,-1),(0,d.f)(-1,-1,1),(0,d.f)(-1,1,-1),(0,d.f)(-1,1,1),(0,d.f)(1,-1,-1),(0,d.f)(1,-1,1),(0,d.f)(1,1,-1),(0,d.f)(1,1,1)],C=Math.sqrt(3),q=[null],Z=(0,m.c)(),D=(0,d.c)(),G=(0,d.c)(),k=(0,d.c)(),V=new M.Z,W=(0,m.c)(),H=(0,m.c)(),U=(0,m.c)(),X=(0,m.c)(),Y=[{min:0,max:0},{min:0,max:0},{min:0,max:0}],J=new M.Z,K=[0,0,0,0,0,0,0,0],Q=x;var $=n(212);function tt(t,e,n){const s=(0,m.c)(),r=(0,m.g)(s);return(0,f.z)(r,r,t,.5),(0,f.z)(r,r,e,.5),s[3]=(0,f.i)(r,t),(0,f.a)(r,r,n),s}let et=class{constructor(){this._idToComponent=new Map,this._components=new Q((t=>t.bounds)),this._edges=new Q((t=>t.bounds)),this._tmpLineSegment=(0,_.Ue)(),this._tmpP1=(0,d.c)(),this._tmpP2=(0,d.c)(),this._tmpP3=(0,d.c)(),this.remoteClient=null}async fetchCandidates(t,e){await Promise.resolve(),(0,u.k_)(e),await this._ensureEdgeLocations(t,e);const n=[];return this._edges.forEachNeighbor((e=>(this._addCandidates(t,e,n),n.length<1e3)),t.bounds),{result:{candidates:n}}}async _ensureEdgeLocations(t,e){const n=[];if(this._components.forEachNeighbor((t=>{if((0,h.Wi)(t.info)){const{id:e,uid:s}=t;n.push({id:e,uid:s})}return!0}),t.bounds),!n.length)return;const s={components:n},r=await this.remoteClient.invoke("fetchAllEdgeLocations",s,(0,h.Pt)(e,{}));for(const t of r.components)this._setFetchEdgeLocations(t)}async add(t){const e=new st(t.id,t.bounds);return this._idToComponent.set(e.id,e),this._components.add([e]),{result:{}}}async remove(t){const e=this._idToComponent.get(t.id);if(e){const t=[];this._edges.forEachNeighbor((n=>(n.component===e&&t.push(n),!0)),e.bounds),this._edges.remove(t),this._components.remove([e]),this._idToComponent.delete(e.id)}return{result:{}}}_setFetchEdgeLocations(t){const e=this._idToComponent.get(t.id);if((0,h.Wi)(e)||t.uid!==e.uid)return;const n=$.n_.createView(t.locations),s=new Array(n.count),r=(0,d.c)(),i=(0,d.c)();for(let o=0;o<n.count;o++){n.position0.getVec(o,r),n.position1.getVec(o,i);const a=tt(r,i,t.origin),c=new rt(e,o,a);s[o]=c}this._edges.add(s);const{objectIds:o,origin:a}=t;e.info={locations:n,objectIds:o,origin:a}}_addCandidates(t,e,n){const{locations:s,origin:r,objectIds:i}=e.component.info,o=s.position0.getVec(e.index,this._tmpP1),a=s.position1.getVec(e.index,this._tmpP2);(0,f.a)(o,o,r),(0,f.a)(a,a,r);const c=i[s.componentIndex.get(e.index)];this._addEdgeCandidate(t,c,o,a,n),this._addVertexCandidate(t,c,o,n),this._addVertexCandidate(t,c,a,n)}_addEdgeCandidate(t,e,n,s,r){if(!(t.types&g.r.EDGE))return;const i=(0,m.g)(t.bounds),o=(0,_.zk)(n,s,this._tmpLineSegment),a=(0,_.nF)(o,i,this._tmpP3);if(!(0,m.m)(t.bounds,a))return null;r.push({type:"edge",objectId:e,target:(0,d.a)(a),distance:(0,f.i)(i,a),start:(0,d.a)(n),end:(0,d.a)(s)})}_addVertexCandidate(t,e,n,s){if(!(t.types&g.r.VERTEX))return;const r=(0,m.g)(t.bounds);if(!(0,m.m)(t.bounds,n))return null;s.push({type:"vertex",objectId:e,target:(0,d.a)(n),distance:(0,f.i)(r,n)})}};et=(0,c._)([(0,l.j)("esri.views.interactive.snapping.featureSources.sceneLayerSource.SceneLayerSnappingSourceWorker")],et);const nt=et;class st{constructor(t,e){this.id=t,this.bounds=e,this.info=null,this.uid=++st.uid}}st.uid=0;class rt{constructor(t,e,n){this.component=t,this.index=e,this.bounds=n}}}}]);