self.webpackChunkRemoteClient([152],{290:function(e,t,r){"use strict";r.d(t,"a",(function(){return a}));var n=r(3),s=r(0),o=r(4);function a(e,t,r=!1,a){return new Promise((c,l)=>{if(Object(o.m)(a))return void l(i());let u=()=>{p(),l(new Error("Unable to load "+t))},d=()=>{const t=e;p(),c(t)},h=()=>{if(!e)return;const t=e;p(),t.src="",l(i())};const p=()=>{Object(n.a)("esri-image-decode")||(e.removeEventListener("error",u),e.removeEventListener("load",d)),u=null,d=null,e=null,Object(s.h)(a)&&a.removeEventListener("abort",h),h=null,r&&URL.revokeObjectURL(t)};Object(s.h)(a)&&a.addEventListener("abort",h),Object(n.a)("esri-image-decode")?e.decode().then(d,u):(e.addEventListener("error",u),e.addEventListener("load",d))})}function i(){try{return new DOMException("Aborted","AbortError")}catch{const e=new Error;return e.name="AbortError",e}}},54:function(e,t,r){"use strict";r.r(t);var n=r(1),s=r(3),o=r(6),a=r(19),i=r(0),c=r(16),l=r(21),u=r(4),d=r(38);const h=["elevation3d.arcgis.com","js.arcgis.com","jsdev.arcgis.com","jsqa.arcgis.com","static.arcgis.com"];var p=r(290);async function m(e,t){const o=Object(l.u)(e),p=Object(l.t)(e);p||o||(e=Object(l.B)(e));const O={url:e,requestOptions:{...Object(i.n)(t)}};let y=Object(l.l)(e);if(y){const e=await async function(e,t){if(null!=e.responseData)return e.responseData;if(e.headers&&(t.requestOptions.headers={...t.requestOptions.headers,...e.headers}),e.query&&(t.requestOptions.query={...t.requestOptions.query,...e.query}),e.before){let r,n;try{n=await e.before(t)}catch(e){r=q("request:interceptor",e,t)}if((n instanceof Error||n instanceof c.a)&&(r=q("request:interceptor",n,t)),r)throw e.error&&e.error(r),r;return n}}(y,O);if(null!=e)return{data:e,getHeader:j,requestOptions:O.requestOptions,url:O.url};y.after||y.error||(y=null)}if(e=O.url,"image"===(t=O.requestOptions).responseType){if(Object(s.a)("host-webworker")||Object(s.a)("host-node"))throw q("request:invalid-parameters",new Error("responseType 'image' is not supported in Web Workers or Node environment"),O)}else if(o)throw q("request:invalid-parameters",new Error("Data URLs are not supported for responseType = "+t.responseType),O);if("head"===t.method){if(t.body)throw q("request:invalid-parameters",new Error("body parameter cannot be set when method is 'head'"),O);if(o||p)throw q("request:invalid-parameters",new Error("data and blob URLs are not supported for method 'head'"),O)}if(await async function(){Object(s.a)("host-webworker")?f||(f=await r.e(158).then(r.bind(null,549))):m._abortableFetch||(m._abortableFetch=n.a.fetch.bind(n.a))}(),f)return f.execute(e,t);const g=Object(u.d)();Object(u.o)(t,()=>g.abort());const E={controller:g,credential:null,credentialToken:null,fetchOptions:null,hasToken:!1,interceptor:y,params:O,redoRequest:!1,useIdentity:b.useIdentity,useProxy:!1,useSSL:!1,withCredentials:!1},S=await async function(e){let t,r;await async function(e){const t=e.params.url,r=e.params.requestOptions,s=e.controller.signal,o=r.body;let i=null,c=null,p=null;if(w&&"HTMLFormElement"in n.a&&(o instanceof FormData?i=o:o instanceof HTMLFormElement&&(c=o,i=new FormData(c))),"string"==typeof o&&(p=o),e.fetchOptions={cache:r.cacheBust&&!m._abortableFetch.polyfill?"no-cache":"default",credentials:"same-origin",headers:r.headers||{},method:"head"===r.method?"HEAD":"GET",mode:"cors",redirect:"follow",signal:s},(i||p)&&(e.fetchOptions.body=i||p),"anonymous"===r.authMode&&(e.useIdentity=!1),e.hasToken=!!(/token=/i.test(t)||r.query&&r.query.token||i&&i.get&&i.get("token")||c&&c.elements.token),!e.hasToken&&a.a.apiKey&&function(e){const t=Object(l.m)(e,!0);return t&&t.endsWith(".arcgis.com")&&!h.includes(t)&&!e.endsWith("/sharing/rest/generateToken")}(t)&&(r.query||(r.query={}),r.query.token=a.a.apiKey,e.hasToken=!0),e.useIdentity&&!e.hasToken&&!e.credentialToken&&!T(t)&&!Object(u.m)(s)){let n;"immediate"===r.authMode?(await k(),n=await d.b.getCredential(t,{signal:s}),e.credential=n):"no-prompt"===r.authMode?(await k(),n=await d.b.getCredential(t,{prompt:!1,signal:s}).catch(()=>{}),e.credential=n):d.b&&(n=d.b.findCredential(t)),n&&(e.credentialToken=n.token,e.useSSL=!!n.ssl)}}(e);try{do{[t,r]=await v(e)}while(!await x(e,t,r))}catch(r){const n=q("request:server",r,e.params,t);throw n.details.ssl=e.useSSL,e.interceptor&&e.interceptor.error&&e.interceptor.error(n),n}const s=e.params.url;if(/\/sharing\/rest\/(accounts|portals)\/self/i.test(s)&&!e.hasToken&&!e.credentialToken&&r&&r.user&&r.user.username&&!Object(l.w)(s)){const e=Object(l.m)(s,!0);e&&b.trustedServers.push(e)}const o=e.credential;if(o&&d.b){const e=d.b.findServerInfo(o.server);let t=e&&e.owningSystemUrl;if(t){t=t.replace(/\/?$/,"/sharing");const e=d.b.findCredential(t,o.userId);e&&-1===d.b._getIdenticalSvcIdx(t,e)&&e.resources.unshift(t)}}return{data:r,getHeader:t?e=>t.headers.get(e):j,requestOptions:e.params.requestOptions,ssl:e.useSSL,url:e.params.url}}(E);return y&&y.after&&y.after(S),S}let f;const b=a.a.request,w="FormData"in n.a,O=[499,498,403,401],y=["COM_0056","COM_0057","SB_0008"],g=[/\/arcgis\/tokens/i,/\/sharing(\/rest)?\/generatetoken/i,/\/rest\/info/i],j=()=>null;function q(e,t,r,n){let s="Error";const a={url:r.url,requestOptions:r.requestOptions,getHeader:j,ssl:!1};if(t instanceof c.a)return t.details?(t.details=Object(o.a)(t.details),t.details.url=r.url,t.details.requestOptions=r.requestOptions):t.details=a,t;if(t){const e=n&&(e=>n.headers.get(e)),r=n&&n.status,o=t.message;o&&(s=o),e&&(a.getHeader=e),a.httpStatus=(null!=t.httpCode?t.httpCode:t.code)||r||0,a.subCode=t.subcode,a.messageCode=t.messageCode,"string"==typeof t.details?a.messages=[t.details]:a.messages=t.details}return Object(u.l)(t)?Object(u.e)():new c.a(e,s,a)}async function k(){d.b||await Promise.all([r.e(81),r.e(39)]).then(r.bind(null,631))}function T(e){return g.some(t=>t.test(e))}async function v(e){let t=e.params.url;const r=e.params.requestOptions,n=e.fetchOptions,o=Object(l.t)(t)||Object(l.u)(t),a=r.responseType||"json",i=o?0:null!=r.timeout?r.timeout:b.timeout;let c=!1;if(!o){e.useSSL&&(t=Object(l.H)(t)),r.cacheBust&&"default"===n.cache&&(t=Object(l.d)(t,"request.preventCache",Date.now()));let o={...r.query};e.credentialToken&&(o.token=e.credentialToken);let a=Object(l.C)(o);Object(s.a)("esri-url-encodes-apostrophe")&&(a=a.replace(/'/g,"%27"));const i=t.length+1+a.length;let u;c="delete"===r.method||"post"===r.method||"put"===r.method||!!r.body||i>b.maxUrlLength;const h=r.useProxy||!!Object(l.o)(t);if(h){const e=Object(l.p)(t);u=e.path,!c&&u.length+1+i>b.maxUrlLength&&(c=!0),e.query&&(o={...e.query,...o})}if("HEAD"===n.method&&(c||h)){if(c){if(i>b.maxUrlLength)throw q("request:invalid-parameters",new Error("URL exceeds maximum length"),e.params);throw q("request:invalid-parameters",new Error("cannot use POST request when method is 'head'"),e.params)}if(h)throw q("request:invalid-parameters",new Error("cannot use proxy when method is 'head'"),e.params)}if(c?(n.method="delete"===r.method?"DELETE":"put"===r.method?"PUT":"POST",r.body?t=Object(l.e)(t,o):(n.body=Object(l.C)(o),n.headers["Content-Type"]="application/x-www-form-urlencoded")):t=Object(l.e)(t,o),h&&(e.useProxy=!0,t=`${u}?${t}`),o.token&&w&&n.body instanceof FormData){const e=n.body;e.set?e.set("token",o.token):e.append("token",o.token)}if(r.hasOwnProperty("withCredentials"))e.withCredentials=r.withCredentials;else if(!Object(l.q)(t,l.g))if(Object(l.w)(t))e.withCredentials=!0;else if(d.b){const r=d.b.findServerInfo(t);r&&r.webTierAuth&&(e.withCredentials=!0)}e.withCredentials&&(n.credentials="include")}let h,p,f=0,O=!1;i>0&&(f=setTimeout(()=>{O=!0,e.controller.abort()},i));try{if("image"!==r.responseType||"default"!==n.cache||"GET"!==n.method||c||function(e){if(e)for(const t of Object.getOwnPropertyNames(e))if(e[t])return!0;return!1}(r.headers)||!o&&!e.useProxy&&b.proxyUrl&&!function(e){const t=Object(l.m)(e);return!t||t.endsWith(".arcgis.com")||-1!==m._corsServers.indexOf(t)||Object(l.w)(t)}(t)){if(h=await m._abortableFetch(t,n),e.useProxy||function(e){if(Object(l.t)(e)||Object(l.u)(e))return;const t=Object(l.m)(e);t&&-1===m._corsServers.indexOf(t)&&m._corsServers.push(t)}(t),h.ok&&"HEAD"!==n.method){switch(a){case"array-buffer":p=await h.arrayBuffer();break;case"blob":case"image":p=await h.blob();break;default:p=await h.text()}if(f&&(clearTimeout(f),f=0),"json"===a||"xml"===a||"document"===a)if(p)switch(a){case"json":p=JSON.parse(p);break;case"xml":p=E(p,"application/xml");break;case"document":p=E(p,"text/html")}else p=null;if(p){if("array-buffer"===a||"blob"===a){const e=h.headers.get("Content-Type");if(/application\/json|text\/plain/i.test(e)&&p["blob"===a?"size":"byteLength"]<=750)try{const e=await new Response(p).json();e.error&&(p=e)}catch{}}"image"===a&&p instanceof Blob&&(p=await S(URL.createObjectURL(p),e,!0))}}}else p=await S(t,e)}catch(n){if("AbortError"===n.name){if(O)throw new Error("Timeout exceeded");throw Object(u.e)("Request canceled")}if(!(!h&&n instanceof TypeError&&b.proxyUrl)||r.body||"delete"===r.method||"head"===r.method||"post"===r.method||"put"===r.method||e.useProxy)throw n;e.redoRequest=!0,Object(l.c)({proxyUrl:b.proxyUrl,urlPrefix:Object(l.E)(Object(l.I)(t).path)})}finally{f&&clearTimeout(f)}return[h,p]}function E(e,t){let r;try{r=(new DOMParser).parseFromString(e,t)}catch{}if(!r||r.getElementsByTagName("parsererror").length)throw new SyntaxError("XML Parse error");return r}async function x(e,t,r){if(e.redoRequest)return e.redoRequest=!1,!1;if(!t)return!0;if(!t.ok)throw new Error(`Unable to load ${t.url} status: ${t.status}`);let n,s,o,a;r&&r.error&&(n=Object.assign(new Error,r.error)),n&&(s=Number(n.code),o=n.hasOwnProperty("subcode")?Number(n.subcode):null,a=n.messageCode,a=a&&a.toUpperCase());const i=e.params.requestOptions.authMode;if(403===s&&(4===o||n.message&&n.message.toLowerCase().indexOf("ssl")>-1&&-1===n.message.toLowerCase().indexOf("permission"))){if(!e.useSSL)return e.useSSL=!0,!1}else if(!e.hasToken&&e.useIdentity&&("no-prompt"!==i||498===s)&&-1!==O.indexOf(s)&&!T(e.params.url)&&(403!==s||-1===y.indexOf(a)&&(null==o||2===o&&e.credentialToken))){await k();try{const t=await d.b.getCredential(e.params.url,{error:q("request:server",n,e.params),prompt:"no-prompt"!==i,signal:e.controller.signal,token:e.credentialToken});return e.credential=t,e.credentialToken=t.token,e.useSSL=e.useSSL||t.ssl,!1}catch(t){if("no-prompt"===i)return e.credential=null,e.credentialToken=null,!1;n=t}}if(n)throw n;return!0}function S(e,t,r=!1){const n=t.controller.signal,s=new Image;return t.withCredentials?s.crossOrigin="use-credentials":s.crossOrigin="anonymous",s.alt="",s.src=e,Object(p.a)(s,e,r,n)}m._abortableFetch=null,m._corsServers=["https://server.arcgisonline.com","https://services.arcgisonline.com"];t.default=m}});