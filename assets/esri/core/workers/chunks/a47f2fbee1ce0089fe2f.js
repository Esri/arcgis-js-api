(self.webpackChunkRemoteClient=self.webpackChunkRemoteClient||[]).push([[1325],{77072:(e,t,n)=>{"use strict";n.d(t,{pJ:()=>o,XO:()=>r});var s=n(327);function r(e){return e=e||s.Z.location.hostname,c.some((t=>{var n;return null!=(null==(n=e)?void 0:n.match(t))}))}function o(e,t){return e&&(t=t||s.Z.location.hostname)?null!=t.match(l)||null!=t.match(a)?e.replace("static.arcgis.com","staticdev.arcgis.com"):null!=t.match(i)||null!=t.match(m)?e.replace("static.arcgis.com","staticqa.arcgis.com"):e:e}const l=/^devext.arcgis.com$/,i=/^qaext.arcgis.com$/,a=/^[\w-]*\.mapsdevext.arcgis.com$/,m=/^[\w-]*\.mapsqa.arcgis.com$/,c=[/^([\w-]*\.)?[\w-]*\.zrh-dev-local.esri.com$/,l,i,/^jsapps.esri.com$/,a,m]},95719:(e,t,n)=>{"use strict";n.d(t,{i:()=>w,c:()=>d});var s=n(17098),r=n(8811),o=n(63715),l=n(29582),i=n(42926),a=n(67475),m=n(16574),c=n(57631),u=n(76811),y=n(66104),f=n(62113),b=n(55938),p=n(98344);function d(e,t,n,d){const w=function(e,t,n){if(!e)return null;if(n&&"web-scene"===n.origin&&!(e instanceof o.Z)&&!(e instanceof l.Z)){const o="cim"!==e.type?function(e,t=!1,n=!1,o=!0){if(!e)return{symbol:null};let d;if((0,s.dU)(e)||e instanceof l.Z)d=e.clone();else if("cim"===e.type)d=i.Z.fromCIMSymbol(e);else if(e instanceof a.Z)d=m.Z.fromSimpleLineSymbol(e);else if(e instanceof c.Z)d=i.Z.fromSimpleMarkerSymbol(e);else if(e instanceof u.Z)d=i.Z.fromPictureMarkerSymbol(e);else if(e instanceof y.Z)d=f.Z.fromSimpleFillSymbol(e);else{if(!(e instanceof b.Z))return{error:new r.Z("symbol-conversion:unsupported-2d-symbol",`2D symbol of type '${e.type||e.declaredClass}' is unsupported in 3D`,{symbol:e})};d=o?p.Z.fromTextSymbol(e):i.Z.fromTextSymbol(e)}if(t&&(d.id=e.id),n&&(0,s.dU)(d))for(let e=0;e<d.symbolLayers.length;++e)d.symbolLayers.getItemAt(e)._ignoreDrivers=!0;return{symbol:d}}(e):{symbol:null,error:new r.Z("symbol-conversion:unsupported-cim-symbol","CIM symbol is unsupported in web scenes",{symbol:e})};return o.symbol?o.symbol.write(t,n):(n.messages&&n.messages.push(new r.Z("symbol:unsupported",`Symbols of type '${e.declaredClass}' are not supported in scenes. Use 3D symbology instead when working with WebScene and SceneView`,{symbol:e,context:n,error:o.error})),null)}return n&&"web-map"===n.origin&&"web-style"===e.type?(n.messages&&n.messages.push(new r.Z("symbol:unsupported",`Symbols of type '${e.declaredClass}' are not supported in webmaps. Use CIMSymbol instead when working with WebMap in MapView.`,{symbol:e,context:n})),null):e.write(t,n)}(e,{},d);w&&(t[n]=w)}function w(e,t){return(0,s.S9)(e,null,t)}},11325:(e,t,n)=>{"use strict";n.r(t),n.d(t,{fetchStyle:()=>d,fetchSymbolFromStyle:()=>h,resolveWebStyleSymbol:()=>w,styleNameFromItem:()=>Z});var s=n(93100),r=n(17098),o=n(77072),l=n(8811),i=n(99204),a=n(23090),m=n(52771),c=n(77645),u=n(49016),y=n(95719),f=n(85225),b=n(45711);const p={};function d(e,t,n){return e.styleUrl?function(e,t){return S(e,t).then((t=>({data:t.data,baseUrl:(0,i.Yd)(e),styleUrl:e})))}(e.styleUrl,n):e.styleName?function(e,t,n){const s=t.portal||a.Z.getDefault();let r;const o=`${s.url} - ${s.user&&s.user.username} - ${e}`;return p[o]||(p[o]=function(e,t,n){return t.load(n).then((()=>{const s=new m.Z({disableExtraQuery:!0,query:`owner:${N} AND type:${$} AND typekeywords:"${e}"`});return t.queryItems(s,n)})).then((({results:t})=>{let s=null;const r=e.toLowerCase();if(t&&Array.isArray(t))for(const e of t)if(e.typeKeywords.some((e=>e.toLowerCase()===r))&&e.type===$&&e.owner===N){s=e;break}if(!s)throw new l.Z("symbolstyleutils:style-not-found",`The style '${e}' could not be found`,{styleName:e});return s.load(n)}))}(e,s,n).then((e=>(r=e,e.fetchData()))).then((t=>({data:t,baseUrl:r.itemUrl,styleName:e})))),p[o]}(e.styleName,t,n):Promise.reject(new l.Z("symbolstyleutils:style-url-and-name-missing","Either styleUrl or styleName is required to resolve a style"))}function w(e,t,n,s){return e.name?e.styleName&&"Esri2DPointSymbolsStyle"===e.styleName?function(e,t,n){const s=U.replace(/\{SymbolName\}/gi,e.name);return S(s,n).then((e=>{const n=g(e.data);return(0,y.i)(n,{portal:t.portal,url:(0,i.mN)((0,i.Yd)(s)),origin:"portal-item"})}))}(e,t,s):d(e,t,s).then((r=>h(r,e.name,t,n,s))):Promise.reject(new l.Z("symbolstyleutils:style-symbol-reference-name-missing","Missing name in style symbol reference"))}function h(e,t,n,s,a){const m=e.data,p={portal:n.portal,url:(0,i.mN)(e.baseUrl),origin:"portal-item"},d=m.items.find((e=>e.name===t));if(!d){const e=`The symbol name '${t}' could not be found`;return Promise.reject(new l.Z("symbolstyleutils:symbol-name-not-found",e,{symbolName:t}))}let w=(0,u.f)(function(e,t){if("cimRef"===t)return e.cimRef;if(e.formatInfos&&!(0,c.Z)("enable-feature:force-wosr"))for(const t of e.formatInfos)if("gltf"===t.type)return t.href;return e.webRef}(d,s),p),h=d.thumbnail&&d.thumbnail.href;const Z=d.thumbnail&&d.thumbnail.imageData;(0,o.XO)()&&(w=(0,o.pJ)(w),h=(0,o.pJ)(h));const N={portal:n.portal,url:(0,i.mN)((0,i.Yd)(w)),origin:"portal-item"};return S(w,a).then((o=>{const l="cimRef"===s?g(o.data):o.data,i=(0,y.i)(l,N);if(i&&(0,r.dU)(i)){if(h){const e=(0,u.f)(h,p);i.thumbnail=new b.Z({url:e})}else Z&&(i.thumbnail=new b.Z({url:`data:image/png;base64,${Z}`}));e.styleUrl?i.styleOrigin=new f.Z({portal:n.portal,styleUrl:e.styleUrl,name:t}):e.styleName&&(i.styleOrigin=new f.Z({portal:n.portal,styleName:e.styleName,name:t}))}return i}))}function g(e){return null===e||"CIMSymbolReference"===e.type?e:{type:"CIMSymbolReference",symbol:e}}function Z(e){for(const t of e.typeKeywords)if(/^Esri.*Style$/.test(t)&&"Esri Style"!==t)return t}function S(e,t){const n={responseType:"json",query:{f:"json"},...t};return(0,s.default)((0,i.Fv)(e),n)}const N="esri_en",$="Style",U="https://cdn.arcgis.com/sharing/rest/content/items/220936cc6ed342c9937abd8f180e7d1e/resources/styles/cim/{SymbolName}.json?f=json"}}]);