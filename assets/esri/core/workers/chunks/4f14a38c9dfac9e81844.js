self.webpackChunkRemoteClient([205],{681:function(e,t,r){"use strict";r.r(t),r.d(t,"clearBoundingBoxCache",(function(){return h})),r.d(t,"computeIconLayerResourceSize",(function(){return w})),r.d(t,"computeLayerResourceSize",(function(){return m})),r.d(t,"computeLayerSize",(function(){return p})),r.d(t,"computeObjectLayerResourceSize",(function(){return j}));var n=r(1),i=r(14),o=r(2),c=r(55),u=r(447),s=r(194),a=(r(7),r(91));const l=Object(s.i)(-.5,-.5,-.5,.5,.5,.5),f=Object(s.i)(-.5,-.5,0,.5,.5,1),y=Object(s.i)(-.5,-.5,0,.5,.5,.5);let b=d();function d(){return new u.a(50)}function h(){b=d()}function m(e,t){if("icon"===e.type)return w(e,t);if("object"===e.type)return j(e,t);throw new i.a("symbol3d:unsupported-symbol-layer","computeLayerSize only works with symbol layers of type Icon and Object")}async function p(e,t){if("icon"===e.type)return function(e,t){return w(e,t).then(t=>{if(null==e.size)return t;const r=t[0]/t[1];return r>1?[e.size,e.size/r]:[e.size*r,e.size]})}(e,t);if("object"===e.type)return async function(e,t){return function(e,{isPrimitive:t,width:r,depth:n,height:i}){const o=t?10:1;if(null==r&&null==i&&null==n)return[o*e[0],o*e[1],o*e[2]];const c=Object(a.g)(r,n,i);let u;for(let t=0;t<3;t++){const r=c[t];if(null!=r){u=r/e[t];break}}for(let t=0;t<3;t++)null==c[t]&&(c[t]=e[t]*u);return c}(await j(e,t),e)}(e,t);throw new i.a("symbol3d:unsupported-symbol-layer","computeLayerSize only works with symbol layers of type Icon and Object")}async function w(e,t){if(e.resource.href)return(r=e.resource.href,Object(c.default)(r,{responseType:"image"}).then(e=>e.data)).then(e=>[e.width,e.height]);var r;if(e.resource.primitive)return Object(n.g)(t)?[t,t]:[256,256];throw new i.a("symbol3d:invalid-symbol-layer","symbol layers of type Icon must have either an href or a primitive resource")}function j(e,t){return async function(e,t){if(!e.isPrimitive){const t=e.resource.href,n=b.get(t);if(void 0!==n)return Object(o.s)(n);const i=await Promise.all([r.e(17),r.e(32)]).then(r.bind(null,665)),c=await i.fetch(t,{disableTextures:!0});return b.put(t,c.referenceBoundingBox),c.referenceBoundingBox}let c=null;if(e.resource&&e.resource.primitive&&(c=Object(s.b)(function(e){switch(e){case"sphere":case"cube":case"diamond":return l;case"cylinder":case"cone":case"inverted-cone":return f;case"tetrahedron":return y;default:return}}(e.resource.primitive)),Object(n.g)(t)))for(let e=0;e<c.length;e++)c[e]*=t;return c?Object(o.s)(c):Object(o.r)(new i.a("symbol:invalid-resource","The symbol does not have a valid resource"))}(e,t).then(e=>Object(s.m)(e))}}});