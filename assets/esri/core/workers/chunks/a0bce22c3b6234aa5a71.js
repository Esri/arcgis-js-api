self.webpackChunkRemoteClient([45],{106:function(e,t,a){"use strict";function i(e){return e&&"esri.renderers.visualVariables.SizeVariable"===e.declaredClass}function r(e){return null!=e&&!isNaN(e)&&isFinite(e)}function n(e){return e.valueExpression?"expression":e.field&&"string"==typeof e.field?"field":"unknown"}function s(e,t){const a=t||n(e),i=e.valueUnit||"unknown";return"unknown"===a?"constant":e.stops?"stops":null!=e.minSize&&null!=e.maxSize&&null!=e.minDataValue&&null!=e.maxDataValue?"clamped-linear":"unknown"===i?null!=e.minSize&&null!=e.minDataValue?e.minSize&&e.minDataValue?"proportional":"additive":"identity":"real-world-size"}a.d(t,"a",(function(){return n})),a.d(t,"b",(function(){return s})),a.d(t,"c",(function(){return i})),a.d(t,"d",(function(){return r}))},117:function(e,t,a){"use strict";a.d(t,"a",(function(){return r})),a.d(t,"b",(function(){return n})),a.d(t,"c",(function(){return s})),a.d(t,"d",(function(){return l}));var i=a(4);function r(e,t,a){return Object(i.j)(e.map((e,i)=>t.apply(a,[e,i])))}function n(e,t,a){return Object(i.j)(e.map((e,i)=>t.apply(a,[e,i]))).then(e=>e.map(e=>e.value))}function s(e){return e.then(e=>({ok:!0,value:e})).catch(e=>({ok:!1,error:e}))}function l(e){return e.then(e=>({ok:!0,value:e})).catch(e=>(Object(i.s)(e),{ok:!1,error:e}))}},149:function(e,t,a){"use strict";var i,r=a(13),n=(a(3),a(2),a(5),a(15)),s=a(18),l=(a(21),a(36),a(37),a(55)),o=a(141);let c=i=class extends l.a{constructor(e){super(e),this.value=0,this.unit="milliseconds"}toMilliseconds(){return this.value*o.a[this.unit]}clone(){return new i({value:this.value,unit:this.unit})}};Object(r.a)([Object(n.b)({type:Number,json:{write:!0},nonNullable:!0})],c.prototype,"value",void 0),Object(r.a)([Object(n.b)({type:o.c.apiValues,json:{type:o.c.jsonValues,read:o.c.read,write:o.c.write},nonNullable:!0})],c.prototype,"unit",void 0),c=i=Object(r.a)([Object(s.a)("esri.TimeInterval")],c);var u=c;t.a=u},155:function(e,t,a){"use strict";a.d(t,"a",(function(){return x})),a.d(t,"b",(function(){return m})),a.d(t,"c",(function(){return y})),a.d(t,"d",(function(){return f})),a.d(t,"e",(function(){return h})),a.d(t,"f",(function(){return j})),a.d(t,"g",(function(){return d}));var i=a(88),r=a(0),n=a(2),s=a(62),l=a(76),o=a(75),c=a(106);const u=n.a.getLogger("esri.renderers.visualVariables.support.visualVariableUtils"),b=new l.a,p=Math.PI,d=/^\s*(return\s+)?\$view\.scale\s*(;)?\s*$/i;function m(e,t,a){const i="visualVariables"in e&&e.visualVariables?e.visualVariables.filter(e=>"color"===e.type)[0]:e;if(!i)return;if("esri.renderers.visualVariables.ColorVariable"!==i.declaredClass)return void u.warn("The visualVariable should be an instance of esri.renderers.visualVariables.ColorVariable");const n="number"==typeof t,l=n?null:t,o=l&&l.attributes;let c=n?t:null;const b=i.field,{ipData:p,hasExpression:d}=i.cache;let m=i.cache.compiledFunc;if(!b&&!d){const e=i.stops;return e&&e[0]&&e[0].color}if("number"!=typeof c)if(d){if(!Object(r.h)(a)||!Object(r.h)(a.arcade))return void u.error("Use of arcade expressions requires an arcade context");const e={viewingMode:a.viewingMode,scale:a.scale,spatialReference:a.spatialReference},t=a.arcade.arcadeUtils,n=t.getViewInfo(e),s=t.createExecContext(l,n);if(!m){const e=t.createSyntaxTree(i.valueExpression);m=t.createFunction(e),i.cache.compiledFunc=m}c=t.executeFunction(m,s)}else o&&(c=o[b]);const y=i.normalizationField,f=o?parseFloat(o[y]):void 0;if(null!=c&&(!y||n||!isNaN(f)&&0!==f)){isNaN(f)||n||(c/=f);const e=g(c,p);if(e){const t=e[0],n=e[1],l=t===n?i.stops[t].color:s.a.blendColors(i.stops[t].color,i.stops[n].color,e[2],Object(r.h)(a)?a.color:void 0);return new s.a(l)}}}function y(e,t,a){const i="visualVariables"in e&&e.visualVariables?e.visualVariables.filter(e=>"opacity"===e.type)[0]:e;if(!i)return;if("esri.renderers.visualVariables.OpacityVariable"!==i.declaredClass)return void u.warn("The visualVariable should be an instance of esri.renderers.visualVariables.OpacityVariable");const n="number"==typeof t,s=n?null:t,l=s&&s.attributes;let o=n?t:null;const c=i.field,{ipData:b,hasExpression:p}=i.cache;let d=i.cache.compiledFunc;if(!c&&!p){const e=i.stops;return e&&e[0]&&e[0].opacity}if("number"!=typeof o)if(p){if(Object(r.g)(a)||Object(r.g)(a.arcade))return void u.error("Use of arcade expressions requires an arcade context");const e={viewingMode:a.viewingMode,scale:a.scale,spatialReference:a.spatialReference},t=a.arcade.arcadeUtils,n=t.getViewInfo(e),l=t.createExecContext(s,n);if(!d){const e=t.createSyntaxTree(i.valueExpression);d=t.createFunction(e),i.cache.compiledFunc=d}o=t.executeFunction(d,l)}else l&&(o=l[c]);const m=i.normalizationField,y=l?parseFloat(l[m]):void 0;if(null!=o&&(!m||n||!isNaN(y)&&0!==y)){isNaN(y)||n||(o/=y);const e=g(o,b);if(e){const t=e[0],a=e[1];if(t===a)return i.stops[t].opacity;{const r=i.stops[t].opacity;return r+(i.stops[a].opacity-r)*e[2]}}}}function f(e,t,a){const i="visualVariables"in e&&e.visualVariables?e.visualVariables.filter(e=>"rotation"===e.type)[0]:e;if(!i)return;if("esri.renderers.visualVariables.RotationVariable"!==i.declaredClass)return void u.warn("The visualVariable should be an instance of esri.renderers.visualVariables.RotationVariable");const n=i.axis||"heading",s="heading"===n&&"arithmetic"===i.rotationType?90:0,l="heading"===n&&"arithmetic"===i.rotationType?-1:1,o="number"==typeof t?null:t,c=o&&o.attributes,b=i.field,{hasExpression:p}=i.cache;let d=i.cache.compiledFunc,m=0;if(!b&&!p)return m;if(p){if(Object(r.g)(a)||Object(r.g)(a.arcade))return void u.error("Use of arcade expressions requires an arcade context");const e={viewingMode:a.viewingMode,scale:a.scale,spatialReference:a.spatialReference},t=a.arcade.arcadeUtils,n=t.getViewInfo(e),s=t.createExecContext(o,n);if(!d){const e=t.createSyntaxTree(i.valueExpression);d=t.createFunction(e),i.cache.compiledFunc=d}m=t.executeFunction(d,s)}else c&&(m=c[b]||0);return m="number"!=typeof m||isNaN(m)?null:s+l*m,m}function h(e,t,a){const i="visualVariables"in e&&e.visualVariables?e.visualVariables.filter(e=>"size"===e.type)[0]:e;if(!i)return;if("esri.renderers.visualVariables.SizeVariable"!==i.declaredClass)return void u.warn("The visualVariable should be an instance of esri.renderers.visualVariables.SizeVariable");const n=function(e,t,a,i,n){switch(t.transformationType){case"additive":return function(e,t,a,i){return e+(O(t.minSize,a,i)||t.minDataValue)}(e,t,a,i);case"constant":return function(e,t,a){const i=e.stops;let r=i&&i.length&&i[0].size;return null==r&&(r=e.minSize),O(r,t,a)}(t,a,i);case"clamped-linear":return function(e,t,a,i){const n=(e-t.minDataValue)/(t.maxDataValue-t.minDataValue),s=O(t.minSize,a,i),l=O(t.maxSize,a,i),o=Object(r.h)(i)?i.shape:void 0;if(e<=t.minDataValue)return s;if(e>=t.maxDataValue)return l;if("area"===t.scaleBy&&o){const e="circle"===o,t=e?p*(s/2)**2:s*s,a=t+n*((e?p*(l/2)**2:l*l)-t);return e?2*Math.sqrt(a/p):Math.sqrt(a)}return s+n*(l-s)}(e,t,a,i);case"proportional":return function(e,t,a,i){const n=Object(r.h)(i)?i.shape:void 0,s=e/t.minDataValue,l=O(t.minSize,a,i),o=O(t.maxSize,a,i);let c=null;return c="circle"===n?2*Math.sqrt(s*(l/2)**2):"square"===n||"diamond"===n||"image"===n?Math.sqrt(s*l**2):s*l,v(c,l,o)}(e,t,a,i);case"stops":return function(e,t,a,i,r){const[n,s,l]=g(e,r);if(n===s)return O(t.stops[n].size,a,i);{const e=O(t.stops[n].size,a,i);return e+(O(t.stops[s].size,a,i)-e)*l}}(e,t,a,i,n);case"real-world-size":return function(e,t,a,i){const n=(Object(r.h)(i)&&i.resolution?i.resolution:1)*o.a[t.valueUnit],s=O(t.minSize,a,i),l=O(t.maxSize,a,i),{valueRepresentation:c}=t;let u=null;return u="area"===c?2*Math.sqrt(e/p)/n:"radius"===c||"distance"===c?2*e/n:e/n,v(u,s,l)}(e,t,a,i);case"identity":return e;case"unknown":return null}}(function(e,t,a){const i="number"==typeof t,n=i?null:t,s=n&&n.attributes;let l=i?t:null;const{isScaleDriven:o}=e.cache;let b=e.cache.compiledFunc;if(o){const t=Object(r.h)(a)?a.scale:void 0,i=Object(r.h)(a)?a.view:void 0;l=null==t||"3d"===i?function(e){let t=null,a=null;const i=e.stops;return i?(t=i[0].value,a=i[i.length-1].value):(t=e.minDataValue||0,a=e.maxDataValue||0),(t+a)/2}(e):t}else if(!i)switch(e.inputValueType){case"expression":{if(Object(r.g)(a)||Object(r.g)(a.arcade))return void u.error("Use of arcade expressions requires an arcade context");const t={viewingMode:a.viewingMode,scale:a.scale,spatialReference:a.spatialReference},i=a.arcade.arcadeUtils,s=i.getViewInfo(t),o=i.createExecContext(n,s);if(!b){const t=i.createSyntaxTree(e.valueExpression);b=i.createFunction(t),e.cache.compiledFunc=b}l=i.executeFunction(b,o);break}case"field":s&&(l=s[e.field]);break;case"unknown":l=null}if(!Object(c.d)(l))return null;if(i||!e.normalizationField)return l;const p=s?parseFloat(s[e.normalizationField]):null;return Object(c.d)(p)&&0!==p?l/p:null}(i,t,a),i,t,a,i.cache.ipData);return null==n||isNaN(n)?0:n}function O(e,t,a){return null==e?null:Object(c.c)(e)?h(e,t,a):Object(c.d)(e)?e:null}function v(e,t,a){return Object(c.d)(a)&&e>a?a:Object(c.d)(t)&&e<t?t:e}function j(e,t,a){const{isScaleDriven:i}=e.cache;if(!(i&&"3d"===a||t))return null;const r={scale:t,view:a};let n=O(e.minSize,b,r),s=O(e.maxSize,b,r);if(null!=n||null!=s){if(n>s){const e=s;s=n,n=e}return{minSize:n,maxSize:s}}}function g(e,t){if(!t)return;let a=0,i=t.length-1;return t.some((t,r)=>e<t?(i=r,!0):(a=r,!1)),[a,i,(e-t[a])/(t[i]-t[a])]}function x(e,t,a){const r=["proportional","proportional","proportional"];for(const n of e){const e=n.useSymbolValue?"symbol-value":h(n,t,a);switch(n.axis){case"width":r[0]=e;break;case"depth":r[1]=e;break;case"height":r[2]=e;break;case"width-and-depth":r[0]=e,r[1]=e;break;case"all":case void 0:case null:r[0]=e,r[1]=e,r[2]=e;break;default:Object(i.a)(n.axis)}}return r}},190:function(e,t,a){"use strict";var i,r=a(13),n=(a(3),a(6)),s=(a(2),a(5),a(15)),l=a(57),o=a(18),c=a(56),u=(a(21),a(36),a(37),a(55)),b=a(141),p=a(101),d=a(149);let m=i=class extends u.a{constructor(e){super(e),this.respectsDaylightSaving=!1,this.timezone=null}readRespectsDaylightSaving(e,t){return void 0!==t.respectsDaylightSaving?t.respectsDaylightSaving:void 0!==t.respectDaylightSaving&&t.respectDaylightSaving}clone(){const{respectsDaylightSaving:e,timezone:t}=this;return new i({respectsDaylightSaving:e,timezone:t})}};Object(r.a)([Object(s.b)({type:Boolean,json:{write:!0}})],m.prototype,"respectsDaylightSaving",void 0),Object(r.a)([Object(l.a)("respectsDaylightSaving",["respectsDaylightSaving","respectDaylightSaving"])],m.prototype,"readRespectsDaylightSaving",null),Object(r.a)([Object(s.b)({type:String,json:{read:{source:"timeZone"},write:{target:"timeZone"}}})],m.prototype,"timezone",void 0),m=i=Object(r.a)([Object(o.a)("esri.layers.support.TimeReference")],m);var y,f=m;let h=y=class extends u.a{constructor(e){super(e),this.cumulative=!1,this.endField=null,this.fullTimeExtent=null,this.hasLiveData=!1,this.interval=null,this.startField=null,this.timeReference=null,this.trackIdField=null,this.useTime=!0}readFullTimeExtent(e,t){if(!t.timeExtent||!Array.isArray(t.timeExtent)||2!==t.timeExtent.length)return null;const a=new Date(t.timeExtent[0]),i=new Date(t.timeExtent[1]);return new p.a({start:a,end:i})}writeFullTimeExtent(e,t){e&&e.start&&e.end?t.timeExtent=[e.start.getTime(),e.end.getTime()]:t.timeExtent=null}readInterval(e,t){return t.timeInterval&&t.timeIntervalUnits?new d.a({value:t.timeInterval,unit:b.c.fromJSON(t.timeIntervalUnits)}):t.defaultTimeInterval&&t.defaultTimeIntervalUnits?new d.a({value:t.defaultTimeInterval,unit:b.c.fromJSON(t.defaultTimeIntervalUnits)}):null}writeInterval(e,t){if(e){const a=e.toJSON();t.timeInterval=a.value,t.timeIntervalUnits=a.unit}else t.timeInterval=null,t.timeIntervalUnits=null}clone(){const{cumulative:e,endField:t,hasLiveData:a,interval:i,startField:r,timeReference:s,fullTimeExtent:l,trackIdField:o,useTime:c}=this;return new y({cumulative:e,endField:t,hasLiveData:a,interval:i,startField:r,timeReference:Object(n.a)(s),fullTimeExtent:Object(n.a)(l),trackIdField:o,useTime:c})}};Object(r.a)([Object(s.b)({type:Boolean,json:{read:{source:"exportOptions.timeDataCumulative"},write:{target:"exportOptions.timeDataCumulative"}}})],h.prototype,"cumulative",void 0),Object(r.a)([Object(s.b)({type:String,json:{read:{source:"endTimeField"},write:{target:"endTimeField",allowNull:!0}}})],h.prototype,"endField",void 0),Object(r.a)([Object(s.b)({type:p.a,json:{write:{enabled:!0,allowNull:!0}}})],h.prototype,"fullTimeExtent",void 0),Object(r.a)([Object(l.a)("fullTimeExtent",["timeExtent"])],h.prototype,"readFullTimeExtent",null),Object(r.a)([Object(c.a)("fullTimeExtent")],h.prototype,"writeFullTimeExtent",null),Object(r.a)([Object(s.b)({type:Boolean,json:{write:!0}})],h.prototype,"hasLiveData",void 0),Object(r.a)([Object(s.b)({type:d.a,json:{write:{enabled:!0,allowNull:!0}}})],h.prototype,"interval",void 0),Object(r.a)([Object(l.a)("interval",["timeInterval","timeIntervalUnits","defaultTimeInterval","defaultTimeIntervalUnits"])],h.prototype,"readInterval",null),Object(r.a)([Object(c.a)("interval")],h.prototype,"writeInterval",null),Object(r.a)([Object(s.b)({type:String,json:{read:{source:"startTimeField"},write:{target:"startTimeField",allowNull:!0}}})],h.prototype,"startField",void 0),Object(r.a)([Object(s.b)({type:f,json:{write:{enabled:!0,allowNull:!0}}})],h.prototype,"timeReference",void 0),Object(r.a)([Object(s.b)({type:String,json:{write:{enabled:!0,allowNull:!0}}})],h.prototype,"trackIdField",void 0),Object(r.a)([Object(s.b)({type:Boolean,json:{read:{source:"exportOptions.useTime"},write:{target:"exportOptions.useTime"}}})],h.prototype,"useTime",void 0),h=y=Object(r.a)([Object(o.a)("esri.layers.support.TimeInfo")],h);var O=h;t.a=O},224:function(e,t,a){"use strict";a.d(t,"a",(function(){return p}));var i=a(13),r=(a(3),a(2),a(5),a(15)),n=a(57),s=a(18),l=(a(21),a(36),a(37),a(74)),o=a(141),c=a(101),u=a(149),b=a(190);const p=e=>{let t=class extends e{constructor(){super(...arguments),this.timeExtent=null,this.timeOffset=null,this.useViewTime=!0}readOffset(e,t){const a=t.timeInfo.exportOptions;if(!a)return null;const i=a.timeOffset,r=o.c.fromJSON(a.timeOffsetUnits);return i&&r?new u.a({value:i,unit:r}):null}set timeInfo(e){Object(l.f)(e,this.fields),this._set("timeInfo",e)}};return Object(i.a)([Object(r.b)({type:c.a,json:{write:!1}})],t.prototype,"timeExtent",void 0),Object(i.a)([Object(r.b)({type:u.a})],t.prototype,"timeOffset",void 0),Object(i.a)([Object(n.a)("service","timeOffset",["timeInfo.exportOptions"])],t.prototype,"readOffset",null),Object(i.a)([Object(r.b)({value:null,type:b.a,json:{write:!0,origins:{"web-document":{read:!1,write:!1}}}})],t.prototype,"timeInfo",null),Object(i.a)([Object(r.b)({type:Boolean,json:{read:{source:"timeAnimation"},write:{target:"timeAnimation"},origins:{"web-scene":{read:!1,write:!1}}}})],t.prototype,"useViewTime",void 0),t=Object(i.a)([Object(s.a)("esri.layers.mixins.TemporalLayer")],t),t}},234:function(e,t,a){"use strict";a.d(t,"a",(function(){return l})),a.d(t,"b",(function(){return o}));var i=a(0),r=a(69),n=a(86),s=a(117);async function l(e,t){return await e.load(),o(e,t)}async function o(e,t){const a=[],l=(...e)=>{for(const t of e)Object(i.g)(t)||(Array.isArray(t)?l(...t):r.a.isCollection(t)?t.forEach(e=>l(e)):n.a.isLoadable(t)&&a.push(t))};t(l);let o=null;if(await Object(s.b)(a,async e=>{!1!==(await Object(s.c)(function(e){return"loadAll"in e&&"function"==typeof e.loadAll}(e)?e.loadAll():e.load())).ok||o||(o=e)}),o)throw o.loadError;return e}},345:function(e,t,a){"use strict";a.d(t,"a",(function(){return r}));var i=a(72);function r(e,t){const a=t||e.extent,r=e.width,n=Object(i.c)(a&&a.spatialReference);return a&&r?a.width/r*n*i.g*96:0}},360:function(e,t,a){"use strict";a.r(t);var i=a(13),r=(a(3),a(0)),n=(a(2),a(5)),s=a(15),l=a(57),o=a(18),c=a(56),u=a(16),b=(a(21),a(36),a(27)),p=(a(37),a(4)),d=a(61),m=a(54),y=a(234),f=a(87),h=a(101),O=a(84),v=a(73),j=a(99),g=a(166),x=a(124),w=a(205),S=a(96),V=a(150),D=a(107),F=a(224),T=a(158),E=a(345),I=a(475),N=a(391),z=a(346),L=a(476),R=a(25);const k={visible:"visibleSublayers",definitionExpression:"layerDefs",labelingInfo:"hasDynamicLayers",labelsVisible:"hasDynamicLayers",opacity:"hasDynamicLayers",minScale:"visibleSublayers",maxScale:"visibleSublayers",renderer:"hasDynamicLayers",source:"hasDynamicLayers"};let M=class extends(Object(T.b)(R.a)){constructor(e){super(e),this.scale=0}destroy(){this.layer=null}get dynamicLayers(){if(!this.hasDynamicLayers)return null;const e=this.visibleSublayers.map(e=>e.toExportImageJSON());return e.length?JSON.stringify(e):null}get hasDynamicLayers(){return this.layer&&Object(z.a)(this.visibleSublayers,this.layer.serviceSublayers,this.layer)}set layer(e){this._get("layer")!==e&&(this._set("layer",e),this.handles.remove("layer"),e&&this.handles.add([e.allSublayers.on("change",()=>this.notifyChange("visibleSublayers")),e.on("sublayer-update",e=>this.notifyChange(k[e.propertyName]))],"layer"))}get layers(){const e=this.visibleSublayers;return e?e.length?"show:"+e.map(e=>e.id).join(","):"show:-1":null}get layerDefs(){const e=this.visibleSublayers.filter(e=>null!=e.definitionExpression);return e.length?JSON.stringify(e.reduce((e,t)=>(e[t.id]=t.definitionExpression,e),{})):null}get version(){this.commitProperty("layers"),this.commitProperty("layerDefs"),this.commitProperty("dynamicLayers"),this.commitProperty("timeExtent");const e=this.layer;return e&&(e.commitProperty("dpi"),e.commitProperty("imageFormat"),e.commitProperty("imageTransparency"),e.commitProperty("gdbVersion")),(this._get("version")||0)+1}get visibleSublayers(){const e=[];if(!this.layer)return e;const t=this.layer.sublayers,a=t=>{const i=this.scale,r=0===i,n=0===t.minScale||i<=t.minScale,s=0===t.maxScale||i>=t.maxScale;t.visible&&(r||n&&s)&&(t.sublayers?t.sublayers.forEach(a):e.unshift(t))};t&&t.forEach(a);const i=this._get("visibleSublayers");return!i||i.length!==e.length||i.some((t,a)=>e[a]!==t)?e:i}toJSON(){const e=this.layer;let t={dpi:e.dpi,format:e.imageFormat,transparent:e.imageTransparency,gdbVersion:e.gdbVersion||null};return this.hasDynamicLayers&&this.dynamicLayers?t.dynamicLayers=this.dynamicLayers:t={...t,layers:this.layers,layerDefs:this.layerDefs},t}};Object(i.a)([Object(s.b)({readOnly:!0})],M.prototype,"dynamicLayers",null),Object(i.a)([Object(s.b)({readOnly:!0})],M.prototype,"hasDynamicLayers",null),Object(i.a)([Object(s.b)()],M.prototype,"layer",null),Object(i.a)([Object(s.b)({readOnly:!0})],M.prototype,"layers",null),Object(i.a)([Object(s.b)({readOnly:!0})],M.prototype,"layerDefs",null),Object(i.a)([Object(s.b)({type:Number})],M.prototype,"scale",void 0),Object(i.a)([Object(s.b)(v.a)],M.prototype,"timeExtent",void 0),Object(i.a)([Object(s.b)({readOnly:!0})],M.prototype,"version",null),Object(i.a)([Object(s.b)({readOnly:!0})],M.prototype,"visibleSublayers",null),M=Object(i.a)([Object(o.a)("esri.layers.mixins.ExportImageParameters")],M);let U=class extends(Object(x.a)(Object(F.a)(Object(D.a)(Object(V.a)(Object(L.a)(Object(I.a)(Object(g.a)(Object(j.a)(Object(S.a)(Object(O.a)(Object(w.a)(Object(T.b)(f.a))))))))))))){constructor(...e){super(...e),this.alwaysRefetch=!1,this.dpi=96,this.gdbVersion=null,this.imageFormat="png24",this.imageMaxHeight=2048,this.imageMaxWidth=2048,this.imageTransparency=!0,this.isReference=null,this.labelsVisible=!1,this.operationalLayerType="ArcGISMapServiceLayer",this.sourceJSON=null,this.sublayers=null,this.type="map-image",this.url=null}normalizeCtorArgs(e,t){return"string"==typeof e?{url:e,...t}:e}load(e){const t=Object(r.h)(e)?e.signal:null;return this.addResolvingPromise(this.loadFromPortal({supportedTypes:["Map Service"]},e).then(()=>this._fetchService(t),()=>this._fetchService(t))),Promise.resolve(this)}readImageFormat(e,t){const a=t.supportedImageFormatTypes;return a&&a.indexOf("PNG32")>-1?"png32":"png24"}writeSublayers(e,t,a,i){if(!this.loaded||!e)return;const r=e.slice().reverse().flatten(({sublayers:e})=>e&&e.toArray().reverse()).toArray();let n=!1;if(this.capabilities&&this.capabilities.operations.supportsExportMap&&this.capabilities.exportMap.supportsDynamicLayers){const e=Object(b.d)(i.origin);if(3===e){const e=this.createSublayersForOrigin("service").sublayers;n=Object(z.c)(r,e,2)}else if(e>3){const e=this.createSublayersForOrigin("portal-item");n=Object(z.c)(r,e.sublayers,Object(b.d)(e.origin))}}const s=[],l={writeSublayerStructure:n,...i};let o=n;r.forEach(e=>{const t=e.write({},l);s.push(t),o=o||"user"===e.originOf("visible")}),s.some(e=>Object.keys(e).length>1)&&(t.layers=s),o&&(t.visibleLayers=r.filter(e=>e.visible).map(e=>e.id))}createExportImageParameters(e,t,a,i){const r=i&&i.pixelRatio||1;e&&this.version>=10&&(e=e.clone().shiftCentralMeridian());const n=new M({layer:this,scale:Object(E.a)({extent:e,width:t})*r}),s=n.toJSON();n.destroy();const l=!i||!i.rotation||this.version<10.3?{}:{rotation:-i.rotation},o=e&&e.spatialReference,c=o.wkid||JSON.stringify(o.toJSON());s.dpi*=r;const u={};if(null!=i&&i.timeExtent){const{start:e,end:t}=i.timeExtent.toJSON();u.time=e&&t&&e===t?""+e:`${null==e?"null":e},${null==t?"null":t}`}else this.timeInfo&&!this.timeInfo.hasLiveData&&(u.time="null,null");return{bbox:e&&e.xmin+","+e.ymin+","+e.xmax+","+e.ymax,bboxSR:c,imageSR:c,size:t+","+a,...s,...l,...u}}async fetchImage(e,t,a,i){const r={responseType:"image"};i&&i.timestamp&&(r.query={...r.query,_ts:i.timestamp}),i&&i.signal&&(r.signal=i.signal),this.customParameters&&Object.keys(this.customParameters).length&&(r.query={...this.customParameters,...r.query});const n=this.parsedUrl.path+"/export",s={...this.parsedUrl.query,...this.createExportImageParameters(e,t,a,i),f:"image",_ts:this.alwaysRefetch?Date.now():null};return null==s.dynamicLayers||this.capabilities.exportMap.supportsDynamicLayers?(r.query?r.query={...s,...r.query}:r.query=s,Object(m.default)(n,r).then(e=>e.data).catch(e=>{if(Object(p.l)(e))throw e;throw new u.a("mapimagelayer:image-fetch-error","Unable to load image: "+n,{error:e})})):Promise.reject(new u.a("mapimagelayer:dynamiclayer-not-supported",`service ${this.url} doesn't support dynamic layers, which is required to be able to change the sublayer's order, rendering, labeling or source.`,{query:s}))}async fetchRecomputedExtents(e={}){const t={...e,query:{returnUpdates:!0,f:"json"}},{data:a}=await Object(m.default)(this.url,t),{extent:i,fullExtent:r,timeExtent:n}=a,s=i||r;return{fullExtent:s&&d.a.fromJSON(s),timeExtent:n&&h.a.fromJSON({start:n[0],end:n[1]})}}loadAll(){return Object(y.a)(this,e=>{e(this.allSublayers)})}async _fetchService(e){if(this.sourceJSON)return void this.read(this.sourceJSON,{origin:"service",url:this.parsedUrl});const{data:t,ssl:a}=await Object(m.default)(this.parsedUrl.path,{query:{f:"json",...this.parsedUrl.query,...this.customParameters},signal:e});a&&(this.url=this.url.replace(/^http:/i,"https:")),this.sourceJSON=t,this.read(t,{origin:"service",url:this.parsedUrl})}};Object(i.a)([Object(s.b)()],U.prototype,"alwaysRefetch",void 0),Object(i.a)([Object(s.b)()],U.prototype,"dpi",void 0),Object(i.a)([Object(s.b)()],U.prototype,"gdbVersion",void 0),Object(i.a)([Object(s.b)()],U.prototype,"imageFormat",void 0),Object(i.a)([Object(l.a)("imageFormat",["supportedImageFormatTypes"])],U.prototype,"readImageFormat",null),Object(i.a)([Object(s.b)({json:{origins:{service:{read:{source:"maxImageHeight"}}}}})],U.prototype,"imageMaxHeight",void 0),Object(i.a)([Object(s.b)({json:{origins:{service:{read:{source:"maxImageWidth"}}}}})],U.prototype,"imageMaxWidth",void 0),Object(i.a)([Object(s.b)()],U.prototype,"imageTransparency",void 0),Object(i.a)([Object(s.b)({type:Boolean,json:{read:!1,write:{enabled:!0,overridePolicy:()=>({enabled:!1})}}})],U.prototype,"isReference",void 0),Object(i.a)([Object(s.b)({json:{read:!1,write:!1}})],U.prototype,"labelsVisible",void 0),Object(i.a)([Object(s.b)({type:["ArcGISMapServiceLayer"]})],U.prototype,"operationalLayerType",void 0),Object(i.a)([Object(s.b)({json:{read:!1,write:!1}})],U.prototype,"popupEnabled",void 0),Object(i.a)([Object(s.b)()],U.prototype,"sourceJSON",void 0),Object(i.a)([Object(s.b)({json:{write:{ignoreOrigin:!0}}})],U.prototype,"sublayers",void 0),Object(i.a)([Object(c.a)("sublayers",{layers:{type:[N.a]},visibleLayers:{type:[n.a]}})],U.prototype,"writeSublayers",null),Object(i.a)([Object(s.b)({type:["show","hide","hide-children"]})],U.prototype,"listMode",void 0),Object(i.a)([Object(s.b)({json:{read:!1},readOnly:!0,value:"map-image"})],U.prototype,"type",void 0),Object(i.a)([Object(s.b)(v.n)],U.prototype,"url",void 0),U=Object(i.a)([Object(o.a)("esri.layers.MapImageLayer")],U);var q=U;t.default=q},75:function(e,t,a){"use strict";a.d(t,"a",(function(){return n}));var i=a(100),r=a(72);const n={inches:Object(r.b)(1,"meters","inches"),feet:Object(r.b)(1,"meters","feet"),"us-feet":Object(r.b)(1,"meters","us-feet"),yards:Object(r.b)(1,"meters","yards"),miles:Object(r.b)(1,"meters","miles"),"nautical-miles":Object(r.b)(1,"meters","nautical-miles"),millimeters:Object(r.b)(1,"meters","millimeters"),centimeters:Object(r.b)(1,"meters","centimeters"),decimeters:Object(r.b)(1,"meters","decimeters"),meters:Object(r.b)(1,"meters","meters"),kilometers:Object(r.b)(1,"meters","kilometers"),"decimal-degrees":1/Object(r.h)(1,"meters",i.a.radius)}},88:function(e,t,a){"use strict";a.d(t,"a",(function(){return i}));a(3);function i(e){}}});