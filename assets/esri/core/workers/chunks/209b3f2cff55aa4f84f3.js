(self.webpackChunkRemoteClient=self.webpackChunkRemoteClient||[]).push([[8562],{19153:(t,e,n)=>{"use strict";n.d(e,{E:()=>r,R:()=>i});const r=1e-6,i=Math.random,s=Math.PI/180,o=180/Math.PI;Object.freeze({__proto__:null,EPSILON:r,RANDOM:i,toRadian:function(t){return t*s},toDegree:function(t){return t*o},equals:function(t,e){return Math.abs(t-e)<=r*Math.max(1,Math.abs(t),Math.abs(e))}})},10188:(t,e,n)=>{"use strict";n.d(e,{E:()=>l,a:()=>h,b:()=>a,c:()=>w,d:()=>M,e:()=>y,f:()=>u,g:()=>o,h:()=>p,i:()=>d,k:()=>N,l:()=>s,m:()=>v,n:()=>m,p:()=>g,q:()=>A,r:()=>E,s:()=>c,t:()=>b,u:()=>L});var r=n(88230),i=n(19153);function s(t){const e=t[0],n=t[1],r=t[2];return Math.sqrt(e*e+n*n+r*r)}function o(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t}function c(t,e,n,r){return t[0]=e,t[1]=n,t[2]=r,t}function a(t,e,n){return t[0]=e[0]+n[0],t[1]=e[1]+n[1],t[2]=e[2]+n[2],t}function u(t,e,n){return t[0]=e[0]-n[0],t[1]=e[1]-n[1],t[2]=e[2]-n[2],t}function f(t,e,n){return t[0]=e[0]*n[0],t[1]=e[1]*n[1],t[2]=e[2]*n[2],t}function l(t,e,n){return t[0]=e[0]/n[0],t[1]=e[1]/n[1],t[2]=e[2]/n[2],t}function h(t,e,n){return t[0]=e[0]*n,t[1]=e[1]*n,t[2]=e[2]*n,t}function d(t,e){const n=e[0]-t[0],r=e[1]-t[1],i=e[2]-t[2];return Math.sqrt(n*n+r*r+i*i)}function p(t,e){const n=e[0]-t[0],r=e[1]-t[1],i=e[2]-t[2];return n*n+r*r+i*i}function g(t){const e=t[0],n=t[1],r=t[2];return e*e+n*n+r*r}function m(t,e){const n=e[0],r=e[1],i=e[2];let s=n*n+r*r+i*i;return s>0&&(s=1/Math.sqrt(s),t[0]=e[0]*s,t[1]=e[1]*s,t[2]=e[2]*s),t}function M(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]}function w(t,e,n){const r=e[0],i=e[1],s=e[2],o=n[0],c=n[1],a=n[2];return t[0]=i*a-s*c,t[1]=s*o-r*a,t[2]=r*c-i*o,t}function y(t,e,n,r){const i=e[0],s=e[1],o=e[2];return t[0]=i+r*(n[0]-i),t[1]=s+r*(n[1]-s),t[2]=o+r*(n[2]-o),t}function v(t,e,n){const r=e[0],i=e[1],s=e[2];return t[0]=n[0]*r+n[4]*i+n[8]*s+n[12],t[1]=n[1]*r+n[5]*i+n[9]*s+n[13],t[2]=n[2]*r+n[6]*i+n[10]*s+n[14],t}function b(t,e,n){const r=e[0],i=e[1],s=e[2];return t[0]=r*n[0]+i*n[3]+s*n[6],t[1]=r*n[1]+i*n[4]+s*n[7],t[2]=r*n[2]+i*n[5]+s*n[8],t}function A(t,e,n){const r=n[0],i=n[1],s=n[2],o=n[3],c=e[0],a=e[1],u=e[2];let f=i*u-s*a,l=s*c-r*u,h=r*a-i*c,d=i*h-s*l,p=s*f-r*h,g=r*l-i*f;const m=2*o;return f*=m,l*=m,h*=m,d*=2,p*=2,g*=2,t[0]=c+f+d,t[1]=a+l+p,t[2]=u+h+g,t}const F=(0,r.c)(),I=(0,r.c)();function N(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]}function E(t,e,n){const r=n[0]-e[0],i=n[1]-e[1],s=n[2]-e[2];let o=r*r+i*i+s*s;return o>0?(o=1/Math.sqrt(o),t[0]=r*o,t[1]=i*o,t[2]=s*o,t):(t[0]=0,t[1]=0,t[2]=0,t)}const _=u,x=f,S=l,U=d,V=p,L=s,q=g;Object.freeze({__proto__:null,length:s,copy:o,set:c,add:a,subtract:u,multiply:f,divide:l,ceil:function(t,e){return t[0]=Math.ceil(e[0]),t[1]=Math.ceil(e[1]),t[2]=Math.ceil(e[2]),t},floor:function(t,e){return t[0]=Math.floor(e[0]),t[1]=Math.floor(e[1]),t[2]=Math.floor(e[2]),t},min:function(t,e,n){return t[0]=Math.min(e[0],n[0]),t[1]=Math.min(e[1],n[1]),t[2]=Math.min(e[2],n[2]),t},max:function(t,e,n){return t[0]=Math.max(e[0],n[0]),t[1]=Math.max(e[1],n[1]),t[2]=Math.max(e[2],n[2]),t},round:function(t,e){return t[0]=Math.round(e[0]),t[1]=Math.round(e[1]),t[2]=Math.round(e[2]),t},scale:h,scaleAndAdd:function(t,e,n,r){return t[0]=e[0]+n[0]*r,t[1]=e[1]+n[1]*r,t[2]=e[2]+n[2]*r,t},distance:d,squaredDistance:p,squaredLength:g,negate:function(t,e){return t[0]=-e[0],t[1]=-e[1],t[2]=-e[2],t},inverse:function(t,e){return t[0]=1/e[0],t[1]=1/e[1],t[2]=1/e[2],t},normalize:m,dot:M,cross:w,lerp:y,hermite:function(t,e,n,r,i,s){const o=s*s,c=o*(2*s-3)+1,a=o*(s-2)+s,u=o*(s-1),f=o*(3-2*s);return t[0]=e[0]*c+n[0]*a+r[0]*u+i[0]*f,t[1]=e[1]*c+n[1]*a+r[1]*u+i[1]*f,t[2]=e[2]*c+n[2]*a+r[2]*u+i[2]*f,t},bezier:function(t,e,n,r,i,s){const o=1-s,c=o*o,a=s*s,u=c*o,f=3*s*c,l=3*a*o,h=a*s;return t[0]=e[0]*u+n[0]*f+r[0]*l+i[0]*h,t[1]=e[1]*u+n[1]*f+r[1]*l+i[1]*h,t[2]=e[2]*u+n[2]*f+r[2]*l+i[2]*h,t},random:function(t,e){e=e||1;const n=2*(0,i.R)()*Math.PI,r=2*(0,i.R)()-1,s=Math.sqrt(1-r*r)*e;return t[0]=Math.cos(n)*s,t[1]=Math.sin(n)*s,t[2]=r*e,t},transformMat4:v,transformMat3:b,transformQuat:A,rotateX:function(t,e,n,r){const i=[],s=[];return i[0]=e[0]-n[0],i[1]=e[1]-n[1],i[2]=e[2]-n[2],s[0]=i[0],s[1]=i[1]*Math.cos(r)-i[2]*Math.sin(r),s[2]=i[1]*Math.sin(r)+i[2]*Math.cos(r),t[0]=s[0]+n[0],t[1]=s[1]+n[1],t[2]=s[2]+n[2],t},rotateY:function(t,e,n,r){const i=[],s=[];return i[0]=e[0]-n[0],i[1]=e[1]-n[1],i[2]=e[2]-n[2],s[0]=i[2]*Math.sin(r)+i[0]*Math.cos(r),s[1]=i[1],s[2]=i[2]*Math.cos(r)-i[0]*Math.sin(r),t[0]=s[0]+n[0],t[1]=s[1]+n[1],t[2]=s[2]+n[2],t},rotateZ:function(t,e,n,r){const i=[],s=[];return i[0]=e[0]-n[0],i[1]=e[1]-n[1],i[2]=e[2]-n[2],s[0]=i[0]*Math.cos(r)-i[1]*Math.sin(r),s[1]=i[0]*Math.sin(r)+i[1]*Math.cos(r),s[2]=i[2],t[0]=s[0]+n[0],t[1]=s[1]+n[1],t[2]=s[2]+n[2],t},angle:function(t,e){o(F,t),o(I,e),m(F,F),m(I,I);const n=M(F,I);return n>1?0:n<-1?Math.PI:Math.acos(n)},str:function(t){return"vec3("+t[0]+", "+t[1]+", "+t[2]+")"},exactEquals:N,equals:function(t,e){const n=t[0],r=t[1],s=t[2],o=e[0],c=e[1],a=e[2];return Math.abs(n-o)<=i.E*Math.max(1,Math.abs(n),Math.abs(o))&&Math.abs(r-c)<=i.E*Math.max(1,Math.abs(r),Math.abs(c))&&Math.abs(s-a)<=i.E*Math.max(1,Math.abs(s),Math.abs(a))},direction:E,sub:_,mul:x,div:S,dist:U,sqrDist:V,len:L,sqrLen:q})},88230:(t,e,n)=>{"use strict";function r(){return[0,0,0]}function i(t){return[t[0],t[1],t[2]]}function s(t,e,n){return[t,e,n]}function o(t){const e=[0,0,0],n=Math.min(3,t.length);for(let r=0;r<n;++r)e[r]=t[r];return e}function c(t,e){return new Float64Array(t,e,3)}function a(){return s(1,1,1)}function u(){return s(1,0,0)}function f(){return s(0,1,0)}function l(){return s(0,0,1)}n.d(e,{O:()=>d,Z:()=>h,a:()=>i,b:()=>c,c:()=>r,d:()=>o,f:()=>s});const h=[0,0,0],d=a(),p=u(),g=f(),m=l();Object.freeze({__proto__:null,create:r,clone:i,fromValues:s,fromArray:o,createView:c,zeros:function(){return[0,0,0]},ones:a,unitX:u,unitY:f,unitZ:l,ZEROS:h,ONES:d,UNIT_X:p,UNIT_Y:g,UNIT_Z:m})},73581:(t,e,n)=>{"use strict";n.d(e,{Z:()=>i});class r{constructor(t=1){this._seed=t}set seed(t){this._seed=null==t?Math.random()*r._m:t}getInt(){return this._seed=(r._a*this._seed+r._c)%r._m,this._seed}getFloat(){return this.getInt()/(r._m-1)}getIntRange(t,e){return Math.round(this.getFloatRange(t,e))}getFloatRange(t,e){const n=e-t;return t+this.getInt()/r._m*n}}r._m=2147483647,r._a=48271,r._c=0;const i=r},69288:(t,e,n)=>{"use strict";n.d(e,{SO:()=>u,a9:()=>c,fS:()=>s,cq:()=>l,w6:()=>a,Od:()=>g,e$:()=>h,FY:()=>p});var r=n(67380),i=n(73581);function s(t,e,n){if((0,r.Wi)(t)&&(0,r.Wi)(e))return!0;if((0,r.Wi)(t)||(0,r.Wi)(e)||t.length!==e.length)return!1;if(n){for(let r=0;r<t.length;r++)if(!n(t[r],e[r]))return!1}else for(let n=0;n<t.length;n++)if(t[n]!==e[n])return!1;return!0}const o=!!Array.prototype.fill;function c(t,e){if(o)return new Array(t).fill(e);const n=new Array(t);for(let r=0;r<t;r++)n[r]=e;return n}function a(t,e){void 0===e&&(e=t,t=0);const n=new Array(e-t);for(let r=t;r<e;r++)n[r-t]=r;return n}class u{constructor(){this.last=0}}const f=new u;function l(t,e,n,r){r=r||f;const i=Math.max(0,r.last-10);for(let s=i;s<n;++s)if(t[s]===e)return r.last=s,s;const s=Math.min(i,n);for(let n=0;n<s;++n)if(t[n]===e)return r.last=n,n;return-1}function h(t,e,n,r){const i=null==n?t.length:n,s=l(t,e,i,r);if(-1!==s)return t[s]=t[i-1],null==n&&t.pop(),e}const d=new Set;function p(t,e,n=t.length,r=e.length,i,s){if(0===r||0===n)return n;d.clear();for(let t=0;t<r;++t)d.add(e[t]);i=i||f;const o=Math.max(0,i.last-10);for(let e=o;e<n;++e)if(d.has(t[e])&&(s&&s.push(t[e]),d.delete(t[e]),t[e]=t[n-1],--n,--e,0===d.size||0===n))return d.clear(),n;for(let e=0;e<o;++e)if(d.has(t[e])&&(s&&s.push(t[e]),d.delete(t[e]),t[e]=t[n-1],--n,--e,0===d.size||0===n))return d.clear(),n;return d.clear(),n}function g(t,e){const n=t.indexOf(e);return-1!==n?(t.splice(n,1),e):null}new i.Z},68589:(t,e,n)=>{"use strict";n.d(e,{ZF:()=>p,Kt:()=>g,jE:()=>m,uZ:()=>a,Vl:()=>h,xV:()=>s,i2:()=>o,wt:()=>u,t7:()=>l,k3:()=>f,Sf:()=>c,BV:()=>d});var r=n(10188);const i=new Float32Array(1),s=Number.isFinite||function(t){return"number"==typeof t&&window.isFinite(t)},o=Number.isNaN||function(t){return t!=t};function c(t){--t;for(let e=1;e<32;e<<=1)t|=t>>e;return t+1}function a(t,e,n){return Math.min(Math.max(t,e),n)}function u(t){return 0==(t&t-1)}Math.sign;const f=Math.log2||function(t){return Math.log(t)/Math.LN2};function l(t,e,n){return t+(e-t)*n}function h(t){return t*Math.PI/180}function d(t){return 180*t/Math.PI}function p(t){return Math.acos(a(t,-1,1))}function g(t){return Math.asin(a(t,-1,1))}function m(t,e){const n=(0,r.l)(t),i=g(t[2]/n),s=Math.atan2(t[1]/n,t[0]/n);return(0,r.s)(e,n,i,s),e}var M;M=34028234663852886e22,i[0]=M,i[0]},53285:(t,e,n)=>{"use strict";function r(t){switch(t){case"u8":return 1;case"u16":return 2;case"u32":return 4;case"i8":return 1;case"i16":return 2;case"i32":case"f32":return 4;case"f64":return 8;default:return}}function i(t){switch(t){case"u8":case"u16":case"u32":return!1;case"i8":case"i16":case"i32":case"f32":case"f64":return!0;default:return}}function s(t){switch(t){case"u8":case"u16":case"u32":case"i8":case"i16":case"i32":return!0;case"f32":case"f64":return!1;default:return}}function o(t){switch(t){case"u8":return 255;case"u16":return 65535;case"u32":return 4294967295;case"i8":return 127;case"i16":return 32767;case"i32":return 2147483647;case"f32":return 3402823e32;case"f64":return 179769e303;default:return}}n.d(e,{n1:()=>r,U:()=>s,B3:()=>i,Op:()=>o}),n(77645)},48924:(t,e,n)=>{"use strict";n.d(e,{d:()=>i});var r=n(68589);function i(t,e,n){var i;const u=t.byteLength/(4*e),f=new Uint32Array(t,0,u*e);let l=new Uint32Array(u);const h=null!=(i=null==n?void 0:n.minReduction)?i:0,d=(null==n?void 0:n.originalIndices)||null,p=d?d.length:0,g=(null==n?void 0:n.componentOffsets)||null;let m=0;if(g)for(let t=0;t<g.length-1;t++){const e=g[t+1]-g[t];e>m&&(m=e)}else m=u;const M=Math.floor(1.1*m)+1;(null==a||a.length<2*M)&&(a=new Uint32Array((0,r.Sf)(2*M)));for(let t=0;t<2*M;t++)a[t]=0;let w=0;const y=!!g&&!!d,v=y?p:u,b=y?new Uint32Array(p):null,A=1.96;let F=0!==h?Math.ceil(4*A*A/(h*h)*h*(1-h)):v,I=1,N=g?g[1]:v;for(let t=0;t<v;t++){if(t===F){const e=1-w/t;if(e+A*Math.sqrt(e*(1-e)/t)<h)return null;F*=2}if(t===N){for(let t=0;t<2*M;t++)a[t]=0;if(d)for(let t=g[I-1];t<g[I];t++)b[t]=l[d[t]];N=g[++I]}const n=y?d[t]:t,r=n*e,i=c(f,r,e);let o=i%M,u=w;for(;0!==a[2*o+1];){if(a[2*o]===i){const t=a[2*o+1]-1;if(s(f,r,t*e,e)){u=l[t];break}}o++,o>=M&&(o-=M)}u===w&&(a[2*o]=i,a[2*o+1]=n+1,w++),l[n]=u}if(0!==h&&1-w/u<h)return null;if(y){for(let t=g[I-1];t<b.length;t++)b[t]=l[d[t]];l=b}const E=new Uint32Array(e*w);w=0;for(let t=0;t<v;t++)l[t]===w&&(o(f,(y?d[t]:t)*e,E,w*e,e),w++);if(d&&!y){const t=new Uint32Array(p);for(let e=0;e<t.length;e++)t[e]=l[d[e]];l=t}return{buffer:E.buffer,indices:l,uniqueCount:w}}function s(t,e,n,r){for(let i=0;i<r;i++)if(t[e+i]!==t[n+i])return!1;return!0}function o(t,e,n,r,i){for(let s=0;s<i;s++)n[r+s]=t[e+s]}function c(t,e,n){let r=0;for(let i=0;i<n;i++)r=t[e+i]+r|0,r=r+(r<<11)+(r>>>2)|0;return r>>>0}let a=null},72512:(t,e,n)=>{"use strict";n.d(e,{U$:()=>c});var r=n(50799),i=n(53285);class s{constructor(t,e){this.layout=t,this.buffer="number"==typeof e?new ArrayBuffer(e*t.stride):e;for(const e of t.fieldNames){const n=t.fields.get(e);this[e]=new n.constructor(this.buffer,n.offset,this.stride)}}get stride(){return this.layout.stride}get count(){return this.buffer.byteLength/this.stride}get byteLength(){return this.buffer.byteLength}getField(t,e){const n=this[t];return n&&n.elementCount===e.ElementCount&&n.elementType===e.ElementType?n:null}slice(t,e){return new s(this.layout,this.buffer.slice(t*this.stride,e*this.stride))}copyFrom(t,e,n,r){const i=this.stride;if(i%4==0){const s=new Uint32Array(t.buffer,e*i,r*i/4);new Uint32Array(this.buffer,n*i,r*i/4).set(s)}else{const s=new Uint8Array(t.buffer,e*i,r*i);new Uint8Array(this.buffer,n*i,r*i).set(s)}}}class o{constructor(){this.stride=0,this.fields=new Map,this.fieldNames=[]}vec2f(t,e){return this.appendField(t,r.Eu,e),this}vec2f64(t,e){return this.appendField(t,r.q6,e),this}vec3f(t,e){return this.appendField(t,r.ct,e),this}vec3f64(t,e){return this.appendField(t,r.fP,e),this}vec4f(t,e){return this.appendField(t,r.ek,e),this}vec4f64(t,e){return this.appendField(t,r.Cd,e),this}mat3f(t,e){return this.appendField(t,r.gK,e),this}mat3f64(t,e){return this.appendField(t,r.ey,e),this}mat4f(t,e){return this.appendField(t,r.bj,e),this}mat4f64(t,e){return this.appendField(t,r.O1,e),this}vec4u8(t,e){return this.appendField(t,r.mc,e),this}f32(t,e){return this.appendField(t,r.ly,e),this}f64(t,e){return this.appendField(t,r.oS,e),this}u8(t,e){return this.appendField(t,r.D_,e),this}u16(t,e){return this.appendField(t,r.av,e),this}i8(t,e){return this.appendField(t,r.Hz,e),this}vec2i8(t,e){return this.appendField(t,r.Vs,e),this}vec2i16(t,e){return this.appendField(t,r.or,e),this}vec2u8(t,e){return this.appendField(t,r.xA,e),this}vec4u16(t,e){return this.appendField(t,r.v6,e),this}u32(t,e){return this.appendField(t,r.Nu,e),this}appendField(t,e,n){const r=e.ElementCount*(0,i.n1)(e.ElementType),s=this.stride;this.fields.set(t,{size:r,constructor:e,offset:s,optional:n}),this.stride+=r,this.fieldNames.push(t)}alignTo(t){return this.stride=Math.floor((this.stride+t-1)/t)*t,this}hasField(t){return this.fieldNames.indexOf(t)>=0}createBuffer(t){return new s(this,t)}createView(t){return new s(this,t)}clone(){const t=new o;return t.stride=this.stride,t.fields=new Map,this.fields.forEach(((e,n)=>t.fields.set(n,e))),t.fieldNames=this.fieldNames.slice(),t.BufferType=this.BufferType,t}}function c(){return new o}},78562:(t,e,n)=>{"use strict";n.r(e),n.d(e,{work:()=>j,wrappedWork:()=>Z});var r=n(48924);function i(t,e,n){const r=e/3,i=new Uint32Array(n+1),s=new Uint32Array(n+1),o=(t,e)=>{t<e?i[t+1]++:s[e+1]++};for(let e=0;e<r;e++){const n=t[3*e],r=t[3*e+1],i=t[3*e+2];o(n,r),o(r,i),o(i,n)}let c=0,a=0;for(let t=0;t<n;t++){const e=i[t+1],n=s[t+1];i[t+1]=c,s[t+1]=a,c+=e,a+=n}const u=new Uint32Array(6*r),f=i[n],l=(t,e,n)=>{if(t<e){const r=i[t+1]++;u[2*r]=e,u[2*r+1]=n}else{const r=s[e+1]++;u[2*f+2*r]=t,u[2*f+2*r+1]=n}};for(let e=0;e<r;e++){const n=t[3*e],r=t[3*e+1],i=t[3*e+2];l(n,r,e),l(r,i,e),l(i,n,e)}const h=(t,e)=>{const n=2*t,r=e-t;for(let t=1;t<r;t++){const e=u[n+2*t],r=u[n+2*t+1];let i=t-1;for(;i>=0&&u[n+2*i]>e;i--)u[n+2*i+2]=u[n+2*i],u[n+2*i+3]=u[n+2*i+1];u[n+2*i+2]=e,u[n+2*i+3]=r}};for(let t=0;t<n;t++)h(i[t],i[t+1]),h(f+s[t],f+s[t+1]);const d=new Int32Array(3*r),p=(e,n)=>e===t[3*n]?0:e===t[3*n+1]?1:e===t[3*n+2]?2:-1,g=(t,e)=>{const n=p(t,e);d[3*e+n]=-1},m=(t,e,n,r)=>{const i=p(t,e);d[3*e+i]=r;const s=p(n,r);d[3*r+s]=e};for(let t=0;t<n;t++){let e=i[t];const n=i[t+1];let r=s[t];const o=s[t+1];for(;e<n&&r<o;){const n=u[2*e],i=u[2*f+2*r];n===i?(m(t,u[2*e+1],i,u[2*f+2*r+1]),e++,r++):n<i?(g(t,u[2*e+1]),e++):(g(i,u[2*f+2*r+1]),r++)}for(;e<n;)g(t,u[2*e+1]),e++;for(;r<o;)g(u[2*f+2*r],u[2*f+2*r+1]),r++}return d}var s=n(50799),o=n(72512);function c(t,e){return e.push(t.buffer),{buffer:t.buffer,layout:a(t.layout)}}function a(t){const e=new Array;return t.fields.forEach(((t,n)=>{const r={...t,constructor:f(t.constructor)};e.push([n,r])})),{stride:t.stride,fields:e,fieldNames:t.fieldNames}}const u=[s.ly,s.Eu,s.ct,s.ek,s.gK,s.bj,s.oS,s.q6,s.fP,s.Cd,s.ey,s.O1,s.D_,s.xA,s.ne,s.mc,s.av,s.TS,s.mw,s.v6,s.Nu,s.qt,s.G5,s.hu,s.Hz,s.Vs,s.P_,s.ir,s.o7,s.or,s.n1,s.zO,s.Jj,s.wA,s.PP,s.TN];function f(t){return`${t.ElementType}_${t.ElementCount}`}const l=new Map;function h(t,e=0){const n=t.stride;return t.fieldNames.filter((e=>{const n=t.fields.get(e).optional;return!(n&&n.glPadding)})).map((r=>{const i=t.fields.get(r),s=i.constructor.ElementCount,o=d(i.constructor.ElementType),c=i.offset,a=!(!i.optional||!i.optional.glNormalized);return{name:r,stride:n,count:s,type:o,offset:c,normalized:a,divisor:e}}))}function d(t){const e=p[t];if(e)return e;throw new Error("BufferType not supported in WebGL")}u.forEach((t=>l.set(f(t),t)));const p={u8:5121,u16:5123,u32:5125,i8:5120,i16:5122,i32:5124,f32:5126},g=(0,o.U$)().vec3f("position").u16("componentIndex").u16("u16padding"),m=(h((0,o.U$)().vec2u8("sideness")),(0,o.U$)().vec3f("position0").vec3f("position1").u16("componentIndex").u8("variantOffset",{glNormalized:!0}).u8("variantStroke").u8("variantExtension",{glNormalized:!0}).u8("u8padding",{glPadding:!0}).u16("u16padding",{glPadding:!0})),M=m.clone().vec3f("normal"),w=m.clone().vec3f("normalA").vec3f("normalB");new Map([["position0",0],["position1",1],["componentIndex",2],["variantOffset",3],["variantStroke",4],["variantExtension",5],["normal",6],["normalA",6],["normalB",7],["sideness",8]]);var y=n(73581),v=n(10188),b=n(88230);class A{updateSettings(t){this.settings=t,this.edgeHashFunction=t.reducedPrecision?_:E}write(t,e,n){const r=this.edgeHashFunction(n);L.seed=r;const i=L.getIntRange(0,255),s=L.getIntRange(0,this.settings.variants-1),o=L.getFloat(),c=255*(.5*function(t,e){const n=t<0?-1:1;return Math.abs(t)**1.2*n}(-(1-Math.min(o/.7,1))+Math.max(0,o-.7)/(1-.7))+.5);t.position0.setVec(e,n.position0),t.position1.setVec(e,n.position1),t.componentIndex.set(e,n.componentIndex),t.variantOffset.set(e,i),t.variantStroke.set(e,s),t.variantExtension.set(e,c)}trim(t,e){return t.slice(0,e)}}const F=new Float32Array(6),I=new Uint32Array(F.buffer),N=new Uint32Array(1);function E(t){const e=F;e[0]=t.position0[0],e[1]=t.position0[1],e[2]=t.position0[2],e[3]=t.position1[0],e[4]=t.position1[1],e[5]=t.position1[2],N[0]=5381;for(let t=0;t<I.length;t++)N[0]=31*N[0]+I[t];return N[0]}function _(t){const e=F;e[0]=x(t.position0[0]),e[1]=x(t.position0[1]),e[2]=x(t.position0[2]),e[3]=x(t.position1[0]),e[4]=x(t.position1[1]),e[5]=x(t.position1[2]),N[0]=5381;for(let t=0;t<I.length;t++)N[0]=31*N[0]+I[t];return N[0]}function x(t){return Math.round(1e4*t)/1e4}class S{constructor(){this.commonWriter=new A}updateSettings(t){this.commonWriter.updateSettings(t)}allocate(t){return M.createBuffer(t)}write(t,e,n){this.commonWriter.write(t,e,n),(0,v.b)(V,n.faceNormal0,n.faceNormal1),(0,v.n)(V,V),t.normal.setVec(e,V)}trim(t,e){return this.commonWriter.trim(t,e)}}S.Layout=M,S.glLayout=h(M,1);class U{constructor(){this.commonWriter=new A}updateSettings(t){this.commonWriter.updateSettings(t)}allocate(t){return w.createBuffer(t)}write(t,e,n){this.commonWriter.write(t,e,n),t.normalA.setVec(e,n.faceNormal0),t.normalB.setVec(e,n.faceNormal1)}trim(t,e){return this.commonWriter.trim(t,e)}}U.Layout=w,U.glLayout=h(w,1);const V=(0,b.c)(),L=new y.Z;var q=n(69288),O=n(68589),P=n(33246);const k=-1;function z(t,e){return t.cosAngle<e}function T(t,e){return t.cosAngle>e}function B(t,e){const n=(0,O.ZF)(t.cosAngle),r=R.fwd,i=R.ortho;return(0,v.r)(r,t.position1,t.position0),n*((0,v.d)((0,v.c)(i,t.faceNormal0,t.faceNormal1),r)>0?-1:1)>e}function D(t){const e=t.faces.length/3,n=t.vertices.position,r=t.faces,i=W.v0,s=W.v1,o=W.v2,c=new Float32Array(3*e);for(let t=0;t<e;t++){const e=r[3*t+0],a=r[3*t+1],u=r[3*t+2];n.getVec(e,i),n.getVec(a,s),n.getVec(u,o),(0,v.f)(s,s,i),(0,v.f)(o,o,i),(0,v.c)(i,s,o),(0,v.n)(i,i),c[3*t+0]=i[0],c[3*t+1]=i[1],c[3*t+2]=i[2]}return c}const R={edge:{position0:(0,b.c)(),position1:(0,b.c)(),faceNormal0:(0,b.c)(),faceNormal1:(0,b.c)(),componentIndex:0,cosAngle:0},ortho:(0,b.c)(),fwd:(0,b.c)()},W={v0:(0,b.c)(),v1:(0,b.c)(),v2:(0,b.c)()},C={anglePlanar:4,angleSignificantEdge:35};async function Z(t){const e=function(t){return{data:g.createView(t.dataBuffer),indices:"Uint32Array"===t.indicesType?new Uint32Array(t.indicesBuffer):"Uint16Array"===t.indicesType?new Uint16Array(t.indicesBuffer):void 0,indicesLength:t.indicesLength,writerSettings:t.writerSettings,skipDeduplicate:t.skipDeduplicate}}(t),n=j(e),r=[e.data.buffer];return{result:$(n,r),transferList:r}}function j(t){const e=H(t.data,t.skipDeduplicate,t.indices,t.indicesLength);return Y.updateSettings(t.writerSettings),K.updateSettings(t.writerSettings),function(t,e,n,r=C){const i=t.vertices.position,s=t.vertices.componentIndex,o=(0,O.Vl)(r.anglePlanar),c=(0,O.Vl)(r.angleSignificantEdge),a=Math.cos(c),u=Math.cos(o),f=R.edge,l=f.position0,h=f.position1,d=f.faceNormal0,p=f.faceNormal1,g=D(t),m=function(t){const e=t.faces.length/3,n=t.faces,r=t.neighbors;let i=0;for(let t=0;t<e;t++){const e=r[3*t+0],s=r[3*t+1],o=r[3*t+2],c=n[3*t+0],a=n[3*t+1],u=n[3*t+2];i+=e===k||c<a?1:0,i+=s===k||a<u?1:0,i+=o===k||u<c?1:0}const s=new Int32Array(4*i);let o=0;for(let t=0;t<e;t++){const e=r[3*t+0],i=r[3*t+1],c=r[3*t+2],a=n[3*t+0],u=n[3*t+1],f=n[3*t+2];(e===k||a<u)&&(s[o++]=a,s[o++]=u,s[o++]=t,s[o++]=e),(i===k||u<f)&&(s[o++]=u,s[o++]=f,s[o++]=t,s[o++]=i),(c===k||f<a)&&(s[o++]=f,s[o++]=a,s[o++]=t,s[o++]=c)}return s}(t),M=m.length/4,w=e.allocate(M);let y=0;const b=M,A=n.allocate(b);let F=0,I=0,N=0;const E=(0,q.w6)(0,M),_=new Float32Array(M);(0,P.Ed)(_,((t,e,n)=>{i.getVec(m[4*e+0],l),i.getVec(m[4*e+1],h),n[e]=(0,v.i)(l,h)})),E.sort(((t,e)=>_[e]-_[t]));const x=new Array,S=new Array;for(let t=0;t<M;t++){const r=E[t],c=_[r],M=m[4*r+0],b=m[4*r+1],U=m[4*r+2],V=m[4*r+3],L=V===k;if(i.getVec(M,l),i.getVec(b,h),L)(0,v.s)(d,g[3*U+0],g[3*U+1],g[3*U+2]),(0,v.g)(p,d),f.componentIndex=s.get(M),f.cosAngle=(0,v.d)(d,p);else{if((0,v.s)(d,g[3*U+0],g[3*U+1],g[3*U+2]),(0,v.s)(p,g[3*V+0],g[3*V+1],g[3*V+2]),f.componentIndex=s.get(M),f.cosAngle=(0,v.d)(d,p),T(f,u))continue;f.cosAngle<-.9999&&(0,v.g)(p,d)}I+=c,N++,L||z(f,a)?(e.write(w,y++,f),x.push(c)):B(f,o)&&(n.write(A,F++,f),S.push(c))}const U=new Float32Array(x.reverse()),V=new Float32Array(S.reverse());return{regular:{instancesData:e.trim(w,y),lodInfo:{lengths:U}},silhouette:{instancesData:n.trim(A,F),lodInfo:{lengths:V}},averageEdgeLength:I/N}}(e,Y,K)}function $(t,e){return e.push(t.regular.lodInfo.lengths.buffer),e.push(t.silhouette.lodInfo.lengths.buffer),{regular:{instancesData:c(t.regular.instancesData,e),lodInfo:{lengths:t.regular.lodInfo.lengths.buffer}},silhouette:{instancesData:c(t.silhouette.instancesData,e),lodInfo:{lengths:t.silhouette.lodInfo.lengths.buffer}},averageEdgeLength:t.averageEdgeLength}}function H(t,e,n,s){if(e)return{faces:n,facesLength:s,neighbors:i(n,s,t.count),vertices:t};const o=(0,r.d)(t.buffer,t.stride/4,{originalIndices:n,originalIndicesLength:s}),c=i(o.indices,s,o.uniqueCount);return{faces:o.indices,facesLength:o.indices.length,neighbors:c,vertices:g.createView(o.buffer)}}const Y=new S,K=new U}}]);