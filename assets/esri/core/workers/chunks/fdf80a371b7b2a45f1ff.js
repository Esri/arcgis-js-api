"use strict";(self.webpackChunkRemoteClient=self.webpackChunkRemoteClient||[]).push([[8936],{47545:(e,t,n)=>{n.d(t,{d:()=>i});var r=n(22021);function i(e,t,n){const i=e.byteLength/(4*t),l=new Uint32Array(e,0,i*t);let u=new Uint32Array(i);const f=n?.minReduction??0,d=n?.originalIndices||null,h=d?d.length:0,p=n?.componentOffsets||null;let g=0;if(p)for(let e=0;e<p.length-1;e++){const t=p[e+1]-p[e];t>g&&(g=t)}else g=i;const T=Math.floor(1.1*g)+1;(null==c||c.length<2*T)&&(c=new Uint32Array((0,r.Sf)(2*T)));for(let e=0;e<2*T;e++)c[e]=0;let A=0;const N=!!p&&!!d,E=N?h:i,I=N?new Uint32Array(h):null,O=1.96;let m=0!==f?Math.ceil(4*O*O/(f*f)*f*(1-f)):E,S=1,w=p?p[1]:E;for(let e=0;e<E;e++){if(e===m){const t=1-A/e;if(t+O*Math.sqrt(t*(1-t)/e)<f)return null;m*=2}if(e===w){for(let e=0;e<2*T;e++)c[e]=0;if(d)for(let e=p[S-1];e<p[S];e++)I[e]=u[d[e]];w=p[++S]}const n=N?d[e]:e,r=n*t,i=a(l,r,t);let o=i%T,h=A;for(;0!==c[2*o+1];){if(c[2*o]===i){const e=c[2*o+1]-1;if(s(l,r,e*t,t)){h=u[e];break}}o++,o>=T&&(o-=T)}h===A&&(c[2*o]=i,c[2*o+1]=n+1,A++),u[n]=h}if(0!==f&&1-A/i<f)return null;if(N){for(let e=p[S-1];e<I.length;e++)I[e]=u[d[e]];u=I}const L=new Uint32Array(t*A);A=0;for(let e=0;e<E;e++)u[e]===A&&(o(l,(N?d[e]:e)*t,L,A*t,t),A++);if(d&&!N){const e=new Uint32Array(h);for(let t=0;t<e.length;t++)e[t]=u[d[t]];u=e}return{buffer:L.buffer,indices:u,uniqueCount:A}}function s(e,t,n,r){for(let i=0;i<r;i++)if(e[t+i]!==e[n+i])return!1;return!0}function o(e,t,n,r,i){for(let s=0;s<i;s++)n[r+s]=e[t+s]}function a(e,t,n){let r=0;for(let i=0;i<n;i++)r=e[t+i]+r|0,r=r+(r<<11)+(r>>>2)|0;return r>>>0}let c=null},65576:(e,t,n)=>{n.d(t,{U$:()=>a});var r=n(56481),i=n(79583);class s{constructor(e,t){this.layout=e,this.buffer="number"==typeof t?new ArrayBuffer(t*e.stride):t;for(const t of e.fieldNames){const n=e.fields.get(t);this[t]=new n.constructor(this.buffer,n.offset,this.stride)}}get stride(){return this.layout.stride}get count(){return this.buffer.byteLength/this.stride}get byteLength(){return this.buffer.byteLength}getField(e,t){const n=this[e];return n&&n.elementCount===t.ElementCount&&n.elementType===t.ElementType?n:null}slice(e,t){return new s(this.layout,this.buffer.slice(e*this.stride,t*this.stride))}copyFrom(e,t,n,r){const i=this.stride;if(i%4==0){const s=new Uint32Array(e.buffer,t*i,r*i/4);new Uint32Array(this.buffer,n*i,r*i/4).set(s)}else{const s=new Uint8Array(e.buffer,t*i,r*i);new Uint8Array(this.buffer,n*i,r*i).set(s)}}}class o{constructor(){this.stride=0,this.fields=new Map,this.fieldNames=[]}vec2f(e,t){return this._appendField(e,r.Eu,t),this}vec2f64(e,t){return this._appendField(e,r.q6,t),this}vec3f(e,t){return this._appendField(e,r.ct,t),this}vec3f64(e,t){return this._appendField(e,r.fP,t),this}vec4f(e,t){return this._appendField(e,r.ek,t),this}vec4f64(e,t){return this._appendField(e,r.Cd,t),this}mat3f(e,t){return this._appendField(e,r.gK,t),this}mat3f64(e,t){return this._appendField(e,r.ey,t),this}mat4f(e,t){return this._appendField(e,r.bj,t),this}mat4f64(e,t){return this._appendField(e,r.O1,t),this}vec4u8(e,t){return this._appendField(e,r.mc,t),this}f32(e,t){return this._appendField(e,r.ly,t),this}f64(e,t){return this._appendField(e,r.oS,t),this}u8(e,t){return this._appendField(e,r.D_,t),this}u16(e,t){return this._appendField(e,r.av,t),this}i8(e,t){return this._appendField(e,r.Hz,t),this}vec2i8(e,t){return this._appendField(e,r.Vs,t),this}vec2i16(e,t){return this._appendField(e,r.or,t),this}vec2u8(e,t){return this._appendField(e,r.xA,t),this}vec4u16(e,t){return this._appendField(e,r.v6,t),this}u32(e,t){return this._appendField(e,r.Nu,t),this}_appendField(e,t,n){const r=t.ElementCount*(0,i.n1)(t.ElementType),s=this.stride;this.fields.set(e,{size:r,constructor:t,offset:s,optional:n}),this.stride+=r,this.fieldNames.push(e)}alignTo(e){return this.stride=Math.floor((this.stride+e-1)/e)*e,this}hasField(e){return this.fieldNames.includes(e)}createBuffer(e){return new s(this,e)}createView(e){return new s(this,e)}clone(){const e=new o;return e.stride=this.stride,e.fields=new Map,this.fields.forEach(((t,n)=>e.fields.set(n,t))),e.fieldNames=this.fieldNames.slice(),e.BufferType=this.BufferType,e}}function a(){return new o}},35065:(e,t,n)=>{var r;n.d(t,{T:()=>r}),function(e){e.POSITION="position",e.NORMAL="normal",e.UV0="uv0",e.AUXPOS1="auxpos1",e.AUXPOS2="auxpos2",e.MAPPOS="mapPos",e.COLOR="color",e.SYMBOLCOLOR="symbolColor",e.SIZE="size",e.TANGENT="tangent",e.OFFSET="offset",e.SUBDIVISIONFACTOR="subdivisionFactor",e.COLORFEATUREATTRIBUTE="colorFeatureAttribute",e.SIZEFEATUREATTRIBUTE="sizeFeatureAttribute",e.OPACITYFEATUREATTRIBUTE="opacityFeatureAttribute",e.DISTANCETOSTART="distanceToStart",e.UVMAPSPACE="uvMapSpace",e.BOUNDINGRECT="boundingRect",e.UVREGION="uvRegion",e.NORMALCOMPRESSED="normalCompressed",e.PROFILERIGHT="profileRight",e.PROFILEUP="profileUp",e.PROFILEVERTEXANDNORMAL="profileVertexAndNormal",e.FEATUREVALUE="featureValue",e.MODELORIGINHI="modelOriginHi",e.MODELORIGINLO="modelOriginLo",e.MODEL="model",e.MODELNORMAL="modelNormal",e.INSTANCECOLOR="instanceColor",e.INSTANCEFEATUREATTRIBUTE="instanceFeatureAttribute",e.LOCALTRANSFORM="localTransform",e.GLOBALTRANSFORM="globalTransform",e.BOUNDINGSPHERE="boundingSphere",e.MODELORIGIN="modelOrigin",e.MODELSCALEFACTORS="modelScaleFactors",e.FEATUREATTRIBUTE="featureAttribute",e.STATE="state",e.LODLEVEL="lodLevel",e.POSITION0="position0",e.POSITION1="position1",e.NORMALA="normalA",e.NORMALB="normalB",e.COMPONENTINDEX="componentIndex",e.VARIANTOFFSET="variantOffset",e.VARIANTSTROKE="variantStroke",e.VARIANTEXTENSION="variantExtension",e.U8PADDING="u8padding",e.U16PADDING="u16padding",e.SIDENESS="sideness",e.START="start",e.END="end",e.UP="up",e.EXTRUDE="extrude"}(r||(r={}))},18936:(e,t,n)=>{n.r(t),n.d(t,{EdgeProcessingWorker:()=>Z,default:()=>ce,extract:()=>j,extractComponentsEdgeLocationsLayout:()=>ae,extractEdgeLocationsLayout:()=>oe});var r=n(47545);function i(e,t,n){const r=t/3,i=new Uint32Array(n+1),s=new Uint32Array(n+1),o=(e,t)=>{e<t?i[e+1]++:s[t+1]++};for(let t=0;t<r;t++){const n=e[3*t],r=e[3*t+1],i=e[3*t+2];o(n,r),o(r,i),o(i,n)}let a=0,c=0;for(let e=0;e<n;e++){const t=i[e+1],n=s[e+1];i[e+1]=a,s[e+1]=c,a+=t,c+=n}const l=new Uint32Array(6*r),u=i[n],f=(e,t,n)=>{if(e<t){const r=i[e+1]++;l[2*r]=t,l[2*r+1]=n}else{const r=s[t+1]++;l[2*u+2*r]=e,l[2*u+2*r+1]=n}};for(let t=0;t<r;t++){const n=e[3*t],r=e[3*t+1],i=e[3*t+2];f(n,r,t),f(r,i,t),f(i,n,t)}const d=(e,t)=>{const n=2*e,r=t-e;for(let e=1;e<r;e++){const t=l[n+2*e],r=l[n+2*e+1];let i=e-1;for(;i>=0&&l[n+2*i]>t;i--)l[n+2*i+2]=l[n+2*i],l[n+2*i+3]=l[n+2*i+1];l[n+2*i+2]=t,l[n+2*i+3]=r}};for(let e=0;e<n;e++)d(i[e],i[e+1]),d(u+s[e],u+s[e+1]);const h=new Int32Array(3*r),p=(t,n)=>t===e[3*n]?0:t===e[3*n+1]?1:t===e[3*n+2]?2:-1,g=(e,t)=>{const n=p(e,t);h[3*t+n]=-1},T=(e,t,n,r)=>{const i=p(e,t);h[3*t+i]=r;const s=p(n,r);h[3*r+s]=t};for(let e=0;e<n;e++){let t=i[e];const n=i[e+1];let r=s[e];const o=s[e+1];for(;t<n&&r<o;){const n=l[2*t],i=l[2*u+2*r];n===i?(T(e,l[2*t+1],i,l[2*u+2*r+1]),t++,r++):n<i?(g(e,l[2*t+1]),t++):(g(i,l[2*u+2*r+1]),r++)}for(;t<n;)g(e,l[2*t+1]),t++;for(;r<o;)g(l[2*u+2*r],l[2*u+2*r+1]),r++}return h}var s=n(65576),o=n(56481);function a(e,t){return t.push(e.buffer),{buffer:e.buffer,layout:c(e.layout)}}function c(e){const t=new Array;return e.fields.forEach(((e,n)=>{const r={...e,constructor:u(e.constructor)};t.push([n,r])})),{stride:e.stride,fields:t,fieldNames:e.fieldNames}}const l=[o.ly,o.Eu,o.ct,o.ek,o.gK,o.bj,o.oS,o.q6,o.fP,o.Cd,o.ey,o.O1,o.D_,o.xA,o.ne,o.mc,o.av,o.TS,o.mw,o.v6,o.Nu,o.qt,o.G5,o.hu,o.Hz,o.Vs,o.P_,o.ir,o.o7,o.or,o.n1,o.zO,o.Jj,o.wA,o.PP,o.TN];function u(e){return`${e.ElementType}_${e.ElementCount}`}const f=new Map;l.forEach((e=>f.set(u(e),e)));var d=n(35065),h=n(35371),p=n(21968);function g(e,t=0){const n=e.stride;return e.fieldNames.filter((t=>{const n=e.fields.get(t).optional;return!(n&&n.glPadding)})).map((r=>{const i=e.fields.get(r),s=i.constructor.ElementCount,o=T(i.constructor.ElementType),a=i.offset,c=!(!i.optional||!i.optional.glNormalized);return new p.G(r,s,o,a,n,c,t)}))}function T(e){const t=A[e];if(t)return t;throw new Error("BufferType not supported in WebGL")}const A={u8:h.g.UNSIGNED_BYTE,u16:h.g.UNSIGNED_SHORT,u32:h.g.UNSIGNED_INT,i8:h.g.BYTE,i16:h.g.SHORT,i32:h.g.INT,f32:h.g.FLOAT},N=(0,s.U$)().vec3f(d.T.POSITION).u16(d.T.COMPONENTINDEX).u16(d.T.U16PADDING),E=(g((0,s.U$)().vec2u8(d.T.SIDENESS)),(0,s.U$)().vec3f(d.T.POSITION0).vec3f(d.T.POSITION1).u16(d.T.COMPONENTINDEX).u8(d.T.VARIANTOFFSET,{glNormalized:!0}).u8(d.T.VARIANTSTROKE).u8(d.T.VARIANTEXTENSION,{glNormalized:!0}).u8(d.T.U8PADDING,{glPadding:!0}).u16(d.T.U16PADDING,{glPadding:!0})),I=E.clone().vec3f(d.T.NORMAL),O=E.clone().vec3f(d.T.NORMALA).vec3f(d.T.NORMALB);new Map([[d.T.POSITION0,0],[d.T.POSITION1,1],[d.T.COMPONENTINDEX,2],[d.T.VARIANTOFFSET,3],[d.T.VARIANTSTROKE,4],[d.T.VARIANTEXTENSION,5],[d.T.NORMAL,6],[d.T.NORMALA,6],[d.T.NORMALB,7],[d.T.SIDENESS,8]]);var m=n(77734),S=n(17896),w=n(65617);class L{updateSettings(e){this.settings=e,this.edgeHashFunction=e.reducedPrecision?U:F}write(e,t,n){const r=this.edgeHashFunction(n);V.seed=r;const i=V.getIntRange(0,255),s=V.getIntRange(0,this.settings.variants-1),o=V.getFloat(),a=255*(.5*function(e,t){const n=e<0?-1:1;return Math.abs(e)**1.2*n}(-(1-Math.min(o/.7,1))+Math.max(0,o-.7)/(1-.7))+.5);e.position0.setVec(t,n.position0),e.position1.setVec(t,n.position1),e.componentIndex.set(t,n.componentIndex),e.variantOffset.set(t,i),e.variantStroke.set(t,s),e.variantExtension.set(t,a)}trim(e,t){return e.slice(0,t)}}const R=new Float32Array(6),y=new Uint32Array(R.buffer),v=new Uint32Array(1);function F(e){const t=R;t[0]=e.position0[0],t[1]=e.position0[1],t[2]=e.position0[2],t[3]=e.position1[0],t[4]=e.position1[1],t[5]=e.position1[2],v[0]=5381;for(let e=0;e<y.length;e++)v[0]=31*v[0]+y[e];return v[0]}function U(e){const t=R;t[0]=D(e.position0[0]),t[1]=D(e.position0[1]),t[2]=D(e.position0[2]),t[3]=D(e.position1[0]),t[4]=D(e.position1[1]),t[5]=D(e.position1[2]),v[0]=5381;for(let e=0;e<y.length;e++)v[0]=31*v[0]+y[e];return v[0]}function D(e){return Math.round(1e4*e)/1e4}class P{constructor(){this.commonWriter=new L}updateSettings(e){this.commonWriter.updateSettings(e)}allocate(e){return I.createBuffer(e)}write(e,t,n){this.commonWriter.write(e,t,n),(0,S.a)(M,n.faceNormal0,n.faceNormal1),(0,S.n)(M,M),e.normal.setVec(t,M)}trim(e,t){return this.commonWriter.trim(e,t)}}P.Layout=I,P.glLayout=g(I,1);class b{constructor(){this.commonWriter=new L}updateSettings(e){this.commonWriter.updateSettings(e)}allocate(e){return O.createBuffer(e)}write(e,t,n){this.commonWriter.write(e,t,n),e.normalA.setVec(t,n.faceNormal0),e.normalB.setVec(t,n.faceNormal1)}trim(e,t){return this.commonWriter.trim(e,t)}}b.Layout=O,b.glLayout=g(O,1);const M=(0,w.c)(),V=new m.Z;var C=n(67676),B=n(22021),_=n(1533);const x=-1;var G,k;function H(e,t,n,r=Y){const i=e.vertices.position,s=e.vertices.componentIndex,o=(0,B.Vl)(r.anglePlanar),a=(0,B.Vl)(r.angleSignificantEdge),c=Math.cos(a),l=Math.cos(o),u=K.edge,f=u.position0,d=u.position1,h=u.faceNormal0,p=u.faceNormal1,g=$(e),T=function(e){const t=e.faces.length/3,n=e.faces,r=e.neighbors;let i=0;for(let e=0;e<t;e++){const t=r[3*e+0],s=r[3*e+1],o=r[3*e+2],a=n[3*e+0],c=n[3*e+1],l=n[3*e+2];i+=t===x||a<c?1:0,i+=s===x||c<l?1:0,i+=o===x||l<a?1:0}const s=new Int32Array(4*i);let o=0;for(let e=0;e<t;e++){const t=r[3*e+0],i=r[3*e+1],a=r[3*e+2],c=n[3*e+0],l=n[3*e+1],u=n[3*e+2];(t===x||c<l)&&(s[o++]=c,s[o++]=l,s[o++]=e,s[o++]=t),(i===x||l<u)&&(s[o++]=l,s[o++]=u,s[o++]=e,s[o++]=i),(a===x||u<c)&&(s[o++]=u,s[o++]=c,s[o++]=e,s[o++]=a)}return s}(e),A=T.length/4,N=t.allocate(A);let E=0;const I=A,O=n.allocate(I);let m=0,w=0,L=0;const R=(0,C.w6)(0,A),y=new Float32Array(A);(0,_.Ed)(y,((e,t,n)=>{i.getVec(T[4*t+0],f),i.getVec(T[4*t+1],d),n[t]=(0,S.i)(f,d)})),R.sort(((e,t)=>y[t]-y[e]));const v=new Array,F=new Array;for(let e=0;e<A;e++){const r=R[e],a=y[r],A=T[4*r+0],I=T[4*r+1],U=T[4*r+2],D=T[4*r+3],P=D===x;if(i.getVec(A,f),i.getVec(I,d),P)(0,S.s)(h,g[3*U+0],g[3*U+1],g[3*U+2]),(0,S.c)(p,h),u.componentIndex=s.get(A),u.cosAngle=(0,S.e)(h,p);else{if((0,S.s)(h,g[3*U+0],g[3*U+1],g[3*U+2]),(0,S.s)(p,g[3*D+0],g[3*D+1],g[3*D+2]),u.componentIndex=s.get(A),u.cosAngle=(0,S.e)(h,p),z(u,l))continue;u.cosAngle<-.9999&&(0,S.c)(p,h)}w+=a,L++,P||X(u,c)?(t.write(N,E++,u),v.push(a)):W(u,o)&&(n.write(O,m++,u),F.push(a))}const U=new Float32Array(v.reverse()),D=new Float32Array(F.reverse());return{regular:{instancesData:t.trim(N,E),lodInfo:{lengths:U}},silhouette:{instancesData:n.trim(O,m),lodInfo:{lengths:D}},averageEdgeLength:w/L}}function X(e,t){return e.cosAngle<t}function z(e,t){return e.cosAngle>t}function W(e,t){const n=(0,B.ZF)(e.cosAngle),r=K.fwd,i=K.ortho;return(0,S.r)(r,e.position1,e.position0),n*((0,S.e)((0,S.f)(i,e.faceNormal0,e.faceNormal1),r)>0?-1:1)>t}function $(e){const t=e.faces.length/3,n=e.vertices.position,r=e.faces,i=q.v0,s=q.v1,o=q.v2,a=new Float32Array(3*t);for(let e=0;e<t;e++){const t=r[3*e+0],c=r[3*e+1],l=r[3*e+2];n.getVec(t,i),n.getVec(c,s),n.getVec(l,o),(0,S.b)(s,s,i),(0,S.b)(o,o,i),(0,S.f)(i,s,o),(0,S.n)(i,i),a[3*e+0]=i[0],a[3*e+1]=i[1],a[3*e+2]=i[2]}return a}(k=G||(G={}))[k.SOLID=0]="SOLID",k[k.SKETCH=1]="SKETCH";const K={edge:{position0:(0,w.c)(),position1:(0,w.c)(),faceNormal0:(0,w.c)(),faceNormal1:(0,w.c)(),componentIndex:0,cosAngle:0},ortho:(0,w.c)(),fwd:(0,w.c)()},q={v0:(0,w.c)(),v1:(0,w.c)(),v2:(0,w.c)()},Y={anglePlanar:4,angleSignificantEdge:35};class Z{async extract(e){const t=J(e),n=j(t),r=[t.data.buffer];return{result:Q(n,r),transferList:r}}async extractComponentsEdgeLocations(e){const t=J(e),n=[];return{result:a(H(ee(t.data,t.skipDeduplicate,t.indices,t.indicesLength),ie,se).regular.instancesData,n),transferList:n}}async extractEdgeLocations(e){const t=J(e),n=[];return{result:a(H(ee(t.data,t.skipDeduplicate,t.indices,t.indicesLength),re,se).regular.instancesData,n),transferList:n}}}function j(e){const t=ee(e.data,e.skipDeduplicate,e.indices,e.indicesLength);return te.updateSettings(e.writerSettings),ne.updateSettings(e.writerSettings),H(t,te,ne)}function J(e){return{data:N.createView(e.dataBuffer),indices:"Uint32Array"===e.indicesType?new Uint32Array(e.indicesBuffer):"Uint16Array"===e.indicesType?new Uint16Array(e.indicesBuffer):void 0,indicesLength:e.indicesLength,writerSettings:e.writerSettings,skipDeduplicate:e.skipDeduplicate}}function Q(e,t){return t.push(e.regular.lodInfo.lengths.buffer),t.push(e.silhouette.lodInfo.lengths.buffer),{regular:{instancesData:a(e.regular.instancesData,t),lodInfo:{lengths:e.regular.lodInfo.lengths.buffer}},silhouette:{instancesData:a(e.silhouette.instancesData,t),lodInfo:{lengths:e.silhouette.lodInfo.lengths.buffer}},averageEdgeLength:e.averageEdgeLength}}function ee(e,t,n,s){if(t)return{faces:n,facesLength:s,neighbors:i(n,s,e.count),vertices:e};const o=(0,r.d)(e.buffer,e.stride/4,{originalIndices:n,originalIndicesLength:s}),a=i(o.indices,s,o.uniqueCount);return{faces:o.indices,facesLength:o.indices.length,neighbors:a,vertices:N.createView(o.buffer)}}const te=new P,ne=new b,re=new class{allocate(e){return oe.createBuffer(e)}trim(e,t){return e.slice(0,t)}write(e,t,n){e.position0.setVec(t,n.position0),e.position1.setVec(t,n.position1)}},ie=new class{allocate(e){return ae.createBuffer(e)}trim(e,t){return e.slice(0,t)}write(e,t,n){e.position0.setVec(t,n.position0),e.position1.setVec(t,n.position1),e.componentIndex.set(t,n.componentIndex)}},se={allocate:()=>null,write:()=>{},trim:()=>null},oe=(0,s.U$)().vec3f(d.T.POSITION0).vec3f(d.T.POSITION1),ae=(0,s.U$)().vec3f(d.T.POSITION0).vec3f(d.T.POSITION1).u16(d.T.COMPONENTINDEX).u16(d.T.U16PADDING,{glPadding:!0});function ce(){return new Z}},21968:(e,t,n)=>{n.d(t,{G:()=>r});class r{constructor(e,t,n,r,i,s=!1,o=0){this.name=e,this.count=t,this.type=n,this.offset=r,this.stride=i,this.normalized=s,this.divisor=o}}}}]);