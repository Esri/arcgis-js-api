"use strict";(self.webpackChunkRemoteClient=self.webpackChunkRemoteClient||[]).push([[4477],{42033:(e,t,i)=>{i.d(t,{E:()=>l,_:()=>s});var r=i(70586);async function l(e,t){const{WhereClause:r}=await Promise.resolve().then(i.bind(i,41534));return r.create(e,t)}function s(e,t){return(0,r.pC)(e)?(0,r.pC)(t)?`(${e}) AND (${t})`:e:t}},54295:(e,t,i)=>{i.d(t,{V:()=>n});var r=i(43697),l=i(5600),s=(i(67676),i(80442),i(75215),i(52011));const n=e=>{let t=class extends e{get apiKey(){return this._isOverridden("apiKey")?this._get("apiKey"):"portalItem"in this?this.portalItem?.apiKey:null}set apiKey(e){null!=e?this._override("apiKey",e):(this._clearOverride("apiKey"),this.clear("apiKey","user"))}};return(0,r._)([(0,l.Cb)({type:String})],t.prototype,"apiKey",null),t=(0,r._)([(0,s.j)("esri.layers.mixins.APIKeyMixin")],t),t}},17287:(e,t,i)=>{i.d(t,{Y:()=>d});var r=i(43697),l=i(92604),s=i(70586),n=i(5600),a=(i(67676),i(80442),i(75215),i(52011)),o=i(66677);const d=e=>{let t=class extends e{get title(){if(this._get("title")&&"defaults"!==this.originOf("title"))return this._get("title");if(this.url){const e=(0,o.Qc)(this.url);if((0,s.pC)(e)&&e.title)return e.title}return this._get("title")||""}set title(e){this._set("title",e)}set url(e){this._set("url",(0,o.Nm)(e,l.Z.getLogger(this.declaredClass)))}};return(0,r._)([(0,n.Cb)()],t.prototype,"title",null),(0,r._)([(0,n.Cb)({type:String})],t.prototype,"url",null),t=(0,r._)([(0,a.j)("esri.layers.mixins.ArcGISService")],t),t}},16859:(e,t,i)=>{i.d(t,{I:()=>I});var r=i(43697),l=i(40330),s=i(3172),n=i(66643),a=i(20102),o=i(92604),d=i(70586),u=i(95330),p=i(17452),h=i(5600),c=(i(67676),i(80442),i(75215),i(71715)),m=i(52011),y=i(30556),f=i(65587),v=i(15235),g=i(86082);const w=o.Z.getLogger("esri.layers.mixins.PortalLayer"),I=e=>{let t=class extends e{constructor(){super(...arguments),this.resourceReferences={portalItem:null,paths:[]},this.userHasEditingPrivileges=!0}destroy(){this.portalItem?.destroy(),this.portalItem=null}set portalItem(e){e!==this._get("portalItem")&&(this.removeOrigin("portal-item"),this._set("portalItem",e))}readPortalItem(e,t,i){if(t.itemId)return new v.default({id:t.itemId,portal:i&&i.portal})}writePortalItem(e,t){e&&e.id&&(t.itemId=e.id)}async loadFromPortal(e,t){if(this.portalItem&&this.portalItem.id)try{const r=await i.e(8062).then(i.bind(i,18062));return(0,u.k_)(t),await r.load({instance:this,supportedTypes:e.supportedTypes,validateItem:e.validateItem,supportsData:e.supportsData},t)}catch(e){throw(0,u.D_)(e)||w.warn(`Failed to load layer (${this.title}, ${this.id}) portal item (${this.portalItem.id})\n  ${e}`),e}}async finishLoadEditablePortalLayer(e){this._set("userHasEditingPrivileges",await this._fetchUserHasEditingPrivileges(e).catch((e=>((0,u.r9)(e),!0))))}async _fetchUserHasEditingPrivileges(e){const t=this.url?l.id?.findCredential(this.url):null;if(!t)return!0;const i=_.credential===t?_.user:await this._fetchEditingUser(e);return _.credential=t,_.user=i,(0,d.Wi)(i)||null==i.privileges||i.privileges.includes("features:user:edit")}async _fetchEditingUser(e){const t=this.portalItem?.portal?.user;if(t)return t;const i=l.id.findServerInfo(this.url);if(!i?.owningSystemUrl)return null;const r=`${i.owningSystemUrl}/sharing/rest`,a=f.Z.getDefault();if(a&&a.loaded&&(0,p.Fv)(a.restUrl)===(0,p.Fv)(r))return a.user;const o=`${r}/community/self`,u=(0,d.pC)(e)?e.signal:null,h=await(0,n.q6)((0,s.default)(o,{authMode:"no-prompt",query:{f:"json"},signal:u}));return h.ok?g.default.fromJSON(h.value.data):null}read(e,t){t&&(t.layer=this),super.read(e,t)}write(e,t){const i=t&&t.portal,r=this.portalItem&&this.portalItem.id&&(this.portalItem.portal||f.Z.getDefault());return i&&r&&!(0,p.tm)(r.restUrl,i.restUrl)?(t.messages&&t.messages.push(new a.Z("layer:cross-portal",`The layer '${this.title} (${this.id})' cannot be persisted because it refers to an item on a different portal than the one being saved to. To save, set layer.portalItem to null or save to the same portal as the item associated with the layer`,{layer:this})),null):super.write(e,{...t,layer:this})}};return(0,r._)([(0,h.Cb)({type:v.default})],t.prototype,"portalItem",null),(0,r._)([(0,c.r)("web-document","portalItem",["itemId"])],t.prototype,"readPortalItem",null),(0,r._)([(0,y.c)("web-document","portalItem",{itemId:{type:String}})],t.prototype,"writePortalItem",null),(0,r._)([(0,h.Cb)({clonable:!1})],t.prototype,"resourceReferences",void 0),(0,r._)([(0,h.Cb)({readOnly:!0})],t.prototype,"userHasEditingPrivileges",void 0),t=(0,r._)([(0,m.j)("esri.layers.mixins.PortalLayer")],t),t},_={credential:null,user:null}},56765:(e,t,i)=>{i.d(t,{Z:()=>u});var r,l=i(43697),s=i(46791),n=i(96674),a=i(5600),o=(i(67676),i(80442),i(75215),i(52011));let d=r=class extends n.wq{constructor(e){super(e),this.floorField=null,this.viewAllMode=!1,this.viewAllLevelIds=new s.Z}clone(){return new r({floorField:this.floorField,viewAllMode:this.viewAllMode,viewAllLevelIds:this.viewAllLevelIds})}};(0,l._)([(0,a.Cb)({type:String,json:{write:!0}})],d.prototype,"floorField",void 0),(0,l._)([(0,a.Cb)({json:{read:!1,write:!1}})],d.prototype,"viewAllMode",void 0),(0,l._)([(0,a.Cb)({json:{read:!1,write:!1}})],d.prototype,"viewAllLevelIds",void 0),d=r=(0,l._)([(0,o.j)("esri.layers.support.LayerFloorInfo")],d);const u=d},51706:(e,t,i)=>{var r,l;function s(e){return e&&"esri.renderers.visualVariables.SizeVariable"===e.declaredClass}function n(e){return null!=e&&!isNaN(e)&&isFinite(e)}function a(e){return e.valueExpression?r.Expression:e.field&&"string"==typeof e.field?r.Field:r.Unknown}function o(e,t){const i=t||a(e),s=e.valueUnit||"unknown";return i===r.Unknown?l.Constant:e.stops?l.Stops:null!=e.minSize&&null!=e.maxSize&&null!=e.minDataValue&&null!=e.maxDataValue?l.ClampedLinear:"unknown"===s?null!=e.minSize&&null!=e.minDataValue?e.minSize&&e.minDataValue?l.Proportional:l.Additive:l.Identity:l.RealWorldSize}i.d(t,{PS:()=>a,QW:()=>o,RY:()=>r,hL:()=>l,iY:()=>s,qh:()=>n}),function(e){e.Unknown="unknown",e.Expression="expression",e.Field="field"}(r||(r={})),function(e){e.Unknown="unknown",e.Stops="stops",e.ClampedLinear="clamped-linear",e.Proportional="proportional",e.Additive="additive",e.Constant="constant",e.Identity="identity",e.RealWorldSize="real-world-size"}(l||(l={}))}}]);