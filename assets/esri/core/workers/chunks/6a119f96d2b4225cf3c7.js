self.webpackChunkRemoteClient([148],{207:function(e,a,n){"use strict";n.r(a),n.d(a,"fromUrl",(function(){return u}));var l=n(1),t=n(14),r=n(55),s=n(148),i=n(284);async function u(e){const a=await async function(e){const a=Object(s.e)(e);if(Object(l.f)(a))throw new t.a("arcgis-layers:url-mismatch","The url '${url}' is not a valid arcgis resource",{url:e});const{serverType:n,sublayer:r}=a;let u;const y={FeatureServer:"FeatureLayer",StreamServer:"StreamLayer",VectorTileServer:"VectorTileLayer"};switch(n){case"MapServer":u=null!=r?"FeatureLayer":async function(e){return(await c(e)).tileInfo}(e).then(e=>e?"TileLayer":"MapImageLayer");break;case"ImageServer":u=c(e).then(e=>{const a=e.tileInfo&&e.tileInfo.format;return e.tileInfo?!a||"LERC"!==a.toUpperCase()||e.cacheType&&"elevation"!==e.cacheType.toLowerCase()?"ImageryTileLayer":"ElevationLayer":"ImageryLayer"});break;case"SceneServer":u=c(a.url.path).then(e=>{const a={Point:"SceneLayer","3DObject":"SceneLayer",IntegratedMesh:"IntegratedMeshLayer",PointCloud:"PointCloudLayer",Building:"BuildingSceneLayer"};if(e&&Array.isArray(e.layers)&&e.layers.length>0){const n=e.layers[0].layerType;if(null!=a[n])return a[n]}return"SceneLayer"});break;default:u=y[n]}const d="FeatureServer"===n,f={parsedUrl:a,Constructor:null,layerOrTableId:d?r:null,sublayerIds:null,tableIds:null},b=await u;if({FeatureLayer:!0,SceneLayer:!0}[b]&&null==r){const a=await async function(e,a){var n,l;let t,r=!1;if("FeatureServer"===a){const a=await async function(e){var a,n;let l=await c(e);l=l||{},l.layers=(null==(a=l.layers)?void 0:a.filter(o))||[];const t={serviceJSON:l};if(l.currentVersion<10.5)return t;const r=await c(e+"/layers");return t.layersJSON={layers:(null==r||null==(n=r.layers)?void 0:n.filter(o))||[],tables:(null==r?void 0:r.tables)||[]},t}(e);r=!!a.layersJSON,t=a.layersJSON||a.serviceJSON}else t=await c(e);const s=null==(n=t)?void 0:n.layers,i=null==(l=t)?void 0:l.tables;return{layerIds:(null==s?void 0:s.map(e=>e.id).reverse())||[],tableIds:(null==i?void 0:i.map(e=>e.id).reverse())||[],layerInfos:r?s:[],tableInfos:r?i:[]}}(e,n);if(d&&(f.sublayerInfos=a.layerInfos,f.tableInfos=a.tableInfos),1!==a.layerIds.length+a.tableIds.length)f.sublayerIds=a.layerIds,f.tableIds=a.tableIds;else if(d){var L,h;f.layerOrTableId=null!=(L=a.layerIds[0])?L:a.tableIds[0],f.sourceJSON=null!=(h=a.layerInfos[0])?h:a.tableInfos[0]}}return f.Constructor=await async function(e){return(0,i.a[e])()}(b),f}(e.url),r={...e.properties,url:e.url};if(!a.sublayerIds)return null!=a.layerOrTableId&&(r.layerId=a.layerOrTableId,r.sourceJSON=a.sourceJSON),new a.Constructor(r);const u=new(0,(await n.e(54).then(n.bind(null,330))).default)({title:a.parsedUrl.title});return function(e,a,n){function t(e,t){const r={...n,layerId:e,sublayerTitleMode:"service-name"};return Object(l.g)(t)&&(r.sourceJSON=t),new a.Constructor(r)}a.sublayerIds.forEach(n=>{const l=t(n,y(a.sublayerInfos,n));e.add(l)}),a.tableIds.forEach(n=>{const l=t(n,y(a.tableInfos,n));e.tables.add(l)})}(u,a,r),u}function y(e,a){return e?e.find(e=>e.id===a):null}function o(e){return!e.type||"Feature Layer"===e.type}async function c(e){return(await Object(r.default)(e,{responseType:"json",query:{f:"json"}})).data}},284:function(e,a,n){"use strict";n.d(a,"a",(function(){return l}));const l={BingMapsLayer:async()=>(await n.e(52).then(n.bind(null,433))).default,BuildingSceneLayer:async()=>(await Promise.all([n.e(1),n.e(2),n.e(3),n.e(4),n.e(42)]).then(n.bind(null,419))).default,CSVLayer:async()=>(await Promise.all([n.e(1),n.e(2),n.e(3),n.e(4),n.e(58)]).then(n.bind(null,434))).default,ElevationLayer:async()=>(await n.e(15).then(n.bind(null,429))).default,FeatureLayer:async()=>(await Promise.all([n.e(1),n.e(2),n.e(3),n.e(4),n.e(62)]).then(n.bind(null,153))).default,GroupLayer:async()=>(await n.e(46).then(n.bind(null,330))).default,GeoRSSLayer:async()=>(await n.e(56).then(n.bind(null,403))).default,ImageryLayer:async()=>(await Promise.all([n.e(1),n.e(2),n.e(10),n.e(16),n.e(51)]).then(n.bind(null,420))).default,ImageryTileLayer:async()=>(await Promise.all([n.e(1),n.e(2),n.e(10),n.e(16),n.e(67)]).then(n.bind(null,418))).default,IntegratedMeshLayer:async()=>(await n.e(43).then(n.bind(null,427))).default,KMLLayer:async()=>(await Promise.all([n.e(1),n.e(2),n.e(49)]).then(n.bind(null,431))).default,MapImageLayer:async()=>(await Promise.all([n.e(13),n.e(1),n.e(2),n.e(3),n.e(33)]).then(n.bind(null,369))).default,MapNotesLayer:async()=>(await Promise.all([n.e(1),n.e(2),n.e(3),n.e(4),n.e(57)]).then(n.bind(null,407))).default,OpenStreetMapLayer:async()=>(await Promise.all([n.e(11),n.e(199)]).then(n.bind(null,408))).default,PointCloudLayer:async()=>(await n.e(37).then(n.bind(null,422))).default,RouteLayer:async()=>(await Promise.all([n.e(1),n.e(2),n.e(3),n.e(4),n.e(59)]).then(n.bind(null,409))).default,SceneLayer:async()=>(await Promise.all([n.e(1),n.e(2),n.e(3),n.e(4),n.e(47)]).then(n.bind(null,435))).default,StreamLayer:async()=>(await Promise.all([n.e(1),n.e(2),n.e(3),n.e(44)]).then(n.bind(null,436))).default,TileLayer:async()=>(await Promise.all([n.e(1),n.e(2),n.e(3),n.e(38)]).then(n.bind(null,410))).default,UnknownLayer:async()=>(await n.e(75).then(n.bind(null,411))).default,UnsupportedLayer:async()=>(await n.e(76).then(n.bind(null,412))).default,VectorTileLayer:async()=>(await Promise.all([n.e(21),n.e(39)]).then(n.bind(null,421))).default,WebTileLayer:async()=>(await n.e(11).then(n.bind(null,331))).default,WMSLayer:async()=>(await n.e(40).then(n.bind(null,428))).default,WMTSLayer:async()=>(await Promise.all([n.e(11),n.e(200)]).then(n.bind(null,424))).default}}});