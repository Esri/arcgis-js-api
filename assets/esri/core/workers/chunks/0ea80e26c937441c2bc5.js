"use strict";(self.webpackChunkRemoteClient=self.webpackChunkRemoteClient||[]).push([[6904,5732],{92835:(t,e,r)=>{r.d(e,{Z:()=>y});var s,i=r(43697),n=r(96674),o=r(70586),l=r(35463),a=r(5600),u=(r(67676),r(75215),r(71715)),h=r(52011),c=r(30556);let p=s=class extends n.wq{constructor(t){super(t),this.end=null,this.start=null}static get allTime(){return d}static get empty(){return f}readEnd(t,e){return null!=e.end?new Date(e.end):null}writeEnd(t,e){e.end=t?t.getTime():null}get isAllTime(){return this.equals(s.allTime)}get isEmpty(){return this.equals(s.empty)}readStart(t,e){return null!=e.start?new Date(e.start):null}writeStart(t,e){e.start=t?t.getTime():null}clone(){return new s({end:this.end,start:this.start})}equals(t){if(!t)return!1;const e=(0,o.pC)(this.start)?this.start.getTime():this.start,r=(0,o.pC)(this.end)?this.end.getTime():this.end,s=(0,o.pC)(t.start)?t.start.getTime():t.start,i=(0,o.pC)(t.end)?t.end.getTime():t.end;return e===s&&r===i}expandTo(t){if(this.isEmpty||this.isAllTime)return this.clone();const e=(0,o.yw)(this.start,(e=>(0,l.JE)(e,t))),r=(0,o.yw)(this.end,(e=>{const r=(0,l.JE)(e,t);return e.getTime()===r.getTime()?r:(0,l.Nm)(r,1,t)}));return new s({start:e,end:r})}intersection(t){if(!t)return this.clone();if(this.isEmpty||t.isEmpty)return s.empty;if(this.isAllTime)return t.clone();if(t.isAllTime)return this.clone();const e=(0,o.R2)(this.start,-1/0,(t=>t.getTime())),r=(0,o.R2)(this.end,1/0,(t=>t.getTime())),i=(0,o.R2)(t.start,-1/0,(t=>t.getTime())),n=(0,o.R2)(t.end,1/0,(t=>t.getTime()));let l,a;if(i>=e&&i<=r?l=i:e>=i&&e<=n&&(l=e),r>=i&&r<=n?a=r:n>=e&&n<=r&&(a=n),null!=l&&null!=a&&!isNaN(l)&&!isNaN(a)){const t=new s;return t.start=l===-1/0?null:new Date(l),t.end=a===1/0?null:new Date(a),t}return s.empty}offset(t,e){if(this.isEmpty||this.isAllTime)return this.clone();const r=new s,{start:i,end:n}=this;return(0,o.pC)(i)&&(r.start=(0,l.Nm)(i,t,e)),(0,o.pC)(n)&&(r.end=(0,l.Nm)(n,t,e)),r}union(t){if(!t||t.isEmpty)return this.clone();if(this.isEmpty)return t.clone();if(this.isAllTime||t.isAllTime)return d.clone();const e=(0,o.pC)(this.start)&&(0,o.pC)(t.start)?new Date(Math.min(this.start.getTime(),t.start.getTime())):null,r=(0,o.pC)(this.end)&&(0,o.pC)(t.end)?new Date(Math.max(this.end.getTime(),t.end.getTime())):null;return new s({start:e,end:r})}};(0,i._)([(0,a.Cb)({type:Date,json:{write:{allowNull:!0}}})],p.prototype,"end",void 0),(0,i._)([(0,u.r)("end")],p.prototype,"readEnd",null),(0,i._)([(0,c.c)("end")],p.prototype,"writeEnd",null),(0,i._)([(0,a.Cb)({readOnly:!0,json:{read:!1}})],p.prototype,"isAllTime",null),(0,i._)([(0,a.Cb)({readOnly:!0,json:{read:!1}})],p.prototype,"isEmpty",null),(0,i._)([(0,a.Cb)({type:Date,json:{write:{allowNull:!0}}})],p.prototype,"start",void 0),(0,i._)([(0,u.r)("start")],p.prototype,"readStart",null),(0,i._)([(0,c.c)("start")],p.prototype,"writeStart",null),p=s=(0,i._)([(0,h.j)("esri.TimeExtent")],p);const d=new p,f=new p({start:void 0,end:void 0}),y=p},5732:(t,e,r)=>{r.d(e,{a:()=>n,c:()=>s,g:()=>i});var s="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};function i(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function n(t){throw new Error('Could not dynamically require "'+t+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}},52138:(t,e,r)=>{r.d(e,{a:()=>a,d:()=>f,e:()=>p,f:()=>d,g:()=>_,h:()=>v,i:()=>o,j:()=>S,k:()=>c,m:()=>u,s:()=>n,t:()=>l,v:()=>h,x:()=>b,y:()=>y});var s=r(65617),i=r(46851);function n(t,e,r,s,i,n,o,l,a,u,h,c,p,d,f,y,m){return t[0]=e,t[1]=r,t[2]=s,t[3]=i,t[4]=n,t[5]=o,t[6]=l,t[7]=a,t[8]=u,t[9]=h,t[10]=c,t[11]=p,t[12]=d,t[13]=f,t[14]=y,t[15]=m,t}function o(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function l(t,e){if(t===e){const r=e[1],s=e[2],i=e[3],n=e[6],o=e[7],l=e[11];t[1]=e[4],t[2]=e[8],t[3]=e[12],t[4]=r,t[6]=e[9],t[7]=e[13],t[8]=s,t[9]=n,t[11]=e[14],t[12]=i,t[13]=o,t[14]=l}else t[0]=e[0],t[1]=e[4],t[2]=e[8],t[3]=e[12],t[4]=e[1],t[5]=e[5],t[6]=e[9],t[7]=e[13],t[8]=e[2],t[9]=e[6],t[10]=e[10],t[11]=e[14],t[12]=e[3],t[13]=e[7],t[14]=e[11],t[15]=e[15];return t}function a(t,e){const r=e[0],s=e[1],i=e[2],n=e[3],o=e[4],l=e[5],a=e[6],u=e[7],h=e[8],c=e[9],p=e[10],d=e[11],f=e[12],y=e[13],m=e[14],g=e[15],_=r*l-s*o,w=r*a-i*o,S=r*u-n*o,v=s*a-i*l,b=s*u-n*l,M=i*u-n*a,A=h*y-c*f,x=h*m-p*f,T=h*g-d*f,E=c*m-p*y,I=c*g-d*y,R=p*g-d*m;let C=_*R-w*I+S*E+v*T-b*x+M*A;return C?(C=1/C,t[0]=(l*R-a*I+u*E)*C,t[1]=(i*I-s*R-n*E)*C,t[2]=(y*M-m*b+g*v)*C,t[3]=(p*b-c*M-d*v)*C,t[4]=(a*T-o*R-u*x)*C,t[5]=(r*R-i*T+n*x)*C,t[6]=(m*S-f*M-g*w)*C,t[7]=(h*M-p*S+d*w)*C,t[8]=(o*I-l*T+u*A)*C,t[9]=(s*T-r*I-n*A)*C,t[10]=(f*b-y*S+g*_)*C,t[11]=(c*S-h*b-d*_)*C,t[12]=(l*x-o*E-a*A)*C,t[13]=(r*E-s*x+i*A)*C,t[14]=(y*w-f*v-m*_)*C,t[15]=(h*v-c*w+p*_)*C,t):null}function u(t,e,r){const s=e[0],i=e[1],n=e[2],o=e[3],l=e[4],a=e[5],u=e[6],h=e[7],c=e[8],p=e[9],d=e[10],f=e[11],y=e[12],m=e[13],g=e[14],_=e[15];let w=r[0],S=r[1],v=r[2],b=r[3];return t[0]=w*s+S*l+v*c+b*y,t[1]=w*i+S*a+v*p+b*m,t[2]=w*n+S*u+v*d+b*g,t[3]=w*o+S*h+v*f+b*_,w=r[4],S=r[5],v=r[6],b=r[7],t[4]=w*s+S*l+v*c+b*y,t[5]=w*i+S*a+v*p+b*m,t[6]=w*n+S*u+v*d+b*g,t[7]=w*o+S*h+v*f+b*_,w=r[8],S=r[9],v=r[10],b=r[11],t[8]=w*s+S*l+v*c+b*y,t[9]=w*i+S*a+v*p+b*m,t[10]=w*n+S*u+v*d+b*g,t[11]=w*o+S*h+v*f+b*_,w=r[12],S=r[13],v=r[14],b=r[15],t[12]=w*s+S*l+v*c+b*y,t[13]=w*i+S*a+v*p+b*m,t[14]=w*n+S*u+v*d+b*g,t[15]=w*o+S*h+v*f+b*_,t}function h(t,e,r){const s=r[0],i=r[1],n=r[2];if(e===t)t[12]=e[0]*s+e[4]*i+e[8]*n+e[12],t[13]=e[1]*s+e[5]*i+e[9]*n+e[13],t[14]=e[2]*s+e[6]*i+e[10]*n+e[14],t[15]=e[3]*s+e[7]*i+e[11]*n+e[15];else{const r=e[0],o=e[1],l=e[2],a=e[3],u=e[4],h=e[5],c=e[6],p=e[7],d=e[8],f=e[9],y=e[10],m=e[11];t[0]=r,t[1]=o,t[2]=l,t[3]=a,t[4]=u,t[5]=h,t[6]=c,t[7]=p,t[8]=d,t[9]=f,t[10]=y,t[11]=m,t[12]=r*s+u*i+d*n+e[12],t[13]=o*s+h*i+f*n+e[13],t[14]=l*s+c*i+y*n+e[14],t[15]=a*s+p*i+m*n+e[15]}return t}function c(t,e,r){const s=r[0],i=r[1],n=r[2];return t[0]=e[0]*s,t[1]=e[1]*s,t[2]=e[2]*s,t[3]=e[3]*s,t[4]=e[4]*i,t[5]=e[5]*i,t[6]=e[6]*i,t[7]=e[7]*i,t[8]=e[8]*n,t[9]=e[9]*n,t[10]=e[10]*n,t[11]=e[11]*n,t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t}function p(t,e,r,s){let n,o,l,a,u,h,c,p,d,f,y,m,g,_,w,S,v,b,M,A,x,T,E,I,R=s[0],C=s[1],L=s[2],P=Math.sqrt(R*R+C*C+L*L);return P<(0,i.g)()?null:(P=1/P,R*=P,C*=P,L*=P,n=Math.sin(r),o=Math.cos(r),l=1-o,a=e[0],u=e[1],h=e[2],c=e[3],p=e[4],d=e[5],f=e[6],y=e[7],m=e[8],g=e[9],_=e[10],w=e[11],S=R*R*l+o,v=C*R*l+L*n,b=L*R*l-C*n,M=R*C*l-L*n,A=C*C*l+o,x=L*C*l+R*n,T=R*L*l+C*n,E=C*L*l-R*n,I=L*L*l+o,t[0]=a*S+p*v+m*b,t[1]=u*S+d*v+g*b,t[2]=h*S+f*v+_*b,t[3]=c*S+y*v+w*b,t[4]=a*M+p*A+m*x,t[5]=u*M+d*A+g*x,t[6]=h*M+f*A+_*x,t[7]=c*M+y*A+w*x,t[8]=a*T+p*E+m*I,t[9]=u*T+d*E+g*I,t[10]=h*T+f*E+_*I,t[11]=c*T+y*E+w*I,e!==t&&(t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t)}function d(t,e){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=e[0],t[13]=e[1],t[14]=e[2],t[15]=1,t}function f(t,e,r){if(0===e)return o(t);let s,n,l,a=r[0],u=r[1],h=r[2],c=Math.sqrt(a*a+u*u+h*h);return c<(0,i.g)()?null:(c=1/c,a*=c,u*=c,h*=c,s=Math.sin(e),n=Math.cos(e),l=1-n,t[0]=a*a*l+n,t[1]=u*a*l+h*s,t[2]=h*a*l-u*s,t[3]=0,t[4]=a*u*l-h*s,t[5]=u*u*l+n,t[6]=h*u*l+a*s,t[7]=0,t[8]=a*h*l+u*s,t[9]=u*h*l-a*s,t[10]=h*h*l+n,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t)}function y(t,e){const r=Math.sin(e),s=Math.cos(e);return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=s,t[6]=r,t[7]=0,t[8]=0,t[9]=-r,t[10]=s,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function m(t,e,r){const s=e[0],i=e[1],n=e[2],o=e[3],l=s+s,a=i+i,u=n+n,h=s*l,c=s*a,p=s*u,d=i*a,f=i*u,y=n*u,m=o*l,g=o*a,_=o*u;return t[0]=1-(d+y),t[1]=c+_,t[2]=p-g,t[3]=0,t[4]=c-_,t[5]=1-(h+y),t[6]=f+m,t[7]=0,t[8]=p+g,t[9]=f-m,t[10]=1-(h+d),t[11]=0,t[12]=r[0],t[13]=r[1],t[14]=r[2],t[15]=1,t}const g=(0,s.c)();function _(t,e,r,s){const i=e[0],n=e[1],o=e[2],l=e[3],a=i+i,u=n+n,h=o+o,c=i*a,p=i*u,d=i*h,f=n*u,y=n*h,m=o*h,g=l*a,_=l*u,w=l*h,S=s[0],v=s[1],b=s[2];return t[0]=(1-(f+m))*S,t[1]=(p+w)*S,t[2]=(d-_)*S,t[3]=0,t[4]=(p-w)*v,t[5]=(1-(c+m))*v,t[6]=(y+g)*v,t[7]=0,t[8]=(d+_)*b,t[9]=(y-g)*b,t[10]=(1-(c+f))*b,t[11]=0,t[12]=r[0],t[13]=r[1],t[14]=r[2],t[15]=1,t}function w(t,e,r){return t[0]=e[0]-r[0],t[1]=e[1]-r[1],t[2]=e[2]-r[2],t[3]=e[3]-r[3],t[4]=e[4]-r[4],t[5]=e[5]-r[5],t[6]=e[6]-r[6],t[7]=e[7]-r[7],t[8]=e[8]-r[8],t[9]=e[9]-r[9],t[10]=e[10]-r[10],t[11]=e[11]-r[11],t[12]=e[12]-r[12],t[13]=e[13]-r[13],t[14]=e[14]-r[14],t[15]=e[15]-r[15],t}function S(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]&&t[3]===e[3]&&t[4]===e[4]&&t[5]===e[5]&&t[6]===e[6]&&t[7]===e[7]&&t[8]===e[8]&&t[9]===e[9]&&t[10]===e[10]&&t[11]===e[11]&&t[12]===e[12]&&t[13]===e[13]&&t[14]===e[14]&&t[15]===e[15]}function v(t,e){if(t===e)return!0;const r=t[0],s=t[1],n=t[2],o=t[3],l=t[4],a=t[5],u=t[6],h=t[7],c=t[8],p=t[9],d=t[10],f=t[11],y=t[12],m=t[13],g=t[14],_=t[15],w=e[0],S=e[1],v=e[2],b=e[3],M=e[4],A=e[5],x=e[6],T=e[7],E=e[8],I=e[9],R=e[10],C=e[11],L=e[12],P=e[13],U=e[14],D=e[15],z=(0,i.g)();return Math.abs(r-w)<=z*Math.max(1,Math.abs(r),Math.abs(w))&&Math.abs(s-S)<=z*Math.max(1,Math.abs(s),Math.abs(S))&&Math.abs(n-v)<=z*Math.max(1,Math.abs(n),Math.abs(v))&&Math.abs(o-b)<=z*Math.max(1,Math.abs(o),Math.abs(b))&&Math.abs(l-M)<=z*Math.max(1,Math.abs(l),Math.abs(M))&&Math.abs(a-A)<=z*Math.max(1,Math.abs(a),Math.abs(A))&&Math.abs(u-x)<=z*Math.max(1,Math.abs(u),Math.abs(x))&&Math.abs(h-T)<=z*Math.max(1,Math.abs(h),Math.abs(T))&&Math.abs(c-E)<=z*Math.max(1,Math.abs(c),Math.abs(E))&&Math.abs(p-I)<=z*Math.max(1,Math.abs(p),Math.abs(I))&&Math.abs(d-R)<=z*Math.max(1,Math.abs(d),Math.abs(R))&&Math.abs(f-C)<=z*Math.max(1,Math.abs(f),Math.abs(C))&&Math.abs(y-L)<=z*Math.max(1,Math.abs(y),Math.abs(L))&&Math.abs(m-P)<=z*Math.max(1,Math.abs(m),Math.abs(P))&&Math.abs(g-U)<=z*Math.max(1,Math.abs(g),Math.abs(U))&&Math.abs(_-D)<=z*Math.max(1,Math.abs(_),Math.abs(D))}function b(t){const e=(0,i.g)(),r=t[0],s=t[1],n=t[2],o=t[4],l=t[5],a=t[6],u=t[8],h=t[9],c=t[10];return Math.abs(1-(r*r+o*o+u*u))<=e&&Math.abs(1-(s*s+l*l+h*h))<=e&&Math.abs(1-(n*n+a*a+c*c))<=e}const M=u,A=w;Object.freeze(Object.defineProperty({__proto__:null,copy:function(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t},set:n,identity:o,transpose:l,invert:a,adjoint:function(t,e){const r=e[0],s=e[1],i=e[2],n=e[3],o=e[4],l=e[5],a=e[6],u=e[7],h=e[8],c=e[9],p=e[10],d=e[11],f=e[12],y=e[13],m=e[14],g=e[15];return t[0]=l*(p*g-d*m)-c*(a*g-u*m)+y*(a*d-u*p),t[1]=-(s*(p*g-d*m)-c*(i*g-n*m)+y*(i*d-n*p)),t[2]=s*(a*g-u*m)-l*(i*g-n*m)+y*(i*u-n*a),t[3]=-(s*(a*d-u*p)-l*(i*d-n*p)+c*(i*u-n*a)),t[4]=-(o*(p*g-d*m)-h*(a*g-u*m)+f*(a*d-u*p)),t[5]=r*(p*g-d*m)-h*(i*g-n*m)+f*(i*d-n*p),t[6]=-(r*(a*g-u*m)-o*(i*g-n*m)+f*(i*u-n*a)),t[7]=r*(a*d-u*p)-o*(i*d-n*p)+h*(i*u-n*a),t[8]=o*(c*g-d*y)-h*(l*g-u*y)+f*(l*d-u*c),t[9]=-(r*(c*g-d*y)-h*(s*g-n*y)+f*(s*d-n*c)),t[10]=r*(l*g-u*y)-o*(s*g-n*y)+f*(s*u-n*l),t[11]=-(r*(l*d-u*c)-o*(s*d-n*c)+h*(s*u-n*l)),t[12]=-(o*(c*m-p*y)-h*(l*m-a*y)+f*(l*p-a*c)),t[13]=r*(c*m-p*y)-h*(s*m-i*y)+f*(s*p-i*c),t[14]=-(r*(l*m-a*y)-o*(s*m-i*y)+f*(s*a-i*l)),t[15]=r*(l*p-a*c)-o*(s*p-i*c)+h*(s*a-i*l),t},determinant:function(t){const e=t[0],r=t[1],s=t[2],i=t[3],n=t[4],o=t[5],l=t[6],a=t[7],u=t[8],h=t[9],c=t[10],p=t[11],d=t[12],f=t[13],y=t[14],m=t[15];return(e*o-r*n)*(c*m-p*y)-(e*l-s*n)*(h*m-p*f)+(e*a-i*n)*(h*y-c*f)+(r*l-s*o)*(u*m-p*d)-(r*a-i*o)*(u*y-c*d)+(s*a-i*l)*(u*f-h*d)},multiply:u,translate:h,scale:c,rotate:p,rotateX:function(t,e,r){const s=Math.sin(r),i=Math.cos(r),n=e[4],o=e[5],l=e[6],a=e[7],u=e[8],h=e[9],c=e[10],p=e[11];return e!==t&&(t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[4]=n*i+u*s,t[5]=o*i+h*s,t[6]=l*i+c*s,t[7]=a*i+p*s,t[8]=u*i-n*s,t[9]=h*i-o*s,t[10]=c*i-l*s,t[11]=p*i-a*s,t},rotateY:function(t,e,r){const s=Math.sin(r),i=Math.cos(r),n=e[0],o=e[1],l=e[2],a=e[3],u=e[8],h=e[9],c=e[10],p=e[11];return e!==t&&(t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[0]=n*i-u*s,t[1]=o*i-h*s,t[2]=l*i-c*s,t[3]=a*i-p*s,t[8]=n*s+u*i,t[9]=o*s+h*i,t[10]=l*s+c*i,t[11]=a*s+p*i,t},rotateZ:function(t,e,r){const s=Math.sin(r),i=Math.cos(r),n=e[0],o=e[1],l=e[2],a=e[3],u=e[4],h=e[5],c=e[6],p=e[7];return e!==t&&(t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[0]=n*i+u*s,t[1]=o*i+h*s,t[2]=l*i+c*s,t[3]=a*i+p*s,t[4]=u*i-n*s,t[5]=h*i-o*s,t[6]=c*i-l*s,t[7]=p*i-a*s,t},fromTranslation:d,fromScaling:function(t,e){return t[0]=e[0],t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=e[1],t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=e[2],t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},fromRotation:f,fromXRotation:y,fromYRotation:function(t,e){const r=Math.sin(e),s=Math.cos(e);return t[0]=s,t[1]=0,t[2]=-r,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=r,t[9]=0,t[10]=s,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},fromZRotation:function(t,e){const r=Math.sin(e),s=Math.cos(e);return t[0]=s,t[1]=r,t[2]=0,t[3]=0,t[4]=-r,t[5]=s,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},fromRotationTranslation:m,fromQuat2:function(t,e){const r=g,s=-e[0],i=-e[1],n=-e[2],o=e[3],l=e[4],a=e[5],u=e[6],h=e[7],c=s*s+i*i+n*n+o*o;return c>0?(r[0]=2*(l*o+h*s+a*n-u*i)/c,r[1]=2*(a*o+h*i+u*s-l*n)/c,r[2]=2*(u*o+h*n+l*i-a*s)/c):(r[0]=2*(l*o+h*s+a*n-u*i),r[1]=2*(a*o+h*i+u*s-l*n),r[2]=2*(u*o+h*n+l*i-a*s)),m(t,e,r),t},getTranslation:function(t,e){return t[0]=e[12],t[1]=e[13],t[2]=e[14],t},getScaling:function(t,e){const r=e[0],s=e[1],i=e[2],n=e[4],o=e[5],l=e[6],a=e[8],u=e[9],h=e[10];return t[0]=Math.sqrt(r*r+s*s+i*i),t[1]=Math.sqrt(n*n+o*o+l*l),t[2]=Math.sqrt(a*a+u*u+h*h),t},getRotation:function(t,e){const r=e[0]+e[5]+e[10];let s=0;return r>0?(s=2*Math.sqrt(r+1),t[3]=.25*s,t[0]=(e[6]-e[9])/s,t[1]=(e[8]-e[2])/s,t[2]=(e[1]-e[4])/s):e[0]>e[5]&&e[0]>e[10]?(s=2*Math.sqrt(1+e[0]-e[5]-e[10]),t[3]=(e[6]-e[9])/s,t[0]=.25*s,t[1]=(e[1]+e[4])/s,t[2]=(e[8]+e[2])/s):e[5]>e[10]?(s=2*Math.sqrt(1+e[5]-e[0]-e[10]),t[3]=(e[8]-e[2])/s,t[0]=(e[1]+e[4])/s,t[1]=.25*s,t[2]=(e[6]+e[9])/s):(s=2*Math.sqrt(1+e[10]-e[0]-e[5]),t[3]=(e[1]-e[4])/s,t[0]=(e[8]+e[2])/s,t[1]=(e[6]+e[9])/s,t[2]=.25*s),t},fromRotationTranslationScale:_,fromRotationTranslationScaleOrigin:function(t,e,r,s,i){const n=e[0],o=e[1],l=e[2],a=e[3],u=n+n,h=o+o,c=l+l,p=n*u,d=n*h,f=n*c,y=o*h,m=o*c,g=l*c,_=a*u,w=a*h,S=a*c,v=s[0],b=s[1],M=s[2],A=i[0],x=i[1],T=i[2],E=(1-(y+g))*v,I=(d+S)*v,R=(f-w)*v,C=(d-S)*b,L=(1-(p+g))*b,P=(m+_)*b,U=(f+w)*M,D=(m-_)*M,z=(1-(p+y))*M;return t[0]=E,t[1]=I,t[2]=R,t[3]=0,t[4]=C,t[5]=L,t[6]=P,t[7]=0,t[8]=U,t[9]=D,t[10]=z,t[11]=0,t[12]=r[0]+A-(E*A+C*x+U*T),t[13]=r[1]+x-(I*A+L*x+D*T),t[14]=r[2]+T-(R*A+P*x+z*T),t[15]=1,t},fromQuat:function(t,e){const r=e[0],s=e[1],i=e[2],n=e[3],o=r+r,l=s+s,a=i+i,u=r*o,h=s*o,c=s*l,p=i*o,d=i*l,f=i*a,y=n*o,m=n*l,g=n*a;return t[0]=1-c-f,t[1]=h+g,t[2]=p-m,t[3]=0,t[4]=h-g,t[5]=1-u-f,t[6]=d+y,t[7]=0,t[8]=p+m,t[9]=d-y,t[10]=1-u-c,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},frustum:function(t,e,r,s,i,n,o){const l=1/(r-e),a=1/(i-s),u=1/(n-o);return t[0]=2*n*l,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=2*n*a,t[6]=0,t[7]=0,t[8]=(r+e)*l,t[9]=(i+s)*a,t[10]=(o+n)*u,t[11]=-1,t[12]=0,t[13]=0,t[14]=o*n*2*u,t[15]=0,t},perspective:function(t,e,r,s,i){const n=1/Math.tan(e/2);let o;return t[0]=n/r,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=n,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[11]=-1,t[12]=0,t[13]=0,t[15]=0,null!=i&&i!==1/0?(o=1/(s-i),t[10]=(i+s)*o,t[14]=2*i*s*o):(t[10]=-1,t[14]=-2*s),t},perspectiveFromFieldOfView:function(t,e,r,s){const i=Math.tan(e.upDegrees*Math.PI/180),n=Math.tan(e.downDegrees*Math.PI/180),o=Math.tan(e.leftDegrees*Math.PI/180),l=Math.tan(e.rightDegrees*Math.PI/180),a=2/(o+l),u=2/(i+n);return t[0]=a,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=u,t[6]=0,t[7]=0,t[8]=-(o-l)*a*.5,t[9]=(i-n)*u*.5,t[10]=s/(r-s),t[11]=-1,t[12]=0,t[13]=0,t[14]=s*r/(r-s),t[15]=0,t},ortho:function(t,e,r,s,i,n,o){const l=1/(e-r),a=1/(s-i),u=1/(n-o);return t[0]=-2*l,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=-2*a,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=2*u,t[11]=0,t[12]=(e+r)*l,t[13]=(i+s)*a,t[14]=(o+n)*u,t[15]=1,t},lookAt:function(t,e,r,s){let n,l,a,u,h,c,p,d,f,y;const m=e[0],g=e[1],_=e[2],w=s[0],S=s[1],v=s[2],b=r[0],M=r[1],A=r[2],x=(0,i.g)();return Math.abs(m-b)<x&&Math.abs(g-M)<x&&Math.abs(_-A)<x?o(t):(p=m-b,d=g-M,f=_-A,y=1/Math.sqrt(p*p+d*d+f*f),p*=y,d*=y,f*=y,n=S*f-v*d,l=v*p-w*f,a=w*d-S*p,y=Math.sqrt(n*n+l*l+a*a),y?(y=1/y,n*=y,l*=y,a*=y):(n=0,l=0,a=0),u=d*a-f*l,h=f*n-p*a,c=p*l-d*n,y=Math.sqrt(u*u+h*h+c*c),y?(y=1/y,u*=y,h*=y,c*=y):(u=0,h=0,c=0),t[0]=n,t[1]=u,t[2]=p,t[3]=0,t[4]=l,t[5]=h,t[6]=d,t[7]=0,t[8]=a,t[9]=c,t[10]=f,t[11]=0,t[12]=-(n*m+l*g+a*_),t[13]=-(u*m+h*g+c*_),t[14]=-(p*m+d*g+f*_),t[15]=1,t)},targetTo:function(t,e,r,s){const i=e[0],n=e[1],o=e[2],l=s[0],a=s[1],u=s[2];let h=i-r[0],c=n-r[1],p=o-r[2],d=h*h+c*c+p*p;d>0&&(d=1/Math.sqrt(d),h*=d,c*=d,p*=d);let f=a*p-u*c,y=u*h-l*p,m=l*c-a*h;return d=f*f+y*y+m*m,d>0&&(d=1/Math.sqrt(d),f*=d,y*=d,m*=d),t[0]=f,t[1]=y,t[2]=m,t[3]=0,t[4]=c*m-p*y,t[5]=p*f-h*m,t[6]=h*y-c*f,t[7]=0,t[8]=h,t[9]=c,t[10]=p,t[11]=0,t[12]=i,t[13]=n,t[14]=o,t[15]=1,t},str:function(t){return"mat4("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+", "+t[4]+", "+t[5]+", "+t[6]+", "+t[7]+", "+t[8]+", "+t[9]+", "+t[10]+", "+t[11]+", "+t[12]+", "+t[13]+", "+t[14]+", "+t[15]+")"},frob:function(t){return Math.sqrt(t[0]**2+t[1]**2+t[2]**2+t[3]**2+t[4]**2+t[5]**2+t[6]**2+t[7]**2+t[8]**2+t[9]**2+t[10]**2+t[11]**2+t[12]**2+t[13]**2+t[14]**2+t[15]**2)},add:function(t,e,r){return t[0]=e[0]+r[0],t[1]=e[1]+r[1],t[2]=e[2]+r[2],t[3]=e[3]+r[3],t[4]=e[4]+r[4],t[5]=e[5]+r[5],t[6]=e[6]+r[6],t[7]=e[7]+r[7],t[8]=e[8]+r[8],t[9]=e[9]+r[9],t[10]=e[10]+r[10],t[11]=e[11]+r[11],t[12]=e[12]+r[12],t[13]=e[13]+r[13],t[14]=e[14]+r[14],t[15]=e[15]+r[15],t},subtract:w,multiplyScalar:function(t,e,r){return t[0]=e[0]*r,t[1]=e[1]*r,t[2]=e[2]*r,t[3]=e[3]*r,t[4]=e[4]*r,t[5]=e[5]*r,t[6]=e[6]*r,t[7]=e[7]*r,t[8]=e[8]*r,t[9]=e[9]*r,t[10]=e[10]*r,t[11]=e[11]*r,t[12]=e[12]*r,t[13]=e[13]*r,t[14]=e[14]*r,t[15]=e[15]*r,t},multiplyScalarAndAdd:function(t,e,r,s){return t[0]=e[0]+r[0]*s,t[1]=e[1]+r[1]*s,t[2]=e[2]+r[2]*s,t[3]=e[3]+r[3]*s,t[4]=e[4]+r[4]*s,t[5]=e[5]+r[5]*s,t[6]=e[6]+r[6]*s,t[7]=e[7]+r[7]*s,t[8]=e[8]+r[8]*s,t[9]=e[9]+r[9]*s,t[10]=e[10]+r[10]*s,t[11]=e[11]+r[11]*s,t[12]=e[12]+r[12]*s,t[13]=e[13]+r[13]*s,t[14]=e[14]+r[14]*s,t[15]=e[15]+r[15]*s,t},exactEquals:S,equals:v,isOrthoNormal:b,mul:M,sub:A},Symbol.toStringTag,{value:"Module"}))},13867:(t,e,r)=>{r.d(e,{Z:()=>i});var s=r(69801);class i{constructor(t,e){this._storage=new s.WJ,this._storage.maxSize=t,e&&this._storage.registerRemoveFunc("",e)}put(t,e,r){this._storage.put(t,e,r,1)}pop(t){return this._storage.pop(t)}get(t){return this._storage.get(t)}clear(){this._storage.clearAll()}destroy(){this._storage.destroy()}get maxSize(){return this._storage.maxSize}set maxSize(t){this._storage.maxSize=t}}},69801:(t,e,r)=>{r.d(e,{WJ:()=>a,Xq:()=>l});var s,i,n=r(70586),o=r(44553);(i=s||(s={}))[i.ALL=0]="ALL",i[i.SOME=1]="SOME";class l{constructor(t,e,r){this._namespace=t,this._storage=e,this._removeFunc=!1,this._hit=0,this._miss=0,this._storage.register(this),this._namespace+=":",r&&(this._storage.registerRemoveFunc(this._namespace,r),this._removeFunc=!0)}destroy(){this._storage.clear(this._namespace),this._removeFunc&&this._storage.deregisterRemoveFunc(this._namespace),this._storage.deregister(this),this._storage=null}get namespace(){return this._namespace.slice(0,-1)}get hitRate(){return this._hit/(this._hit+this._miss)}get size(){return this._storage.size}get maxSize(){return this._storage.maxSize}resetHitRate(){this._hit=this._miss=0}put(t,e,r,s=0){this._storage.put(this._namespace+t,e,r,s)}get(t){const e=this._storage.get(this._namespace+t);return void 0===e?++this._miss:++this._hit,e}pop(t){const e=this._storage.pop(this._namespace+t);return void 0===e?++this._miss:++this._hit,e}updateSize(t,e,r){this._storage.updateSize(this._namespace+t,e,r)}clear(){this._storage.clear(this._namespace)}clearAll(){this._storage.clearAll()}getStats(){return this._storage.getStats()}resetStats(){this._storage.resetStats()}}class a{constructor(t=10485760){this._maxSize=t,this._db=new Map,this._size=0,this._hit=0,this._miss=0,this._removeFuncs=new o.Z,this._users=new o.Z}destroy(){this.clearAll(),this._removeFuncs.clear(),this._users.clear(),this._db=null}register(t){this._users.push(t)}deregister(t){this._users.removeUnordered(t)}registerRemoveFunc(t,e){this._removeFuncs.push([t,e])}deregisterRemoveFunc(t){this._removeFuncs.filterInPlace((e=>e[0]!==t))}get size(){return this._size}get maxSize(){return this._maxSize}set maxSize(t){this._maxSize=Math.max(t,0),this._checkSizeLimit()}put(t,e,r,i){const n=this._db.get(t);if(n&&(this._size-=n.size,this._db.delete(t),n.entry!==e&&this._notifyRemove(t,n.entry,s.ALL)),r>this._maxSize)return void this._notifyRemove(t,e,s.ALL);if(void 0===e)return void console.warn("Refusing to cache undefined entry ");if(!r||r<0)return void console.warn("Refusing to cache entry with invalid size "+r);const o=1+Math.max(i,-3)- -3;this._db.set(t,{entry:e,size:r,lifetime:o,lives:o}),this._size+=r,this._checkSizeLimit()}updateSize(t,e,r){const i=this._db.get(t);if(i&&i.entry===e){for(this._size-=i.size;r>this._maxSize;){const i=this._notifyRemove(t,e,s.SOME);if(!((0,n.pC)(i)&&i>0))return void this._db.delete(t);r=i}i.size=r,this._size+=r,this._checkSizeLimit()}}pop(t){const e=this._db.get(t);if(e)return this._size-=e.size,this._db.delete(t),++this._hit,e.entry;++this._miss}get(t){const e=this._db.get(t);if(void 0!==e)return this._db.delete(t),e.lives=e.lifetime,this._db.set(t,e),++this._hit,e.entry;++this._miss}getStats(){const t={Size:Math.round(this._size/1048576)+"/"+Math.round(this._maxSize/1048576)+"MB","Hit rate":Math.round(100*this._getHitRate())+"%",Entries:this._db.size.toString()},e={},r=new Array;this._db.forEach(((t,s)=>{const i=t.lifetime;r[i]=(r[i]||0)+t.size,this._users.forAll((r=>{const i=r.namespace;if(s.startsWith(i)){const r=e[i]||0;e[i]=r+t.size}}))}));const s={};this._users.forAll((t=>{const r=t.namespace;if(!isNaN(t.hitRate)&&t.hitRate>0){const i=e[r]||0;e[r]=i,s[r]=Math.round(100*t.hitRate)+"%"}else s[r]="0%"}));const i=Object.keys(e);i.sort(((t,r)=>e[r]-e[t])),i.forEach((r=>t[r]=Math.round(e[r]/2**20)+"MB / "+s[r]));for(let e=r.length-1;e>=0;--e){const s=r[e];s&&(t["Priority "+(e+-3-1)]=Math.round(s/this.size*100)+"%")}return t}resetStats(){this._hit=this._miss=0,this._users.forAll((t=>t.resetHitRate()))}clear(t){this._db.forEach(((e,r)=>{r.startsWith(t)&&(this._size-=e.size,this._db.delete(r),this._notifyRemove(r,e.entry,s.ALL))}))}clearAll(){this._db.forEach(((t,e)=>this._notifyRemove(e,t.entry,s.ALL))),this._size=0,this._db.clear()}_getHitRate(){return this._hit/(this._hit+this._miss)}_notifyRemove(t,e,r){let s;return this._removeFuncs.some((i=>{if(t.startsWith(i[0])){const t=i[1](e,r);return"number"==typeof t&&(s=t),!0}return!1})),s}_checkSizeLimit(){if(!(this._size<=this._maxSize))for(const[t,e]of this._db){if(this._db.delete(t),e.lives<=1){this._size-=e.size;const r=this._notifyRemove(t,e.entry,s.SOME);(0,n.pC)(r)&&r>0&&(this._size+=r,e.lives=e.lifetime,e.size=r,this._db.set(t,e))}else--e.lives,this._db.set(t,e);if(this._size<=.9*this.maxSize)return}}}},17445:(t,e,r)=>{r.d(e,{N1:()=>p,YP:()=>a,Z_:()=>y,gx:()=>u,nn:()=>m,on:()=>c,tX:()=>g});var s=r(91460),i=r(50758),n=r(70586),o=r(95330),l=r(26258);function a(t,e,r={}){return h(t,e,r,d)}function u(t,e,r={}){return h(t,e,r,f)}function h(t,e,r={},s){let i=null;const o=r.once?(t,r)=>{s(t)&&((0,n.hw)(i),e(t,r))}:(t,r)=>{s(t)&&e(t,r)};if(i=(0,l.aQ)(t,o,r.sync,r.equals),r.initial){const e=t();o(e,e)}return i}function c(t,e,r,o={}){let l=null,u=null,h=null;function c(){l&&u&&(u.remove(),o.onListenerRemove?.(l),l=null,u=null)}function p(t){o.once&&o.once&&(0,n.hw)(h),r(t)}const d=a(t,((t,r)=>{c(),(0,s.vT)(t)&&(l=t,u=(0,s.on)(t,e,p),o.onListenerAdd?.(t))}),{sync:o.sync,initial:!0});return h=(0,i.kB)((()=>{d.remove(),c()})),h}function p(t,e){return function(t,e,r){if((0,o.Hc)(r))return Promise.reject((0,o.zE)());const s=t();if(e?.(s))return Promise.resolve(s);let l=null;function a(){l=(0,n.hw)(l)}return new Promise(((s,n)=>{l=(0,i.AL)([(0,o.fu)(r,(()=>{a(),n((0,o.zE)())})),h(t,(t=>{a(),s(t)}),{sync:!1,once:!0},e??d)])}))}(t,f,e)}function d(t){return!0}function f(t){return!!t}r(87538);const y={sync:!0},m={initial:!0},g={sync:!0,initial:!0}},35463:(t,e,r)=>{r.d(e,{JE:()=>o,Nm:()=>n,rJ:()=>l}),r(80442);const s={milliseconds:1,seconds:1e3,minutes:6e4,hours:36e5,days:864e5,weeks:6048e5,months:26784e5,years:31536e6,decades:31536e7,centuries:31536e8},i={milliseconds:{getter:"getMilliseconds",setter:"setMilliseconds",multiplier:1},seconds:{getter:"getSeconds",setter:"setSeconds",multiplier:1},minutes:{getter:"getMinutes",setter:"setMinutes",multiplier:1},hours:{getter:"getHours",setter:"setHours",multiplier:1},days:{getter:"getDate",setter:"setDate",multiplier:1},weeks:{getter:"getDate",setter:"setDate",multiplier:7},months:{getter:"getMonth",setter:"setMonth",multiplier:1},years:{getter:"getFullYear",setter:"setFullYear",multiplier:1},decades:{getter:"getFullYear",setter:"setFullYear",multiplier:10},centuries:{getter:"getFullYear",setter:"setFullYear",multiplier:100}};function n(t,e,r){const s=new Date(t.getTime());if(e&&r){const t=i[r],{getter:n,setter:o,multiplier:l}=t;if("months"===r){const t=function(t,e){const r=new Date(t,e+1,1);return r.setDate(0),r.getDate()}(s.getFullYear(),s.getMonth()+e);s.getDate()>t&&s.setDate(t)}s[o](s[n]()+e*l)}return s}function o(t,e){switch(e){case"milliseconds":return new Date(t.getTime());case"seconds":return new Date(t.getFullYear(),t.getMonth(),t.getDate(),t.getHours(),t.getMinutes(),t.getSeconds());case"minutes":return new Date(t.getFullYear(),t.getMonth(),t.getDate(),t.getHours(),t.getMinutes());case"hours":return new Date(t.getFullYear(),t.getMonth(),t.getDate(),t.getHours());case"days":return new Date(t.getFullYear(),t.getMonth(),t.getDate());case"weeks":return new Date(t.getFullYear(),t.getMonth(),t.getDate()-t.getDay());case"months":return new Date(t.getFullYear(),t.getMonth(),1);case"years":return new Date(t.getFullYear(),0,1);case"decades":return new Date(t.getFullYear()-t.getFullYear()%10,0,1);case"centuries":return new Date(t.getFullYear()-t.getFullYear()%100,0,1);default:return new Date}}function l(t,e,r){return 0===t?0:t*s[e]/s[r]}},94756:(t,e,r)=>{r.r(e),r.d(e,{default:()=>ht});var s=r(43697),i=r(3172),n=r(66643),o=r(20102),l=r(22974),a=r(70586),u=r(16453),h=r(95330),c=r(17452),p=r(5600),d=(r(75215),r(71715)),f=r(52011),y=r(30556),m=r(6570),g=r(82971),_=r(87085),w=r(54295),S=r(46486),v=r(17287),b=r(71612),M=r(17017),A=r(38009),x=r(16859),T=r(72965);let E=null;var I=r(92604),R=r(1533);class C{constructor(t,e){this._spriteSource=t,this._maxTextureSize=e,this.devicePixelRatio=1,this._spriteImageFormat="png",this._isRetina=!1,this._spritesData={},this.image=null,this.width=null,this.height=null,this.loadStatus="not-loaded","url"===t.type&&t.spriteFormat&&(this._spriteImageFormat=t.spriteFormat),t.pixelRatio&&(this.devicePixelRatio=t.pixelRatio),this.baseURL=t.spriteUrl}get spriteNames(){const t=[];for(const e in this._spritesData)t.push(e);return t.sort(),t}getSpriteInfo(t){return this._spritesData?this._spritesData[t]:null}async load(t){if(this.baseURL){this.loadStatus="loading";try{await this._loadSprites(t),this.loadStatus="loaded"}catch{this.loadStatus="failed"}}else this.loadStatus="failed"}async _loadSprites(t){this._isRetina=this.devicePixelRatio>1.15;const{width:e,height:r,data:s,json:i}=await this._getSpriteData(this._spriteSource,t),n=Object.keys(i);if(!n||0===n.length||!s)return this._spritesData=this.image=null,void(this.width=this.height=0);this._spritesData=i,this.width=e,this.height=r;const l=Math.max(this._maxTextureSize,4096);if(e>l||r>l){const t=`Sprite resource for style ${this.baseURL} is bigger than the maximum allowed of ${l} pixels}`;throw I.Z.getLogger("esri.layers.support.SpriteSource").error(t),new o.Z("SpriteSource",t)}let a;for(let t=0;t<s.length;t+=4)a=s[t+3]/255,s[t]=s[t]*a,s[t+1]=s[t+1]*a,s[t+2]=s[t+2]*a;this.image=s}async _getSpriteData(t,e){if("image"===t.type){let e,r;if(this.devicePixelRatio<1.15){if(!t.spriteSource1x)throw new o.Z("SpriteSource","no image data provided for low resolution sprites!");e=t.spriteSource1x.image,r=t.spriteSource1x.json}else{if(!t.spriteSource2x)throw new o.Z("SpriteSource","no image data provided for high resolution sprites!");e=t.spriteSource2x.image,r=t.spriteSource2x.json}return"width"in e&&"height"in e&&"data"in e&&((0,R.eP)(e.data)||(0,R.KZ)(e.data))?{width:e.width,height:e.height,data:new Uint8Array(e.data),json:r}:{...L(e),json:r}}const r=(0,c.mN)(this.baseURL),s=r.query?"?"+(0,c.B7)(r.query):"",n=this._isRetina?"@2x":"",l=`${r.path}${n}.${this._spriteImageFormat}${s}`,a=`${r.path}${n}.json${s}`,[u,h]=await Promise.all([(0,i.default)(a,e),(0,i.default)(l,{responseType:"image",...e})]);return{...L(h.data),json:u.data}}}function L(t){const e=document.createElement("canvas"),r=e.getContext("2d");e.width=t.width,e.height=t.height,r.drawImage(t,0,0,t.width,t.height);const s=r.getImageData(0,0,t.width,t.height);return{width:t.width,height:t.height,data:new Uint8Array(s.data)}}var P=r(11145),U=r(68773),D=r(45322),z=r(56608),F=r(55415);class O{constructor(t){this.url=t}async fetchTileIndex(){return this._tileIndexPromise||(this._tileIndexPromise=(0,i.default)(this.url).then((t=>t.data.index))),this._tileIndexPromise}async dataKey(t,e){const r=await this.fetchTileIndex();return(0,h.k_)(e),this._getIndexedDataKey(r,t)}_getIndexedDataKey(t,e){const r=[e];if(e.level<0||e.row<0||e.col<0||e.row>>e.level>0||e.col>>e.level>0)return null;let s=e;for(;0!==s.level;)s=new F.Z(s.level-1,s.row>>1,s.col>>1,s.world),r.push(s);let i,n,o=t,l=r.pop();if(1===o)return l;for(;r.length;)if(i=r.pop(),n=(1&i.col)+((1&i.row)<<1),o){if(0===o[n]){l=null;break}if(1===o[n]){l=i;break}l=i,o=o[n]}return l}}class B{constructor(t,e){this._tilemap=t,this._tileIndexUrl=e}async fetchTileIndex(t){return this._tileIndexPromise||(this._tileIndexPromise=(0,i.default)(this._tileIndexUrl,{query:{...t?.query}}).then((t=>t.data.index))),this._tileIndexPromise}dataKey(t,e){const{level:r,row:s,col:i}=t,n=new F.Z(t);return this._tilemap.fetchAvailabilityUpsample(r,s,i,n,e).then((()=>(n.world=t.world,n))).catch((t=>{if((0,h.D_)(t))throw t;return null}))}}const j=new Map;class N{constructor(t,e,r){this.tilemap=null,this.tileInfo=null,this.capabilities=null,this.fullExtent=null,this.name=t,this.sourceUrl=e;const s=(0,c.mN)(this.sourceUrl),i=(0,l.d9)(r),n=i.tiles;if(s)for(let t=0;t<n.length;t++){const e=(0,c.mN)(n[t]);e&&((0,c.YP)(e.path)||(e.path=(0,c.v_)(s.path,e.path)),n[t]=(0,c.fl)(e.path,{...s.query,...e.query}))}this.tileServers=n;const o=r.capabilities&&r.capabilities.split(",").map((t=>t.toLowerCase().trim())),a=!0===r?.exportTilesAllowed,u=!0===o?.includes("tilemap"),h=a&&r.hasOwnProperty("maxExportTilesCount")?r.maxExportTilesCount:0;this.capabilities={operations:{supportsExportTiles:a,supportsTileMap:u},exportTiles:a?{maxExportTilesCount:+h}:null},this.tileInfo=(0,D.d)(i.tileInfo,i,null,{ignoreMinMaxLOD:!0});const p=r.tileMap?(0,c.fl)((0,c.v_)(s.path,r.tileMap),s.query):null;u?(this.type="vector-tile",this.tilemap=new B(new z.y({layer:{parsedUrl:s,tileInfo:this.tileInfo,type:"vector-tile",tileServers:this.tileServers}}),p)):p&&(this.tilemap=new O(p)),this.fullExtent=m.Z.fromJSON(r.fullExtent)}destroy(){}async getRefKey(t,e){return this.tilemap?.dataKey(t,e)??t}requestTile(t,e,r,s){return function(t,e,r,s,n){return function(t,e){const r=j.get(t);if(r)return r.then((t=>(0,l.d9)(t)));const s=(0,i.default)(t,{responseType:"array-buffer",...e}).then((({data:e})=>(j.delete(t),e))).catch((e=>{throw j.delete(t),e}));return j.set(t,s),s}(t.replace(/\{z\}/gi,e.toString()).replace(/\{y\}/gi,r.toString()).replace(/\{x\}/gi,s.toString()),n)}(this.tileServers[e%this.tileServers.length],t,e,r,s)}isCompatibleWith(t){const e=this.tileInfo,r=t.tileInfo;if(!e.spatialReference.equals(r.spatialReference))return!1;if(!e.origin.equals(r.origin))return!1;if(Math.round(e.dpi)!==Math.round(r.dpi))return!1;const s=e.lods,i=r.lods,n=Math.min(s.length,i.length);for(let t=0;t<n;t++){const e=s[t],r=i[t];if(e.level!==r.level||Math.round(e.scale)!==Math.round(r.scale))return!1}return!0}}const k=U.Z.defaults&&U.Z.defaults.io.corsEnabledServers;function W(t){if(!t)return;const e=(0,c.P$)(t);k&&!k.includes(e)&&k.push(e)}function q(...t){let e;for(let r=0;r<t.length;++r)if((0,c.oC)(t[r])){if(e){const s=e.split("://")[0];e=s+":"+t[r].trim()}}else e=(0,c.YP)(t[r])?t[r]:(0,c.v_)(e,t[r]);return(0,c.Qj)(e)}async function G(t,e,r,s,n){let o,l,a;if((0,h.k_)(n),"string"==typeof r){const t=(0,c.Fv)(r);W(t),a=await(0,i.default)(t,{...n,responseType:"json",query:{f:"json",...n?.query}}),a.ssl&&(o&&(o=o.replace(/^http:/i,"https:")),l&&(l=l.replace(/^http:/i,"https:"))),o=t,l=t}else a={data:r},o=r.jsonUrl||null,l=s;const u=a.data;if(Z(u))return t.styleUrl=o||null,async function(t,e,r,s){const i=r?(0,c.Yd)(r):(0,c.L)();t.styleBase=i,t.style=e,t.styleUrl&&W(t.styleUrl),e["sprite-format"]&&"webp"===e["sprite-format"].toLowerCase()&&(t.spriteFormat="webp");const n=[];if(e.sources&&e.sources.esri){const r=e.sources.esri;r.url?await G(t,"esri",q(i,r.url),void 0,s):n.push(G(t,"esri",r,i,s))}for(const r of Object.keys(e.sources))"esri"!==r&&"vector"===e.sources[r].type&&(e.sources[r].url?n.push(G(t,r,q(i,e.sources[r].url),void 0,s)):e.sources[r].tiles&&n.push(G(t,r,e.sources[r],i,s)));await Promise.all(n)}(t,u,l,n);if(function(t){return!Z(t)}(u))return t.sourceUrl?$(t,u,l,!1,e,n):(t.sourceUrl=o||null,$(t,u,l,!0,e,n));throw new Error("You must specify the URL or the JSON for a service or for a style.")}function Z(t){return!!t.sources}async function $(t,e,r,s,i,n){const o=r?(0,c.Qj)(r)+"/":(0,c.L)(),l=function(t,e){if(t.hasOwnProperty("tileInfo"))return t;const r={xmin:-20037507.067161843,ymin:-20037507.067161843,xmax:20037507.067161843,ymax:20037507.067161843,spatialReference:{wkid:102100}};let s=78271.51696400007,i=295828763.7957775;const n=[],o=t.hasOwnProperty("minzoom")?+t.minzoom:0,l=t.hasOwnProperty("maxzoom")?+t.maxzoom:22;for(let t=0;t<=l;t++)t>=o&&n.push({level:t,scale:i,resolution:s}),s/=2,i/=2;for(const r of t.tiles)W(q(e,r));return{capabilities:"TilesOnly",initialExtent:r,fullExtent:r,minScale:0,maxScale:0,tiles:t.tiles,tileInfo:{rows:512,cols:512,dpi:96,format:"pbf",origin:{x:-20037508.342787,y:20037508.342787},lods:n,spatialReference:{wkid:102100}}}}(e,o),a=new N(i,(0,c.fl)(o,n?.query),l);if(!s&&t.primarySourceName in t.sourceNameToSource){const e=t.sourceNameToSource[t.primarySourceName];if(!e.isCompatibleWith(a))return;null!=a.fullExtent&&(null!=e.fullExtent?e.fullExtent.union(a.fullExtent):e.fullExtent=a.fullExtent.clone()),e.tileInfo.lods.length<a.tileInfo.lods.length&&(e.tileInfo=a.tileInfo)}if(s?(t.sourceBase=o,t.source=e,t.validatedSource=l,t.primarySourceName=i,t.sourceUrl&&W(t.sourceUrl)):W(o),t.sourceNameToSource[i]=a,!t.style){if(null==e.defaultStyles)throw new Error;return"string"==typeof e.defaultStyles?G(t,"",q(o,e.defaultStyles,"root.json"),void 0,n):G(t,"",e.defaultStyles,q(o,"root.json"),n)}}var Y=r(33516),H=r(19745),K=r(25929);const Q=1e-6;function V(t,e){if(t===e)return!0;if(null==t&&null!=e)return!1;if(null!=t&&null==e)return!1;if(null==t||null==e)return!1;if(!t.spatialReference.equals(e.spatialReference)||t.dpi!==e.dpi)return!1;const r=t.origin,s=e.origin;if(Math.abs(r.x-s.x)>=Q||Math.abs(r.y-s.y)>=Q)return!1;let i,n;t.lods[0].scale>e.lods[0].scale?(i=t,n=e):(n=t,i=e);for(let t=i.lods[0].scale;t>=n.lods[n.lods.length-1].scale-Q;t/=2)if(Math.abs(t-n.lods[0].scale)<Q)return!0;return!1}function J(t,e){if(t===e)return t;if(null==t&&null!=e)return e;if(null!=t&&null==e)return t;if(null==t||null==e)return null;const r=t.size[0],s=t.format,i=t.dpi,n={x:t.origin.x,y:t.origin.y},o=t.spatialReference.toJSON(),l=t.lods[0].scale>e.lods[0].scale?t.lods[0]:e.lods[0],a=t.lods[t.lods.length-1].scale<=e.lods[e.lods.length-1].scale?t.lods[t.lods.length-1]:e.lods[e.lods.length-1],u=l.scale,h=l.resolution,c=a.scale,p=[];let d=u,f=h,y=0;for(;d>c;)p.push({level:y,resolution:f,scale:d}),y++,d/=2,f/=2;return new P.Z({size:[r,r],dpi:i,format:s||"pbf",origin:n,lods:p,spatialReference:o})}var X=r(51785),tt=r(54738);let et,rt;function st(t){const e=(0,tt.Sh)(t);for(;e.length>1;){const t=it(e.shift());if(t.available)return t}return it(e.shift())}function it(t){switch(t){case tt.zO.WEBGL1:return et||(et=function(){const t=new ot,e=at(tt.zO.WEBGL1,t);return(0,a.Wi)(e)||(t.supportsElementIndexUint=null!==e.getExtension("OES_element_index_uint"),t.supportsStandardDerivatives=null!==e.getExtension("OES_standard_derivatives"),t.supportsInstancedArrays=null!==e.getExtension("ANGLE_instanced_arrays"),t.supportsTextureFloat=null!==e.getExtension("OES_texture_float"),t.supportsTextureHalfFloat=null!==e.getExtension("OES_texture_half_float"),t.supportsColorBufferFloat=null!==e.getExtension("WEBGL_color_buffer_float"),t.supportsColorBufferFloatBlend=null!==e.getExtension("EXT_float_blend"),t.supportsColorBufferHalfFloat=null!==e.getExtension("EXT_color_buffer_half_float")),t}()),et;case tt.zO.WEBGL2:return rt||(rt=function(){const t=new lt,e=at(tt.zO.WEBGL2,t);return(0,a.Wi)(e)||(t.supportsColorBufferFloat=null!==e.getExtension("EXT_color_buffer_float"),t.supportsColorBufferFloatBlend=null!==e.getExtension("EXT_float_blend"),t.supportsColorBufferHalfFloat=t.supportsColorBufferFloat||null!==e.getExtension("EXT_color_buffer_half_float")),t}()),rt}}class nt{constructor(){this.available=!1,this.majorPerformanceCaveat=!1,this.maxTextureSize=0,this.supportsVertexShaderSamplers=!1,this.supportsHighPrecisionFragment=!1,this.supportsElementIndexUint=!1,this.supportsStandardDerivatives=!1,this.supportsInstancedArrays=!1,this.supportsTextureFloat=!1,this.supportsTextureHalfFloat=!1,this.supportsColorBufferFloat=!1,this.supportsColorBufferFloatBlend=!1,this.supportsColorBufferHalfFloat=!1}}class ot extends nt{constructor(){super(...arguments),this.type=tt.zO.WEBGL1}}class lt extends nt{constructor(){super(...arguments),this.type=tt.zO.WEBGL2,this.supportsElementIndexUint=!0,this.supportsStandardDerivatives=!0,this.supportsInstancedArrays=!0,this.supportsTextureFloat=!0,this.supportsTextureHalfFloat=!0}}function at(t,e){if(t===tt.zO.WEBGL1&&"undefined"==typeof WebGLRenderingContext||t===tt.zO.WEBGL2&&"undefined"==typeof WebGL2RenderingContext)return null;const r=document.createElement("canvas");if(!r)return null;let s=(0,tt.kr)(r,t,{failIfMajorPerformanceCaveat:!0});if((0,a.Wi)(s)&&(s=(0,tt.kr)(r,t),(0,a.pC)(s)&&(e.majorPerformanceCaveat=!0)),(0,a.Wi)(s))return s;if(t===tt.zO.WEBGL1){const t=s.getParameter(s.VERSION)?.match(/^WebGL\s+([\d.]*)/);if(t){const r=parseFloat(t[1]);e.available=r>=.94}}else e.available=!0;e.maxTextureSize=s.getParameter(s.MAX_TEXTURE_SIZE),e.supportsVertexShaderSamplers=s.getParameter(s.MAX_VERTEX_TEXTURE_IMAGE_UNITS)>0;const i=s.getShaderPrecisionFormat(s.FRAGMENT_SHADER,s.HIGH_FLOAT);return i&&(e.supportsHighPrecisionFragment=i.precision>0),s}let ut=class extends((0,b.h)((0,T.M)((0,S.Z)((0,v.Y)((0,A.q)((0,x.I)((0,M.N)((0,w.V)((0,u.R)(_.Z)))))))))){constructor(...t){super(...t),this._spriteSourceMap=new Map,this.currentStyleInfo=null,this.style=null,this.isReference=null,this.operationalLayerType="VectorTileLayer",this.type="vector-tile",this.url=null,this.showCollisionBoxes="none",this.path=null}normalizeCtorArgs(t,e){return"string"==typeof t?{url:t,...e}:t}destroy(){if(this.sourceNameToSource)for(const t of Object.values(this.sourceNameToSource))t?.destroy();this._spriteSourceMap.clear()}async prefetchResources(t){await this.loadSpriteSource(globalThis.devicePixelRatio||1,t)}load(t){const e=this.loadFromPortal({supportedTypes:["Vector Tile Service"],supportsData:!1},t).catch(h.r9).then((async()=>{if(!this.portalItem||!this.portalItem.id)return;const e=`${this.portalItem.itemUrl}/resources/styles/root.json`;(await(0,i.default)(e,{...t,query:{f:"json",...this.customParameters,token:this.apiKey}})).data&&this.read({url:e},(0,Y.h)(this.portalItem))})).catch(h.r9).then((()=>this._loadStyle(t)));return this.addResolvingPromise(e),Promise.resolve(this)}get attributionDataUrl(){const t=this.currentStyleInfo,e=t&&t.serviceUrl&&(0,c.mN)(t.serviceUrl);if(!e)return null;const r=this._getDefaultAttribution(e.path);return r?(0,c.fl)(r,{...this.customParameters,token:this.apiKey}):null}get capabilities(){const t=this.primarySource;return t?t.capabilities:{operations:{supportsExportTiles:!1,supportsTileMap:!1},exportTiles:null}}get fullExtent(){return this.primarySource?.fullExtent||null}get parsedUrl(){return this.serviceUrl?(0,c.mN)(this.serviceUrl):null}get serviceUrl(){return this.currentStyleInfo&&this.currentStyleInfo.serviceUrl||null}get spatialReference(){return this.tileInfo&&this.tileInfo.spatialReference||null}get styleUrl(){return this.currentStyleInfo&&this.currentStyleInfo.styleUrl||null}writeStyleUrl(t,e){t&&(0,c.oC)(t)&&(t=`https:${t}`);const r=(0,a.Wg)((0,H.a)(t));e.styleUrl=(0,K.e)(t,r)}get tileInfo(){const t=[];for(const e in this.sourceNameToSource)t.push(this.sourceNameToSource[e]);let e=this.primarySource?.tileInfo||new P.Z;if(t.length>1)for(let r=0;r<t.length;r++)V(e,t[r].tileInfo)&&(e=J(e,t[r].tileInfo));return e}readVersion(t,e){return e.version?parseFloat(e.version):parseFloat(e.currentVersion)}async loadSpriteSource(t=1,e){if(!this._spriteSourceMap.has(t)){const r=st("2d").maxTextureSize,s=this.currentStyleInfo?.spriteUrl?(0,c.fl)(this.currentStyleInfo.spriteUrl,{...this.customParameters,token:this.apiKey}):null,i=new C({type:"url",spriteUrl:s,pixelRatio:t,spriteFormat:this.currentStyleInfo?.spriteFormat},r);await i.load(e),this._spriteSourceMap.set(t,i)}return this._spriteSourceMap.get(t)}async setSpriteSource(t,e){if(!t)return null;const r=st("2d").maxTextureSize,s=t.spriteUrl,i=s?(0,c.fl)(s,{...this.customParameters,token:this.apiKey}):null;if(!i&&"url"===t.type)return null;const n=new C(t,r);try{await n.load(e);const r=t.pixelRatio||1;return this._spriteSourceMap.clear(),this._spriteSourceMap.set(r,n),i&&this.currentStyleInfo&&(this.currentStyleInfo.spriteUrl=i),this.emit("spriteSource-change",{spriteSource:n}),n}catch(t){(0,h.r9)(t)}return null}async loadStyle(t,e){const r=t||this.style||this.url;return this._loadingTask&&"string"==typeof r&&this.url===r||(this._loadingTask?.abort(),this._loadingTask=(0,n.vr)((t=>(this._spriteSourceMap.clear(),this._getSourceAndStyle(r,{signal:t}))),e)),this._loadingTask.promise}getStyleLayerId(t){return this.styleRepository.getStyleLayerId(t)}getStyleLayerIndex(t){return this.styleRepository.getStyleLayerIndex(t)}getPaintProperties(t){return(0,l.d9)(this.styleRepository.getPaintProperties(t))}setPaintProperties(t,e){const r=this.styleRepository.isPainterDataDriven(t);this.styleRepository.setPaintProperties(t,e);const s=this.styleRepository.isPainterDataDriven(t);this.emit("paint-change",{layer:t,paint:e,isDataDriven:r||s})}getStyleLayer(t){return(0,l.d9)(this.styleRepository.getStyleLayer(t))}setStyleLayer(t,e){this.styleRepository.setStyleLayer(t,e),this.emit("style-layer-change",{layer:t,index:e})}deleteStyleLayer(t){this.styleRepository.deleteStyleLayer(t),this.emit("delete-style-layer",{layer:t})}getLayoutProperties(t){return(0,l.d9)(this.styleRepository.getLayoutProperties(t))}setLayoutProperties(t,e){this.styleRepository.setLayoutProperties(t,e),this.emit("layout-change",{layer:t,layout:e})}setStyleLayerVisibility(t,e){this.styleRepository.setStyleLayerVisibility(t,e),this.emit("style-layer-visibility-change",{layer:t,visibility:e})}getStyleLayerVisibility(t){return this.styleRepository.getStyleLayerVisibility(t)}write(t,e){return e?.origin&&!this.styleUrl?(e.messages&&e.messages.push(new o.Z("vectortilelayer:unsupported",`VectorTileLayer (${this.title}, ${this.id}) with style defined by JSON only are not supported`,{layer:this})),null):super.write(t,e)}getTileUrl(t,e,r){return null}async _getSourceAndStyle(t,e){if(!t)throw new Error("invalid style!");const r=await async function(t,e){const r={source:null,sourceBase:null,sourceUrl:null,validatedSource:null,style:null,styleBase:null,styleUrl:null,sourceNameToSource:{},primarySourceName:"",spriteFormat:"png"},[s,i]="string"==typeof t?[t,null]:[null,t.jsonUrl];await G(r,"esri",t,i,e);const n={layerDefinition:r.validatedSource,url:s,serviceUrl:r.sourceUrl,style:r.style,styleUrl:r.styleUrl,spriteUrl:r.style.sprite&&q(r.styleBase,r.style.sprite),spriteFormat:r.spriteFormat,glyphsUrl:r.style.glyphs&&q(r.styleBase,r.style.glyphs),sourceNameToSource:r.sourceNameToSource,primarySourceName:r.primarySourceName};return W(n.spriteUrl),W(n.glyphsUrl),n}(t,{...e,query:{...this.customParameters,token:this.apiKey}});"webp"===r.spriteFormat&&(await function(t){if(E)return E;const e={lossy:"UklGRiIAAABXRUJQVlA4IBYAAAAwAQCdASoBAAEADsD+JaQAA3AAAAAA",lossless:"UklGRhoAAABXRUJQVlA4TA0AAAAvAAAAEAcQERGIiP4HAA==",alpha:"UklGRkoAAABXRUJQVlA4WAoAAAAQAAAAAAAAAAAAQUxQSAwAAAARBxAR/Q9ERP8DAABWUDggGAAAABQBAJ0BKgEAAQAAAP4AAA3AAP7mtQAAAA==",animation:"UklGRlIAAABXRUJQVlA4WAoAAAASAAAAAAAAAAAAQU5JTQYAAAD/////AABBTk1GJgAAAAAAAAAAAAAAAAAAAGQAAABWUDhMDQAAAC8AAAAQBxAREYiI/gcA"};return E=new Promise((t=>{const r=new Image;r.onload=()=>{r.onload=r.onerror=null,t(r.width>0&&r.height>0)},r.onerror=()=>{r.onload=r.onerror=null,t(!1)},r.src="data:image/webp;base64,"+e.lossy})),E}()||(r.spriteFormat="png")),this._set("currentStyleInfo",{...r}),"string"==typeof t?(this.url=t,this.style=null):(this.url=null,this.style=t),this._set("sourceNameToSource",r.sourceNameToSource),this._set("primarySource",r.sourceNameToSource[r.primarySourceName]),this._set("styleRepository",new X.Z(r.style)),this.read(r.layerDefinition,{origin:"service"}),this.emit("load-style")}_getDefaultAttribution(t){const e=t.match(/^https?:\/\/(?:basemaps|basemapsbeta|basemapsdev)(?:-api)?\.arcgis\.com(\/[^\/]+)?\/arcgis\/rest\/services\/([^\/]+(\/[^\/]+)*)\/vectortileserver/i),r=["OpenStreetMap_v2","OpenStreetMap_Daylight_v2","OpenStreetMap_Export_v2","OpenStreetMap_FTS_v2","OpenStreetMap_GCS_v2","World_Basemap","World_Basemap_v2","World_Basemap_Export_v2","World_Basemap_GCS_v2","World_Basemap_WGS84","World_Contours_v2"];if(!e)return;const s=e[2]&&e[2].toLowerCase();if(!s)return;const i=e[1]||"";for(const t of r)if(t.toLowerCase().includes(s))return(0,c.Fv)(`//static.arcgis.com/attribution/Vector${i}/${t}`)}async _loadStyle(t){return this._loadingTask?.promise??this.loadStyle(null,t)}};(0,s._)([(0,p.Cb)({readOnly:!0})],ut.prototype,"attributionDataUrl",null),(0,s._)([(0,p.Cb)({type:["show","hide"]})],ut.prototype,"listMode",void 0),(0,s._)([(0,p.Cb)({json:{read:!0,write:!0}})],ut.prototype,"blendMode",void 0),(0,s._)([(0,p.Cb)({readOnly:!0,json:{read:!1}})],ut.prototype,"capabilities",null),(0,s._)([(0,p.Cb)({readOnly:!0})],ut.prototype,"currentStyleInfo",void 0),(0,s._)([(0,p.Cb)({json:{read:!1},readOnly:!0,type:m.Z})],ut.prototype,"fullExtent",null),(0,s._)([(0,p.Cb)()],ut.prototype,"style",void 0),(0,s._)([(0,p.Cb)({type:Boolean,json:{read:!1,write:{enabled:!0,overridePolicy:()=>({enabled:!1})}}})],ut.prototype,"isReference",void 0),(0,s._)([(0,p.Cb)({type:["VectorTileLayer"]})],ut.prototype,"operationalLayerType",void 0),(0,s._)([(0,p.Cb)({readOnly:!0})],ut.prototype,"parsedUrl",null),(0,s._)([(0,p.Cb)({readOnly:!0})],ut.prototype,"serviceUrl",null),(0,s._)([(0,p.Cb)({type:g.Z,readOnly:!0})],ut.prototype,"spatialReference",null),(0,s._)([(0,p.Cb)({readOnly:!0})],ut.prototype,"styleRepository",void 0),(0,s._)([(0,p.Cb)({readOnly:!0})],ut.prototype,"sourceNameToSource",void 0),(0,s._)([(0,p.Cb)({readOnly:!0})],ut.prototype,"primarySource",void 0),(0,s._)([(0,p.Cb)({type:String,readOnly:!0,json:{write:{ignoreOrigin:!0},origins:{"web-document":{write:{ignoreOrigin:!0,isRequired:!0}}}}})],ut.prototype,"styleUrl",null),(0,s._)([(0,y.c)(["portal-item","web-document"],"styleUrl")],ut.prototype,"writeStyleUrl",null),(0,s._)([(0,p.Cb)({json:{read:!1,origins:{service:{read:!1}}},readOnly:!0,type:P.Z})],ut.prototype,"tileInfo",null),(0,s._)([(0,p.Cb)({json:{read:!1},readOnly:!0,value:"vector-tile"})],ut.prototype,"type",void 0),(0,s._)([(0,p.Cb)({json:{origins:{"web-document":{read:{source:"styleUrl"}},"portal-item":{read:{source:"url"}}},write:!1,read:!1}})],ut.prototype,"url",void 0),(0,s._)([(0,p.Cb)({readOnly:!0})],ut.prototype,"version",void 0),(0,s._)([(0,d.r)("version",["version","currentVersion"])],ut.prototype,"readVersion",null),(0,s._)([(0,p.Cb)({type:String})],ut.prototype,"showCollisionBoxes",void 0),(0,s._)([(0,p.Cb)({type:String,json:{origins:{"web-scene":{read:!0,write:!0}},read:!1}})],ut.prototype,"path",void 0),ut=(0,s._)([(0,f.j)("esri.layers.VectorTileLayer")],ut);const ht=ut},54295:(t,e,r)=>{r.d(e,{V:()=>o});var s=r(43697),i=r(5600),n=(r(67676),r(75215),r(52011));const o=t=>{let e=class extends t{get apiKey(){return this._isOverridden("apiKey")?this._get("apiKey"):"portalItem"in this?this.portalItem?.apiKey:null}set apiKey(t){null!=t?this._override("apiKey",t):(this._clearOverride("apiKey"),this.clear("apiKey","user"))}};return(0,s._)([(0,i.Cb)({type:String})],e.prototype,"apiKey",null),e=(0,s._)([(0,n.j)("esri.layers.mixins.APIKeyMixin")],e),e}},46486:(t,e,r)=>{r.d(e,{Z:()=>h});var s=r(43697),i=(r(66577),r(5600)),n=(r(67676),r(75215),r(71715)),o=r(52011),l=r(45322),a=r(56608),u=r(82971);const h=t=>{let e=class extends t{constructor(){super(...arguments),this.copyright=null,this.minScale=0,this.maxScale=0,this.spatialReference=null,this.tileInfo=null,this.tilemapCache=null}readMinScale(t,e){return null!=e.minLOD&&null!=e.maxLOD?t:0}readMaxScale(t,e){return null!=e.minLOD&&null!=e.maxLOD?t:0}get supportsBlankTile(){return this.version>=10.2}readTilemapCache(t,e){return e.capabilities&&e.capabilities.includes("Tilemap")?new a.y({layer:this}):null}};return(0,s._)([(0,i.Cb)({json:{read:{source:"copyrightText"}}})],e.prototype,"copyright",void 0),(0,s._)([(0,i.Cb)()],e.prototype,"minScale",void 0),(0,s._)([(0,n.r)("service","minScale")],e.prototype,"readMinScale",null),(0,s._)([(0,i.Cb)()],e.prototype,"maxScale",void 0),(0,s._)([(0,n.r)("service","maxScale")],e.prototype,"readMaxScale",null),(0,s._)([(0,i.Cb)({type:u.Z})],e.prototype,"spatialReference",void 0),(0,s._)([(0,i.Cb)({readOnly:!0})],e.prototype,"supportsBlankTile",null),(0,s._)([(0,i.Cb)(l.h)],e.prototype,"tileInfo",void 0),(0,s._)([(0,i.Cb)()],e.prototype,"tilemapCache",void 0),(0,s._)([(0,n.r)("service","tilemapCache",["capabilities"])],e.prototype,"readTilemapCache",null),(0,s._)([(0,i.Cb)()],e.prototype,"version",void 0),e=(0,s._)([(0,o.j)("esri.layers.mixins.ArcGISCachedService")],e),e}},17287:(t,e,r)=>{r.d(e,{Y:()=>u});var s=r(43697),i=r(92604),n=r(70586),o=r(5600),l=(r(67676),r(75215),r(52011)),a=r(66677);const u=t=>{let e=class extends t{get title(){if(this._get("title")&&"defaults"!==this.originOf("title"))return this._get("title");if(this.url){const t=(0,a.Qc)(this.url);if((0,n.pC)(t)&&t.title)return t.title}return this._get("title")||""}set title(t){this._set("title",t)}set url(t){this._set("url",(0,a.Nm)(t,i.Z.getLogger(this.declaredClass)))}};return(0,s._)([(0,o.Cb)()],e.prototype,"title",null),(0,s._)([(0,o.Cb)({type:String})],e.prototype,"url",null),e=(0,s._)([(0,l.j)("esri.layers.mixins.ArcGISService")],e),e}},17017:(t,e,r)=>{r.d(e,{N:()=>o});var s=r(43697),i=r(5600),n=(r(67676),r(75215),r(52011));const o=t=>{let e=class extends t{constructor(){super(...arguments),this.customParameters=null}};return(0,s._)([(0,i.Cb)({type:Object,json:{write:{overridePolicy:t=>({enabled:!!(t&&Object.keys(t).length>0)})}}})],e.prototype,"customParameters",void 0),e=(0,s._)([(0,n.j)("esri.layers.mixins.CustomParametersMixin")],e),e}},16859:(t,e,r)=>{r.d(e,{I:()=>w});var s=r(43697),i=r(40330),n=r(3172),o=r(66643),l=r(20102),a=r(92604),u=r(70586),h=r(95330),c=r(17452),p=r(5600),d=(r(67676),r(75215),r(71715)),f=r(52011),y=r(30556),m=r(65587),g=r(15235),_=r(86082);const w=t=>{let e=class extends t{constructor(){super(...arguments),this.resourceReferences={portalItem:null,paths:[]},this.userHasEditingPrivileges=!0}destroy(){this.portalItem=(0,u.SC)(this.portalItem)}set portalItem(t){t!==this._get("portalItem")&&(this.removeOrigin("portal-item"),this._set("portalItem",t))}readPortalItem(t,e,r){if(e.itemId)return new g.default({id:e.itemId,portal:r&&r.portal})}writePortalItem(t,e){t&&t.id&&(e.itemId=t.id)}async loadFromPortal(t,e){if(this.portalItem&&this.portalItem.id)try{const s=await Promise.all([r.e(4547),r.e(9300),r.e(661)]).then(r.bind(r,18062));return(0,h.k_)(e),await s.load({instance:this,supportedTypes:t.supportedTypes,validateItem:t.validateItem,supportsData:t.supportsData,layerModuleTypeMap:t.layerModuleTypeMap},e)}catch(t){throw(0,h.D_)(t)||a.Z.getLogger(this.declaredClass).warn(`Failed to load layer (${this.title}, ${this.id}) portal item (${this.portalItem.id})\n  ${t}`),t}}async finishLoadEditablePortalLayer(t){this._set("userHasEditingPrivileges",await this._fetchUserHasEditingPrivileges(t).catch((t=>((0,h.r9)(t),!0))))}async _fetchUserHasEditingPrivileges(t){const e=this.url?i.id?.findCredential(this.url):null;if(!e)return!0;const r=S.credential===e?S.user:await this._fetchEditingUser(t);return S.credential=e,S.user=r,(0,u.Wi)(r)||null==r.privileges||r.privileges.includes("features:user:edit")}async _fetchEditingUser(t){const e=this.portalItem?.portal?.user;if(e)return e;const r=i.id.findServerInfo(this.url??"");if(!r?.owningSystemUrl)return null;const s=`${r.owningSystemUrl}/sharing/rest`,l=m.Z.getDefault();if(l&&l.loaded&&(0,c.Fv)(l.restUrl)===(0,c.Fv)(s))return l.user;const a=`${s}/community/self`,h=(0,u.pC)(t)?t.signal:null,p=await(0,o.q6)((0,n.default)(a,{authMode:"no-prompt",query:{f:"json"},signal:h}));return p.ok?_.default.fromJSON(p.value.data):null}read(t,e){e&&(e.layer=this),super.read(t,e)}write(t,e){const r=e&&e.portal,s=this.portalItem&&this.portalItem.id&&(this.portalItem.portal||m.Z.getDefault());return r&&s&&!(0,c.tm)(s.restUrl,r.restUrl)?(e.messages&&e.messages.push(new l.Z("layer:cross-portal",`The layer '${this.title} (${this.id})' cannot be persisted because it refers to an item on a different portal than the one being saved to. To save, set layer.portalItem to null or save to the same portal as the item associated with the layer`,{layer:this})),null):super.write(t,{...e,layer:this})}};return(0,s._)([(0,p.Cb)({type:g.default})],e.prototype,"portalItem",null),(0,s._)([(0,d.r)("web-document","portalItem",["itemId"])],e.prototype,"readPortalItem",null),(0,s._)([(0,y.c)("web-document","portalItem",{itemId:{type:String}})],e.prototype,"writePortalItem",null),(0,s._)([(0,p.Cb)({clonable:!1})],e.prototype,"resourceReferences",void 0),(0,s._)([(0,p.Cb)({readOnly:!0})],e.prototype,"userHasEditingPrivileges",void 0),e=(0,s._)([(0,f.j)("esri.layers.mixins.PortalLayer")],e),e},S={credential:null,user:null}},33516:(t,e,r)=>{r.d(e,{Y:()=>o,h:()=>n});var s=r(17452),i=r(65587);function n(t){return{origin:"portal-item",url:(0,s.mN)(t.itemUrl),portal:t.portal||i.Z.getDefault(),portalItem:t,readResourcePaths:[]}}function o(t){return{origin:"portal-item",messages:[],writtenProperties:[],url:t.itemUrl?(0,s.mN)(t.itemUrl):null,portal:t.portal||i.Z.getDefault(),portalItem:t}}},55415:(t,e,r)=>{r.d(e,{Z:()=>i});var s=r(71143);class i{constructor(t,e,r,s){this.set(t,e,r,s)}static getId(t,e,r,s){return"object"==typeof t?`${t.level}/${t.row}/${t.col}/${t.world}`:`${t}/${e}/${r}/${s}`}get key(){return this}get id(){return this.toString()}set id(t){this.set(t)}get hash(){const t=4095&this.row,e=4095&this.col,r=63&this.level;return(3&this.world)<<30|e<<22|t<<8|r}acquire(t,e,r,s){this.set(t,e,r,s)}contains(t){const e=t.level-this.level;return e>=0&&this.row===t.row>>e&&this.col===t.col>>e&&this.world===t.world}equals(t){return this.level===t.level&&this.row===t.row&&this.col===t.col&&this.world===t.world}clone(){return new i(this)}release(){this.level=0,this.row=0,this.col=0,this.world=0}set(t,e,r,s){if(null==t)this.level=0,this.row=0,this.col=0,this.world=0;else if("object"==typeof t)this.level=t.level||0,this.row=t.row||0,this.col=t.col||0,this.world=t.world||0;else if("string"==typeof t){const[e,r,s,i]=t.split("/");this.level=parseFloat(e),this.row=parseFloat(r),this.col=parseFloat(s),this.world=parseFloat(i)}else this.level=+t,this.row=+e,this.col=+r,this.world=+s||0;return this}toString(){return`${this.level}/${this.row}/${this.col}/${this.world}`}getParentKey(){return this.level<=0?null:new i(this.level-1,this.row>>1,this.col>>1,this.world)}getChildKeys(){const t=this.level+1,e=this.row<<1,r=this.col<<1,s=this.world;return[new i(t,e,r,s),new i(t,e,r+1,s),new i(t,e+1,r,s),new i(t,e+1,r+1,s)]}compareRowMajor(t){return this.row<t.row?-1:this.row>t.row?1:this.col<t.col?-1:this.col>t.col?1:0}}i.pool=new s.Z(i,null,null,25,50)},54738:(t,e,r)=>{r.d(e,{Sh:()=>o,kr:()=>l,zO:()=>s});var s,i,n=r(80442);function o(t){const e=(0,n.Z)("esri-force-webgl");if(e===s.WEBGL1||e===s.WEBGL2)return[e];switch(t){case"2d":return(0,n.Z)("mac")&&(0,n.Z)("chrome")?[s.WEBGL1,s.WEBGL2]:[s.WEBGL2,s.WEBGL1];case"3d":return[s.WEBGL2,s.WEBGL1]}}function l(t,e,r={}){const i=e===s.WEBGL1?["webgl","experimental-webgl","webkit-3d","moz-webgl"]:["webgl2"];let n=null;for(const e of i){try{n=t.getContext(e,r)}catch(t){}if(n)break}return n}(i=s||(s={}))[i.WEBGL1=1]="WEBGL1",i[i.WEBGL2=2]="WEBGL2"}}]);