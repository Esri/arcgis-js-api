self.webpackChunkRemoteClient([38,62],{126:function(e,t,i){"use strict";var r,a=i(18),s=(i(7),i(3),i(4)),l=i(20),n=i(54),o=i(52),c=i(19),u=i(51),p=(i(24),i(34),i(35),i(50)),d=i(78),b=i(56),h=i(129),y=i(64),f=(i(59),i(67)),O=i(114),m=i(176);const v=new n.a({PNG:"png",PNG8:"png8",PNG24:"png24",PNG32:"png32",JPEG:"jpg",JPG:"jpg",DIB:"dib",TIFF:"tiff",EMF:"emf",PS:"ps",PDF:"pdf",GIF:"gif",SVG:"svg",SVGZ:"svgz",Mixed:"mixed",MIXED:"mixed",LERC:"lerc",LERC2D:"lerc2d",RAW:"raw",pbf:"pbf"});let j=r=class extends p.a{constructor(e){super(e),this.dpi=96,this.format=null,this.origin=null,this.minScale=0,this.maxScale=0,this.size=null,this.spatialReference=null}static create(e={size:256,spatialReference:b.a.WebMercator}){const t=e.resolutionFactor||1,i=e.scales,a=e.size||256,s=e.spatialReference||b.a.WebMercator;if(!Object(d.i)(s)){const e=[];if(i)for(let t=0;t<i.length;t++){const r=i[t];e.push({level:t,scale:r,resolution:r})}else{let t=5e-4;for(let i=23;i>=0;i--)e.unshift({level:i,scale:t,resolution:t}),t*=2}return new r({dpi:96,lods:e,origin:new y.a(0,0,s),size:[a,a],spatialReference:s})}const l=Object(d.d)(s),n=e.origin?new y.a({x:e.origin.x,y:e.origin.y,spatialReference:s}):new y.a(l?{x:l.origin[0],y:l.origin[1],spatialReference:s}:{x:0,y:0,spatialReference:s}),o=1/(39.37*Object(f.b)(s)*96),c=[];if(i)for(let e=0;e<i.length;e++){const t=i[e],r=t*o;c.push({level:e,scale:t,resolution:r})}else{let e=Object(d.f)(s)?512/a*591657527.5917094:256/a*591657527.591555;const i=Math.ceil(24/t);c.push({level:0,scale:e,resolution:e*o});for(let r=1;r<i;r++){const i=e/Math.pow(2,t),a=i*o;c.push({level:r,scale:i,resolution:a}),e=i}}return new r({dpi:96,lods:c,origin:n,size:[a,a],spatialReference:s})}get isWrappable(){const{spatialReference:e,origin:t}=this;if(e&&t){const i=Object(d.d)(e);return e.isWrappable&&Math.abs(i.origin[0]-t.x)<=i.dx}return!1}readOrigin(e,t){return y.a.fromJSON({spatialReference:t.spatialReference,...e})}set lods(e){let t=0,i=0;const r=[];this._levelToLOD={},e&&(t=-1/0,i=1/0,e.forEach(e=>{r.push(e.scale),t=e.scale>t?e.scale:t,i=e.scale<i?e.scale:i,this._levelToLOD[e.level]=e})),this._set("scales",r),this._set("minScale",t),this._set("maxScale",i),this._set("lods",e),this._initializeUpsampleLevels()}readSize(e,t){return[t.cols,t.rows]}writeSize(e,t){t.cols=e[0],t.rows=e[0]}zoomToScale(e){const t=this.scales;if(e<=0)return t[0];if(e>=t.length)return t[t.length-1];{const i=Math.round(e-.5),r=Math.round(e);return t[r]+(r-e)*(t[i]-t[r])}}scaleToZoom(e){const t=this.scales,i=t.length-1;let r=0;for(;r<i;r++){const i=t[r],a=t[r+1];if(i<=e)return r;if(a===e)return r+1;if(i>e&&a<e)return r+1-(e-a)/(i-a)}return r}snapScale(e,t=.95){const i=this.scaleToZoom(e);return i%Math.floor(i)>=t?this.zoomToScale(Math.ceil(i)):this.zoomToScale(Math.floor(i))}tileAt(e,t,i,r){const a=this.lodAt(e);if(!a)return null;let s,l;if("number"==typeof t)s=t,l=i;else if(Object(d.c)(t.spatialReference,this.spatialReference))s=t.x,l=t.y,r=i;else{const e=Object(h.d)(t,this.spatialReference);if(!e)return null;s=e.x,l=e.y,r=i}const n=a.resolution*this.size[0],o=a.resolution*this.size[1];return r||(r={id:null,level:0,row:0,col:0,extent:Object(O.c)()}),r.level=e,r.row=Math.floor((this.origin.y-l)/o+.001),r.col=Math.floor((s-this.origin.x)/n+.001),this.updateTileInfo(r),r}updateTileInfo(e){const t=this.lodAt(e.level);if(!t)return;const i=t.resolution*this.size[0],r=t.resolution*this.size[1];e.id=`${e.level}/${e.row}/${e.col}`,e.extent||(e.extent=Object(O.c)()),e.extent[0]=this.origin.x+e.col*i,e.extent[1]=this.origin.y-(e.row+1)*r,e.extent[2]=e.extent[0]+i,e.extent[3]=e.extent[1]+r}upsampleTile(e){const t=this._upsampleLevels[e.level];return!(!t||-1===t.parentLevel||(e.level=t.parentLevel,e.row=Math.floor(e.row/t.factor+.001),e.col=Math.floor(e.col/t.factor+.001),this.updateTileInfo(e),0))}getTileBounds(e,t){const{resolution:i}=this.lodAt(t.level),r=i*this.size[0],a=i*this.size[1];return e[0]=this.origin.x+t.col*r,e[1]=this.origin.y-(t.row+1)*a,e[2]=e[0]+r,e[3]=e[1]+a,e}lodAt(e){return this._levelToLOD&&this._levelToLOD[e]||null}clone(){return r.fromJSON(this.write({}))}_initializeUpsampleLevels(){const e=this.lods;this._upsampleLevels=[];let t=null;for(let i=0;i<e.length;i++){const r=e[i];this._upsampleLevels[r.level]={parentLevel:t?t.level:-1,factor:t?t.resolution/r.resolution:0},t=r}}};Object(a.a)([Object(l.b)({type:Number,json:{write:!0}})],j.prototype,"compressionQuality",void 0),Object(a.a)([Object(l.b)({type:Number,json:{write:!0}})],j.prototype,"dpi",void 0),Object(a.a)([Object(l.b)({type:String,json:{read:v.read,write:v.write,origins:{"web-scene":{read:!1,write:!1}}}})],j.prototype,"format",void 0),Object(a.a)([Object(l.b)({readOnly:!0,dependsOn:["spatialReference","origin"]})],j.prototype,"isWrappable",null),Object(a.a)([Object(l.b)({type:y.a,json:{write:!0}})],j.prototype,"origin",void 0),Object(a.a)([Object(o.a)("origin")],j.prototype,"readOrigin",null),Object(a.a)([Object(l.b)({type:[m.a],value:null,json:{write:!0}})],j.prototype,"lods",null),Object(a.a)([Object(l.b)({readOnly:!0})],j.prototype,"minScale",void 0),Object(a.a)([Object(l.b)({readOnly:!0})],j.prototype,"maxScale",void 0),Object(a.a)([Object(l.b)({readOnly:!0})],j.prototype,"scales",void 0),Object(a.a)([Object(l.b)({cast:e=>Array.isArray(e)?e:"number"==typeof e?[e,e]:[256,256]})],j.prototype,"size",void 0),Object(a.a)([Object(o.a)("size",["rows","cols"])],j.prototype,"readSize",null),Object(a.a)([Object(u.a)("size",{cols:{type:s.a},rows:{type:s.a}})],j.prototype,"writeSize",null),Object(a.a)([Object(l.b)({type:b.a,json:{write:!0}})],j.prototype,"spatialReference",void 0),j=r=Object(a.a)([Object(c.a)("esri.layers.support.TileInfo")],j);var g=j;t.a=g},131:function(e,t,i){"use strict";i.d(t,"a",(function(){return u})),i.d(t,"b",(function(){return c}));var r=i(18),a=i(20),s=i(19),l=i(25),n=i(80),o=i(211);const c=e=>{let t=class extends e{destroy(){this.destroyed||(this.handles.destroy(),this.updatingHandles.destroy())}get handles(){return this._get("handles")||new n.a}get updatingHandles(){return this._get("updatingHandles")||new o.a}};return Object(r.a)([Object(a.b)({readOnly:!0})],t.prototype,"handles",null),Object(r.a)([Object(a.b)({readOnly:!0})],t.prototype,"updatingHandles",null),t=Object(r.a)([Object(s.a)("esri.core.HandleOwner")],t),t};let u=class extends(c(l.a)){};u=Object(r.a)([Object(s.a)("esri.core.HandleOwner")],u)},134:function(e,t,i){"use strict";var r=i(18),a=(i(7),i(5)),s=(i(3),i(4),i(20)),l=i(54),n=i(19),o=i(51),c=(i(24),i(34),i(35),i(50));const u=new l.a({esriFeatureEditToolAutoCompletePolygon:"auto-complete-polygon",esriFeatureEditToolCircle:"circle",esriFeatureEditToolEllipse:"ellipse",esriFeatureEditToolFreehand:"freehand",esriFeatureEditToolLine:"line",esriFeatureEditToolNone:"none",esriFeatureEditToolPoint:"point",esriFeatureEditToolPolygon:"polygon",esriFeatureEditToolRectangle:"rectangle",esriFeatureEditToolArrow:"arrow",esriFeatureEditToolTriangle:"triangle",esriFeatureEditToolLeftArrow:"left-arrow",esriFeatureEditToolRightArrow:"right-arrow",esriFeatureEditToolUpArrow:"up-arrow",esriFeatureEditToolDownArrow:"down-arrow"});let p=class extends c.a{constructor(e){super(e),this.name=null,this.description=null,this.drawingTool=null,this.prototype=null,this.thumbnail=null}writeDrawingTool(e,t){t.drawingTool=u.toJSON(e)}writePrototype(e,t){t.prototype=Object(a.c)(Object(a.a)(e),!0)}writeThumbnail(e,t){t.thumbnail=Object(a.c)(Object(a.a)(e))}};Object(r.a)([Object(s.b)({json:{write:!0}})],p.prototype,"name",void 0),Object(r.a)([Object(s.b)({json:{write:!0}})],p.prototype,"description",void 0),Object(r.a)([Object(s.b)({json:{read:u.read,write:u.write}})],p.prototype,"drawingTool",void 0),Object(r.a)([Object(o.a)("drawingTool")],p.prototype,"writeDrawingTool",null),Object(r.a)([Object(s.b)({json:{write:!0}})],p.prototype,"prototype",void 0),Object(r.a)([Object(o.a)("prototype")],p.prototype,"writePrototype",null),Object(r.a)([Object(s.b)({json:{write:!0}})],p.prototype,"thumbnail",void 0),Object(r.a)([Object(o.a)("thumbnail")],p.prototype,"writeThumbnail",null),p=Object(r.a)([Object(n.a)("esri.layers.support.FeatureTemplate")],p);var d=p;t.a=d},152:function(e,t,i){"use strict";i.d(t,"a",(function(){return w})),i.d(t,"b",(function(){return h})),i.d(t,"c",(function(){return y})),i.d(t,"d",(function(){return f})),i.d(t,"e",(function(){return O})),i.d(t,"f",(function(){return j})),i.d(t,"g",(function(){return b}));var r=i(79),a=i(1),s=i(3),l=i(60),n=i(74),o=i(73),c=i(96);const u=s.a.getLogger("esri.renderers.visualVariables.support.visualVariableUtils"),p=new n.a,d=Math.PI,b=/^\s*(return\s+)?\$view\.scale\s*(;)?\s*$/i;function h(e,t,i){const r="visualVariables"in e&&e.visualVariables?e.visualVariables.filter(e=>"color"===e.type)[0]:e;if(!r)return;if("esri.renderers.visualVariables.ColorVariable"!==r.declaredClass)return void u.warn("The visualVariable should be an instance of esri.renderers.visualVariables.ColorVariable");const s="number"==typeof t,n=s?null:t,o=n&&n.attributes;let c=s?t:null;const p=r.field,{ipData:d,hasExpression:b}=r.cache;let h=r.cache.compiledFunc;if(!p&&!b){const e=r.stops;return e&&e[0]&&e[0].color}if("number"!=typeof c)if(b){if(!Object(a.g)(i)||!Object(a.g)(i.arcade))return void u.error("Use of arcade expressions requires an arcade context");const e={viewingMode:i.viewingMode,scale:i.scale,spatialReference:i.spatialReference},t=i.arcade.arcadeUtils,s=t.getViewInfo(e),l=t.createExecContext(n,s);if(!h){const e=t.createSyntaxTree(r.valueExpression);h=t.createFunction(e),r.cache.compiledFunc=h}c=t.executeFunction(h,l)}else o&&(c=o[p]);const y=r.normalizationField,f=o?parseFloat(o[y]):void 0;if(null!=c&&(!y||s||!isNaN(f)&&0!==f)){isNaN(f)||s||(c/=f);const e=g(c,d);if(e){const t=e[0],s=e[1],n=t===s?r.stops[t].color:l.a.blendColors(r.stops[t].color,r.stops[s].color,e[2],Object(a.g)(i)?i.color:void 0);return new l.a(n)}}}function y(e,t,i){const r="visualVariables"in e&&e.visualVariables?e.visualVariables.filter(e=>"opacity"===e.type)[0]:e;if(!r)return;if("esri.renderers.visualVariables.OpacityVariable"!==r.declaredClass)return void u.warn("The visualVariable should be an instance of esri.renderers.visualVariables.OpacityVariable");const s="number"==typeof t,l=s?null:t,n=l&&l.attributes;let o=s?t:null;const c=r.field,{ipData:p,hasExpression:d}=r.cache;let b=r.cache.compiledFunc;if(!c&&!d){const e=r.stops;return e&&e[0]&&e[0].opacity}if("number"!=typeof o)if(d){if(Object(a.f)(i)||Object(a.f)(i.arcade))return void u.error("Use of arcade expressions requires an arcade context");const e={viewingMode:i.viewingMode,scale:i.scale,spatialReference:i.spatialReference},t=i.arcade.arcadeUtils,s=t.getViewInfo(e),n=t.createExecContext(l,s);if(!b){const e=t.createSyntaxTree(r.valueExpression);b=t.createFunction(e),r.cache.compiledFunc=b}o=t.executeFunction(b,n)}else n&&(o=n[c]);const h=r.normalizationField,y=n?parseFloat(n[h]):void 0;if(null!=o&&(!h||s||!isNaN(y)&&0!==y)){isNaN(y)||s||(o/=y);const e=g(o,p);if(e){const t=e[0],i=e[1];if(t===i)return r.stops[t].opacity;{const a=r.stops[t].opacity;return a+(r.stops[i].opacity-a)*e[2]}}}}function f(e,t,i){const r="visualVariables"in e&&e.visualVariables?e.visualVariables.filter(e=>"rotation"===e.type)[0]:e;if(!r)return;if("esri.renderers.visualVariables.RotationVariable"!==r.declaredClass)return void u.warn("The visualVariable should be an instance of esri.renderers.visualVariables.RotationVariable");const s=r.axis||"heading",l="heading"===s&&"arithmetic"===r.rotationType?90:0,n="heading"===s&&"arithmetic"===r.rotationType?-1:1,o="number"==typeof t?null:t,c=o&&o.attributes,p=r.field,{hasExpression:d}=r.cache;let b=r.cache.compiledFunc,h=0;if(!p&&!d)return h;if(d){if(Object(a.f)(i)||Object(a.f)(i.arcade))return void u.error("Use of arcade expressions requires an arcade context");const e={viewingMode:i.viewingMode,scale:i.scale,spatialReference:i.spatialReference},t=i.arcade.arcadeUtils,s=t.getViewInfo(e),l=t.createExecContext(o,s);if(!b){const e=t.createSyntaxTree(r.valueExpression);b=t.createFunction(e),r.cache.compiledFunc=b}h=t.executeFunction(b,l)}else c&&(h=c[p]||0);return h="number"!=typeof h||isNaN(h)?null:l+n*h,h}function O(e,t,i){const r="visualVariables"in e&&e.visualVariables?e.visualVariables.filter(e=>"size"===e.type)[0]:e;if(!r)return;if("esri.renderers.visualVariables.SizeVariable"!==r.declaredClass)return void u.warn("The visualVariable should be an instance of esri.renderers.visualVariables.SizeVariable");const s=function(e,t,i,r,s){switch(t.transformationType){case"additive":return function(e,t,i,r){return e+(m(t.minSize,i,r)||t.minDataValue)}(e,t,i,r);case"constant":return function(e,t,i){const r=e.stops;let a=r&&r.length&&r[0].size;return null==a&&(a=e.minSize),m(a,t,i)}(t,i,r);case"clamped-linear":return function(e,t,i,r){const s=(e-t.minDataValue)/(t.maxDataValue-t.minDataValue),l=m(t.minSize,i,r),n=m(t.maxSize,i,r),o=Object(a.g)(r)?r.shape:void 0;if(e<=t.minDataValue)return l;if(e>=t.maxDataValue)return n;if("area"===t.scaleBy&&o){const e="circle"===o,t=e?d*Math.pow(l/2,2):l*l,i=t+s*((e?d*Math.pow(n/2,2):n*n)-t);return e?2*Math.sqrt(i/d):Math.sqrt(i)}return l+s*(n-l)}(e,t,i,r);case"proportional":return function(e,t,i,r){const s=Object(a.g)(r)?r.shape:void 0,l=e/t.minDataValue,n=m(t.minSize,i,r),o=m(t.maxSize,i,r);let c=null;return c="circle"===s?2*Math.sqrt(l*Math.pow(n/2,2)):"square"===s||"diamond"===s||"image"===s?Math.sqrt(l*Math.pow(n,2)):l*n,v(c,n,o)}(e,t,i,r);case"stops":return function(e,t,i,r,a){const[s,l,n]=g(e,a);if(s===l)return m(t.stops[s].size,i,r);{const e=m(t.stops[s].size,i,r);return e+(m(t.stops[l].size,i,r)-e)*n}}(e,t,i,r,s);case"real-world-size":return function(e,t,i,r){const s=(Object(a.g)(r)&&r.resolution?r.resolution:1)*o.a[t.valueUnit],l=m(t.minSize,i,r),n=m(t.maxSize,i,r),{valueRepresentation:c}=t;let u=null;return u="area"===c?2*Math.sqrt(e/d)/s:"radius"===c||"distance"===c?2*e/s:e/s,v(u,l,n)}(e,t,i,r);case"identity":return e;case"unknown":return null}}(function(e,t,i){const r="number"==typeof t,s=r?null:t,l=s&&s.attributes;let n=r?t:null;const{isScaleDriven:o}=e.cache;let p=e.cache.compiledFunc;if(o){const t=Object(a.g)(i)?i.scale:void 0,r=Object(a.g)(i)?i.view:void 0;n=null==t||"3d"===r?function(e){let t=null,i=null;const r=e.stops;return r?(t=r[0].value,i=r[r.length-1].value):(t=e.minDataValue||0,i=e.maxDataValue||0),(t+i)/2}(e):t}else if(!r)switch(e.inputValueType){case"expression":{if(Object(a.f)(i)||Object(a.f)(i.arcade))return void u.error("Use of arcade expressions requires an arcade context");const t={viewingMode:i.viewingMode,scale:i.scale,spatialReference:i.spatialReference},r=i.arcade.arcadeUtils,l=r.getViewInfo(t),o=r.createExecContext(s,l);if(!p){const t=r.createSyntaxTree(e.valueExpression);p=r.createFunction(t),e.cache.compiledFunc=p}n=r.executeFunction(p,o);break}case"field":l&&(n=l[e.field]);break;case"unknown":n=null}if(!Object(c.d)(n))return null;if(r||!e.normalizationField)return n;const d=l?parseFloat(l[e.normalizationField]):null;return Object(c.d)(d)&&0!==d?n/d:null}(r,t,i),r,t,i,r.cache.ipData);return null==s||isNaN(s)?0:s}function m(e,t,i){return null==e?null:Object(c.c)(e)?O(e,t,i):Object(c.d)(e)?e:null}function v(e,t,i){return Object(c.d)(i)&&e>i?i:Object(c.d)(t)&&e<t?t:e}function j(e,t,i){const{isScaleDriven:r}=e.cache;if(!(r&&"3d"===i||t))return null;const a={scale:t,view:i};let s=m(e.minSize,p,a),l=m(e.maxSize,p,a);if(null!=s||null!=l){if(s>l){const e=l;l=s,s=e}return{minSize:s,maxSize:l}}}function g(e,t){if(!t)return;let i=0,r=t.length-1;return t.some((t,a)=>e<t?(r=a,!0):(i=a,!1)),[i,r,(e-t[i])/(t[r]-t[i])]}function w(e,t,i){const a=["proportional","proportional","proportional"];for(const s of e){const e=s.useSymbolValue?"symbol-value":O(s,t,i);switch(s.axis){case"width":a[0]=e;break;case"depth":a[1]=e;break;case"height":a[2]=e;break;case"width-and-depth":a[0]=e,a[1]=e;break;case"all":case void 0:case null:a[0]=e,a[1]=e,a[2]=e;break;default:Object(r.a)(s.axis)}}return a}},168:function(e,t,i){"use strict";var r=i(18),a=(i(7),i(5)),s=(i(3),i(4),i(20)),l=i(52),n=i(19),o=i(51),c=(i(24),i(34),i(35),i(50)),u=i(120),p=i(116),d=i(117),b=(i(142),i(134));let h=class extends c.a{constructor(e){super(e),this.id=null,this.name=null,this.domains=null,this.templates=null}readDomains(e){const t={};for(const i in e)if(e.hasOwnProperty(i)){const r=e[i];switch(r.type){case"range":t[i]=d.a.fromJSON(r);break;case"codedValue":t[i]=u.a.fromJSON(r);break;case"inherited":t[i]=p.a.fromJSON(r)}}return t}writeDomains(e,t){const i={};for(const t in e)e.hasOwnProperty(t)&&(i[t]=e[t]&&e[t].toJSON());Object(a.c)(i),t.domains=i}readTemplates(e){return e&&e.map(e=>new b.a(e))}writeTemplates(e,t){t.templates=e&&e.map(e=>e.toJSON())}};Object(r.a)([Object(s.b)({json:{write:!0}})],h.prototype,"id",void 0),Object(r.a)([Object(s.b)({json:{write:!0}})],h.prototype,"name",void 0),Object(r.a)([Object(s.b)({json:{write:!0}})],h.prototype,"domains",void 0),Object(r.a)([Object(l.a)("domains")],h.prototype,"readDomains",null),Object(r.a)([Object(o.a)("domains")],h.prototype,"writeDomains",null),Object(r.a)([Object(s.b)({json:{write:!0}})],h.prototype,"templates",void 0),Object(r.a)([Object(l.a)("templates")],h.prototype,"readTemplates",null),Object(r.a)([Object(o.a)("templates")],h.prototype,"writeTemplates",null),h=Object(r.a)([Object(n.a)("esri.layers.support.FeatureType")],h);var y=h;t.a=y},169:function(e,t,i){"use strict";var r=i(18),a=i(20),s=i(19),l=i(58),n=i(80);let o=class extends l.a{constructor(e){super(e),this._handles=new n.a,this.root=null}initialize(){this._handles.add(this.rootCollectionNames.map(e=>this.watch("root."+e,()=>this.updateCollections(),!0))),this.updateCollections()}destroy(){this.root=null,this.refresh(),this._handles.destroy(),this._handles=null}updateCollections(){this._collections=this.rootCollectionNames.map(e=>this.get("root."+e)).filter(e=>null!=e),this.refresh()}refresh(){const e=this._handles;e.remove("collections");const t=new Array;let i=0;for(const e of this._collections)i=this._processCollection(t,i,e);this.splice(i,this.length);for(const i of t)e.add(i.on("after-changes",()=>this.refresh()),"collections")}_createNewInstance(e){return new l.a(e)}_processCollection(e,t,i){return i?(e.push(i),i.forEach(i=>{if(i){if(!this.itemFilterFunction||this.itemFilterFunction(i)){const e=this.indexOf(i,t);e>=0?e!==t&&this.reorder(i,t):this.add(i,t),++t}this.getChildrenFunction&&(t=this._processCollection(e,t,this.getChildrenFunction(i)))}}),t):t}};Object(r.a)([Object(a.b)()],o.prototype,"rootCollectionNames",void 0),Object(r.a)([Object(a.b)()],o.prototype,"root",void 0),Object(r.a)([Object(a.b)()],o.prototype,"getChildrenFunction",void 0),Object(r.a)([Object(a.b)()],o.prototype,"itemFilterFunction",void 0),o=Object(r.a)([Object(s.a)("esri.core.CollectionFlattener")],o);var c=o;t.a=c},176:function(e,t,i){"use strict";var r,a=i(18),s=(i(7),i(3),i(4)),l=i(20),n=i(19),o=(i(24),i(34),i(35),i(50));let c=r=class extends o.a{constructor(e){super(e),this.level=0,this.levelValue=null,this.resolution=0,this.scale=0}clone(){return new r({level:this.level,levelValue:this.levelValue,resolution:this.resolution,scale:this.scale})}};Object(a.a)([Object(l.b)({type:s.a,json:{write:!0}})],c.prototype,"level",void 0),Object(a.a)([Object(l.b)({type:String,json:{write:!0}})],c.prototype,"levelValue",void 0),Object(a.a)([Object(l.b)({type:Number,json:{write:!0}})],c.prototype,"resolution",void 0),Object(a.a)([Object(l.b)({type:Number,json:{write:!0}})],c.prototype,"scale",void 0),c=r=Object(a.a)([Object(n.a)("esri.layers.support.LOD")],c);var u=c;t.a=u},181:function(e,t,i){"use strict";i.d(t,"a",(function(){return l}));var r=i(18),a=(i(7),i(3),i(4),i(20)),s=i(19);i(24),i(34),i(35);const l=e=>{let t=class extends e{constructor(){super(...arguments),this.customParameters=null}};return Object(r.a)([Object(a.b)({json:{write:!0,origins:{"web-scene":{write:!1}}}})],t.prototype,"customParameters",void 0),t=Object(r.a)([Object(s.a)("esri.layers.mixins.CustomParametersMixin")],t),t}},211:function(e,t,i){"use strict";i.d(t,"a",(function(){return d}));var r=i(18),a=i(8),s=i(20),l=i(19),n=i(39),o=i(32),c=i(25),u=i(80),p=i(36);let d=class extends c.a{constructor(){super(...arguments),this.updating=!1,this.handleId=0,this.handles=new u.a,this.scheduleHandleId=0,this.pendingPromises=new Set}destroy(){this.removeAll(),this.handles.destroy()}add(e,t,i,r=0){const a=0!=(1&r),s=++this.handleId;a||this.installSyncUpdatingWatch(e,t,s);const l=0!=(2&r)?Object(p.a)(e,t,i,a):e.watch(t,i,a);return this.handles.add(l,s),{remove:()=>{this.handles.remove(s)}}}addOnCollectionPropertyChange(e,t,i,r=0){const a=0!=(2&r),s=++this.handleId;return this.handles.add([Object(p.b)(e,t,"after-changes",this.createSyncUpdatingCallback()),Object(p.b)(e,t,"change",i,a?e=>{i({added:e.items,removed:[],moved:[],target:e})}:void 0)],s),{remove:()=>{this.handles.remove(s)}}}addOnCollectionChange(e,t,i=0){const r=0!=(2&i),a=++this.handleId;return this.handles.add([e.on("after-changes",this.createSyncUpdatingCallback()),e.on("change",t)],a),r&&t({added:e.items,removed:[],moved:[],target:e}),{remove:()=>{this.handles.remove(a)}}}addPromise(e){if(!e)return e;const t=++this.handleId;this.handles.add({remove:()=>{this.pendingPromises.delete(e)&&(0!==this.pendingPromises.size||this.handles.has(b)||this._set("updating",!1))}},t),this.pendingPromises.add(e),this._set("updating",!0);const i=()=>this.handles.remove(t);return e.then(i,i),e}removeAll(){this.pendingPromises.clear(),this.handles.removeAll(),this._set("updating",!1)}installSyncUpdatingWatch(e,t,i){const r=this.createSyncUpdatingCallback(),s=Object(o.a)(()=>Object(a.c)(e,t),r);return this.handles.add(s,i),s}createSyncUpdatingCallback(){return()=>{this.handles.remove(b),++this.scheduleHandleId;const e=this.scheduleHandleId;this._get("updating")||this._set("updating",!0),this.handles.add(Object(n.b)(()=>{e===this.scheduleHandleId&&(this._set("updating",this.pendingPromises.size>0),this.handles.remove(b))}),b)}}};Object(r.a)([Object(s.b)({readOnly:!0})],d.prototype,"updating",void 0),d=Object(r.a)([Object(l.a)("esri.views.support.WatchUpdatingTracking")],d);const b=-42},243:function(e,t,i){"use strict";i.d(t,"a",(function(){return x}));var r=i(18),a=(i(7),i(3)),s=i(20),l=i(65),n=i(19),o=i(14),c=i(24),u=(i(34),i(35),i(17)),p=i(2),d=i(39),b=i(25),h=i(55),y=i(80),f=i(36),O=i(199),m=i(5),v=i(21);class j{constructor(){this.location={left:0,top:0,width:0,height:0},this._allAvailability="unknown",this.byteSize=40}getAvailability(e,t){if("unknown"!==this._allAvailability)return this._allAvailability;const i=(e-this.location.top)*this.location.width+(t-this.location.left),r=i%8,a=i>>3,s=this._tileAvailabilityBitSet;return a<0||a>s.length?"unknown":s[a]&1<<r?"available":"unavailable"}_updateFromData(e){const t=this.location.width,i=this.location.height;let r=!0,a=!0;const s=Math.ceil(t*i/8),l=new Uint8Array(s);let n=0;for(let t=0;t<e.length;t++){const i=t%8;e[t]?(a=!1,l[n]|=1<<i):r=!1,7===i&&++n}a?this._allAvailability="unavailable":r?this._allAvailability="available":(this._allAvailability="unknown",this._tileAvailabilityBitSet=l,this.byteSize+=l.length)}static fromDefinition(e,t){const i=e.service.request||h.default,{row:r,col:a,width:s,height:l}=e,n={query:{f:"json"}};return t=t?{...n,...t}:n,i(function(e){let t;if("vector-tile"===e.service.type)t=`${e.service.url}/tilemap/${e.level}/${e.row}/${e.col}/${e.width}/${e.height}`;else{const i=e.service.tileServers;t=`${i&&i.length?i[e.row%i.length]:e.service.url}/tilemap/${e.level}/${e.row}/${e.col}/${e.width}/${e.height}`}const i=e.service.query;return i&&(t=`${t}?${i}`),t}(e),t).then(e=>e.data).catch(e=>{if(e&&e.details&&422===e.details.httpStatus)return{location:{top:r,left:a,width:s,height:l},valid:!0,data:Object(v.b)(s*l,0)};throw e}).then(e=>{if(e.location&&(e.location.top!==r||e.location.left!==a||e.location.width!==s||e.location.height!==l))throw new o.a("tilemap:location-mismatch","Tilemap response for different location than requested",{response:e,definition:{top:r,left:a,width:s,height:l}});return j.fromJSON(e)})}static fromJSON(e){j.validateJSON(e);const t=new j;return t.location=Object.freeze(Object(m.a)(e.location)),t._updateFromData(e.data),Object.freeze(t)}static validateJSON(e){if(!e||!e.location)throw new o.a("tilemap:missing-location","Location missing from tilemap response");if(!1===e.valid)throw new o.a("tilemap:invalid","Tilemap response was marked as invalid");if(!e.data)throw new o.a("tilemap:missing-data","Data missing from tilemap response");if(!Array.isArray(e.data))throw new o.a("tilemap:data-mismatch","Data must be an array of numbers");if(e.data.length!==e.location.width*e.location.height)throw new o.a("tilemap:data-mismatch","Number of data items does not match width/height of tilemap")}}function g(e){return`${e.level}/${e.row}/${e.col}/${e.width}/${e.height}`}var w;const S=a.a.getLogger("esri.layers.support.TilemapCache");let x=w=class extends b.a{constructor(e){super(e),this._handles=new y.a,this._pendingTilemapRequests={},this._availableLevels={},this.levels=5,this.cacheByteSize=2097152,this.request=h.default,this._prefetchingEnabled=!0}initialize(){this._tilemapCache=new O.a(this.cacheByteSize),this._handles.add([this.watch(["layer.parsedUrl","layer.tileServers?"],()=>this._initializeTilemapDefinition()),Object(f.a)(this,"layer.tileInfo.lods",e=>this._initializeAvailableLevels(e),!0)]),this._initializeTilemapDefinition()}destroy(){this._handles&&(this._handles.destroy(),this._handles=null)}castLevels(e){return e<=2?(S.error("Minimum levels for Tilemap is 3, but got ",e),3):e}get size(){return 1<<this.levels}fetchTilemap(e,t,i,r){if(!this._availableLevels[e])return Object(p.r)(new o.a("tilemap-cache:level-unavailable",`Level ${e} is unavailable in the service`));const a=this._tmpTilemapDefinition,s=this._tilemapFromCache(e,t,i,a);if(s)return Object(p.s)(s);const l=r&&r.signal;return r={...r,signal:null},Object(p.c)((e,t)=>{Object(p.p)(l,()=>t(Object(p.e)()));const i=g(a);let s=this._pendingTilemapRequests[i];if(!s){s=j.fromDefinition(a,r).then(e=>(this._tilemapCache.put(i,e,e.byteSize),e));const e=()=>delete this._pendingTilemapRequests[i];this._pendingTilemapRequests[i]=s,s.then(e,e)}s.then(e,t)})}getAvailability(e,t,i){if(!this._availableLevels[e])return"unavailable";const r=this._tilemapFromCache(e,t,i,this._tmpTilemapDefinition);return r?r.getAvailability(t,i):"unknown"}getAvailabilityUpsample(e,t,i,r){r.level=e,r.row=t,r.col=i;const a=this.layer.tileInfo;for(a.updateTileInfo(r);;){const e=this.getAvailability(r.level,r.row,r.col);if("unavailable"!==e)return e;if(!a.upsampleTile(r))return"unavailable"}}fetchAvailability(e,t,i,r){return this._availableLevels[e]?this.fetchTilemap(e,t,i,r).catch(e=>e).then(r=>{if(r instanceof j){const a=r.getAvailability(t,i);return"unavailable"===a?Object(p.r)(new o.a("tile-map:tile-unavailable","Tile is not available",{level:e,row:t,col:i})):a}if(Object(p.l)(r))throw r;return"unknown"}):Object(p.r)(new o.a("tilemap-cache:level-unavailable",`Level ${e} is unavailable in the service`))}fetchAvailabilityUpsample(e,t,i,r,a){r.level=e,r.row=t,r.col=i;const s=this.layer.tileInfo;s.updateTileInfo(r);const l=this.fetchAvailability(e,t,i,a).catch(e=>{if(Object(p.l)(e))throw e;if(s.upsampleTile(r))return this.fetchAvailabilityUpsample(r.level,r.row,r.col,r);throw e});return this._fetchAvailabilityUpsamplePrefetch(r.id,e,t,i,a,l),l}async _fetchAvailabilityUpsamplePrefetch(e,t,i,r,a,s){if(!this._prefetchingEnabled)return;const l="prefetch-"+e;if(this._handles.has(l))return;const n=Object(p.d)();s.then(()=>n.abort(),()=>n.abort());let o=!1;const c={remove(){o||(o=!0,n.abort())}};if(this._handles.add(c,l),await Object(d.c)(10,n.signal).catch(()=>{}),o||(o=!0,this._handles.remove(l)),Object(p.m)(n))return;const u={id:e,level:t,row:i,col:r},b={...a,signal:n.signal},h=this.layer.tileInfo;for(let e=0;w._prefetches.length<w._maxPrefetch&&h.upsampleTile(u);++e){const e=this.fetchAvailability(u.level,u.row,u.col,b);w._prefetches.push(e);const t=()=>{w._prefetches.removeUnordered(e)};e.then(t,t)}}_initializeTilemapDefinition(){if(!this.layer.parsedUrl)return;const e=this.layer.parsedUrl,t=e.query;this._tilemapCache.clear(),this._tmpTilemapDefinition={service:{url:e.path,query:t?Object(c.C)(t):null,tileServers:this.layer.tileServers,request:this.request,type:this.layer.type},width:this.size,height:this.size,level:0,row:0,col:0}}_tilemapFromCache(e,t,i,r){r.level=e,r.row=t-t%this.size,r.col=i-i%this.size;const a=g(r);return this._tilemapCache.get(a)}_initializeAvailableLevels(e){this._availableLevels={},e&&e.forEach(e=>this._availableLevels[e.level]=!0)}get test(){const e=this;return{get prefetchingEnabled(){return e._prefetchingEnabled},set prefetchingEnabled(t){e._prefetchingEnabled=t},hasTilemap:(t,i,r)=>!!e._tilemapFromCache(t,i,r,e._tmpTilemapDefinition)}}};x._maxPrefetch=4,x._prefetches=new u.a({initialSize:w._maxPrefetch}),Object(r.a)([Object(s.b)({constructOnly:!0,type:Number})],x.prototype,"levels",void 0),Object(r.a)([Object(l.a)("levels")],x.prototype,"castLevels",null),Object(r.a)([Object(s.b)({readOnly:!0,dependsOn:["levels"],type:Number})],x.prototype,"size",null),Object(r.a)([Object(s.b)({constructOnly:!0,type:Number})],x.prototype,"cacheByteSize",void 0),Object(r.a)([Object(s.b)({constructOnly:!0})],x.prototype,"layer",void 0),Object(r.a)([Object(s.b)({constructOnly:!0})],x.prototype,"request",void 0),x=w=Object(r.a)([Object(n.a)("esri.layers.support.TilemapCache")],x)},253:function(e,t,i){"use strict";function r(e,t,i){return t.flatten(({sublayers:e})=>e).length!==e.length||(!!e.some(e=>e.originIdOf("minScale")>i||e.originIdOf("maxScale")>i||e.originIdOf("renderer")>i||e.originIdOf("labelingInfo")>i||e.originIdOf("opacity")>i||e.originIdOf("labelsVisible")>i||e.originIdOf("source")>i)||!s(e,t))}function a(e,t,i){return!!e.some(e=>{const t=e.source;return!(!t||"map-layer"===t.type&&t.mapLayerId===e.id&&(!t.gdbVersion||t.gdbVersion===i.gdbVersion))||e.originIdOf("renderer")>2||e.originIdOf("labelingInfo")>2||e.originIdOf("opacity")>2||e.originIdOf("labelsVisible")>2})||!s(e,t)}function s(e,t){if(!e||!e.length)return!0;const i=t.slice().reverse().flatten(({sublayers:e})=>e&&e.toArray().reverse()).map(e=>e.id).toArray();if(e.length>i.length)return!1;let r=0;const a=i.length;for(const{id:t}of e){for(;r<a&&i[r]!==t;)r++;if(r>=a)return!1}return!0}function l(e){return!!e&&e.some(e=>null!=e.minScale||e.layerDefinition&&null!=e.layerDefinition.minScale)}i.d(t,"a",(function(){return a})),i.d(t,"b",(function(){return l})),i.d(t,"c",(function(){return r}))},281:function(e,t,i){"use strict";i.d(t,"a",(function(){return s})),i.d(t,"b",(function(){return a}));var r=i(126);const a={type:r.a,json:{origins:{service:{read:{source:["tileInfo","minScale","maxScale","minLOD","maxLOD"],reader:s}}}}};function s(e,t,i,a){if(!e)return null;const{minScale:s,maxScale:l,minLOD:n,maxLOD:o}=t;if(null!=n&&null!=o)return a&&a.ignoreMinMaxLOD?r.a.fromJSON(e):r.a.fromJSON({...e,lods:e.lods.filter(({level:e})=>null!=e&&e>=n&&e<=o)});if(0!==s&&0!==l){const t=e=>Math.round(1e4*e)/1e4,i=s?t(s):1/0,a=l?t(l):-1/0;return r.a.fromJSON({...e,lods:e.lods.filter(e=>{const r=t(e.scale);return r<=i&&r>=a})})}return r.a.fromJSON(e)}},285:function(e,t,i){"use strict";var r,a=i(18),s=(i(7),i(5)),l=i(3),n=i(4),o=i(6),c=i(20),u=i(65),p=i(52),d=i(19),b=i(51),h=i(14),y=i(24),f=(i(34),i(26)),O=(i(35),i(2)),m=i(57),v=(i(59),i(58)),j=i(71),g=i(149),w=i(145),S=i(55),x=i(77),_=i(125),I=i(84),T=(i(154),i(188),i(200),i(221),i(239),i(240),i(236),i(237)),L=(i(251),i(122)),D=i(141),F=i(241),E=i(168),V=i(267),M=i(158),N=i(203),P=i(110),C=i(131);function A(e){return e&&"esriSMS"===e.type}function z(e,t,i){var r;return{ignoreOrigin:!0,enabled:!!i&&"map-image"===(null==(r=i.layer)?void 0:r.type)&&(i.writeSublayerStructure||this.originIdOf(t)>=Object(f.d)(i.origin))}}function R(e,t,i){var r;return{enabled:!!i&&"tile"===(null==(r=i.layer)?void 0:r.type)&&this._isOverridden(t)}}function U(e,t,i){return{ignoreOrigin:!0,enabled:i&&i.writeSublayerStructure||!1}}function k(e,t,i){return{ignoreOrigin:!0,enabled:!!i&&(i.writeSublayerStructure||this.originIdOf(t)>=Object(f.d)(i.origin))}}const J=l.a.getLogger("esri.layers.support.Sublayer");let $=0;const q=new Set;q.add("layer"),q.add("parent"),q.add("loaded"),q.add("loadStatus"),q.add("loadError"),q.add("loadWarnings");let B=r=class extends(Object(C.b)(Object(I.a)(Object(g.a)(x.a)))){constructor(e){super(e),this.capabilities=void 0,this.fields=null,this.fullExtent=null,this.globalIdField=null,this.legendEnabled=!0,this.objectIdField=null,this.popupEnabled=!0,this.popupTemplate=null,this.sourceJSON=null,this.title=null,this.typeIdField=null,this.types=null}async load(e){return this.addResolvingPromise((async()=>{var t;if(!this.layer&&!this.url)throw new h.a("sublayer:missing-layer","Sublayer can't be loaded without being part of a layer",{sublayer:this});let i=null;if(!this.layer||this.originIdOf("url")>2||"data-layer"===(null==(t=this.source)?void 0:t.type))i=(await Object(S.default)(this.url,{responseType:"json",query:{f:"json"},...e})).data;else{var r;let t=this.id;"map-layer"===(null==(r=this.source)?void 0:r.type)&&(t=this.source.mapLayerId),i=await this.layer.fetchSublayerInfo(t,e)}i&&(this.sourceJSON=i,this.read({layerDefinition:i},{origin:"service"}))})()),this}readCapabilities(e,t){const i=(e=(t=t.layerDefinition||t).capabilities||e)?e.toLowerCase().split(",").map(e=>e.trim()):[];return{exportMap:{supportsModification:!!t.canModifyLayer},operations:{supportsQuery:-1!==i.indexOf("query")}}}set definitionExpression(e){this._setAndNotifyLayer("definitionExpression",e)}get fieldsIndex(){return new D.a(this.fields||[])}readGlobalIdFieldFromService(e,t){if((t=t.layerDefinition||t).globalIdField)return t.globalIdField;if(t.fields)for(const e of t.fields)if("esriFieldTypeGlobalID"===e.type)return e.name}get id(){const e=this._get("id");return null==e?$++:e}set id(e){this._get("id")!==e&&(!1!==this.get("layer.capabilities.exportMap.supportsDynamicLayers")?this._set("id",e):this._logLockedError("id","capability not available 'layer.capabilities.exportMap.supportsDynamicLayers'"))}set labelingInfo(e){this._setAndNotifyLayer("labelingInfo",e)}writeLabelingInfo(e,t,i,r){e&&e.length&&(t.layerDefinition={drawingInfo:{labelingInfo:e.map(e=>e.write({},r))}})}set labelsVisible(e){this._setAndNotifyLayer("labelsVisible",e)}set layer(e){this._set("layer",e),this.sublayers&&this.sublayers.forEach(t=>t.layer=e)}set listMode(e){this._set("listMode",e)}set minScale(e){this._setAndNotifyLayer("minScale",e)}readMinScale(e,t){return t.minScale||t.layerDefinition&&t.layerDefinition.minScale||0}set maxScale(e){this._setAndNotifyLayer("maxScale",e)}readMaxScale(e,t){return t.maxScale||t.layerDefinition&&t.layerDefinition.maxScale||0}readObjectIdFieldFromService(e,t){if((t=t.layerDefinition||t).objectIdField)return t.objectIdField;if(t.fields)for(const e of t.fields)if("esriFieldTypeOID"===e.type)return e.name}set opacity(e){this._setAndNotifyLayer("opacity",e)}readOpacity(e,t){const i=t.layerDefinition;return 1-.01*(null!=i.transparency?i.transparency:i.drawingInfo.transparency)}writeOpacity(e,t,i,r){t.layerDefinition={drawingInfo:{transparency:100-100*e}}}writeParent(e,t){this.parent&&this.parent!==this.layer?t.parentLayerId=Object(n.e)(this.parent.id):t.parentLayerId=-1}get defaultPopupTemplate(){return this.createPopupTemplate()}set renderer(e){if(e)for(const t of e.getSymbols())if(Object(_.h)(t)){J.warn("Sublayer renderer should use 2D symbols");break}this._setAndNotifyLayer("renderer",e)}get source(){return this._get("source")||new V.a({mapLayerId:this.id})}set source(e){this._setAndNotifyLayer("source",e)}set sublayers(e){this._handleSublayersChange(e,this._get("sublayers")),this._set("sublayers",e)}castSublayers(e){return Object(n.m)(v.a.ofType(r),e)}writeSublayers(e,t,i){this.get("sublayers.length")&&(t[i]=this.sublayers.map(e=>e.id).toArray().reverse())}readTypeIdField(e,t){const i=(t=t.layerDefinition||t).typeIdField;if(i){const e=Object(j.i)(t.fields,i);if(e)return e.name}return null}get url(){var e,t;const i=null!=(e=null==(t=this.layer)?void 0:t.parsedUrl)?e:this._lastParsedUrl,r=this.source;if(!i)return null;if(this._lastParsedUrl=i,"map-layer"===(null==r?void 0:r.type))return`${i.path}/${r.mapLayerId}`;const a={layer:JSON.stringify({source:this.source})};return`${i.path}/dynamicLayer?${Object(y.C)(a)}`}set url(e){e?this._override("url",e):this._clearOverride("url")}set visible(e){this._setAndNotifyLayer("visible",e)}writeVisible(e,t,i,r){t[i]=this.getAtOrigin("defaultVisibility","service")||e}clone(){const{store:e}=Object(o.a)(this),t=new r;return Object(o.a)(t).store=e.clone(q),this.url,t._lastParsedUrl=this._lastParsedUrl,t}createPopupTemplate(e){return Object(N.a)(this,e)}createQuery(){return new P.a({returnGeometry:!0,where:this.definitionExpression||"1=1"})}async createFeatureLayer(){var e,t;if(this.hasOwnProperty("sublayers"))return null;const r=null==(e=this.layer)?void 0:e.parsedUrl,a=new(0,(await i.e(4).then(i.bind(null,153))).default)({url:r.path});return r&&this.source&&("map-layer"===this.source.type?a.layerId=this.source.mapLayerId:a.dynamicDataSource=this.source),null!=this.layer.refreshInterval&&(a.refreshInterval=this.layer.refreshInterval),this.definitionExpression&&(a.definitionExpression=this.definitionExpression),this.originIdOf("labelingInfo")>2&&(a.labelingInfo=Object(s.a)(this.labelingInfo)),this.originIdOf("labelsVisible")>0&&(a.labelsVisible=this.labelsVisible),this.originIdOf("legendEnabled")>0&&(a.legendEnabled=this.legendEnabled),this.originIdOf("visible")>0&&(a.visible=this.visible),this.originIdOf("minScale")>0&&(a.minScale=this.minScale),this.originIdOf("maxScale")>0&&(a.maxScale=this.maxScale),this.originIdOf("opacity")>0&&(a.opacity=this.opacity),this.originIdOf("popupTemplate")>0&&(a.popupTemplate=Object(s.a)(this.popupTemplate)),this.originIdOf("renderer")>2&&(a.renderer=Object(s.a)(this.renderer)),"data-layer"===(null==(t=this.source)?void 0:t.type)&&(a.dynamicDataSource=this.source.clone()),this.originIdOf("title")>0&&(a.title=this.title),"map-image"===this.layer.type&&this.layer.originIdOf("customParameters")>0&&(a.customParameters=this.layer.customParameters),"tile"===this.layer.type&&this.layer.originIdOf("customParameters")>0&&(a.customParameters=this.layer.customParameters),a}getFeatureType(e){const{typeIdField:t,types:i}=this;if(!t||!e)return null;const r=e.attributes?e.attributes[t]:void 0;if(null==r)return null;let a=null;return i.some(e=>{const{id:t}=e;return null!=t&&(t.toString()===r.toString()&&(a=e),!!a)}),a}getFieldDomain(e,t){const i=t&&t.feature,r=this.getFeatureType(i);if(r){const t=r.domains&&r.domains[e];if(t&&"inherited"!==t.type)return t}return this._getLayerDomain(e)}queryFeatures(e=this.createQuery(),t){return this.load().then(()=>{if(!this.get("capabilities.operations.supportsQuery"))throw new h.a("Sublayer.queryFeatures","this layer doesn't support queries.");return Object(O.b)([Promise.resolve().then(i.bind(null,178)),Promise.resolve().then(i.bind(null,118))])}).then(([{executeQuery:i},{default:r}])=>i(this.url,P.a.from(e),this.layer?this.layer.spatialReference:null,{...t,query:{...this.layer.customParameters}}).then(e=>r.fromJSON(e.data))).then(e=>(e&&e.features&&e.features.forEach(e=>{e.sourceLayer=this}),e))}toExportImageJSON(){var e;const t={id:this.id,source:(null==(e=this.source)?void 0:e.toJSON())||{mapLayerId:this.id,type:"mapLayer"}};this.definitionExpression&&(t.definitionExpression=this.definitionExpression);const i=["renderer","labelingInfo","opacity","labelsVisible"].reduce((e,t)=>(e[t]=this.originIdOf(t),e),{});if(Object.keys(i).some(e=>i[e]>2)){const e=t.drawingInfo={};i.renderer>2&&(e.renderer=this.renderer?this.renderer.toJSON():null),i.labelsVisible>2&&(e.showLabels=this.labelsVisible),this.labelsVisible&&i.labelingInfo>2&&(e.labelingInfo=this.labelingInfo?this.labelingInfo.map(e=>e.write({},{origin:"service"})):null,e.showLabels=!0),i.opacity>2&&(e.transparency=100-100*this.opacity),this._assignDefaultSymbolColors(e.renderer)}return t}_assignDefaultSymbolColors(e){this._forEachSimpleMarkerSymbols(e,e=>{e.color||"esriSMSX"!==e.style&&"esriSMSCross"!==e.style||(e.outline&&e.outline.color?e.color=e.outline.color:e.color=[0,0,0,0])})}_forEachSimpleMarkerSymbols(e,t){if(e){const i="uniqueValueInfos"in e?e.uniqueValueInfos:"classBreakInfos"in e?e.classBreakInfos:[];for(const e of i)A(e.symbol)&&t(e.symbol);"symbol"in e&&A(e.symbol)&&t(e.symbol),"defaultSymbol"in e&&A(e.defaultSymbol)&&t(e.defaultSymbol)}}_setAndNotifyLayer(e,t){const i=this.layer,r=this._get(e);let a,s;switch(e){case"definitionExpression":a="supportsSublayerDefinitionExpression";case"minScale":case"maxScale":case"visible":a="supportsSublayerVisibility";break;case"labelingInfo":case"labelsVisible":case"opacity":case"renderer":case"source":a="supportsDynamicLayers",s="supportsModification"}const l=Object(o.a)(this).getDefaultOrigin();if("service"!==l){if(a&&!1===this.get("layer.capabilities.exportMap."+a))return void this._logLockedError(e,`capability not available 'layer.capabilities.exportMap.${a}'`);if(s&&!1===this.get("capabilities.exportMap."+s))return void this._logLockedError(e,`capability not available 'capabilities.exportMap.${s}'`)}"source"!==e||"not-loaded"===this.loadStatus?(this._set(e,t),"service"!==l&&r!==t&&i&&i.emit&&i.emit("sublayer-update",{propertyName:e,target:this})):this._logLockedError(e,"'source' can't be changed after calling sublayer.load()")}_handleSublayersChange(e,t){t&&(t.forEach(e=>{e.parent=null,e.layer=null}),this.handles.removeAll()),e&&(e.forEach(e=>{e.parent=this,e.layer=this.layer}),this.handles.add([e.on("after-add",({item:e})=>{e.parent=this,e.layer=this.layer}),e.on("after-remove",({item:e})=>{e.parent=null,e.layer=null}),e.on("before-changes",e=>{const t=this.get("layer.capabilities.exportMap.supportsSublayersChanges");null==t||t||(J.error(new h.a("sublayer:sublayers-non-modifiable","Sublayer can't be added, moved, or removed from the layer's sublayers",{sublayer:this,layer:this.layer})),e.preventDefault())})]))}_logLockedError(e,t){J.error(new h.a("sublayer:locked",`Property '${e}' can't be changed on Sublayer from the layer '${this.layer.id}'`,{reason:t,sublayer:this,layer:this.layer}))}_getLayerDomain(e){const t=this.fieldsIndex.get(e);return t?t.domain:null}};B.test={isMapImageLayerOverridePolicy:e=>e===U||e===z,isTileImageLayerOverridePolicy:e=>e===R},Object(a.a)([Object(c.b)({readOnly:!0})],B.prototype,"capabilities",void 0),Object(a.a)([Object(p.a)("service","capabilities",["layerDefinition.canModifyLayer","layerDefinition.capabilities"])],B.prototype,"readCapabilities",null),Object(a.a)([Object(c.b)({type:String,value:null,json:{read:{source:"layerDefinition.definitionExpression"},write:{target:"layerDefinition.definitionExpression",overridePolicy:z}}})],B.prototype,"definitionExpression",null),Object(a.a)([Object(c.b)({type:[L.a],json:{origins:{service:{read:{source:"layerDefinition.fields"}}}}})],B.prototype,"fields",void 0),Object(a.a)([Object(c.b)({readOnly:!0,dependsOn:["fields"]})],B.prototype,"fieldsIndex",null),Object(a.a)([Object(c.b)({type:m.a,json:{read:{source:"layerDefinition.extent"}}})],B.prototype,"fullExtent",void 0),Object(a.a)([Object(c.b)({type:String})],B.prototype,"globalIdField",void 0),Object(a.a)([Object(p.a)("service","globalIdField",["layerDefinition.globalIdField","layerDefinition.fields"])],B.prototype,"readGlobalIdFieldFromService",null),Object(a.a)([Object(c.b)({type:n.a,json:{write:{ignoreOrigin:!0}}})],B.prototype,"id",null),Object(a.a)([Object(c.b)({value:null,type:[F.a],json:{read:{source:"layerDefinition.drawingInfo.labelingInfo"},write:{target:"layerDefinition.drawingInfo.labelingInfo",overridePolicy:U}}})],B.prototype,"labelingInfo",null),Object(a.a)([Object(b.a)("labelingInfo")],B.prototype,"writeLabelingInfo",null),Object(a.a)([Object(c.b)({type:Boolean,value:!0,json:{read:{source:"layerDefinition.drawingInfo.showLabels"},write:{target:"layerDefinition.drawingInfo.showLabels",overridePolicy:U}}})],B.prototype,"labelsVisible",null),Object(a.a)([Object(c.b)({value:null})],B.prototype,"layer",null),Object(a.a)([Object(c.b)({type:Boolean,value:!0,json:{origins:{service:{read:{enabled:!1}}},read:{source:"showLegend"},write:{target:"showLegend",overridePolicy:k}}})],B.prototype,"legendEnabled",void 0),Object(a.a)([Object(c.b)({type:["show","hide","hide-children"],value:"show",json:{read:!1,write:!1,origins:{"web-scene":{read:!0,write:!0}}}})],B.prototype,"listMode",null),Object(a.a)([Object(c.b)({type:Number,value:0,json:{write:{overridePolicy:U}}})],B.prototype,"minScale",null),Object(a.a)([Object(p.a)("minScale",["minScale","layerDefinition.minScale"])],B.prototype,"readMinScale",null),Object(a.a)([Object(c.b)({type:Number,value:0,json:{write:{overridePolicy:U}}})],B.prototype,"maxScale",null),Object(a.a)([Object(p.a)("maxScale",["maxScale","layerDefinition.maxScale"])],B.prototype,"readMaxScale",null),Object(a.a)([Object(c.b)({type:String})],B.prototype,"objectIdField",void 0),Object(a.a)([Object(p.a)("service","objectIdField",["layerDefinition.objectIdField","layerDefinition.fields"])],B.prototype,"readObjectIdFieldFromService",null),Object(a.a)([Object(c.b)({type:Number,value:1,json:{write:{target:"layerDefinition.drawingInfo.transparency",overridePolicy:U}}})],B.prototype,"opacity",null),Object(a.a)([Object(p.a)("opacity",["layerDefinition.drawingInfo.transparency","layerDefinition.transparency"])],B.prototype,"readOpacity",null),Object(a.a)([Object(b.a)("opacity")],B.prototype,"writeOpacity",null),Object(a.a)([Object(c.b)({json:{type:n.a,write:{target:"parentLayerId",allowNull:!0,overridePolicy:U}}})],B.prototype,"parent",void 0),Object(a.a)([Object(b.a)("parent")],B.prototype,"writeParent",null),Object(a.a)([Object(c.b)({type:Boolean,value:!0,json:{read:{source:"disablePopup",reader:(e,t)=>!t.disablePopup},write:{target:"disablePopup",overridePolicy:k,writer(e,t,i){t[i]=!e}}}})],B.prototype,"popupEnabled",void 0),Object(a.a)([Object(c.b)({type:w.a,json:{read:{source:"popupInfo"},write:{target:"popupInfo",overridePolicy:k}}})],B.prototype,"popupTemplate",void 0),Object(a.a)([Object(c.b)({readOnly:!0,dependsOn:["fields","title"]})],B.prototype,"defaultPopupTemplate",null),Object(a.a)([Object(c.b)({types:T.a,value:null,json:{name:"layerDefinition.drawingInfo.renderer",write:{overridePolicy:U},origins:{"web-scene":{types:T.b,name:"layerDefinition.drawingInfo.renderer",write:{overridePolicy:U}}}}})],B.prototype,"renderer",null),Object(a.a)([Object(c.b)({types:{key:"type",base:null,typeMap:{"data-layer":M.a,"map-layer":V.a}},cast(e){if(e){if("mapLayerId"in e)return Object(n.d)(V.a,e);if("dataSource"in e)return Object(n.d)(M.a,e)}return e},json:{name:"layerDefinition.source",write:{overridePolicy:U}}})],B.prototype,"source",null),Object(a.a)([Object(c.b)()],B.prototype,"sourceJSON",void 0),Object(a.a)([Object(c.b)({value:null,json:{type:[n.a],write:{target:"subLayerIds",allowNull:!0,overridePolicy:U}}})],B.prototype,"sublayers",null),Object(a.a)([Object(u.a)("sublayers")],B.prototype,"castSublayers",null),Object(a.a)([Object(b.a)("sublayers")],B.prototype,"writeSublayers",null),Object(a.a)([Object(c.b)({type:String,json:{read:{source:"name"},write:{target:"name",allowNull:!0,overridePolicy:k}}})],B.prototype,"title",void 0),Object(a.a)([Object(c.b)({type:String})],B.prototype,"typeIdField",void 0),Object(a.a)([Object(p.a)("typeIdField",["layerDefinition.typeIdField"])],B.prototype,"readTypeIdField",null),Object(a.a)([Object(c.b)({type:[E.a],json:{origins:{service:{read:{source:"layerDefinition.types"}}}}})],B.prototype,"types",void 0),Object(a.a)([Object(c.b)({type:String,dependsOn:["layer","source"],json:{read:{source:"layerUrl"},write:{target:"layerUrl",overridePolicy:R}}})],B.prototype,"url",null),Object(a.a)([Object(c.b)({type:Boolean,value:!0,json:{read:{source:"defaultVisibility"},write:{target:"defaultVisibility",overridePolicy:U}}})],B.prototype,"visible",null),Object(a.a)([Object(b.a)("visible")],B.prototype,"writeVisible",null),B=r=Object(a.a)([Object(d.a)("esri.layers.support.Sublayer")],B);var W=B;t.a=W},355:function(e,t,i){"use strict";i.d(t,"a",(function(){return u}));var r=i(18),a=(i(7),i(3),i(4),i(20)),s=i(52),l=i(19),n=(i(24),i(34),i(35),i(56)),o=(i(59),i(281)),c=i(243);const u=e=>{let t=class extends e{constructor(){super(...arguments),this.copyright=null,this.minScale=0,this.maxScale=0,this.spatialReference=null,this.tileInfo=null,this.tilemapCache=null}readMinScale(e,t){return null!=t.minLOD&&null!=t.maxLOD?e:0}readMaxScale(e,t){return null!=t.minLOD&&null!=t.maxLOD?e:0}get supportsBlankTile(){return this.version>=10.2}readTilemapCache(e,t){return t.capabilities&&t.capabilities.indexOf("Tilemap")>-1?new c.a({layer:this}):null}};return Object(r.a)([Object(a.b)({json:{read:{source:"copyrightText"}}})],t.prototype,"copyright",void 0),Object(r.a)([Object(a.b)()],t.prototype,"minScale",void 0),Object(r.a)([Object(s.a)("service","minScale")],t.prototype,"readMinScale",null),Object(r.a)([Object(a.b)()],t.prototype,"maxScale",void 0),Object(r.a)([Object(s.a)("service","maxScale")],t.prototype,"readMaxScale",null),Object(r.a)([Object(a.b)({type:n.a})],t.prototype,"spatialReference",void 0),Object(r.a)([Object(a.b)({readOnly:!0,dependsOn:["version"]})],t.prototype,"supportsBlankTile",null),Object(r.a)([Object(a.b)(o.b)],t.prototype,"tileInfo",void 0),Object(r.a)([Object(a.b)()],t.prototype,"tilemapCache",void 0),Object(r.a)([Object(s.a)("service","tilemapCache",["capabilities"])],t.prototype,"readTilemapCache",null),Object(r.a)([Object(a.b)()],t.prototype,"version",void 0),t=Object(r.a)([Object(l.a)("esri.layers.mixins.ArcGISCachedService")],t),t}},360:function(e,t,i){"use strict";i.d(t,"a",(function(){return b}));var r=i(18),a=(i(7),i(3),i(4),i(20)),s=i(52),l=i(19),n=i(24),o=(i(34),i(35),i(2)),c=i(56),u=i(57),p=i(55),d=i(72);const b=e=>{let t=class extends e{constructor(){super(...arguments),this.capabilities=void 0,this.copyright=null,this.fullExtent=null,this.legendEnabled=!0,this.spatialReference=null,this.version=null}readCapabilities(e,t){const i=t.capabilities&&t.capabilities.split(",").map(e=>e.toLowerCase().trim());if(!i)return{operations:{supportsQuery:!1,supportsExportMap:!1,supportsExportTiles:!1,supportsTileMap:!1},exportMap:null,exportTiles:null};const r=this.type,a=-1!==i.indexOf("query"),s=-1!==i.indexOf("map"),l=!!t.exportTilesAllowed,n=-1!==i.indexOf("tilemap"),o="tile"!==r&&!!t.supportsDynamicLayers,c="tile"!==r&&(!t.tileInfo||o),u="tile"!==r&&(!t.tileInfo||o);return{operations:{supportsQuery:a,supportsExportMap:s,supportsExportTiles:l,supportsTileMap:n},exportMap:s?{supportsSublayersChanges:"tile"!==r,supportsDynamicLayers:o,supportsSublayerVisibility:c,supportsSublayerDefinitionExpression:u}:null,exportTiles:l?{maxExportTilesCount:+t.maxExportTilesCount}:null}}readVersion(e,t){let i=t.currentVersion;return i||(i=t.hasOwnProperty("capabilities")||t.hasOwnProperty("tables")?10:t.hasOwnProperty("supportedImageFormatTypes")?9.31:9.3),i}async fetchSublayerInfo(e,t){return await this.fetchAllLayersAndTables(t),this._allLayersAndTablesMap.get(e)}async fetchAllLayersAndTables(e){await this.load(e),this._allLayersAndTablesPromise||(this._allLayersAndTablesPromise=Object(p.default)(Object(n.I)(this.url).path+"/layers",{responseType:"json",query:{f:"json",...this.customParameters}}).then(e=>{this._allLayersAndTablesMap=new Map;for(const t of e.data.layers)this._allLayersAndTablesMap.set(t.id,t);return{result:e.data}},e=>({error:e})));const t=await this._allLayersAndTablesPromise;if(Object(o.u)(e),"result"in t)return t.result;throw t.error}};return Object(r.a)([Object(a.b)({readOnly:!0})],t.prototype,"capabilities",void 0),Object(r.a)([Object(s.a)("service","capabilities",["capabilities","exportTilesAllowed","maxExportTilesCount","supportsDynamicLayers","tileInfo"])],t.prototype,"readCapabilities",null),Object(r.a)([Object(a.b)({json:{read:{source:"copyrightText"}}})],t.prototype,"copyright",void 0),Object(r.a)([Object(a.b)({type:u.a})],t.prototype,"fullExtent",void 0),Object(r.a)([Object(a.b)({json:{origins:{service:{read:!1},"portal-item":{read:!1}}}})],t.prototype,"id",void 0),Object(r.a)([Object(a.b)({type:Boolean,json:{origins:{service:{read:{enabled:!1}}},read:{source:"showLegend"},write:{target:"showLegend"}}})],t.prototype,"legendEnabled",void 0),Object(r.a)([Object(a.b)(d.g)],t.prototype,"popupEnabled",void 0),Object(r.a)([Object(a.b)({type:c.a})],t.prototype,"spatialReference",void 0),Object(r.a)([Object(a.b)()],t.prototype,"version",void 0),Object(r.a)([Object(s.a)("version",["currentVersion","capabilities","tables","supportedImageFormatTypes"])],t.prototype,"readVersion",null),t=Object(r.a)([Object(l.a)("esri.layers.mixins.ArcGISMapService")],t),t}},361:function(e,t,i){"use strict";i.d(t,"a",(function(){return f}));var r=i(18),a=(i(7),i(3)),s=(i(4),i(6)),l=i(20),n=i(19),o=i(14),c=(i(24),i(34),i(26)),u=(i(35),i(58)),p=i(169),d=i(285),b=i(253);const h=a.a.getLogger("esri.layers.TileLayer"),y=u.a.ofType(d.a);const f=e=>{let t=class extends e{constructor(...e){super(...e),this.allSublayers=new p.a({root:this,rootCollectionNames:["sublayers"],getChildrenFunction:e=>e.sublayers}),this.sublayersSourceJSON={2:{},3:{},4:{},5:{}},this.watch("sublayers",(e,t)=>this._handleSublayersChange(e,t),!0)}readSublayers(e,t){if(!t||!e)return;const{sublayersSourceJSON:i}=this,r=Object(c.d)(t.origin);if(r<2)return;if(i[r]={context:t,visibleLayers:e.visibleLayers||i[r].visibleLayers,layers:e.layers||i[r].layers},r>2)return;this._set("serviceSublayers",this.createSublayersForOrigin("service").sublayers);const{sublayers:a,origin:l}=this.createSublayersForOrigin("web-document"),n=Object(s.a)(this);n.setDefaultOrigin(l),this._set("sublayers",new y(a)),n.setDefaultOrigin("user")}findSublayerById(e){return this.allSublayers.find(t=>t.id===e)}createServiceSublayers(){return this.createSublayersForOrigin("service").sublayers}createSublayersForOrigin(e){const t=Object(c.d)("web-document"===e?"web-map":e);let i=2,r=this.sublayersSourceJSON[2].layers,a=this.sublayersSourceJSON[2].context,s=null;const l=[3,4,5].filter(e=>e<=t);for(const e of l){const t=this.sublayersSourceJSON[e];Object(b.b)(t.layers)&&(i=e,r=t.layers,a=t.context,t.visibleLayers&&(s={visibleLayers:t.visibleLayers,context:t.context}))}const n=[3,4,5].filter(e=>e>i&&e<=t);let o=null;for(const e of n){const{layers:t,visibleLayers:i,context:r}=this.sublayersSourceJSON[e];t&&(o={layers:t,context:r}),i&&(s={visibleLayers:i,context:r})}const u=function(e,t){const i=[],r={};return e?(e.forEach(e=>{const a=new d.a;if(a.read(e,t),r[a.id]=a,null!=e.parentLayerId&&-1!==e.parentLayerId){const t=r[e.parentLayerId];t.sublayers||(t.sublayers=[]),t.sublayers.unshift(a)}else i.unshift(a)}),i):i}(r,a),p=new Map,h=new Set;if(o)for(const e of o.layers)p.set(e.id,e);if(s)for(const e of s.visibleLayers)h.add(e);return function e(t,i){t&&t.forEach(t=>{i(t),t.sublayers&&t.sublayers.length&&e(t.sublayers,i)})}(u,e=>{o&&e.read(p.get(e.id),o.context),s&&e.read({defaultVisibility:h.has(e.id)},s.context)}),{origin:Object(c.b)(i),sublayers:new y({items:u})}}read(e,t){super.read(e,t),this.readSublayers(e,t)}_handleSublayersChange(e,t){t&&(t.forEach(e=>{e.parent=null,e.layer=null}),this.handles.remove("sublayers-owner")),e&&(e.forEach(e=>{e.parent=this,e.layer=this}),this.handles.add([e.on("after-add",({item:e})=>{e.parent=this,e.layer=this}),e.on("after-remove",({item:e})=>{e.parent=null,e.layer=null})],"sublayers-owner"),"tile"===this.type&&this.handles.add(e.on("before-changes",e=>{h.error(new o.a("tilelayer:sublayers-non-modifiable","Sublayer can't be added, moved, or removed from the layer's sublayers",{layer:this})),e.preventDefault()}),"sublayers-owner"))}};return Object(r.a)([Object(l.b)({readOnly:!0})],t.prototype,"allSublayers",void 0),Object(r.a)([Object(l.b)({readOnly:!0,type:u.a.ofType(d.a)})],t.prototype,"serviceSublayers",void 0),Object(r.a)([Object(l.b)({value:null,type:y,json:{read:!1,write:{allowNull:!0,ignoreOrigin:!0}}})],t.prototype,"sublayers",void 0),Object(r.a)([Object(l.b)({readOnly:!0})],t.prototype,"sublayersSourceJSON",void 0),t=Object(r.a)([Object(n.a)("esri.layers.mixins.SublayersOwner")],t),t}},410:function(e,t,i){"use strict";i.r(t);var r=i(18),a=(i(7),i(1)),s=(i(3),i(20)),l=i(65),n=i(52),o=i(19),c=i(51),u=i(14),p=i(24),d=(i(34),i(35),i(2)),b=i(56),h=(i(59),i(55)),y=i(83),f=i(84),O=i(148),m=i(72),v=i(98),j=i(165),g=i(128),w=i(181),S=i(95),x=i(166),_=i(124),I=i(131),T=i(355),L=i(360),D=i(285),F=i(361);const E=["Canvas/World_Dark_Gray_Base","Canvas/World_Dark_Gray_Reference","Canvas/World_Light_Gray_Base","Canvas/World_Light_Gray_Reference","Elevation/World_Hillshade","Elevation/World_Hillshade_Dark","Ocean/World_Ocean_Base","Ocean/World_Ocean_Reference","Ocean_Basemap","Reference/World_Boundaries_and_Places","Reference/World_Boundaries_and_Places_Alternate","Reference/World_Transportation","World_Imagery","World_Street_Map","World_Topo_Map"];let V=class extends(Object(g.a)(Object(F.a)(Object(_.a)(Object(x.a)(Object(v.a)(Object(S.a)(Object(T.a)(Object(L.a)(Object(j.a)(Object(f.a)(Object(I.b)(Object(w.a)(y.a))))))))))))){constructor(...e){super(...e),this.listMode="show",this.isReference=null,this.operationalLayerType="ArcGISTiledMapServiceLayer",this.resampling=!0,this.sourceJSON=null,this.spatialReference=null,this.path=null,this.sublayers=null,this.type="tile",this.url=null}normalizeCtorArgs(e,t){return"string"==typeof e?{url:e,...t}:e}load(e){const t=Object(a.g)(e)?e.signal:null;return this.addResolvingPromise(this.loadFromPortal({supportedTypes:["Map Service"]},e).then(()=>this._fetchService(t),()=>this._fetchService(t))),Object(d.s)(this)}get attributionDataUrl(){var e;const t=null==(e=this.parsedUrl)?void 0:e.path.toLowerCase();return t&&this._getDefaultAttribution(this._getMapName(t))}readSpatialReference(e,t){return(e=e||t.tileInfo&&t.tileInfo.spatialReference)&&b.a.fromJSON(e)}writeSublayers(e,t,i,r){if(!this.loaded||!e)return;const a=e.slice().reverse().flatten(({sublayers:e})=>e&&e.toArray().reverse()).toArray(),s=[],l={writeSublayerStructure:!1,...r};a.forEach(e=>{const t=e.write({},l);s.push(t)}),s.some(e=>Object.keys(e).length>1)&&(t.layers=s)}get tileServers(){return this._getDefaultTileServers(this.parsedUrl.path)}castTileServers(e){return Array.isArray(e)?e.map(e=>Object(p.I)(e).path):null}fetchTile(e,t,i,r={}){const{signal:a,timestamp:s}=r,l=this.getTileUrl(e,t,i),n={responseType:"image",signal:a};return null!=s&&(n.query={_ts:r.timestamp}),Object(h.default)(l,n).then(e=>e.data)}getTileUrl(e,t,i){const r=!this.tilemapCache&&this.supportsBlankTile,a=Object(p.C)({...this.parsedUrl.query,blankTile:!r&&null,...this.customParameters}),s=this.tileServers;return`${s&&s.length?s[t%s.length]:this.parsedUrl.path}/tile/${e}/${t}/${i}${a?"?"+a:""}`}_fetchService(e){return Object(d.c)((t,i)=>{if(this.sourceJSON){if(null!=this.sourceJSON.bandCount&&null!=this.sourceJSON.pixelSizeX)throw new u.a("tile-layer:unsupported-url","use ImageryTileLayer to open a tiled image service");return void t({data:this.sourceJSON})}if(!this.parsedUrl)throw new u.a("tile-layer:undefined-url","layer's url is not defined");const r=Object(O.e)(this.parsedUrl.path);if(Object(a.g)(r)&&"ImageServer"===r.serverType)throw new u.a("tile-layer:unsupported-url","use ImageryTileLayer to open a tiled image service");Object(h.default)(this.parsedUrl.path,{query:{f:"json",...this.parsedUrl.query,...this.customParameters},responseType:"json",signal:e}).then(t,i)}).then(t=>{if(t.ssl&&(this.url=this.url.replace(/^http:/i,"https:")),this.sourceJSON=t.data,this.read(t.data,{origin:"service",url:this.parsedUrl}),10.1===this.version&&!Object(O.c)(this.url))return this._fetchServerVersion(this.url,e).then(e=>{this.read({currentVersion:e})}).catch(()=>{})})}_fetchServerVersion(e,t){if(!Object(O.b)(e))return Object(d.r)();const i=e.replace(/(.*\/rest)\/.*/i,"$1")+"/info";return Object(h.default)(i,{query:{f:"json",...this.customParameters},responseType:"json",signal:t}).then(e=>{if(e.data&&e.data.currentVersion)return e.data.currentVersion;throw new u.a("tile-layer:version-not-available")})}_getMapName(e){const t=e.match(/^(?:https?:)?\/\/(server\.arcgisonline\.com|services\.arcgisonline\.com|ibasemaps-api\.arcgis\.com)\/arcgis\/rest\/services\/([^\/]+(\/[^\/]+)*)\/mapserver/i);return t&&t[2]}_getDefaultAttribution(e){if(!e)return;let t;e=e.toLowerCase();for(let i=0,r=E.length;i<r;i++)if(t=E[i],t.toLowerCase().indexOf(e)>-1)return Object(p.y)("//static.arcgis.com/attribution/"+t)}_getDefaultTileServers(e){const t=-1!==e.search(/^(?:https?:)?\/\/server\.arcgisonline\.com/i),i=-1!==e.search(/^(?:https?:)?\/\/services\.arcgisonline\.com/i);return t||i?[e,e.replace(t?/server\.arcgisonline/i:/services\.arcgisonline/i,t?"services.arcgisonline":"server.arcgisonline")]:[]}};Object(r.a)([Object(s.b)({readOnly:!0,dependsOn:["parsedUrl"]})],V.prototype,"attributionDataUrl",null),Object(r.a)([Object(s.b)({type:["show","hide","hide-children"]})],V.prototype,"listMode",void 0),Object(r.a)([Object(s.b)({type:Boolean,json:{read:!1,write:{enabled:!0,overridePolicy:()=>({enabled:!1})}}})],V.prototype,"isReference",void 0),Object(r.a)([Object(s.b)({readOnly:!0,type:["ArcGISTiledMapServiceLayer"]})],V.prototype,"operationalLayerType",void 0),Object(r.a)([Object(s.b)({type:Boolean})],V.prototype,"resampling",void 0),Object(r.a)([Object(s.b)()],V.prototype,"sourceJSON",void 0),Object(r.a)([Object(s.b)({type:b.a})],V.prototype,"spatialReference",void 0),Object(r.a)([Object(n.a)("spatialReference",["spatialReference","tileInfo"])],V.prototype,"readSpatialReference",null),Object(r.a)([Object(s.b)({type:String,json:{origins:{"web-scene":{read:!0,write:!0}},read:!1}})],V.prototype,"path",void 0),Object(r.a)([Object(s.b)({readOnly:!0})],V.prototype,"sublayers",void 0),Object(r.a)([Object(c.a)("sublayers",{layers:{type:[D.a]}})],V.prototype,"writeSublayers",null),Object(r.a)([Object(s.b)({json:{read:!1,write:!1}})],V.prototype,"popupEnabled",void 0),Object(r.a)([Object(s.b)({dependsOn:["parsedUrl"]})],V.prototype,"tileServers",null),Object(r.a)([Object(l.a)("tileServers")],V.prototype,"castTileServers",null),Object(r.a)([Object(s.b)({readOnly:!0,json:{read:!1}})],V.prototype,"type",void 0),Object(r.a)([Object(s.b)(m.j)],V.prototype,"url",void 0),V=Object(r.a)([Object(o.a)("esri.layers.TileLayer")],V);var M=V;t.default=M},73:function(e,t,i){"use strict";i.d(t,"a",(function(){return s}));var r=i(92),a=i(67);const s={inches:Object(a.a)(1,"meters","inches"),feet:Object(a.a)(1,"meters","feet"),"us-feet":Object(a.a)(1,"meters","us-feet"),yards:Object(a.a)(1,"meters","yards"),miles:Object(a.a)(1,"meters","miles"),"nautical-miles":Object(a.a)(1,"meters","nautical-miles"),millimeters:Object(a.a)(1,"meters","millimeters"),centimeters:Object(a.a)(1,"meters","centimeters"),decimeters:Object(a.a)(1,"meters","decimeters"),meters:Object(a.a)(1,"meters","meters"),kilometers:Object(a.a)(1,"meters","kilometers"),"decimal-degrees":1/Object(a.g)(1,"meters",r.a.radius)}},79:function(e,t,i){"use strict";i.d(t,"a",(function(){return r})),i.d(t,"b",(function(){return a}));i(7);function r(e){}function a(e){return()=>e}},96:function(e,t,i){"use strict";function r(e){return e&&"esri.renderers.visualVariables.SizeVariable"===e.declaredClass}function a(e){return null!=e&&!isNaN(e)&&isFinite(e)}function s(e){return e.valueExpression?"expression":e.field&&"string"==typeof e.field?"field":"unknown"}function l(e,t){const i=t||s(e),r=e.valueUnit||"unknown";return"unknown"===i?"constant":e.stops?"stops":null!=e.minSize&&null!=e.maxSize&&null!=e.minDataValue&&null!=e.maxDataValue?"clamped-linear":"unknown"===r?null!=e.minSize&&null!=e.minDataValue?e.minSize&&e.minDataValue?"proportional":"additive":"identity":"real-world-size"}i.d(t,"a",(function(){return s})),i.d(t,"b",(function(){return l})),i.d(t,"c",(function(){return r})),i.d(t,"d",(function(){return a}))}});