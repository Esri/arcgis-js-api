"use strict";(self.webpackChunkRemoteClient=self.webpackChunkRemoteClient||[]).push([[2730],{92722:(e,t,n)=>{n.d(t,{lG:()=>v,q9:()=>a,my:()=>T,O3:()=>F});var i=n(20102),r=n(70272),o=n(5428),s=n(35671);const l={LineString:"esriGeometryPolyline",MultiLineString:"esriGeometryPolyline",MultiPoint:"esriGeometryMultipoint",Point:"esriGeometryPoint",Polygon:"esriGeometryPolygon",MultiPolygon:"esriGeometryPolygon"};function a(e){return l[e]}function*u(e){switch(e.type){case"Feature":yield e;break;case"FeatureCollection":for(const t of e.features)t&&(yield t)}}function*c(e){if(!e)return null;switch(e.type){case"Point":yield e.coordinates;break;case"LineString":case"MultiPoint":yield*e.coordinates;break;case"MultiLineString":case"Polygon":for(const t of e.coordinates)yield*t;break;case"MultiPolygon":for(const t of e.coordinates)for(const e of t)yield*e}}function d(e){for(const t of e)if(t.length>2)return!0;return!1}function p(e){let t=0;for(let n=0;n<e.length;n++){const i=e[n],r=e[(n+1)%e.length];t+=i[0]*r[1]-r[0]*i[1]}return t<=0}function y(e){const t=e[0],n=e[e.length-1];return t[0]===n[0]&&t[1]===n[1]&&t[2]===n[2]||e.push(t),e}function f(e,t,n){switch(t.type){case"LineString":case"MultiPoint":return function(e,t,n){return h(e,t.coordinates,n),e}(e,t,n);case"MultiLineString":return function(e,t,n){for(const i of t.coordinates)h(e,i,n);return e}(e,t,n);case"MultiPolygon":return function(e,t,n){for(const i of t.coordinates){m(e,i[0],n);for(let t=1;t<i.length;t++)g(e,i[t],n)}return e}(e,t,n);case"Point":return function(e,t,n){return b(e,t.coordinates,n),e}(e,t,n);case"Polygon":return function(e,t,n){const i=t.coordinates;m(e,i[0],n);for(let t=1;t<i.length;t++)g(e,i[t],n);return e}(e,t,n)}}function m(e,t,n){const i=y(t);!function(e){return!p(e)}(i)?h(e,i,n):w(e,i,n)}function g(e,t,n){const i=y(t);!function(e){return p(e)}(i)?h(e,i,n):w(e,i,n)}function h(e,t,n){for(const i of t)b(e,i,n);e.lengths.push(t.length)}function w(e,t,n){for(let i=t.length-1;i>=0;i--)b(e,t[i],n);e.lengths.push(t.length)}function b(e,t,n){const[i,r,o]=t;e.coords.push(i,r),n.hasZ&&e.coords.push(o||0)}function S(e){switch(typeof e){case"string":return"esriFieldTypeString";case"number":return"esriFieldTypeDouble";default:return"unknown"}}function F(e){if(!e)throw new i.Z("geojson-layer:empty","GeoJSON data is empty");if("Feature"!==e.type&&"FeatureCollection"!==e.type)throw new i.Z("geojson-layer:unsupported-geojson-object","missing or not supported GeoJSON object type",{data:e});const{crs:t}=e;if(!t)return;const n="string"==typeof t?t:"name"===t.type?t.properties.name:"EPSG"===t.type?t.properties.code:null,r=new RegExp(".*(CRS84H?|4326)$","i");if(!n||!r.test(n))throw new i.Z("geojson-layer:unsupported-crs","unsupported GeoJSON 'crs' member",{crs:t})}function T(e,t={}){const n=[],i=new Set,r=new Set;let o,l=!1,p=null,y=!1,{geometryType:f=null}=t,m=!1;for(const t of u(e)){const{geometry:e,properties:s,id:u}=t;if((!e||(f||(f=a(e.type)),a(e.type)===f))&&(l||(l=d(c(e))),y||(y=null!=u,y&&(o=typeof u,p=Object.keys(s).filter((e=>s[e]===u)))),y&&null!=u&&(p.length>1?p=p.filter((e=>s[e]===u)):1===p.length&&(p=s[p[0]]===u?p:[])),!m&&s)){let e=!0;for(const t in s){if(i.has(t))continue;const o=s[t];if(null==o){e=!1,r.add(t);continue}const l=S(o);"unknown"!==l?(r.delete(t),i.add(t),n.push({name:t,alias:t,type:l})):r.add(t)}m=e}}const g=p&&1===p.length&&p[0]||null;if(g)for(const e of n)if(e.name===g&&(0,s.H7)(e)){e.type="esriFieldTypeOID";break}return{fields:n,geometryType:f,hasZ:l,objectIdFieldName:g,objectIdFieldType:o,unknownFields:Array.from(r)}}function v(e,t){return Array.from(function*(e,t={}){const{geometryType:n,objectIdField:i}=t;for(const l of e){var s;const{geometry:e,properties:u,id:c}=l;if(e&&a(e.type)!==n)continue;const d=u||{};let p=null!=(s=d[i])?s:null;i&&null!=c&&!d[i]&&(d[i]=p=c);const y=new r.ZP(e?f(new o.Z,e,t):null,d,null,p);yield y}}(u(e),t))}},25278:(e,t,n)=>{n.d(t,{MS:()=>c,Dm:()=>a,Hq:()=>u,bU:()=>l});var i=n(80442),r=n(22974),o=n(61159),s=n(58333);function l(e){return{renderer:{type:"simple",symbol:"esriGeometryPoint"===e||"esriGeometryMultipoint"===e?s.I4:"esriGeometryPolyline"===e?s.ET:s.lF}}}function a(e,t){if((0,i.Z)("esri-csp-restrictions"))return()=>({[t]:null,...e});try{let n=`this.${t} = null;`;for(const t in e)n+=`this${t.includes(".")?`["${t}"]`:`.${t}`} = ${JSON.stringify(e[t])};`;const i=new Function(n);return()=>new i}catch(n){return()=>({[t]:null,...e})}}function u(e={}){return[{name:"New Feature",description:"",prototype:{attributes:(0,r.d9)(e)}}]}function c(e,t){return{attachment:null,data:{isVersioned:!1,supportsAttachment:!1,supportsM:!1,supportsZ:e},metadata:{supportsAdvancedFieldProperties:!1},operations:{supportsCalculate:!1,supportsTruncate:!1,supportsValidateSql:!1,supportsAdd:t,supportsDelete:t,supportsEditing:t,supportsChangeTracking:!1,supportsQuery:!0,supportsQueryAttachments:!1,supportsResizeAttachments:!1,supportsSync:!1,supportsUpdate:t,supportsExceedsLimitStatistics:!0},query:o.g,queryRelated:{supportsCount:!0,supportsOrderBy:!0,supportsPagination:!0},editing:{supportsGeometryUpdate:t,supportsGlobalId:!1,supportsReturnServiceEditsInSourceSpatialReference:!1,supportsRollbackOnFailure:!1,supportsUpdateWithoutM:!1,supportsUploadWithItemId:!1,supportsDeleteByAnonymous:!1,supportsDeleteByOthers:!1,supportsUpdateByAnonymous:!1,supportsUpdateByOthers:!1}}}},16467:(e,t,n)=>{n.d(t,{$9:()=>w,Lu:()=>h,w9:()=>b,j:()=>S,G4:()=>F,gp:()=>T,eS:()=>v,d:()=>j,yN:()=>I,WW:()=>k}),n(66577);var i=n(3172),r=n(20102),o=n(92604),s=n(70586),l=n(8744),a=n(40488),u=n(98732),c=n(44876),d=n(92722),p=n(25278),y=n(99514),f=n(86719),m=n(82971);const g=o.Z.getLogger("esri.layers.graphics.sources.ogcfeature"),h="http://www.opengis.net/def/crs/",w=`${h}OGC/1.3/CRS84`;async function b(e,t,n={},o=5){const{links:l}=e,a=N(l,"items","application/geo+json")||N(l,"http://www.opengis.net/def/rel/ogc/1.0/items","application/geo+json");if((0,s.Wi)(a))throw new r.Z("ogc-feature-layer:missing-items-page","Missing items url");const{data:u}=await(0,i.default)(a.href,{signal:n.signal,query:{limit:o,...n.customParameters,token:n.apiKey},headers:{accept:"application/geo+json"}});await(0,d.O3)(u);const c=(0,d.my)(u,{geometryType:t.geometryType}),m=t.fields||c.fields||[],h=null!=t.hasZ?t.hasZ:c.hasZ,w=c.geometryType,b=t.objectIdField||c.objectIdFieldName||"OBJECTID";let S=t.timeInfo;const F=m.find((e=>e.name===b));if(F)F.type="esriFieldTypeOID",F.editable=!1,F.nullable=!1;else{if(!c.objectIdFieldType)throw new r.Z("ogc-feature-layer:missing-feature-id","Collection geojson require a feature id as a unique identifier");m.unshift({name:b,alias:b,type:"esriFieldTypeOID",editable:!1,nullable:!1})}if(b!==c.objectIdFieldName){const e=m.find((e=>e.name===c.objectIdFieldName));e&&(e.type="esriFieldTypeInteger")}m===c.fields&&c.unknownFields.length>0&&g.warn({name:"ogc-feature-layer:unknown-field-types",message:"Some fields types couldn't be inferred from the features and were dropped",details:{unknownFields:c.unknownFields}});for(const e of m){if(null==e.name&&(e.name=e.alias),null==e.alias&&(e.alias=e.name),"esriFieldTypeOID"!==e.type&&"esriFieldTypeGlobalID"!==e.type&&(e.editable=null==e.editable||!!e.editable,e.nullable=null==e.nullable||!!e.nullable),!e.name)throw new r.Z("ogc-feature-layer:invalid-field-name","field name is missing",{field:e});if(-1===f.v.jsonValues.indexOf(e.type))throw new r.Z("ogc-feature-layer:invalid-field-type",`invalid type for field "${e.name}"`,{field:e})}if(S){const e=new y.Z(m);if(S.startTimeField){const t=e.get(S.startTimeField);t?(S.startTimeField=t.name,t.type="esriFieldTypeDate"):S.startTimeField=null}if(S.endTimeField){const t=e.get(S.endTimeField);t?(S.endTimeField=t.name,t.type="esriFieldTypeDate"):S.endTimeField=null}if(S.trackIdField){const t=e.get(S.trackIdField);t?S.trackIdField=t.name:(S.trackIdField=null,g.warn({name:"ogc-feature-layer:invalid-timeInfo-trackIdField",message:"trackIdField is missing",details:{timeInfo:S}}))}S.startTimeField||S.endTimeField||(g.warn({name:"ogc-feature-layer:invalid-timeInfo",message:"startTimeField and endTimeField are missing",details:{timeInfo:S}}),S=null)}return{drawingInfo:w?(0,p.bU)(w):null,geometryType:w,fields:m,hasZ:!!h,objectIdField:b,timeInfo:S}}async function S(e,t={}){const{links:n}=e,o=N(n,"data","application/json")||N(n,"http://www.opengis.net/def/rel/ogc/1.0/data","application/json");if((0,s.Wi)(o))throw new r.Z("ogc-feature-layer:missing-collections-page","Missing collections url");const{apiKey:l,customParameters:a,signal:u}=t,{data:c}=await(0,i.default)(o.href,{signal:u,headers:{accept:"application/json"},query:{...a,token:l}});return c}async function F(e,t={}){const{links:n}=e,o=N(n,"conformance","application/json")||N(n,"http://www.opengis.net/def/rel/ogc/1.0/conformance","application/json");if((0,s.Wi)(o))throw new r.Z("ogc-feature-layer:missing-conformance-page","Missing conformance url");const{apiKey:l,customParameters:a,signal:u}=t,{data:c}=await(0,i.default)(o.href,{signal:u,headers:{accept:"application/json"},query:{...a,token:l}});return c}async function T(e,t={}){const{apiKey:n,customParameters:r,signal:o}=t,{data:s}=await(0,i.default)(e,{signal:o,headers:{accept:"application/json"},query:{...r,token:n}});return s}async function v(e,t={}){const n="application/vnd.oai.openapi+json;version=3.0",r=N(e.links,"service-desc",n);if((0,s.Wi)(r))return g.warn("ogc-feature-layer:missing-openapi-page","The OGC API-Features server does not have an OpenAPI page."),null;const{apiKey:o,customParameters:l,signal:a}=t,{data:u}=await(0,i.default)(r.href,{signal:a,headers:{accept:n},query:{...l,token:o}});return u}function j(e){const t=/^http:\/\/www\.opengis.net\/def\/crs\/(?<authority>.*)\/(?<version>.*)\/(?<code>.*)$/i.exec(e),n=null==t?void 0:t.groups;if(!n)return null;const{authority:i,code:r}=n;switch(i.toLowerCase()){case"ogc":switch(r.toLowerCase()){case"crs27":return m.Z.GCS_NAD_1927.wkid;case"crs83":return 4269;case"crs84":case"crs84h":return m.Z.WGS84.wkid;default:return null}case"esri":case"epsg":{const e=Number.parseInt(r,10);return Number.isNaN(e)?null:e}default:return null}}async function I(e,t,n){const i=await k(e,t,n);return(0,u.cn)(i)}async function k(e,t,n){const{capabilities:{query:{maxRecordCount:o}},collection:p,layerDefinition:y,queryParameters:{apiKey:f,customParameters:g},spatialReference:h,supportedCrs:w}=e,{links:b}=p,S=N(b,"items","application/geo+json")||N(b,"http://www.opengis.net/def/rel/ogc/1.0/items","application/geo+json");if((0,s.Wi)(S))throw new r.Z("ogc-feature-layer:missing-items-page","Missing items url");const{geometry:F,num:T,start:v,timeExtent:j,where:I}=t;if(t.objectIds)throw new r.Z("ogc-feature-layer:query-by-objectids-not-supported","Queries with objectids are not supported");const k=m.Z.fromJSON(h),O=(0,s.Pt)(t.outSpatialReference,k),P=O.isWGS84?null:C(O,w),Z=V(F,w),x=function(e){if((0,s.Wi)(e))return null;const{start:t,end:n}=e;return`${(0,s.pC)(t)?t.toISOString():".."}/${(0,s.pC)(n)?n.toISOString():".."}`}(j),G=(D=I,(0,s.Wi)(D)||!D||"1=1"===D?null:D),M=null!=T?T:null!=v&&void 0!==v?10:o,{data:_}=await(0,i.default)(S.href,{...n,query:{...g,...Z,crs:P,datetime:x,query:G,limit:M,startindex:v,token:f},headers:{accept:"application/geo+json"}});var D;let q=!1;_.links&&(q=!!_.links.find((e=>"next"===e.rel))),!q&&Number.isInteger(_.numberMatched)&&Number.isInteger(_.numberReturned)&&(q=_.numberReturned<_.numberMatched);const{fields:L,globalIdField:R,hasM:W,hasZ:J,objectIdField:$}=y,A=y.geometryType,B=(0,d.lG)(_,{geometryType:A,hasZ:J,objectIdField:$});if(!P&&O.isWebMercator)for(const e of B)if((0,s.pC)(e.geometry)){const t=(0,u.di)(e.geometry,A,J,!1);t.spatialReference=m.Z.WGS84,e.geometry=(0,u.GH)((0,a.iV)(t,O))}for(const e of B)e.objectId=e.attributes[$];const E=P||!P&&O.isWebMercator?O.toJSON():l.Zn,U=new c.Z;return U.exceededTransferLimit=q,U.features=B,U.fields=L,U.geometryType=A,U.globalIdFieldName=R,U.hasM=W,U.hasZ=J,U.objectIdFieldName=$,U.spatialReference=E,U}function C(e,t){var n,i,r;const{isWebMercator:o,wkid:s}=e;if(!s)return null;const l=o?null!=(n=null!=(i=null!=(r=t[3857])?r:t[102100])?i:t[102113])?n:t[900913]:t[e.wkid];return l?`${h}${l}`:null}function O(e){if((0,s.Wi)(e))return"";const{xmin:t,ymin:n,xmax:i,ymax:r}=e;return`${t},${n},${i},${r}`}function V(e,t){if(!function(e){return(0,s.pC)(e)&&"extent"===e.type}(e))return null;const{spatialReference:n}=e;if(!n||n.isWGS84)return{bbox:O(e)};const i=C(n,t);return(0,s.pC)(i)?{bbox:O(e),"bbox-crs":i}:n.isWebMercator?{bbox:O((0,a.iV)(e,m.Z.WGS84))}:null}function N(e,t,n){return e.find((e=>e.rel===t&&e.type===n))||e.find((e=>e.rel===t&&!e.type))}},1231:(e,t,n)=>{n.d(t,{Z:()=>g});var i,r=n(43697),o=n(35454),s=n(10736),l=n(5600),a=(n(67676),n(80442),n(75215)),u=n(36030),c=n(71715),d=n(52011),p=n(72729),y=n(86719);const f=new o.Xn({binary:"binary",coordinate:"coordinate",countOrAmount:"count-or-amount",dateAndTime:"date-and-time",description:"description",locationOrPlaceName:"location-or-place-name",measurement:"measurement",nameOrTitle:"name-or-title",none:"none",orderedOrRanked:"ordered-or-ranked",percentageOrRatio:"percentage-or-ratio",typeOrCategory:"type-or-category",uniqueIdentifier:"unique-identifier"});let m=i=class extends s.wq{constructor(e){super(e),this.alias=null,this.defaultValue=void 0,this.description=null,this.domain=null,this.editable=!0,this.length=-1,this.name=null,this.nullable=!0,this.type=null,this.valueType=null}readDescription(e,{description:t}){let n;try{n=JSON.parse(t)}catch(e){}return n?n.value:null}readValueType(e,{description:t}){let n;try{n=JSON.parse(t)}catch(e){}return n?f.fromJSON(n.fieldValueType):null}clone(){return new i({alias:this.alias,defaultValue:this.defaultValue,description:this.description,domain:this.domain&&this.domain.clone()||null,editable:this.editable,length:this.length,name:this.name,nullable:this.nullable,type:this.type,valueType:this.valueType})}};(0,r._)([(0,l.Cb)({type:String,json:{write:!0}})],m.prototype,"alias",void 0),(0,r._)([(0,l.Cb)({type:[String,Number],json:{write:{allowNull:!0}}})],m.prototype,"defaultValue",void 0),(0,r._)([(0,l.Cb)()],m.prototype,"description",void 0),(0,r._)([(0,c.r)("description")],m.prototype,"readDescription",null),(0,r._)([(0,l.Cb)({types:p.V5,json:{read:{reader:p.im},write:!0}})],m.prototype,"domain",void 0),(0,r._)([(0,l.Cb)({type:Boolean,json:{write:!0}})],m.prototype,"editable",void 0),(0,r._)([(0,l.Cb)({type:a.z8,json:{write:!0}})],m.prototype,"length",void 0),(0,r._)([(0,l.Cb)({type:String,json:{write:!0}})],m.prototype,"name",void 0),(0,r._)([(0,l.Cb)({type:Boolean,json:{write:!0}})],m.prototype,"nullable",void 0),(0,r._)([(0,u.J)(y.v)],m.prototype,"type",void 0),(0,r._)([(0,l.Cb)()],m.prototype,"valueType",void 0),(0,r._)([(0,c.r)("valueType",["description"])],m.prototype,"readValueType",null),m=i=(0,r._)([(0,d.j)("esri.layers.support.Field")],m);const g=m},72729:(e,t,n)=>{n.d(t,{im:()=>I,V5:()=>j}),n(80442);var i,r=n(43697),o=n(22974),s=n(5600),l=(n(75215),n(36030)),a=n(52011),u=n(10736);n(67676);let c=i=class extends u.wq{constructor(e){super(e),this.name=null,this.code=null}clone(){return new i({name:this.name,code:this.code})}};(0,r._)([(0,s.Cb)({type:String,json:{write:!0}})],c.prototype,"name",void 0),(0,r._)([(0,s.Cb)({type:[String,Number],json:{write:!0}})],c.prototype,"code",void 0),c=i=(0,r._)([(0,a.j)("esri.layers.support.CodedValue")],c);const d=c,p=new(n(35454).Xn)({inherited:"inherited",codedValue:"coded-value",range:"range"});let y=class extends u.wq{constructor(e){super(e),this.name=null,this.type=null}};(0,r._)([(0,s.Cb)({type:String,json:{write:!0}})],y.prototype,"name",void 0),(0,r._)([(0,l.J)(p)],y.prototype,"type",void 0),y=(0,r._)([(0,a.j)("esri.layers.support.Domain")],y);const f=y;var m;let g=m=class extends f{constructor(e){super(e),this.codedValues=null,this.type="coded-value"}getName(e){let t=null;if(this.codedValues){const n=String(e);this.codedValues.some((e=>(String(e.code)===n&&(t=e.name),!!t)))}return t}clone(){return new m({codedValues:(0,o.d9)(this.codedValues),name:this.name})}};(0,r._)([(0,s.Cb)({type:[d],json:{write:!0}})],g.prototype,"codedValues",void 0),(0,r._)([(0,l.J)({codedValue:"coded-value"})],g.prototype,"type",void 0),g=m=(0,r._)([(0,a.j)("esri.layers.support.CodedValueDomain")],g);const h=g;var w;n(92604),n(37697);let b=w=class extends f{constructor(e){super(e),this.type="inherited"}clone(){return new w}};(0,r._)([(0,l.J)({inherited:"inherited"})],b.prototype,"type",void 0),b=w=(0,r._)([(0,a.j)("esri.layers.support.InheritedDomain")],b);const S=b;var F;let T=F=class extends f{constructor(e){super(e),this.maxValue=null,this.minValue=null,this.type="range"}clone(){return new F({maxValue:this.maxValue,minValue:this.minValue,name:this.name})}};(0,r._)([(0,s.Cb)({type:Number,json:{type:[Number],read:{source:"range",reader:(e,t)=>t.range&&t.range[1]},write:{enabled:!1,overridePolicy(){return{enabled:null!=this.maxValue&&null==this.minValue}},target:"range",writer(e,t,n){t[n]=[this.minValue||0,e]}}}})],T.prototype,"maxValue",void 0),(0,r._)([(0,s.Cb)({type:Number,json:{type:[Number],read:{source:"range",reader:(e,t)=>t.range&&t.range[0]},write:{target:"range",writer(e,t,n){t[n]=[e,this.maxValue||0]}}}})],T.prototype,"minValue",void 0),(0,r._)([(0,l.J)({range:"range"})],T.prototype,"type",void 0),T=F=(0,r._)([(0,a.j)("esri.layers.support.RangeDomain")],T);const v=T,j={key:"type",base:f,typeMap:{range:T,"coded-value":h,inherited:S}};function I(e){if(!e||!e.type)return null;switch(e.type){case"range":return v.fromJSON(e);case"codedValue":return h.fromJSON(e);case"inherited":return S.fromJSON(e)}return null}},86719:(e,t,n)=>{n.d(t,{v:()=>i});const i=new(n(35454).Xn)({esriFieldTypeSmallInteger:"small-integer",esriFieldTypeInteger:"integer",esriFieldTypeSingle:"single",esriFieldTypeDouble:"double",esriFieldTypeLong:"long",esriFieldTypeString:"string",esriFieldTypeDate:"date",esriFieldTypeOID:"oid",esriFieldTypeGeometry:"geometry",esriFieldTypeBlob:"blob",esriFieldTypeRaster:"raster",esriFieldTypeGUID:"guid",esriFieldTypeGlobalID:"global-id",esriFieldTypeXML:"xml"})},58333:(e,t,n)=>{n.d(t,{I4:()=>r,lF:()=>s,ET:()=>o,qP:()=>l,eG:()=>a,lj:()=>c,wW:()=>u});const i=[252,146,31,255],r={type:"esriSMS",style:"esriSMSCircle",size:6,color:i,outline:{type:"esriSLS",style:"esriSLSSolid",width:.75,color:[153,153,153,255]}},o={type:"esriSLS",style:"esriSLSSolid",width:.75,color:i},s={type:"esriSFS",style:"esriSFSSolid",color:[252,146,31,196],outline:{type:"esriSLS",style:"esriSLSSolid",width:.75,color:[255,255,255,191]}},l={type:"esriTS",color:[255,255,255,255],font:{family:"arial-unicode-ms",size:10,weight:"bold"},horizontalAlignment:"center",kerning:!0,haloColor:[0,0,0,255],haloSize:1,rotated:!1,text:"",xoffset:0,yoffset:0,angle:0},a={type:"esriSMS",style:"esriSMSCircle",color:[0,0,0,255],outline:null,size:10.5},u={type:"esriSLS",style:"esriSLSSolid",color:[0,0,0,255],width:1.5},c={type:"esriSFS",style:"esriSFSSolid",color:[0,0,0,255],outline:null}}}]);