var RemoteClient=function(e){self.webpackChunkRemoteClient=function(t,r){for(var s in r)e[s]=r[s];for(;t.length;)n[t.pop()]=1};var t={},n={26:1};function r(n){if(t[n])return t[n].exports;var s=t[n]={i:n,l:!1,exports:{}};return e[n].call(s.exports,s,s.exports,r),s.l=!0,s.exports}return r.e=function(e){var t=[];return t.push(Promise.resolve().then((function(){n[e]||importScripts(r.p+"chunks/"+{0:"5f503790cd391b7d6ce7",1:"c9c78b30a17fe8b57206",2:"803001ed03a74a3b5590",3:"2e0c6557344fbd1843fb",4:"3f9d6bf8d09cee4bd262",5:"7f40839b4525ea13299a",6:"328c0e9014710f2e4e34",7:"ffd22a3d34e5cd5daac7",8:"68dc0df7ef6036981be5",9:"eb58d905e0f60b8c31d0",10:"39f799d1f9797a5fc613",11:"285b9c50a97fc38b2313",12:"72f5f9ad39aebb51d617",13:"8299c0a2c36490a66748",14:"2431cf0a90e3364687c6",15:"10bdd2bb72790b059982",16:"3303af03f647e281d2dd",17:"001d5451e911dba372c2",18:"ea8f0e27b8f6a7d3db73",19:"ef99ebca84dd8c501dea",20:"12214fae8947d5a3421d",21:"484fca0d2e7730f67774",22:"47a2c2c4e67b47430131",23:"0e3b8700ff4a85e278f0",24:"a3bcd69c059f4f2eafe0",25:"7bca2c0635968e1d6b20",27:"15c1be04192b7d263051",28:"f3a254c2598dc3197b9e",29:"81ff773d6111bc343cb7",30:"bf89617ba6fd40484543",31:"0e69459058795ae9bdd0",32:"c365f8d778631348a2c0",33:"c807c659e7069a516b23",34:"631d29e907ae9e10c0bb",35:"9a9bbb613d3eba8882db",36:"acfc7ae636c2889567d3",37:"121f6b7a0da064c357bc",38:"a83a0c96a05d4abaafe5",39:"f81ae57f63dc1caf3801",40:"b7a29d26361957c69009",41:"44bfd4dbfa1ff1defa14",42:"87f777a0c86fed186884",43:"f4522392149c1419047d",44:"2489a5395fd67374e981",45:"a0bce22c3b6234aa5a71",46:"ee66b742c0d40ad6b18d",47:"b9d31f079eaba423066c",48:"5132170af05647a4c596",49:"a16fcb45d3e7279bea79",50:"f8e1a333ce2cce4817f2",51:"6120231eb4b37b05835b",52:"062837f46df18e68b391",53:"f18eac85ca5aad644da6",54:"e168660313a725c72f7b",55:"22dc374854a3b5248c97",56:"d60093b998bf09b12290",57:"05d986e68ec0529ce7b5",58:"701e618ce11089eeb744",59:"eec90d737371e6cafc77",60:"99b0483e93cc4ae4262d",61:"2f45ead3776a52e256c8",62:"0935e471f1a487d2f4f0",63:"d239959c2802814e603b",64:"4e6ef3d9da22f1dd6737",65:"7844d4ddb1b5fcb58192",66:"cbd49f692c6c09ffb8c7",67:"f417f85f05183be7a99b",68:"fbf995cb10ea15f31cd3",69:"997630140e0d00ae3d3b",70:"395774c9b49fcaec1e55",71:"a732885daf42d5b2f838",72:"2a1dc95364ad51649644",73:"be71d18b38ff82043f73",74:"74523aba9dd8f8de17cd",75:"cb38f0aff25849f0fa9e",76:"9fed614ad20c95670d01",77:"70ed26d562847d6656f2",78:"d038387542af84664ce4",79:"4b2383d6231f2425858a",80:"bc5f1e13ea345e2f1302",81:"3c36360279939b3c0d17",82:"b44fc78a65c4c5795b52",83:"1575413dab2f64df8596",84:"0bd97acab4bd012e0622",85:"0e6f5fcfe116e4c7dcee",86:"5c3b2bf0d5a89f784b6c",87:"0cad667b329b1d116af6",88:"7717f99d14c826f42021",89:"5ec0d98d188b0f280230",90:"073f29f69e0fa0f71c16",91:"959ab2bd88d602273559",92:"01980068940fc910d0ac",93:"76fd290c447b4bdee4bb",94:"ad26b3cb2343af7d37fd",95:"cf82489c3250f22496e6",96:"d40529b92f7a6d911171",97:"8ea2587d24faf62715e0",98:"eb5a8d1d627830a18d8b",99:"beea1f8ba573fcbb0c8f",100:"082ee4b45bf768adac1f",101:"8523af28b1a01d15dd42",102:"0f979e3f7a9dd0c374dd",103:"5386e400758c41ed246f",104:"5ddf70214a0b23403a1b",105:"2d826c8ec898e01ff233",106:"7632675f61bbaab61315",107:"6d2030cb0f92996b1922",108:"6491f9aa177aaa58e39d",109:"84a0b1f82de490658360",110:"aed0349406e064156ee9",111:"4caf289e4cb238aad915",112:"409e7c98c49727652547",113:"c6e201635e63ed601be8",114:"ecd9598509357e55b028",115:"27147ab73f9034cd819c",116:"b608457c0bebeffe0c55",117:"96fa148a30d83bb22f62",118:"7485b1fa2f0a960f555a",119:"062b6a7ddef821720fa2",120:"1f5704cf07545f6f8d72",121:"7dc7ef68763b68944cfd",122:"92e7a74a1d656aacc7c1",123:"a3366ea9cae92743b697",124:"3cc4e7b9c81af6bb81aa",125:"1dbdabcb0481ab4d7225",126:"07c029e54fef8d9b49a4",127:"c6312f006bec7fe452c8",128:"1562873948b092e0c048",129:"025ca0fafb8a74499ff9",130:"7d17600f5fc32b29e9f1",131:"a794a5543316feabd3dc",132:"16f56ce928c9b1d0d2cc",133:"8630d1f057bbcadb8f75",134:"464aba126314fb43f913",135:"9e05f2c9d134578209c4",136:"6d18912386ee073c9e9d",137:"38dbe3da5d580530d9a8",138:"8fd2c31d3c04d1743696",139:"8086cc71906764fb0182",140:"1434239c796d3d4acdd7",141:"a3cbdbef3209e479ac2d",142:"9c7a7b16425cc2d0bdfa",143:"729e7b498da81738739a",144:"f0944b2ae0889f277a16",145:"021d417ab0b0d1223601",146:"ac9193cd1447a8791bd7",147:"931d8c9d53a87f0d6365",148:"ad3a47a4c2b5d8db5c96",149:"483f270b8f510473c9be",150:"bfca3bb6b5728a588832",151:"9f48f417480b78de1900",152:"9fd62deed246f72cc8bf",153:"f956ec1d0c6d26ca32a0",154:"489e3d3484844077332a",155:"6c326fbad9995666b4cb",156:"b635007c6001000945f1",157:"0e03f92c94376d8c8b1e",158:"8e50135726f50fc29346",159:"818eef0915d0d493b517",160:"8d42b240a802d6916373",161:"ff7cf68c93198bca54f0",162:"760c2929cf941b7131e4",163:"5c4fc9c77a293cfff989",164:"292d1d609c98934eb7eb",165:"4adcd4644d77196c6f16",166:"33da31df007522b91396",167:"14f86846e19c322efff5",168:"986a791bdaf524b5d485"}[e]+".js")}))),Promise.all(t)},r.m=e,r.c=t,r.d=function(e,t,n){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},r.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var s in e)r.d(n,s,function(t){return e[t]}.bind(null,s));return n},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="",r(r.s=52)}([function(e,t,n){"use strict";n.d(t,"a",(function(){return b})),n.d(t,"b",(function(){return _})),n.d(t,"c",(function(){return a})),n.d(t,"d",(function(){return u})),n.d(t,"e",(function(){return h})),n.d(t,"f",(function(){return g})),n.d(t,"g",(function(){return s})),n.d(t,"h",(function(){return r})),n.d(t,"i",(function(){return o})),n.d(t,"j",(function(){return d})),n.d(t,"k",(function(){return p})),n.d(t,"l",(function(){return f})),n.d(t,"m",(function(){return l})),n.d(t,"n",(function(){return i})),n.d(t,"o",(function(){return c}));function r(e){return null!=e}function s(e){return null==e}function o(e){return void 0===e}function i(e){return e}function c(e,t){return r(e)?e:"function"==typeof t?t():t}function a(e){return r(e)&&e.destroy(),null}function u(e){return r(e)&&e.dispose(),null}function l(e){return r(e)&&e.remove(),null}function f(e){return null}function d(e,t){const n=new Array;for(const r of e)n.push(p(r,null,t));return n}function h(e,t){for(const n of e)p(n,null,t)}function p(e,t,n){return r(e)?n(e):t}function b(e,t){return r(e)?t(e):null}function g(e,...t){let n=e,r=0;for(;r<t.length&&n;)n=n[t[r++]];return n}function _(e){return e}},function(e,t,n){"use strict";(function(e){const n="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:void 0!==e?e:void 0;t.a=n}).call(this,n(51))},function(e,t,n){"use strict";n(3);var r=n(19),s=n(0),o=n(39);const i={info:0,warn:1,error:2,none:3};class c{constructor(e){this.level=null,this._module="",this._parent=null,this.writer=null,this._loggedMessages={error:new Map,warn:new Map,info:new Map},null!=e.level&&(this.level=e.level),null!=e.writer&&(this.writer=e.writer),this._module=e.module,c._loggers[this.module]=this;const t=this.module.lastIndexOf(".");-1!==t&&(this._parent=c.getLogger(this.module.slice(0,t)))}get module(){return this._module}get parent(){return this._parent}error(...e){this._log("error","always",...e)}warn(...e){this._log("warn","always",...e)}info(...e){this._log("info","always",...e)}errorOnce(...e){this._log("error","once",...e)}warnOnce(...e){this._log("warn","once",...e)}infoOnce(...e){this._log("info","once",...e)}errorOncePerTick(...e){this._log("error","oncePerTick",...e)}warnOncePerTick(...e){this._log("warn","oncePerTick",...e)}infoOncePerTick(...e){this._log("info","oncePerTick",...e)}get test(){const e=this;return{loggedMessages:e._loggedMessages,clearLoggedWarnings:()=>e._loggedMessages.warn.clear()}}static get testSingleton(){return{resetLoggers(e={}){const t=c._loggers;return c._loggers=e,t},set throttlingDisabled(e){c._throttlingDisabled=e}}}static getLogger(e){let t=c._loggers[e];return t||(t=new c({module:e})),t}_log(e,t,...n){if(this._matchLevel(e)){if("always"!==t&&!c._throttlingDisabled){const r=this._argsToKey(n),s=this._loggedMessages[e].get(r);if("once"===t&&null!=s||"oncePerTick"===t&&s&&s>=c._tickCounter)return;this._loggedMessages[e].set(r,c._tickCounter),c._scheduleTickCounterIncrement()}for(const t of r.a.log.interceptors)if(t(e,this.module,...n))return;this._inheritedWriter()(e,this.module,...n)}}_parentWithMember(e,t){let n=this;for(;Object(s.h)(n);){const t=n[e];if(Object(s.h)(t))return t;n=n.parent}return t}_inheritedWriter(){return this._parentWithMember("writer",this._consoleWriter)}_consoleWriter(e,t,...n){console[e](`[${t}]`,...n)}_matchLevel(e){const t=r.a.log.level?r.a.log.level:"warn";return i[this._parentWithMember("level",t)]<=i[e]}_argsToKey(...e){return Object(o.b)(JSON.stringify(e,(e,t)=>"object"!=typeof t||Array.isArray(t)?t:"[Object]"))}static _scheduleTickCounterIncrement(){c._tickCounterScheduled||(c._tickCounterScheduled=!0,Promise.resolve().then(()=>{c._tickCounter++,c._tickCounterScheduled=!1}))}}c._loggers={},c._tickCounter=0,c._tickCounterScheduled=!1,c._throttlingDisabled=!1,t.a=c},function(e,t,n){"use strict";var r,s,o=n(1);let i;var c,a;function u(e){return"function"==typeof i[e]?i[e]=i[e](o.a):i[e]}i=null!=(r=o.a.dojoConfig)&&r.has||null!=(s=o.a.esriConfig)&&s.has?{...null==(c=o.a.dojoConfig)?void 0:c.has,...null==(a=o.a.esriConfig)?void 0:a.has}:{},u.add=(e,t,n,r)=>((r||void 0===i[e])&&(i[e]=t),n&&u(e)),u.cache=i,u.add("esri-deprecation-warnings",!0),(()=>{u.add("host-webworker",void 0!==o.a.WorkerGlobalScope&&self instanceof o.a.WorkerGlobalScope);const e="undefined"!=typeof window&&"undefined"!=typeof location&&"undefined"!=typeof document&&window.location===location&&window.document===document;if(u.add("host-browser",e),u.add("host-node","object"==typeof o.a.process&&o.a.process.versions&&o.a.process.versions.node&&o.a.process.versions.v8),u.add("dom",e),u("host-browser")){const e=navigator,t=e.userAgent,n=e.appVersion,r=parseFloat(n);if(u.add("wp",parseFloat(t.split("Windows Phone")[1])||void 0),u.add("msapp",parseFloat(t.split("MSAppHost/")[1])||void 0),u.add("khtml",n.indexOf("Konqueror")>=0?r:void 0),u.add("edge",parseFloat(t.split("Edge/")[1])||void 0),u.add("opr",parseFloat(t.split("OPR/")[1])||void 0),u.add("webkit",!u("wp")&&!u("edge")&&parseFloat(t.split("WebKit/")[1])||void 0),u.add("chrome",!u("edge")&&!u("opr")&&parseFloat(t.split("Chrome/")[1])||void 0),u.add("android",!u("wp")&&parseFloat(t.split("Android ")[1])||void 0),u.add("safari",!(n.indexOf("Safari")>=0)||u("wp")||u("chrome")||u("android")||u("edge")||u("opr")?void 0:parseFloat(n.split("Version/")[1])),u.add("mac",n.indexOf("Macintosh")>=0),u.add("quirks","BackCompat"===document.compatMode),!u("wp")&&t.match(/(iPhone|iPod|iPad)/)){const e=RegExp.$1.replace(/P/,"p"),n=t.match(/OS ([\d_]+)/)?RegExp.$1:"1",r=parseFloat(n.replace(/_/,".").replace(/_/g,""));u.add(e,r),u.add("ios",r)}u.add("trident",parseFloat(n.split("Trident/")[1])||void 0),u.add("svg","undefined"!=typeof SVGAngle),u("webkit")||(t.indexOf("Opera")>=0&&u.add("opera",r>=9.8&&parseFloat(t.split("Version/")[1])||r),!(t.indexOf("Gecko")>=0)||u("wp")||u("khtml")||u("trident")||u("edge")||u.add("mozilla",r),u("mozilla")&&u.add("ff",parseFloat(t.split("Firefox/")[1]||t.split("Minefield/")[1])||void 0))}})(),(()=>{if(o.a.navigator){const e=navigator.userAgent,t=e.match(/Android|webOS|iPhone|iPad|iPod|BlackBerry|Opera Mini|IEMobile/i),n=e.match(/iPhone/i);t&&u.add("esri-mobile",t),n&&u.add("esri-iPhone",n),u.add("esri-geolocation",!!navigator.geolocation)}u.add("esri-canvas-svg-support",!u("trident")),u.add("esri-wasm","WebAssembly"in o.a),u.add("esri-shared-array-buffer",()=>{const e="SharedArrayBuffer"in o.a,t=!1===o.a.crossOriginIsolated;return e&&!t}),u.add("esri-atomics","Atomics"in o.a),u.add("esri-workers","Worker"in o.a),u.add("esri-text-decoder","TextDecoder"in o.a),u.add("esri-text-encoder","TextEncoder"in o.a),u.add("featurelayer-snapshot-enabled",!0),u.add("featurelayer-snapshot-point-min-threshold",8e4),u.add("featurelayer-snapshot-point-max-threshold",4e5),u.add("featurelayer-snapshot-point-coverage",.1),u.add("featurelayer-advanced-symbols",!1),u.add("featurelayer-pbf",!0),u.add("featurelayer-pbf-statistics",!1),u.add("feature-layers-workers",!0),u.add("mapview-transitions-duration",200),u.add("mapserver-pbf-enabled",!1),u("host-webworker")||u("host-browser")&&(u.add("csp-restrictions",()=>{try{new Function}catch{return!0}return!1}),u.add("esri-image-decode",()=>{if("decode"in new Image){const e=new Image;return e.src='data:image/svg+xml;charset=UTF-8,<svg version="1.1" xmlns="http://www.w3.org/2000/svg"></svg>',void e.decode().then(()=>{u.add("esri-image-decode",!0,!0,!0)}).catch(()=>{u.add("esri-image-decode",!1,!0,!0)})}return!1}),u.add("esri-url-encodes-apostrophe",()=>{const e=o.a.document.createElement("a");return e.href="?'",e.href.indexOf("?%27")>-1}),u.add("vectortilelayer-max-buffers",()=>u("ff")?160:Number.POSITIVE_INFINITY))})(),t.a=u},function(e,t,n){"use strict";n.d(t,"a",(function(){return S})),n.d(t,"b",(function(){return u})),n.d(t,"c",(function(){return l})),n.d(t,"d",(function(){return d})),n.d(t,"e",(function(){return f})),n.d(t,"f",(function(){return j})),n.d(t,"g",(function(){return R})),n.d(t,"h",(function(){return C})),n.d(t,"i",(function(){return P})),n.d(t,"j",(function(){return E})),n.d(t,"k",(function(){return w})),n.d(t,"l",(function(){return O})),n.d(t,"m",(function(){return b})),n.d(t,"n",(function(){return k})),n.d(t,"o",(function(){return y})),n.d(t,"p",(function(){return m})),n.d(t,"q",(function(){return A})),n.d(t,"r",(function(){return T})),n.d(t,"s",(function(){return g})),n.d(t,"t",(function(){return h})),n.d(t,"u",(function(){return _})),n.d(t,"v",(function(){return I})),n.d(t,"w",(function(){return v}));var r=n(0),s=(n(2),n(16)),o=n(1);var i,c=(i=o.a,{setTimeout:(e,t)=>{const n=i.setTimeout(e,t);return{remove:()=>i.clearTimeout(n)}}}),a=n(17);function u(e){return Promise.all(e)}function l(e){return new Promise((t,n)=>{try{e(t,n)}catch(e){Promise.resolve().then(()=>n(e))}})}function f(e="Aborted"){return new s.a("AbortError",e)}function d(){return new AbortController}function h(e){if(b(e))throw f()}function p(e){return Object(r.h)(e)?"aborted"in e?e:e.signal:e}function b(e){const t=p(e);return Object(r.h)(t)&&t.aborted}function g(e){if(O(e))throw e}function _(e){if(!O(e))throw e}function y(e,t){const n=p(e);if(!Object(r.g)(n)){if(!n.aborted)return Object(a.c)(n,"abort",()=>t());t()}}function m(e,t){const n=p(e);if(!Object(r.g)(n))return h(n),Object(a.c)(n,"abort",()=>t(f()))}function v(e,t){const n=p(t);return Object(r.g)(n)?e:new Promise((n,s)=>{let o=y(t,()=>s(f()));const i=()=>o=Object(r.m)(o);e.then(i,i),e.then(n,s)})}function O(e){return e&&"AbortError"===e.name}function w(e){return e.catch(e=>{if(!O(e))throw e})}function j(){let e=null;const t=new Promise((t,n)=>{e={promise:void 0,resolve:t,reject:n}});return e.promise=t,e}function E(e){if(!e)return;if("function"!=typeof e.forEach){const t=Object.keys(e);return E(t.map(t=>e[t])).then(e=>{const n={};return t.forEach((t,r)=>n[t]=e[r]),n})}const t=e;return Promise.allSettled(t).then(e=>Array.from(t,(t,n)=>{const r=e[n];return"fulfilled"===r.status?{promise:t,value:r.value}:{promise:t,error:r.reason}}))}function A(e){return Promise.reject(e)}function T(e){return Promise.resolve(e)}function S(e,t,n){const r=d();return y(n,()=>r.abort()),new Promise((n,s)=>{let o=setTimeout(()=>{o=0,n(t)},e);y(r,()=>{o&&(clearTimeout(o),s(f()))})})}function k(e){return e&&"function"==typeof e.then}function I(e){return e&&"object"==typeof e&&"then"in e&&"function"==typeof e.then?e:Promise.resolve(e)}function P(e,t=-1){let n,s,o,i,c=null;const a=(...u)=>{if(n){s=u,i&&i.reject(f()),i=j();const e=Object(r.b)(i.promise);if(c){const e=c;c=null,e.abort()}return e}if(o=i||j(),i=null,t>0){const r=d();n=I(e(...u,r.signal));const s=n;S(t).then(()=>{n===s&&(i?r.abort():c=r)})}else n=1,n=I(e(...u));const l=()=>{const e=s;s=o=n=c=null,null!=e&&a(...e)},h=n,p=o;return h.then(l,l),h.then(p.resolve,p.reject),Object(r.b)(p.promise)};return a}function R(){let e,t;const n=new Promise((n,r)=>{e=n,t=r}),r=t=>{e(t)};return r.resolve=t=>e(t),r.reject=e=>t(e),r.timeout=(e,t)=>c.setTimeout(()=>r.reject(t),e),r.promise=n,r}function C(e){let t=d();const n=e(t.signal);let r={promise:n,finished:!1,abort:()=>{t&&(t.abort(),t=null)}};const s=()=>{r&&(r.finished=!0,r=null),t=null};return n.then(s,s),r}},function(e,t,n){"use strict";n.d(t,"a",(function(){return T})),n.d(t,"b",(function(){return m})),n.d(t,"c",(function(){return y})),n.d(t,"d",(function(){return p})),n.d(t,"e",(function(){return a})),n.d(t,"f",(function(){return I})),n.d(t,"g",(function(){return w})),n.d(t,"h",(function(){return O})),n.d(t,"i",(function(){return c})),n.d(t,"j",(function(){return E})),n.d(t,"k",(function(){return A})),n.d(t,"l",(function(){return i})),n.d(t,"m",(function(){return _})),n.d(t,"n",(function(){return k})),n.d(t,"o",(function(){return j})),n.d(t,"p",(function(){return S}));n(3);const r=n(2).a.getLogger("esri.core.Accessor");function s(e){return null==e?e:new Date(e)}function o(e){return null==e?e:!!e}function i(e){return null==e?e:e.toString()}function c(e){return null==e?e:(e=parseFloat(e),isNaN(e)?0:e)}function a(e){return null==e?e:Math.round(parseFloat(e))}function u(e){return e&&e.constructor&&void 0!==e.constructor.__accessorMetadata__}function l(e,t){return null!=t&&e&&!(t instanceof e)}function f(e){return e&&"isCollection"in e}function d(e){return e&&e.Type?"function"==typeof e.Type?e.Type:e.Type.base:null}function h(e,t){return!!u(t)&&(r.error("Accessor#set","Assigning an instance of '"+(t.declaredClass||"unknown")+"' which is not a subclass of '"+b(e)+"'"),!0)}function p(e,t){return null==t?t:f(e)?function(e,t){if(!t||!t.constructor||!f(t.constructor))return h(e,t)?t:new e(t);const n=d(e.prototype.itemType),r=d(t.constructor.prototype.itemType);return n?r?n===r?t:n.prototype.isPrototypeOf(r.prototype)?new e(t):(h(e,t),t):new e(t):t}(e,t):l(e,t)?h(e,t)?t:new e(t):t}function b(e){return e&&e.prototype&&e.prototype.declaredClass||"unknown"}function g(e){switch(e){case Number:return c;case T:return a;case Boolean:return o;case String:return i;case Date:return s;default:return p.bind(null,e)}}function _(e,t){const n=g(e);return 1===arguments.length?n:n(t)}function y(e,t,n){return 1===arguments.length?y.bind(null,e):t?Array.isArray(t)?t.map(t=>e(t,n)):[e(t,n)]:t}function m(e,t){return 1===arguments.length?y(_.bind(null,e)):y(_.bind(null,e),t)}function v(e,t,n){return 0!==t&&Array.isArray(n)?n.map(n=>v(e,t-1,n)):e(n)}function O(e,t,n){if(2===arguments.length)return O.bind(null,e,t);if(!n)return n;let r=t,s=n=v(e,t,n);for(;r>0&&Array.isArray(s);)r--,s=s[0];if(void 0!==s)for(let e=0;e<r;e++)n=[n];return n}function w(e,t,n){return 2===arguments.length?O(_.bind(null,e),t):O(_.bind(null,e),t,n)}function j(e){return!!Array.isArray(e)&&!e.some(t=>{const n=typeof t;return!("string"===n||"number"===n||"function"===n&&e.length>1)})}function E(e,t){if(2===arguments.length)return E(e).call(null,t);const n=new Set,s=e.filter(e=>"function"!=typeof e),o=e.filter(e=>"function"==typeof e);for(const t of e)"string"!=typeof t&&"number"!=typeof t||n.add(t);let i=null,c=null;return(e,t)=>{if(null==e)return e;const a=typeof e,u="string"===a||"number"===a;return u&&(n.has(e)||o.some(e=>"string"===a&&e===String||"number"===a&&e===Number))||"object"===a&&o.some(t=>!l(e,t))?e:(u&&s.length?(i||(i=s.map(e=>"string"==typeof e?`'${e}'`:""+e).join(", ")),r.error("Accessor#set",`'${e}' is not a valid value for this property, only the following values are valid: ${i}`)):"object"==typeof e&&o.length?(c||(c=o.map(e=>b(e)).join(", ")),r.error("Accessor#set",`'${e}' is not a valid value for this property, value must be one of ${c}`)):r.error("Accessor#set",`'${e}' is not a valid value for this property`),t&&(t.valid=!1),null)}}function A(e,t){if(2===arguments.length)return A(e).call(null,t);const n={},s=[],o=[];for(const t in e.typeMap){const r=e.typeMap[t];n[t]=_(r),s.push(b(r)),o.push(t)}const i=()=>`'${s.join("', '")}'`,c=()=>`'${o.join("', '")}'`,a="string"==typeof e.key?t=>t[e.key]:e.key;return t=>{if(e.base&&!l(e.base,t))return t;if(null==t)return t;const s=a(t)||e.defaultKeyValue,o=n[s];if(!o)return r.error("Accessor#set",`Invalid property value, value needs to be one of ${i()}, or a plain object that can autocast (having .type = ${c()})`),null;if(!l(e.typeMap[s],t))return t;if("string"==typeof e.key&&!u(t)){const n={};for(const r in t)r!==e.key&&(n[r]=t[r]);return o(n)}return o(t)}}class T{}const S={native:e=>({type:"native",value:e}),array:e=>({type:"array",value:e}),oneOf:e=>({type:"one-of",values:e})};function k(e){if(!e||!("type"in e))return!1;switch(e.type){case"native":case"array":case"one-of":return!0}return!1}function I(e){switch(e.type){case"native":return _(e.value);case"array":return y(I(e.value));case"one-of":return function(e){let t=null;return(n,s)=>function e(t,n){if(null==t)return!0;switch(n.type){case"native":switch(n.value){case Number:case T:return"number"==typeof t;case Boolean:return"boolean"==typeof t;case String:return"string"==typeof t}return t instanceof n.value;case"array":return!!Array.isArray(t)&&!t.some(t=>!e(t,n.value));case"one-of":return n.values.some(n=>e(t,n))}}(n,e)?n:(null==t&&(t=function e(t){switch(t.type){case"native":switch(t.value){case Number:return"number";case String:return"string";case Boolean:return"boolean";case T:return"integer";case Date:return"date";default:return b(t.value)}case"array":return"array of "+e(t.value);case"one-of":{const n=t.values.map(t=>e(t));return`one of ${n.slice(0,n.length-1)} or ${n[n.length-1]}`}}return"unknown"}(e)),r.error("Accessor#set","Invalid property value, value needs to be of type "+t),s&&(s.valid=!1),null)}(e);default:return null}}},function(e,t,n){"use strict";n.d(t,"a",(function(){return o})),n.d(t,"b",(function(){return i})),n.d(t,"c",(function(){return s}));n(3);var r=n(12);function s(e,t){let n;if(t)for(n in e)e.hasOwnProperty(n)&&(void 0===e[n]?delete e[n]:e[n]instanceof Object&&s(e[n],!0));else for(n in e)e.hasOwnProperty(n)&&void 0===e[n]&&delete e[n];return e}function o(e){if(!e||"object"!=typeof e||"function"==typeof e)return e;if(Object(r.h)(e)||Object(r.k)(e)||Object(r.l)(e)||Object(r.f)(e)||Object(r.i)(e)||Object(r.g)(e)||Object(r.j)(e)||Object(r.d)(e)||Object(r.e)(e))return Object(r.m)(e);if(e instanceof Date)return new Date(e.getTime());if(e instanceof ArrayBuffer)return e.slice(0,e.byteLength);if(e instanceof Map){const t=new Map;return e.forEach((e,n)=>{t.set(n,o(e))}),t}if(e instanceof Set){const t=new Set;return e.forEach(e=>{t.add(o(e))}),t}let t;const n=e;if("function"==typeof n.clone)t=n.clone();else if("function"==typeof n.map&&"function"==typeof n.forEach)t=n.map(o);else if("function"==typeof n.notifyChange&&"function"==typeof n.watch)t=n.clone();else{t={};for(const n of Object.getOwnPropertyNames(e))t[n]=o(e[n])}return t}function i(e,t){return e===t||"number"==typeof e&&isNaN(e)&&"number"==typeof t&&isNaN(t)||"function"==typeof(e||{}).getTime&&"function"==typeof(t||{}).getTime&&e.getTime()===t.getTime()||!1}},function(e,t,n){"use strict";n.d(t,"a",(function(){return i})),n.d(t,"b",(function(){return c})),n.d(t,"c",(function(){return a})),n.d(t,"d",(function(){return p})),n.d(t,"e",(function(){return h})),n.d(t,"f",(function(){return f})),n.d(t,"g",(function(){return l}));var r=n(6),s=n(0),o=n(43);function i(e){return e?e.__accessor__?e.__accessor__:e.propertyInvalidated?e:null:null}function c(e,t){return null!=e&&e.metadatas&&null!=e.metadatas[t]}function a(e,t,n){return u(e,t,n?{policy:n,path:""}:null)}function u(e,t,n){return t?Object.keys(t).reduce((function(e,o){let i=null,c="merge";if(n&&(i=n.path?`${n.path}.${o}`:o,c=n.policy(i)),"replace"===c)return e[o]=t[o],e;if(void 0===e[o])return e[o]=Object(r.a)(t[o]),e;let a=e[o],l=t[o];if(a===l)return e;if(Array.isArray(l)||Array.isArray(e))a=a?Array.isArray(a)?e[o]=a.concat():e[o]=[a]:e[o]=[],l&&(Array.isArray(l)||(l=[l]),l.forEach(e=>{-1===a.indexOf(e)&&a.push(e)}));else if(l&&"object"==typeof l)if(n){const t=n.path;n.path=Object(s.b)(i),e[o]=u(a,l,n),n.path=t}else e[o]=u(a,l,null);else e.hasOwnProperty(o)&&!t.hasOwnProperty(o)||(e[o]=l);return e}),e||{}):e}function l(e){return e?"string"==typeof e&&-1===e.indexOf(".")?e:f(e):e}function f(e){return Array.isArray(e)?e:e.split(".")}function d(e){return e.indexOf(",")>-1?e.split(",").map(e=>e.trim()):[e.trim()]}function h(e,t,n,r){const s=function(e){if(Array.isArray(e)){const t=[];for(const n of e)t.push(...d(n));return t}return d(e)}(t);if(1!==s.length){const t=s.map(t=>r(e,t,n));return Object(o.a)(t)}return r(e,s[0],n)}function p(e){let t=!1;return()=>{t||(t=!0,e())}}},function(e,t,n){"use strict";n.d(t,"a",(function(){return b})),n.d(t,"b",(function(){return f})),n.d(t,"c",(function(){return a})),n.d(t,"d",(function(){return _}));n(3);var r=n(2),s=n(7);let o,i=[];const c=r.a.getLogger("esri.core.Accessor");function a(e){void 0!==o&&o.onObservableAccessed(e)}let u=!1,l=!1;function f(e,t,n){if(u)return d(e,t,n);h(e);const r=t.call(n);return p(),r}function d(e,t,n){const r=u;u=!0,h(e);let s=null;try{s=t.call(n)}catch(e){l&&c.error(e)}return p(),u=r,s}function h(e){o=e,i.push(e)}function p(){const e=i.pop();o=i.length>0?i[i.length-1]:void 0,void 0!==e&&e.onTrackingEnd()}function b(e,t){if(32&t.flags)return;const n=l;l=!1,64&t.flags?d(t,t.metadata.get,e):_(e,t),l=n}const g=[];function _(e,t){128&t.flags||(t.flags|=128,d(t,()=>{const n=t.metadata.dependsOn||g;for(const t of n)if("string"==typeof t&&-1===t.indexOf("."))y(e,t,!1);else{const n=Object(s.f)(t);for(let t=0,r=e;t<n.length&&null!=r&&"object"==typeof r;++t)r=y(r,n[t],t!==n.length-1)}}),t.flags&=-129)}function y(e,t,n){const r="?"===t[t.length-1]?t.slice(0,-1):t;if(null!=e.getItemAt||Array.isArray(e)){const t=parseInt(r,10);if(!isNaN(t))return Array.isArray(e)?e[t]:e.getItemAt(t)}const o=Object(s.a)(e),i=null==o?void 0:o.properties.get(r);return i&&(a(i),b(e,i)),n?e[r]:void 0}},function(e,t,n){"use strict";n.d(t,"a",(function(){return s})),n.d(t,"b",(function(){return o})),n.d(t,"c",(function(){return i}));var r=n(6);function s(e,t,n=!1){return function e(t,n,s){return n?Object.keys(n).reduce((function(t,o){let i=t[o],c=n[o];return i===c?t:void 0===i?(t[o]=Object(r.a)(c),t):(Array.isArray(c)||Array.isArray(t)?(i=i?Array.isArray(i)?t[o]=i.concat():t[o]=[i]:t[o]=[],c&&(Array.isArray(c)||(c=[c]),s?c.forEach(e=>{-1===i.indexOf(e)&&i.push(e)}):t[o]=c.concat())):c&&"object"==typeof c?t[o]=e(i,c,s):t.hasOwnProperty(o)&&!n.hasOwnProperty(o)||(t[o]=c),t)}),t||{}):t}(e,t,n)}function o(e,t){if(null!=t)return t[e]||c(e.split("."),!1,t)}function i(e,t,n){const r=e.split("."),s=r.pop(),o=c(r,!0,n);o&&s&&(o[s]=t)}function c(e,t,n){let r=n;for(const n of e){if(null==r)return;if(!(n in r)){if(!t)return;r[n]={}}r=r[n]}return r}},function(e,t,n){"use strict";n.d(t,"a",(function(){return r})),n.d(t,"b",(function(){return c})),n.d(t,"c",(function(){return u})),n.d(t,"d",(function(){return l})),n.d(t,"e",(function(){return a}));var r,s,o=n(3);(s=r||(r={}))[s.HANDSHAKE=0]="HANDSHAKE",s[s.OPEN=1]="OPEN",s[s.OPENED=2]="OPENED",s[s.RESPONSE=3]="RESPONSE",s[s.INVOKE=4]="INVOKE",s[s.ABORT=5]="ABORT",s[s.CLOSE=6]="CLOSE",s[s.OPEN_PORT=7]="OPEN_PORT",s[s.ON=8]="ON";let i=0;function c(){return i++}function a(e){return e?"string"==typeof e?JSON.stringify({name:"message",message:e}):e.toJSON?JSON.stringify(e):JSON.stringify({name:e.name,message:e.message,details:e.details||{stack:e.stack}}):null}function u(e,t,n,s){if(t.type===r.OPEN_PORT)return void e.postMessage(t,[t.port]);if(t.type!==r.INVOKE&&t.type!==r.RESPONSE)return void e.postMessage(t);let o;!function(e){return e&&"object"==typeof e&&("result"in e||"transferList"in e)}(n)?(o=f(s),t.data=n):(o=f(n.transferList),t.data=n.result),o?e.postMessage(t,o):e.postMessage(t)}function l(e){if(!e)return null;const t=e.data;return t?"string"==typeof t?JSON.parse(t):t:null}function f(e){if(!e||!e.length)return null;if(Object(o.a)("esri-workers-arraybuffer-transfer"))return e;const t=e.filter(e=>!function(e){return e instanceof ArrayBuffer||e&&e.constructor&&"ArrayBuffer"===e.constructor.name}(e));return t.length?t:null}},function(e,t,n){"use strict";n.d(t,"a",(function(){return c})),n.d(t,"b",(function(){return u})),n.d(t,"c",(function(){return l}));var r=n(6),s=n(0),o=n(7);class i{constructor(e){this.autoDestroy=!1,this.properties=e}}function c(e){let t=e.constructor.__accessorMetadata__;const n=Object.prototype.hasOwnProperty.call(e.constructor,"__accessorMetadata__");if(t){if(!n){const n=Object.create(t.properties),s=t.autoDestroy;for(const e in n)n[e]=Object(r.a)(n[e]);t=new i(n),t.autoDestroy=s,Object.defineProperty(e.constructor,"__accessorMetadata__",{value:t,enumerable:!1,configurable:!0,writable:!0})}}else t=new i({}),Object.defineProperty(e.constructor,"__accessorMetadata__",{value:t,enumerable:!1,configurable:!0,writable:!0});return Object(s.b)(e.constructor.__accessorMetadata__)}function a(e){return c(e).properties}function u(e,t){const n=a(e);let r=n[t];return r||(r=n[t]={}),r}function l(e,t){return Object(o.c)(e,t,d)}const f=/^(?:[^.]+\.)?(?:value|type|(?:json\.type|json\.origins\.[^.]\.type))$/;function d(e){return f.test(e)?"replace":"merge"}},function(e,t,n){"use strict";function r(e,t){if(e.forEach)e.forEach(t);else for(let n=0;n<e.length;n++)t(e[n],n,e)}function s(e,t,n){if(e.slice)return e.slice(t,n);void 0===t?t=0:(t<0&&(t+=e.length),t=Math.min(e.length,Math.max(0,t))),void 0===n?n=e.length:(n<0&&(n+=e.length),n=Math.min(e.length,Math.max(0,n)));const r=Math.max(0,n-t),s=new(0,e.constructor)(r);for(let n=0;n<r;n++)s[n]=e[t+n];return s}function o(e){return e instanceof ArrayBuffer||e&&e.constructor&&"ArrayBuffer"===e.constructor.name}function i(e){return e instanceof Int8Array||e&&e.constructor&&"Int8Array"===e.constructor.name}function c(e){return e instanceof Uint8Array||e&&e.constructor&&"Uint8Array"===e.constructor.name}function a(e){return e instanceof Uint8ClampedArray||e&&e.constructor&&"Uint8ClampedArray"===e.constructor.name}function u(e){return e instanceof Int16Array||e&&e.constructor&&"Int16Array"===e.constructor.name}function l(e){return e instanceof Uint16Array||e&&e.constructor&&"Uint16Array"===e.constructor.name}function f(e){return e instanceof Int32Array||e&&e.constructor&&"Int32Array"===e.constructor.name}function d(e){return e instanceof Uint32Array||e&&e.constructor&&"Uint32Array"===e.constructor.name}function h(e){return e instanceof Float32Array||e&&e.constructor&&"Float32Array"===e.constructor.name}function p(e){return e instanceof Float64Array||e&&e.constructor&&"Float64Array"===e.constructor.name}function b(e){return e?128+e.buffer.byteLength+64:0}n.d(t,"a",(function(){return b})),n.d(t,"b",(function(){return r})),n.d(t,"c",(function(){return o})),n.d(t,"d",(function(){return h})),n.d(t,"e",(function(){return p})),n.d(t,"f",(function(){return u})),n.d(t,"g",(function(){return f})),n.d(t,"h",(function(){return i})),n.d(t,"i",(function(){return l})),n.d(t,"j",(function(){return d})),n.d(t,"k",(function(){return c})),n.d(t,"l",(function(){return a})),n.d(t,"m",(function(){return s}))},function(e,t,n){"use strict";function r(e,t,n,r){var s,o=arguments.length,i=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,n,r);else for(var c=e.length-1;c>=0;c--)(s=e[c])&&(i=(o<3?s(i):o>3?s(t,n,i):s(t,n))||i);return o>3&&i&&Object.defineProperty(t,n,i),i}n.d(t,"a",(function(){return r}))},function(e,t,n){"use strict";n.d(t,"a",(function(){return c})),n.d(t,"b",(function(){return i})),n.d(t,"c",(function(){return o}));var r=n(7);function s(e,t){const n="?"===e[e.length-1]?e.slice(0,-1):e;if(null!=t.getItemAt||Array.isArray(t)){const e=parseInt(n,10);if(!isNaN(e))return Array.isArray(t)?t[e]:t.getItemAt(e)}const s=Object(r.a)(t);return Object(r.b)(s,n)?s.get(n):t[n]}function o(e,t,n=0){return"string"==typeof t&&-1===t.indexOf(".")?s(t,e):function e(t,n,r){if(null==t)return t;const o=s(n[r],t);return!o&&r<n.length-1?void 0:r===n.length-1?o:e(o,n,r+1)}(e,Object(r.f)(t),n)}function i(e,t){return o(e,t)}function c(e,t){return void 0!==o(t,e)}},function(e,t,n){"use strict";n.d(t,"a",(function(){return f})),n.d(t,"b",(function(){return u})),n.d(t,"c",(function(){return l}));var r=n(2),s=n(5),o=n(14),i=n(11),c=n(29);const a=r.a.getLogger("esri.core.accessorSupport.decorators.property");function u(e={}){return(t,n,r)=>{if(t===Function.prototype)throw new Error(`Inappropriate use of @property() on a static field: ${t.name}.${n}. Accessor does not support static properties.`);const u=Object(i.b)(t,n);r&&(r.get||r.set?(u.get=r.get||u.get,u.set=r.set||u.set):"value"in r&&("value"in e&&a.warn(`@property() will redefine the value of "${n}" on "${t.constructor.name}" already defined in the metadata`,e),u.value=e.value=r.value)),null!=e.readOnly&&(u.readOnly=e.readOnly);const l=e.aliasOf;if(l){const e="string"==typeof l?l:l.source,t="string"==typeof l?null:!0===l.overridable;let r;u.dependsOn=[e],u.get=function(){let t=Object(o.b)(this,e);if("function"==typeof t){r||(r=e.split(".").slice(0,-1).join("."));const n=Object(o.b)(this,r);n&&(t=t.bind(n))}return t},u.readOnly||(u.set=t?function(e){void 0!==e?this._override(n,e):this._clearOverride(n)}:function(t){Object(c.a)(this,e,t)})}const d=e.type,h=e.types;u.cast||(d?u.cast=function(e){let t=0,n=e;if(Object(s.n)(e))return Object(s.f)(e);for(;Array.isArray(n)&&1===n.length&&"string"!=typeof n[0]&&"number"!=typeof n[0];)n=n[0],t++;const r=n;if(Object(s.o)(r))return 0===t?Object(s.j)(r):Object(s.h)(Object(s.j)(r),t);if(1===t)return Object(s.b)(r);if(t>1)return Object(s.g)(r,t);const o=e;return o.from?o.from:Object(s.m)(o)}(d):h&&(Array.isArray(h)?u.cast=Object(s.c)(Object(s.k)(h[0])):u.cast=Object(s.k)(h))),e.range&&(u.cast=f(u.cast,e.range)),Object(i.c)(u,e)}}function l(e,t,n){const r=Object(i.b)(e,n);r.json||(r.json={});let s=r.json;return void 0!==t&&(s.origins||(s.origins={}),s.origins[t]||(s.origins[t]={}),s=s.origins[t]),s}function f(e,t){return n=>{let r=+e(n);return null!=t.step&&(r=Math.round(r/t.step)*t.step),null!=t.min&&(r=Math.max(t.min,r)),null!=t.max&&(r=Math.min(t.max,r)),r}}},function(e,t,n){"use strict";var r=n(6),s=n(2),o=n(28);class i extends o.a{constructor(e,t,n){if(super(e,t,n),!(this instanceof i))return new i(e,t,n)}toJSON(){if(null!=this.details)try{return{name:this.name,message:this.message,details:JSON.parse(JSON.stringify(this.details,(e,t)=>{if(t&&"object"==typeof t&&"function"==typeof t.toJSON)return t;try{return Object(r.a)(t)}catch(e){return"[object]"}}))}}catch(e){throw s.a.getLogger("esri.core.Error").error(e),e}return{name:this.name,message:this.message,details:this.details}}static fromJSON(e){return new i(e.name,e.message,e.details)}}i.prototype.type="error",t.a=i},function(e,t,n){"use strict";function r(e){return e&&("function"==typeof e.on||"function"==typeof e.addEventListener)}function s(e,t,n){if(!r(e))throw new TypeError("target is not a Evented or EventTarget object");if("on"in e)return e.on(t,n);if(Array.isArray(t)){const r=t.slice();for(const t of r)e.addEventListener(t,n);return{remove(){for(const t of r)e.removeEventListener(t,n)}}}return e.addEventListener(t,n),{remove(){e.removeEventListener(t,n)}}}function o(e,t,n){if(!r(e))throw new TypeError("target is not a Evented or EventTarget object");if("once"in e)return e.once(t,n);const o=s(e,t,t=>{o.remove(),n.call(e,t)});return{remove(){o.remove()}}}n.d(t,"a",(function(){return r})),n.d(t,"b",(function(){return s})),n.d(t,"c",(function(){return o}))},function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));n(3);var r=n(11);const s=[n(45).a];const o=new Set,i=new Set;function c(e){return t=>{t.prototype.declaredClass=e,function(e,t){for(const n of s)if(n.processPrototypePropertyMetadata)for(const r in e){const s=e[r];n.processPrototypePropertyMetadata(r,s,e,t)}}(Object(r.a)(t.prototype).properties,e),function(e){const t=e.prototype,n=t.declaredClass,o=Object(r.a)(t).properties;!function(e,t){for(const n of s)if(n.processClassPropertyMetadata)for(const r in e){const s=e[r];n.processClassPropertyMetadata(r,s,e,t)}}(o,n);const i={};for(const e of Object.getOwnPropertyNames(o)){const t=o[e];i[e]={enumerable:!0,configurable:!0,get:a(e,t),set(n){const r=this.__accessor__;if(void 0!==r){if(!Object.isFrozen(this)){if(r.initialized&&t.readOnly)throw new TypeError(`[accessor] cannot assign to read-only property '${e}' of ${this.declaredClass}`);if(2===r.lifecycle&&t.constructOnly)throw new TypeError(`[accessor] cannot assign to construct-only property '${e}' of ${this.declaredClass}`);r.set(e,n)}}else Object.defineProperty(this,e,{enumerable:!0,configurable:!0,writable:!0,value:n})}}}Object.defineProperties(e.prototype,i)}(t);const n=[],c=[];let u=t.prototype;for(;u;)u.hasOwnProperty("initialize")&&!o.has(u.initialize)&&(o.add(u.initialize),n.push(u.initialize)),u.hasOwnProperty("destroy")&&!i.has(u.destroy)&&(i.add(u.destroy),c.push(u.destroy)),u=Object.getPrototypeOf(u);o.clear(),i.clear();class l extends t{constructor(...e){if(super(...e),this.constructor===l&&"function"==typeof this.postscript){if(n.length&&Object.defineProperty(this,"initialize",{enumerable:!1,configurable:!0,value(){for(let e=n.length-1;e>=0;e--)n[e].call(this)}}),c.length){let e=!1;Object.defineProperty(this,"destroy",{enumerable:!1,configurable:!0,value(){if(!e){e=!0;for(let e=0;e<c.length;e++)c[e].call(this)}}})}this.postscript(...e)}}}return l.__accessorMetadata__=Object(r.a)(t.prototype),l.prototype.declaredClass=e,l}}function a(e,t){return null==t.get?function(){return this.__accessor__.getterStatic(e)}:function(){return this.__accessor__.getterComputed(e)}}},function(e,t,n){"use strict";var r=n(1),s=(n(3),n(9));const o={apiKey:void 0,applicationUrl:r.a.location&&r.a.location.href,assetsPath:"",fontsUrl:"https://static.arcgis.com/fonts",geometryService:null,geometryServiceUrl:"https://utility.arcgisonline.com/arcgis/rest/services/Geometry/GeometryServer",geoRSSServiceUrl:"https://utility.arcgis.com/sharing/rss",kmlServiceUrl:"https://utility.arcgis.com/sharing/kml",portalUrl:"https://www.arcgis.com",workers:{loaderConfig:{has:{},paths:{},map:{},packages:[]}},request:{httpsDomains:["arcgis.com","arcgisonline.com","esrikr.com","premiumservices.blackbridge.com","esripremium.accuweather.com","gbm.digitalglobe.com","firstlook.digitalglobe.com","msi.digitalglobe.com"],interceptors:[],maxUrlLength:2e3,proxyRules:[],proxyUrl:null,timeout:6e4,trustedServers:[],useIdentity:!0},log:{interceptors:[],level:null}};if(r.a.esriConfig&&(Object(s.a)(o,r.a.esriConfig,!0),delete o.has),!o.assetsPath){const e="4.19.0";o.assetsPath=`https://js.arcgis.com/${e.slice(0,-2)}/@arcgis/core/assets`}o.baseUrl&&console.warn("[esri.config]","baseUrl has been replaced by assetsPath"),Object.defineProperty(o,"baseUrl",{set(){console.warn("[esri.config]","baseUrl has been replaced by assetsPath")}}),o.request.corsEnabledServers=[],o.request.corsEnabledServers.push=function(){return console.warn("[esri.config]","request.corsEnabledServers is not supported and will be removed in a future release. See http://esriurl.com/cors8664"),0},t.a=o},function(e,t,n){"use strict";var r,s=n(26);!function(e){const t=(e,t,n,r)=>{let s=t,o=t;const i=n>>>1,c=e[s-1];for(;o<=i;){o=s<<1,o<n&&r(e[o-1],e[o])<0&&++o;const t=e[o-1];if(r(t,c)<=0)break;e[s-1]=t,s=o}e[s-1]=c},n=(e,t)=>e<t?-1:e>t?1:0;e.sort=function(e,r,s,o){void 0===r&&(r=0),void 0===s&&(s=e.length),void 0===o&&(o=n);for(let n=s>>>1;n>r;n--)t(e,n,s,o);const i=r+1;for(let n=s-1;n>r;n--){const s=e[r];e[r]=e[n],e[n]=s,t(e,i,n,o)}},e.iterableSort=function*(e,r,s,o){void 0===r&&(r=0),void 0===s&&(s=e.length),void 0===o&&(o=n);for(let n=s>>>1;n>r;n--)t(e,n,s,o),yield;const i=r+1;for(let n=s-1;n>r;n--){const s=e[r];e[r]=e[n],e[n]=s,t(e,i,n,o),yield}}}(r||(r={}));var o=r;function i(e){e.data.length>1.5*e.length&&(e.data.length=Math.floor(1.1*e.length))}t.a=class{constructor(e){this.data=[],this._length=0,this._allocator=void 0,this._deallocator=()=>null,this._shrink=()=>{},this._hint=new s.a,e&&(e.initialSize&&(this.data=new Array(e.initialSize)),e.allocator&&(this._allocator=e.allocator),void 0!==e.deallocator&&(this._deallocator=e.deallocator),e.shrink&&(this._shrink=()=>i(this)))}toArray(){return this.data.slice(0,this.length)}getItemAt(e){if(!(e<0||e>=this._length))return this.data[e]}get length(){return this._length}set length(e){if(e>this._length){if(this._allocator){for(;this._length<e;)this.data[this._length++]=this._allocator(this.data[this._length]);return}this._length=e}else{if(this._deallocator)for(let t=e;t<this._length;++t)this.data[t]=this._deallocator(this.data[t]);this._length=e,this._shrink()}}clear(){this.length=0}prune(){this.clear(),this.data=[]}push(e){this.data[this._length++]=e}pushArray(e,t=e.length){for(let n=0;n<t;n++)this.data[this._length++]=e[n]}fill(e,t){for(let n=0;n<t;n++)this.data[this._length++]=e}pushNew(){this._allocator&&(this.data[this.length]=this._allocator(this.data[this.length]));const e=this.data[this._length];return++this._length,e}unshift(e){this.data.unshift(e),this._length++,i(this)}pop(){if(0===this.length)return;const e=this.data[this.length-1];return this.length=this.length-1,this._shrink(),e}remove(e){const t=Object(s.d)(this.data,e,this.length,this._hint);if(-1!==t)return this.data.splice(t,1),this.length=this.length-1,e}removeUnordered(e){const t=Object(s.g)(this.data,e,this.length,this._hint);return void 0!==t&&(this.length=this.length-1),this._shrink(),t}removeUnorderedIndex(e){if(!(e>=this.length||e<0))return this.swapElements(e,this.length-1),this.pop()}removeUnorderedMany(e,t=e.length,n){this.length=Object(s.h)(this.data,e,this.length,t,this._hint,n),this._shrink()}front(){if(0!==this.length)return this.data[0]}back(){if(0!==this.length)return this.data[this.length-1]}swapElements(e,t){e>=this.length||t>=this.length||e===t||([this.data[e],this.data[t]]=[this.data[t],this.data[e]])}sort(e){o.sort(this.data,0,this.length,e)}iterableSort(e){return o.iterableSort(this.data,0,this.length,e)}some(e,t){for(let n=0;n<this.length;++n)if(e.call(t,this.data[n],n,this.data))return!0;return!1}filterInPlace(e,t){let n=0;for(let r=0;r<this._length;++r){const s=this.data[r];e.call(t,s,r,this.data)&&(this.data[r]=this.data[n],this.data[n]=s,n++)}if(this._deallocator)for(let e=n;e<this._length;e++)this.data[e]=this._deallocator(this.data[e]);return this._length=n,this._shrink(),this}forAll(e,t){const n=this.length,r=this.data;for(let s=0;s<n;++s)e.call(t,r[s],s,r)}map(e,t){const n=new Array(this.length);for(let r=0;r<this.length;++r)n[r]=e.call(t,this.data[r],r,this.data);return n}reduce(e,t){let n=t;for(let t=0;t<this.length;++t)n=e(n,this.data[t],t,this.data);return n}has(e){const t=this.length,n=this.data;for(let r=0;r<t;++r)if(n[r]===e)return!0;return!1}}},function(e,t,n){"use strict";n.d(t,"a",(function(){return y})),n.d(t,"b",(function(){return S})),n.d(t,"c",(function(){return R})),n.d(t,"d",(function(){return ae})),n.d(t,"e",(function(){return ue})),n.d(t,"f",(function(){return O})),n.d(t,"g",(function(){return m})),n.d(t,"h",(function(){return oe})),n.d(t,"i",(function(){return Q})),n.d(t,"j",(function(){return J})),n.d(t,"k",(function(){return re})),n.d(t,"l",(function(){return x})),n.d(t,"m",(function(){return G})),n.d(t,"n",(function(){return le})),n.d(t,"o",(function(){return C})),n.d(t,"p",(function(){return T})),n.d(t,"q",(function(){return L})),n.d(t,"r",(function(){return N})),n.d(t,"s",(function(){return W})),n.d(t,"t",(function(){return V})),n.d(t,"u",(function(){return z})),n.d(t,"v",(function(){return K})),n.d(t,"w",(function(){return U})),n.d(t,"x",(function(){return B})),n.d(t,"y",(function(){return $})),n.d(t,"z",(function(){return Y})),n.d(t,"A",(function(){return D})),n.d(t,"B",(function(){return q})),n.d(t,"C",(function(){return A})),n.d(t,"D",(function(){return j})),n.d(t,"E",(function(){return ne})),n.d(t,"F",(function(){return ce})),n.d(t,"G",(function(){return se})),n.d(t,"H",(function(){return Z})),n.d(t,"I",(function(){return w}));n(1);var r=n(19),s=n(0),o=n(2),i=n(16);const c=o.a.getLogger("esri.core.urlUtils"),a=r.a.request,u="esri/config: esriConfig.request.proxyUrl is not set.",l=/^\s*[a-z][a-z0-9-+.]*:(?![0-9])/i,f=/^\s*http:/i,d=/^\s*https:/i,h=/^\s*file:/i,p=/:\d+$/,b=/^https?:\/\/[^/]+\.arcgis.com\/sharing(\/|$)/i,g=new RegExp("^(([^:/?#]+):)?(//([^/?#]*))?([^?#]*)(\\?([^#]*))?(#(.*))?$"),_=new RegExp("^((([^\\[:]+):)?([^@]+)@)?(\\[([^\\]]+)\\]|([^\\[:]*))(:([0-9]+))?$");class y{constructor(e=""){this.uri=e,this.scheme=null,this.authority=null,this.path=null,this.query=null,this.fragment=null,this.user=null,this.password=null,this.host=null,this.port=null;let t=Object(s.b)(this.uri.match(g));this.scheme=t[2]||(t[1]?"":null),this.authority=t[4]||(t[3]?"":null),this.path=t[5],this.query=t[7]||(t[6]?"":null),this.fragment=t[9]||(t[8]?"":null),null!=this.authority&&(t=Object(s.b)(this.authority.match(_)),this.user=t[3]||null,this.password=t[4]||null,this.host=t[6]||t[7],this.port=t[9]||null)}toString(){return this.uri}}const m=new y(r.a.applicationUrl),v={},O=(()=>{const e=Object(s.b)(m.path),t=e.substring(0,e.lastIndexOf(e.split("/")[e.split("/").length-1]));return`${m.scheme}://${m.host}${null!=m.port?":"+m.port:""}${t}`})();function w(e){const t={path:null,query:null},n=new y(e),r=e.indexOf("?");return null===n.query?t.path=e:(t.path=e.substring(0,r),t.query=j(n.query)),n.fragment&&(t.hash=n.fragment,null===n.query&&(t.path=t.path.substring(0,t.path.length-(n.fragment.length+1)))),t}function j(e){const t=e.split("&"),n={};for(const e of t){if(!e)continue;const t=e.indexOf("=");let r,s;t<0?(r=decodeURIComponent(e),s=""):(r=decodeURIComponent(e.slice(0,t)),s=decodeURIComponent(e.slice(t+1)));let o=n[r];"string"==typeof o&&(o=n[r]=[o]),Array.isArray(o)?o.push(s):n[r]=s}return n}function E(e){return e&&"object"==typeof e&&"toJSON"in e&&"function"==typeof e.toJSON}function A(e,t){return e?t&&"function"==typeof t?Object.keys(e).map(n=>encodeURIComponent(n)+"="+encodeURIComponent(t(n,e[n]))).join("&"):Object.keys(e).map(n=>{const r=e[n];if(null==r)return"";const s=encodeURIComponent(n)+"=",o=t&&t[n];return o?s+encodeURIComponent(o(r)):Array.isArray(r)?r.map(e=>E(e)?s+encodeURIComponent(JSON.stringify(e)):s+encodeURIComponent(e)).join("&"):E(r)?s+encodeURIComponent(JSON.stringify(r)):s+encodeURIComponent(r)}).filter(e=>e).join("&"):""}function T(e=!1){let t,n=a.proxyUrl;if("string"==typeof e){t=function(e){return d.test(e)||"https"===m.scheme&&K(e)}(e);const r=C(e);r&&(n=r.proxyUrl)}else t=!!e;if(!n)throw c.warn(u),new i.a("urlutils:proxy-not-set",u);return t&&ee()&&(n=Z(n)),w(n)}function S(e){const t=C(e);let n,r;if(t){const e=I(t.proxyUrl);n=e.path,r=e.query?j(e.query):null}if(n){const t=w(e);e=n+"?"+t.path;const s=A({...r,...t.query});s&&(e=`${e}?${s}`)}return e}const k={path:"",query:""};function I(e){const t=e.indexOf("?");return-1!==t?(k.path=e.slice(0,t),k.query=e.slice(t+1)):(k.path=e,k.query=null),k}function P(e){return(e=te(e=function(e){return e&&"/"===e[e.length-1]?e:e+"/"}(e=I(e).path),!0)).toLowerCase()}function R(e){const t={proxyUrl:e.proxyUrl,urlPrefix:P(e.urlPrefix)},n=a.proxyRules,r=t.urlPrefix;let s=n.length;for(let e=0;e<n.length;e++){const t=n[e].urlPrefix;if(0===r.indexOf(t)){if(r.length===t.length)return-1;s=e;break}0===t.indexOf(r)&&(s=e+1)}return n.splice(s,0,t),s}function C(e){const t=a.proxyRules,n=P(e);for(let e=0;e<t.length;e++)if(0===n.indexOf(t[e].urlPrefix))return t[e]}function N(e,t){return e=M(e),t=M(t),te(e)===te(t)}function M(e){const t=(e=q(e)).indexOf("/sharing");return t>0?e.substring(0,t):e.replace(/\/+$/,"")}function x(e){const t=t=>null==t||t instanceof RegExp&&t.test(e)||"string"==typeof t&&e.startsWith(t),n=a.interceptors;if(n)for(const e of n)if(Array.isArray(e.urls)){if(e.urls.some(t))return e}else if(t(e.urls))return e;return null}function L(e,t,n=!1){const r=ie(e),s=ie(t);return!(!n&&r.scheme!==s.scheme)&&null!=r.host&&null!=s.host&&r.host.toLowerCase()===s.host.toLowerCase()&&r.port===s.port}function U(e){if("string"==typeof e){if(!W(e))return!0;e=ie(e)}if(L(e,m))return!0;const t=a.trustedServers||[];for(let n=0;n<t.length;n++){const r=F(t[n]);for(let t=0;t<r.length;t++)if(L(e,r[t]))return!0}return!1}function F(e){return v[e]||(X(e)||K(e)?v[e]=[new y($(e))]:v[e]=[new y("http://"+e),new y("https://"+e)]),v[e]}function $(e,t=O,n){return K(e)?n&&n.preserveProtocolRelative?e:"http"===m.scheme&&m.authority===G(e).slice(2)?"http:"+e:"https:"+e:X(e)?e:Object(s.b)(B("/"===e[0]?function(e){const t=e.indexOf("//"),n=e.indexOf("/",t+2);return-1===n?e:e.slice(0,n)}(t):t,e))}function D(e,t=O,n){if(!W(e))return e;const r=q(e),s=r.toLowerCase(),o=q(t).toLowerCase().replace(/\/+$/,""),i=n?q(n).toLowerCase().replace(/\/+$/,""):null;if(i&&0!==o.indexOf(i))return e;const c=(e,t,n)=>-1===(n=e.indexOf(t,n))?e.length:n;let a=c(s,"/",s.indexOf("//")+2),u=-1;for(;s.slice(0,a+1)===o.slice(0,a)+"/"&&(u=a+1,a!==s.length);)a=c(s,"/",a+1);if(-1===u)return e;if(i&&u<i.length)return e;e=r.slice(u);const l=o.slice(u-1).replace(/[^/]+/g,"").length;if(l>0)for(let t=0;t<l;t++)e="../"+e;else e="./"+e;return e}function q(e){return function(e){const t=a.httpsDomains;if(!function(e){return f.test(e)||"http"===m.scheme&&K(e)}(e))return e;const n=e.indexOf("/",7);let r;if(r=-1===n?e:e.slice(0,n),r=r.toLowerCase().slice(7),p.test(r)){if(!r.endsWith(":80"))return e;r=r.slice(0,-3),e=e.replace(":80","")}return"http"===m.scheme&&r===m.authority&&!b.test(e)||(ee()&&r===m.authority||t&&t.some(e=>r===e||r.endsWith("."+e))||ee()&&!C(e))&&(e=Z(e)),e}(e=function(e){return e.replace(/^(https?:\/\/)(arcgis\.com)/i,"$1www.$2")}(e=function(e){if(/^https?:\/\//i.test(e)){const t=I(e);e=(e=t.path.replace(/\/{2,}/g,"/")).replace("/","//"),t.query&&(e+="?"+t.query)}return e}(e=$(e=e.trim()))))}function B(...e){const t=e.filter(s.h);if(!t||!t.length)return;const n=[];if(W(t[0])){const e=t[0],r=e.indexOf("//");-1!==r&&(n.push(e.slice(0,r+1)),function(e){return h.test(e)}(t[0])&&(n[0]+="/"),t[0]=e.slice(r+2))}else"/"===t[0][0]&&n.push("");const r=t.reduce((e,t)=>t?e.concat(t.split("/")):e,[]);for(let e=0;e<r.length;e++){const t=r[e];".."===t&&n.length>0&&".."!==n[n.length-1]?n.pop():(!t&&e===r.length-1||t&&("."!==t||0===n.length))&&n.push(t)}return n.join("/")}function G(e,t=!1){if(V(e)||z(e))return null;let n=e.indexOf("://");if(-1===n&&K(e))n=2;else{if(-1===n)return null;n+=3}const r=e.indexOf("/",n);return-1!==r&&(e=e.slice(0,r)),t&&(e=te(e,!0)),e}function W(e){return K(e)||X(e)}function V(e){return null!=e&&"blob:"===e.slice(0,5)}function z(e){return"data:"===e.slice(0,5)}function J(e){const t=Q(e);if(!t||!t.isBase64)return null;const n=atob(t.data),r=new Uint8Array(n.length);for(let e=0;e<n.length;e++)r[e]=n.charCodeAt(e);return r.buffer}const H=/^data:(.*?)(;base64)?,(.*)$/;function Q(e){const t=e.match(H);if(!t)return null;const[,n,r,s]=t;return{mediaType:n,isBase64:!!r,data:s}}function Y(e){return e.isBase64?`data:${e.mediaType};base64,${e.data}`:`data:${e.mediaType},${e.data}`}function K(e){return null!=e&&void 0!==e&&"/"===e[0]&&"/"===e[1]}function X(e){return l.test(e)}function Z(e){return K(e)?"https:"+e:e.replace(f,"https:")}function ee(){return"https"===m.scheme}function te(e,t=!1){return K(e)?e.slice(2):(e=e.replace(l,""),t&&e.length>1&&"/"===e[0]&&"/"===e[1]&&(e=e.slice(2)),e)}function ne(e){let t=0;if(W(e)){const n=e.indexOf("//");-1!==n&&(t=n+2)}const n=e.lastIndexOf("/");return n<t?e:e.slice(0,n+1)}function re(e,t){if(!e)return"";const n=w(e).path.replace(/\/+$/,""),r=n.substring(n.lastIndexOf("/")+1);if(null==t||!t.length)return r;const s=new RegExp(`.(${t.join("|")})$`,"ig");return r.replace(s,"")}function se(e){return e.replace(/\/+$/,"")}function oe(e,t,n){if(!(t&&n&&e&&W(e)))return e;const r=e.indexOf("//"),s=e.indexOf("/",r+2),o=e.indexOf(":",r+2),i=Math.min(s<0?e.length:s,o<0?e.length:o);return e.slice(r+2,i).toLowerCase()!==t.toLowerCase()?e:`${e.slice(0,r+2)}${n}${e.slice(i)}`}function ie(e){return"string"==typeof e?new y($(e)):(e.scheme||(e.scheme=m.scheme),e)}function ce(e,t){const n=w(e),r=Object.keys(n.query||{});return r.length>0&&t&&t.warn("removeQueryParameters()",`Url query parameters are not supported, the following parameters have been removed: ${r.join(", ")}.`),n.path}function ae(e,t,n){const r=w(e),s=r.query||{};return s[t]=String(n),`${r.path}?${A(s)}`}function ue(e,t){const n=w(e),r=n.query||{};for(const e in t)r[e]=t[e];const s=A(r);return s?`${n.path}?${s}`:n.path}function le(e){if(Object(s.g)(e))return null;const t=e.match(fe);return t?t[1]:null}const fe=/.*?\.([^\/]*)$/},function(e,t,n){"use strict";class r{constructor(e,t,n,r=1,s=0){if(this.ctor=e,this.acquireFunction=t,this.releaseFunction=n,this.allocationSize=r,this._pool=new Array(s),this._initialSize=s,this.ctor)for(let e=0;e<s;e++)this._pool[e]=new this.ctor;this.allocationSize=Math.max(r,1)}destroy(){this.prune(0)}acquire(...e){let t;if(r.test.disabled)t=new this.ctor;else{if(0===this._pool.length){const e=this.allocationSize;for(let t=0;t<e;t++)this._pool[t]=new this.ctor}t=this._pool.pop()}return this.acquireFunction?this.acquireFunction(t,...e):function(e){return e&&e.acquire&&"function"==typeof e.acquire}(t)&&t.acquire(...e),t}release(e){e&&!r.test.disabled&&(this.releaseFunction?this.releaseFunction(e):function(e){return e&&e.release&&"function"==typeof e.release}(e)&&e.release(),this._pool.push(e))}prune(e=this._initialSize){if(!(e>=this._pool.length)){for(let t=e;t<this._pool.length;++t){const e=this._pool[t];this._dispose(e)}this._pool.length=e}}_dispose(e){e.dispose&&"function"==typeof e.dispose&&e.dispose()}}r.test={disabled:!1},t.a=r},function(e,t,n){"use strict";n.d(t,"a",(function(){return r})),n.d(t,"b",(function(){return s}));const r="20210422",s="d399841cb31e02e4f76b4117a449f428802a5e4f"},function(e,t,n){"use strict";t.a=class{constructor(e,t=29){this.name=e,this._counter=0,this._items=new Array(t)}record(e){this._items[++this._counter%this._items.length]=e}get median(){return this._items.slice().sort()[Math.floor(this._items.length/2)]}get average(){return this._items.reduce((e,t)=>e+t,0)/this._items.length}get last(){return this._items[this._counter%this._items.length]}}},function(e,t,n){"use strict";var r=n(2),s=n(14),o=n(11),i=n(29),c=n(15),a=n(47),u=n(18),l=(n(3),n(6)),f=n(7),d=n(27),h=n(22),p=n(48);let b=!1;function g(e){return void 0!==e.flags}class _{constructor(e,t,n){this.host=e,this.propertyName=t,this.metadata=n,this.flags=1,this._observers=null,this._accessed=null,this._handles=[],this.flags=1|(n.nonNullable?8:0)|(n.hasOwnProperty("value")?16:0)|(void 0===n.get?32:0)|(void 0===n.dependsOn?64:0)}destroy(){this._accessed&&(this._accessed.clear(),this._accessed=null),this._observers&&(this._observers.clear(),this._observers=null),this._clearObservationHandles()}onObservableAccessed(e){e!==this&&(null===this._accessed&&(this._accessed=new Set),this._accessed.add(e))}onTrackingEnd(){this._clearObservationHandles(),this.flags|=32;const e=this._accessed;if(null===e)return;const t=this._handles;for(const n of e)t.push(n.observe(this));e.clear()}observe(e){return null===this._observers&&(this._observers=new Set),new p.a(this._observers.add(e),e)}notify(){2&~this.flags&&(this.flags|=1),this._notifyObservers()}invalidate(){this.notify()}commit(){this.flags&=-2,this._notifyObservers()}_notifyObservers(){if(null===this._observers)return;const e=this._observers.size,t=new Array(e);let n=e-1;for(const e of this._observers)t[n--]=e;const r=!b;for(;t.length;){const e=t.pop();if(g(e)){if(2&~e.flags&&(e.flags|=1),null===e._observers)continue;for(const n of e._observers)t.push(n)}else r&&e.notify()}}_clearObservationHandles(){for(const e of this._handles)e.remove();this._handles.length=0}}class y{constructor(){this._values=new Map}clone(e){const t=new y;return this._values.forEach((n,r)=>{e&&e.has(r)||t.set(r,Object(l.a)(n))}),t}get(e){return this._values.get(e)}originOf(){return 6}keys(){return[...this._values.keys()]}set(e,t){this._values.set(e,t)}delete(e){this._values.delete(e)}has(e){return this._values.has(e)}forEach(e){this._values.forEach(e)}}var m=n(8);function v(e,t,n){return void 0!==e}function O(e,t,n,r){return!(void 0===e||null==n&&8&e.flags&&(r.lifecycle,1))}function w(e){return e&&"function"==typeof e.destroy}r.a.getLogger("esri.core.accessorSupport.Properties");const j=new h.a(class{constructor(){this.value=null,this.valid=!0}acquire(){this.valid=!0}release(){this.value=null}});var E=class{constructor(e){this.host=e,this.properties=new Map,this.ctorArgs=null,this.destroyed=!1,this.lifecycle=0,this.store=new y,this._origin=6;const t=this.host.constructor.__accessorMetadata__,n=t.properties;for(const t in n){const r=new _(e,t,n[t]);this.properties.set(t,r)}this.metadatas=n,this._autoDestroy=t.autoDestroy}initialize(){this.lifecycle=1}constructed(){this.lifecycle=2}destroy(){if(this.destroyed=!0,this._autoDestroy)for(const[e,t]of this.properties){const n=this.internalGet(e);n&&w(n)&&(n.destroy(),8&~t.flags&&this._internalSet(t,null)),t.destroy()}else for(const[e,t]of this.properties)t.destroy()}get initialized(){return 0!==this.lifecycle}get(e){return this.properties.get(e).metadata.get?this.getterComputed(e):this.getterStatic(e)}getterStatic(e){const t=this.properties.get(e);if(void 0!==t)return Object(m.c)(t),this.store.has(e)?this.store.get(e):t.metadata.value}getterComputed(e){const t=this.properties.get(e);Object(m.c)(t);const n=this.store,r=t.flags,s=this.store.get(e);if(4&r)return s;if(n.has(e)&&(1&~r||b))return s;let o;t.flags|=4;const i=t.metadata.get;64&r?o=Object(m.b)(t,i,this.host):(Object(m.d)(this.host,t),o=i.call(this.host)),n.set(e,o,1);const c=this.store.get(e);return c===s?t.flags&=-2:t.commit(),t.flags&=-5,c}originOf(e){const t=this.store.originOf(e);if(void 0===t){const t=this.properties.get(e);if(void 0!==t&&16&t.flags)return"defaults"}return Object(d.b)(t)}has(e){return!!this.properties.has(e)&&this.store.has(e)}keys(){return[...this.properties.keys()]}internalGet(e){const t=this.properties.get(e);if(v(t))return this.store.has(e)?this.store.get(e):t.metadata.value}internalSet(e,t){const n=this.properties.get(e);v(n)&&this._internalSet(n,t)}getDependsInfo(e,t,n){const r=this.properties.get(t);if(!v(r))return"";const s=new Set,o=Object(m.b)({onObservableAccessed:e=>s.add(e),onTrackingEnd:()=>{}},()=>{var t;return null==(t=r.metadata.get)?void 0:t.call(e)});let i=`${n}${e.declaredClass.split(".").pop()}.${t}: ${o}\n`;if(0===s.size)return i;n+="  ";for(const e of s){if(!(e instanceof _))continue;const t=e.host,r=e.propertyName,s=Object(f.a)(t);i+=s?s.getDependsInfo(t,r,n):`${n}${r}: undefined\n`}return i}setAtOrigin(e,t,n){const r=this.properties.get(e);if(v(r))return this._setAtOrigin(r,t,n)}isOverridden(e){const t=this.properties.get(e);return void 0!==t&&!!(2&t.flags)}clearOverride(e){const t=this.properties.get(e);void 0!==t&&2&t.flags&&(t.flags&=-3,t.invalidate())}override(e,t){const n=this.properties.get(e);if(!O(n,0,t,this))return;const r=n.metadata.cast;if(r){const e=this._cast(r,t),{valid:n,value:s}=e;if(j.release(e),!n)return;t=s}n.flags|=2,this._internalSet(n,t)}set(e,t){const n=this.properties.get(e);if(!O(n,0,t,this))return;const r=n.metadata.cast;if(r){const e=this._cast(r,t),{valid:n,value:s}=e;if(j.release(e),!n)return;t=s}const s=n.metadata.set;s?s.call(this.host,t):this._internalSet(n,t)}setDefaultOrigin(e){this._origin=Object(d.d)(e)}getDefaultOrigin(){return Object(d.b)(this._origin)}propertyInvalidated(e){const t=this.properties.get(e);void 0!==t&&t.invalidate()}propertyCommitted(e){const t=this.properties.get(e);void 0!==t&&t.commit()}_internalSet(e,t){const n=0!==this.lifecycle?this._origin:0;this._setAtOrigin(e,t,n)}_setAtOrigin(e,t,n){const r=this.store,s=e.propertyName;r.has(s,n)&&Object(l.b)(t,r.get(s))&&2&~e.flags&&n===r.originOf(s)||(b=!0,e.invalidate(),b=!1,r.set(s,t,n),e.commit(),Object(m.a)(this.host,e))}_cast(e,t){const n=j.acquire();return n.valid=!0,n.value=t,e&&(n.value=e.call(this.host,t,n)),n}},A=n(44),T=n(0);class S extends h.a{constructor(){super(...arguments),this._set=new Set}destroy(){super.destroy(),this._set=Object(T.l)(this._set)}acquire(...e){const t=super.acquire(...e);return this._set.delete(t),t}release(e){e&&!this._set.has(e)&&(super.release(e),this._set.add(e))}_dispose(e){this._set.delete(e),super._dispose(e)}}var k=n(42),I=n(33);class P{constructor(){this.uid=0,this.target=null,this.path=null,this.oldValue=null,this.callback=null,this.getValue=null,this.removed=!1,this.propertyPath=null}acquire(e,t,n,r,s){this.target=e,this.path=t,this.oldValue=n,this.callback=r,this.getValue=s,this.propertyPath=Object(f.g)(t),this.uid=++P.uid,this.removed=!1}release(){this.target=this.path=this.propertyPath=this.callback=this.oldValue=null,this.uid=++P.uid,this.removed=!0}}P.pool=new S(P),P.uid=0;const R=new A.a,C=new Set;let N,M=R.acquire();function x(e){C.has(e)?M.splice(M.indexOf(e),1):C.add(e),M.push(e),N||(N=Object(k.a)(F))}function L(e){if(e.removed)return;const{callback:t,path:n,oldValue:r,target:s}=e,o=e.getValue();U(r,o)&&(e.oldValue=o,t.call(s,o,r,n,s))}function U(e,t){return!Object(l.b)(e,t)}function F(){let e=10;for(;N&&e--;){N=null;const e=M;M=R.acquire(),C.clear();const t=R.acquire();for(const n of e){const e=n.uid;L(n),e===n.uid&&n.removed&&t.push(n)}for(let e=0;e<M.length;e++){const n=M[e];n.removed&&(t.push(n),C.delete(n),M.splice(e,1),e-=1)}for(let e=0;e<t.length;e++)P.pool.release(t[e]);R.release(e),R.release(t),$.forEach(e=>e())}}const $=new Set;function D(e,t,n,r=!1){return!e.__accessor__||e.__accessor__.destroyed?{remove(){}}:r?function(e,t,n){const r=Object(f.e)(e,t,n,(e,t,n)=>{let o=!1;return Object(I.a)(()=>Object(s.c)(e,t),(s,i)=>{e.__accessor__.destroyed?r.remove():o||(o=!0,U(i,s)&&n.call(e,s,i,t,e),o=!1)})});return r}(e,t,n):function(e,t,n){let r=Object(f.e)(e,t,n,(e,t,n)=>{let o,i,c=Object(I.b)(()=>Object(s.c)(e,t),(s,c)=>{e.__accessor__.destroyed||o&&o.uid!==i?r.remove():(o||(o=P.pool.acquire(e,t,s,n,c),i=o.uid),x(o))});return{remove:Object(f.d)((function(){c.remove(),o&&(o.uid!==i||o.removed||(o.removed=!0,x(o)),o=null),r=c=null}))}});return r}(e,t,n)}function q(e){if(null==e)return{value:e};if(Array.isArray(e))return{type:[e[0]],value:null};switch(typeof e){case"object":return e.constructor&&e.constructor.__accessorMetadata__||e instanceof Date?{type:e.constructor,value:e}:e;case"boolean":return{type:Boolean,value:e};case"string":return{type:String,value:e};case"number":return{type:Number,value:e};case"function":return{type:e,value:null};default:return}}class B{constructor(...e){if(this.constructor===B)throw new Error("[accessor] cannot instantiate Accessor. This can be fixed by creating a subclass of Accessor");Object.defineProperty(this,"__accessor__",{enumerable:!1,value:new E(this)}),e.length>0&&this.normalizeCtorArgs&&(this.__accessor__.ctorArgs=this.normalizeCtorArgs.apply(this,e))}static createSubclass(e={}){if(Array.isArray(e))throw new Error("Multi-inheritance unsupported since 4.16");const{properties:t,declaredClass:n,constructor:r}=e;delete e.declaredClass,delete e.properties,delete e.constructor;const s=this;class i extends s{constructor(...e){super(...e),this.inherited=null,r&&r.apply(this,e)}}Object(o.a)(i.prototype);for(const t in e){const n=e[t];i.prototype[t]="function"==typeof n?function(...e){const r=this.inherited;let o;this.inherited=function(...e){if(s.prototype[t])return s.prototype[t].apply(this,e)};try{o=n.apply(this,e)}catch(e){throw this.inherited=r,e}return this.inherited=r,o}:e[t]}for(const e in t){const n=q(t[e]);Object(c.b)(n)(i.prototype,e)}return Object(u.a)(n)(i)}postscript(e){const t=this.__accessor__,n=t.ctorArgs||e;t.initialize(),n&&(this.set(n),t.ctorArgs=null),t.constructed(),this.initialize()}initialize(){}destroy(){this.destroyed||(function(e){for(let t=0;t<M.length;t++){const n=M[t];n.target===e&&(n.removed=!0)}}(this),this.__accessor__.destroy())}get initialized(){return this.__accessor__&&this.__accessor__.initialized||!1}get constructed(){return this.__accessor__&&2===this.__accessor__.lifecycle||!1}get destroyed(){return this.__accessor__&&this.__accessor__.destroyed||!1}commitProperty(e){this.get(e)}get(e){return Object(s.b)(this,e)}hasOwnProperty(e){return this.__accessor__?this.__accessor__.has(e):Object.prototype.hasOwnProperty.call(this,e)}isInstanceOf(e){return Object(a.b)(r.a.getLogger(this.declaredClass),"isInstanceOf",{replacement:"Use instanceof directly",version:"4.16"}),this instanceof e}keys(){return this.__accessor__?this.__accessor__.keys():[]}set(e,t){return Object(i.a)(this,e,t),this}watch(e,t,n){return D(this,e,t,n)}_clearOverride(e){return this.__accessor__.clearOverride(e)}_override(e,t){return this.__accessor__.override(e,t)}_isOverridden(e){return this.__accessor__.isOverridden(e)}notifyChange(e){this.__accessor__.propertyInvalidated(e)}_get(e){return this.__accessor__.internalGet(e)}_set(e,t){return this.__accessor__.internalSet(e,t),this}}t.a=B},function(e,t,n){"use strict";n.d(t,"a",(function(){return u})),n.d(t,"b",(function(){return c})),n.d(t,"c",(function(){return o})),n.d(t,"d",(function(){return f})),n.d(t,"e",(function(){return a})),n.d(t,"f",(function(){return b})),n.d(t,"g",(function(){return d})),n.d(t,"h",(function(){return p}));var r=n(0),s=n(46);function o(e,t,n){if(Object(r.g)(e)&&Object(r.g)(t))return!0;if(Object(r.g)(e)||Object(r.g)(t)||e.length!==t.length)return!1;if(n){for(let r=0;r<e.length;r++)if(!n(e[r],t[r]))return!1}else for(let n=0;n<e.length;n++)if(e[n]!==t[n])return!1;return!0}const i=!!Array.prototype.fill;function c(e,t){if(i)return new Array(e).fill(t);const n=new Array(e);for(let r=0;r<e;r++)n[r]=t;return n}function a(e,t){void 0===t&&(t=e,e=0);const n=new Array(t-e);for(let r=e;r<t;r++)n[r-e]=r;return n}class u{constructor(){this.last=0}}const l=new u;function f(e,t,n,r){r=r||l;const s=Math.max(0,r.last-10);for(let o=s;o<n;++o)if(e[o]===t)return r.last=o,o;const o=Math.min(s,n);for(let n=0;n<o;++n)if(e[n]===t)return r.last=n,n;return-1}function d(e,t,n,r){const s=null==n?e.length:n,o=f(e,t,s,r);if(-1!==o)return e[o]=e[s-1],null==n&&e.pop(),t}const h=new Set;function p(e,t,n=e.length,r=t.length,s,o){if(0===r||0===n)return n;h.clear();for(let e=0;e<r;++e)h.add(t[e]);s=s||l;const i=Math.max(0,s.last-10);for(let t=i;t<n;++t)if(h.has(e[t])&&(o&&o.push(e[t]),h.delete(e[t]),e[t]=e[n-1],--n,--t,0===h.size||0===n))return h.clear(),n;for(let t=0;t<i;++t)if(h.has(e[t])&&(o&&o.push(e[t]),h.delete(e[t]),e[t]=e[n-1],--n,--t,0===h.size||0===n))return h.clear(),n;return h.clear(),n}new s.a;function b(e,t){const n=e.indexOf(t);return-1!==n?(e.splice(n,1),t):null}},function(e,t,n){"use strict";n.d(t,"a",(function(){return s})),n.d(t,"b",(function(){return i})),n.d(t,"c",(function(){return c})),n.d(t,"d",(function(){return o}));var r=n(0);const s=7;function o(e){switch(e){case"defaults":return 0;case"service":return 2;case"portal-item":return 3;case"web-scene":return 4;case"web-map":return 5;case"user":return 6}}function i(e){switch(e){case 0:return"defaults";case 2:return"service";case 3:return"portal-item";case 4:return"web-scene";case 5:return"web-map";case 6:return"user"}return Object(r.b)(void 0)}function c(e){return i(e)}},function(e,t,n){"use strict";var r=n(9);class s{constructor(e,t,n){this.name=e,this.details=n,this.message=void 0,this instanceof s&&(this.message=t&&function(e,t){return e.replace(/\$\{([^\s\:\}]*)(?:\:([^\s\:\}]+))?\}/g,(function(e,n){if(""===n)return"$";const s=Object(r.b)(n,t),o=null==s?"":s;if(void 0===o)throw new Error(`could not find key "${n}" in template`);return o.toString()}))}(t,n)||"")}toString(){return"["+this.name+"]: "+this.message}}t.a=s},function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));n(3);var r=n(2),s=n(14);function o(e,t,n){if(e&&t)if("object"==typeof t)for(const n of Object.getOwnPropertyNames(t))o(e,n,t[n]);else{if(-1!==t.indexOf(".")){const r=t.split("."),i=r.splice(r.length-1,1)[0];return void o(Object(s.b)(e,r),i,n)}e[t]=n}}r.a.getLogger("esri.core.accessorSupport.set")},function(e,t,n){"use strict";function r(e){return!!e&&e.prototype&&e.prototype.declaredClass&&0===e.prototype.declaredClass.indexOf("esri.core.Collection")}n.d(t,"a",(function(){return r}))},function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));class r{constructor(e){this.notify=e,this._accessed=new Set,this._handles=[]}destroy(){this._accessed.clear(),this.clear()}onObservableAccessed(e){this._accessed.add(e)}onTrackingEnd(){for(const e of this._accessed)this._handles.push(e.observe(this));this._accessed.clear()}clear(){for(const e of this._handles)e.remove();this._handles.length=0}}},function(e,t,n){"use strict";n.d(t,"a",(function(){return u})),n.d(t,"b",(function(){return l}));var r=n(9),s=n(2),o=n(11),i=n(40),c=n(30);const a=s.a.getLogger("esri.core.accessorSupport.extensions.serializableProperty.reader");function u(e,t,n){var s,o,i;e&&(!n&&!t.read||null!=(s=t.read)&&s.reader||!1===(null==(o=t.read)?void 0:o.enabled)||("types"in(i=e)?g(i.types):b(i.type))&&Object(r.c)("read.reader",l(e),t))}function l(e){var t;const n=null!=(t=e.ndimArray)?t:0;if(n>1)return function(e){var t;const n=f(e),r=d.bind(null,n),s=null!=(t=e.ndimArray)?t:0;return(e,t,n)=>{if(null==e)return e;e=r(e,n,s);let o=s,i=e;for(;o>0&&Array.isArray(i);)o--,i=i[0];if(void 0!==i)for(let t=0;t<o;t++)e=[e];return e}}(e);if(1===n)return h(e);if("type"in e&&p(e.type)){var r,s;const t=null==(r=e.type.prototype)||null==(s=r.itemType)?void 0:s.Type,n=h("function"==typeof t?{type:t}:{types:t});return(t,r,s)=>{const o=n(t,r,s);return o?new e.type(o):o}}return f(e)}function f(e){return"type"in e?function(e){return e.prototype.read?(t,n,r)=>{if(null==t)return t;const s=typeof t;if("object"!==s)return void a.error(`Expected JSON value of type 'object' to deserialize type '${e.prototype.declaredClass}', but got '${s}'`);const o=new e;return o.read(t,r),o}:e.fromJSON}(e.type):function(e){var t;let n=null;const r=null!=(t=e.errorContext)?t:"type";return(t,s,c)=>{if(null==t)return t;const u=typeof t;if("object"!==u)return void a.error(`Expected JSON value of type 'object' to deserialize, but got '${u}'`);n||(n=function(e){const t={};for(const s in e.typeMap){var n,r;const i=e.typeMap[s],c=Object(o.a)(i.prototype);if("function"==typeof e.key)continue;const a=c.properties[e.key];if(!a)continue;null!=(n=a.json)&&n.type&&Array.isArray(a.json.type)&&1===a.json.type.length&&"string"==typeof a.json.type[0]&&(t[a.json.type[0]]=i);const u=null==(r=a.json)?void 0:r.write;if(!u||!u.writer){t[s]=i;continue}const l=u.target,f="string"==typeof l?l:e.key,d={};u.writer(s,d,f),d[f]&&(t[d[f]]=i)}return t}(e));const l=e.key;if("string"!=typeof l)return;const f=t[l],d=f?n[f]:e.defaultKeyValue?e.typeMap[e.defaultKeyValue]:void 0;if(!d){const e=`Type '${f||"unknown"}' is not supported`;return c&&c.messages&&t&&c.messages.push(new i.a(r+":unsupported",e,{definition:t,context:c})),void a.error(e)}const h=new d;return h.read(t,c),h}}(e.types)}function d(e,t,n,r){return 0!==r&&Array.isArray(t)?t.map(t=>d(e,t,n,r-1)):e(t,void 0,n)}function h(e){const t=f(e);return(e,n,r)=>{if(null==e)return e;if(Array.isArray(e)){const n=[];for(const s of e){const e=t(s,void 0,r);void 0!==e&&n.push(e)}return n}const s=t(e,void 0,r);return void 0!==s?[s]:void 0}}function p(e){if(!Object(c.a)(e))return!1;const t=e.prototype.itemType;return!(!t||!t.Type)&&("function"==typeof t.Type?b(t.Type):g(t.Type))}function b(e){return!Array.isArray(e)&&!!e&&e.prototype&&("read"in e.prototype||"fromJSON"in e||p(e))}function g(e){for(const t in e.typeMap)if(!b(e.typeMap[t]))return!1;return!0}},function(e,t,n){"use strict";n.d(t,"a",(function(){return i})),n.d(t,"b",(function(){return c}));var r=n(8),s=n(31);const o={runImmediately:!1};function i(e,t,n=o){let i=new s.a((function(){if(!i||a)return;const n=c;i.clear(),a=!0,c=Object(r.b)(i,e),a=!1,t(c,n)})),c=null,a=!1;return a=!0,c=Object(r.b)(i,e),a=!1,n.runImmediately&&t(c,c),{remove:function(){i&&(i.destroy(),i=null,c=null)}}}function c(e,t){let n=new s.a((function(){t(o,i)})),o=null;function i(){return n?(n.clear(),o=Object(r.b)(n,e),o):null}return i(),{remove:function(){n&&(n.destroy(),n=null),o=null}}}},function(e,t,n){"use strict";n.d(t,"a",(function(){return o})),n.d(t,"b",(function(){return a}));var r=n(9),s=n(30);function o(e,t){var n;if(!t.write||t.write.writer||!1===t.write.enabled&&!t.write.overridePolicy)return;const o=null!=(n=null==e?void 0:e.ndimArray)?n:0;var c;e&&(1===o||"type"in e&&Object(s.a)(e.type))?t.write.writer=u:t.write.writer=o>1?(c=o,function(e,t,n,s){let o;if(null===e)o=null;else{o=l(e,s,c);let t=c,n=o;for(;t>0&&Array.isArray(n);)t--,n=n[0];if(void 0!==n)for(let e=0;e<t;e++)o=[o]}Object(r.c)(n,o,t)}):i}function i(e,t,n,s){Object(r.c)(n,c(e,s),t)}function c(e,t){return e&&"function"==typeof e.write?e.write({},t):e&&"function"==typeof e.toJSON?e.toJSON():"number"==typeof e?a(e):e}function a(e){return e===-1/0?-Number.MAX_VALUE:e===1/0?Number.MAX_VALUE:isNaN(e)?null:e}function u(e,t,n,s){let o;null===e?o=null:e&&"function"==typeof e.map?(o=e.map(e=>c(e,s)),"function"==typeof o.toArray&&(o=o.toArray())):o=[c(e,s)],Object(r.c)(n,o,t)}function l(e,t,n){return 0!==n&&Array.isArray(e)?e.map(e=>l(e,t,n-1)):c(e,t)}},function(e,t,n){"use strict";var r=n(1);const s=r.a.queueMicrotask?r.a.queueMicrotask:e=>{r.a.Promise.resolve().then(e)},o=[];let i=[];function c(e){o.push(e),1===o.length&&s(()=>{for(const e of i)e();const e=o.slice();o.length=0;for(const t of e)t()})}(c||(c={})).before=function(e){return i.push(e),{remove(){i=i.filter(t=>t!==e)}}};var a=c;t.a=a},function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));var r=n(1);function s(){const e=o.getRandomValues(new Uint16Array(8));e[3]=4095&e[3]|16384,e[4]=16383&e[4]|32768;const t=t=>e[t].toString(16);return t(0)+t(1)+"-"+t(2)+"-"+t(3)+"-"+t(4)+"-"+t(5)+t(6)+t(7)}const o=r.a.crypto||r.a.msCrypto},function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));var r=n(21);function s(e){return o[function(e){return e instanceof Blob?e.type:function(e){const t=Object(r.n)(e);return a[t]||i}(e.url)}(e)]||c}const o={},i="text/plain",c=o[i],a={png:"image/png",jpeg:"image/jpeg",jpg:"image/jpg",bmp:"image/bmp",gif:"image/gif",json:"application/json",txt:"text/plain",xml:"application/xml",svg:"image/svg+xml",zip:"application/zip",pbf:"application/vnd.mapbox-vector-tile",gz:"application/gzip"};for(const e in a)o[a[e]]=e},function(e,t,n){"use strict";n.d(t,"a",(function(){return u})),n.d(t,"b",(function(){return c})),n.d(t,"c",(function(){return a})),n.d(t,"d",(function(){return o})),n.d(t,"e",(function(){return i}));var r=n(3),s=(n(23),n(21));const o="4.19",i={request:(e,t)=>n.e(152).then(n.bind(null,54)).then(({default:n})=>{const r=e.options||{};return r.responseType="array-buffer",r.signal=null==t?void 0:t.signal,n(e.url,r)}).then(e=>({result:{data:e.data,ssl:e.ssl},transferList:[e.data]}))};let c;function a(e){c=e}function u(e){const t=c&&c.findCredential(e);return t&&t.token?Object(s.d)(e,"token",t.token):e}Object(r.a)("host-webworker")||(Object(r.a)("edge")||Object(r.a)("trident"))&&console.warn("Deprecated browser - see http://esriurl.com/oldbrowser")},function(e,t,n){"use strict";n.d(t,"a",(function(){return c})),n.d(t,"b",(function(){return a})),n.d(t,"c",(function(){return i})),n.d(t,"d",(function(){return u}));var r=n(9);const s=/\{([^\}]+)\}/g;function o(e){return null==e?"":e}function i(e,t){return e.replace(s,"object"==typeof t?(e,n)=>o(Object(r.b)(n,t)):(e,n)=>o(t(n)))}function c(e,t){return e.replace(/([\.$?*|{}\(\)\[\]\\\/\+\-^])/g,e=>t&&-1!==t.indexOf(e)?e:"\\"+e)}function a(e){let t=0;for(let n=0;n<e.length;n++)t=(t<<5)-t+e.charCodeAt(n),t|=0;return t}function u(e){return(new DOMParser).parseFromString(e||"","text/html").body.innerText||""}},function(e,t,n){"use strict";var r=n(28);class s extends r.a{constructor(e,t,n){if(super(e,t,n),!(this instanceof s))return new s(e,t,n)}}s.prototype.type="warning",t.a=s},function(e,t,n){"use strict";n.d(t,"a",(function(){return d})),n.d(t,"b",(function(){return _})),n.d(t,"c",(function(){return g})),n.d(t,"d",(function(){return p})),n.d(t,"e",(function(){return h})),n.d(t,"f",(function(){return b})),n.d(t,"g",(function(){return i}));n(6);var r=n(17),s=n(4);function o(e,t,n,r,s){const o=e.watch(t,(t,s,o,i)=>{n&&!n(t)||null==r||r.call(e,t,s,o,i)},s);if(Array.isArray(t))for(const s of t){const o=e.get(s);n&&n(o)&&(null==r||r.call(e,o,o,t,e))}else{const s=e.get(t);n&&n(s)&&(null==r||r.call(e,s,s,t,e))}return o}function i(e,t,n,r,i){const c="function"==typeof r?r:null,a="object"==typeof r?r:null;"boolean"==typeof r&&(i=r);let u,l=!1;function f(){u&&(u.remove(),u=null)}const d=Object(s.f)();Object(s.o)(a,()=>{f(),d.reject(Object(s.e)())});const h={then:d.promise.then.bind(d.promise),catch:d.promise.catch.bind(d.promise),remove:f};return Object.freeze(h),u=o(e,t,n,(t,n,r,s)=>{l=!0,f(),c&&c.call(e,t,n,r,s),d.resolve({value:t,oldValue:n,propertyName:r,target:s})},i),l&&f(),h}function c(e){return!!e}function a(e){return!e}function u(e){return!0===e}function l(e){return!1===e}const f=/\?(\.|$)/g;function d(e,t,n,r){const s=Array.isArray(t)?t:t.indexOf(",")>-1?t.split(","):[t],o=function(e,t,n,r){return e.watch(t,n,r)}(e,t,n,r);for(const t of s){const r=t.trim().replace(f,"$1"),s=e.get(r);n.call(e,s,s,r,e)}return o}function h(e,t,n,r){return i(e,t,c,n,r)}function p(e,t,n,r){return i(e,t,a,n,r)}function b(e,t,n,r){return i(e,t,u,n,r)}function g(e,t,n,r){return i(e,t,l,n,r)}function _(e,t,n,s,o,i,c){const a={};function u(t){const r=a[t];r&&(i&&i(r.target,t,e,n),r.handle.remove(),delete a[t])}const l=d(e,t,(t,i,c)=>{u(c),Object(r.a)(t)&&(a[c]={handle:Object(r.b)(t,n,s),target:t},o&&o(t,c,e,n))},c);return{remove(){l.remove();for(const e in a)u(e)}}}},function(e,t,n){"use strict";n.d(t,"a",(function(){return g})),n.d(t,"b",(function(){return v}));var r=n(0),s=n(35),o=n(24),i=n(20),c=n(4);class a{constructor(e){this.callback=e,this.isActive=!0}remove(){this.isActive=!1}}let u=0,l=0;const f={time:0,deltaTime:0,elapsedFrameTime:0,frameDuration:0},d=["prepare","preRender","render","postRender","update"],h=[],p=new i.a;const b={frameTasks:p,willDispatch:!1,clearFrameTasks:function(e=!1){p.forAll(e=>{e.removed=!0}),e&&y()},dispatch:m,executeFrameTasks:function(e){const t=e-u;u=e;const n=l>0?l:1e3/60,r=Math.max(0,t-n);for(let s=0;s<d.length;s++){const o=performance.now(),i=d[s];p.forAll(o=>{var c;o.paused||o.removed||(0===s&&o.ticks++,o.phases[i]&&(f.time=e,f.deltaTime=0===o.ticks?0:t,f.elapsedFrameTime=performance.now()-e,f.frameDuration=n-r,null==(c=o.phases[i])||c.call(o,f)))}),O[s].record(performance.now()-o)}y(),w.record(performance.now()-e)}};function g(e){const t=new a(e);return h.push(t),b.willDispatch||(b.willDispatch=!0,Object(s.a)(m)),t}const _=new i.a;function y(){p.forAll(e=>{e.removed&&_.push(e)}),p.removeUnorderedMany(_.data,_.length),_.clear()}function m(){for(;h.length;){const e=Object(r.b)(h.shift());e.isActive&&e.callback()}b.willDispatch=!1}function v(e=1,t){const n=Object(c.g)(),r=()=>{Object(c.m)(t)?n.reject(Object(c.e)()):0===e?n():(--e,Object(s.a)(()=>r()))};return r(),n.promise}const O=d.map(e=>new o.a(e)),w=new o.a("total")},function(e,t,n){"use strict";n.d(t,"a",(function(){return s})),n.d(t,"b",(function(){return o}));var r=n(0);function s(e){return o(()=>e.forEach(e=>Object(r.h)(e)&&e.remove()))}function o(e){return{remove:()=>{e&&(e(),e=void 0)}}}},function(e,t,n){"use strict";var r=n(22);const s=Array.prototype.splice;function o(e){e.length=0}class i{constructor(e=50,t=50){this._pool=new r.a(Array,void 0,o,t,e)}acquire(){return this._pool.acquire()}copy(e){const t=this.acquire();return e.unshift(0,0),s.apply(t,e),e.splice(0,2),t}release(e){this._pool.release(e)}prune(){this._pool.prune(0)}static acquire(){return c.acquire()}static copy(e){return c.copy(e)}static release(e){return c.release(e)}static prune(){c.prune()}}const c=new i(100);t.a=i},function(e,t,n){"use strict";n.d(t,"a",(function(){return h})),n.d(t,"b",(function(){return f})),n.d(t,"c",(function(){return u})),n.d(t,"d",(function(){return l}));var r=n(5);var s=n(32);function o(e){e.name&&(e.read&&"object"==typeof e.read?void 0===e.read.source&&(e.read.source=e.name):e.read={source:e.name},e.write&&"object"==typeof e.write?void 0===e.write.target&&(e.write.target=e.name):e.write={target:e.name})}function i(e){"boolean"==typeof e.read?e.read={enabled:e.read}:"function"==typeof e.read?e.read={enabled:!0,reader:e.read}:e.read&&"object"==typeof e.read&&void 0===e.read.enabled&&(e.read.enabled=!0)}function c(e){"boolean"==typeof e.write?e.write={enabled:e.write}:"function"==typeof e.write?e.write={enabled:!0,writer:e.write}:e.write&&"object"==typeof e.write&&void 0===e.write.enabled&&(e.write.enabled=!0)}var a=n(34);function u(e,t){return f(e,"read",t)}function l(e,t){return f(e,"write",t)}function f(e,t,n){let r=e&&e.json;if(e&&e.json&&e.json.origins&&n){const s=e.json.origins[n.origin];s&&("any"===t||t in s)&&(r=s)}return r}function d(e){const t=function(e){return e.type?function(e){if(!e.type)return;let t=0,n=e.type;for(;Array.isArray(n)&&!Object(r.o)(n);)n=n[0],t++;return{type:n,ndimArray:t}}(e):function(e){if(!e.types)return;let t=0,n=e.types;for(;Array.isArray(n);)n=n[0],t++;return{types:n,ndimArray:t}}(e)}(e);if(e.json.origins)for(const n in e.json.origins){const r=e.json.origins[n];Object(s.a)(t,r,!1),Object(a.a)(t,r)}Object(s.a)(t,e.json,!0),Object(a.a)(t,e.json)}const h={processPrototypePropertyMetadata(e,t){(function(e){if(e.json||(e.json={}),i(e.json),c(e.json),o(e.json),e.json.origins)for(const t in e.json.origins)i(e.json.origins[t]),c(e.json.origins[t]),o(e.json.origins[t]);return!0})(t)&&(function(e){if(e.json&&e.json.origins){const t=e.json.origins,n={"web-document":["web-scene","web-map"]};for(const e in n)if(t[e]){const r=t[e];n[e].forEach(e=>{t[e]=r}),delete t[e]}}}(t),d(t))}}},function(e,t,n){"use strict";class r{constructor(e=1){this._seed=e}set seed(e){this._seed=null==e?Math.random()*r._m:e}getInt(){return this._seed=(r._a*this._seed+r._c)%r._m,this._seed}getFloat(){return this.getInt()/(r._m-1)}getIntRange(e,t){return Math.round(this.getFloatRange(e,t))}getFloatRange(e,t){const n=t-e;return e+this.getInt()/r._m*n}}r._m=2147483647,r._a=48271,r._c=0,t.a=r},function(e,t,n){"use strict";n.d(t,"a",(function(){return c})),n.d(t,"b",(function(){return i}));var r=n(3);const s=new Set;function o(e,t,n=!1){n&&s.has(t)||(n&&s.add(t),e.warn(" DEPRECATED - "+t))}function i(e,t,n={}){if(Object(r.a)("esri-deprecation-warnings")){const{moduleName:r}=n;c(e,"Function: "+((r?r+"::":"")+t+"()"),n)}}function c(e,t,n={}){if(Object(r.a)("esri-deprecation-warnings")){const{replacement:r,version:s,see:i,warnOnce:c}=n;let a=t;r&&(a+="\n\t Replacement: "+r),s&&(a+="\n\t Version: "+s),i&&(a+=`\n\t See ${i} for more details.`),o(e,a,c)}}},function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));class r{constructor(e,t){this._observers=e,this._observer=t}remove(){this._observers.delete(this._observer)}}},function(e,t,n){"use strict";var r=n(4);class s{constructor(e,t,n,r){this.resolve=e,this.reject=t,this.callback=n,this.signal=r}}t.a=class{constructor(){this._tasks=new Array}get length(){return this._tasks.length}push(e,t){return new Promise((n,r)=>this._tasks.push(new s(n,r,e,t)))}unshift(e,t){return new Promise((n,r)=>this._tasks.unshift(new s(n,r,e,t)))}process(){if(0===this._tasks.length)return!1;const e=this._tasks.shift();try{Object(r.t)(e.signal);const t=e.callback();t&&"object"==typeof t&&"then"in t&&"function"==typeof t.then?t.then(e.resolve,e.reject):e.resolve(t)}catch(t){e.reject(t)}return!0}cancelAll(){const e=Object(r.e)();for(const t of this._tasks)t.reject(e);this._tasks.length=0}}},function(e,t,n){"use strict";n.r(t);var r=n(23),s=n(0),o=n(16),i=n(17),c=n(4),a=n(38),u=n(13),l=(n(3),n(2)),f=(n(5),n(15)),d=n(18),h=(n(21),n(36),n(37),n(24)),p=n(20),b=n(25),g=n(41),_=n(49);let y=class extends b.a{constructor(){super(...arguments),this.SCHEDULER_LOG_SLOW_TASKS=!1,this.FEATURE_SERVICE_SNAPPING_SOURCE_TILE_TREE_SHOW_TILES=!1}};Object(u.a)([Object(f.b)()],y.prototype,"SCHEDULER_LOG_SLOW_TASKS",void 0),Object(u.a)([Object(f.b)()],y.prototype,"FEATURE_SERVICE_SNAPPING_SOURCE_TILE_TREE_SHOW_TILES",void 0),y=Object(u.a)([Object(d.a)("esri.views.support.DebugFlags")],y);var m=new y;const v=l.a.getLogger("esri.views.support.Scheduler");var O,w;(w=O||(O={})).REMOTE_CLIENT="worker messages",w.SLIDE="slide",w.STAGE="stage",w.STREAM_DATA_LOADER="stream loader",w.ELEVATION_QUERY="elevation query",w.TERRAIN_SURFACE="terrain",w.SURFACE_GEOMETRY_UPDATES="surface geometry updates",w.GRAPHICS_CORE="Graphics3D",w.I3S_CONTROLLER="I3S",w.POINT_CLOUD_LAYER="point cloud",w.FEATURE_TILE_FETCHER="feature fetcher",w.LABELER="labeler",w.GRAPHICS_DECONFLICTOR="graphics deconflictor",w.FILTER_VISIBILITY="Graphics3D filter visibility",w.FEATURE_QUERY_ENGINE="feature query",w.SCALE_VISIBILITY="Graphics3D scale visibility",w.FRUSTUM_VISIBILITY="Graphics3D frustum visibility",w.POINT_OF_INTEREST_FREQUENT="POI frequent",w.POINT_OF_INTEREST_INFREQUENT="POI infrequent",w.FEATURE_TILE_TREE="feature tile tree",w.FEATURE_TILE_TREE_ACTIVE="fast feature tile tree",w.ELEVATION_ALIGNMENT="elevation alignment",w.TEXT_TEXTURE_ATLAS="text texture atlas",w.TEXTURE_UNLOAD="texture unload",w.OVERLAY_MANAGER="overlay manager",w.LINE_OF_SIGHT_TOOL="line of sight tool",w.LINE_OF_SIGHT_TOOL_INTERACTIVE="interactive line of sight tool",w.ELEVATION_PROFILE="elevation profile",w.SNAPPING="snapping",w[w.TEST_PRIO=1]="TEST_PRIO";const j={[O.REMOTE_CLIENT]:0,[O.SLIDE]:0,[O.STREAM_DATA_LOADER]:0,[O.ELEVATION_QUERY]:0,[O.STAGE]:1,[O.TERRAIN_SURFACE]:1,[O.SURFACE_GEOMETRY_UPDATES]:1,[O.GRAPHICS_CORE]:2,[O.I3S_CONTROLLER]:2,[O.POINT_CLOUD_LAYER]:2,[O.FEATURE_TILE_FETCHER]:2,[O.LABELER]:8,[O.GRAPHICS_DECONFLICTOR]:4,[O.FILTER_VISIBILITY]:4,[O.FEATURE_QUERY_ENGINE]:8,[O.SCALE_VISIBILITY]:4,[O.FRUSTUM_VISIBILITY]:4,[O.POINT_OF_INTEREST_FREQUENT]:6,[O.POINT_OF_INTEREST_INFREQUENT]:30,[O.FEATURE_TILE_TREE]:16,[O.FEATURE_TILE_TREE_ACTIVE]:0,[O.ELEVATION_ALIGNMENT]:12,[O.TEXT_TEXTURE_ATLAS]:12,[O.TEXTURE_UNLOAD]:12,[O.OVERLAY_MANAGER]:12,[O.LINE_OF_SIGHT_TOOL]:16,[O.LINE_OF_SIGHT_TOOL_INTERACTIVE]:0,[O.SNAPPING]:0};function E(e){return e in j?j[e]:"number"==typeof e?e:1}const A=1e3/30;var T,S;!function(e){let t=class extends b.a{constructor(e){super(e),this.updating=!0,this.performanceInfo={total:new h.a("total"),tasks:new Array},this._budget=null,this._state=1,this._tasks=new p.a,this._runQueue=new p.a,this._load=0,this._idleStateCallbacks=new p.a,this._idleUpdatesStartFired=!1,this._maxReschedule=P,this._forceTask=!1,this._debug=!1,this._debugHandle=Object(g.a)(m,"SCHEDULER_LOG_SLOW_TASKS",e=>this._debug=e),this._budget=new r(e.nowFunc),C.length=0;for(const e in O)R.set(O[e],this.performanceInfo.tasks.length),this.performanceInfo.tasks.push(new h.a(O[e])),C.push(0);let t;const n=this;this._test={get state(){return Object(s.g)(t)?n._state:t},set state(e){t=e},FRAME_SAFETY_BUDGET:6.5,INTERACTING_BUDGET:A,IDLE_BUDGET:100,get budget(){return n._budget.budget},usedBudget:0,updateTask:e=>this._updateTask(e),getState:e=>this._getState(e),getRuntime:e=>this._getRuntime(e),resetRuntimes:()=>this._resetRuntimes(),getRunning:()=>this._getRunning()}}destroy(){this._debugHandle&&this._debugHandle.remove()}registerTask(e,t,r){const s=E(e),o=new n(this,e,t,r,s);return this._tasks.push(o),o}registerIdleStateCallbacks(e,t){const n={idleBegin:e,idleEnd:t};this._idleStateCallbacks.push(n),2===this.state&&this._idleUpdatesStartFired&&n.idleBegin();const r=this;return{remove:()=>this._removeIdleStateCallbacks(n),set idleBegin(e){r._idleUpdatesStartFired&&(n.idleEnd(),2===r._state&&e()),n.idleBegin=e},set idleEnd(e){n.idleEnd=e}}}get now(){return this.nowFunc()}get load(){return this._load}set state(e){this._state!==e&&(this._state=e,2!==this.state&&this._idleUpdatesStartFired&&(this._idleUpdatesStartFired=!1,this._idleStateCallbacks.forAll(e=>e.idleEnd())))}get state(){return Object(s.g)(this._test.state)?this._state:this._test.state}updateBudget(e){this._test.usedBudget=0;let t=6.5,n=e.frameDuration,r=1;switch(this.state){case 2:t=0,n=Math.max(100,e.frameDuration),r=30;break;case 1:n=Math.max(A,e.frameDuration)}return n-=e.elapsedFrameTime+t,2!==this.state&&n<1&&!this._forceTask?(this._forceTask=!0,!1):(n=Math.max(n,r),this._budget.reset(n,this.state),this._maxReschedule=P,this._updateLoad(),this._schedule())}frame(){switch(this._forceTask=!1,this.state){case 2:this._idleUpdatesStartFired||(this._idleUpdatesStartFired=!0,this._idleStateCallbacks.forAll(e=>e.idleBegin())),this._runIdle();break;case 1:this._runInteracting();break;default:this._runAnimating()}this._test.usedBudget=this._budget.elapsed}_removeIdleStateCallbacks(e){this._idleUpdatesStartFired&&e.idleEnd(),this._idleStateCallbacks.removeUnordered(e)}removeTask(e){this._tasks.removeUnordered(e),this._runQueue.removeUnordered(e)}_updateTask(e){this._tasks.forAll(t=>{t.name===e&&t.setPriority(e)})}_getState(e){if(this._runQueue.some(t=>t.name===e))return S.SCHEDULED;let t=S.IDLE;return this._tasks.forAll(n=>{n.name===e&&n.needsUpdate&&(n.schedulePriority<=1?t=S.READY:t!==S.READY&&(t=S.WAITING))}),t}_getRuntime(e){let t=0;return this._tasks.forAll(n=>{n.name===e&&(t+=n.runtime)}),t}_resetRuntimes(){this._tasks.forAll(e=>e.runtime=0)}_getRunning(){const e=new Map;if(this._tasks.forAll(t=>{t.needsUpdate&&e.set(t.name,(e.get(t.name)||0)+1)}),0===e.size)return null;let t="";return e.forEach((e,n)=>{t+=e>1?` ${e}x ${n}`:" "+n}),t}_runIdle(){this._run()}_runInteracting(){this._run()}_runAnimating(){this._run()}_updateLoad(){const e=this._tasks.reduce((e,t)=>t.needsUpdate?++e:e,0);this._load=.9*this._load+e*(1-.9)}_schedule(){if(this._maxReschedule<=0)return!1;for(this._runQueue.filterInPlace(e=>!!e.needsUpdate||(e.schedulePriority=e.priority,!1)),this._tasks.forAll(e=>{0===e.priority&&e.needsUpdate&&!this._runQueue.some(t=>t===e)&&this._runQueue.unshift(e)});0===this._runQueue.length;){let e=!1,t=0;if(this._tasks.forAll(n=>{if(n.needsUpdate&&0!==n.schedulePriority&&0!==n.priority)switch(e=!0,t=Math.max(t,n.priority),n.schedulePriority){case 1:n.schedulePriority=0,this._runQueue.push(n);break;default:--n.schedulePriority}}),!e)return this.updating=!1,!1;this._maxReschedule===P&&(this._maxReschedule=t),--this._maxReschedule}return this.updating=!0,!0}_run(){const e=this._budget.now();for(let e=0;e<C.length;++e)C[e]=0;do{for(;this._runQueue.length>0;){const t=this._budget.now(),n=this._runQueue.pop();this._budget.resetProgress();try{n.update(this._budget)}catch(e){v.error(`Exception in task "${n.name}"`,e)}n.schedulePriority=n.priority;const r=this._budget.now()-t;if(n.runtime+=r,C[R.get(n.task)]+=r,this._debug&&this._budget.elapsed>2*this._budget.budget&&console.log("Task",n.name,"used",this._budget.elapsed,"of max",this._budget.budget,"ms"),this._budget.remaining<=0)return void this._recordFrameTaskTimes(C,this._budget.now()-e)}}while(this._schedule());this._recordFrameTaskTimes(C,this._budget.now()-e)}_recordFrameTaskTimes(e,t){for(let t=0;t<e.length;++t)this.performanceInfo.tasks[t].record(e[t]);this.performanceInfo.total.record(t)}get test(){return this._test}};Object(u.a)([Object(f.b)()],t.prototype,"updating",void 0),Object(u.a)([Object(f.b)()],t.prototype,"nowFunc",void 0),t=Object(u.a)([Object(d.a)("esri.views.support.Scheduler")],t),e.Scheduler=t;let n=class extends b.a{constructor(e,t,n,r,s){super({}),this._scheduler=e,this.name=t,this.update=n,this._needsUpdateCB=r,this._priority=s,this.runtime=0,this._queue=new _.a,this.updating=!1,this.schedulePriority=this._priority}normalizeCtorArgs(){return{}}remove(){this.processQueue(k),this._scheduler.removeTask(this),this.schedule=I.schedule,this.reschedule=I.reschedule}get priority(){return this._priority}setPriority(e){this.name=e;const t=E(e);0!==this._priority&&0===this.schedulePriority||(this.schedulePriority=t),this._priority=t}get task(){return this.name}set task(e){this.setPriority(e)}get needsUpdate(){return this.updating||this._needsUpdateCB()}schedule(e,t){return this.updating=!0,this._queue.push(e,t)}reschedule(e,t){return this.updating=!0,this._queue.unshift(e,t)}processQueue(e){for(;!e.done&&this._queue.process();)e.madeProgress();this.updating=this._queue.length>0}};Object(u.a)([Object(f.b)()],n.prototype,"updating",void 0),n=Object(u.a)([Object(d.a)("esri.views.support.SchedulerTask")],n);class r{constructor(e){this.now=e,this._begin=0,this._budget=0,this._state=2,this._didWork=!1,this._enabled=!0}run(e){return!this.done&&(!0===e()&&(this._didWork=!0),!0)}get done(){return this._didWork&&this.elapsed>=this._budget&&this._enabled}get budget(){return this._budget}madeProgress(){this._didWork=!0}get state(){return this._state}get enabled(){return this._enabled}set enabled(e){this._enabled=e}reset(e,t){this._begin=this.now(),this._budget=e,this._state=t,this._didWork=!1}get remaining(){return Math.max(this._budget-this.elapsed,0)}get elapsed(){return this.now()-this._begin}resetProgress(){this._didWork=!1}get hasProgressed(){return this._didWork}}e.Budget=r}(T||(T={})),function(e){e.SCHEDULED="s",e.READY="r",e.WAITING="w",e.IDLE="i"}(S||(S={}));const k=(()=>{const e=new T.Budget(()=>performance.now());return e.enabled=!1,e})();const I=new class{remove(){}processQueue(){}schedule(e){return Object(c.v)(e())}reschedule(e){return Object(c.v)(e())}},P=Number.MAX_SAFE_INTEGER,R=new Map,C=new Array,N={geometryEngineWorker:()=>Promise.all([n.e(6),n.e(71)]).then(n.bind(null,543)),CSVSourceWorker:()=>Promise.all([n.e(4),n.e(5),n.e(7),n.e(58)]).then(n.bind(null,642)),EdgeProcessingWorker:()=>Promise.all([n.e(21),n.e(65)]).then(n.bind(null,634)),ElevationSamplerWorker:()=>n.e(72).then(n.bind(null,544)),GeoJSONSourceWorker:()=>Promise.all([n.e(4),n.e(5),n.e(7),n.e(16),n.e(149)]).then(n.bind(null,545)),LercWorker:()=>n.e(145).then(n.bind(null,546)),MemorySourceWorker:()=>Promise.all([n.e(4),n.e(5),n.e(7),n.e(16),n.e(148)]).then(n.bind(null,547)),PBFDecoderWorker:()=>Promise.all([n.e(4),n.e(32)]).then(n.bind(null,638)),Pipeline:()=>Promise.all([n.e(4),n.e(5),n.e(7),n.e(9),n.e(27)]).then(n.bind(null,630)),PointCloudWorker:()=>Promise.all([n.e(4),n.e(5),n.e(43)]).then(n.bind(null,637)),RasterWorker:()=>Promise.all([n.e(4),n.e(10),n.e(59)]).then(n.bind(null,548)),SceneLayerWorker:()=>n.e(70).then(n.bind(null,643)),WorkerTileHandler:()=>Promise.all([n.e(19),n.e(22),n.e(64)]).then(n.bind(null,632)),FeatureServiceSnappingSourceWorker:()=>Promise.all([n.e(4),n.e(5),n.e(7),n.e(9),n.e(35)]).then(n.bind(null,636))};var M=n(10);const{CLOSE:x,ABORT:L,INVOKE:U,RESPONSE:F,OPEN_PORT:$,ON:D}=M.a;class q{constructor(e){this._timer=null,this._cancelledJobIds=new Set,this._invokeMessages=[],this._invoke=e,this._timer=null,this._process=this._process.bind(this)}push(e){e.type===M.a.ABORT?this._cancelledJobIds.add(e.jobId):(this._invokeMessages.push(e),null===this._timer&&(this._timer=setTimeout(this._process,0)))}clear(){this._invokeMessages.length=0,this._cancelledJobIds.clear(),this._timer=null}_process(){this._timer=null;for(const e of this._invokeMessages)this._cancelledJobIds.has(e.jobId)||this._invoke(e);this._cancelledJobIds.clear(),this._invokeMessages.length=0}}class B{constructor(e,t){this._port=e,this._outJobs=new Map,this._inJobs=new Map,this._invokeQueue=new q(e=>this._onInvokeMessage(e)),this._messageQueue=new Array,this._client=t.client,this._onMessage=this._onMessage.bind(this),this._channel=t.channel,Object(s.h)(t.scheduler)&&(this._frameTask=t.scheduler.registerTask(O.REMOTE_CLIENT,e=>this._update(e),()=>this._messageQueue.length>0)),this._port.addEventListener("message",this._onMessage),this._port.start()}static connect(e){const t=new MessageChannel;let n;n="function"==typeof e?new e:"default"in e&&"function"==typeof e.default?new e.default:e;const r=new B(t.port1,{channel:t,client:n});return"object"==typeof n&&"remoteClient"in n&&(n.remoteClient=r),B.clients.set(r,n),t.port2}static loadWorker(e){const t=N[e];return t?t():Promise.resolve(null)}close(){this._post({type:x}),this._close()}isBusy(){return this._outJobs.size>0}invoke(e,t,n){const r=n&&n.signal,s=n&&n.transferList;if(!this._port)return Promise.reject(new o.a("worker:port-closed",`Cannot call invoke('${e}'), port is closed`,{methodName:e,data:t}));const i=Object(M.b)();return new Promise((n,o)=>{const a=Object(c.p)(r,()=>{var e;const t=this._outJobs.get(i);t&&(this._outJobs.delete(i),null==(e=t.abortHandle)||e.remove(),this._post({type:L,jobId:i}),o(Object(c.e)()))}),u={resolve:n,reject:o,abortHandle:a,debugInfo:e};this._outJobs.set(i,u),this._post({type:U,jobId:i,methodName:e,abortable:null!=r},t,s)})}on(e,t){const n=new MessageChannel;function r(e){t(e.data)}return this._port.postMessage({type:M.a.ON,eventType:e,port:n.port2},[n.port2]),n.port1.addEventListener("message",r),n.port1.start(),{remove(){n.port1.postMessage({type:M.a.CLOSE}),n.port1.close(),n.port1.removeEventListener("message",r)}}}openPort(){const e=new MessageChannel;return this._post({type:$,port:e.port2}),e.port1}_close(){this._channel&&(this._channel=null),this._port.removeEventListener("message",this._onMessage),this._port.close(),this._outJobs.forEach(e=>{var t;null==(t=e.abortHandle)||t.remove(),e.reject(Object(c.e)(`Worker closing, aborting job calling '${e.debugInfo}'`))}),this._inJobs.clear(),this._outJobs.clear(),this._invokeQueue.clear(),this._port=this._client=null,this._frameTask=Object(s.m)(this._frameTask)}_onMessage(e){Object(s.h)(this._frameTask)?this._messageQueue.push(e):this._processMessage(e)}_processMessage(e){const t=Object(M.d)(e);if(t)switch(t.type){case F:this._onResponseMessage(t);break;case U:this._invokeQueue.push(t);break;case L:this._onAbortMessage(t);break;case x:this._onCloseMessage();break;case $:this._onOpenPortMessage(t);break;case D:this._onOnMessage(t)}}_onAbortMessage(e){const t=this._inJobs,n=e.jobId,r=t.get(n);this._invokeQueue.push(e),r&&(r.controller&&r.controller.abort(),t.delete(n))}_onCloseMessage(){const e=this._client;this._close(),e&&"destroy"in e&&B.clients.get(this)===e&&e.destroy(),B.clients.delete(this),e&&e.remoteClient&&(e.remoteClient=null)}_onInvokeMessage(e){const{methodName:t,jobId:n,data:r,abortable:s}=e,o=s?Object(c.d)():null,i=this._inJobs;let a,u=this._client,l=u[t];try{if(!l&&t&&-1!==t.indexOf(".")){const e=t.split(".");for(let t=0;t<e.length-1;t++)u=u[e[t]],l=u[e[t+1]]}if("function"!=typeof l)throw new TypeError(t+" is not a function");a=l.call(u,r,{client:this,signal:o?o.signal:null})}catch(e){return void this._post({type:F,jobId:n,error:Object(M.e)(e)})}Object(c.n)(a)?(i.set(n,{controller:o,promise:a}),a.then(e=>{i.has(n)&&(i.delete(n),this._post({type:F,jobId:n},e))},e=>{i.has(n)&&(i.delete(n),Object(c.l)(e)||this._post({type:F,jobId:n,error:Object(M.e)(e||{message:"Error encountered at method "+t})}))})):this._post({type:F,jobId:n},a)}_onOpenPortMessage(e){new B(e.port,{client:this._client})}_onOnMessage(e){const{port:t}=e,n=this._client.on(e.eventType,e=>{t.postMessage(e)}),r=Object(i.b)(e.port,"message",e=>{Object(M.d)(e).type===M.a.CLOSE&&(r.remove(),n.remove(),t.close())})}_onResponseMessage(e){var t;const{jobId:n,error:r,data:s}=e,i=this._outJobs;if(!i.has(n))return;const c=i.get(n);i.delete(n),null==(t=c.abortHandle)||t.remove(),r?c.reject(o.a.fromJSON(JSON.parse(r))):c.resolve(s)}_update(e){for(;!e.done&&this._messageQueue.length>0;)this._processMessage(this._messageQueue.shift()),e.madeProgress()}_post(e,t,n){return Object(M.c)(this._port,e,t,n)}}B.kernelInfo={revision:r.b,version:a.d,buildDate:r.a},B.clients=new Map;t.default=B},function(e,t){var n;n=function(){return this}();try{n=n||new Function("return this")()}catch(e){"object"==typeof window&&(n=window)}e.exports=n},function(e,t,n){n(53),e.exports=n(50)},function(e,t,n){n.p=self.esriConfig.assetsPath+"/esri/core/workers/"}]);