/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.21/esri/copyright.txt for details.
*/
define(["../chunks/_rollupPluginBabelHelpers","../chunks/tslib.es6","../Viewpoint","../core/deprecate","../core/Error","../core/Identifiable","../core/JSONSupport","../core/lang","../core/Logger","../core/maybe","../core/accessorSupport/decorators/property","../core/accessorSupport/decorators/cast","../core/has","../core/accessorSupport/decorators/reader","../core/accessorSupport/decorators/subclass","../core/accessorSupport/decorators/writer","../core/accessorSupport/ensureType","../geometry/Extent","../webdoc/support/Thumbnail"],(function(e,t,o,r,n,i,s,p,a,c,u,l,w,y,d,m,h,_,b){"use strict";var v;const g="esri.webmap.Bookmark",f=a.getLogger(g);let S=v=function(t){function i(e){var o;return(o=t.call(this,e)||this).name=null,o.thumbnail=new b,o}e._inheritsLoose(i,t);var s=i.prototype;return s.castThumbnail=function(e){return"string"==typeof e?new b({url:e}):h.ensureType(b,e)},s.readViewpoint=function(e,t){const{extent:r,viewpoint:n}=t;return o.fromJSON(n||{targetGeometry:r})},s.writeViewpoint=function(e,t,o,r){if(!e)return;const{targetGeometry:i}=e;if(c.isSome(i)&&"extent"!==i.type){const e="Bookmark.viewpoint cannot be written to JSON when the viewpoint's targetGeometry is not an extent.";null!=r&&r.messages?r.messages.push(new n("property:unsupported",e)):f.error(e)}else t[o]=e.toJSON()},s.clone=function(){return new v(p.clone({name:this.name,thumbnail:this.thumbnail,viewpoint:this.viewpoint}))},e._createClass(i,[{key:"extent",set:function(e){r.deprecatedProperty(f,"extent",{replacement:"viewpoint",version:"4.17"}),this._set("viewpoint",new o({targetGeometry:e.clone()})),this._set("extent",e)}},{key:"viewpoint",set:function(e){const{targetGeometry:t,scale:o}=e;c.isSome(t)&&("extent"===t.type?this._set("extent",t.clone()):"point"===t.type&&c.isNone(o)&&f.warn("Bookmark.viewpoint should include 'scale' when its targetGeometry is a point.",e)),this._set("viewpoint",e)}}]),i}(i.IdentifiableMixin(s.JSONSupport));return t.__decorate([u.property({type:_,nonNullable:!0,json:{read:!1,write:{isRequired:!0}}})],S.prototype,"extent",null),t.__decorate([u.property({type:String,nonNullable:!0,json:{write:{isRequired:!0}}})],S.prototype,"name",void 0),t.__decorate([u.property({type:b,json:{write:{overridePolicy:e=>({enabled:!(!e||!e.url)})}}})],S.prototype,"thumbnail",void 0),t.__decorate([l.cast("thumbnail")],S.prototype,"castThumbnail",null),t.__decorate([u.property({type:o,nonNullable:!0,json:{write:!0}})],S.prototype,"viewpoint",null),t.__decorate([y.reader("viewpoint",["extent","viewpoint"])],S.prototype,"readViewpoint",null),t.__decorate([m.writer("viewpoint")],S.prototype,"writeViewpoint",null),S=v=t.__decorate([d.subclass(g)],S),S}));
