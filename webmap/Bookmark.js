/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.23/esri/copyright.txt for details.
*/
define(["../chunks/_rollupPluginBabelHelpers","../chunks/tslib.es6","../TimeExtent","../Viewpoint","../core/deprecate","../core/Error","../core/Identifiable","../core/JSONSupport","../core/lang","../core/Logger","../core/maybe","../core/accessorSupport/decorators/property","../core/accessorSupport/decorators/cast","../core/accessorSupport/decorators/reader","../core/accessorSupport/decorators/subclass","../core/accessorSupport/decorators/writer","../core/accessorSupport/ensureType","../geometry/Extent","../webdoc/support/SlideThumbnail"],(function(e,t,o,r,n,i,p,s,a,c,l,u,d,m,w,y,h,b,_){"use strict";var v;const S="esri.webmap.Bookmark",g=c.getLogger(S);let x=v=function(t){function o(e){var o;return(o=t.call(this,e)||this).name=null,o.thumbnail=new _.SlideThumbnail,o.timeExtent=null,o}e._inheritsLoose(o,t);var p=o.prototype;return p.castThumbnail=function(e){return"string"==typeof e?new _.SlideThumbnail({url:e}):h.ensureType(_.SlideThumbnail,e)},p.readViewpoint=function(e,t){const{extent:o,viewpoint:n}=t;return r.fromJSON(n||{targetGeometry:o})},p.writeViewpoint=function(e,t,o,r){if(!e)return;const{targetGeometry:n}=e;if(l.isSome(n)&&"extent"!==n.type){const e="Bookmark.viewpoint cannot be written to JSON when the viewpoint's targetGeometry is not an extent.";null!=r&&r.messages?r.messages.push(new i("property:unsupported",e)):g.error(e)}else t[o]=e.toJSON()},p.clone=function(){return new v(a.clone({name:this.name,thumbnail:this.thumbnail,timeExtent:this.timeExtent,viewpoint:this.viewpoint}))},e._createClass(o,[{key:"extent",set:function(e){n.deprecatedProperty(g,"extent",{replacement:"viewpoint",version:"4.17"}),this._set("viewpoint",new r({targetGeometry:e.clone()})),this._set("extent",e)}},{key:"viewpoint",set:function(e){const{targetGeometry:t,scale:o}=e;l.isSome(t)&&("extent"===t.type?this._set("extent",t.clone()):"point"===t.type&&l.isNone(o)&&g.warn("Bookmark.viewpoint should include 'scale' when its targetGeometry is a point.",e)),this._set("viewpoint",e)}}]),o}(p.IdentifiableMixin(s.JSONSupport));t.__decorate([u.property({type:b,nonNullable:!0,json:{read:!1,write:{isRequired:!0}}})],x.prototype,"extent",null),t.__decorate([u.property({type:String,nonNullable:!0,json:{write:{isRequired:!0}}})],x.prototype,"name",void 0),t.__decorate([u.property({type:_.SlideThumbnail,json:{write:{overridePolicy:e=>({enabled:!(!e||!e.url)})}}})],x.prototype,"thumbnail",void 0),t.__decorate([d.cast("thumbnail")],x.prototype,"castThumbnail",null),t.__decorate([u.property({type:o,json:{write:!0}})],x.prototype,"timeExtent",void 0),t.__decorate([u.property({type:r,nonNullable:!0,json:{write:!0}})],x.prototype,"viewpoint",null),t.__decorate([m.reader("viewpoint",["extent","viewpoint"])],x.prototype,"readViewpoint",null),t.__decorate([y.writer("viewpoint")],x.prototype,"writeViewpoint",null),x=v=t.__decorate([w.subclass(S)],x);return x}));
