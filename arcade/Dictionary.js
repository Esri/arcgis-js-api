/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.20/esri/copyright.txt for details.
*/
define(["./ImmutableArray","../chunks/languageUtils","../geometry/Geometry"],(function(t,i,e){"use strict";function s(t,e=!1){let r=null;if(null===t);else if(i.isNumber(t))r=i.toNumber(t);else if(i.isBoolean(t))r=i.toBoolean(t);else if(i.isString(t))r=i.toString(t);else if(i.isDate(t))r=i.toDate(t);else if(i.isArray(t)){r=[];for(const i of t)r.push(s(i,e))}else{if(0===Object.keys(t).length)return null;const i=new n;i.immutable=!1;for(const n of Object.keys(t)){const r=t[n];void 0!==r&&i.setField(n,s(r,e))}i.immutable=e,r=i}return r}let n=function(){function n(t){this.declaredClass="esri.arcade.Dictionary",this.attributes=null,this.plain=!1,this.immutable=!0,this.attributes=t instanceof n?t.attributes:null==t?{}:t}var r=n.prototype;return r.field=function(t){const i=t.toLowerCase(),e=this.attributes[t];if(void 0!==e)return e;for(const s in this.attributes)if(s.toLowerCase()===i)return this.attributes[s];throw new Error("Field not Found : "+t)},r.setField=function(t,i){if(this.immutable)throw new Error("Dictionary is Immutable");const e=t.toLowerCase();if(void 0===this.attributes[t]){for(const t in this.attributes)if(t.toLowerCase()===e)return void(this.attributes[t]=i);this.attributes[t]=i}else this.attributes[t]=i},r.hasField=function(t){const i=t.toLowerCase();if(void 0!==this.attributes[t])return!0;for(const e in this.attributes)if(e.toLowerCase()===i)return!0;return!1},r.keys=function(){let t=[];for(const i in this.attributes)t.push(i);return t=t.sort(),t},r.castToText=function(){let s="";for(const n in this.attributes){""!==s&&(s+=",");const r=this.attributes[n];null==r?s+=JSON.stringify(n)+":null":i.isBoolean(r)||i.isNumber(r)||i.isString(r)?s+=JSON.stringify(n)+":"+JSON.stringify(r):r instanceof e||r instanceof t||r instanceof Array?s+=JSON.stringify(n)+":"+i.toStringExplicit(r):r instanceof Date?s+=JSON.stringify(n)+":"+JSON.stringify(r):null!==r&&"object"==typeof r&&void 0!==r.castToText&&(s+=JSON.stringify(n)+":"+r.castToText())}return"{"+s+"}"},n.convertObjectToArcadeDictionary=function(t,i=!0){const e=new n;e.immutable=!1;for(const n in t){const i=t[n];void 0!==i&&e.setField(n.toString(),s(i))}return e.immutable=i,e},n}();return n}));
