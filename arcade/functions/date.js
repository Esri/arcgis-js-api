// COPYRIGHT Â© 2016 Esri
//
// All rights reserved under the copyright laws of the United States
// and applicable international laws, treaties, and conventions.
//
// This material is licensed for use under the Esri Master License
// Agreement (MLA), and is bound by the terms of that agreement.
// You may redistribute and use this code without modification,
// provided you adhere to the terms of the MLA and include this
// copyright notice.
//
// See use restrictions at http://www.esri.com/legal/pdfs/mla_e204_e300/english
//
// For additional information, contact:
// Environmental Systems Research Institute, Inc.
// Attn: Contracts and Legal Services Department
// 380 New York Street
// Redlands, California, USA 92373
// USA
//
// email: contracts@esri.com
//
// See http://js.arcgis.com/4.0/esri/copyright.txt for details.

define(["require","exports","../../moment","../languageUtils"],function(e,t,n,r){function u(e){return null===e?e:isNaN(e.getTime())?null:e}function o(e,t){e.today=function(e,n){return t(e,n,function(e,t,n){r.pcCheck(n,0,0);var u=new Date;return u.setHours(0,0,0,0),u})},e.now=function(e,n){return t(e,n,function(e,t,n){r.pcCheck(n,0,0);var u=new Date;return u})},e.timestamp=function(e,n){return t(e,n,function(e,t,n){r.pcCheck(n,0,0);var u=new Date;return u=new Date(u.getUTCFullYear(),u.getUTCMonth(),u.getUTCDate(),u.getUTCHours(),u.getUTCMinutes(),u.getUTCSeconds(),u.getUTCMilliseconds())})},e.toutc=function(e,n){return t(e,n,function(e,t,n){r.pcCheck(n,1,1);var u=r.toDate(n[0]);return null===u?null:new Date(u.getUTCFullYear(),u.getUTCMonth(),u.getUTCDate(),u.getUTCHours(),u.getUTCMinutes(),u.getUTCSeconds(),u.getUTCMilliseconds())})},e.tolocal=function(e,u){return t(e,u,function(e,t,u){r.pcCheck(u,1,1);var o=r.toDate(u[0]);return null===o?null:n.utc([o.getFullYear(),o.getMonth(),o.getDate(),o.getHours(),o.getMinutes(),o.getSeconds(),o.getMilliseconds()]).toDate()})},e.day=function(e,n){return t(e,n,function(e,t,n){r.pcCheck(n,1,1);var u=r.toDate(n[0]);return null===u?0/0:u.getDate()})},e.month=function(e,n){return t(e,n,function(e,t,n){r.pcCheck(n,1,1);var u=r.toDate(n[0]);return null===u?0/0:u.getMonth()})},e.year=function(e,n){return t(e,n,function(e,t,n){r.pcCheck(n,1,1);var u=r.toDate(n[0]);return null===u?0/0:u.getFullYear()})},e.hour=function(e,n){return t(e,n,function(e,t,n){r.pcCheck(n,1,1);var u=r.toDate(n[0]);return null===u?0/0:u.getHours()})},e.second=function(e,n){return t(e,n,function(e,t,n){r.pcCheck(n,1,1);var u=r.toDate(n[0]);return null===u?0/0:u.getSeconds()})},e.millisecond=function(e,n){return t(e,n,function(e,t,n){r.pcCheck(n,1,1);var u=r.toDate(n[0]);return null===u?0/0:u.getMilliseconds()})},e.minute=function(e,n){return t(e,n,function(e,t,n){r.pcCheck(n,1,1);var u=r.toDate(n[0]);return null===u?0/0:u.getMinutes()})},e.weekday=function(e,n){return t(e,n,function(e,t,n){r.pcCheck(n,1,1);var u=r.toDate(n[0]);return null===u?0/0:u.getDay()})},e.date=function(e,o){return t(e,o,function(e,t,o){if(r.pcCheck(o,0,7),3===o.length)return u(new Date(r.toNumber(o[0]),r.toNumber(o[1]),r.toNumber(o[2]),0,0,0,0));if(4===o.length)return u(new Date(r.toNumber(o[0]),r.toNumber(o[1]),r.toNumber(o[2]),r.toNumber(o[3]),0,0,0));if(5===o.length)return u(new Date(r.toNumber(o[0]),r.toNumber(o[1]),r.toNumber(o[2]),r.toNumber(o[3]),r.toNumber(o[4]),0,0));if(6===o.length)return u(new Date(r.toNumber(o[0]),r.toNumber(o[1]),r.toNumber(o[2]),r.toNumber(o[3]),r.toNumber(o[4]),r.toNumber(o[5]),0));if(7===o.length)return u(new Date(r.toNumber(o[0]),r.toNumber(o[1]),r.toNumber(o[2]),r.toNumber(o[3]),r.toNumber(o[4]),r.toNumber(o[5]),r.toNumber(o[6])));if(2===o.length){var a=r.toString(o[1]);if(""===a)return null;var c=n(r.toString(o[0]),a,!0);return c.isValid()===!0?c.toDate():null}if(1===o.length){var s=r.toNumber(o[0]);if(isNaN(s)===!1)return u(new Date(s));var i=r.toDate(o[0]);return i}return 0===o.length?new Date:void 0})},e.datediff=function(e,n){return t(e,n,function(e,t,n){r.pcCheck(n,2,3);var u=r.toDateM(n[0]),o=r.toDateM(n[1]);if(null===u||null===o)return 0/0;switch(r.toString(n[2]).toLowerCase()){case"days":case"day":case"d":return u.diff(o,"days",!0);case"months":case"month":return u.diff(o,"months",!0);case"minutes":case"minute":case"m":return"M"===n[2]?u.diff(o,"months",!0):u.diff(o,"minutes",!0);case"seconds":case"second":case"s":return u.diff(o,"seconds",!0);case"milliseconds":case"millisecond":case"ms":return u.diff(o);case"hours":case"hour":case"h":return u.diff(o,"hours",!0);case"years":case"year":case"y":return u.diff(o,"years",!0);default:return u.diff(o)}})},e.dateadd=function(e,n){return t(e,n,function(e,t,n){r.pcCheck(n,2,3);var u=r.toDateM(n[0]);if(null===u)return null;var o="milliseconds";switch(r.toString(n[2]).toLowerCase()){case"days":case"day":case"d":o="days";break;case"months":case"month":o="months";break;case"minutes":case"minute":case"m":o="M"===n[2]?"months":"minutes";break;case"seconds":case"second":case"s":o="seconds";break;case"milliseconds":case"millisecond":case"ms":o="milliseconds";break;case"hours":case"hour":case"h":o="hours";break;case"years":case"year":case"y":o="years"}return u.add(r.toNumber(n[1]),o),u.toDate()})}}t.registerFunctions=o});