// COPYRIGHT Â© 2020 Esri
//
// All rights reserved under the copyright laws of the United States
// and applicable international laws, treaties, and conventions.
//
// This material is licensed for use under the Esri Master License
// Agreement (MLA), and is bound by the terms of that agreement.
// You may redistribute and use this code without modification,
// provided you adhere to the terms of the MLA and include this
// copyright notice.
//
// See use restrictions at http://www.esri.com/legal/pdfs/mla_e204_e300/english
//
// For additional information, contact:
// Environmental Systems Research Institute, Inc.
// Attn: Contracts and Legal Services Department
// 380 New York Street
// Redlands, California, USA 92373
// USA
//
// email: contracts@esri.com
//
// See http://js.arcgis.com/4.17/esri/copyright.txt for details.

define(["require","exports","../languageUtils"],(function(e,t,n){"use strict";function r(e){return null===e?e:isNaN(e.getTime())?null:e}Object.defineProperty(t,"__esModule",{value:!0}),t.registerFunctions=void 0,t.registerFunctions=function(e,t){e.today=function(e,r){return t(e,r,(function(e,t,r){n.pcCheck(r,0,0);var u=new Date;return u.setHours(0,0,0,0),u}))},e.now=function(e,r){return t(e,r,(function(e,t,r){return n.pcCheck(r,0,0),new Date}))},e.timestamp=function(e,r){return t(e,r,(function(e,t,r){n.pcCheck(r,0,0);var u=new Date;return u=new Date(u.getUTCFullYear(),u.getUTCMonth(),u.getUTCDate(),u.getUTCHours(),u.getUTCMinutes(),u.getUTCSeconds(),u.getUTCMilliseconds())}))},e.toutc=function(e,r){return t(e,r,(function(e,t,r){n.pcCheck(r,1,1);var u=n.toDate(r[0]);return null===u?null:new Date(u.getUTCFullYear(),u.getUTCMonth(),u.getUTCDate(),u.getUTCHours(),u.getUTCMinutes(),u.getUTCSeconds(),u.getUTCMilliseconds())}))},e.tolocal=function(e,r){return t(e,r,(function(e,t,r){n.pcCheck(r,1,1);var u=n.toDate(r[0]);return null===u?null:n.MomentLibrary.Moment.utc([u.getFullYear(),u.getMonth(),u.getDate(),u.getHours(),u.getMinutes(),u.getSeconds(),u.getMilliseconds()]).toDate()}))},e.day=function(e,r){return t(e,r,(function(e,t,r){n.pcCheck(r,1,1);var u=n.toDate(r[0]);return null===u?NaN:u.getDate()}))},e.month=function(e,r){return t(e,r,(function(e,t,r){n.pcCheck(r,1,1);var u=n.toDate(r[0]);return null===u?NaN:u.getMonth()}))},e.year=function(e,r){return t(e,r,(function(e,t,r){n.pcCheck(r,1,1);var u=n.toDate(r[0]);return null===u?NaN:u.getFullYear()}))},e.hour=function(e,r){return t(e,r,(function(e,t,r){n.pcCheck(r,1,1);var u=n.toDate(r[0]);return null===u?NaN:u.getHours()}))},e.second=function(e,r){return t(e,r,(function(e,t,r){n.pcCheck(r,1,1);var u=n.toDate(r[0]);return null===u?NaN:u.getSeconds()}))},e.millisecond=function(e,r){return t(e,r,(function(e,t,r){n.pcCheck(r,1,1);var u=n.toDate(r[0]);return null===u?NaN:u.getMilliseconds()}))},e.minute=function(e,r){return t(e,r,(function(e,t,r){n.pcCheck(r,1,1);var u=n.toDate(r[0]);return null===u?NaN:u.getMinutes()}))},e.weekday=function(e,r){return t(e,r,(function(e,t,r){n.pcCheck(r,1,1);var u=n.toDate(r[0]);return null===u?NaN:u.getDay()}))},e.date=function(e,u){return t(e,u,(function(e,t,u){if(n.pcCheck(u,0,7),3===u.length)return r(new Date(n.toNumber(u[0]),n.toNumber(u[1]),n.toNumber(u[2]),0,0,0,0));if(4===u.length)return r(new Date(n.toNumber(u[0]),n.toNumber(u[1]),n.toNumber(u[2]),n.toNumber(u[3]),0,0,0));if(5===u.length)return r(new Date(n.toNumber(u[0]),n.toNumber(u[1]),n.toNumber(u[2]),n.toNumber(u[3]),n.toNumber(u[4]),0,0));if(6===u.length)return r(new Date(n.toNumber(u[0]),n.toNumber(u[1]),n.toNumber(u[2]),n.toNumber(u[3]),n.toNumber(u[4]),n.toNumber(u[5]),0));if(7===u.length)return r(new Date(n.toNumber(u[0]),n.toNumber(u[1]),n.toNumber(u[2]),n.toNumber(u[3]),n.toNumber(u[4]),n.toNumber(u[5]),n.toNumber(u[6])));if(2===u.length){var o=n.toString(u[1]);if(""===o)return null;o=n.standardiseDateFormat(o);var a=n.MomentLibrary.Moment(n.toString(u[0]),o,!0);return!0===a.isValid()?a.toDate():null}if(1===u.length){if(n.isString(u[0])&&""===u[0].replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,""))return null;var c=n.toNumber(u[0]);return!1===isNaN(c)?r(new Date(c)):n.toDate(u[0])}return 0===u.length?new Date:void 0}))},e.datediff=function(e,r){return t(e,r,(function(e,t,r){n.pcCheck(r,2,3);var u=n.toDateM(r[0]),o=n.toDateM(r[1]);if(null===u||null===o)return NaN;switch(n.toString(r[2]).toLowerCase()){case"days":case"day":case"d":return u.diff(o,"days",!0);case"months":case"month":return u.diff(o,"months",!0);case"minutes":case"minute":case"m":return"M"===r[2]?u.diff(o,"months",!0):u.diff(o,"minutes",!0);case"seconds":case"second":case"s":return u.diff(o,"seconds",!0);case"milliseconds":case"millisecond":case"ms":return u.diff(o);case"hours":case"hour":case"h":return u.diff(o,"hours",!0);case"years":case"year":case"y":return u.diff(o,"years",!0);default:return u.diff(o)}}))},e.dateadd=function(e,r){return t(e,r,(function(e,t,r){n.pcCheck(r,2,3);var u=n.toDateM(r[0]);if(null===u)return null;var o="milliseconds";switch(n.toString(r[2]).toLowerCase()){case"days":case"day":case"d":o="days";break;case"months":case"month":o="months";break;case"minutes":case"minute":case"m":o="M"===r[2]?"months":"minutes";break;case"seconds":case"second":case"s":o="seconds";break;case"milliseconds":case"millisecond":case"ms":o="milliseconds";break;case"hours":case"hour":case"h":o="hours";break;case"years":case"year":case"y":o="years"}return u.add(n.toNumber(r[1]),o),u.toDate()}))}}}));