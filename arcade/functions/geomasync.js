/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.26/esri/copyright.txt for details.
*/
define(["exports","../../chunks/_rollupPluginBabelHelpers","../../kernel","../kernel","../../chunks/languageUtils","./centroid","../../geometry/Extent","../../geometry/Geometry","../../geometry/geometryEngineAsync","../../geometry/Multipoint","../../geometry/Point","../../geometry/Polygon","../../geometry/Polyline","../../geometry/support/jsonUtils","../executionError","../Dictionary","../ArcadePortal","../portalUtils","../../core/unitUtils"],(function(e,n,r,t,o,i,a,u,c,s,l,f,d,E,y,m,h,C,p){"use strict";function x(e){return 0===r.version.indexOf("4.")?f.fromExtent(e):new f({spatialReference:e.spatialReference,rings:[[[e.xmin,e.ymin],[e.xmin,e.ymax],[e.xmax,e.ymax],[e.xmax,e.ymin],[e.xmin,e.ymin]]]})}function A(e,n,r){if(o.pcCheck(e,2,2,n,r),e[0]instanceof u&&e[1]instanceof u);else if(e[0]instanceof u&&null===e[1]);else if(e[1]instanceof u&&null===e[0]);else if(null!==e[0]||null!==e[1])throw new y.ArcadeExecutionError(n,y.ExecutionErrorCodes.InvalidParameter,r)}function g(e,n){return w.apply(this,arguments)}function w(){return(w=n._asyncToGenerator((function*(e,n){if("polygon"!==e.type&&"polyline"!==e.type&&"extent"!==e.type)return 0;let r=1;if(e.spatialReference.vcsWkid||e.spatialReference.latestVcsWkid){r=i.getMetersPerVerticalUnitForSR(e.spatialReference)/p.getMetersPerUnitForSR(e.spatialReference)}let t=0;if("polyline"===e.type)for(const o of e.paths)for(let e=1;e<o.length;e++)t+=i.segmentLength3d(o[e],o[e-1],r);else if("polygon"===e.type)for(const o of e.rings){for(let e=1;e<o.length;e++)t+=i.segmentLength3d(o[e],o[e-1],r);(o[0][0]!==o[o.length-1][0]||o[0][1]!==o[o.length-1][1]||void 0!==o[0][2]&&o[0][2]!==o[o.length-1][2])&&(t+=i.segmentLength3d(o[0],o[o.length-1],r))}else"extent"===e.type&&(t+=2*i.segmentLength3d([e.xmin,e.ymin,0],[e.xmax,e.ymin,0],r),t+=2*i.segmentLength3d([e.xmin,e.ymin,0],[e.xmin,e.ymax,0],r),t*=2,t+=4*Math.abs(o.defaultUndefined(e.zmax,0)*r-o.defaultUndefined(e.zmin,0)*r));const a=new d({hasZ:!1,hasM:!1,spatialReference:e.spatialReference,paths:[[0,0],[0,t]]});return c.planarLength(a,n)}))).apply(this,arguments)}function v(e){"async"===e.mode&&(e.functions.disjoint=function(n,r){return e.standardFunctionAsync(n,r,((e,t,i)=>(A(i=o.autoCastFeatureToGeometry(i),n,r),null===i[0]||null===i[1]||c.disjoint(i[0],i[1]))))},e.functions.intersects=function(n,r){return e.standardFunctionAsync(n,r,((e,t,i)=>(A(i=o.autoCastFeatureToGeometry(i),n,r),null!==i[0]&&null!==i[1]&&c.intersects(i[0],i[1]))))},e.functions.touches=function(n,r){return e.standardFunctionAsync(n,r,((e,t,i)=>(A(i=o.autoCastFeatureToGeometry(i),n,r),null!==i[0]&&null!==i[1]&&c.touches(i[0],i[1]))))},e.functions.crosses=function(n,r){return e.standardFunctionAsync(n,r,((e,t,i)=>(A(i=o.autoCastFeatureToGeometry(i),n,r),null!==i[0]&&null!==i[1]&&c.crosses(i[0],i[1]))))},e.functions.within=function(n,r){return e.standardFunctionAsync(n,r,((e,t,i)=>(A(i=o.autoCastFeatureToGeometry(i),n,r),null!==i[0]&&null!==i[1]&&c.within(i[0],i[1]))))},e.functions.contains=function(n,r){return e.standardFunctionAsync(n,r,((e,t,i)=>(A(i=o.autoCastFeatureToGeometry(i),n,r),null!==i[0]&&null!==i[1]&&c.contains(i[0],i[1]))))},e.functions.overlaps=function(n,r){return e.standardFunctionAsync(n,r,((e,t,i)=>(A(i=o.autoCastFeatureToGeometry(i),n,r),null!==i[0]&&null!==i[1]&&c.overlaps(i[0],i[1]))))},e.functions.equals=function(n,r){return e.standardFunctionAsync(n,r,((e,t,i)=>(o.pcCheck(i,2,2,n,r),i[0]===i[1]||(i[0]instanceof u&&i[1]instanceof u?c.equals(i[0],i[1]):!(!o.isDate(i[0])||!o.isDate(i[1]))&&i[0].equals(i[1])))))},e.functions.relate=function(n,r){return e.standardFunctionAsync(n,r,((e,t,i)=>{if(i=o.autoCastFeatureToGeometry(i),o.pcCheck(i,3,3,n,r),i[0]instanceof u&&i[1]instanceof u)return c.relate(i[0],i[1],o.toString(i[2]));if(i[0]instanceof u&&null===i[1])return!1;if(i[1]instanceof u&&null===i[0])return!1;if(null===i[0]&&null===i[1])return!1;throw new y.ArcadeExecutionError(n,y.ExecutionErrorCodes.InvalidParameter,r)}))},e.functions.intersection=function(n,r){return e.standardFunctionAsync(n,r,((e,t,i)=>(A(i=o.autoCastFeatureToGeometry(i),n,r),null===i[0]||null===i[1]?null:c.intersect(i[0],i[1]))))},e.functions.union=function(n,r){return e.standardFunctionAsync(n,r,((e,i,a)=>{const s=[];if(0===(a=o.autoCastFeatureToGeometry(a)).length)throw new y.ArcadeExecutionError(n,y.ExecutionErrorCodes.WrongNumberOfParameters,r);if(1===a.length)if(o.isArray(a[0])){const e=o.autoCastFeatureToGeometry(a[0]);for(let t=0;t<e.length;t++)if(null!==e[t]){if(!(e[t]instanceof u))throw new y.ArcadeExecutionError(n,y.ExecutionErrorCodes.InvalidParameter,r);s.push(e[t])}}else{if(!o.isImmutableArray(a[0])){if(a[0]instanceof u)return o.fixSpatialReference(t.cloneGeometry(a[0]),n.spatialReference);if(null===a[0])return null;throw new y.ArcadeExecutionError(n,y.ExecutionErrorCodes.InvalidParameter,r)}{const e=o.autoCastFeatureToGeometry(a[0].toArray());for(let t=0;t<e.length;t++)if(null!==e[t]){if(!(e[t]instanceof u))throw new y.ArcadeExecutionError(n,y.ExecutionErrorCodes.InvalidParameter,r);s.push(e[t])}}}else for(let t=0;t<a.length;t++)if(null!==a[t]){if(!(a[t]instanceof u))throw new y.ArcadeExecutionError(n,y.ExecutionErrorCodes.InvalidParameter,r);s.push(a[t])}return 0===s.length?null:c.union(s)}))},e.functions.difference=function(n,r){return e.standardFunctionAsync(n,r,((e,i,a)=>(A(a=o.autoCastFeatureToGeometry(a),n,r),null!==a[0]&&null===a[1]?t.cloneGeometry(a[0]):null===a[0]?null:c.difference(a[0],a[1]))))},e.functions.symmetricdifference=function(n,r){return e.standardFunctionAsync(n,r,((e,i,a)=>(A(a=o.autoCastFeatureToGeometry(a),n,r),null===a[0]&&null===a[1]?null:null===a[0]?t.cloneGeometry(a[1]):null===a[1]?t.cloneGeometry(a[0]):c.symmetricDifference(a[0],a[1]))))},e.functions.clip=function(n,r){return e.standardFunctionAsync(n,r,((e,t,i)=>{if(i=o.autoCastFeatureToGeometry(i),o.pcCheck(i,2,2,n,r),!(i[1]instanceof a)&&null!==i[1])throw new y.ArcadeExecutionError(n,y.ExecutionErrorCodes.InvalidParameter,r);if(null===i[0])return null;if(!(i[0]instanceof u))throw new y.ArcadeExecutionError(n,y.ExecutionErrorCodes.InvalidParameter,r);return null===i[1]?null:c.clip(i[0],i[1])}))},e.functions.cut=function(n,r){return e.standardFunctionAsync(n,r,((e,i,a)=>{if(a=o.autoCastFeatureToGeometry(a),o.pcCheck(a,2,2,n,r),!(a[1]instanceof d)&&null!==a[1])throw new y.ArcadeExecutionError(n,y.ExecutionErrorCodes.InvalidParameter,r);if(null===a[0])return[];if(!(a[0]instanceof u))throw new y.ArcadeExecutionError(n,y.ExecutionErrorCodes.InvalidParameter,r);return null===a[1]?[t.cloneGeometry(a[0])]:c.cut(a[0],a[1])}))},e.functions.area=function(r,i){return e.standardFunctionAsync(r,i,function(){var e=n._asyncToGenerator((function*(e,n,a){if(o.pcCheck(a,1,2,r,i),null===(a=o.autoCastFeatureToGeometry(a))[0])return 0;if(o.isFeatureSet(a[0])){const e=yield a[0].sumArea(t.convertSquareUnitsToCode(o.defaultUndefined(a[1],-1)),!1,r.abortSignal);if(r.abortSignal.aborted)throw new y.ArcadeExecutionError(r,y.ExecutionErrorCodes.Cancelled,i);return e}if(o.isArray(a[0])||o.isImmutableArray(a[0])){const e=o.autoCastArrayOfPointsToPolygon(a[0],r.spatialReference);return null===e?0:c.planarArea(e,t.convertSquareUnitsToCode(o.defaultUndefined(a[1],-1)))}if(!(a[0]instanceof u))throw new y.ArcadeExecutionError(r,y.ExecutionErrorCodes.InvalidParameter,i);return c.planarArea(a[0],t.convertSquareUnitsToCode(o.defaultUndefined(a[1],-1)))}));return function(n,r,t){return e.apply(this,arguments)}}())},e.functions.areageodetic=function(r,i){return e.standardFunctionAsync(r,i,function(){var e=n._asyncToGenerator((function*(e,n,a){if(o.pcCheck(a,1,2,r,i),null===(a=o.autoCastFeatureToGeometry(a))[0])return 0;if(o.isFeatureSet(a[0])){const e=yield a[0].sumArea(t.convertSquareUnitsToCode(o.defaultUndefined(a[1],-1)),!0,r.abortSignal);if(r.abortSignal.aborted)throw new y.ArcadeExecutionError(r,y.ExecutionErrorCodes.Cancelled,i);return e}if(o.isArray(a[0])||o.isImmutableArray(a[0])){const e=o.autoCastArrayOfPointsToPolygon(a[0],r.spatialReference);return null===e?0:c.geodesicArea(e,t.convertSquareUnitsToCode(o.defaultUndefined(a[1],-1)))}if(!(a[0]instanceof u))throw new y.ArcadeExecutionError(r,y.ExecutionErrorCodes.InvalidParameter,i);return c.geodesicArea(a[0],t.convertSquareUnitsToCode(o.defaultUndefined(a[1],-1)))}));return function(n,r,t){return e.apply(this,arguments)}}())},e.functions.length=function(r,i){return e.standardFunctionAsync(r,i,function(){var e=n._asyncToGenerator((function*(e,n,a){if(o.pcCheck(a,1,2,r,i),null===(a=o.autoCastFeatureToGeometry(a))[0])return 0;if(o.isFeatureSet(a[0])){const e=yield a[0].sumLength(t.convertLinearUnitsToCode(o.defaultUndefined(a[1],-1)),!1,r.abortSignal);if(r.abortSignal.aborted)throw new y.ArcadeExecutionError(r,y.ExecutionErrorCodes.Cancelled,i);return e}if(o.isArray(a[0])||o.isImmutableArray(a[0])){const e=o.autoCastArrayOfPointsToPolyline(a[0],r.spatialReference);return null===e?0:c.planarLength(e,t.convertLinearUnitsToCode(o.defaultUndefined(a[1],-1)))}if(!(a[0]instanceof u))throw new y.ArcadeExecutionError(r,y.ExecutionErrorCodes.InvalidParameter,i);return c.planarLength(a[0],t.convertLinearUnitsToCode(o.defaultUndefined(a[1],-1)))}));return function(n,r,t){return e.apply(this,arguments)}}())},e.functions.length3d=function(n,r){return e.standardFunctionAsync(n,r,((e,i,a)=>{if(o.pcCheck(a,1,2,n,r),null===(a=o.autoCastFeatureToGeometry(a))[0])return 0;if(o.isArray(a[0])||o.isImmutableArray(a[0])){const e=o.autoCastArrayOfPointsToPolyline(a[0],n.spatialReference);return null===e?0:!0===e.hasZ?g(e,t.convertLinearUnitsToCode(o.defaultUndefined(a[1],-1))):c.planarLength(e,t.convertLinearUnitsToCode(o.defaultUndefined(a[1],-1)))}if(!(a[0]instanceof u))throw new y.ArcadeExecutionError(n,y.ExecutionErrorCodes.InvalidParameter,r);return!0===a[0].hasZ?g(a[0],t.convertLinearUnitsToCode(o.defaultUndefined(a[1],-1))):c.planarLength(a[0],t.convertLinearUnitsToCode(o.defaultUndefined(a[1],-1)))}))},e.functions.lengthgeodetic=function(r,i){return e.standardFunctionAsync(r,i,function(){var e=n._asyncToGenerator((function*(e,n,a){if(o.pcCheck(a,1,2,r,i),null===(a=o.autoCastFeatureToGeometry(a))[0])return 0;if(o.isFeatureSet(a[0])){const e=yield a[0].sumLength(t.convertLinearUnitsToCode(o.defaultUndefined(a[1],-1)),!0,r.abortSignal);if(r.abortSignal.aborted)throw new y.ArcadeExecutionError(r,y.ExecutionErrorCodes.Cancelled,i);return e}if(o.isArray(a[0])||o.isImmutableArray(a[0])){const e=o.autoCastArrayOfPointsToPolyline(a[0],r.spatialReference);return null===e?0:c.geodesicLength(e,t.convertLinearUnitsToCode(o.defaultUndefined(a[1],-1)))}if(!(a[0]instanceof u))throw new y.ArcadeExecutionError(r,y.ExecutionErrorCodes.InvalidParameter,i);return c.geodesicLength(a[0],t.convertLinearUnitsToCode(o.defaultUndefined(a[1],-1)))}));return function(n,r,t){return e.apply(this,arguments)}}())},e.functions.distance=function(n,r){return e.standardFunctionAsync(n,r,((e,i,a)=>{a=o.autoCastFeatureToGeometry(a),o.pcCheck(a,2,3,n,r);let s=a[0];(o.isArray(a[0])||o.isImmutableArray(a[0]))&&(s=o.autoCastArrayOfPointsToMultiPoint(a[0],n.spatialReference));let l=a[1];if((o.isArray(a[1])||o.isImmutableArray(a[1]))&&(l=o.autoCastArrayOfPointsToMultiPoint(a[1],n.spatialReference)),!(s instanceof u))throw new y.ArcadeExecutionError(n,y.ExecutionErrorCodes.InvalidParameter,r);if(!(l instanceof u))throw new y.ArcadeExecutionError(n,y.ExecutionErrorCodes.InvalidParameter,r);return c.distance(s,l,t.convertLinearUnitsToCode(o.defaultUndefined(a[2],-1)))}))},e.functions.distancegeodetic=function(n,r){return e.standardFunctionAsync(n,r,((e,i,a)=>{a=o.autoCastFeatureToGeometry(a),o.pcCheck(a,2,3,n,r);const u=a[0],s=a[1];if(!(u instanceof l))throw new y.ArcadeExecutionError(n,y.ExecutionErrorCodes.InvalidParameter,r);if(!(s instanceof l))throw new y.ArcadeExecutionError(n,y.ExecutionErrorCodes.InvalidParameter,r);const f=new d({paths:[],spatialReference:u.spatialReference});return f.addPath([u,s]),c.geodesicLength(f,t.convertLinearUnitsToCode(o.defaultUndefined(a[2],-1)))}))},e.functions.densify=function(n,r){return e.standardFunctionAsync(n,r,((e,i,s)=>{if(s=o.autoCastFeatureToGeometry(s),o.pcCheck(s,2,3,n,r),null===s[0])return null;if(!(s[0]instanceof u))throw new y.ArcadeExecutionError(n,y.ExecutionErrorCodes.InvalidParameter,r);const l=o.toNumber(s[1]);if(isNaN(l))throw new y.ArcadeExecutionError(n,y.ExecutionErrorCodes.InvalidParameter,r);if(l<=0)throw new y.ArcadeExecutionError(n,y.ExecutionErrorCodes.InvalidParameter,r);return s[0]instanceof f||s[0]instanceof d?c.densify(s[0],l,t.convertLinearUnitsToCode(o.defaultUndefined(s[2],-1))):s[0]instanceof a?c.densify(x(s[0]),l,t.convertLinearUnitsToCode(o.defaultUndefined(s[2],-1))):s[0]}))},e.functions.densifygeodetic=function(n,r){return e.standardFunctionAsync(n,r,((e,i,s)=>{if(s=o.autoCastFeatureToGeometry(s),o.pcCheck(s,2,3,n,r),null===s[0])return null;if(!(s[0]instanceof u))throw new y.ArcadeExecutionError(n,y.ExecutionErrorCodes.InvalidParameter,r);const l=o.toNumber(s[1]);if(isNaN(l))throw new y.ArcadeExecutionError(n,y.ExecutionErrorCodes.InvalidParameter,r);if(l<=0)throw new y.ArcadeExecutionError(n,y.ExecutionErrorCodes.InvalidParameter,r);return s[0]instanceof f||s[0]instanceof d?c.geodesicDensify(s[0],l,t.convertLinearUnitsToCode(o.defaultUndefined(s[2],-1))):s[0]instanceof a?c.geodesicDensify(x(s[0]),l,t.convertLinearUnitsToCode(o.defaultUndefined(s[2],-1))):s[0]}))},e.functions.generalize=function(n,r){return e.standardFunctionAsync(n,r,((e,i,a)=>{if(a=o.autoCastFeatureToGeometry(a),o.pcCheck(a,2,4,n,r),null===a[0])return null;if(!(a[0]instanceof u))throw new y.ArcadeExecutionError(n,y.ExecutionErrorCodes.InvalidParameter,r);const s=o.toNumber(a[1]);if(isNaN(s))throw new y.ArcadeExecutionError(n,y.ExecutionErrorCodes.InvalidParameter,r);return c.generalize(a[0],s,o.toBoolean(o.defaultUndefined(a[2],!0)),t.convertLinearUnitsToCode(o.defaultUndefined(a[3],-1)))}))},e.functions.buffer=function(n,r){return e.standardFunctionAsync(n,r,((e,i,a)=>{if(a=o.autoCastFeatureToGeometry(a),o.pcCheck(a,2,3,n,r),null===a[0])return null;if(!(a[0]instanceof u))throw new y.ArcadeExecutionError(n,y.ExecutionErrorCodes.InvalidParameter,r);const s=o.toNumber(a[1]);if(isNaN(s))throw new y.ArcadeExecutionError(n,y.ExecutionErrorCodes.InvalidParameter,r);return 0===s?t.cloneGeometry(a[0]):c.buffer(a[0],s,t.convertLinearUnitsToCode(o.defaultUndefined(a[2],-1)))}))},e.functions.buffergeodetic=function(n,r){return e.standardFunctionAsync(n,r,((e,i,a)=>{if(a=o.autoCastFeatureToGeometry(a),o.pcCheck(a,2,3,n,r),null===a[0])return null;if(!(a[0]instanceof u))throw new y.ArcadeExecutionError(n,y.ExecutionErrorCodes.InvalidParameter,r);const s=o.toNumber(a[1]);if(isNaN(s))throw new y.ArcadeExecutionError(n,y.ExecutionErrorCodes.InvalidParameter,r);return 0===s?t.cloneGeometry(a[0]):c.geodesicBuffer(a[0],s,t.convertLinearUnitsToCode(o.defaultUndefined(a[2],-1)))}))},e.functions.offset=function(n,r){return e.standardFunctionAsync(n,r,((e,i,a)=>{if(a=o.autoCastFeatureToGeometry(a),o.pcCheck(a,2,6,n,r),null===a[0])return null;if(!(a[0]instanceof f||a[0]instanceof d))throw new y.ArcadeExecutionError(n,y.ExecutionErrorCodes.InvalidParameter,r);const u=o.toNumber(a[1]);if(isNaN(u))throw new y.ArcadeExecutionError(n,y.ExecutionErrorCodes.InvalidParameter,r);const s=o.toNumber(o.defaultUndefined(a[4],10));if(isNaN(s))throw new y.ArcadeExecutionError(n,y.ExecutionErrorCodes.InvalidParameter,r);const l=o.toNumber(o.defaultUndefined(a[5],0));if(isNaN(l))throw new y.ArcadeExecutionError(n,y.ExecutionErrorCodes.InvalidParameter,r);return c.offset(a[0],u,t.convertLinearUnitsToCode(o.defaultUndefined(a[2],-1)),o.toString(o.defaultUndefined(a[3],"round")).toLowerCase(),s,l)}))},e.functions.rotate=function(n,r){return e.standardFunctionAsync(n,r,((e,t,i)=>{i=o.autoCastFeatureToGeometry(i),o.pcCheck(i,2,3,n,r);let s=i[0];if(null===s)return null;if(!(s instanceof u))throw new y.ArcadeExecutionError(n,y.ExecutionErrorCodes.InvalidParameter,r);s instanceof a&&(s=f.fromExtent(s));const d=o.toNumber(i[1]);if(isNaN(d))throw new y.ArcadeExecutionError(n,y.ExecutionErrorCodes.InvalidParameter,r);const E=o.defaultUndefined(i[2],null);if(null===E)return c.rotate(s,d);if(E instanceof l)return c.rotate(s,d,E);throw new y.ArcadeExecutionError(n,y.ExecutionErrorCodes.InvalidParameter,r)}))},e.functions.centroid=function(n,r){return e.standardFunctionAsync(n,r,((e,c,E)=>{if(E=o.autoCastFeatureToGeometry(E),o.pcCheck(E,1,1,n,r),null===E[0])return null;let m=E[0];if((o.isArray(E[0])||o.isImmutableArray(E[0]))&&(m=o.autoCastArrayOfPointsToMultiPoint(E[0],n.spatialReference)),null===m)return null;if(!(m instanceof u))throw new y.ArcadeExecutionError(n,y.ExecutionErrorCodes.InvalidParameter,r);return m instanceof l?o.fixSpatialReference(t.cloneGeometry(E[0]),n.spatialReference):m instanceof f?m.centroid:m instanceof d?i.centroidPolyline(m):m instanceof s?i.centroidMultiPoint(m):m instanceof a?m.center:null}))},e.functions.multiparttosinglepart=function(r,i){return e.standardFunctionAsync(r,i,function(){var e=n._asyncToGenerator((function*(e,n,m){m=o.autoCastFeatureToGeometry(m),o.pcCheck(m,1,1,r,i);const h=[];if(null===m[0])return null;if(!(m[0]instanceof u))throw new y.ArcadeExecutionError(r,y.ExecutionErrorCodes.InvalidParameter,i);if(m[0]instanceof l)return[o.fixSpatialReference(t.cloneGeometry(m[0]),r.spatialReference)];if(m[0]instanceof a)return[o.fixSpatialReference(t.cloneGeometry(m[0]),r.spatialReference)];const C=yield c.simplify(m[0]);if(C instanceof f){const e=[],n=[];for(let r=0;r<C.rings.length;r++)if(C.isClockwise(C.rings[r])){const n=E.fromJSON({rings:[C.rings[r]],hasZ:!0===C.hasZ,hazM:!0===C.hasM,spatialReference:C.spatialReference.toJSON()});e.push(n)}else n.push({ring:C.rings[r],pt:C.getPoint(r,0)});for(let r=0;r<n.length;r++)for(let t=0;t<e.length;t++)if(e[t].contains(n[r].pt)){e[t].addRing(n[r].ring);break}return e}if(C instanceof d){const e=[];for(let n=0;n<C.paths.length;n++){const r=E.fromJSON({paths:[C.paths[n]],hasZ:!0===C.hasZ,hazM:!0===C.hasM,spatialReference:C.spatialReference.toJSON()});e.push(r)}return e}if(m[0]instanceof s){const e=o.fixSpatialReference(t.cloneGeometry(m[0]),r.spatialReference);for(let n=0;n<e.points.length;n++)h.push(e.getPoint(n));return h}return null}));return function(n,r,t){return e.apply(this,arguments)}}())},e.functions.issimple=function(n,r){return e.standardFunctionAsync(n,r,((e,t,i)=>{if(i=o.autoCastFeatureToGeometry(i),o.pcCheck(i,1,1,n,r),null===i[0])return!0;if(!(i[0]instanceof u))throw new y.ArcadeExecutionError(n,y.ExecutionErrorCodes.InvalidParameter,r);return c.isSimple(i[0])}))},e.functions.simplify=function(n,r){return e.standardFunctionAsync(n,r,((e,t,i)=>{if(i=o.autoCastFeatureToGeometry(i),o.pcCheck(i,1,1,n,r),null===i[0])return null;if(!(i[0]instanceof u))throw new y.ArcadeExecutionError(n,y.ExecutionErrorCodes.InvalidParameter,r);return c.simplify(i[0])}))},e.functions.convexhull=function(n,r){return e.standardFunctionAsync(n,r,((e,t,i)=>{if(i=o.autoCastFeatureToGeometry(i),o.pcCheck(i,1,1,n,r),null===i[0])return null;if(!(i[0]instanceof u))throw new y.ArcadeExecutionError(n,y.ExecutionErrorCodes.InvalidParameter,r);return c.convexHull(i[0])}))},e.functions.getuser=function(r,t){return e.standardFunctionAsync(r,t,function(){var e=n._asyncToGenerator((function*(e,n,i){o.pcCheck(i,0,2,r,t);let a=o.defaultUndefined(i[1],""),u=!0===a;if(a=!0===a||!1===a?"":o.toString(a),0===i.length||i[0]instanceof h){let e=null;r.services&&r.services.portal&&(e=r.services.portal),i.length>0&&(e=C.getPortal(i[0],e));const n=yield C.lookupUser(e,a,u);if(n){const e=JSON.parse(JSON.stringify(n));for(const n of["lastLogin","created","modified"])void 0!==e[n]&&null!==e[n]&&(e[n]=new Date(e[n]));return m.convertObjectToArcadeDictionary(e,o.defaultTimeZone(r))}return null}let c=null;if(o.isFeatureSet(i[0])&&(c=i[0]),c){if(u=!1,a)return null;yield c.load();const e=yield c.getOwningSystemUrl();if(!e){if(!a){const e=yield c.getIdentityUser();return e?m.convertObjectToArcadeDictionary({username:e},o.defaultTimeZone(r)):null}return null}let n=null;r.services&&r.services.portal&&(n=r.services.portal),n=C.getPortal(new h(e),n);const t=yield C.lookupUser(n,a,u);if(t){const e=JSON.parse(JSON.stringify(t));for(const n of["lastLogin","created","modified"])void 0!==e[n]&&null!==e[n]&&(e[n]=new Date(e[n]));return m.convertObjectToArcadeDictionary(e,o.defaultTimeZone(r))}return null}throw new y.ArcadeExecutionError(r,y.ExecutionErrorCodes.InvalidParameter,t)}));return function(n,r,t){return e.apply(this,arguments)}}())})}e.registerFunctions=v,Object.defineProperty(e,Symbol.toStringTag,{value:"Module"})}));
