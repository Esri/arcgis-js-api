/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.25/esri/copyright.txt for details.
*/
define(["exports","../../chunks/_rollupPluginBabelHelpers","../executionError","../kernel","../../chunks/languageUtils","../featureset/actions/SpatialFilter","../featureset/sources/Empty","../../geometry/Geometry","../../geometry/geometryEngineAsync"],(function(e,t,n,r,i,a,s,o,u){"use strict";function c(e){return e instanceof o}function l(e,l,f,p){return p(e,l,function(){var p=t._asyncToGenerator((function*(t,p,d){if(d.length<2)throw new n.ArcadeExecutionError(e,n.ExecutionErrorCodes.WrongNumberOfParameters,l);if(null===(d=i.autoCastFeatureToGeometry(d))[0]&&null===d[1])return!1;if(i.isFeatureSet(d[0])){if(d[1]instanceof o)return new a({parentfeatureset:d[0],relation:f,relationGeom:d[1]});if(null===d[1])return new s({parentfeatureset:d[0]});throw new n.ArcadeExecutionError(e,n.ExecutionErrorCodes.InvalidParameter,l)}if(c(d[0])){if(c(d[1])){switch(f){case"esriSpatialRelEnvelopeIntersects":return u.intersects(r.shapeExtent(d[0]),r.shapeExtent(d[1]));case"esriSpatialRelIntersects":return u.intersects(d[0],d[1]);case"esriSpatialRelContains":return u.contains(d[0],d[1]);case"esriSpatialRelOverlaps":return u.overlaps(d[0],d[1]);case"esriSpatialRelWithin":return u.within(d[0],d[1]);case"esriSpatialRelTouches":return u.touches(d[0],d[1]);case"esriSpatialRelCrosses":return u.crosses(d[0],d[1])}throw new n.ArcadeExecutionError(e,n.ExecutionErrorCodes.InvalidParameter,l)}if(i.isFeatureSet(d[1]))return new a({parentfeatureset:d[1],relation:f,relationGeom:d[0]});if(null===d[1])return!1;throw new n.ArcadeExecutionError(e,n.ExecutionErrorCodes.InvalidParameter,l)}if(null!==d[0])throw new n.ArcadeExecutionError(e,n.ExecutionErrorCodes.InvalidParameter,l);return i.isFeatureSet(d[1])?new s({parentfeatureset:d[1]}):!(d[1]instanceof o||null===d[1])&&void 0}));return function(e,t,n){return p.apply(this,arguments)}}())}function f(e){"async"===e.mode&&(e.functions.intersects=function(t,n){return l(t,n,"esriSpatialRelIntersects",e.standardFunctionAsync)},e.functions.envelopeintersects=function(t,n){return l(t,n,"esriSpatialRelEnvelopeIntersects",e.standardFunctionAsync)},e.signatures.push({name:"envelopeintersects",min:2,max:2}),e.functions.contains=function(t,n){return l(t,n,"esriSpatialRelContains",e.standardFunctionAsync)},e.functions.overlaps=function(t,n){return l(t,n,"esriSpatialRelOverlaps",e.standardFunctionAsync)},e.functions.within=function(t,n){return l(t,n,"esriSpatialRelWithin",e.standardFunctionAsync)},e.functions.touches=function(t,n){return l(t,n,"esriSpatialRelTouches",e.standardFunctionAsync)},e.functions.crosses=function(t,n){return l(t,n,"esriSpatialRelCrosses",e.standardFunctionAsync)},e.functions.relate=function(t,r){return e.standardFunctionAsync(t,r,((e,a,l)=>{if(l=i.autoCastFeatureToGeometry(l),i.pcCheck(l,3,3,t,r),c(l[0])&&c(l[1]))return u.relate(l[0],l[1],i.toString(l[2]));if(l[0]instanceof o&&null===l[1])return!1;if(l[1]instanceof o&&null===l[0])return!1;if(i.isFeatureSet(l[0])&&null===l[1])return new s({parentfeatureset:l[0]});if(i.isFeatureSet(l[1])&&null===l[0])return new s({parentfeatureset:l[1]});if(i.isFeatureSet(l[0])&&l[1]instanceof o)return l[0].relate(l[1],i.toString(l[2]));if(i.isFeatureSet(l[1])&&l[0]instanceof o)return l[1].relate(l[0],i.toString(l[2]));if(null===l[0]&&null===l[1])return!1;throw new n.ArcadeExecutionError(t,n.ExecutionErrorCodes.InvalidParameter,r)}))})}e.registerFunctions=f,Object.defineProperties(e,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})}));
