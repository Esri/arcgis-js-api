/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.25/esri/copyright.txt for details.
*/
define(["exports","../../../chunks/_rollupPluginBabelHelpers","./errorsupport","./shared","./sqlUtils"],(function(t,e,n,r,u){"use strict";function i(t){return t=+t,isFinite(t)?t-t%1||(t<0?-0:0===t?t:0):t}function l(t){let e=0;for(let n=0;n<t.length;n++)e+=t[n];return e/t.length}function a(t){const e=l(t);let n=0;for(let r=0;r<t.length;r++)n+=(e-t[r])**2;return n/t.length}function c(t){const e=l(t);let n=0;for(let r=0;r<t.length;r++)n+=(e-t[r])**2;return n/(t.length-1)}function o(t){let e=0;for(let n=0;n<t.length;n++)e+=t[n];return e}function s(t,e){const n=[],u={},i=[];for(let l=0;l<t.length;l++){if(void 0!==t[l]&&null!==t[l]){const e=t[l];if(r.isNumber(e)||r.isString(e))void 0===u[e]&&(n.push(e),u[e]=1);else{let t=!1;for(let n=0;n<i.length;n++)!0===r.equalityTest(i[n],e)&&(t=!0);!1===t&&(i.push(e),n.push(e))}}if(n.length>=e&&-1!==e)return n}return n}function h(t){switch(t.toLowerCase()){case"distinct":return"distinct";case"avg":case"mean":return"avg";case"min":return"min";case"sum":return"sum";case"max":return"max";case"stdev":case"stddev":return"stddev";case"var":case"variance":return"var";case"count":return"count"}return""}function p(t,e,n=1e3){switch(t.toLowerCase()){case"distinct":return s(e,n);case"avg":case"mean":return l(e);case"min":return Math.min.apply(Math,e);case"sum":return o(e);case"max":return Math.max.apply(Math,e);case"stdev":case"stddev":return Math.sqrt(a(e));case"var":case"variance":return a(e);case"count":return e.length}return 0}function f(t,e,n){return y.apply(this,arguments)}function y(){return(y=e._asyncToGenerator((function*(t,e,n){const r=yield b(t,e,n,!0);return 0===r.length?null:Math.min.apply(Math,r)}))).apply(this,arguments)}function d(t,e,n){return g.apply(this,arguments)}function g(){return(g=e._asyncToGenerator((function*(t,e,n){const r=yield b(t,e,n,!0);return 0===r.length?null:Math.max.apply(Math,r)}))).apply(this,arguments)}function m(t,e,n){return v.apply(this,arguments)}function v(){return(v=e._asyncToGenerator((function*(t,e,n){let r="";e&&!u.isSingleField(e)&&(r=u.predictType(e,t.fields));const a=yield b(t,e,n,!0);if(0===a.length)return null;const c=l(a);return null===c?c:"integer"===r?i(c):c}))).apply(this,arguments)}function T(t,e,n){return M.apply(this,arguments)}function M(){return(M=e._asyncToGenerator((function*(t,e,n){const r=yield b(t,e,n,!0);return 0===r.length?null:c(r)}))).apply(this,arguments)}function _(t,e,n){return x.apply(this,arguments)}function x(){return(x=e._asyncToGenerator((function*(t,e,n){const r=yield b(t,e,n,!0);return 0===r.length?null:Math.sqrt(c(r))}))).apply(this,arguments)}function w(t,e,n){return S.apply(this,arguments)}function S(){return(S=e._asyncToGenerator((function*(t,e,n){const r=yield b(t,e,n,!0);return 0===r.length?null:o(r)}))).apply(this,arguments)}function k(t,e){return G.apply(this,arguments)}function G(){return(G=e._asyncToGenerator((function*(t,e){return t.iterator(e).count()}))).apply(this,arguments)}function b(t,e,n){return C.apply(this,arguments)}function C(){return(C=e._asyncToGenerator((function*(t,e,r,u=!1){const i=t.iterator(r),l=[],a={ticker:0};let c=yield i.next();for(;null!==c;){if(a.ticker++,r.aborted)throw new n.FeatureSetError(n.FeatureSetErrorCodes.Cancelled);a.ticker%100==0&&(a.ticker=0,yield new Promise((t=>{setTimeout(t,0)})));const t=e?.calculateValue(c);null===t?!1===u&&(l[l.length]=t):l[l.length]=t,c=yield i.next()}return l}))).apply(this,arguments)}function F(t,e){return q.apply(this,arguments)}function q(){return(q=e._asyncToGenerator((function*(t,e,r=1e3,u=null){const i=t.iterator(u),l=[],a={},c={ticker:0};let o=yield i.next();for(;null!==o;){if(c.ticker++,u&&u.aborted)throw new n.FeatureSetError(n.FeatureSetErrorCodes.Cancelled);c.ticker%100==0&&(c.ticker=0,yield new Promise((t=>{setTimeout(t,0)})));const t=e?.calculateValue(o);if(null!=t&&void 0===a[t]&&(l.push(t),a[t]=1),l.length>=r&&-1!==r)return l;o=yield i.next()}return l}))).apply(this,arguments)}t.calculateStat=p,t.count=k,t.decodeStatType=h,t.distinct=F,t.max=d,t.mean=m,t.min=f,t.stdev=_,t.sum=w,t.variance=T,Object.defineProperties(t,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})}));
