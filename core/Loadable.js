/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.18/esri/copyright.txt for details.
*/
define(["../chunks/_rollupPluginBabelHelpers","../chunks/tslib.es6","./accessorSupport/decorators/property","./Warning","./accessorSupport/decorators/subclass","./Error","./promiseUtils","./Promise"],(function(o,e,r,t,n,l,a,s){"use strict";const d="loaded",i=s=>{let i=function(e){function r(...r){var t;return(t=e.call(this,...r)||this)._loadController=null,t.loadError=null,t.loadStatus="not-loaded",t._set("loadWarnings",[]),t.addResolvingPromise(new Promise((e=>{const r=t.load.bind(o._assertThisInitialized(t));t.load=n=>{const s=new Promise(((e,r)=>{const s=a.onAbortOrThrow(n,r);t.destroyed&&r(new l("load:instance-destroyed",`Instance of '${t.declaredClass||t.constructor.name}' is already destroyed`,{instance:o._assertThisInitialized(t)})),t._promiseProps.when(e,r).finally((()=>{s&&s.remove()}))}));if("not-loaded"===t.loadStatus){t._set("loadStatus","loading");const o=t._loadController=a.createAbortController();r({signal:o.signal}),a.onAbort(o.signal,(()=>{t._promiseProps.abort()}))}return e(),s}}))),t.when((()=>{t._set("loadStatus",d),t._loadController=null}),(o=>{t._set("loadStatus","failed"),t._set("loadError",o),t._loadController=null})),t}o._inheritsLoose(r,e);var t=r.prototype;return t.load=function(){return null},t.cancelLoad=function(){var o;return this.isFulfilled()||(this._set("loadError",new l("load:cancelled","Cancelled")),null==(o=this._loadController)||o.abort()),this},o._createClass(r,[{key:"loaded",get:function(){return this.loadStatus===d}},{key:"loadWarnings",get:function(){return this._get("loadWarnings")}}]),r}(s);return e.__decorate([r.property({readOnly:!0,dependsOn:["loadStatus"]})],i.prototype,"loaded",null),e.__decorate([r.property({readOnly:!0})],i.prototype,"loadError",void 0),e.__decorate([r.property()],i.prototype,"loadStatus",void 0),e.__decorate([r.property({type:[t],readOnly:!0})],i.prototype,"loadWarnings",null),i=e.__decorate([n.subclass("esri.core.Loadable")],i),i};let u=function(e){function r(){return e.apply(this,arguments)||this}return o._inheritsLoose(r,e),r}(i(s.EsriPromise));return u=e.__decorate([n.subclass("esri.core.Loadable")],u),function(o){o.LoadableMixin=i,o.isLoadable=function(o){return!(!o||!o.load)}}(u||(u={})),u}));
