/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.24/esri/copyright.txt for details.
*/
import{_ as o}from"../chunks/tslib.es6.js";import s from"./Accessor.js";import"./has.js";import{tryClone as e}from"./lang.js";import r from"./Logger.js";import{unwrapOrThrow as t}from"./maybe.js";import{OriginId as n}from"./accessorSupport/PropertyOrigin.js";import{getProperties as c}from"./accessorSupport/utils.js";import{subclass as i}from"./accessorSupport/decorators/subclass.js";r.getLogger("esri.core.Clonable");const l=s=>{let r=class extends s{clone(){const o=t(c(this),"unable to clone instance of non-accessor class"),s=o.metadatas,r=o.store,i={},l=new Map;for(const t in s){const o=s[t],c=r?.originOf(t),a=o.clonable;if(o.readOnly||!1===a||c!==n.USER&&c!==n.DEFAULTS&&c!==n.WEB_MAP&&c!==n.WEB_SCENE)continue;const f=this[t];let p=null;p="function"==typeof a?a(f):"reference"===a?f:e(f),null!=f&&null==p||(c===n.DEFAULTS?l.set(t,p):i[t]=p)}const a=new(0,Object.getPrototypeOf(this).constructor)(i);if(l.size){const o=c(a)?.store;if(o)for(const[s,e]of l)o.set(s,e,n.DEFAULTS)}return a}};return r=o([i("esri.core.Clonable")],r),r};let a=class extends(l(s)){};a=o([i("esri.core.Clonable")],a);export{a as Clonable,l as ClonableMixin};
