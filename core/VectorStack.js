/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.21/esri/copyright.txt for details.
*/
define(["exports","../chunks/_rollupPluginBabelHelpers","./maybe","./nextTick","../chunks/mat3f64","../chunks/mat4f64","../chunks/quatf64","../chunks/vec2f64","../chunks/vec3f64","../chunks/vec4f64"],(function(e,t,i,s,r,n,f,u,h,c){"use strict";let o=function(){function e(e,t,i){this.itemByteSize=e,this.itemCreate=t,this.buffers=[],this.items=[],this.itemsPerBuffer=0,this.itemsPtr=0,this.itemsPerBuffer=Math.ceil(i/this.itemByteSize),this.tickHandle=s.before((()=>this.reset()))}var o=e.prototype;return o.destroy=function(){this.tickHandle&&(this.tickHandle.remove(),this.tickHandle=i.nullifyNonnullableForDispose(this.tickHandle)),this.itemsPtr=0,this.items=i.nullifyNonnullableForDispose(this.items),this.buffers=i.nullifyNonnullableForDispose(this.buffers)},o.get=function(){0===this.itemsPtr&&s((()=>{}));const e=Math.floor(this.itemsPtr/this.itemsPerBuffer);for(;this.buffers.length<=e;){const e=new ArrayBuffer(this.itemsPerBuffer*this.itemByteSize);for(let t=0;t<this.itemsPerBuffer;++t)this.items.push(this.itemCreate(e,t*this.itemByteSize));this.buffers.push(e)}return this.items[this.itemsPtr++]},o.reset=function(){const e=2*(Math.floor(this.itemsPtr/this.itemsPerBuffer)+1);for(;this.buffers.length>e;)this.buffers.pop(),this.items.length=this.buffers.length*this.itemsPerBuffer;this.itemsPtr=0},e.createVec2f64=function(t=a){return new e(16,u.createView,t)},e.createVec3f64=function(t=a){return new e(24,h.createView,t)},e.createVec4f64=function(t=a){return new e(32,c.createView,t)},e.createMat3f64=function(t=a){return new e(72,r.createView,t)},e.createMat4f64=function(t=a){return new e(128,n.createView,t)},e.createQuatf64=function(t=a){return new e(32,f.createView,t)},t._createClass(e,[{key:"test",get:function(){return{size:this.buffers.length*this.itemsPerBuffer*this.itemByteSize}}}]),e}();const a=4096;e.VectorStack=o,Object.defineProperty(e,"__esModule",{value:!0})}));
