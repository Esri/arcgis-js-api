/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.25/esri/copyright.txt for details.
*/
define(["exports","./events","./handleUtils","./maybe","./promiseUtils","./accessorSupport/watch","./accessorSupport/trackingUtils"],(function(n,e,t,r,o,i,u){"use strict";function c(n,e,t={}){return l(n,e,t,y)}function s(n,e,t={}){return l(n,e,t,d)}function l(n,e,t={},o){let u=null;const c=t.once?(n,t)=>{o(n)&&(r.removeMaybe(u),e(n,t))}:(n,t)=>{o(n)&&e(n,t)};if(u=i.watchTracked(n,c,t.sync,t.equals),t.initial){const e=n();c(e,e)}return u}function a(n,o,i,u={}){let s=null,l=null,a=null;function f(){s&&l&&(l.remove(),u.onListenerRemove?.(s),s=null,l=null)}function m(n){u.once&&u.once&&r.removeMaybe(a),i(n)}const v=c(n,((n,t)=>{f(),e.isEventTarget(n)&&(s=n,l=e.on(n,o,m),u.onListenerAdd?.(n))}),{sync:u.sync,initial:!0});return a=t.makeHandle((()=>{v.remove(),f()})),a}function f(n,e){return v(n,null,e)}function m(n,e){return v(n,d,e)}function v(n,e,i){if(o.isAborted(i))return Promise.reject(o.createAbortError());const u=n();if(e?.(u))return Promise.resolve(u);let c=null;function s(){c=r.removeMaybe(c)}return new Promise(((r,u)=>{c=t.handlesGroup([o.onAbort(i,(()=>{s(),u(o.createAbortError())})),l(n,(n=>{s(),r(n)}),{sync:!1,once:!0},e??y)])}))}function y(n){return!0}function d(n){return!!n}function b(n,e,t={}){let r=!1;const o=c(n,((n,t)=>{r||e(n,t)}),t);return{remove(){o.remove()},pause(){r=!0},resume(){r=!1}}}const p={sync:!0},h={initial:!0},w={sync:!0,initial:!0};n.autorun=u.autorun,n.initial=h,n.on=a,n.once=f,n.pausable=b,n.sync=p,n.syncAndInitial=w,n.watch=c,n.when=s,n.whenOnce=m,Object.defineProperties(n,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})}));
