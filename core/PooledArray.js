/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.18/esri/copyright.txt for details.
*/
define(["../chunks/_rollupPluginBabelHelpers","./arrayUtils","./HeapSort"],(function(t,i,h){"use strict";return function(){function n(t){this.data=[],this._length=0,this._allocator=void 0,this._deallocator=()=>null,this._shrink=()=>{},this._hint=new i.PositionHint,t&&(t.initialSize&&(this.data=new Array(t.initialSize)),t.allocator&&(this._allocator=t.allocator),void 0!==t.deallocator&&(this._deallocator=t.deallocator),t.shrink&&(this._shrink=()=>{this.data.length>1.5*this.length&&(this.data.length=Math.floor(1.1*this.length))}))}var e=n.prototype;return e.toArray=function(){return this.data.slice(0,this.length)},e.getItemAt=function(t){if(!(t<0||t>=this._length))return this.data[t]},e.clear=function(){this.length=0},e.prune=function(){this.clear(),this.data=[]},e.push=function(t){this.data[this._length++]=t},e.pushArray=function(t,i=t.length){for(let h=0;h<i;h++)this.data[this._length++]=t[h]},e.fill=function(t,i){for(let h=0;h<i;h++)this.data[this._length++]=t},e.pushNew=function(){this._allocator&&(this.data[this.length]=this._allocator(this.data[this.length]));const t=this.data[this._length];return++this._length,t},e.pop=function(){if(0===this.length)return;const t=this.data[this.length-1];return this.length=this.length-1,this._shrink(),t},e.iterableRemoveMany=function*(t){const h=new Array;for(let n=0;n<this.length&&!(n>=this.length);++n)i.indexOf(t.data,this.data[n],t.length,t._hint)<0&&h.push(this.data[n]),yield;this.data=h,this._length=this.data.length},e.remove=function(t){const h=i.indexOf(this.data,t,this.length,this._hint);if(-1!==h)return this.data.splice(h,1),this.length=this.length-1,t},e.removeUnordered=function(t){const h=i.removeUnordered(this.data,t,this.length,this._hint);return void 0!==h&&(this.length=this.length-1),h},e.removeUnorderedIndex=function(t){if(!(t>=this.length||t<0))return this.swapElements(t,this.length-1),this.pop()},e.removeUnorderedMany=function(t,h=t.length,n){this.length=i.removeUnorderedMany(this.data,t,this.length,h,this._hint,n)},e.front=function(){if(0!==this.length)return this.data[0]},e.back=function(){if(0!==this.length)return this.data[this.length-1]},e.swapElements=function(t,i){t>=this.length||i>=this.length||t===i||([this.data[t],this.data[i]]=[this.data[i],this.data[t]])},e.sort=function(t){h.sort(this.data,0,this.length,t)},e.iterableSort=function(t){return h.iterableSort(this.data,0,this.length,t)},e.some=function(t,i){for(let h=0;h<this.length;++h)if(t.call(i,this.data[h],h,this.data))return!0;return!1},e.filterInPlace=function(t,i){let h=0;for(let n=0;n<this._length;++n){const e=this.data[n];t.call(i,e,n,this.data)&&(this.data[n]=this.data[h],this.data[h]=e,h++)}if(this._deallocator)for(let t=h;t<this._length;t++)this.data[t]=this._deallocator(this.data[t]);return this._length=h,this},e.forAll=function(t,i){const h=this.length,n=this.data;for(let e=0;e<h;++e)t.call(i,n[e],e,n)},e.iterableForEach=function*(){for(let t=0;t<this.length;++t)yield this.data[t]},e.map=function(t,i){const h=new Array(this.length);for(let n=0;n<this.length;++n)h[n]=t.call(i,this.data[n],n,this.data);return h},e.reduce=function(t,i){let h=i;for(let i=0;i<this.length;++i)h=t(h,this.data[i],i,this.data);return h},t._createClass(n,[{key:"length",get:function(){return this._length},set:function(t){if(t>this._length){if(this._allocator){for(;this._length<t;)this.data[this._length++]=this._allocator(this.data[this._length]);return}this._length=t}else{if(this._deallocator)for(let i=t;i<this._length;++i)this.data[i]=this._deallocator(this.data[i]);this._length=t,this._shrink()}}}]),n}()}));
