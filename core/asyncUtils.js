/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.25/esri/copyright.txt for details.
*/
define(["exports","../chunks/_rollupPluginBabelHelpers","../chunks/tslib.es6","./Accessor","./maybe","./promiseUtils","./accessorSupport/decorators/property","./arrayUtils","./accessorSupport/ensureType","./accessorSupport/decorators/subclass"],(function(r,e,t,o,n,u,l,a,s,i){"use strict";function c(r,e,t){return u.eachAlways(r.map(((r,o)=>e.apply(t,[r,o]))))}function p(r,e,t){return y.apply(this,arguments)}function y(){return y=e._asyncToGenerator((function*(r,e,t){return(yield u.eachAlways(r.map(((r,o)=>e.apply(t,[r,o]))))).map((r=>r.value))})),y.apply(this,arguments)}function _(r){return{ok:!0,value:r}}function f(r){return{ok:!1,error:r}}function h(r){return n.isSome(r)&&!0===r.ok?r.value:null}function b(r){return n.isSome(r)&&!1===r.ok?r.error:null}function d(r){return m.apply(this,arguments)}function m(){return(m=e._asyncToGenerator((function*(r){if(n.isNone(r))return{ok:!1,error:new Error("no promise provided")};try{return _(yield r)}catch(e){return f(e)}}))).apply(this,arguments)}function k(r){return v.apply(this,arguments)}function v(){return(v=e._asyncToGenerator((function*(r){try{return _(yield r)}catch(e){return u.throwIfAbortError(e),f(e)}}))).apply(this,arguments)}function g(r){if(!0===r.ok)return r.value;throw r.error}function A(r,e){return new C(r,e)}let C=function(r){function t(e,t){var o;(o=r.call(this,{})||this)._result=null,o._abortHandle=null,o.abort=()=>{o._abortController=n.abortMaybe(o._abortController)},o.remove=o.abort,o._abortController=new AbortController;const{signal:l}=o._abortController;return o.promise=e(l),o.promise.then((r=>{o._result=_(r),o._cleanup()}),(r=>{o._result=f(r),o._cleanup()})),o._abortHandle=u.onAbort(t,o.abort),o}e._inheritsLoose(t,r);var o=t.prototype;return o.normalizeCtorArgs=function(){return{}},o.destroy=function(){this.abort()},o._cleanup=function(){this._abortHandle=n.removeMaybe(this._abortHandle),this._abortController=null},e._createClass(t,[{key:"value",get:function(){return h(this._result)}},{key:"error",get:function(){return b(this._result)}},{key:"finished",get:function(){return n.isSome(this._result)}}]),t}(o);t.__decorate([l.property()],C.prototype,"value",null),t.__decorate([l.property()],C.prototype,"error",null),t.__decorate([l.property()],C.prototype,"finished",null),t.__decorate([l.property()],C.prototype,"promise",void 0),t.__decorate([l.property()],C.prototype,"_result",void 0),C=t.__decorate([i.subclass("esri.core.asyncUtils.ReactiveTask")],C),r.assertResult=g,r.createTask=A,r.forEach=c,r.makeResultError=f,r.makeResultOk=_,r.map=p,r.result=d,r.resultError=b,r.resultOrAbort=k,r.resultValue=h,Object.defineProperties(r,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})}));
