/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.18/esri/copyright.txt for details.
*/
define(["exports","./maybe","./mathUtils"],(function(t,e,s){"use strict";const i=(t,e)=>{const s=Math.floor(e/8),i=e-8*s,o=t[s],n=1<<i;t[s]=o|n},o=(t,e)=>{const s=Math.floor(e/8),i=e-8*s,o=t[s],n=1<<i,l=(o&n)>>i;return t[s]=o&~n|n*(1-l),l};let n=function(){function t(t){this._size=t,this._levels=s.log2(this._size),this._index=new Uint8Array(Math.ceil(t/8)),this._data=new Array(t),this._lookupTable=new Map}var n=t.prototype;return n.with=function(t,e){return this.has(e)?this.get(e):this.set(e,t(e))},n.has=function(t){return this._lookupTable.has(t)},n.get=function(t){const s=this._lookupTable.get(t),i=e.isSome(s)?this._getData(s):null;return"object"==typeof i?i:null},n.set=function(t,s){const i=this._freeIndex(),o=this._data[i]=e.isSome(s)?s:t;return this._lookupTable.set("object"==typeof o?o.cacheKey:o,i),s},n.clear=function(){for(let t=0;t<this._index.length;t++)this._index[t]=0;for(let t=0;t<this._data.length;t++)this._data[t]=null;this._lookupTable.clear()},n._getData=function(t){const e=(1<<this._levels)-1,s=t;let o=Math.floor((e+s)/2);for(let t=this._levels-1;t>=0;t--)i(this._index,o),o=Math.floor(o/2);return this._data[t]},n._freeIndex=function(){let t=0,e=0;for(let s=0;s<this._levels;s++)e=o(this._index,t),t=2*t+1+e;const s=t-((1<<this._levels)-1),i=this._data[s];if(i){const t="object"==typeof i?i.cacheKey:i;this._lookupTable.delete(t)}return s},t}();t.PLRUCache=n,Object.defineProperty(t,"__esModule",{value:!0})}));
