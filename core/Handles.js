/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.18/esri/copyright.txt for details.
*/
define(["../chunks/_rollupPluginBabelHelpers","../chunks/tslib.es6","./maybe","./accessorSupport/decorators/property","./accessorSupport/decorators/subclass","./Accessor","./Collection"],(function(e,r,t,s,o,i,n){"use strict";let u=function(r){function s(e){var t;return(t=r.call(this,e)||this)._groups=new Map,t}e._inheritsLoose(s,r);var o=s.prototype;return o.destroy=function(){this.removeAll()},o.add=function(e,r){if(!this._isHandle(e)&&!Array.isArray(e)&&!n.isCollection(e))return this;const t=this._getOrCreateGroup(r);return Array.isArray(e)||n.isCollection(e)?e.forEach((e=>this._isHandle(e)&&t.push(e))):t.push(e),this.notifyChange("size"),this},o.forEach=function(e,r){if("function"==typeof e)this._groups.forEach((r=>r.forEach(e)));else{const t=this._getGroup(e);t&&r&&t.forEach(r)}},o.has=function(e){return this._groups.has(this._ensureGroupKey(e))},o.remove=function(e){if(Array.isArray(e)||n.isCollection(e))return e.forEach(this.remove,this),this;if(!this.has(e))return this;const r=this._getGroup(e);for(let e=0;e<r.length;e++)r[e].remove();return this._deleteGroup(e),this.notifyChange("size"),this},o.removeAll=function(){return this._groups.forEach((e=>{for(let r=0;r<e.length;r++)e[r].remove()})),this._groups.clear(),this.notifyChange("size"),this},o._isHandle=function(e){return e&&!!e.remove},o._getOrCreateGroup=function(e){if(this.has(e))return this._getGroup(e);const r=[];return this._groups.set(this._ensureGroupKey(e),r),r},o._getGroup=function(e){return t.assumeNonNull(this._groups.get(this._ensureGroupKey(e)))},o._deleteGroup=function(e){return this._groups.delete(this._ensureGroupKey(e))},o._ensureGroupKey=function(e){return e||"_default_"},e._createClass(s,[{key:"size",get:function(){let e=0;return this._groups.forEach((r=>{e+=r.length})),e}}]),s}(i);return r.__decorate([s.property({readOnly:!0})],u.prototype,"size",null),u=r.__decorate([o.subclass("esri.core.Handles")],u),u}));
