/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.19/esri/copyright.txt for details.
*/
define(["exports","./lang","./events","./promiseUtils"],(function(n,e,t,r){"use strict";function o(n,e,t,r,o){const u=n.watch(e,((e,o,u,c)=>{t&&!t(e)||null==r||r.call(n,e,o,u,c)}),o);if(Array.isArray(e))for(const c of e){const o=n.get(c);t&&t(o)&&(null==r||r.call(n,o,o,e,n))}else{const o=n.get(e);t&&t(o)&&(null==r||r.call(n,o,o,e,n))}return u}function u(n,e,t,u,c){const i="function"==typeof u?u:null,l="object"==typeof u?u:null;"boolean"==typeof u&&(c=u);let f,a=!1;function s(){f&&(f.remove(),f=null)}const h=r.createDeferred();r.onAbort(l,(()=>{s(),h.reject(r.createAbortError())}));const d={then:h.promise.then.bind(h.promise),catch:h.promise.catch.bind(h.promise),remove:s};return Object.freeze(d),f=o(n,e,t,((e,t,r,o)=>{a=!0,s(),i&&i.call(n,e,t,r,o),h.resolve({value:e,oldValue:t,propertyName:r,target:o})}),c),a&&s(),d}function c(n){return!!n}function i(n){return!n}function l(n){return!0===n}function f(n){return!1===n}function a(n){return void 0!==n}function s(n){return void 0===n}const h=/\?(\.|$)/g;function d(n,e,t,r){const o=Array.isArray(e)?e:e.indexOf(",")>-1?e.split(","):[e],u=w(n,e,t,r);for(const c of o){const e=c.trim().replace(h,"$1"),r=n.get(e);t.call(n,r,r,e,n)}return u}function w(n,e,t,r){return n.watch(e,t,r)}function p(n,e,t,r){return u(n,e,null,t,r)}function m(n,e,t,r){return o(n,e,c,t,r)}function v(n,e,t,r){return u(n,e,c,t,r)}function O(n,e,t,r){return o(n,e,i,t,r)}function b(n,e,t,r){return u(n,e,i,t,r)}function g(n,e,t,r){return o(n,e,l,t,r)}function y(n,e,t,r){return u(n,e,l,t,r)}function A(n,e,t,r){return o(n,e,f,t,r)}function j(n,e,t,r){return u(n,e,f,t,r)}function q(n,e,t,r){return o(n,e,a,t,r)}function E(n,e,t,r){return u(n,e,a,t,r)}function D(n,e,t,r){return o(n,e,s,t,r)}function N(n,e,t,r){return u(n,e,s,t,r)}function T(n,t,r,u,c){return o(n,t,(n=>e.equals(r,n)),u,c)}function U(n,t,r,o,c){return u(n,t,(n=>e.equals(r,n)),o,c)}function x(n,e,t,r){let o=!1;const u=n.watch(e,((e,r,u,c)=>{o||t.call(n,e,r,u,c)}),r);return{remove(){u.remove()},pause(){o=!0},resume(){o=!1}}}function F(n,e,r,o,u,c,i){const l={};function f(e){const t=l[e];t&&(c&&c(t.target,e,n,r),t.handle.remove(),delete l[e])}const a=d(n,e,((e,c,i)=>{f(i),t.isEventTarget(e)&&(l[i]={handle:t.on(e,r,o),target:e},u&&u(e,i,n,r))}),i);return{remove(){a.remove();for(const n in l)f(n)}}}n.init=d,n.on=F,n.once=p,n.pausable=x,n.watch=w,n.when=m,n.whenDefined=q,n.whenDefinedOnce=E,n.whenEqual=T,n.whenEqualOnce=U,n.whenFalse=A,n.whenFalseOnce=j,n.whenNot=O,n.whenNotOnce=b,n.whenOnce=v,n.whenTrue=g,n.whenTrueOnce=y,n.whenUndefined=D,n.whenUndefinedOnce=N,n.whenValidOnce=u,Object.defineProperty(n,"__esModule",{value:!0})}));
