// COPYRIGHT Â© 2020 Esri
//
// All rights reserved under the copyright laws of the United States
// and applicable international laws, treaties, and conventions.
//
// This material is licensed for use under the Esri Master License
// Agreement (MLA), and is bound by the terms of that agreement.
// You may redistribute and use this code without modification,
// provided you adhere to the terms of the MLA and include this
// copyright notice.
//
// See use restrictions at http://www.esri.com/legal/pdfs/mla_e204_e300/english
//
// For additional information, contact:
// Environmental Systems Research Institute, Inc.
// Attn: Contracts and Legal Services Department
// 380 New York Street
// Redlands, California, USA 92373
// USA
//
// email: contracts@esri.com
//
// See http://js.arcgis.com/4.17/esri/copyright.txt for details.

define(["require","exports","./common"],(function(t,a,n){"use strict";function r(t,a,n){var r=a[0],o=a[1],u=a[2],e=a[3],i=a[4],s=a[5],M=a[6],c=a[7],h=a[8],f=n[0],l=n[1],m=n[2],b=n[3],p=n[4],d=n[5],v=n[6],y=n[7],S=n[8];return t[0]=f*r+l*e+m*M,t[1]=f*o+l*i+m*c,t[2]=f*u+l*s+m*h,t[3]=b*r+p*e+d*M,t[4]=b*o+p*i+d*c,t[5]=b*u+p*s+d*h,t[6]=v*r+y*e+S*M,t[7]=v*o+y*i+S*c,t[8]=v*u+y*s+S*h,t}function o(t,a,n){return t[0]=a[0]-n[0],t[1]=a[1]-n[1],t[2]=a[2]-n[2],t[3]=a[3]-n[3],t[4]=a[4]-n[4],t[5]=a[5]-n[5],t[6]=a[6]-n[6],t[7]=a[7]-n[7],t[8]=a[8]-n[8],t}Object.defineProperty(a,"__esModule",{value:!0}),a.sub=a.mul=a.equals=a.exactEquals=a.multiplyScalarAndAdd=a.multiplyScalar=a.subtract=a.add=a.frob=a.str=a.projection=a.normalFromMat4=a.normalFromMat4Legacy=a.fromQuat=a.fromMat2d=a.fromScaling=a.fromRotation=a.fromTranslation=a.scaleByVec2=a.scale=a.rotate=a.translate=a.multiply=a.determinant=a.adjoint=a.invert=a.transpose=a.identity=a.set=a.copy=a.fromMat4=void 0,a.fromMat4=function(t,a){return t[0]=a[0],t[1]=a[1],t[2]=a[2],t[3]=a[4],t[4]=a[5],t[5]=a[6],t[6]=a[8],t[7]=a[9],t[8]=a[10],t},a.copy=function(t,a){return t[0]=a[0],t[1]=a[1],t[2]=a[2],t[3]=a[3],t[4]=a[4],t[5]=a[5],t[6]=a[6],t[7]=a[7],t[8]=a[8],t},a.set=function(t,a,n,r,o,u,e,i,s,M){return t[0]=a,t[1]=n,t[2]=r,t[3]=o,t[4]=u,t[5]=e,t[6]=i,t[7]=s,t[8]=M,t},a.identity=function(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=1,t[5]=0,t[6]=0,t[7]=0,t[8]=1,t},a.transpose=function(t,a){if(t===a){var n=a[1],r=a[2],o=a[5];t[1]=a[3],t[2]=a[6],t[3]=n,t[5]=a[7],t[6]=r,t[7]=o}else t[0]=a[0],t[1]=a[3],t[2]=a[6],t[3]=a[1],t[4]=a[4],t[5]=a[7],t[6]=a[2],t[7]=a[5],t[8]=a[8];return t},a.invert=function(t,a){var n=a[0],r=a[1],o=a[2],u=a[3],e=a[4],i=a[5],s=a[6],M=a[7],c=a[8],h=c*e-i*M,f=-c*u+i*s,l=M*u-e*s,m=n*h+r*f+o*l;return m?(m=1/m,t[0]=h*m,t[1]=(-c*r+o*M)*m,t[2]=(i*r-o*e)*m,t[3]=f*m,t[4]=(c*n-o*s)*m,t[5]=(-i*n+o*u)*m,t[6]=l*m,t[7]=(-M*n+r*s)*m,t[8]=(e*n-r*u)*m,t):null},a.adjoint=function(t,a){var n=a[0],r=a[1],o=a[2],u=a[3],e=a[4],i=a[5],s=a[6],M=a[7],c=a[8];return t[0]=e*c-i*M,t[1]=o*M-r*c,t[2]=r*i-o*e,t[3]=i*s-u*c,t[4]=n*c-o*s,t[5]=o*u-n*i,t[6]=u*M-e*s,t[7]=r*s-n*M,t[8]=n*e-r*u,t},a.determinant=function(t){var a=t[0],n=t[1],r=t[2],o=t[3],u=t[4],e=t[5],i=t[6],s=t[7],M=t[8];return a*(M*u-e*s)+n*(-M*o+e*i)+r*(s*o-u*i)},a.multiply=r,a.translate=function(t,a,n){var r=a[0],o=a[1],u=a[2],e=a[3],i=a[4],s=a[5],M=a[6],c=a[7],h=a[8],f=n[0],l=n[1];return t[0]=r,t[1]=o,t[2]=u,t[3]=e,t[4]=i,t[5]=s,t[6]=f*r+l*e+M,t[7]=f*o+l*i+c,t[8]=f*u+l*s+h,t},a.rotate=function(t,a,n){var r=a[0],o=a[1],u=a[2],e=a[3],i=a[4],s=a[5],M=a[6],c=a[7],h=a[8],f=Math.sin(n),l=Math.cos(n);return t[0]=l*r+f*e,t[1]=l*o+f*i,t[2]=l*u+f*s,t[3]=l*e-f*r,t[4]=l*i-f*o,t[5]=l*s-f*u,t[6]=M,t[7]=c,t[8]=h,t},a.scale=function(t,a,n){var r=n[0],o=n[1],u=n[2];return t[0]=r*a[0],t[1]=r*a[1],t[2]=r*a[2],t[3]=o*a[3],t[4]=o*a[4],t[5]=o*a[5],t[6]=u*a[6],t[7]=u*a[7],t[8]=u*a[8],t},a.scaleByVec2=function(t,a,n){var r=n[0],o=n[1];return t[0]=r*a[0],t[1]=r*a[1],t[2]=r*a[2],t[3]=o*a[3],t[4]=o*a[4],t[5]=o*a[5],t},a.fromTranslation=function(t,a){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=1,t[5]=0,t[6]=a[0],t[7]=a[1],t[8]=1,t},a.fromRotation=function(t,a){var n=Math.sin(a),r=Math.cos(a);return t[0]=r,t[1]=n,t[2]=0,t[3]=-n,t[4]=r,t[5]=0,t[6]=0,t[7]=0,t[8]=1,t},a.fromScaling=function(t,a){return t[0]=a[0],t[1]=0,t[2]=0,t[3]=0,t[4]=a[1],t[5]=0,t[6]=0,t[7]=0,t[8]=1,t},a.fromMat2d=function(t,a){return t[0]=a[0],t[1]=a[1],t[2]=0,t[3]=a[2],t[4]=a[3],t[5]=0,t[6]=a[4],t[7]=a[5],t[8]=1,t},a.fromQuat=function(t,a){var n=a[0],r=a[1],o=a[2],u=a[3],e=n+n,i=r+r,s=o+o,M=n*e,c=r*e,h=r*i,f=o*e,l=o*i,m=o*s,b=u*e,p=u*i,d=u*s;return t[0]=1-h-m,t[3]=c-d,t[6]=f+p,t[1]=c+d,t[4]=1-M-m,t[7]=l-b,t[2]=f-p,t[5]=l+b,t[8]=1-M-h,t},a.normalFromMat4Legacy=function(t,a){var n=a[0],r=a[1],o=a[2],u=a[4],e=a[5],i=a[6],s=a[8],M=a[9],c=a[10],h=c*e-i*M,f=-c*u+i*s,l=M*u-e*s,m=n*h+r*f+o*l;if(!m)return null;var b=1/m;return t[0]=h*b,t[1]=(-c*r+o*M)*b,t[2]=(i*r-o*e)*b,t[3]=f*b,t[4]=(c*n-o*s)*b,t[5]=(-i*n+o*u)*b,t[6]=l*b,t[7]=(-M*n+r*s)*b,t[8]=(e*n-r*u)*b,t},a.normalFromMat4=function(t,a){var n=a[0],r=a[1],o=a[2],u=a[3],e=a[4],i=a[5],s=a[6],M=a[7],c=a[8],h=a[9],f=a[10],l=a[11],m=a[12],b=a[13],p=a[14],d=a[15],v=n*i-r*e,y=n*s-o*e,S=n*M-u*e,x=r*s-o*i,E=r*M-u*i,L=o*M-u*s,O=c*b-h*m,P=c*p-f*m,w=c*d-l*m,I=h*p-f*b,N=h*d-l*b,q=f*d-l*p,j=v*q-y*N+S*I+x*w-E*P+L*O;return j?(j=1/j,t[0]=(i*q-s*N+M*I)*j,t[1]=(s*w-e*q-M*P)*j,t[2]=(e*N-i*w+M*O)*j,t[3]=(o*N-r*q-u*I)*j,t[4]=(n*q-o*w+u*P)*j,t[5]=(r*w-n*N-u*O)*j,t[6]=(b*L-p*E+d*x)*j,t[7]=(p*S-m*L-d*y)*j,t[8]=(m*E-b*S+d*v)*j,t):null},a.projection=function(t,a,n){return t[0]=2/a,t[1]=0,t[2]=0,t[3]=0,t[4]=-2/n,t[5]=0,t[6]=-1,t[7]=1,t[8]=1,t},a.str=function(t){return"mat3("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+", "+t[4]+", "+t[5]+", "+t[6]+", "+t[7]+", "+t[8]+")"},a.frob=function(t){return Math.sqrt(Math.pow(t[0],2)+Math.pow(t[1],2)+Math.pow(t[2],2)+Math.pow(t[3],2)+Math.pow(t[4],2)+Math.pow(t[5],2)+Math.pow(t[6],2)+Math.pow(t[7],2)+Math.pow(t[8],2))},a.add=function(t,a,n){return t[0]=a[0]+n[0],t[1]=a[1]+n[1],t[2]=a[2]+n[2],t[3]=a[3]+n[3],t[4]=a[4]+n[4],t[5]=a[5]+n[5],t[6]=a[6]+n[6],t[7]=a[7]+n[7],t[8]=a[8]+n[8],t},a.subtract=o,a.multiplyScalar=function(t,a,n){return t[0]=a[0]*n,t[1]=a[1]*n,t[2]=a[2]*n,t[3]=a[3]*n,t[4]=a[4]*n,t[5]=a[5]*n,t[6]=a[6]*n,t[7]=a[7]*n,t[8]=a[8]*n,t},a.multiplyScalarAndAdd=function(t,a,n,r){return t[0]=a[0]+n[0]*r,t[1]=a[1]+n[1]*r,t[2]=a[2]+n[2]*r,t[3]=a[3]+n[3]*r,t[4]=a[4]+n[4]*r,t[5]=a[5]+n[5]*r,t[6]=a[6]+n[6]*r,t[7]=a[7]+n[7]*r,t[8]=a[8]+n[8]*r,t},a.exactEquals=function(t,a){return t[0]===a[0]&&t[1]===a[1]&&t[2]===a[2]&&t[3]===a[3]&&t[4]===a[4]&&t[5]===a[5]&&t[6]===a[6]&&t[7]===a[7]&&t[8]===a[8]},a.equals=function(t,a){var r=t[0],o=t[1],u=t[2],e=t[3],i=t[4],s=t[5],M=t[6],c=t[7],h=t[8],f=a[0],l=a[1],m=a[2],b=a[3],p=a[4],d=a[5],v=a[6],y=a[7],S=a[8];return Math.abs(r-f)<=n.EPSILON*Math.max(1,Math.abs(r),Math.abs(f))&&Math.abs(o-l)<=n.EPSILON*Math.max(1,Math.abs(o),Math.abs(l))&&Math.abs(u-m)<=n.EPSILON*Math.max(1,Math.abs(u),Math.abs(m))&&Math.abs(e-b)<=n.EPSILON*Math.max(1,Math.abs(e),Math.abs(b))&&Math.abs(i-p)<=n.EPSILON*Math.max(1,Math.abs(i),Math.abs(p))&&Math.abs(s-d)<=n.EPSILON*Math.max(1,Math.abs(s),Math.abs(d))&&Math.abs(M-v)<=n.EPSILON*Math.max(1,Math.abs(M),Math.abs(v))&&Math.abs(c-y)<=n.EPSILON*Math.max(1,Math.abs(c),Math.abs(y))&&Math.abs(h-S)<=n.EPSILON*Math.max(1,Math.abs(h),Math.abs(S))},a.mul=r,a.sub=o}));