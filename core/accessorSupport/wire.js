/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.18/esri/copyright.txt for details.
*/
define(["exports","./tracking"],(function(e,n){"use strict";let r=function(){function e(e){this.notify=e,this._accessedProperties=new Set,this._observationHandles=[]}var n=e.prototype;return n.destroy=function(){this._accessedProperties.clear(),this.clearObservationHandles()},n.onPropertyAccessed=function(e){this._accessedProperties.add(e)},n.onTrackingEnd=function(){this._accessedProperties.forEach((e=>{this._observationHandles.push(e.observe(this))})),this._accessedProperties.clear()},n.clearObservationHandles=function(){for(const e of this._observationHandles)e.remove();this._observationHandles.length=0},e}();e.autorun=function(e){let t=new r((function(){if(!t||s)return;t.clearObservationHandles(),s=!0,n.runTracked(t,e),s=!1})),s=!1;return s=!0,n.runTracked(t,e),s=!1,{remove:function(){t&&(t.destroy(),t=null)}}},e.wire=function(e,t){let s=new r((function(){if(!s||i)return;const r=o;s.clearObservationHandles(),i=!0,o=n.runTracked(s,e),i=!1,t(r,o)})),o=null,i=!1;return i=!0,o=n.runTracked(s,e),i=!1,{remove:function(){s&&(s.destroy(),s=null,o=null)}}},e.wireAsync=function(e,t){let s=new r((function(){t(o,i)})),o=null;function i(){return s?(s.clearObservationHandles(),o=n.runTracked(s,e),o):null}return i(),{remove:function(){s&&(s.destroy(),s=null),o=null}}},Object.defineProperty(e,"__esModule",{value:!0})}));
