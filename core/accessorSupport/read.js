/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.19/esri/copyright.txt for details.
*/
define(["exports","./utils","./get","./extensions/serializableProperty"],(function(e,t,r,i){"use strict";function n(e,t,i){if(!e||!e.read||!1===e.read.enabled||!e.read.source)return!1;const n=e.read.source;if("string"==typeof n){if(n===t)return!0;if(n.indexOf(".")>-1&&0===n.indexOf(t)&&r.exists(n,i))return!0}else for(const o of n){if(o===t)return!0;if(o.indexOf(".")>-1&&0===o.indexOf(t)&&r.exists(o,i))return!0}return!1}function o(e){return e&&(!e.read||!1!==e.read.enabled&&!e.read.source)}function s(e,t,r,s,f){let a=i.originSpecificReadPropertyDefinition(t[r],f);o(a)&&(e[r]=!0);for(const o of Object.getOwnPropertyNames(t))a=i.originSpecificReadPropertyDefinition(t[o],f),n(a,r,s)&&(e[o]=!0)}function f(e,t,r,n){const o=r.metadatas,s=i.originSpecificPropertyDefinition(o[t],"any",n),f=s&&s.default;if(void 0===f)return;const a="function"==typeof f?f.call(e,t,n):f;void 0!==a&&r.set(t,a)}const a={origin:"service"};function c(e,n,o=a){if(!n||"object"!=typeof n)return;const c=t.getProperties(e),d=c.metadatas,u={};for(const t of Object.getOwnPropertyNames(n))s(u,d,t,n,o);c.setDefaultOrigin(o.origin);for(const t of Object.getOwnPropertyNames(u)){const s=i.originSpecificReadPropertyDefinition(d[t],o).read,f=s&&s.source;let a;a=f&&"string"==typeof f?r.valueOf(n,f):n[t],s&&s.reader&&(a=s.reader.call(e,a,n,o)),void 0!==a&&c.set(t,a)}if(!o||!o.ignoreDefaults)for(const t of Object.getOwnPropertyNames(d))u[t]||f(e,t,c,o);c.setDefaultOrigin("user")}function d(e,t,r,i=a){var n;const o={...i,messages:[]};r(o),null==(n=o.messages)||n.forEach((t=>{"warning"!==t.type||e.loaded?i&&i.messages&&i.messages.push(t):e.loadWarnings.push(t)}))}e.default=c,e.read=c,e.readLoadable=d,Object.defineProperty(e,"__esModule",{value:!0})}));
