/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.20/esri/copyright.txt for details.
*/
define(["exports","./tracking","./tracking/SimpleTrackingTarget"],(function(n,e,r){"use strict";let t=!1;const u=[];function i(n,u,i={runImmediately:!1}){let c=new r.SimpleTrackingTarget(a),l=null,o=!1;function a(){if(!c||o)return;if(t)return void f(a);const r=l;c.clear(),t=!0,o=!0,l=e.runTracked(c,n),o=!1,t=!1,u(l,r),d()}function m(){c&&(c.destroy(),c=null,l=null)}return o=!0,l=e.runTracked(c,n),o=!1,i.runImmediately&&u(l,l),{remove:m}}function c(n,e){return i(n,e,{runImmediately:!0})}function l(n,e){return i((()=>n()),(n=>{n&&e()}),{runImmediately:!0})}function o(n,t){let u=new r.SimpleTrackingTarget(c),i=null;function c(){t(i,o)}function l(){u&&(u.destroy(),u=null),i=null}function o(){return u?(u.clear(),i=e.runTracked(u,n),i):null}return o(),{remove:l}}function a(n){let u=new r.SimpleTrackingTarget(c),i=!1;function c(){u&&!i&&(t?f(c):(u.clear(),t=!0,i=!0,e.runTracked(u,n),i=!1,t=!1,d()))}function l(){u&&(u.destroy(),u=null)}return i=!0,e.runTracked(u,n),i=!1,{remove:l}}function f(n){u.includes(n)||u.unshift(n)}function d(){for(;u.length;)u.pop()()}n.autorun=a,n.reaction=i,n.reactionAsync=o,n.reactionInit=c,n.when=l,Object.defineProperty(n,"__esModule",{value:!0})}));
