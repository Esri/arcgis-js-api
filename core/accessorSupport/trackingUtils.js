/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.21/esri/copyright.txt for details.
*/
define(["exports","./tracking","./tracking/SimpleTrackingTarget"],(function(n,e,r){"use strict";let t=!1;const i=[];function u(n,i,u={immediate:!1}){let c=new r.SimpleTrackingTarget(a),o=null,l=!1;function a(){if(!c||l)return;if(t)return void f(a);const r=o;c.clear(),t=!0,l=!0,o=e.runTracked(c,n),l=!1,t=!1,i(o,r),d()}function m(){c&&(c.destroy(),c=null,o=null)}return l=!0,o=e.runTracked(c,n),l=!1,u.immediate&&i(o,o),{remove:m}}function c(n,e){return u(n,e,{immediate:!0})}function o(n,e){return u((()=>n()),(n=>{n&&e()}),{immediate:!0})}function l(n,t){let i=new r.SimpleTrackingTarget(c),u=null;function c(){t(u,l)}function o(){i&&(i.destroy(),i=null),u=null}function l(){return i?(i.clear(),u=e.runTracked(i,n),u):null}return l(),{remove:o}}function a(n){let i=new r.SimpleTrackingTarget(c),u=!1;function c(){i&&!u&&(t?f(c):(i.clear(),t=!0,u=!0,e.runTracked(i,n),u=!1,t=!1,d()))}function o(){i&&(i.destroy(),i=null)}return u=!0,e.runTracked(i,n),u=!1,{remove:o}}function f(n){i.includes(n)||i.unshift(n)}function d(){for(;i.length;)i.pop()()}n.autorun=a,n.reaction=u,n.reactionDeferred=l,n.reactionInit=c,n.when=o,Object.defineProperty(n,"__esModule",{value:!0})}));
