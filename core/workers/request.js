/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.18/esri/copyright.txt for details.
*/
define(["exports","../global","../Error"],(function(e,t,r){"use strict";let s;e.execute=function(e,n={}){let o=n.responseType;o?"json"!==o&&"text"!==o&&"blob"!==o&&"array-buffer"!==o&&(o="text"):o="json";const a=n&&n.signal;return delete n.signal,t.invokeStaticMessage("request",{url:e,options:n},{signal:a}).then((t=>{const a=t.data;let l,u,i,c;if(a&&!("json"!==o&&"text"!==o&&"blob"!==o||(l=new Blob([a]),"json"!==o&&"text"!==o||(s||(s=new FileReaderSync),u=s.readAsText(l),"json"!==o)))){try{i=JSON.parse(u||null)}catch(t){const s={...t,url:e,requestOptions:n};throw new r("request:server",t.message,s)}if(i.error){const t={...i.error,url:e,requestOptions:n};throw new r("request:server",i.error.message,t)}}switch(o){case"json":c=i;break;case"text":c=u;break;case"blob":c=l;break;default:c=a}return{data:c,requestOptions:n,ssl:t.ssl,url:e}}))},Object.defineProperty(e,"__esModule",{value:!0})}));
