/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.21/esri/copyright.txt for details.
*/
define(["../chunks/_rollupPluginBabelHelpers","../chunks/tslib.es6","../core/Accessor","../core/jsonMap","../core/lang","../core/maybe","../core/accessorSupport/decorators/property","../core/accessorSupport/ensureType","../core/has","../core/Logger","../core/accessorSupport/decorators/subclass","../geometry/Extent","../geometry/SpatialReference","../geometry/support/webMercatorUtils"],(function(e,t,r,o,s,i,n,a,c,u,p,l,y,d){"use strict";var h;const m=new o.JSONMap({avgRating:"avg-rating",numRatings:"num-ratings",numComments:"num-comments",numViews:"num-views"});let g=h=function(t){function r(e){var r;return(r=t.call(this,e)||this).categories=null,r.disableExtraQuery=!1,r.extent=null,r.num=10,r.query=null,r.sortField=null,r.start=1,r}e._inheritsLoose(r,t);var o=r.prototype;return o.clone=function(){return new h({categories:this.categories?s.clone(this.categories):null,disableExtraQuery:this.disableExtraQuery,extent:this.extent?this.extent.clone():null,num:this.num,query:this.query,sortField:this.sortField,sortOrder:this.sortOrder,start:this.start})},o.toRequestOptions=function(e,t){let r,o;if(this.categories&&(r=this.categories.map((e=>Array.isArray(e)?JSON.stringify(e):e))),this.extent){const e=d.project(this.extent,y.WGS84);i.isSome(e)&&(o=`${e.xmin},${e.ymin},${e.xmax},${e.ymax}`)}let s=this.query;!this.disableExtraQuery&&e.extraQuery&&(s="("+s+")"+e.extraQuery);const n={categories:r,bbox:o,q:s,num:this.num,sortField:null,sortOrder:null,start:this.start};return this.sortField&&(n.sortField=this.sortField.split(",").map((e=>m.toJSON(e.trim()))).join(","),n.sortOrder=this.sortOrder),{query:{...t,...n}}},e._createClass(r,[{key:"sortOrder",get:function(){return this._get("sortOrder")||"asc"},set:function(e){"asc"!==e&&"desc"!==e||this._set("sortOrder",e)}}]),r}(r);return t.__decorate([n.property()],g.prototype,"categories",void 0),t.__decorate([n.property()],g.prototype,"disableExtraQuery",void 0),t.__decorate([n.property({type:l})],g.prototype,"extent",void 0),t.__decorate([n.property()],g.prototype,"num",void 0),t.__decorate([n.property()],g.prototype,"query",void 0),t.__decorate([n.property()],g.prototype,"sortField",void 0),t.__decorate([n.property()],g.prototype,"sortOrder",null),t.__decorate([n.property()],g.prototype,"start",void 0),g=h=t.__decorate([p.subclass("esri.portal.PortalQueryParams")],g),g}));
