/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.18/esri/copyright.txt for details.
*/
define(["require","exports","../../config","../../core/Error","../Portal","../../tasks/support/ProjectParameters"],(function(e,r,t,n,o,i){"use strict";function a(e){return Object.freeze({__proto__:null,default:e})}async function l(r=null,i){if(t.geometryServiceUrl){return new(0,(await new Promise((function(r,t){e(["../../tasks/GeometryService"],(function(e){r(a(e))}),t)}))).default)({url:t.geometryServiceUrl})}if(!r)throw new n("internal:geometry-service-url-not-configured");let l;if(l="portal"in r?r.portal||o.getDefault():r,await l.load({signal:i}),l.helperServices&&l.helperServices.geometry&&l.helperServices.geometry.url){return new(0,(await new Promise((function(r,t){e(["../../tasks/GeometryService"],(function(e){r(a(e))}),t)}))).default)({url:l.helperServices.geometry.url})}throw new n("internal:geometry-service-url-not-configured")}r.create=l,r.projectGeometry=async function(e,r,t=null,o){const a=await l(t,o),c=new i;c.geometries=[e],c.outSpatialReference=r;const u=await a.project(c,{signal:o});if(u&&Array.isArray(u)&&1===u.length)return u[0];throw new n("internal:geometry-service-projection-failed")},Object.defineProperty(r,"__esModule",{value:!0})}));
