/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.21/esri/copyright.txt for details.
*/
define(["require","exports","../../chunks/_rollupPluginBabelHelpers","../../config","../../core/Error","../Portal","../../rest/support/ProjectParameters"],(function(e,r,t,n,o,i,l){"use strict";function u(e){return Object.freeze({__proto__:null,default:e})}function c(){return s.apply(this,arguments)}function s(){return(s=t._asyncToGenerator((function*(r=null,t){if(n.geometryServiceUrl){return new(0,(yield new Promise((function(r,t){e(["../../tasks/GeometryService"],(function(e){r(u(e))}),t)}))).default)({url:n.geometryServiceUrl})}if(!r)throw new o("internal:geometry-service-url-not-configured");let l;if(l="portal"in r?r.portal||i.getDefault():r,yield l.load({signal:t}),l.helperServices&&l.helperServices.geometry&&l.helperServices.geometry.url){return new(0,(yield new Promise((function(r,t){e(["../../tasks/GeometryService"],(function(e){r(u(e))}),t)}))).default)({url:l.helperServices.geometry.url})}throw new o("internal:geometry-service-url-not-configured")}))).apply(this,arguments)}function a(e,r){return f.apply(this,arguments)}function f(){return(f=t._asyncToGenerator((function*(e,r,t=null,n){const i=yield c(t,n),u=new l;u.geometries=[e],u.outSpatialReference=r;const s=yield i.project(u,{signal:n});if(s&&Array.isArray(s)&&1===s.length)return s[0];throw new o("internal:geometry-service-projection-failed")}))).apply(this,arguments)}r.create=c,r.projectGeometry=a,Object.defineProperty(r,"__esModule",{value:!0})}));
