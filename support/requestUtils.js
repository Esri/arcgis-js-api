/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.18/esri/copyright.txt for details.
*/
define(["exports","../core/has","../core/maybe","../core/promiseUtils"],(function(e,r,t,o){"use strict";function n(){try{return new DOMException("Aborted","AbortError")}catch{const e=new Error;return e.name="AbortError",e}}e.loadImageAsync=function(e,i,s=!1,c){return o.create(((d,a)=>{if(o.isAborted(c))return void a(n());let l=()=>{m(),a(new Error(`Unable to load ${i}`))},u=()=>{const r=e;m(),d(r)},v=()=>{if(!e)return;const r=e;m(),r.src="",a(n())};const m=()=>{r("esri-image-decode")||(e.removeEventListener("error",l),e.removeEventListener("load",u)),l=null,u=null,e=null,t.isSome(c)&&c.removeEventListener("abort",v),v=null,s&&URL.revokeObjectURL(i)};t.isSome(c)&&c.addEventListener("abort",v),r("esri-image-decode")?e.decode().then(u,l):(e.addEventListener("error",l),e.addEventListener("load",u))}))},Object.defineProperty(e,"__esModule",{value:!0})}));
