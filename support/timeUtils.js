/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.26/esri/copyright.txt for details.
*/
define(["exports","../chunks/_rollupPluginBabelHelpers","../TimeExtent","../core/maybe","../core/promiseUtils","../core/timeUtils"],(function(e,t,n,i,o,r){"use strict";function s(e){return void 0!==e.timeInfo}function f(e,t){return u.apply(this,arguments)}function u(){return u=t._asyncToGenerator((function*(e,r){if(0===e.length)return n.allTime;const f=e.filter(s);yield Promise.all(f.map((e=>e.load({signal:r}))));const u=[],a=[];for(const t of f)"feature"!==t?.type&&"map-image"!==t?.type||!t.timeInfo?.hasLiveData?a.push(t):u.push(t);const m=e=>i.isNone(e)||e.isAllTime,l=a.map((e=>e.timeInfo?.fullTimeExtent));if(l.some(m))return n.allTime;const c=u.map(function(){var e=t._asyncToGenerator((function*(e){const{timeExtent:t}=yield e.fetchRecomputedExtents({signal:r});return t||i.unwrap(e.timeInfo?.fullTimeExtent)}));return function(t){return e.apply(this,arguments)}}()),p=(yield o.eachAlways(c)).map((e=>e.value));if(p.some(m))return n.allTime;return[...p,...l].filter(i.isSome).reduce(((e,t)=>e.union(t)))})),u.apply(this,arguments)}function a(e){if(!e)return e;const{start:t,end:o}=e;return new n({start:i.isSome(t)?r.offsetDate(t,-t.getTimezoneOffset(),"minutes"):t,end:i.isSome(o)?r.offsetDate(o,-o.getTimezoneOffset(),"minutes"):o})}function m(e){if(!e)return e;const{start:t,end:o}=e;return new n({start:i.isSome(t)?r.offsetDate(t,t.getTimezoneOffset(),"minutes"):t,end:i.isSome(o)?r.offsetDate(o,o.getTimezoneOffset(),"minutes"):o})}e.getTimeExtentFromLayers=f,e.toLocalTimeExtent=m,e.toUTCTimeExtent=a,Object.defineProperty(e,Symbol.toStringTag,{value:"Module"})}));
