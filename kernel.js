/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
define(["require","exports","./chunks/_rollupPluginBabelHelpers","./core/has","./core/urlUtils","./support/revision"],(function(e,t,r,n,s,a){"use strict";const o=e=>Object.freeze({__proto__:null,default:e}),i="4.22",d={request:(t,n)=>r._asyncToGenerator((function*(){var r;const{default:a}=yield new Promise(((t,r)=>e(["./request"],(e=>t(o(e))),r))),i=t.options,d=i.responseType;i.signal=null==n?void 0:n.signal,i.responseType="native"===d||"native-request-init"===d?"native-request-init":["blob","json","text"].includes(d)&&null!=(r=s.getInterceptor(t.url))&&r.after?d:"array-buffer";const u=yield a(t.url,i),l={data:u.data,ssl:u.ssl};switch(u.requestOptions.responseType){case"native-request-init":return delete l.data.signal,l;case"blob":l.data=yield l.data.arrayBuffer();break;case"json":l.data=(new TextEncoder).encode(JSON.stringify(l.data)).buffer;break;case"text":l.data=(new TextEncoder).encode(l.data).buffer}return{result:l,transferList:[l.data]}}))()};function u(e){t.id=e}function l(e){const r=t.id&&t.id.findCredential(e);return r&&r.token?s.addQueryParameter(e,"token",r.token):e}t.id=void 0,n("host-webworker")||(n("edge")||n("trident"))&&console.warn("Deprecated browser - see http://esriurl.com/oldbrowser"),t.buildDate=a.buildDate,t.revision=a.commitHash,t.addTokenParameter=l,t.setId=u,t.version=i,t.workerMessages=d,Object.defineProperty(t,"__esModule",{value:!0})}));
