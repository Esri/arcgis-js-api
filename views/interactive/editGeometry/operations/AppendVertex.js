/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.26/esri/copyright.txt for details.
*/
define(["exports","../../../../core/maybe","../EditGeometry"],(function(e,t,i){"use strict";let s=function(){function e(e,t,i){this._editGeometry=e,this._component=t,this._pos=i,this._addedVertex=null,this._originalEdge=null,this._left=null,this._right=null}var s=e.prototype;return s.apply=function(){let e="redo";t.isNone(this._addedVertex)&&(e="apply",this._addedVertex=new i.Vertex(this._component));const s=this._component.getLastVertex();if(t.isNone(s))this._component.vertices.push(this._addedVertex),this._addedVertex.pos=this._pos,this._addedVertex.index=0;else{let e=null;s.rightEdge&&(this._originalEdge=s.rightEdge,e=this._originalEdge.rightVertex,this._component.edges.splice(this._component.edges.indexOf(this._originalEdge),1)),this._component.vertices.push(this._addedVertex),this._addedVertex.pos=this._pos,t.isNone(this._left)&&(this._left=new i.Edge(this._component,s,this._addedVertex)),this._component.edges.push(this._left),s.rightEdge=this._left,t.isSome(this._originalEdge)&&t.isSome(e)&&(t.isNone(this._right)&&(this._right=new i.Edge(this._component,this._addedVertex,e)),this._component.edges.push(this._right),e.leftEdge=this._right),this._component.updateVertexIndex(this._addedVertex,s.index+1)}this._editGeometry.notifyChanges({operation:e,addedVertices:[this._addedVertex]})},s.undo=function(){t.isNone(this._addedVertex)||(this._component.vertices.splice(this._component.vertices.indexOf(this._addedVertex),1),t.isSome(this._left)&&(this._component.edges.splice(this._component.edges.indexOf(this._left),1),this._left.leftVertex.rightEdge=null),t.isSome(this._right)&&(this._component.edges.splice(this._component.edges.indexOf(this._right),1),this._right.rightVertex.leftEdge=null),t.isSome(this._originalEdge)&&(this._component.edges.push(this._originalEdge),this._originalEdge.leftVertex.rightEdge=this._originalEdge,this._originalEdge.rightVertex.leftEdge=this._originalEdge),t.isSome(this._left)?this._component.updateVertexIndex(this._left.leftVertex,this._left.leftVertex.index):this._component.updateVertexIndex(this._addedVertex,0),this._editGeometry.notifyChanges({operation:"undo",removedVertices:[this._addedVertex]}))},s.accumulate=function(){return!1},e}();e.AppendVertex=s,Object.defineProperty(e,Symbol.toStringTag,{value:"Module"})}));
