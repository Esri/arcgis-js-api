/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.19/esri/copyright.txt for details.
*/
define(["exports","../../../../core/maybe","../EditGeometry"],(function(e,t,i){"use strict";let s=function(){function e(e,t,i){this.editGeometry=e,this.component=t,this.pos=i,this.addedVertex=null,this.originalEdge=null,this.left=null,this.right=null}var s=e.prototype;return s.apply=function(){let e="redo";if(t.isNone(this.addedVertex)&&(e="apply",this.addedVertex=new i.Vertex(this.component)),0===this.component.vertices.length)this.component.vertices.push(this.addedVertex),this.addedVertex.pos=this.pos,this.addedVertex.index=0;else{const e=t.unwrap(this.component.getLastVertex());let s=null;e.right&&(this.originalEdge=e.right,s=this.originalEdge.right,this.component.edges.splice(this.component.edges.indexOf(this.originalEdge),1)),this.component.vertices.push(this.addedVertex),this.addedVertex.pos=this.pos,t.isNone(this.left)&&(this.left=new i.Edge(this.component,e,this.addedVertex)),this.component.edges.push(this.left),e.right=this.left,t.isSome(this.originalEdge)&&t.isSome(s)&&(t.isNone(this.right)&&(this.right=new i.Edge(this.component,this.addedVertex,s)),this.component.edges.push(this.right),s.left=this.right),this.component.updateVertexIndex(this.addedVertex,e.index+1)}const s={addedVertices:[this.addedVertex],operation:e};this.editGeometry.emit("change",s)},s.undo=function(){if(t.isNone(this.addedVertex))return null;this.component.vertices.splice(this.component.vertices.indexOf(this.addedVertex),1),t.isSome(this.left)&&(this.component.edges.splice(this.component.edges.indexOf(this.left),1),this.left.left.right=null),t.isSome(this.right)&&(this.component.edges.splice(this.component.edges.indexOf(this.right),1),this.right.right.left=null),t.isSome(this.originalEdge)&&(this.component.edges.push(this.originalEdge),this.originalEdge.left.right=this.originalEdge,this.originalEdge.right.left=this.originalEdge),t.isSome(this.left)?this.component.updateVertexIndex(this.left.left,this.left.left.index):this.component.updateVertexIndex(this.addedVertex,0);const e={removedVertices:[this.addedVertex],operation:"undo"};this.editGeometry.emit("change",e)},s.accumulate=function(e){return!1},e}();e.AppendVertex=s,Object.defineProperty(e,"__esModule",{value:!0})}));
