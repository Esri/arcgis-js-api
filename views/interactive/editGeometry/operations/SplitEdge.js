/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.25/esri/copyright.txt for details.
*/
define(["exports","../../../../core/maybe","../EditGeometry"],(function(e,t,i){"use strict";let r=function(){function e(e,t,i){this._editGeometry=e,this._edge=t,this._t=i,this.createdVertex=null,this._left=null,this._right=null}var r=e.prototype;return r.apply=function(){let e="redo";const r=this._edge,s=r.component,d=r.leftVertex,h=r.rightVertex;s.edges.splice(s.edges.indexOf(r),1),t.isNone(this.createdVertex)&&(e="apply",this.createdVertex=new i.Vertex(r.component)),s.vertices.push(this.createdVertex),this.createdVertex.pos=this._editGeometry.coordinateHelper.lerp(r.leftVertex.pos,r.rightVertex.pos,this._t,this._editGeometry.coordinateHelper.createVector()),t.isNone(this._left)&&(this._left=new i.Edge(s,d,this.createdVertex)),this._left.leftVertex.leftEdge?s.edges.push(this._left):s.edges.unshift(this._left),d.rightEdge=this._left,t.isNone(this._right)&&(this._right=new i.Edge(s,this.createdVertex,h)),s.edges.push(this._right),h.leftEdge=this._right,s.updateVertexIndex(this.createdVertex,d.index+1),this._editGeometry.notifyChanges({operation:e,addedVertices:[this.createdVertex]})},r.undo=function(){if(t.isNone(this.createdVertex)||t.isNone(this._left)||t.isNone(this._right))return null;const e=this._edge,i=e.component,r=this.createdVertex.leftEdge,s=this.createdVertex.rightEdge,d=r?.leftVertex,h=s?.rightVertex;i.vertices.splice(i.vertices.indexOf(this.createdVertex),1),i.edges.splice(i.edges.indexOf(this._left),1),i.edges.splice(i.edges.indexOf(this._right),1),this._edge.leftVertex.leftEdge?i.edges.push(this._edge):i.edges.unshift(this._edge),d&&(d.rightEdge=e),h&&(h.leftEdge=e),d&&i.updateVertexIndex(d,d.index),this._editGeometry.notifyChanges({operation:"undo",removedVertices:[this.createdVertex]})},r.accumulate=function(){return!1},e}();e.SplitEdge=r,Object.defineProperties(e,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})}));
