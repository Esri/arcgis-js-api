/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.20/esri/copyright.txt for details.
*/
define(["exports","../../../chunks/_rollupPluginBabelHelpers","../../../core/Evented","./EditGeometry","./operations/AppendVertex","./operations/UpdateVertices","./operations/RemoveVertices","./operations/SplitEdge","./operations/MoveVertex","./operations/OffsetEdgeVertex","./operations/RotateVertex","./operations/ScaleVertex","./operations/UndoGroup"],(function(e,t,r,o,i,n,s,d,c,p,y,a,u){"use strict";let m=function(e){function r(t,r){var o;return(o=e.call(this)||this).editGeometry=t,o.type=r,o._geometry=null,o._dirty=!0,o._listener=o.editGeometry.on("change",(e=>{o._dirty=!0,e.addedVertices&&o.emit("vertex-add",{type:"vertex-add",vertices:e.addedVertices,operation:e.operation}),e.removedVertices&&o.emit("vertex-remove",{type:"vertex-remove",vertices:e.removedVertices,operation:e.operation}),e.updatedVertices&&o.emit("vertex-update",{type:"vertex-update",vertices:e.updatedVertices,operation:e.operation})})),o}t._inheritsLoose(r,e);var m=r.prototype;return m.destroy=function(){this._listener.remove()},m.splitEdge=function(e,t){return this.editGeometry.apply(new d.SplitEdge(this.editGeometry,e,t))},m.updateVertices=function(e,t,r=1){return this.editGeometry.apply(new n.UpdateVertices(this.editGeometry,e,t),r)},m.moveVertices=function(e,t,r,o,i=1){return this.updateVertices(e,new c.MoveVertex(this.editGeometry.coordinateHelper,t,r,o),i)},m.scaleVertices=function(e,t,r,o,i,n=1,s=0){return this.updateVertices(e,new a.ScaleVertex(this.editGeometry.coordinateHelper,t,r,o,i,s),n)},m.rotateVertices=function(e,t,r,o=1,i=0){return this.updateVertices(e,new y.RotateVertex(this.editGeometry.coordinateHelper,t,r,i),o)},m.removeVertices=function(e){return this.editGeometry.apply(new s.RemoveVertices(this.editGeometry,e,this._minNumVerticesPerType))},m.appendVertex=function(e){return 0===this.editGeometry.components.length?null:this.editGeometry.apply(new i.AppendVertex(this.editGeometry,this.editGeometry.components[0],e))},m.offsetEdge=function(e,t,r,o=1){return this.updateVertices([t.left,t.right],new p.OffsetEdgeVertex(this.editGeometry.coordinateHelper,e,t,r),o)},m.canRemoveVertex=function(){return this.editGeometry.components[0].vertices.length>this._minNumVerticesPerType},m.createUndoGroup=function(){const e=new u.UndoGroup;return this.editGeometry.apply(e),{remove:()=>e.close()}},m.undo=function(){return this.editGeometry.undo()},m.redo=function(){return this.editGeometry.redo()},r.fromGeometry=function(e,t){return new r(o.EditGeometry.fromGeometry(e,t),e.type)},t._createClass(r,[{key:"canUndo",get:function(){return this.editGeometry.canUndo}},{key:"canRedo",get:function(){return this.editGeometry.canRedo}},{key:"geometry",get:function(){if(this._dirty){switch(this.type){case"point":this._geometry=this.editGeometry.toPoint();break;case"polyline":this._geometry=this.editGeometry.toPolyline();break;case"polygon":this._geometry=this.editGeometry.toPolygon()}this._dirty=!1}return this._geometry}},{key:"_minNumVerticesPerType",get:function(){switch(this.type){case"point":return 1;case"polyline":return 2;case"polygon":return 3;default:return 0}}}]),r}(r);e.Component=o.Component,e.Edge=o.Edge,e.EditGeometry=o.EditGeometry,e.Vertex=o.Vertex,e.EditGeometryHelper=m,Object.defineProperty(e,"__esModule",{value:!0})}));
