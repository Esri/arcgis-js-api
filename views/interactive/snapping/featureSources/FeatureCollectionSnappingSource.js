/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.19/esri/copyright.txt for details.
*/
define(["exports","../../../../chunks/_rollupPluginBabelHelpers","../../../../chunks/tslib.es6","../../../../core/has","../../../../core/maybe","../../../../core/Logger","../../../../core/accessorSupport/ensureType","../../../../core/accessorSupport/decorators/property","../../../../core/accessorSupport/decorators/subclass","../../../../core/urlUtils","../../../../core/uuid","../../../../portal/support/resourceExtension","../../../../core/Accessor","../../../../geometry/Point","./queryEngineUtils"],(function(e,r,t,o,n,c,a,i,s,p,u,l,y,d,S){"use strict";e.FeatureCollectionSnappingSource=function(e){function t(r){return e.call(this,r)||this}r._inheritsLoose(t,e);var o=t.prototype;return o.refresh=function(){},o.fetchCandidates=async function(e,r){const t=this.layerSource.layer.source;if(!t.querySnapping)return{candidates:[]};const{candidates:o}=await t.querySnapping({distance:e.distance,point:e.coordinateHelper.toPoint(e.point,new d).toJSON(),types:e.types,query:n.isSome(e.filter)?e.filter.createQuery().toJSON():{where:"1=1"}},{signal:r});return{candidates:o.map((r=>S.convertSnappingCandidate(r,e.coordinateHelper)))}},r._createClass(t,[{key:"availability",get:function(){return 1}}]),t}(y),t.__decorate([i.property({constructOnly:!0})],e.FeatureCollectionSnappingSource.prototype,"layerSource",void 0),t.__decorate([i.property({readOnly:!0})],e.FeatureCollectionSnappingSource.prototype,"availability",null),e.FeatureCollectionSnappingSource=t.__decorate([s.subclass("esri.views.interactive.snapping.featureSources.FeatureCollectionSnappingSource")],e.FeatureCollectionSnappingSource),Object.defineProperty(e,"__esModule",{value:!0})}));
