/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.19/esri/copyright.txt for details.
*/
define(["exports","../../../chunks/_rollupPluginBabelHelpers","../../../core/maybe","../../../chunks/vec2f64","../../../chunks/vec2","./snappingUtils","./SnappingAlgorithm","../../support/geometry2dUtils","./candidates/RightAngleTriangleSnappingCandidate"],(function(e,t,n,i,o,r,s,p,a){"use strict";let c=function(e){function s(){return e.apply(this,arguments)||this}t._inheritsLoose(s,e);var c=s.prototype;return c.snapNewVertex=function(e,t){const n=t.geometry.editGeometry.components[0],i=[],o=n.vertices.length;if("polygon"!==t.geometry.type||o<2)return i;const r=n.vertices[0],s=n.vertices[o-1];return this._processCandidateProposal(r.pos,s.pos,e,t,i),i},c.snapExistingVertex=function(e,t){const i=[],o=n.unwrap(t.vertexHandle),r=o.component;return r.edges.length<2?i:"polyline"!==t.geometry.type||0!==o.index&&o.index!==r.vertices.length-1?(this._processCandidateProposal(o.left.left.pos,o.right.right.pos,e,t,i),i):i},c._processCandidateProposal=function(e,t,n,s,c){if(!this.exceedsShortLineThreshold(e,t,s))return;const l=o.lerp(i.create(),e,t,.5),g=.5*o.distance(e,t),d=p.projectPointToCircle(i.create(),n,l,g),h=s.coordinateHelper,u=h.fromXYZ(d,h.getZ(n,0)),f=r.anyMapPointToScreenPoint(n,h,s.elevationInfo,this.view);r.squareDistance(f,r.anyMapPointToScreenPoint(u,h,s.elevationInfo,this.view))<this.squaredProximityTreshold(s.pointer)&&c.push(new a.RightAngleTriangleSnappingCandidate({coordinateHelper:h,targetPoint:u,point1:e,point2:t}))},s}(s.SnappingAlgorithm);e.RightAngleTriangleSnapper=c,Object.defineProperty(e,"__esModule",{value:!0})}));
