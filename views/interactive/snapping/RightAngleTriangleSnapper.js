/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.23/esri/copyright.txt for details.
*/
define(["exports","../../../chunks/_rollupPluginBabelHelpers","../../../core/maybe","../../../chunks/vec2","../../../chunks/vec2f64","./SnappingAlgorithm","./snappingUtils","./candidates/RightAngleTriangleSnappingCandidate","../../support/geometry2dUtils"],(function(e,t,n,i,o,r,s,a,p){"use strict";let l=function(e){function r(){return e.apply(this,arguments)||this}t._inheritsLoose(r,e);var l=r.prototype;return l.snapNewVertex=function(e,t){const n=t.editGeometryOperations.data.components[0],i=[],o=n.vertices.length;if("polygon"!==t.editGeometryOperations.data.type||o<2)return i;const r=n.vertices[0],s=n.vertices[o-1];return this._processCandidateProposal(r.pos,s.pos,e,t,i),i},l.snapExistingVertex=function(e,t){const i=[],o=n.unwrap(t.vertexHandle),r=o.component;return r.edges.length<2?i:"polyline"!==t.editGeometryOperations.data.type||0!==o.index&&o.index!==r.vertices.length-1?(this._processCandidateProposal(o.leftEdge.leftVertex.pos,o.rightEdge.rightVertex.pos,e,t,i),i):i},l._processCandidateProposal=function(e,t,n,r,l){if(!this.exceedsShortLineThreshold(e,t,r))return;const c=i.lerp(o.create(),e,t,.5),d=.5*i.distance(e,t),g=p.projectPointToCircle(o.create(),n,c,d),h=r.coordinateHelper,u=h.fromXYZ(g,h.getZ(n,0)),f=s.anyMapPointToScreenPoint(n,h,r.elevationInfo,this.view);s.squareDistance(f,s.anyMapPointToScreenPoint(u,h,r.elevationInfo,this.view))<this.squaredProximityTreshold(r.pointer)&&l.push(new a.RightAngleTriangleSnappingCandidate({coordinateHelper:h,targetPoint:u,point1:e,point2:t}))},r}(r.SnappingAlgorithm);e.RightAngleTriangleSnapper=l,Object.defineProperties(e,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})}));
