/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.20/esri/copyright.txt for details.
*/
define(["exports","../../chunks/vec2","../../chunks/vec2f64","../../chunks/vec3","../../chunks/vec3f64","../../chunks/vec4","../../chunks/vec4f64","../../geometry/Point","../../geometry/support/spatialReferenceUtils"],(function(t,e,n,r,o,i,a,u,c){"use strict";const s=n.create();let f=function(){function t(t,e){this.spatialReference=t,this.viewingMode=e,this._unnormalizationInfo=d(t,e)}var r=t.prototype;return r.tag=function(t){return t},r.createNew=function(){return this.tag(n.create())},r.fromPoint=function(t){return this.tag(n.fromValues(t.x,t.y))},r.fromArray=function(t){return this.tag(n.fromValues(t[0],t[1]))},r.toArray=function(t){return[t[0],t[1]]},r.clone=function(t){return this.tag(n.fromArray(t))},r.copy=function(t,n){return e.copy(n,t)},r.toPoint=function(t,e){return e.x=t[0],e.y=t[1],e.hasZ=!1,e.hasM=!1,e.spatialReference=this.spatialReference,e},r.createPoint=function(t){return new u({x:t[0],y:t[1],z:void 0,m:void 0,spatialReference:this.spatialReference})},r.createPointFromArray=function(t){return new u({x:t[0],y:t[1],z:void 0,m:void 0,spatialReference:this.spatialReference})},r.createDehydratedPoint=function(t){return{x:t[0],y:t[1],z:void 0,m:void 0,hasZ:!1,hasM:!1,spatialReference:this.spatialReference,type:"point"}},r.lerp=function(t,n,r,o){return e.lerp(o,t,n,r)},r.addDelta=function(t,e,n){t[0]+=e,t[1]+=n},r.scale=function(t,n,r,o){const i=e.subtract(s,t,n),a=e.scale(s,r,e.dot(r,i));e.scaleAndAdd(t,t,a,o-1)},r.rotate=function(t,n,r){e.rotate(t,t,n,r)},r.pointToArray=function(t){return[t.x,t.y]},r.getZ=function(t,e){return e},r.hasZ=function(){return!1},r.getM=function(t,e){return e},r.hasM=function(){return!1},r.unnormalize=function(t){y(t,this._unnormalizationInfo)},r.fromXYZ=function(t){return this.tag(n.fromValues(t[0],t[1]))},r.toXYZ=function(t,e=0){return o.fromValues(t[0],t[1],e)},r.distance=function(t,n){return e.distance(t,n)},t}(),l=function(){function t(t,e,n){this.valueType=t,this.spatialReference=e,this._unnormalizationInfo=d(e,n)}var n=t.prototype;return n.distance=function(t,n){return 0===this.valueType?r.distance(t,n):e.distance(t,n)},n.tag=function(t){return t},n.createNew=function(){return this.tag(o.create())},n.fromPoint=function(t){return this.tag(o.fromValues(t.x,t.y,0===this.valueType?t.z:t.m))},n.fromArray=function(t){return this.tag(o.fromValues(t[0],t[1],t[2]||0))},n.toArray=function(t){return[t[0],t[1],t[2]]},n.clone=function(t){return this.tag(o.fromArray(t))},n.copy=function(t,e){return r.copy(e,t)},n.toPoint=function(t,e){return e.x=t[0],e.y=t[1],0===this.valueType?(e.z=t[2],e.hasZ=!0,e.hasM=!1):(e.m=t[2],e.hasZ=!1,e.hasM=!0),e.spatialReference=this.spatialReference,e},n.createPoint=function(t){return new u({x:t[0],y:t[1],z:0===this.valueType?t[2]:void 0,m:1===this.valueType?t[2]:void 0,spatialReference:this.spatialReference})},n.createPointFromArray=function(t){return new u({x:t[0],y:t[1],z:0===this.valueType?t[2]:void 0,m:1===this.valueType?t[2]:void 0,spatialReference:this.spatialReference})},n.createDehydratedPoint=function(t){const e=0===this.valueType,n=1===this.valueType;return{x:t[0],y:t[1],z:e?t[2]:void 0,m:n?t[2]:void 0,hasZ:e,hasM:n,spatialReference:this.spatialReference,type:"point"}},n.lerp=function(t,e,n,o){return r.lerp(o,t,e,n)},n.addDelta=function(t,e,n,r){t[0]+=e,t[1]+=n,0===this.valueType&&(t[2]+=r)},n.scale=function(t,n,r,o){const i=e.subtract(s,t,n),a=e.scale(s,r,e.dot(r,i));e.scaleAndAdd(t,t,a,o-1)},n.rotate=function(t,n,r){e.rotate(t,t,n,r)},n.pointToArray=function(t){return 0===this.valueType?[t.x,t.y,t.z]:[t.x,t.y,t.m]},n.getZ=function(t,e){return 0===this.valueType?t[2]:e},n.hasZ=function(){return 0===this.valueType},n.getM=function(t,e){return 1===this.valueType?t[2]:e},n.hasM=function(){return 1===this.valueType},n.unnormalize=function(t){y(t,this._unnormalizationInfo)},n.fromXYZ=function(t,e=0,n=0){return this.tag(o.fromValues(t[0],t[1],0===this.valueType?t.length>2?t[2]:e:n))},n.toXYZ=function(t,e=0){return this.tag(o.fromValues(t[0],t[1],0===this.valueType?t[2]:e))},t}(),p=function(){function t(t,e){this.spatialReference=t,this._unnormalizationInfo=d(t,e)}var n=t.prototype;return n.distance=function(t,e){return r.distance(t,e)},n.tag=function(t){return t},n.createNew=function(){return this.tag(a.create())},n.fromPoint=function(t){return this.tag(a.fromValues(t.x,t.y,t.z,t.m))},n.fromArray=function(t){return this.tag(a.fromValues(t[0],t[1],t[2]||0,t[3]||0))},n.toArray=function(t){return[t[0],t[1],t[2],t[3]]},n.clone=function(t){return this.tag(a.fromArray(t))},n.copy=function(t,e){return i.copy(e,t)},n.toPoint=function(t,e){return e.x=t[0],e.y=t[1],e.z=t[2],e.m=t[3],e.hasZ=!0,e.hasM=!0,e.spatialReference=this.spatialReference,e},n.createPoint=function(t){return new u({x:t[0],y:t[1],z:t[2],m:t[3],spatialReference:this.spatialReference})},n.createPointFromArray=function(t){return new u({x:t[0],y:t[1],z:t[2],m:t[3],spatialReference:this.spatialReference})},n.createDehydratedPoint=function(t){return{x:t[0],y:t[1],z:t[2],m:t[3],hasZ:!0,hasM:!0,spatialReference:this.spatialReference,type:"point"}},n.lerp=function(t,e,n,r){return i.lerp(r,t,e,n)},n.addDelta=function(t,e,n,r){t[0]+=e,t[1]+=n,t[2]+=r},n.scale=function(t,n,r,o){const i=e.subtract(s,t,n),a=e.scale(s,r,e.dot(r,i));e.scaleAndAdd(t,t,a,o-1)},n.rotate=function(t,n,r){e.rotate(t,t,n,r)},n.pointToArray=function(t){return[t.x,t.y,t.z,t.m]},n.getZ=function(t){return t[2]},n.hasZ=function(){return!0},n.getM=function(t){return t[3]},n.hasM=function(){return!0},n.unnormalize=function(t){y(t,this._unnormalizationInfo)},n.fromXYZ=function(t,e=0,n=0){return this.tag(a.fromValues(t[0],t[1],t.length>2?t[2]:e,n))},n.toXYZ=function(t){return o.fromValues(t[0],t[1],t[2])},t}();function h(t,e,n,r){return t&&e?new p(n,r):e?new l(1,n,r):t?new l(0,n,r):new f(n,r)}function y(t,e){if(!e.supported)return;let n=1/0,r=-1/0;const o=e.upperBoundX-e.lowerBoundX;t.forEach((t=>{let i=t.pos[0];for(;i<e.lowerBoundX;)i+=o;for(;i>e.upperBoundX;)i-=o;n=Math.min(n,i),r=Math.max(r,i),t.pos[0]=i}));const i=r-n;o-i<i&&t.forEach((t=>{t.pos[0]<0&&(t.pos[0]+=o)}))}function d(t,e){const n=c.getInfo(t);return"global"===e&&n?{supported:!0,lowerBoundX:n.valid[0],upperBoundX:n.valid[1]}:{supported:!1,lowerBoundX:null,upperBoundX:null}}t.CoordinateHelper2D=f,t.CoordinateHelper3D=l,t.CoordinateHelper4D=p,t.createCoordinateHelper=h,Object.defineProperty(t,"__esModule",{value:!0})}));
