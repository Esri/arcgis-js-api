/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.26/esri/copyright.txt for details.
*/
define(["exports","../../../core/screenUtils","../../../chunks/vec2","../../../chunks/vec3","../../../chunks/vec3f64","../../../layers/graphics/dehydratedFeatures","../../../support/elevationInfoUtils"],(function(e,r,t,n,o,c,a){"use strict";function i(e,r,n,o){n.projectToRenderScreen(e,v),n.projectToRenderScreen(r,y),t.subtract(o,y,v),t.normalize(o,o)}function d(e,r,t,n,c=o.create()){const i=r.toXYZ(e);return i[2]=a.getConvertedElevationFromVector(n,i,r.spatialReference,t)||0,n.renderCoordsHelper.toRenderCoords(i,r.spatialReference,c),c}function s(e,r,t,c,i=o.create()){const d=n.copy(R,e);return d[2]=a.getConvertedElevationFromVector(c,d,r,t)||0,c.renderCoordsHelper.toRenderCoords(d,r,i),i}function l(e,r,t,n){return p(r.toXYZ(e),r.spatialReference,t,n)}function p(e,t,n,o){return"2d"===o.type?(f.x=e[0],f.y=e[1],f.spatialReference=t,o.toScreen(f)):(s(e,t,n,o,R),o.state.camera.projectToScreen(R,S),r.createScreenPoint(S[0],S[1]))}function u(e,r,t,n,o,c,i){if("absolute-height"===n.mode)return d(e,t,n,o,c),void d(r,t,n,o,i);const s=t.toXYZ(e),l=t.toXYZ(r),p=a.getConvertedElevationFromVector(o,s,t.spatialReference,n),u=a.getConvertedElevationFromVector(o,l,t.spatialReference,n),f=(null==p?u:null==u?p:Math.min(p,u))||0;s[2]=f,l[2]=f,o.renderCoordsHelper.toRenderCoords(s,t.spatialReference,c),o.renderCoordsHelper.toRenderCoords(l,t.spatialReference,i)}const f=c.makeDehydratedPoint(0,0,0,null),R=o.create(),v=r.createRenderScreenPointArray3(),y=r.createRenderScreenPointArray3(),S=r.createScreenPointArray();e.anyMapPointToRender=d,e.anyMapPointToScreenPoint=l,e.anyMapPointsToRenderWithEqualRelativeZ=u,e.renderScreenSpaceTangent=i,e.vectorToRender=s,e.vectorToScreenPoint=p,Object.defineProperty(e,Symbol.toStringTag,{value:"Module"})}));
