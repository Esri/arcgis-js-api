/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.24/esri/copyright.txt for details.
*/
import{_ as t}from"../../../chunks/tslib.es6.js";import o from"../../../core/Accessor.js";import{applySome as e,isSome as n,destroyMaybe as i}from"../../../core/maybe.js";import{watch as s,syncAndInitial as r}from"../../../core/reactiveUtils.js";import{property as c}from"../../../core/accessorSupport/decorators/property.js";import"../../../core/arrayUtils.js";import"../../../core/has.js";import"../../../core/accessorSupport/ensureType.js";import{subclass as a}from"../../../core/accessorSupport/decorators/subclass.js";import{BASE as p}from"./css.js";import{tooltipContentFactory as d}from"./content/tooltipContentFactory.js";import{isRTL as l}from"../../../widgets/support/widgetUtils.js";const h={base:`${p}`};let m=class extends o{constructor(t){super(t),this.info=null,this._contentContainer=(()=>{const t=document.createElement("div");return t.classList.add(h.base),t})(),this._contentWidget=null}initialize(){const t=this._contentContainer;this.own([s((()=>this.view.overlay?.surface),(o=>{t.remove(),e(o,(o=>o.appendChild(t)))}),r),s((()=>this.info),((o,s)=>{n(this._contentWidget)&&n(o)&&n(s)&&o.type===s.type?this._contentWidget.info=o:(this._contentWidget=i(this._contentWidget),e(d(this,o),(o=>{this._contentWidget=o,t.appendChild(o.container)})))}),r),s((()=>({container:this._contentContainer,contentWidget:this._contentWidget,screenPoint:this.view.inputManager?.latestPointerLocation})),u,r)])}destroy(){this._contentWidget=i(this._contentWidget),this._contentContainer.remove()}clear(){this.info=null}get test(){return{contentContainer:this._contentContainer}}};function u({container:t,contentWidget:o,screenPoint:e}){const{style:i}=t;if(n(e)&&n(o)){i.display="block";const o=l(t),n=`translate(${Math.round(e.x)+f[0]*(o?-1:1)}px, ${Math.round(e.y)+f[1]}px)`;i.transform=o?`translate(-100%, 0) ${n}`:n}else i.display="none"}t([c({nonNullable:!0})],m.prototype,"view",void 0),t([c()],m.prototype,"info",void 0),t([c()],m.prototype,"_contentContainer",void 0),t([c()],m.prototype,"_contentWidget",void 0),m=t([a("esri.views.interactive.tooltip.Tooltip")],m);const f=[20,20];export{m as Tooltip};
