/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
define(["../../../chunks/_rollupPluginBabelHelpers","../../../chunks/tslib.es6","../../../geometry","../../../Graphic","../../../core/Collection","../../../core/Error","../../../core/Evented","../../../core/Handles","../../../core/Logger","../../../core/maybe","../../../core/promiseUtils","../../../core/watchUtils","../../../core/accessorSupport/decorators/property","../../../core/arrayUtils","../../../core/has","../../../core/accessorSupport/ensureType","../../../core/accessorSupport/decorators/subclass","../../../geometry/support/coordsUtils","../../../layers/GraphicsLayer","../../../symbols/SimpleMarkerSymbol","../../2d/interactive/SnappingVisualizer2D","./drawUtils","./GraphicMover","./layerUtils","./settings","../../input/InputManager","../../interactive/keybindings","../../interactive/editGeometry/EditGeometryOperations","../../interactive/snapping/SnappingContext","../../../geometry/Polyline","../../../geometry/Point"],(function(e,t,i,s,o,r,n,a,c,h,p,l,d,y,v,_,m,u,g,f,x,G,b,V,M,S,w,k,E,I,C){"use strict";let O=function(e,t,i){this.graphic=e,this.mover=t,this.selected=i,this.type="reshape-start"},R=function(e,t,i){this.graphic=e,this.mover=t,this.selected=i,this.type="reshape"},T=function(e,t,i){this.graphic=e,this.mover=t,this.selected=i,this.type="reshape-stop"},H=function(e,t,i){this.mover=e,this.dx=t,this.dy=i,this.type="move-start"},A=function(e,t,i){this.mover=e,this.dx=t,this.dy=i,this.type="move"},U=function(e,t,i){this.mover=e,this.dx=t,this.dy=i,this.type="move-stop"},D=function(e){this.added=e,this.type="vertex-select"},F=function(e){this.removed=e,this.type="vertex-deselect"},z=function(e,t,i,s){this.added=e,this.graphic=t,this.oldGraphic=i,this.vertices=s,this.type="vertex-add"},L=function(e,t,i,s){this.removed=e,this.graphic=t,this.oldGraphic=i,this.vertices=s,this.type="vertex-remove"};const P=M.settings.reshapeGraphics,N={vertices:{default:new f({style:"circle",size:P.vertex.size,color:P.vertex.color,outline:{color:P.vertex.outlineColor,width:1}}),hover:new f({style:"circle",size:P.vertex.hoverSize,color:P.vertex.hoverColor,outline:{color:P.vertex.hoverOutlineColor,width:1}}),selected:new f({style:"circle",size:P.selected.size,color:P.selected.color,outline:{color:P.selected.outlineColor,width:1}})},midpoints:{default:new f({style:"circle",size:P.midpoint.size,color:P.midpoint.color,outline:{color:P.midpoint.outlineColor,width:1}}),hover:new f({style:"circle",size:P.midpoint.size,color:P.midpoint.color,outline:{color:P.midpoint.outlineColor,width:1}})}},K="esri.views.draw.support.Reshape",q=c.getLogger(K);let B=function(t){function i(e){var i;return(i=t.call(this,e)||this)._activeOperationInfo=null,i._editGeometryOperations=null,i._handles=new a,i._graphicAttributes={esriSketchTool:"box"},i._mover=null,i._snappingTask=null,i._stagedVertex=null,i._viewHandles=new a,i.callbacks={onReshapeStart(){},onReshape(){},onReshapeStop(){},onMoveStart(){},onMove(){},onMoveStop(){},onGraphicClick(){}},i.enableMidpoints=!0,i.enableMovement=!0,i.enableVertices=!0,i.graphic=null,i.vertexGraphics=new o,i.layer=null,i.midpointGraphics=new o,i.midpointSymbol=new f({style:"circle",size:6,color:[200,200,200],outline:{color:[100,100,100],width:1}}),i.selectedVertices=[],i.snappingManager=null,i.type="reshape",i.view=null,i}e._inheritsLoose(i,t);var n=i.prototype;return n.initialize=function(){this._setup(),this._handles.add([l.whenOnce(this,"view.ready",(()=>{const{layer:e,view:t}=this;V.addUniqueLayer(t,e),this._viewHandles.add([t.on("key-down",(e=>this._keyDownHandler(e)),S.ViewEventPriorities.TOOL)])})),l.pausable(this,"graphic",(()=>this.refresh())),l.pausable(this,"layer",((e,t)=>{t&&(this._clearSelection(),this._resetGraphics(t)),this.refresh()})),l.pausable(this,"enableMidpoints",(()=>{this.refresh()}))])},n.destroy=function(){var e;this._reset(),null==(e=this._mover)||e.destroy(),this._mover=null,this._handles=h.destroyMaybe(this._handles),this._viewHandles=h.destroyMaybe(this._viewHandles)},n.isUIGraphic=function(e){const t=[];return this.graphic&&t.push(this.graphic),t.concat(this.vertexGraphics.items,this.midpointGraphics.items),t.length&&t.includes(e)},n.refresh=function(){this._reset(),this._setup()},n.reset=function(){this.graphic=null},n.clearSelection=function(){this._clearSelection()},n.removeSelectedVertices=function(){this.selectedVertices.length&&this._removeVertices(this.selectedVertices)},n._setup=function(){const{graphic:e,layer:t}=this;if(!t||!e||h.isNone(e.geometry))return;const i=e.geometry;"mesh"!==i.type&&"extent"!==i.type?(this._setupGraphics(),this._setupMover()):this._logGeometryTypeError()},n._setUpGeometryHelper=function(){const e=this.graphic.geometry;if(h.isNone(e)||"mesh"===e.type||"extent"===e.type)return void this._logGeometryTypeError();const t="multipoint"===e.type?new I({paths:e.points,spatialReference:e.spatialReference}):e;this._editGeometryOperations=k.EditGeometryOperations.fromGeometry(t,2)},n._saveSnappingContextForHandle=function(e,t){var i;this._snappingGraphicsLayer=new g({listMode:"hide",internal:!0,title:"Reshape snapping layer"}),this.view.map.layers.add(this._snappingGraphicsLayer),this._snappingContext=new E.SnappingContext({editGeometryOperations:this._editGeometryOperations,elevationInfo:{mode:"on-the-ground",offset:0},pointer:(null==(i=t.viewEvent)?void 0:i.pointerType)||"mouse",excludeFeature:this.graphic,visualizer:new x.SnappingVisualizer2D(this._snappingGraphicsLayer),vertexHandle:this._getVertexFromEditGeometry(e)})},n._reset=function(){this._clearSelection(),this._resetGraphics(),this._resetSnappingStateVars(),this._activeOperationInfo=null,this._mover&&this._mover.destroy(),this._mover=null,this.view.cursor="default"},n._resetSnappingStateVars=function(){h.isSome(this.snappingManager)&&this.snappingManager.doneSnapping(),h.isSome(this._snappingGraphicsLayer)&&(this.view.map.layers.remove(this._snappingGraphicsLayer),this._snappingGraphicsLayer.destroy()),this._editGeometryOperations=h.destroyMaybe(this._editGeometryOperations),this._snappingTask=h.abortMaybe(this._snappingTask),this._snappingTask=null,this._snappingContext=null,this._stagedVertex=null},n._resetGraphics=function(e){this._removeMidpointGraphics(e),this._removeVertexGraphics(e),this._set("selectedVertices",[])},n._removeMidpointGraphics=function(e){const t=e||this.layer;t&&t.removeMany(this.midpointGraphics.items),this.midpointGraphics.items.forEach((e=>e.destroy())),this.midpointGraphics.removeAll()},n._removeVertexGraphics=function(e){const t=e||this.layer;t&&t.removeMany(this.vertexGraphics.items),this.vertexGraphics.items.forEach((e=>e.destroy())),this.vertexGraphics.removeAll()},n._getCoordinatesForUI=function(e){const t=u.geometryToCoordinates(e.clone());if("polygon"===e.type)for(const i of t){const e=i[i.length-1];i[0][0]===e[0]&&i[0][1]===e[1]&&i.length>2&&i.pop()}return t},n._setupGraphics=function(){const e=this.graphic.geometry;if(h.isSome(e)&&("polyline"===e.type||"polygon"===e.type)){const t=this._getCoordinatesForUI(e);this.enableMidpoints&&this._setUpMidpointGraphics(t),this.enableVertices&&this._setUpVertexGraphics(t)}},n._setUpMidpointGraphics=function(e){this._removeMidpointGraphics();const t=this._createMidpointGraphics(e);this.midpointGraphics.addMany(t),this.layer.addMany(t)},n._setUpVertexGraphics=function(e){this._removeVertexGraphics();const t=this._createVertexGraphics(e);this.vertexGraphics.addMany(t),this._storeRelatedVertexIndices(),this.layer.addMany(t)},n._createVertexGraphics=function(e){const{_graphicAttributes:t,symbols:i,view:{spatialReference:o}}=this,r=[];return null==e||e.forEach(((e,n)=>{e.forEach(((e,a)=>{var c;const[h,p]=e;r.push(new s({geometry:new C({x:h,y:p,spatialReference:o}),symbol:null==i||null==(c=i.vertices)?void 0:c.default,attributes:{...t,pathIndex:n,pointIndex:a}}))}))})),r},n._createMidpointGraphics=function(e){const{_graphicAttributes:t,symbols:i,view:{spatialReference:o}}=this,r=[];return null==e||e.forEach(((e,n)=>{e.forEach(((a,c)=>{const[p,l]=a,d=e[c+1]?c+1:0;if("polygon"===h.get(this.graphic.geometry,"type")||0!==d){const[a,h]=e[d],[y,v]=u.getMidpoint([p,l],[a,h]);r.push(new s({geometry:new C({x:y,y:v,spatialReference:o}),symbol:i.midpoints.default,attributes:{...t,pathIndex:n,pointIndexStart:c,pointIndexEnd:d}}))}}))})),r},n._storeRelatedVertexIndices=function(){const e=this.vertexGraphics.items;if(!e)return;const t=e.map((({geometry:e})=>({x:e.x,y:e.y})));for(let i=0;i<t.length;i++){const s=[];for(let e=0;e<t.length;e++){if(i===e)continue;const o=t[i],r=t[e];o.x===r.x&&o.y===r.y&&s.push(e)}e[i].attributes.relatedGraphicIndices=s}},n._setupMover=function(){const{enableMovement:e,graphic:t,midpointGraphics:i,vertexGraphics:s,view:o}=this,r=h.get(t.geometry,"type"),n="point"===r||"multipoint"===r,a=s.concat(i).items;e&&a.push(t),this._mover=new b({enableMoveAllGraphics:!1,indicatorsEnabled:n,graphics:a,view:o,callbacks:{onGraphicClick:e=>this._onGraphicClickCallback(e),onGraphicMoveStart:e=>this._onGraphicMoveStartCallback(e),onGraphicMove:e=>this._onGraphicMoveCallback(e),onGraphicMoveStop:e=>this._onGraphicMoveStopCallback(e),onGraphicPointerOver:e=>this._onGraphicPointerOverCallback(e),onGraphicPointerOut:e=>this._onGraphicPointerOutCallback(e)}})},n._onGraphicClickCallback=function(e){e.viewEvent.stopPropagation();const t=e.graphic;if(t===this.graphic)this.clearSelection(),this.emit("graphic-click",e),this.callbacks.onGraphicClick&&this.callbacks.onGraphicClick(e);else if(this._isMidpoint(t)){if(2===e.viewEvent.button)return;const i=this.graphic.clone(),s=this._createVertexFromMidpoint(t);this.refresh(),this._emitVertexAddEvent([t],i,s)}else if(this._isVertex(t))if(e.viewEvent.stopPropagation(),2===e.viewEvent.button)this._removeVertices(t);else{e.viewEvent.native.shiftKey||this._clearSelection(),this.selectedVertices.includes(t)?this._removeFromSelection(t,!0):this._addToSelection(t)}},n._setUpOperation=function(e){const{graphic:t,dx:i,dy:s}=e,o=t===this.graphic;this._resetSnappingStateVars(),this._setUpGeometryHelper(),this._saveSnappingContextForHandle(t,e),this._activeOperationInfo={target:this.graphic,mover:t,operationType:o?"move":"reshape",totalDx:i,totalDy:s}},n._onGraphicMoveStartCallback=function(e){const t=e.graphic,{dx:i,dy:s}=e;if(t===this.graphic)return this._clearSelection(),this._resetGraphics(),this._setUpOperation(e),this._emitMoveStartEvent(i,s),void("point"===this._editGeometryOperations.data.type&&this._onHandleMove(t,i,s,e,(()=>this._emitMoveEvent(i,s))));if(!this.selectedVertices.includes(t)){if(this._clearSelection(),this._isMidpoint(t)){const e=this.graphic.clone(),i=this._createVertexFromMidpoint(t);this._emitVertexAddEvent([t],e,i)}this._addToSelection(t)}this._setUpOperation(e),this._emitReshapeStartEvent(t),this._onHandleMove(t,i,s,e,(()=>this._emitReshapeEvent(t)))},n._onGraphicMoveCallback=function(e){const{graphic:t,dx:i,dy:s}=e;this._activeOperationInfo.totalDx+=i,this._activeOperationInfo.totalDy+=s;const{operationType:o}=this._activeOperationInfo;"move"===o?"point"===this._editGeometryOperations.data.type?this._onHandleMove(t,i,s,e,(()=>this._emitMoveEvent(i,s))):this._emitMoveEvent(i,s):this._onHandleMove(t,i,s,e,(()=>this._emitReshapeEvent(t)))},n._onGraphicMoveStopCallback=function(e){const{graphic:t,dx:i,dy:s}=e;this._activeOperationInfo.totalDx+=i,this._activeOperationInfo.totalDy+=s,t===this.graphic?(this._emitMoveStopEvent(),this.refresh()):(this._onHandleMove(t,i,s,e,(()=>this._emitReshapeStopEvent(t))),this._resetSnappingStateVars(),this._activeOperationInfo=null,this._isMidpoint(t)&&this.refresh())},n._updateMidpointGraphicLocations=function(e){for(const t of this.midpointGraphics){const{pathIndex:i,pointIndexStart:s,pointIndexEnd:o}=t.attributes,[r,n]=e[i][s],[a,c]=e[i][o],[h,p]=u.getMidpoint([r,n],[a,c]);t.geometry=new C({x:h,y:p,spatialReference:this.view.spatialReference})}},n._getIndicesForVertexGraphic=function({attributes:e}){return[(null==e?void 0:e.pathIndex)||0,(null==e?void 0:e.pointIndex)||0]},n._getVertexFromEditGeometry=function(e){const[t,i]=this._getIndicesForVertexGraphic(e);return this._editGeometryOperations.data.components[t].vertices[i]},n._onHandleMove=function(t,i,s,o,r){var n=this;if(h.abortMaybe(this._snappingTask),!this._snappingContext)return;const a=t.geometry,c="graphic-move-stop"===o.type;if(h.isSome(this.snappingManager)&&this.selectedVertices.length<2&&!c){const o=this.snappingManager;this._stagedVertex=o.update(a,this._snappingContext),this._syncGeometryAfterVertexMove(t,new C(this._stagedVertex),i,s,c),r(),this._snappingTask=p.createTask(function(){var h=e._asyncToGenerator((function*(e){const h=yield o.snap(a,n._snappingContext,e);h.valid&&(n._stagedVertex=h.apply(),n._syncGeometryAfterVertexMove(t,new C(n._stagedVertex),i,s,c),r())}));return function(e){return h.apply(this,arguments)}}())}else{const e=h.isSome(this._stagedVertex)?new C(this._stagedVertex):a;this._syncGeometryAfterVertexMove(t,e,i,s,c),r()}},n._syncGeometryAfterVertexMove=function(){var t=e._asyncToGenerator((function*(e,t,i,s,o=!1){const r=this._editGeometryOperations.data.geometry;if("point"===r.type)e.geometry=t;else{const{x:n,y:a}=t,[c,h]=this._getIndicesForVertexGraphic(e);let p=u.geometryToCoordinates(r);const l=p[c].length-1;p[c][h]=[n,a],"polygon"===r.type&&(0===h?p[c][l]=[n,a]:h===l&&(p[c][0]=[n,a])),this._isVertex(e)&&(p=this._moveRelatedCoordinates(p,e,n,a),p=this._moveSelectedHandleCoordinates(p,e,i,s,"polygon"===r.type),this._updateMidpointGraphicLocations(p)),this.graphic.geometry=r.clone();const d=this._getVertexFromEditGeometry(e),y=n-d.pos[0],v=a-d.pos[1];this._editGeometryOperations.moveVertices([d],y,v,0),o&&(this._mover?this._mover.updateGeometry(this._mover.graphics.indexOf(e),t):e.geometry=t)}}));function i(e,i,s,o){return t.apply(this,arguments)}return i}(),n._moveRelatedCoordinates=function(e,t,i,s){const{relatedGraphicIndices:o}=t.attributes;for(const r of o){const o=this.vertexGraphics.getItemAt(r),{pathIndex:n,pointIndex:a}=o.attributes;e[n][a]=[i,s],o.geometry=t.geometry}return e},n._moveSelectedHandleCoordinates=function(e,t,i,s,o){for(const r of this.selectedVertices)if(r!==t){const{pathIndex:t,pointIndex:n,relatedGraphicIndices:a}=r.attributes,c=G.cloneMove(r.geometry,i,s,this.view),h=e[t].length-1;e[t][n]=[c.x,c.y],r.geometry=c,o&&(0===n?e[t][h]=[c.x,c.y]:n===h&&(e[t][0]=[c.x,c.y]));for(const i of a){const t=this.vertexGraphics.getItemAt(i),{pathIndex:s,pointIndex:o}=t.attributes;e[s][o]=[c.x,c.y],t.geometry=c}}return e},n._onGraphicPointerOverCallback=function(e){const t=e.graphic;this._isVertex(t)&&!this._isSelected(t)&&(t.symbol=this.symbols.vertices.hover),this._updateHoverCursor(t)},n._onGraphicPointerOutCallback=function(e){const t=e.graphic;this._isVertex(t)&&!this._isSelected(t)&&(t.symbol=this.symbols.vertices.default),this.view.cursor="default"},n._createVertexFromMidpoint=function(e){const{_graphicAttributes:t,graphic:i}=this,s=i.geometry;if(h.isNone(s)||"polygon"!==s.type&&"polyline"!==s.type)return[];const o=s.clone(),r=[],{pathIndex:n,pointIndexStart:a,pointIndexEnd:c}=e.attributes,{x:p,y:l}=e.geometry,d=0===c?a+1:c,y=u.geometryToCoordinates(o);return y[n].splice(d,0,[p,l]),e.attributes={...t,pathIndex:n,pointIndex:d,relatedGraphicIndices:[]},r.push({coordinates:y[n][d],componentIndex:n,vertexIndex:d}),this.graphic.geometry=o,r},n._addToSelection=function(e){e instanceof s&&(e=[e]);for(const t of e)t.symbol=this.symbols.vertices.selected;this._set("selectedVertices",this.selectedVertices.concat(e)),this._emitSelectEvent(e)},n._removeFromSelection=function(e,t){const{vertices:i}=this.symbols,o=t?i.hover:i.default;e instanceof s&&(e=[e]);for(const s of e)this.selectedVertices.splice(this.selectedVertices.indexOf(s),1),this._set("selectedVertices",this.selectedVertices),s.set("symbol",o);this._emitDeselectEvent(e)},n._clearSelection=function(){if(this.selectedVertices.length){const e=this.selectedVertices;for(const t of this.selectedVertices)t.set("symbol",this.symbols.vertices.default);this._set("selectedVertices",[]),this._emitDeselectEvent(e)}},n._keyDownHandler=function(e){w.SKETCH_KEYS.delete.includes(e.key)&&!e.repeat&&this.selectedVertices.length&&this._removeVertices(this.selectedVertices)},n._removeVertices=function(e){const t=this.graphic.geometry;if(h.isNone(t)||"polygon"!==t.type&&"polyline"!==t.type)return;if("polygon"===t.type&&this.vertexGraphics.length<4||this.vertexGraphics.length<3)return;e instanceof s&&(e=[e]);const i=this.graphic.clone(),o=t.clone();let r=u.geometryToCoordinates(o);const n=[];e instanceof s&&(e=[e]);for(const s of e){const{x:e,y:t}=s.geometry;for(let i=0;i<r.length;i++){const s=r[i];for(let o=0;o<s.length;o++){const[a,c]=s[o];e===a&&t===c&&(n.push({coordinates:r[i][o],componentIndex:i,vertexIndex:o}),r[i].splice(Number(o),1))}}}if("polygon"===o.type)r=r.filter((e=>{if(e.length<2)return!1;const[t,i]=e[0],[s,o]=e[e.length-1];return(2!==e.length||t!==s||i!==o)&&(t===s&&i===o||e.push(e[0]),!0)})),o.rings=r;else{for(const e of r)1===e.length&&r.splice(r.indexOf(e),1);o.paths=r}this.graphic.geometry=o,this.refresh(),this._emitVertexRemoveEvent(e,i,n)},n._isVertex=function(e){return this.vertexGraphics.includes(e)},n._isSelected=function(e){return this._isVertex(e)&&this.selectedVertices.includes(e)},n._isMidpoint=function(e){return this.midpointGraphics.includes(e)},n._updateHoverCursor=function(e){this.view.cursor=this._isMidpoint(e)?"copy":"move"},n._emitMoveStartEvent=function(e,t){const i=new H(this.graphic,e,t);this.emit("move-start",i),this.callbacks.onMoveStart&&this.callbacks.onMoveStart(i)},n._emitMoveEvent=function(e,t){const i=new A(this.graphic,e,t);this.emit("move",i),this.callbacks.onMove&&this.callbacks.onMove(i)},n._emitMoveStopEvent=function(){const{totalDx:e,totalDy:t}=this._activeOperationInfo,i=new U(this.graphic,e,t);this.emit("move-stop",i),this.callbacks.onMoveStop&&this.callbacks.onMoveStop(i)},n._emitReshapeStartEvent=function(e){const t=new O(this.graphic,e,this.selectedVertices);this.emit("reshape-start",t),this.callbacks.onReshapeStart&&this.callbacks.onReshapeStart(t)},n._emitReshapeEvent=function(e){const t=new R(this.graphic,e,this.selectedVertices);this.emit("reshape",t),this.callbacks.onReshape&&this.callbacks.onReshape(t)},n._emitReshapeStopEvent=function(e){const t=new T(this.graphic,e,this.selectedVertices);this.emit("reshape-stop",t),this.callbacks.onReshapeStop&&this.callbacks.onReshapeStop(t)},n._emitSelectEvent=function(e){const t=new D(e);this.emit("select",t),this.callbacks.onVertexSelect&&this.callbacks.onVertexSelect(t)},n._emitDeselectEvent=function(e){const t=new F(e);this.emit("deselect",t),this.callbacks.onVertexDeselect&&this.callbacks.onVertexDeselect(t)},n._emitVertexAddEvent=function(e,t,i){const s=new z(e,this.graphic,t,i);this.emit("vertex-add",s),this.callbacks.onVertexAdd&&this.callbacks.onVertexAdd(s)},n._emitVertexRemoveEvent=function(e,t,i){const s=new L(e,this.graphic,t,i);this.emit("vertex-remove",s),this.callbacks.onVertexRemove&&this.callbacks.onVertexRemove(s)},n._logGeometryTypeError=function(){q.error(new r("reshape:invalid-geometry","Reshape operation not supported for the provided graphic. The geometry type is not supported."))},e._createClass(i,[{key:"state",get:function(){const e=!!this.get("view.ready"),t=!(!this.get("graphic")||!this.get("layer"));return e&&t?"active":e?"ready":"disabled"}},{key:"symbols",set:function(e){const{midpoints:t=N.midpoints,vertices:i=N.vertices}=e||{};this._set("symbols",{midpoints:t,vertices:i})}}]),i}(n.EventedAccessor);t.__decorate([d.property()],B.prototype,"callbacks",void 0),t.__decorate([d.property()],B.prototype,"enableMidpoints",void 0),t.__decorate([d.property()],B.prototype,"enableMovement",void 0),t.__decorate([d.property()],B.prototype,"enableVertices",void 0),t.__decorate([d.property()],B.prototype,"graphic",void 0),t.__decorate([d.property({readOnly:!0})],B.prototype,"vertexGraphics",void 0),t.__decorate([d.property()],B.prototype,"layer",void 0),t.__decorate([d.property({readOnly:!0})],B.prototype,"midpointGraphics",void 0),t.__decorate([d.property()],B.prototype,"midpointSymbol",void 0),t.__decorate([d.property({readOnly:!0})],B.prototype,"selectedVertices",void 0),t.__decorate([d.property()],B.prototype,"snappingManager",void 0),t.__decorate([d.property({readOnly:!0})],B.prototype,"state",null),t.__decorate([d.property({value:N})],B.prototype,"symbols",null),t.__decorate([d.property({readOnly:!0})],B.prototype,"type",void 0),t.__decorate([d.property()],B.prototype,"view",void 0),B=t.__decorate([m.subclass(K)],B);return B}));
