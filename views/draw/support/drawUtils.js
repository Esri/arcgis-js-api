/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.20/esri/copyright.txt for details.
*/
define(["exports","../../../geometry/support/aaBoundingRect","../../../geometry/support/boundsUtils","../../../geometry/support/coordsUtils"],(function(t,n,e,o){"use strict";function s(t,n,e,s){if(null==s||t.hasZ||(s=void 0),"point"===t.type)return t.x+=n,t.y+=e,t.hasZ&&null!=s&&(t.z+=s),t;if("multipoint"===t.type){const o=t.points;for(let t=0;t<o.length;t++)o[t]=m(o[t],n,e,s);return t}if("extent"===t.type)return t.xmin+=n,t.xmax+=n,t.ymin+=e,t.ymax+=e,null!=s&&(t.zmin+=s,t.zmax+=s),t;const r=o.geometryToCoordinates(t),i="polyline"===t.type?t.paths:t.rings;for(let o=0;o<r.length;o++){const t=r[o];for(let o=0;o<t.length;o++)t[o]=m(t[o],n,e,s)}return"paths"in t?t.paths=i:t.rings=i,t}function r(t,n,e,r,i){const a=t.clone(),l=r.resolution;if("point"===a.type){if(i)s(a,n*l,-e*l);else{const t=r.state.transform,o=r.state.inverseTransform,s=t[0]*a.x+t[2]*a.y+t[4],i=t[1]*a.x+t[3]*a.y+t[5];a.x=o[0]*(s+n)+o[2]*(i+e)+o[4],a.y=o[1]*(s+n)+o[3]*(i+e)+o[5]}return a}if("multipoint"===a.type){if(i)s(a,n*l,-e*l);else{const t=a.points,o=r.state.transform,s=r.state.inverseTransform;for(let r=0;r<t.length;r++){const i=t[r],a=o[0]*i[0]+o[2]*i[1]+o[4],l=o[1]*i[0]+o[3]*i[1]+o[5],m=s[0]*(a+n)+s[2]*(l+e)+s[4],y=s[1]*(a+n)+s[3]*(l+e)+s[5];t[r]=x(i,m,y,void 0)}}return a}if("extent"===a.type){if(i)s(a,n*l,-e*l);else{const t=r.state.transform,o=r.state.inverseTransform,s=t[0]*a.xmin+t[2]*a.ymin+t[4],i=t[1]*a.xmin+t[3]*a.ymin+t[5],l=t[0]*a.xmax+t[2]*a.ymax+t[4],m=t[1]*a.xmax+t[3]*a.ymax+t[5];a.xmin=o[0]*(s+n)+o[2]*(i+e)+o[4],a.ymin=o[1]*(s+n)+o[3]*(i+e)+o[5],a.xmax=o[0]*(l+n)+o[2]*(m+e)+o[4],a.ymax=o[1]*(l+n)+o[3]*(m+e)+o[5]}return a}if(i)s(a,n*l,-e*l);else{const t=o.geometryToCoordinates(a),s="polyline"===a.type?a.paths:a.rings,i=r.state.transform,l=r.state.inverseTransform;for(let o=0;o<t.length;o++){const s=t[o];for(let t=0;t<s.length;t++){const o=s[t],r=i[0]*o[0]+i[2]*o[1]+i[4],a=i[1]*o[0]+i[3]*o[1]+i[5],m=l[0]*(r+n)+l[2]*(a+e)+l[4],y=l[1]*(r+n)+l[3]*(a+e)+l[5];s[t]=x(o,m,y,void 0)}}"paths"in a?a.paths=s:a.rings=s}return a}function i(t,s,r,i){if("point"===t.type){const{x:n,y:e}=t,o=i?i[0]:n,a=i?i[1]:e,l=t.clone(),m=(n-o)*s+o,x=(e-a)*r+a;return l.x=m,l.y=x,l}if("multipoint"===t.type){const a=o.geometryToCoordinates(t),l=n.create(),[m,y,u,c]=e.getRingsOrPathsBounds(l,[a]),p=i?i[0]:(m+u)/2,f=i?i[1]:(c+y)/2,g=t.clone(),h=g.points;for(let t=0;t<h.length;t++){const n=h[t],[e,o]=n,i=(e-p)*s+p,a=(o-f)*r+f;h[t]=x(n,i,a,void 0)}return g}if("extent"===t.type){const{xmin:n,xmax:e,ymin:o,ymax:a}=t,l=i?i[0]:(n+e)/2,m=i?i[1]:(a+o)/2,x=t.clone();if(x.xmin=(n-l)*s+l,x.ymax=(a-m)*r+m,x.xmax=(e-l)*s+l,x.ymin=(o-m)*r+m,x.xmin>x.xmax){const t=x.xmin,n=x.xmax;x.xmin=n,x.xmax=t}if(x.ymin>x.ymax){const t=x.ymin,n=x.ymax;x.ymin=n,x.ymax=t}return x}const a=o.geometryToCoordinates(t),l=n.create(),[m,y,u,c]=e.getRingsOrPathsBounds(l,a),p=i?i[0]:(m+u)/2,f=i?i[1]:(c+y)/2,g=t.clone(),h="polyline"===g.type?g.paths:g.rings;for(let n=0;n<a.length;n++){const t=a[n];for(let e=0;e<t.length;e++){const o=t[e],[i,a]=o,l=(i-p)*s+p,m=(a-f)*r+f;h[n][e]=x(o,l,m,void 0)}}return"paths"in g?g.paths=h:g.rings=h,g}function a(t,n,e,o,s,r){const i=Math.sqrt((e-t)*(e-t)+(o-n)*(o-n));return Math.sqrt((s-t)*(s-t)+(r-n)*(r-n))/i}function l(t,n,e,o,s,r){const i=180*Math.atan2(n-o,t-e)/Math.PI;return 180*Math.atan2(n-r,t-s)/Math.PI-i}function m(t,n,e,o){return x(t,t[0]+n,t[1]+e,null!=t[2]&&null!=o?t[2]+o:void 0)}function x(t,n,e,o){const s=[n,e];return t.length>2&&s.push(null!=o?o:t[2]),t.length>3&&s.push(t[3]),s}t.cloneMove=r,t.getRotationAngle=l,t.getScaleRatio=a,t.move=s,t.scale=i,Object.defineProperty(t,"__esModule",{value:!0})}));
