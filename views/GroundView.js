/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.18/esri/copyright.txt for details.
*/
define(["../chunks/_rollupPluginBabelHelpers","../chunks/tslib.es6","../core/has","../core/Logger","../core/accessorSupport/ensureType","../core/accessorSupport/decorators/property","../core/accessorSupport/decorators/subclass","../core/urlUtils","../core/uuid","../portal/support/resourceExtension","../core/Accessor","../core/Collection","../core/Handles","../core/watchUtils","./support/GroundViewElevationSampler"],(function(e,t,r,s,n,i,a,o,d,p,l,u,c,h,y){"use strict";let w=function(t){function r(e){var r;return(r=t.call(this,e)||this).handles=new c,r.view=null,r.layerViews=new u,r}e._inheritsLoose(r,t);var s=r.prototype;return s.initialize=function(){this.handles.add(h.when(this,"view.map.ground",(e=>e.load()))),this.handles.add(this.layerViews.on("after-changes",(()=>this.layerViewsAfterChangesHandler())))},s.destroy=function(){this._set("view",null),this.handles&&(this.handles.destroy(),this.handles=null)},s.layerViewsAfterChangesHandler=function(){this.handles.remove("updating"),this.handles.add(this.layerViews.map((e=>e.watch("updating",(()=>this.updateUpdating()),!0))).toArray(),"updating"),this.updateUpdating()},s.updateUpdating=function(){this.notifyChange("updating")},e._createClass(r,[{key:"elevationSampler",get:function(){return this.view?"2d"===this.view.type?null:this.view.ready&&this.view.basemapTerrain&&this.view.basemapTerrain.ready?new y({view:this.view}):null:null}},{key:"updating",get:function(){return!this.suspended&&this.layerViews.some((e=>e.updating))}},{key:"suspended",get:function(){return!this.view||this.view.suspended}}]),r}(l);return t.__decorate([i.property({readOnly:!0,dependsOn:["view.ready","view.basemapTerrain?.ready"]})],w.prototype,"elevationSampler",null),t.__decorate([i.property({type:Boolean,dependsOn:["suspended"],readOnly:!0})],w.prototype,"updating",null),t.__decorate([i.property({constructOnly:!0})],w.prototype,"view",void 0),t.__decorate([i.property({type:u,readOnly:!0})],w.prototype,"layerViews",void 0),t.__decorate([i.property({readOnly:!0,dependsOn:["view.suspended"]})],w.prototype,"suspended",null),w=t.__decorate([a.subclass("esri.views.GroundView")],w),w}));
