/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.23/esri/copyright.txt for details.
*/
define(["exports","../../chunks/_rollupPluginBabelHelpers","../../core/maybe","./context-util"],(function(e,t,n,r){"use strict";let i,s;function a(e){switch(e){case r.ContextType.WEBGL1:return o();case r.ContextType.WEBGL2:return u()}}function o(){return i||(i=E()),i}function u(){return s||(s=d()),s}let p=function(){this.available=!1,this.majorPerformanceCaveat=!1,this.maxTextureSize=0,this.supportsVertexShaderSamplers=!1,this.supportsHighPrecisionFragment=!1},l=function(e){function n(){var t;return(t=e.apply(this,arguments)||this).type=r.ContextType.WEBGL1,t.supportsElementIndexUint=!1,t.supportsStandardDerivatives=!1,t.supportsInstancedArrays=!1,t.supportsTextureFloat=!1,t}return t._inheritsLoose(n,e),n}(p),c=function(e){function n(){var t;return(t=e.apply(this,arguments)||this).type=r.ContextType.WEBGL2,t}return t._inheritsLoose(n,e),n}(p);function x(e,t){if(e===r.ContextType.WEBGL1&&void 0===typeof WebGLRenderingContext||e===r.ContextType.WEBGL2&&void 0===typeof WebGL2RenderingContext)return null;const i=document.createElement("canvas");if(!i)return null;let s=r.createContext(i,e,{failIfMajorPerformanceCaveat:!0});if(n.isNone(s)&&(s=r.createContext(i,e),n.isSome(s)&&(t.majorPerformanceCaveat=!0)),n.isNone(s))return s;if(e===r.ContextType.WEBGL1){const e=s.getParameter(s.VERSION),n=null==e?void 0:e.match(/^WebGL\s+([\d.]*)/);if(n){const e=parseFloat(n[1]);t.available=e>=.94}}else t.available=!0;t.maxTextureSize=s.getParameter(s.MAX_TEXTURE_SIZE),t.supportsVertexShaderSamplers=s.getParameter(s.MAX_VERTEX_TEXTURE_IMAGE_UNITS)>0;const a=s.getShaderPrecisionFormat(s.FRAGMENT_SHADER,s.HIGH_FLOAT);return a&&(t.supportsHighPrecisionFragment=a.precision>0),s}function E(){const e=new l,t=x(r.ContextType.WEBGL1,e);return n.isNone(t)||(e.supportsElementIndexUint=null!==t.getExtension("OES_element_index_uint"),e.supportsStandardDerivatives=null!==t.getExtension("OES_standard_derivatives"),e.supportsInstancedArrays=null!==t.getExtension("ANGLE_instanced_arrays"),e.supportsTextureFloat=null!==t.getExtension("OES_texture_float")),e}function d(){const e=new c,t=x(r.ContextType.WEBGL2,e);return n.isNone(t),e}e.WebGL1Capabilities=l,e.WebGL2Capabilities=c,e.getWebGL1Capabilities=o,e.getWebGL2Capabilities=u,e.getWebGLCapabilities=a,Object.defineProperties(e,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})}));
