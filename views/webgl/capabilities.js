/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.25/esri/copyright.txt for details.
*/
define(["exports","../../chunks/_rollupPluginBabelHelpers","../../core/maybe","./context-util"],(function(e,t,n,r){"use strict";let o,s;function a(e){const t=r.getContextTypes(e);for(;t.length>1;){const e=l(t.shift());if(e.available)return e}return l(t.shift())}function l(e){switch(e){case r.ContextType.WEBGL1:return i();case r.ContextType.WEBGL2:return u()}}function i(){return o||(o=x()),o}function u(){return s||(s=_()),s}let p=function(){this.available=!1,this.majorPerformanceCaveat=!1,this.maxTextureSize=0,this.supportsVertexShaderSamplers=!1,this.supportsHighPrecisionFragment=!1,this.supportsElementIndexUint=!1,this.supportsStandardDerivatives=!1,this.supportsInstancedArrays=!1,this.supportsTextureFloat=!1,this.supportsTextureHalfFloat=!1,this.supportsColorBufferFloat=!1,this.supportsColorBufferFloatBlend=!1,this.supportsColorBufferHalfFloat=!1},f=function(e){function n(){var t;return(t=e.apply(this,arguments)||this).type=r.ContextType.WEBGL1,t}return t._inheritsLoose(n,e),n}(p),c=function(e){function n(){var t;return(t=e.apply(this,arguments)||this).type=r.ContextType.WEBGL2,t.supportsElementIndexUint=!0,t.supportsStandardDerivatives=!0,t.supportsInstancedArrays=!0,t.supportsTextureFloat=!0,t.supportsTextureHalfFloat=!0,t}return t._inheritsLoose(n,e),n}(p);function E(e,t){if(e===r.ContextType.WEBGL1&&"undefined"==typeof WebGLRenderingContext||e===r.ContextType.WEBGL2&&"undefined"==typeof WebGL2RenderingContext)return null;const o=document.createElement("canvas");if(!o)return null;let s=r.createContext(o,e,{failIfMajorPerformanceCaveat:!0});if(n.isNone(s)&&(s=r.createContext(o,e),n.isSome(s)&&(t.majorPerformanceCaveat=!0)),n.isNone(s))return s;if(e===r.ContextType.WEBGL1){const e=s.getParameter(s.VERSION)?.match(/^WebGL\s+([\d.]*)/);if(e){const n=parseFloat(e[1]);t.available=n>=.94}}else t.available=!0;t.maxTextureSize=s.getParameter(s.MAX_TEXTURE_SIZE),t.supportsVertexShaderSamplers=s.getParameter(s.MAX_VERTEX_TEXTURE_IMAGE_UNITS)>0;const a=s.getShaderPrecisionFormat(s.FRAGMENT_SHADER,s.HIGH_FLOAT);return a&&(t.supportsHighPrecisionFragment=a.precision>0),s}function x(){const e=new f,t=E(r.ContextType.WEBGL1,e);return n.isNone(t)||(e.supportsElementIndexUint=null!==t.getExtension("OES_element_index_uint"),e.supportsStandardDerivatives=null!==t.getExtension("OES_standard_derivatives"),e.supportsInstancedArrays=null!==t.getExtension("ANGLE_instanced_arrays"),e.supportsTextureFloat=null!==t.getExtension("OES_texture_float"),e.supportsTextureHalfFloat=null!==t.getExtension("OES_texture_half_float"),e.supportsColorBufferFloat=null!==t.getExtension("WEBGL_color_buffer_float"),e.supportsColorBufferFloatBlend=null!==t.getExtension("EXT_float_blend"),e.supportsColorBufferHalfFloat=null!==t.getExtension("EXT_color_buffer_half_float")),e}function _(){const e=new c,t=E(r.ContextType.WEBGL2,e);return n.isNone(t)||(e.supportsColorBufferFloat=null!==t.getExtension("EXT_color_buffer_float"),e.supportsColorBufferFloatBlend=null!==t.getExtension("EXT_float_blend"),e.supportsColorBufferHalfFloat=e.supportsColorBufferFloat||null!==t.getExtension("EXT_color_buffer_half_float")),e}e.getWebGL1Capabilities=i,e.getWebGL2Capabilities=u,e.getWebGLCapabilities=a,e.getWebGLVersionCapabilities=l,Object.defineProperties(e,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})}));
