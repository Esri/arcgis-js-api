/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.21/esri/copyright.txt for details.
*/
define(["../../core/maybe","./context-util"],(function(e,t){"use strict";let r;function n(){return r||(r=o()),r}function o(){const r={available:!1,version:0,majorPerformanceCaveat:!1,maxTextureSize:0,supportsHighPrecisionFragment:!1,supportsVertexShaderSamplers:!1,supportsElementIndexUint:!1,supportsStandardDerivatives:!1,supportsInstancedArrays:!1,supportsTextureFloat:!1,supportsColorBufferFloat:!1};if(void 0===typeof WebGLRenderingContext)return r;const n=document.createElement("canvas");if(!n)return r;let o=t.createContext(n,1,{failIfMajorPerformanceCaveat:!0});if(e.isNone(o)&&(o=t.createContext(n,1),e.isSome(o)&&(r.majorPerformanceCaveat=!0)),e.isNone(o))return r;const s=o.getParameter(o.VERSION);if(!s)return r;const i=s.match(/^WebGL\s+([\d.]*)/);if(i){const e=parseFloat(i[1]);r.available=e>=.94;const t=o.getShaderPrecisionFormat(o.FRAGMENT_SHADER,o.HIGH_FLOAT);t&&(r.supportsHighPrecisionFragment=t.precision>0),r.supportsVertexShaderSamplers=o.getParameter(o.MAX_VERTEX_TEXTURE_IMAGE_UNITS)>0,r.supportsElementIndexUint=null!==o.getExtension("OES_element_index_uint"),r.supportsStandardDerivatives=null!==o.getExtension("OES_standard_derivatives"),r.supportsInstancedArrays=null!==o.getExtension("ANGLE_instanced_arrays"),r.supportsTextureFloat=null!==o.getExtension("OES_texture_float"),r.supportsColorBufferFloat=null!==o.getExtension("WEBGL_color_buffer_float")&&null!==o.getExtension("EXT_float_blend")}return r.maxTextureSize=o.getParameter(o.MAX_TEXTURE_SIZE),r.version=a()?2:1,r}function a(){if(void 0===typeof WebGL2RenderingContext)return!1;const r=document.createElement("canvas");if(!r)return!1;const n=t.createContext(r,2);return!!e.isSome(n)}return n}));
