/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.19/esri/copyright.txt for details.
*/
define(["exports","../../core/has","../../chunks/builtins","./checkWebGLError","./Texture","./FramebufferObject"],(function(e,t,n,r,a,i){"use strict";function o(e,t,n="nearest",r=!1){var i;const o=!(r&&"u8"===t.pixelType),s=o?5126:5121,u=null==t.pixels||0===t.pixels.length?null:o?t.getAsRGBAFloat():t.getAsRGBA(),f=null==(i=e.capabilities.textureFloat)?void 0:i.textureFloatLinear,c={width:t.width,height:t.height,target:3553,pixelFormat:6408,internalFormat:e.isWebGL2Context()?34836:6408,samplingMode:!f||"bilinear"!==n&&"cubic"!==n?9728:9729,dataType:s,wrapMode:33071,flipped:!1};return new a(e,c,u)}function s(e,t,n,r){const o=new a(e,{width:t,height:n,target:3553,pixelFormat:6408,internalFormat:6408,samplingMode:9728,dataType:r?5121:5126,wrapMode:33071,flipped:!1});return new i(e,{colorTarget:0,depthStencilTarget:3,width:t,height:n},o)}function u(e,t){const n=4*t.size[0],r=t.size[1],i={width:n,height:r,target:3553,pixelFormat:6408,internalFormat:e.isWebGL2Context()?34836:6408,dataType:5126,samplingMode:9728,wrapMode:33071,flipped:!1},o=new Float32Array(n*r*4);let s=0;for(let a=0;a<t.coefficients.length;a++)o[s++]=t.coefficients[a],a%3==2&&(o[s++]=1);return new a(e,i,o)}function f(e,t){const n={width:t.length/4,height:1,target:3553,pixelFormat:6408,internalFormat:6408,dataType:5121,samplingMode:9728,wrapMode:33071,flipped:!1};return new a(e,n,t)}function c(e,t,n,r=1,a=!0,i=!1){return{u_flipY:a,u_isFloatTexture:i,u_applyTransform:!!e,u_opacity:r,u_transformSpacing:e?e.spacing:null,u_transformGridSize:e?e.size:null,u_targetImageSize:t,u_srcImageSize:n}}function l(e,t){return{u_colormapOffset:t||0,u_colormapMaxIndex:e?e.length/4-1:null}}function m(e,t){return{u_scale:e,u_offset:t}}function g(e){return{u_bandCount:e.bandCount,u_minOutput:e.outMin,u_maxOutput:e.outMax,u_minCutOff:e.minCutOff,u_maxCutOff:e.maxCutOff,u_factor:e.factor,u_useGamma:e.useGamma,u_gamma:e.gamma,u_gammaCorrection:e.gammaCorrection}}function p(e){return{u_hillshadeType:e.hillshadeType,u_sinZcosAs:e.sinZcosAs,u_sinZsinAs:e.sinZsinAs,u_cosZs:e.cosZs,u_weights:e.weights,u_factor:e.factor,u_minValue:e.minValue,u_maxValue:e.maxValue}}function h(e,t){const n=e.gl,r=t.glName,a=n.getProgramParameter(r,n.ACTIVE_UNIFORMS),i=new Map;let o;for(let s=0;s<a;s++)o=n.getActiveUniform(r,s),o&&i.set(o.name,{location:n.getUniformLocation(r,o.name),info:o});return i}function d(e,t,n){Object.keys(n).forEach((r=>{const a=t.get(r)||t.get(r+"[0]");a&&x(e,r,n[r],a)}))}function _(e,t,n,r){n.length===r.length&&(r.some((e=>null==e))||n.some((e=>null==e))||n.forEach(((n,a)=>{t.setUniform1i(n,a),e.bindTexture(r[a],a)})))}function x(e,t,n,r){if(null===r||null==n)return!1;const{info:a}=r;switch(a.type){case 5126:a.size>1?e.setUniform1fv(t,n):e.setUniform1f(t,n);break;case 35664:e.setUniform2fv(t,n);break;case 35665:e.setUniform3fv(t,n);break;case 35666:e.setUniform4fv(t,n);break;case 35675:e.setUniformMatrix3fv(t,n);break;case 35676:e.setUniformMatrix4fv(t,n);break;case 5124:a.size>1?e.setUniform1iv(t,n):e.setUniform1i(t,n);break;case 35670:e.setUniform1i(t,n?1:0);break;case 35667:case 35671:e.setUniform2iv(t,n);break;case 35668:case 35672:e.setUniform3iv(t,n);break;case 35669:case 35673:e.setUniform4iv(t,n);break;default:return!1}return!0}e.createColormapTexture=f,e.createFrameBuffer=s,e.createRasterTexture=o,e.createTransformTexture=u,e.getBasicGridUniforms=m,e.getColormapUniforms=l,e.getCommonUniforms=c,e.getShadedReliefUniforms=p,e.getStretchUniforms=g,e.getUniformLocationInfos=h,e.setTextures=_,e.setUniforms=d,Object.defineProperty(e,"__esModule",{value:!0})}));
