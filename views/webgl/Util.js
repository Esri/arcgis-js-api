/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.23/esri/copyright.txt for details.
*/
define(["exports","../../core/has","../../core/maybe","./enums"],(function(e,r,t,i){"use strict";function a(e){const r=e.gl;switch(r.getError()){case r.NO_ERROR:return null;case r.INVALID_ENUM:return"An unacceptable value has been specified for an enumerated argument";case r.INVALID_VALUE:return"A numeric argument is out of range";case r.INVALID_OPERATION:return"The specified command is not allowed for the current state";case r.INVALID_FRAMEBUFFER_OPERATION:return"The currently bound framebuffer is not framebuffer complete";case r.OUT_OF_MEMORY:return"Not enough memory is left to execute the command";case r.CONTEXT_LOST_WEBGL:return"WebGL context is lost"}return"Unknown error"}function o(e,r){return e.vertexBuffers[r].size/s(e.layout[r])}function s(e){return e[0].stride}function c(e,r,t,i,a=0){const o=e.gl,s=e.capabilities.instancing;e.bindBuffer(t);for(const c of i){const e=r.get(c.name);void 0===e&&console.error(`There is no location for vertex attribute '${c.name}' defined.`);const t=a*c.stride;if(c.count<=4)o.vertexAttribPointer(e,c.count,c.type,c.normalized,c.stride,c.offset+t),o.enableVertexAttribArray(e),c.divisor>0&&s&&s.vertexAttribDivisor(e,c.divisor);else if(9===c.count)for(let r=0;r<3;r++)o.vertexAttribPointer(e+r,3,c.type,c.normalized,c.stride,c.offset+12*r+t),o.enableVertexAttribArray(e+r),c.divisor>0&&s&&s.vertexAttribDivisor(e+r,c.divisor);else if(16===c.count)for(let r=0;r<4;r++)o.vertexAttribPointer(e+r,4,c.type,c.normalized,c.stride,c.offset+16*r+t),o.enableVertexAttribArray(e+r),c.divisor>0&&s&&s.vertexAttribDivisor(e+r,c.divisor);else console.error("Unsupported vertex attribute element count: "+c.count)}}function n(e,r,t,a){const o=e.gl,s=e.capabilities.instancing;e.bindBuffer(t);for(const i of a){const e=r.get(i.name);if(i.count<=4)o.disableVertexAttribArray(e),i.divisor&&i.divisor>0&&s&&s.vertexAttribDivisor(e,0);else if(9===i.count)for(let r=0;r<3;r++)o.disableVertexAttribArray(e+r),i.divisor&&i.divisor>0&&s&&s.vertexAttribDivisor(e+r,0);else if(16===i.count)for(let r=0;r<4;r++)o.disableVertexAttribArray(e+r),i.divisor&&i.divisor>0&&s&&s.vertexAttribDivisor(e+r,0);else console.error("Unsupported vertex attribute element count: "+i.count)}e.unbindBuffer(i.BufferType.ARRAY_BUFFER)}function m(e){switch(e){case i.PixelFormat.ALPHA:case i.PixelFormat.LUMINANCE:case i.PixelFormat.RED:case i.PixelFormat.RED_INTEGER:case i.SizedPixelFormat.R8:case i.SizedPixelFormat.R8I:case i.SizedPixelFormat.R8UI:case i.SizedPixelFormat.R8_SNORM:case i.RenderbufferFormat.STENCIL_INDEX8:return 1;case i.PixelFormat.LUMINANCE_ALPHA:case i.PixelFormat.RG:case i.PixelFormat.RG_INTEGER:case i.SizedPixelFormat.RGBA4:case i.SizedPixelFormat.R16F:case i.SizedPixelFormat.R16I:case i.SizedPixelFormat.R16UI:case i.SizedPixelFormat.RG8:case i.SizedPixelFormat.RG8I:case i.SizedPixelFormat.RG8UI:case i.SizedPixelFormat.RG8_SNORM:case i.SizedPixelFormat.RGB565:case i.SizedPixelFormat.RGB5_A1:case i.RenderbufferFormat.DEPTH_COMPONENT16:return 2;case i.PixelFormat.DEPTH_COMPONENT:case i.PixelFormat.RGB:case i.PixelFormat.RGB_INTEGER:case i.SizedPixelFormat.RGB8:case i.SizedPixelFormat.RGB8I:case i.SizedPixelFormat.RGB8UI:case i.SizedPixelFormat.RGB8_SNORM:case i.SizedPixelFormat.SRGB8:case i.RenderbufferFormat.DEPTH_COMPONENT24:return 3;case i.PixelFormat.DEPTH_STENCIL:case i.PixelFormat.RGBA:case i.PixelFormat.RGBA_INTEGER:case i.SizedPixelFormat.RGBA8:case i.SizedPixelFormat.R32F:case i.SizedPixelFormat.R11F_G11F_B10F:case i.SizedPixelFormat.RG16F:case i.SizedPixelFormat.R32I:case i.SizedPixelFormat.R32UI:case i.SizedPixelFormat.RG16I:case i.SizedPixelFormat.RG16UI:case i.SizedPixelFormat.RGBA8I:case i.SizedPixelFormat.RGBA8UI:case i.SizedPixelFormat.RGBA8_SNORM:case i.SizedPixelFormat.SRGB8_ALPHA8:case i.SizedPixelFormat.RGB9_E5:case i.SizedPixelFormat.RGB10_A2UI:case i.SizedPixelFormat.RGB10_A2:case i.RenderbufferFormat.DEPTH_STENCIL:case i.RenderbufferFormat.DEPTH_COMPONENT32F:case i.RenderbufferFormat.DEPTH24_STENCIL8:return 4;case i.RenderbufferFormat.DEPTH32F_STENCIL8:return 5;case i.SizedPixelFormat.RGB16F:case i.SizedPixelFormat.RGB16I:case i.SizedPixelFormat.RGB16UI:return 6;case i.SizedPixelFormat.RG32F:case i.SizedPixelFormat.RG32I:case i.SizedPixelFormat.RG32UI:case i.SizedPixelFormat.RGBA16F:case i.SizedPixelFormat.RGBA16I:case i.SizedPixelFormat.RGBA16UI:return 8;case i.SizedPixelFormat.RGB32F:case i.SizedPixelFormat.RGB32I:case i.SizedPixelFormat.RGB32UI:return 12;case i.SizedPixelFormat.RGBA32F:case i.SizedPixelFormat.RGBA32I:case i.SizedPixelFormat.RGBA32UI:return 16;case i.CompressedTextureFormat.COMPRESSED_RGB_S3TC_DXT1_EXT:case i.CompressedTextureFormat.COMPRESSED_RGBA_S3TC_DXT1_EXT:return.5;case i.CompressedTextureFormat.COMPRESSED_RGBA_S3TC_DXT3_EXT:case i.CompressedTextureFormat.COMPRESSED_RGBA_S3TC_DXT5_EXT:return 1;case i.CompressedTextureFormat.COMPRESSED_R11_EAC:case i.CompressedTextureFormat.COMPRESSED_SIGNED_R11_EAC:case i.CompressedTextureFormat.COMPRESSED_RGB8_ETC2:case i.CompressedTextureFormat.COMPRESSED_SRGB8_ETC2:case i.CompressedTextureFormat.COMPRESSED_RGB8_PUNCHTHROUGH_ALPHA1_ETC2:case i.CompressedTextureFormat.COMPRESSED_SRGB8_PUNCHTHROUGH_ALPHA1_ETC2:return.5;case i.CompressedTextureFormat.COMPRESSED_RG11_EAC:case i.CompressedTextureFormat.COMPRESSED_SIGNED_RG11_EAC:case i.CompressedTextureFormat.COMPRESSED_RGBA8_ETC2_EAC:case i.CompressedTextureFormat.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC:return 1}return 0}function d(e){if(t.isNone(e))return 0;if("descriptor"in e)return e.glName?d(e.descriptor):0;const r=e.internalFormat||"pixelFormat"in e&&e.pixelFormat;if(!r)return 0;const i="hasMipmap"in e&&e.hasMipmap?1.3:1,a=e.width*e.height;return m(r)*a*i}e.bindVertexBufferLayout=c,e.getBytesPerElementFormat=m,e.getErrorString=a,e.getGpuMemoryUsage=d,e.getStride=s,e.unbindVertexBufferLayout=n,e.vertexCount=o,Object.defineProperties(e,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})}));
