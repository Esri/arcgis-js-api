/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.18/esri/copyright.txt for details.
*/
define(["../../chunks/_rollupPluginBabelHelpers","../../core/typedArrayUtil"],(function(e,t){"use strict";let i=function(){function i(e,t,i,s,r){this._context=null,this._glName=null,this._bufferType=void 0,this._usage=35044,this._size=-1,this._indexType=void 0,this.id=n++,e.instanceCounter.increment(1,this),this._context=e,this._bufferType=t,this._usage=i,this._glName=this._context.gl.createBuffer(),s&&this.setData(s,r)}i.createIndex=function(e,t,n,s){return new i(e,34963,t,n,s)},i.createVertex=function(e,t,n){return new i(e,34962,t,n)};var s=i.prototype;return s.dispose=function(){if(this._context){if(this._glName){this._context.gl.deleteBuffer(this._glName),this._glName=null}this._context.instanceCounter.decrement(1,this),this._context=null}},s.setData=function(e,i){if(!e)return;if("number"==typeof e){if(e<0&&console.error("Buffer size cannot be negative!"),34963===this._bufferType&&i)switch(this._indexType=i,this._size=e,i){case 5123:e*=2;break;case 5125:e*=4}}else{let i=e.byteLength;t.isUint16Array(e)&&(i/=2,this._indexType=5123),t.isUint32Array(e)&&(i/=4,this._indexType=5125),this._size=i}const n=this._context.getBoundVAO();this._context.bindVAO(null),this._context.bindBuffer(this);this._context.gl.bufferData(this._bufferType,e,this._usage),this._context.bindVAO(n)},s.setSubData=function(e,i=0,n=0,s){if(!e)return;(i<0||i>=this._size)&&console.error("offset is out of range!");let r=i,u=n,o=s,f=e.byteLength;t.isUint16Array(e)&&(f/=2,r*=2,u*=2,o*=2),t.isUint32Array(e)&&(f/=4,r*=4,u*=4,o*=4),void 0===s&&(s=f-1),n>=s&&console.error("end must be bigger than start!"),i+n-s>this._size&&console.error("An attempt to write beyond the end of the buffer!");const h=this._context.getBoundVAO();this._context.bindVAO(null),this._context.bindBuffer(this);const c=this._context.gl,_=ArrayBuffer.isView(e)?e.buffer:e;c.bufferSubData(this._bufferType,r,_.slice(u,o)),this._context.bindVAO(h)},e._createClass(i,[{key:"glName",get:function(){return this._glName}},{key:"size",get:function(){return this._size}},{key:"usage",get:function(){return this._usage}},{key:"bufferType",get:function(){return this._bufferType}},{key:"indexType",get:function(){return this._indexType}},{key:"byteSize",get:function(){return 34962===this._bufferType?this._size:5125===this._indexType?4*this._size:2*this._size}}]),i}(),n=0;return i}));
