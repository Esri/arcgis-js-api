/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.19/esri/copyright.txt for details.
*/
define(["../../../chunks/_rollupPluginBabelHelpers","../../../chunks/tslib.es6","../../../core/has","../../../core/Logger","../../../core/accessorSupport/ensureType","../../../core/accessorSupport/decorators/property","../../../core/accessorSupport/decorators/subclass","../../../core/urlUtils","../../../core/uuid","../../../portal/support/resourceExtension","../../../core/Accessor","../../../chunks/mat4"],(function(t,r,e,o,i,s,n,c,p,a,u,l){"use strict";var h;let _=h=function(r){function e(){var t;return(t=r.apply(this,arguments)||this).from=null,t.to=null,t.duration=4e3,t.repeat=!0,t.done=!1,t}t._inheritsLoose(e,r);var o=e.prototype;return o.getColorMatrix=function(){if(this.done=!1,null==this._lastTime)this._currentStep=0,this._lastTime=Date.now();else{const t=this._lastTime,r=Date.now(),e=r-t;this._currentStep=this._currentStep+e,this._currentStep>=2147483647&&(this._currentStep=0),this._lastTime=r}const t=this._currentStep%this.duration/(this.duration/2),r=t<=1?t:2-t,e=this.from.getColorMatrix(),o=this.to.getColorMatrix();return l.multiplyScalar(e,e,1-r),l.multiplyScalar(o,o,r),!this.repeat&&this._currentStep>=this.duration&&(this.done=!0),l.add(e,e,o)},o.getOpacity=function(){throw new Error("No getOpacity definition for Transition")},o.clone=function(){const t=new h({from:this.from.clone(),to:this.to.clone(),duration:this.duration});return t._lastTime=this._lastTime,t._currentStep=this._currentStep,t},e}(u);return r.__decorate([s.property()],_.prototype,"from",void 0),r.__decorate([s.property()],_.prototype,"to",void 0),r.__decorate([s.property({type:Number})],_.prototype,"duration",void 0),r.__decorate([s.property({type:Boolean})],_.prototype,"repeat",void 0),_=h=r.__decorate([n.subclass("esri.views.layers.support.Transition")],_),_}));
