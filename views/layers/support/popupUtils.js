/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.26/esri/copyright.txt for details.
*/
define(["exports","../../../chunks/_rollupPluginBabelHelpers","../../../core/maybe","../../../layers/support/fieldUtils"],(function(e,l,t,i){"use strict";function n(e){return d.apply(this,arguments)}function d(){return(d=l._asyncToGenerator((function*(e,l=e.popupTemplate){if(t.isNone(l))return[];const n=yield l.getRequiredFields(e.fieldsIndex),{lastEditInfoEnabled:d}=l,{objectIdField:p,typeIdField:s,globalIdField:u,relationships:o}=e;if(n.includes("*"))return["*"];const a=d?yield i.getFeatureEditFields(e):[],r=i.fixFields(e.fieldsIndex,[...n,...a]);return s&&r.push(s),r&&p&&e.fieldsIndex?.has(p)&&!r.includes(p)&&r.push(p),r&&u&&e.fieldsIndex?.has(u)&&!r.includes(u)&&r.push(u),o&&o.forEach((l=>{const{keyField:t}=l;r&&t&&e.fieldsIndex?.has(t)&&!r.includes(t)&&r.push(t)})),r}))).apply(this,arguments)}function p(e,l){return e.popupTemplate?e.popupTemplate:t.isSome(l)&&l.defaultPopupTemplateEnabled&&t.isSome(e.defaultPopupTemplate)?e.defaultPopupTemplate:null}e.getFetchPopupTemplate=p,e.getRequiredFields=n,Object.defineProperty(e,Symbol.toStringTag,{value:"Module"})}));
