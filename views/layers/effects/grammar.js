// COPYRIGHT Â© 2020 Esri
//
// All rights reserved under the copyright laws of the United States
// and applicable international laws, treaties, and conventions.
//
// This material is licensed for use under the Esri Master License
// Agreement (MLA), and is bound by the terms of that agreement.
// You may redistribute and use this code without modification,
// provided you adhere to the terms of the MLA and include this
// copyright notice.
//
// See use restrictions at http://www.esri.com/legal/pdfs/mla_e204_e300/english
//
// For additional information, contact:
// Environmental Systems Research Institute, Inc.
// Attn: Contracts and Legal Services Department
// 380 New York Street
// Redlands, California, USA 92373
// USA
//
// email: contracts@esri.com
//
// See http://js.arcgis.com/4.17/esri/copyright.txt for details.

!function(t,r){"function"==typeof define&&define.amd?define([],r):"object"==typeof module&&module.exports&&(module.exports=r())}(0,(function(){"use strict";function t(r,e,n,u){this.message=r,this.expected=e,this.found=n,this.location=u,this.name="SyntaxError","function"==typeof Error.captureStackTrace&&Error.captureStackTrace(this,t)}return function(t,r){function e(){this.constructor=t}e.prototype=r.prototype,t.prototype=new e}(t,Error),t.buildMessage=function(t,r){var e={literal:function(t){return'"'+u(t.text)+'"'},class:function(t){var r,e="";for(r=0;r<t.parts.length;r++)e+=t.parts[r]instanceof Array?a(t.parts[r][0])+"-"+a(t.parts[r][1]):a(t.parts[r]);return"["+(t.inverted?"^":"")+e+"]"},any:function(t){return"any character"},end:function(t){return"end of input"},other:function(t){return t.description}};function n(t){return t.charCodeAt(0).toString(16).toUpperCase()}function u(t){return t.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,(function(t){return"\\x0"+n(t)})).replace(/[\x10-\x1F\x7F-\x9F]/g,(function(t){return"\\x"+n(t)}))}function a(t){return t.replace(/\\/g,"\\\\").replace(/\]/g,"\\]").replace(/\^/g,"\\^").replace(/-/g,"\\-").replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,(function(t){return"\\x0"+n(t)})).replace(/[\x10-\x1F\x7F-\x9F]/g,(function(t){return"\\x"+n(t)}))}return"Expected "+function(t){var r,n,u,a=new Array(t.length);for(r=0;r<t.length;r++)a[r]=(u=t[r],e[u.type](u));if(a.sort(),a.length>0){for(r=1,n=1;r<a.length;r++)a[r-1]!==a[r]&&(a[n]=a[r],n++);a.length=n}switch(a.length){case 1:return a[0];case 2:return a[0]+" or "+a[1];default:return a.slice(0,-1).join(", ")+", or "+a[a.length-1]}}(t)+" but "+function(t){return t?'"'+u(t)+'"':"end of input"}(r)+" found."},{SyntaxError:t,parse:function(r,e){e=void 0!==e?e:{};var n,u={},a={start:at},c=at,o=tt("none"),i=$("none",!1),l=$(")",!1),s=$(",",!1),f=function(t,r){return r.length>0?function(t,r,e){return[t].concat(function(t,r){return t.map((function(t){return t[r]}))}(r,e))}(t,r,3):[t]},p=tt("whitespace"),h=/^[ \t\n\r]/,g=_([" ","\t","\n","\r"],!1,!1),d=tt("function"),A=$("(",!1),v=tt("identifier"),m=/^[a-z\-]/,x=_([["a","z"],"-"],!1,!1),y=tt("percentage"),b=$("%",!1),C=tt("length"),F=$("px",!1),w=$("cm",!1),E=$("mm",!1),S=$("in",!1),R=$("pt",!1),T=$("pc",!1),j=tt("angle"),k=$("deg",!1),z=$("rad",!1),M=$("grad",!1),q=$("turn",!1),U=tt("number"),B=tt("color"),D=$("#",!1),G=/^[0-9a-fA-F]/,H=_([["0","9"],["a","f"],["A","F"]],!1,!1),I=/^[+\-]/,J=_(["+","-"],!1,!1),K=/^[0-9]/,L=_([["0","9"]],!1,!1),N=$(".",!1),O=$("e",!1),P=0,Q=0,V=[{line:1,column:1}],W=0,X=[],Y=0;if("startRule"in e){if(!(e.startRule in a))throw new Error("Can't start parsing from rule \""+e.startRule+'".');c=a[e.startRule]}function Z(){return r.substring(Q,P)}function $(t,r){return{type:"literal",text:t,ignoreCase:r}}function _(t,r,e){return{type:"class",parts:t,inverted:r,ignoreCase:e}}function tt(t){return{type:"other",description:t}}function rt(t){var e,n=V[t];if(n)return n;for(e=t-1;!V[e];)e--;for(n={line:(n=V[e]).line,column:n.column};e<t;)10===r.charCodeAt(e)?(n.line++,n.column=1):n.column++,e++;return V[t]=n,n}function et(t,r){var e=rt(t),n=rt(r);return{start:{offset:t,line:e.line,column:e.column},end:{offset:r,line:n.line,column:n.column}}}function nt(t){P<W||(P>W&&(W=P,X=[]),X.push(t))}function ut(r,e,n){return new t(t.buildMessage(r,e),r,e,n)}function at(){var t;return(t=function(){var t,e;Y++,t=P,it()!==u?("none"===r.substr(P,4)?(e="none",P+=4):(e=u,0===Y&&nt(i)),e!==u&&it()!==u?(Q=t,t=[]):(P=t,t=u)):(P=t,t=u);Y--,t===u&&(u,0===Y&&nt(o));return t}())===u&&(t=function(){var t,r;if(t=[],(r=ct())!==u)for(;r!==u;)t.push(r),r=ct();else t=u;return t}()),t}function ct(){var t,e,n,a;return t=P,it()!==u&&(e=function(){var t,e,n;Y++,t=P,(e=lt())!==u?(40===r.charCodeAt(P)?(n="(",P++):(n=u,0===Y&&nt(A)),n!==u?(Q=t,t=e=e):(P=t,t=u)):(P=t,t=u);Y--,t===u&&(e=u,0===Y&&nt(d));return t}())!==u&&it()!==u?((n=function(){var t,e,n,a,c,o,i,l;if(t=P,(e=ot())!==u){for(n=[],a=P,(c=it())!==u?(44===r.charCodeAt(P)?(o=",",P++):(o=u,0===Y&&nt(s)),o===u&&(o=null),o!==u&&(i=it())!==u&&(l=ot())!==u?a=c=[c,o,i,l]:(P=a,a=u)):(P=a,a=u);a!==u;)n.push(a),a=P,(c=it())!==u?(44===r.charCodeAt(P)?(o=",",P++):(o=u,0===Y&&nt(s)),o===u&&(o=null),o!==u&&(i=it())!==u&&(l=ot())!==u?a=c=[c,o,i,l]:(P=a,a=u)):(P=a,a=u);n!==u?(Q=t,e=f(e,n),t=e):(P=t,t=u)}else P=t,t=u;return t}())===u&&(n=null),n!==u&&it()!==u?(41===r.charCodeAt(P)?(a=")",P++):(a=u,0===Y&&nt(l)),a!==u&&it()!==u?(Q=t,t={type:"function",name:e,parameters:n||[]}):(P=t,t=u)):(P=t,t=u)):(P=t,t=u),t}function ot(){var t,e,n,a;return t=P,(e=function(){var t,e,n;Y++,t=P,it()!==u&&(e=st())!==u?(37===r.charCodeAt(P)?(n="%",P++):(n=u,0===Y&&nt(b)),n!==u?(Q=t,t={value:e,unit:"%"}):(P=t,t=u)):(P=t,t=u);Y--,t===u&&(u,0===Y&&nt(y));return t}())===u&&(e=function(){var t,e,n,a;Y++,t=P,(e=it())!==u&&(n=st())!==u?("px"===r.substr(P,2)?(a="px",P+=2):(a=u,0===Y&&nt(F)),a!==u?(Q=t,t=e={value:n,unit:"px"}):(P=t,t=u)):(P=t,t=u);t===u&&(t=P,(e=it())!==u&&(n=st())!==u?("cm"===r.substr(P,2)?(a="cm",P+=2):(a=u,0===Y&&nt(w)),a!==u?(Q=t,e=function(t){return{value:t,unit:"cm"}}(n),t=e):(P=t,t=u)):(P=t,t=u),t===u&&(t=P,(e=it())!==u&&(n=st())!==u?("mm"===r.substr(P,2)?(a="mm",P+=2):(a=u,0===Y&&nt(E)),a!==u?(Q=t,e=function(t){return{value:t,unit:"mm"}}(n),t=e):(P=t,t=u)):(P=t,t=u),t===u&&(t=P,(e=it())!==u&&(n=st())!==u?("in"===r.substr(P,2)?(a="in",P+=2):(a=u,0===Y&&nt(S)),a!==u?(Q=t,e=function(t){return{value:t,unit:"in"}}(n),t=e):(P=t,t=u)):(P=t,t=u),t===u&&(t=P,(e=it())!==u&&(n=st())!==u?("pt"===r.substr(P,2)?(a="pt",P+=2):(a=u,0===Y&&nt(R)),a!==u?(Q=t,e=function(t){return{value:t,unit:"pt"}}(n),t=e):(P=t,t=u)):(P=t,t=u),t===u&&(t=P,(e=it())!==u&&(n=st())!==u?("pc"===r.substr(P,2)?(a="pc",P+=2):(a=u,0===Y&&nt(T)),a!==u?(Q=t,e=function(t){return{value:t,unit:"pc"}}(n),t=e):(P=t,t=u)):(P=t,t=u))))));Y--,t===u&&(e=u,0===Y&&nt(C));return t}())===u&&(e=function(){var t,e,n;Y++,t=P,(e=st())!==u?("deg"===r.substr(P,3)?(n="deg",P+=3):(n=u,0===Y&&nt(k)),n!==u?(Q=t,t=e={value:e,unit:"deg"}):(P=t,t=u)):(P=t,t=u);t===u&&(t=P,(e=st())!==u?("rad"===r.substr(P,3)?(n="rad",P+=3):(n=u,0===Y&&nt(z)),n!==u?(Q=t,e=function(t){return{value:t,unit:"rad"}}(e),t=e):(P=t,t=u)):(P=t,t=u),t===u&&(t=P,(e=st())!==u?("grad"===r.substr(P,4)?(n="grad",P+=4):(n=u,0===Y&&nt(M)),n!==u?(Q=t,e=function(t){return{value:t,unit:"grad"}}(e),t=e):(P=t,t=u)):(P=t,t=u),t===u&&(t=P,(e=st())!==u?("turn"===r.substr(P,4)?(n="turn",P+=4):(n=u,0===Y&&nt(q)),n!==u?(Q=t,e=function(t){return{value:t,unit:"turn"}}(e),t=e):(P=t,t=u)):(P=t,t=u))));Y--,t===u&&(e=u,0===Y&&nt(j));return t}())===u&&(e=function(){var t,r;Y++,t=P,it()!==u&&(r=st())!==u?(Q=t,t={value:r,unit:null}):(P=t,t=u);Y--,t===u&&(u,0===Y&&nt(U));return t}()),e!==u&&(Q=t,e={type:"quantity",value:(n=e).value,unit:n.unit}),(t=e)===u&&(t=P,(e=function(){var t,e,n,a;Y++,t=P,35===r.charCodeAt(P)?(e="#",P++):(e=u,0===Y&&nt(D));if(e!==u){if(n=[],G.test(r.charAt(P))?(a=r.charAt(P),P++):(a=u,0===Y&&nt(H)),a!==u)for(;a!==u;)n.push(a),G.test(r.charAt(P))?(a=r.charAt(P),P++):(a=u,0===Y&&nt(H));else n=u;n!==u?(Q=t,e={type:"hex",value:Z()},t=e):(P=t,t=u)}else P=t,t=u;t===u&&(t=P,(e=ct())!==u&&(Q=t,e={type:"function",value:e}),(t=e)===u&&(t=P,(e=lt())!==u&&(Q=t,e={type:"named",value:Z()}),t=e));Y--,t===u&&(e=u,0===Y&&nt(B));return t}())!==u&&(Q=t,e={type:"color",colorType:(a=e).type,value:a.value}),t=e),t}function it(){var t,e;for(Y++,t=[],h.test(r.charAt(P))?(e=r.charAt(P),P++):(e=u,0===Y&&nt(g));e!==u;)t.push(e),h.test(r.charAt(P))?(e=r.charAt(P),P++):(e=u,0===Y&&nt(g));return Y--,t===u&&(e=u,0===Y&&nt(p)),t}function lt(){var t,e,n;if(Y++,t=P,e=[],m.test(r.charAt(P))?(n=r.charAt(P),P++):(n=u,0===Y&&nt(x)),n!==u)for(;n!==u;)e.push(n),m.test(r.charAt(P))?(n=r.charAt(P),P++):(n=u,0===Y&&nt(x));else e=u;return e!==u&&(Q=t,e=Z()),Y--,(t=e)===u&&(e=u,0===Y&&nt(v)),t}function st(){var t,e,n,a,c,o,i,l;if(t=P,I.test(r.charAt(P))?(e=r.charAt(P),P++):(e=u,0===Y&&nt(J)),e===u&&(e=null),e!==u){for(n=P,a=[],K.test(r.charAt(P))?(c=r.charAt(P),P++):(c=u,0===Y&&nt(L));c!==u;)a.push(c),K.test(r.charAt(P))?(c=r.charAt(P),P++):(c=u,0===Y&&nt(L));if(a!==u)if(46===r.charCodeAt(P)?(c=".",P++):(c=u,0===Y&&nt(N)),c!==u){if(o=[],K.test(r.charAt(P))?(i=r.charAt(P),P++):(i=u,0===Y&&nt(L)),i!==u)for(;i!==u;)o.push(i),K.test(r.charAt(P))?(i=r.charAt(P),P++):(i=u,0===Y&&nt(L));else o=u;o!==u?n=a=[a,c,o]:(P=n,n=u)}else P=n,n=u;else P=n,n=u;if(n===u)if(n=[],K.test(r.charAt(P))?(a=r.charAt(P),P++):(a=u,0===Y&&nt(L)),a!==u)for(;a!==u;)n.push(a),K.test(r.charAt(P))?(a=r.charAt(P),P++):(a=u,0===Y&&nt(L));else n=u;if(n!==u){if(a=P,101===r.charCodeAt(P)?(c="e",P++):(c=u,0===Y&&nt(O)),c!==u)if(I.test(r.charAt(P))?(o=r.charAt(P),P++):(o=u,0===Y&&nt(J)),o===u&&(o=null),o!==u){if(i=[],K.test(r.charAt(P))?(l=r.charAt(P),P++):(l=u,0===Y&&nt(L)),l!==u)for(;l!==u;)i.push(l),K.test(r.charAt(P))?(l=r.charAt(P),P++):(l=u,0===Y&&nt(L));else i=u;i!==u?a=c=[c,o,i]:(P=a,a=u)}else P=a,a=u;else P=a,a=u;a===u&&(a=null),a!==u?(Q=t,t=e=parseFloat(Z())):(P=t,t=u)}else P=t,t=u}else P=t,t=u;return t}if((n=c())!==u&&P===r.length)return n;throw n!==u&&P<r.length&&nt({type:"end"}),ut(X,W<r.length?r.charAt(W):null,W<r.length?et(W,W+1):et(W,W))}}}));