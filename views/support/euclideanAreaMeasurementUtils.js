/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.25/esri/copyright.txt for details.
*/
define(["exports","../../core/maybe","../../core/quantityUtils","../../core/unitUtils","../../chunks/earcut","../../chunks/vec3","../../chunks/vec3f64","../../geometry/projection","../../geometry/support/plane","../../geometry/support/triangle","./measurementUtils"],(function(e,t,n,r,o,a,c,l,u,i,s){"use strict";function f(e,t=m()){return d(e,t)}function p(e,t=m()){return d(e,t,!1)}function d(e,o,f=e.hasZ){const p=s.computeEuclideanMeasurementSR(e.spatialReference),d=r.areaUnitFromSpatialReference(p);if(t.isNone(d))return null;const m=(e,t)=>!(t.length<2)&&(a.set(e,t[0],t[1],f&&t[2]||0),!0);let P=0;for(const t of e.rings){const n=t.length;if(n<3)continue;const{positionsWorldCoords:r}=o;for(;r.length<n;)r.push(c.create());const s=g,f=a.set(h,0,0,0),d=1/n;for(let o=0;o<n;o++){if(!m(s,t[o]))return null;if(!l.projectVectorToVector(s,e.spatialReference,r[o],p))return null;a.scaleAndAdd(f,f,r[o],d)}const y=u.fromPoints(r[0],r[1],f,u.wrap());if(0===a.squaredLength(u.normal(y)))continue;for(let e=0;e<n;e++)u.projectPointLocal(y,f,r[e],r[e]);const j=A(r);for(let e=0;e<j.length;e+=3)P+=i.areaPoints2d(r[j[e]],r[j[e+1]],r[j[e+2]])}return n.createArea(P,d)}const g=c.create(),h=c.create();function m(){return{positionsWorldCoords:[]}}function A(e){return o.earcut(P(e),[],2)}function P(e){const t=new Float64Array(2*e.length);for(let n=0;n<e.length;++n){const r=e[n],o=2*n;t[o+0]=r[0],t[o+1]=r[1]}return t}e.computeEuclideanPlanarArea=d,e.createEuclideanPlanarAreaCache=m,e.euclideanHorizontalPlanarArea=p,e.euclideanPlanarArea=f,e.triangulate=A,Object.defineProperties(e,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})}));
