/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.19/esri/copyright.txt for details.
*/
define(["exports","../../core/maybe","../../Color"],(function(t,e,n){"use strict";async function r(t){await t.whenReady();const e=t.basemapView.baseLayerViews.map((t=>t.layer));if(!e.length){const e=getComputedStyle(t.container).backgroundColor,r=e&&new n(e);return t.get("background.color")||(r&&0!==r.a?r:null)||null}const r=(await t.takeScreenshot({format:"png",layers:e.toArray()})).data.data,a=r.length;let o=0,u=0,l=0,c=0,s=0,i=0;for(let n=0;n<a;n+=4){const t=r[n],e=r[n+1],a=r[n+2],d=r[n+3],h=d/255;o+=t*t*h,u+=e*e*h,l+=a*a*h,s+=h,d&&(c+=d,i++)}o=Math.round(Math.sqrt(o/s)),u=Math.round(Math.sqrt(u/s)),l=Math.round(Math.sqrt(l/s));return new n([o,u,l,c/i/255])}async function a(t){if(!t)return null;const n=await r(t);return e.isSome(n)?o(n):null}function o(t){return u(t).isBright?"light":"dark"}function u(t){let{r:e,g:r,b:a,a:o}=t;return o<1&&(e=Math.round(o*e+255*(1-o)),r=Math.round(o*r+255*(1-o)),a=Math.round(o*a+255*(1-o))),new n({r:e,g:r,b:a})}t.getBackgroundColor=r,t.getBackgroundColorTheme=a,Object.defineProperty(t,"__esModule",{value:!0})}));
