/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.18/esri/copyright.txt for details.
*/
define(["exports","../../core/maybe","../../Color"],(function(t,e,n){"use strict";async function r(t){await t.whenReady();const e=t.basemapView.baseLayerViews.map((t=>t.layer));if(!e.length){const e=getComputedStyle(t.container).backgroundColor,r=e&&new n(e);return t.get("background.color")||(r&&0!==r.a?r:null)||null}const r=(await t.takeScreenshot({format:"png",layers:e.toArray()})).data.data,a=r.length;let o=0,u=0,l=0,c=0,s=0,i=0;for(let t=0;t<a;t+=4){const e=r[t],n=r[t+1],a=r[t+2],d=r[t+3],h=d/255;o+=e*e*h,u+=n*n*h,l+=a*a*h,s+=h,d&&(c+=d,i++)}o=Math.round(Math.sqrt(o/s)),u=Math.round(Math.sqrt(u/s)),l=Math.round(Math.sqrt(l/s));return new n([o,u,l,c/i/255])}t.getBackgroundColor=r,t.getBackgroundColorTheme=async function(t){if(!t)return null;const a=await r(t);return e.isSome(a)?function(t){return function(t){let{r:e,g:r,b:a,a:o}=t;o<1&&(e=Math.round(o*e+255*(1-o)),r=Math.round(o*r+255*(1-o)),a=Math.round(o*a+255*(1-o)));return new n({r:e,g:r,b:a})}(t).isBright?"light":"dark"}(a):null},Object.defineProperty(t,"__esModule",{value:!0})}));
