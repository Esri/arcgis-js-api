/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.21/esri/copyright.txt for details.
*/
define(["exports","../../chunks/_rollupPluginBabelHelpers","../../Color","../../core/maybe"],(function(t,n,e,r){"use strict";function o(t){return a.apply(this,arguments)}function a(){return(a=n._asyncToGenerator((function*(t){yield t.whenReady();const n=t.basemapView.baseLayerViews.map((t=>t.layer));if(!n.length){const n=getComputedStyle(t.container).backgroundColor,r=n&&new e(n);return t.get("background.color")||(r&&0!==r.a?r:null)||null}const r=(yield t.takeScreenshot({format:"png",layers:n.toArray()})).data.data,o=r.length;let a=0,u=0,l=0,i=0,c=0,s=0;for(let e=0;e<o;e+=4){const t=r[e],n=r[e+1],o=r[e+2],d=r[e+3],h=d/255;a+=t*t*h,u+=n*n*h,l+=o*o*h,c+=h,d&&(i+=d,s++)}a=Math.round(Math.sqrt(a/c)),u=Math.round(Math.sqrt(u/c)),l=Math.round(Math.sqrt(l/c));return new e([a,u,l,i/s/255])}))).apply(this,arguments)}function u(t){return l.apply(this,arguments)}function l(){return(l=n._asyncToGenerator((function*(t){if(!t)return null;const n=yield o(t);return r.isSome(n)?i(n):null}))).apply(this,arguments)}function i(t){return c(t).isBright?"light":"dark"}function c(t){let{r:n,g:r,b:o,a}=t;return a<1&&(n=Math.round(a*n+255*(1-a)),r=Math.round(a*r+255*(1-a)),o=Math.round(a*o+255*(1-a))),new e({r:n,g:r,b:o})}t.getBackgroundColor=o,t.getBackgroundColorTheme=u,Object.defineProperty(t,"__esModule",{value:!0})}));
