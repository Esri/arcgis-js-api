/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.18/esri/copyright.txt for details.
*/
define(["exports","./functions"],(function(n,o){"use strict";n.optimalDistance=function(n,e){let s=function(n,o){const e=Math.max(n.compared.sourceZoom,n.compared.targetZoom),s=n.source.zoomAtPixelsPerPan(n.desiredPixelFlow/n.compared.pan)/2;if(s<e)return null!=o.maximumDistance?e+(o.maximumDistance-e)/2:1.5*e;if(o.maximumDistance)return Math.min(o.maximumDistance,s);return s}(n,e);const t={ascensionFactor:null!=e.ascensionFactor?e.ascensionFactor:.5,descensionFactor:null!=e.descensionFactor?e.descensionFactor:.5},i=0===t.ascensionFactor,a=0===t.descensionFactor,c=i?o.tAscensionZoomOnly:o.tAscensionZoomPan,m=i?o.dtAscensionZoomOnly:o.dtAscensionZoomPan,r=i?o.ddtAscensionZoomOnly:o.ddtAscensionZoomPan,d=a?o.tDescensionZoomOnly:o.tDescensionZoomPan,u=a?o.dtDescensionZoomOnly:o.dtDescensionZoomPan,l=a?o.ddtDescensionZoomOnly:o.ddtDescensionZoomPan,Z=e=>c(n,e,t)+o.tPanion(n,e,t)+d(n,e,t),P=e=>m(n,e,t)+o.dtPanion(n,e,t)+u(n,e,t),f=e=>r(n,e,t)+o.ddtPanion(n,e,t)+l(n,e,t);let D=Z(s);const p=o.tBaseLine(n);let x;const F=e.maximumIterations||20,y=null!=e.maximumDistance?e.maximumDistance:1/0;for(x=0;x<F;x++){const o=1e-6,e=(P(s)+o)/f(s);if(isNaN(e)||s>=y&&e<0){if(!isFinite(y))return null;s=y,D=Z(s);break}if(s-=e,s<n.compared.sourceZoom||s<n.compared.targetZoom)return null;const t=Z(s);if(Math.abs(t-D)/D<=.005)break;D=t}return D>.7*p||s<n.compared.sourceZoom||s<n.compared.targetZoom?null:s},Object.defineProperty(n,"__esModule",{value:!0})}));
