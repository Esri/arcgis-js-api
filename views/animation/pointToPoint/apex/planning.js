/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
define(["exports","./functions"],(function(n,o){"use strict";function e(n,e){let t=s(n,e);const a={ascensionFactor:null!=e.ascensionFactor?e.ascensionFactor:.5,descensionFactor:null!=e.descensionFactor?e.descensionFactor:.5},i=0===a.ascensionFactor,c=0===a.descensionFactor,m=i?o.tAscensionZoomOnly:o.tAscensionZoomPan,r=i?o.dtAscensionZoomOnly:o.dtAscensionZoomPan,d=i?o.ddtAscensionZoomOnly:o.ddtAscensionZoomPan,l=c?o.tDescensionZoomOnly:o.tDescensionZoomPan,u=c?o.dtDescensionZoomOnly:o.dtDescensionZoomPan,Z=c?o.ddtDescensionZoomOnly:o.ddtDescensionZoomPan,P=e=>m(n,e,a)+o.tPanion(n,e,a)+l(n,e,a),D=e=>r(n,e,a)+o.dtPanion(n,e,a)+u(n,e,a),f=e=>d(n,e,a)+o.ddtPanion(n,e,a)+Z(n,e,a);let p=P(t);const x=o.tBaseLine(n);let F;const y=e.maximumIterations||20,A=null!=e.maximumDistance?e.maximumDistance:1/0;for(F=0;F<y;F++){const o=1e-6,e=(D(t)+o)/f(t);if(isNaN(e)||t>=A&&e<0){if(!isFinite(A))return null;t=A,p=P(t);break}if(t-=e,t<n.compared.sourceZoom||t<n.compared.targetZoom)return null;const s=P(t);if(Math.abs(s-p)/p<=.005)break;p=s}return p>x*(1-.3)||t<n.compared.sourceZoom||t<n.compared.targetZoom?null:t}function s(n,o){const e=Math.max(n.compared.sourceZoom,n.compared.targetZoom),s=n.source.zoomAtPixelsPerPan(n.desiredPixelFlow/n.compared.pan)/2;return s<e?null!=o.maximumDistance?e+(o.maximumDistance-e)/2:1.5*e:o.maximumDistance?Math.min(o.maximumDistance,s):s}n.optimalDistance=e,Object.defineProperty(n,"__esModule",{value:!0})}));
