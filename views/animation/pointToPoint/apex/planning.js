/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.26/esri/copyright.txt for details.
*/
define(["exports","./functions"],(function(n,o){"use strict";function e(n,e){let s=t(n,e);const a={ascensionFactor:null!=e.ascensionFactor?e.ascensionFactor:.5,descensionFactor:null!=e.descensionFactor?e.descensionFactor:.5},i=0===a.ascensionFactor,c=0===a.descensionFactor,m=i?o.tAscensionZoomOnly:o.tAscensionZoomPan,r=i?o.dtAscensionZoomOnly:o.dtAscensionZoomPan,d=i?o.ddtAscensionZoomOnly:o.ddtAscensionZoomPan,l=c?o.tDescensionZoomOnly:o.tDescensionZoomPan,u=c?o.dtDescensionZoomOnly:o.dtDescensionZoomPan,Z=c?o.ddtDescensionZoomOnly:o.ddtDescensionZoomPan,P=e=>m(n,e,a)+o.tPanion(n,e,a)+l(n,e,a),D=e=>r(n,e,a)+o.dtPanion(n,e,a)+u(n,e,a),f=e=>d(n,e,a)+o.ddtPanion(n,e,a)+Z(n,e,a);let p=P(s);const x=o.tBaseLine(n);let F;const y=e.maximumIterations||20,A=null!=e.maximumDistance?e.maximumDistance:1/0;for(F=0;F<y;F++){const o=1e-6,e=(D(s)+o)/f(s);if(isNaN(e)||s>=A&&e<0){if(!isFinite(A))return null;s=A,p=P(s);break}if(s-=e,s<n.compared.sourceZoom||s<n.compared.targetZoom)return null;const t=P(s);if(Math.abs(t-p)/p<=.005)break;p=t}return p>x*(1-.3)||s<n.compared.sourceZoom||s<n.compared.targetZoom?null:s}function t(n,o){const e=Math.max(n.compared.sourceZoom,n.compared.targetZoom),t=n.source.zoomAtPixelsPerPan(n.desiredPixelFlow/n.compared.pan)/2;return t<e?null!=o.maximumDistance?e+(o.maximumDistance-e)/2:1.5*e:o.maximumDistance?Math.min(o.maximumDistance,t):t}n.optimalDistance=e,Object.defineProperty(n,Symbol.toStringTag,{value:"Module"})}));
