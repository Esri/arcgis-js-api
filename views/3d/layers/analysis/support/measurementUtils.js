/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.21/esri/copyright.txt for details.
*/
define(["exports","../../../../../chunks/vec3","../../../../../chunks/vec3f64","../../../../../geometry/geometryEngine","../../../../../geometry/Polygon","../../../../../geometry/projection","../../../../../geometry/SpatialReference","../../../../../geometry/support/geodesicUtils","../../../support/mathUtils"],(function(e,t,n,r,o,i,a,c,s){"use strict";function l(e,n){const r=n.center;t.set(r,0,0,0);for(let i=0;i<e.length;++i)t.add(r,r,e[i]);t.scale(r,r,1/e.length);let o=0;for(let i=0;i<e.length;++i)o=Math.max(o,t.squaredDistance(r,e[i]));n.radius=Math.sqrt(o)}function u(e,t){if(e.length<3)throw new Error("need at least 3 points to fit a plane");s.planeFromPoints(e[0],e[1],e[2],t)}function f(e,n){return t.dot(e,n)+e[3]}function g(e,n,r){return i.projectPointToVector(e,y,r)&&i.projectPointToVector(n,G,r)?t.distance(y,G):0}function p(e,t){if(!i.projectPointToWGS84ComparableLonLat(e,y)||!i.projectPointToWGS84ComparableLonLat(t,G))return 0;const n={distance:null};return c.inverseGeodeticSolver(n,[y[0],y[1]],[G[0],G[1]]),n.distance}function d(e,t,n){const r={distance:null};return c.inverseGeodeticSolver(r,[e[0],e[1]],[t[0],t[1]],n),r.distance}function h(e,t,n){const r=t[0]-e[0],o=t[1]-e[1],i=n[0]-e[0],a=n[1]-e[1];return.5*Math.abs(r*a-o*i)}function m(e,t,n,o){const a=j;return i.projectVectorToWGS84ComparableLonLat(e,o,y)&&i.projectVectorToWGS84ComparableLonLat(t,o,G)&&i.projectVectorToWGS84ComparableLonLat(n,o,S)?(a.setPoint(0,0,y),a.setPoint(0,1,G),a.setPoint(0,2,S),Math.abs(r.geodesicArea(a,"square-meters"))):0}function L(e,n,r){Math.abs(e[0])>Math.abs(e[1])?t.set(n,0,1,0):t.set(n,1,0,0),t.cross(r,e,n),t.normalize(n,n),t.cross(n,r,e),t.normalize(r,r)}function b(e,n=null,r=!0){const o=1e-6,i=(e,n)=>{if(0===n[0]&&0===n[1]&&0===n[2])return!1;for(let r=0;r<e.length;++r)if(t.dot(n,e[r])<-o)return!1;return!0};if(0===e.length)return!1;if(1===e.length)return n&&t.copy(n,e[0]),!0;t.set(v,0,0,0);for(let a=0;a<e.length;++a)t.add(v,v,e[a]);if(t.normalize(v,v),i(e,v))return n&&t.copy(n,v),!0;if(!r)return!1;for(let a=0;a<e.length;++a)for(let r=0;r<e.length;++r)if(a!==r&&(t.cross(v,e[a],e[r]),t.normalize(v,v),i(e,v)))return n&&t.copy(n,v),!0;return!1}function P(e,t){if(e===t)return!0;if(e.size!==t.size)return!1;for(let n=0;n<e.size;++n)if(!t.has(e[n]))return!1;return!0}const y=n.create(),G=n.create(),S=n.create(),j=new o({rings:[[y,G,S]],spatialReference:a.WGS84}),v=n.create();e.bestFitPlane=u,e.boundingSphere=l,e.compareSets=P,e.fitHemisphere=b,e.planePointDistance=f,e.segmentLengthEuclidean=g,e.segmentLengthGeodesic=p,e.segmentLengthGeodesicVector=d,e.tangentFrame=L,e.triangleAreaEuclidean=h,e.triangleAreaGeodesic=m,Object.defineProperty(e,"__esModule",{value:!0})}));
