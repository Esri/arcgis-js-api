/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.18/esri/copyright.txt for details.
*/
define(["exports","../../../../core/maybe","../../../../chunks/vec3f64","../../../../chunks/vec3","../../../../geometry/projection","../../../../geometry/support/aaBoundingBox"],(function(e,t,n,o,r,a){"use strict";function c(e,t,n,r){const a=t.getComponentAabb(n,e,u),c=t.getObjectTransform(n);for(let e=0;e<8;++e)s[0]=1&e?a[0]:a[3],s[1]=2&e?a[1]:a[4],s[2]=4&e?a[2]:a[5],o.transformMat3(s,s,c.rotationScale),o.add(s,s,c.position),r[3*e]=s[0],r[3*e+1]=s[1],r[3*e+2]=s[2];return r}const u=a.create(),s=n.create();e.boundingBoxCornerPoints=c,e.boundingBoxTop=function(e,t,n,r){const a=t.getComponentAabb(n,e,u),c=t.getObjectTransform(n);r[0]=0,r[1]=0,r[2]=0;for(let e=0;e<8;++e)s[0]=1&e?a[0]:a[3],s[1]=2&e?a[1]:a[4],s[2]=a[5],o.transformMat3(s,s,c.rotationScale),o.add(s,s,c.position),r[0]+=s[0],r[1]+=s[1],r[2]+=s[2];return r[0]/=8,r[1]/=8,r[2]/=8,r},e.createGetFeatureExtent=function(e,n,o){const u=new Float64Array(24);return s=>{let f=s.meta.featureExtents;if(t.isNone(f)){f=new Float64Array(6*s.meta.featureIds.length),s.meta.featureExtents=f;for(let e=0;e<f.length;e+=6)f[e]=Number.POSITIVE_INFINITY}const i=new Float64Array(f.buffer,6*s.index*Float64Array.BYTES_PER_ELEMENT,6);return i[0]===Number.POSITIVE_INFINITY&&(c(s.index,o,s.meta.objectHandle,u),r.projectBuffer(u,n,0,u,e,0,8)?(a.set(i,a.NEGATIVE_INFINITY),a.expandWithBuffer(i,u,0,8)):a.set(i,a.ZERO)),i}},Object.defineProperty(e,"__esModule",{value:!0})}));
