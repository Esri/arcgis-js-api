/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.18/esri/copyright.txt for details.
*/
define(["../../../../core/arrayUtils"],(function(e){"use strict";let t=function(){this.ids=new Set,this.paused=!1};return function(){function i(e){this.highlights=[],this.collection=e.collection,this.forAllFeatures=e.forAllFeatures,this.forAllFeaturesOfNode=e.forAllFeaturesOfNode}var s=i.prototype;return s.destroy=function(){this.highlights.forEach((e=>this.releaseSet(e))),this.highlights=null},s.acquireSet=function(){const i=new t;this.highlights.push(i);const s={remove:()=>{this.releaseSet(i),e.removeUnordered(this.highlights,i)},pause:()=>{this.releaseSet(i),i.paused=!0},resume:()=>{i.paused=!1,this.initializeSet(i)}};return{set:i,handle:s}},s.setFeatureIds=function(e,t){t.forEach((t=>e.ids.add(t))),this.initializeSet(e)},s.initializeSet=function(e){this.forAllFeatures(((t,i,s)=>(e.ids.has(t)&&this.collection.addComponentHighlight(s.objectHandle,i),1)))},s.releaseSet=function(e){this.forAllFeatures(((t,i,s)=>(e.ids.has(t)&&this.collection.removeComponentHighlight(s.objectHandle,i),1)))},s.objectCreated=function(e){this.highlights.forEach((t=>{t.paused||this.forAllFeaturesOfNode(e,((i,s)=>(t.ids.has(i)&&this.collection.addComponentHighlight(e.objectHandle,s),1)))}))},s.objectDeleted=function(e){this.collection.clearHighlights(e.objectHandle)},i}()}));
