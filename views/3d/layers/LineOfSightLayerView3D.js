/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.21/esri/copyright.txt for details.
*/
define(["exports","../../../chunks/_rollupPluginBabelHelpers","../../../chunks/tslib.es6","../../../core/maybe","../../../core/accessorSupport/decorators/property","../../../core/has","../../../core/accessorSupport/ensureType","../../../core/Logger","../../../core/accessorSupport/decorators/subclass","./LayerView3D","./analysis/LineOfSight/LineOfSightController","./analysis/LineOfSight/LineOfSightLayerViewData","./analysis/LineOfSight/LineOfSightView","../../layers/LayerView"],(function(e,t,i,r,a,s,o,n,l,y,p,h,c,u){"use strict";e.LineOfSightLayerView3D=function(e){function i(){var t;return(t=e.apply(this,arguments)||this).type="line-of-sight-3d",t.layerViewData=new h.LineOfSightLayerViewData,t}t._inheritsLoose(i,e);var a=i.prototype;return a.initialize=function(){const e=this.view,t=this.layer;this._analysisController=new p.LineOfSightController({layer:t,layerViewData:this.layerViewData,view:e}),this._analysisView=new c.LineOfSightView({layer:t,layerView:this,view:e}),this.handles.add([this._analysisController.on("result-changed",(e=>{e.target!==this.layerViewData.cursorTarget&&this.emit("result-changed",e)}))])},a.destroy=function(){this._analysisController=r.destroyMaybe(this._analysisController),this._analysisView=r.destroyMaybe(this._analysisView)},a.getResultForTarget=function(e){const t=this.layerViewData.analyses.find((t=>t.target===e)),i=r.applySome(t,(e=>e.result));return r.unwrapOr(i,null)},a.isUpdating=function(){return r.mapOr(this._analysisController,!1,(e=>e.updating))},t._createClass(i,[{key:"results",get:function(){return this.layerViewData.analyses.map((e=>e.result))}},{key:"priority",get:function(){return this._analysisController.priority},set:function(e){this._analysisController.priority=e}},{key:"testData",get:function(){return{view:this._analysisView,controller:this._analysisController}}}]),i}(y.LayerView3D(u)),i.__decorate([a.property({readOnly:!0})],e.LineOfSightLayerView3D.prototype,"type",void 0),i.__decorate([a.property()],e.LineOfSightLayerView3D.prototype,"layer",void 0),i.__decorate([a.property({readOnly:!0})],e.LineOfSightLayerView3D.prototype,"results",null),i.__decorate([a.property()],e.LineOfSightLayerView3D.prototype,"priority",null),i.__decorate([a.property()],e.LineOfSightLayerView3D.prototype,"layerViewData",void 0),i.__decorate([a.property()],e.LineOfSightLayerView3D.prototype,"_analysisController",void 0),i.__decorate([a.property()],e.LineOfSightLayerView3D.prototype,"_analysisView",void 0),e.LineOfSightLayerView3D=i.__decorate([l.subclass("esri.views.3d.layers.LineOfSightLayerView3D")],e.LineOfSightLayerView3D);var w=e.LineOfSightLayerView3D;e.default=w,Object.defineProperty(e,"__esModule",{value:!0})}));
