/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.21/esri/copyright.txt for details.
*/
define(["exports","../../../../core/mathUtils","../../../../core/maybe","../../../../chunks/mat4","../../../../chunks/mat4f64","../../../../chunks/vec2f64","../../../../chunks/vec3f64","../../../../chunks/vec4","../../../../chunks/vec4f64","../../../../geometry/projection","../../../../geometry/support/aaBoundingBox","../../../../geometry/support/aaBoundingRect","../../../../geometry/support/centroid","../../../../geometry/support/coordsUtils","../../../../layers/graphics/dehydratedFeatures","../../../../layers/graphics/hydratedFeatures"],(function(e,t,n,o,r,i,s,u,a,l,c,m,f,h,d,p){"use strict";function y(e,t){if("point"===e.type)return b(e,t,!1);if(p.isHydratedGeometry(e))switch(e.type){case"extent":return b(e.center,t,!1);case"polygon":return b(e.centroid,t,!1);case"polyline":return b(g(e),t,!0);case"mesh":return b(e.origin,t,!1)}else switch(e.type){case"extent":return b(x(e),t,!0);case"polygon":return b(P(e),t,!0);case"polyline":return b(g(e),t,!0)}}function g(e){const t=e.paths[0];if(!t||0===t.length)return null;const n=h.getPointOnPath(t,h.getPathLength(t)/2);return d.makeDehydratedPoint(n[0],n[1],n[2],e.spatialReference)}function x(e){const n=t.isFinite(e.zmin);return d.makeDehydratedPoint(.5*(e.xmax+e.xmin),.5*(e.ymax+e.ymin),n?.5*(e.zmax+e.zmin):void 0,e.spatialReference)}function P(e){const t=e.rings[0];if(!t||0===t.length)return null;const n=f.ringsCentroid(e.rings,e.hasZ);return d.makeDehydratedPoint(n[0],n[1],n[2],e.spatialReference)}function b(e,t,n){const o=n?e:p.clonePoint(e);return t&&e?l.projectPoint(e,o,t)?o:null:o}function S(e,t,n,o=0){if(e){t||(t=m.create());const r=e;let i=.5*r.width*(n-1),s=.5*r.height*(n-1);return r.width<1e-7*r.height?i+=s/20:r.height<1e-7*r.width&&(s+=i/20),u.set(t,r.xmin-i-o,r.ymin-s-o,r.xmax+i+o,r.ymax+s+o),t}return null}function v(e,t){for(let n=0;n<e.geometries.length;++n){const o=e.geometries[n].getMutableAttribute("auxpos1");o&&o.data[3]!==t&&(o.data[3]=t,e.geometryVertexAttrsUpdated(n))}}function V(e,t){const o=a.clone(a.ONES);return n.isSome(e)&&(o[0]=e[0],o[1]=e[1],o[2]=e[2]),n.isSome(t)?o[3]=t:n.isSome(e)&&e.length>3&&(o[3]=e[3]),o}function A(e,t,o,r,i,s=[0,0,0,0]){for(let u=0;u<3;++u)n.isSome(e)&&null!=e[u]?s[u]=e[u]:n.isSome(o)&&null!=o[u]?s[u]=o[u]:s[u]=i[u];return n.isSome(t)?s[3]=t:n.isSome(r)?s[3]=r:s[3]=i[3],s}function k(e=s.ONES,t,o,r=1){const i=new Array(3);if(n.isNone(t)||n.isNone(o))i[0]=1,i[1]=1,i[2]=1;else{let n,r=0;for(let s=2;s>=0;s--){const u=e[s];let a;const l=null!=u,c=0===s&&!n&&!l,m=o[s];"symbol-value"===u||c?a=0!==m?t[s]/m:1:l&&"proportional"!==u&&isFinite(u)&&(a=0!==m?u/m:1),null!=a&&(i[s]=a,n=a,r=Math.max(r,Math.abs(a)))}for(let e=2;e>=0;e--)null==i[e]?i[e]=n:0===i[e]&&(i[e]=.001*r)}for(let n=2;n>=0;n--)i[n]/=r;return s.fromArray(i)}function R(e){return null!=e.isPrimitive}function w(e){return R(e)&&(e=[e.width,e.depth,e.height]),D(e)?null:"Symbol sizes may not be negative values"}function D(e){if(Array.isArray(e)){for(const t of e)if(!D(t))return!1;return!0}return null==e||e>=0}function M(e,t,n,i=r.create()){const s=e||0,u=t||0,a=n||0;return 0!==s&&o.rotateZ(i,i,-s/180*Math.PI),0!==u&&o.rotateX(i,i,u/180*Math.PI),0!==a&&o.rotateY(i,i,a/180*Math.PI),i}function O(e,t){return null!=t.minDemResolution?t.minDemResolution:c.isPoint(e)?t.minDemResolutionForPoints:.01*c.maximumDimension(e)}const z={"bottom-left":i.fromValues(0,0),bottom:i.fromValues(.5,0),"bottom-right":i.fromValues(1,0),left:i.fromValues(0,.5),center:i.fromValues(.5,.5),right:i.fromValues(1,.5),"top-left":i.fromValues(0,1),top:i.fromValues(.5,1),"top-right":i.fromValues(1,1)};e.computeCentroid=y,e.computeObjectRotation=M,e.computeObjectScale=k,e.demResolutionForBoundingBox=O,e.enlargeExtent=S,e.isValidSize=D,e.mixinColorAndOpacity=V,e.namedAnchorToHUDMaterialAnchorPos=z,e.overrideColor=A,e.updateVertexAttributeAuxpos1w=v,e.validateSymbolLayerSize=w,Object.defineProperty(e,"__esModule",{value:!0})}));
