/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.26/esri/copyright.txt for details.
*/
define(["exports","../../../../core/maybe","../../../../core/unitUtils","../../../../chunks/mat4","../../../../chunks/mat4f64","../../../../chunks/vec3f64","../../../../chunks/vec4","../../../../chunks/vec4f64","../../../../geometry/projection","../../../../geometry/support/aaBoundingBox","../../../../geometry/support/aaBoundingRect","../../../../geometry/support/centroid","../../../../geometry/support/coordsUtils","../../../../layers/graphics/dehydratedFeatures","../../../../layers/graphics/hydratedFeatures","../../webgl-engine/lib/VertexAttribute"],(function(e,t,n,r,i,o,u,s,a,l,c,m,h,d,f,g){"use strict";function y(e,t){if("point"===e.type)return b(e,t,!1);if(f.isHydratedGeometry(e))switch(e.type){case"extent":return b(e.center,t,!1);case"polygon":return b(e.centroid,t,!1);case"polyline":return b(p(e),t,!0);case"mesh":return b(e.origin,t,!1)}else switch(e.type){case"extent":return b(x(e),t,!0);case"polygon":return b(S(e),t,!0);case"polyline":return b(p(e),t,!0)}}function p(e){const t=e.paths[0];if(!t||0===t.length)return null;const n=h.getPointOnPath(t,h.getPathLength(t)/2);return d.makeDehydratedPoint(n[0],n[1],n[2],e.spatialReference)}function x(e){return d.makeDehydratedPoint(.5*(e.xmax+e.xmin),.5*(e.ymax+e.ymin),null!=e.zmin&&null!=e.zmax&&isFinite(e.zmin)&&isFinite(e.zmax)?.5*(e.zmax+e.zmin):void 0,e.spatialReference)}function S(e){const t=e.rings[0];if(!t||0===t.length)return null;const n=m.ringsCentroid(e.rings,!!e.hasZ);return d.makeDehydratedPoint(n[0],n[1],n[2],e.spatialReference)}function b(e,t,n){const r=n?e:f.clonePoint(e);return t&&e?a.projectPoint(e,r,t)?r:null:r}function P(e,t,n,r=0){if(e){t||(t=c.create());const i=e;let o=.5*i.width*(n-1),s=.5*i.height*(n-1);return i.width<1e-7*i.height?o+=s/20:i.height<1e-7*i.width&&(s+=o/20),u.set(t,i.xmin-o-r,i.ymin-s-r,i.xmax+o+r,i.ymax+s+r),t}return null}function A(e,t){for(let n=0;n<e.geometries.length;++n){const r=e.geometries[n].getMutableAttribute(g.VertexAttribute.AUXPOS1);r&&r.data[3]!==t&&(r.data[3]=t,e.geometryVertexAttrsUpdated(e.geometries[n]))}}function v(e,n){const r=s.clone(s.ONES);return t.isSome(e)&&(r[0]=e[0],r[1]=e[1],r[2]=e[2]),t.isSome(n)?r[3]=n:t.isSome(e)&&e.length>3&&(r[3]=e[3]),r}function w(e,n,r,i,o,u=[0,0,0,0]){for(let s=0;s<3;++s)t.isSome(e)&&null!=e[s]?u[s]=e[s]:t.isSome(r)&&null!=r[s]?u[s]=r[s]:u[s]=o[s];return t.isSome(n)?u[3]=n:t.isSome(i)?u[3]=i:u[3]=o[3],u}function R(e=o.ONES,n,r,i=1){const u=new Array(3);if(t.isNone(n)||t.isNone(r))u[0]=1,u[1]=1,u[2]=1;else{let t,i=0;for(let o=2;o>=0;o--){const s=e[o];let a;const l=null!=s,c=0===o&&!t&&!l,m=r[o];"symbol-value"===s||c?a=0!==m?n[o]/m:1:l&&"proportional"!==s&&isFinite(s)&&(a=0!==m?s/m:1),null!=a&&(u[o]=a,t=a,i=Math.max(i,Math.abs(a)))}for(let e=2;e>=0;e--)null==u[e]?u[e]=t:0===u[e]&&(u[e]=.001*i)}for(let t=2;t>=0;t--)u[t]/=i;return o.fromArray(u)}function z(e){return null!=e.isPrimitive}function M(e){return k(z(e)?[e.width,e.depth,e.height]:e)?null:"Symbol sizes may not be negative values"}function k(e){if(Array.isArray(e)){for(const t of e)if(!k(t))return!1;return!0}return null==e||e>=0}function F(e,t,n,o=i.create()){const u=e||0,s=t||0,a=n||0;return 0!==u&&r.rotateZ(o,o,-u/180*Math.PI),0!==s&&r.rotateX(o,o,s/180*Math.PI),0!==a&&r.rotateY(o,o,a/180*Math.PI),o}function O(e,t,r){if(null!=r.minDemResolution)return r.minDemResolution;const i=n.getMetersPerUnitForSR(t),o=l.width(e)*i,u=l.depth(e)*i,s=l.height(e)*(t.isGeographic?1:i);return 0===o&&0===u&&0===s?r.minDemResolutionForPoints:.01*Math.max(o,u,s)}e.computeCentroid=y,e.computeObjectRotation=F,e.computeObjectScale=R,e.demResolutionForBoundingBox=O,e.enlargeExtent=P,e.isValidSize=k,e.mixinColorAndOpacity=v,e.overrideColor=w,e.updateVertexAttributeAuxpos1w=A,e.validateSymbolLayerSize=M,Object.defineProperty(e,Symbol.toStringTag,{value:"Module"})}));
