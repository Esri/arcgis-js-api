/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.24/esri/copyright.txt for details.
*/
import t from"../../support/debugFlags.js";let e,n,i=!1,l=!1,o=!1,s=!1,a=null;function c(t,e){if(!l||!n)return;u();const i=n;let o=0;for(let n=0;n<t.accBinsNumX;n++)for(let e=0;e<t.accBinsNumY;e++){const l=t.accBins[n][t.accBinsNumY-1-e];o+=l.length;const s=n*t.accBinsSizeX,a=(n+1)*t.accBinsSizeX,c=e*t.accBinsSizeY,r=(e+1)*t.accBinsSizeY;i.fillText(l.length.toFixed(),s+5,c+15),h(s,a,c,r,"blue")}i.fillText("total totalShownLabels: "+o,70,40),i.fillText("total visible labels: "+e.size,70,50),i.fillText("total numTests: "+t.accNumTests,70,30)}function r(n){o=t.DECONFLICTOR_SHOW_VISIBLE,s=t.DECONFLICTOR_SHOW_INVISIBLE,i=o||s,l=t.DECONFLICTOR_SHOW_GRID,a=null,i||l?a=()=>p(n):e&&(e.parentElement.removeChild(e),e=null)}function u(){a&&(a(),a=null)}function p(t){null==e&&(e=document.createElement("canvas"),e.setAttribute("id","canvas2d"),t.surface.parentElement.style.position="relative",t.surface.parentElement.appendChild(e));const{state:i}=t,{camera:l,pixelRatio:o}=i,{width:s,height:a}=l,c=s*o,r=a*o;e.setAttribute("width",`${c}px`),e.setAttribute("height",`${r}px`),e.setAttribute("style",`position:absolute;left:0px;top:0px;display:block;pointer-events:none;width:${s}px;height:${a}px`),n=e.getContext("2d"),n.clearRect(0,0,s,a),n.font="12px Arial"}function h(t,i,l,o,s){u();const a=e.height,c=n;c.beginPath(),c.lineWidth=1,c.strokeStyle=s,c.moveTo(t,a-l),c.lineTo(i,a-l),c.stroke(),c.lineTo(i,a-o),c.stroke(),c.lineTo(i,a-l),c.stroke(),c.lineTo(t,a-l),c.stroke(),c.lineTo(t,a-l),c.stroke(),c.closePath()}function f(t,e){i&&(e&&o||!e&&s)&&h(t.aabr[0],t.aabr[2],t.aabr[1],t.aabr[3],e?"green":"red")}export{c as drawAccelerationStruct,f as drawPoly,r as prepare};
