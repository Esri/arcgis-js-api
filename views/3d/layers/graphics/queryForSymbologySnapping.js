/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.26/esri/copyright.txt for details.
*/
define(["exports","../../../../chunks/_rollupPluginBabelHelpers","../../../../core/maybe","../../../../core/promiseUtils","../../../../support/arcadeOnDemand"],(function(e,n,r,t,o){"use strict";function i(e,n,r){return s.apply(this,arguments)}function s(){return s=n._asyncToGenerator((function*(e,i,s){if(r.isNone(e)||0===i.candidates.length)return a;const c=e.graphics3DGraphicsByObjectID??e.graphics3DGraphics,u=[],d=[],{renderer:p}=e,l=r.isSome(p)&&"arcadeRequired"in p&&p.arcadeRequired?o.loadArcade():null,y=function(){var t=n._asyncToGenerator((function*(n,{graphic:t,graphics3DSymbol:o}){const i=yield l,a=yield e.getRenderingInfoAsync(t,p,i,{signal:s});return r.isNone(a)?[]:o.queryForSnapping(n,f,a,s)}));return function(e,n){return t.apply(this,arguments)}}(),{candidates:g,spatialReference:f}=i;for(let n=0;n<g.length;++n){const e=g[n],{objectId:t}=e,o="number"==typeof t?c?.get(t):void 0;if(r.isNone(o))continue;const{graphics3DSymbol:i}=o;i.symbologySnappingSupported&&(u.push(y(e,o)),d.push(n))}if(0===u.length)return a;const h=yield Promise.all(u);t.throwIfAborted(s);const b=[],m=[];for(let n=0;n<h.length;++n){const e=h[n],r=d[n];for(const n of e)b.push(n),m.push(r)}return{candidates:b,sourceCandidateIndices:m}})),s.apply(this,arguments)}const a={candidates:[],sourceCandidateIndices:[]};e.queryForSymbologySnapping=i,Object.defineProperty(e,Symbol.toStringTag,{value:"Module"})}));
