/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.25/esri/copyright.txt for details.
*/
define(["exports","../../../../core/maybe","../../../../chunks/mat4f64","../../../../chunks/vec3f64","../../../../geometry/projection","../../../../geometry/support/aaBoundingBox","../../../../geometry/support/coordsUtils","../../../../layers/graphics/dehydratedFeatures","./elevationAlignmentUtils","./graphicUtils","../../webgl-engine/lib/Object3D"],(function(e,t,n,o,r,i,a,c,l,s,p){"use strict";const u=o.create();function d(e,o,a,c,s,d,g,h){const m=a?a.length:0,y=e.clippingExtent;if(r.projectPointToVector(o,u,e.elevationProvider.spatialReference),t.isSome(y)&&!i.containsPoint(y,u))return null;r.projectPointToVector(o,u,e.renderCoordsHelper.spatialReference);const f=e.localOriginFactory.getOrigin(u),P=new p.Object3D({castShadow:!1,metadata:{layerUid:d,graphicUid:g,usesVerticalDistanceToGround:!0}});for(let t=0;t<m;t++){const e=n.IDENTITY;P.addGeometry(a[t],c[t],e,f,h)}return{object:P,sampledElevation:l.applyElevationAlignmentForHUD(P,o,e.elevationProvider,e.renderCoordsHelper,s)}}function g(e,n,o){const i=e.elevationContext,a=o.spatialReference;r.projectPointToVector(n,u,a),i.centerPointInElevationSR=c.makeDehydratedPoint(u[0],u[1],n.hasZ?u[2]:0,t.isSome(a)?a:null)}function h(e){switch(e.type){case"point":return e;case"polygon":case"extent":return s.computeCentroid(e);case"polyline":{const t=e.paths[0];if(!t||0===t.length)return null;const n=a.getPointOnPath(t,a.getPathLength(t)/2);return c.makeDehydratedPoint(n[0],n[1],n[2],e.spatialReference)}case"mesh":return e.origin}return null}e.createStageObjectForHUD=d,e.extendPointGraphicElevationContext=g,e.placePointOnGeometry=h,Object.defineProperties(e,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})}));
