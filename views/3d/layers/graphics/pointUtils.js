/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.26/esri/copyright.txt for details.
*/
define(["exports","../../../../core/maybe","../../../../chunks/vec3f64","../../../../geometry/projection","../../../../geometry/support/aaBoundingBox","../../../../geometry/support/coordsUtils","../../../../layers/graphics/dehydratedFeatures","./elevationAlignmentUtils","./graphicUtils","../../webgl-engine/lib/Object3D"],(function(e,t,n,o,r,i,a,c,l,s){"use strict";function p(e,n,i,a,l,p){const d=e.clippingExtent;if(o.projectPointToVector(n,g,e.elevationProvider.spatialReference),t.isSome(d)&&!r.containsPoint(d,g))return null;o.projectPointToVector(n,g,e.renderCoordsHelper.spatialReference);const u=e.localOriginFactory.getOrigin(g),y=new s.Object3D({castShadow:!1,metadata:{layerUid:e.layer.uid,graphicUid:l,usesVerticalDistanceToGround:!0}});i.shaderTransformer=p,i.localOrigin=u,y.addGeometry(i);return{object:y,sampledElevation:c.applyElevationAlignmentForHUD(y,n,e.elevationProvider,e.renderCoordsHelper,a)}}function d(e,n,r){const i=e.elevationContext,c=r.spatialReference;o.projectPointToVector(n,g,c),i.centerPointInElevationSR=a.makeDehydratedPoint(g[0],g[1],n.hasZ?g[2]:0,t.isSome(c)?c:null)}function u(e){switch(e.type){case"point":return e;case"polygon":case"extent":return l.computeCentroid(e);case"polyline":{const t=e.paths[0];if(!t||0===t.length)return null;const n=i.getPointOnPath(t,i.getPathLength(t)/2);return a.makeDehydratedPoint(n[0],n[1],n[2],e.spatialReference)}case"mesh":return e.origin}return null}const g=n.create();e.createStageObject=p,e.extendPointGraphicElevationContext=d,e.placePointOnGeometry=u,Object.defineProperty(e,Symbol.toStringTag,{value:"Module"})}));
