/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.26/esri/copyright.txt for details.
*/
define(["../../../../chunks/_rollupPluginBabelHelpers","../../../../core/asyncUtils","../../../../core/maybe","../../../../core/promiseUtils","./Graphics3DCalloutSymbolLayerFactory","./Graphics3DLineCalloutSymbolLayer","./Graphics3DSymbol"],(function(t,o,r,e,l,a,i){"use strict";let c=function(i){function c(t,o,r){var e;return(e=i.call(this,t,o,r)||this)._calloutSymbolLayer=null,e.symbol.hasVisibleCallout()&&(e._calloutSymbolLayer=l.make(e.symbol,o)),e}t._inheritsLoose(c,i);var y=c.prototype;return y.doLoad=function(){var r=t._asyncToGenerator((function*(t){const r=this._calloutSymbolLayer?o.result(this._calloutSymbolLayer.load()):null;try{yield i.prototype.doLoad.call(this,t),e.throwIfAborted(t)}catch(l){throw this._calloutSymbolLayer?.abortLoad(),l}r&&(yield r)}));function l(t){return r.apply(this,arguments)}return l}(),y.destroy=function(){i.prototype.destroy.call(this),this._calloutSymbolLayer=r.destroyMaybe(this._calloutSymbolLayer)},y.createGraphics3DGraphic=function(t,o){const e=i.prototype.createGraphics3DGraphic.call(this,t,o);if(r.isSome(this._calloutSymbolLayer)&&r.isSome(e)){const o=this._createCalloutGraphic(t);r.isSome(o)&&e.addAuxiliaryGraphic(o)}return e},y.globalPropertyChanged=function(t,o){return!!i.prototype.globalPropertyChanged.call(this,t,o)&&(!this._calloutSymbolLayer||this._calloutSymbolLayer.globalPropertyChanged(t,o,(t=>this._getCalloutGraphicLayer(t))))},y.updateGeometry=function(t,o){const r=i.prototype.updateGeometry.call(this,t,o);if(r&&this._calloutSymbolLayer){const r=this._getCalloutGraphicLayer(t);if(r)return this._calloutSymbolLayer.updateGeometry(r,o)}return r},y._createCalloutGraphic=function(t){const o=t.renderingInfo;return t.renderingInfo=new a.LineCalloutSymbolLayerRenderingInfo(o.renderer,o.symbol),this._calloutSymbolLayer.createGraphics3DGraphic(t)},y._getCalloutGraphicLayer=function(t){for(const o of t._auxiliaryLayers)if(o.graphics3DSymbolLayer===this._calloutSymbolLayer)return o},c}(i);return c}));
