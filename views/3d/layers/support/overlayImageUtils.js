/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.19/esri/copyright.txt for details.
*/
define(["exports","../../../../geometry/support/aaBoundingRect","../../webgl-engine/lib/Geometry","../../webgl-engine/lib/GeometryUtil"],(function(e,t,n,i){"use strict";function r(e,n,i){const r=t.width(e)/t.height(e),o={width:i,height:i};return r>1.0001?o.height=i/r:r<.9999&&(o.width=i*r),o.width=Math.round(o.width/(t.width(e)/t.width(n))),o.height=Math.round(o.height/(t.height(e)/t.height(n))),o}function o(e,t){const n=[[e[0],e[1],t],[e[2],e[1],t],[e[2],e[3],t],[e[0],e[3],t]];return i.createSquareGeometry(n)}function a(e,i,r){if(!t.intersects(e,i))return o(i,r);const a=[e[1]-i[1],Math.min(e[3],i[3])-Math.max(e[1],i[1]),i[3]-e[3],123456],u=[e[0]-i[0],Math.min(e[2],i[2])-Math.max(e[0],i[0]),i[2]-e[2],123456],c=i[2]-i[0],s=i[3]-i[1],l=u[0]>0&&u[2]>0?3:2,d=a[0]>0&&a[2]>0?3:2,g=(d+1)*(l+1),m=new Float64Array(3*g),w=new Float32Array(2*g),y=new Uint32Array(6*(d*l-1));let f=0,p=0,x=0,M=0,v=0;for(let t=0;t<4;t++){const e=a[t];if(e<=0)continue;let n=0;for(let o=0;o<4;o++){const e=u[o];e<=0||(m[p++]=i[0]+n,m[p++]=i[1]+f,m[p++]=r,w[x++]=n/c,w[x++]=f/s,o<3&&t<3&&(1!==o||1!==t)&&(y[v++]=M,y[v++]=M+1,y[v++]=M+l+1,y[v++]=M+1,y[v++]=M+l+2,y[v++]=M+l+1),M++,n+=e)}f+=e}const G=new Uint32Array(y.length);return new n.Geometry([["position",{size:3,data:m,exclusive:!0}],["normal",{size:3,data:h,exclusive:!0}],["uv0",{size:2,data:w,exclusive:!0}]],[["position",y],["normal",G],["uv0",y]])}const h=[0,0,1];e.computeImageExportSize=r,e.createGeometryForExtent=o,e.createOuterImageGeometry=a,Object.defineProperty(e,"__esModule",{value:!0})}));
