/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.18/esri/copyright.txt for details.
*/
define(["exports","../../../../geometry/support/aaBoundingRect","../../webgl-engine/lib/Util","../../webgl-engine/lib/GeometryData","../../webgl-engine/lib/GeometryUtil"],(function(t,e,n,r,i){"use strict";function o(t,e){const n=[[t[0],t[1],e],[t[2],t[1],e],[t[2],t[3],e],[t[0],t[3],e]];return i.createSquareGeometry(n)}const a=new Float32Array([0,0,1]);t.computeImageExportSize=function(t,n,r){const i=e.width(t)/e.height(t),o={width:r,height:r};return i>1.0001?o.height=r/i:i<.9999&&(o.width=r*i),o.width=Math.round(o.width/(e.width(t)/e.width(n))),o.height=Math.round(o.height/(e.height(t)/e.height(n))),o},t.createGeometryForExtent=o,t.createOuterImageGeometry=function(t,i,s){if(!e.intersects(t,i))return o(i,s);const h=[t[1]-i[1],Math.min(t[3],i[3])-Math.max(t[1],i[1]),i[3]-t[3],123456],c=[t[0]-i[0],Math.min(t[2],i[2])-Math.max(t[0],i[0]),i[2]-t[2],123456],l=i[2]-i[0],g=i[3]-i[1],u=c[0]>0&&c[2]>0?3:2,d=h[0]>0&&h[2]>0?3:2,w=(d+1)*(u+1),m=new Float64Array(3*w),y=new Float32Array(2*w),A=new Uint32Array(6*(d*u-1));let f=0,x=0,M=0,O=0,V=0;for(let t=0;t<4;t++){const e=h[t];if(e<=0)continue;let n=0;for(let e=0;e<4;e++){const r=c[e];r<=0||(m[x++]=i[0]+n,m[x++]=i[1]+f,m[x++]=s,y[M++]=n/l,y[M++]=f/g,e<3&&t<3&&(1!==e||1!==t)&&(A[V++]=O,A[V++]=O+1,A[V++]=O+u+1,A[V++]=O+1,A[V++]=O+u+2,A[V++]=O+u+1),O++,n+=r)}f+=e}const b={};b[n.VertexAttrConstants.POSITION]={size:3,data:m},b[n.VertexAttrConstants.NORMAL]={size:3,data:a},b[n.VertexAttrConstants.UV0]={size:2,data:y};const p={},C=new Uint32Array(A.length);for(let t=0;t<C.length;t++)C[t]=0;return p[n.VertexAttrConstants.POSITION]=A,p[n.VertexAttrConstants.NORMAL]=C,p[n.VertexAttrConstants.UV0]=A,new r.GeometryData(b,p)},Object.defineProperty(t,"__esModule",{value:!0})}));
