/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.26/esri/copyright.txt for details.
*/
define(["exports","../../../../chunks/_rollupPluginBabelHelpers","../../../../chunks/tslib.es6","../../../../geometry","../../../../core/Handles","../../../../core/maybe","../../../../core/reactiveUtils","../../../../core/accessorSupport/decorators/property","../../../../core/accessorSupport/ensureType","../../../../core/arrayUtils","../../../../core/accessorSupport/decorators/subclass","../../../../core/support/WatchUpdatingTracking","../../../support/TileTreeDebugger","../../../../geometry/Polygon"],(function(e,t,r,i,a,o,n,s,c,u,l,g,p,d){"use strict";e.FeatureTileTree3DDebugger=function(e){function r(t){var r;return(r=e.call(this,t)||this)._watchUpdatingTracking=new g.WatchUpdatingTracking,r._handles=new a,r}t._inheritsLoose(r,e);var i=r.prototype;return i.initialize=function(){const{featureTiles:e}=this.view;this._handles.add(e.addClient()),this._watchUpdatingTracking.addOnCollectionChange((()=>e?.tiles),(()=>this.update()),n.initial)},i.destroy=function(){this._handles=o.destroyMaybe(this._handles),this._watchUpdatingTracking.destroy()},i.getTiles=function(){const e=e=>{const[t,r,i]=e.lij;return d.fromExtent(this.view.featureTiles.tilingScheme.getExtentGeometry(t,r,i))};return this.view.featureTiles.tiles.toArray().sort(((e,t)=>e.loadPriority-t.loadPriority)).map((t=>({...t,geometry:e(t)})))},t._createClass(r,[{key:"updating",get:function(){return this._watchUpdatingTracking?.updating??!1}}]),r}(p.TileTreeDebugger),r.__decorate([s.property()],e.FeatureTileTree3DDebugger.prototype,"_watchUpdatingTracking",void 0),r.__decorate([s.property()],e.FeatureTileTree3DDebugger.prototype,"updating",null),r.__decorate([s.property()],e.FeatureTileTree3DDebugger.prototype,"view",void 0),e.FeatureTileTree3DDebugger=r.__decorate([l.subclass("esri.views.3d.layers.support.FeatureTileTree3DDebugger")],e.FeatureTileTree3DDebugger),Object.defineProperty(e,Symbol.toStringTag,{value:"Module"})}));
