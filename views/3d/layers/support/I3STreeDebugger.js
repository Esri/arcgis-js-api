/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.18/esri/copyright.txt for details.
*/
define(["exports","../../../../chunks/_rollupPluginBabelHelpers","../../../../chunks/tslib.es6","../../../../core/has","../../../../core/maybe","../../../../core/Logger","../../../../core/accessorSupport/ensureType","../../../../core/accessorSupport/decorators/property","../../../../core/accessorSupport/decorators/subclass","../../../../core/urlUtils","../../../../core/uuid","../../../../portal/support/resourceExtension","../../../../geometry/Polygon","../../../../geometry","../../../../chunks/vec3f64","../../../../chunks/vec3","../../../../chunks/mat4","../../../../geometry/projection","../../../../chunks/mat4f64","./TileTree3DDebugger"],(function(e,r,t,o,s,c,u,i,p,n,a,l,f,h,g,y,d,b,S,j){"use strict";e.I3STreeDebugger=function(e){function t(r){return e.call(this,r)||this}return r._inheritsLoose(t,e),t.prototype.update=function(){if(this.clear(),!this.enabled)return;const e=this.lv.getVisibleNodes(),r=this.view.renderSpatialReference,t=this.nodeSR,o=e.map((e=>function(e,r,t){const o=e.serviceObb;if(s.isNone(o)||s.isNone(r))return null;d.fromQuat(m,o.quaternion),y.copy(v,o.center),b.projectBuffer(v,t,0,v,r,0,1),m[12]=v[0],m[13]=v[1],m[14]=v[2];const c=[[],[],[]];y.copy(v,o.halfSize),y.transformMat4(v,v,m),b.projectBuffer(v,r,0,v,t,0,1),c[0].push([v[0],v[1]]),y.copy(v,o.halfSize),v[0]=-v[0],y.transformMat4(v,v,m),b.projectBuffer(v,r,0,v,t,0,1),c[0].push([v[0],v[1]]),y.copy(v,o.halfSize),v[0]=-v[0],v[1]=-v[1],y.transformMat4(v,v,m),b.projectBuffer(v,r,0,v,t,0,1),c[0].push([v[0],v[1]]),y.copy(v,o.halfSize),v[1]=-v[1],y.transformMat4(v,v,m),b.projectBuffer(v,r,0,v,t,0,1),c[0].push([v[0],v[1]]),c[1].push(c[0][0]),c[1].push(c[0][1]),y.copy(v,o.halfSize),v[0]=-v[0],v[2]=-v[2],y.transformMat4(v,v,m),b.projectBuffer(v,r,0,v,t,0,1),c[1].push([v[0],v[1]]),y.copy(v,o.halfSize),v[2]=-v[2],y.transformMat4(v,v,m),b.projectBuffer(v,r,0,v,t,0,1),c[1].push([v[0],v[1]]),c[2].push(c[0][0]),c[2].push(c[0][3]),y.copy(v,o.halfSize),v[1]=-v[1],v[2]=-v[2],y.transformMat4(v,v,m),b.projectBuffer(v,r,0,v,t,0,1),c[2].push([v[0],v[1]]),c[2].push(c[1][3]);const u=new f({rings:c,spatialReference:t});return{lij:[e.level,e.childCount],id:e.id,geometry:u}}(e,r,t))).sort(((e,r)=>e.lij[0]===r.lij[0]?e.id>r.id?-1:1:e.lij[0]-r.lij[0]));this._update(o,(e=>e.geometry),{getLabel:e=>`${e.lij[0]}/${e.id}/${e.lij[1]}`})},t}(j.TileTree3DDebugger),t.__decorate([i.property({constructOnly:!0})],e.I3STreeDebugger.prototype,"lv",void 0),t.__decorate([i.property({constructOnly:!0})],e.I3STreeDebugger.prototype,"nodeSR",void 0),e.I3STreeDebugger=t.__decorate([p.subclass("esri.views.3d.layers.support.I3STreeDebugger")],e.I3STreeDebugger);const m=S.create(),v=g.create();Object.defineProperty(e,"__esModule",{value:!0})}));
