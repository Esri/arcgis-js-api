/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.19/esri/copyright.txt for details.
*/
define(["exports","../../../../chunks/_rollupPluginBabelHelpers","../../../../chunks/tslib.es6","../../../../core/has","../../../../core/maybe","../../../../core/Logger","../../../../core/accessorSupport/ensureType","../../../../core/accessorSupport/decorators/property","../../../../core/accessorSupport/decorators/subclass","../../../../core/urlUtils","../../../../core/uuid","../../../../portal/support/resourceExtension","../../../../geometry/Polygon","../../../../geometry","../../../../chunks/vec3f64","../../../../chunks/vec3","../../../../chunks/mat4","../../../../geometry/projection","../../../../chunks/mat4f64","../../../support/TileTreeDebugger"],(function(e,r,o,t,s,c,u,p,n,i,a,l,f,h,g,y,b,S,d,m){"use strict";function j(e,r,o){const t=e.serviceObb;if(s.isNone(t)||s.isNone(r))return null;b.fromQuat(T,t.quaternion),y.copy(v,t.center),S.projectBuffer(v,o,0,v,r,0,1),T[12]=v[0],T[13]=v[1],T[14]=v[2];const c=[[],[],[]];y.copy(v,t.halfSize),y.transformMat4(v,v,T),S.projectBuffer(v,r,0,v,o,0,1),c[0].push([v[0],v[1]]),y.copy(v,t.halfSize),v[0]=-v[0],y.transformMat4(v,v,T),S.projectBuffer(v,r,0,v,o,0,1),c[0].push([v[0],v[1]]),y.copy(v,t.halfSize),v[0]=-v[0],v[1]=-v[1],y.transformMat4(v,v,T),S.projectBuffer(v,r,0,v,o,0,1),c[0].push([v[0],v[1]]),y.copy(v,t.halfSize),v[1]=-v[1],y.transformMat4(v,v,T),S.projectBuffer(v,r,0,v,o,0,1),c[0].push([v[0],v[1]]),c[1].push(c[0][0]),c[1].push(c[0][1]),y.copy(v,t.halfSize),v[0]=-v[0],v[2]=-v[2],y.transformMat4(v,v,T),S.projectBuffer(v,r,0,v,o,0,1),c[1].push([v[0],v[1]]),y.copy(v,t.halfSize),v[2]=-v[2],y.transformMat4(v,v,T),S.projectBuffer(v,r,0,v,o,0,1),c[1].push([v[0],v[1]]),c[2].push(c[0][0]),c[2].push(c[0][3]),y.copy(v,t.halfSize),v[1]=-v[1],v[2]=-v[2],y.transformMat4(v,v,T),S.projectBuffer(v,r,0,v,o,0,1),c[2].push([v[0],v[1]]),c[2].push(c[1][3]);const u=new f({rings:c,spatialReference:o});return{lij:[e.level,e.childCount,0],label:e.id,geometry:u}}e.I3STreeDebugger=function(e){function o(r){return e.call(this,r)||this}return r._inheritsLoose(o,e),o.prototype.getTiles=function(){const e=this.lv.getVisibleNodes(),r=this.view.renderSpatialReference,o=this.nodeSR;return e.map((e=>j(e,r,o))).sort(((e,r)=>e.lij[0]===r.lij[0]?e.label>r.label?-1:1:e.lij[0]-r.lij[0]))},o}(m.TileTreeDebugger),o.__decorate([p.property({constructOnly:!0})],e.I3STreeDebugger.prototype,"lv",void 0),o.__decorate([p.property({constructOnly:!0})],e.I3STreeDebugger.prototype,"nodeSR",void 0),e.I3STreeDebugger=o.__decorate([n.subclass("esri.views.3d.layers.support.I3STreeDebugger")],e.I3STreeDebugger);const T=d.create(),v=g.create();Object.defineProperty(e,"__esModule",{value:!0})}));
