/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.24/esri/copyright.txt for details.
*/
import"../../../../core/has.js";import{isSome as r}from"../../../../core/maybe.js";import{f as e}from"../../../../chunks/vec4f64.js";import{BufferViewMat3f64 as t,BufferViewVec3f64 as a,BufferViewVec4f as o}from"../../../../geometry/support/buffer/BufferView.js";import{perVertexElevationAligner as n}from"../graphics/ElevationAligners.js";import{createMapSpaceUVCoords as i}from"./uvUtils.js";import{VertexAttribute as s}from"../../webgl-engine/lib/VertexAttribute.js";import{ColorMaterial as l}from"../../webgl-engine/materials/ColorMaterial.js";import{PatternMaterial as m}from"../../webgl-engine/materials/PatternMaterial.js";import{Style as c}from"../../webgl-engine/materials/PatternStyle.js";function f(r,e,t){return g(u(r),e,t)}function u(r){return r&&r.pattern||null}function g(t,a,o){return r(t)?"none"===t.style||"solid"===t.style?("none"===t.style&&(a.color=e(0,0,0,0),a.transparent=!0),new l(a)):(a.style=p(t.style),a.draped=o.isDraped,new m(a)):new l(a)}function p(r){switch(r){case"horizontal":return c.Horizontal;case"vertical":return c.Vertical;case"cross":return c.Cross;case"forward-diagonal":return c.ForwardDiagonal;case"backward-diagonal":return c.BackwardDiagonal;case"diagonal-cross":return c.DiagonalCross;default:return}}function d(r){return r.material instanceof m&&!r.material.parameters.draped}function y(r,e){if(d(r)){const n=r.geometry.vertexAttributes,l=n.get(s.POSITION).data,m=n.get(s.UVMAPSPACE).data,c=n.get(s.BOUNDINGRECT).data;i(o.fromTypedArray(m),a.fromTypedArray(l),e,t.fromTypedArray(c))}}function w(r,e,t,a){const o=n(r,e,t,a),i=r.stageObject.geometryRecords;for(let n=0;n<i.length;n++)y(i[n],a);return o}export{f as createMaterial,g as createMaterialFromPattern,p as parsePatternStyle,d as requiresUVUpdates,y as updateMapSpaceUVCoords,w as uvElevationAligner};
