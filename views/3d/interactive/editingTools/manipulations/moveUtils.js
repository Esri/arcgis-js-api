/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.18/esri/copyright.txt for details.
*/
define(["exports","../../../../../core/maybe","../../../support/mathUtils","../../../../../geometry/support/aaBoundingRect","../../../../../chunks/vec2f64","../../../../../chunks/vec2","../../../../../geometry/geometryEngine","../../../../../chunks/mat2","../../../../../chunks/mat2f64","../../../../interactive/dragEventPipeline"],(function(e,t,n,r,a,o,c,i,s,l){"use strict";const u=s.create(),p=r.create(),f=a.create();e.createGraphicMoveDragPipeline=function(e,t,n){const r=e.graphic,a=(e,n)=>t({action:e,graphic:r,dxScreen:n.screenDeltaX,dyScreen:n.screenDeltaY});return n(((e,t,n)=>{t.next((e=>("start"===e.action&&a("start",e),e))).next(l.dragGraphic(r)).next((e=>{switch(e.action){case"start":case"update":(e.translationX||e.translationY||e.translationZ)&&a("update",e);break;case"end":a("end",e)}return e})),n.next(l.resetGraphic(r)).next((()=>{a("end",{screenDeltaX:0,screenDeltaY:0})}))}))},e.primaryShapeOrientation=function(e){if(t.isNone(e)||"polyline"!==e.type&&"polygon"!==e.type)return 0;const a=c.convexHull(e),s=a&&a.rings&&a.rings[0];if(!s)return 0;!function(e){let t=0,n=0;for(const r of e)t+=r[0],n+=r[1];t/=e.length,n/=e.length;for(const r of e)r[0]-=t,r[1]-=n}(s);const l=[];for(let e=0;e<s.length-1;e++){const t=Math.atan2(s[e+1][1]-s[e][1],s[e+1][0]-s[e][0]),r=n.cyclical2PI.normalize(t)%(Math.PI/2);l.push(r)}const h=l.sort(((e,t)=>e-t));let g=null,d=0,m=Number.POSITIVE_INFINITY,y=0;for(const e of h){if(e===g)continue;g=e,i.fromRotation(u,e),r.empty(p);for(const e of s)o.transformMat2(f,e,u),r.expandPointInPlace(p,f);const t=r.area(p);((t>m?m/t:t/m)>=.99&&e<d||t<m)&&(d=e,m=t),y=Math.max(y,t)}return m/y>=.95?0:d},Object.defineProperty(e,"__esModule",{value:!0})}));
