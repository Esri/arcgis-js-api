/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.26/esri/copyright.txt for details.
*/
define(["exports","../../../../chunks/_rollupPluginBabelHelpers","../../../../core/maybe","../../../../chunks/mat4","../../../../chunks/mat4f64","../../../../chunks/vec4f32","./Object3DVisualElement","../../support/engineContent/line","../../webgl-engine/lib/Material","../../webgl-engine/materials/LineMarkerMaterial"],(function(e,t,r,i,a,s,n,l,o,c){"use strict";let m=function(e){function a(t,i){var a;return(a=e.call(this,t)||this)._hasExternalMaterial=!1,a._renderOccluded=o.RenderOccludedFlag.OccludeAndTransparent,a._width=1,a._color=s.fromValues(1,0,1,1),a._placement="end",a._textureId=null,a._material=i,a._hasExternalMaterial=r.isSome(i),a.applyProps(t),a}t._inheritsLoose(a,e);var n=a.prototype;return n.setGeometryFromSegment=function(e,t){const r=e.endRenderSpace;this.transform=i.fromTranslation(h,r),this._normal=t;const{points:a}=e.createRenderGeometry(r,this.view.renderCoordsHelper);this.geometry=[a]},n.createExternalResources=function(){this._hasExternalMaterial||(this._material=new c.LineMarkerMaterial({width:this._width,color:this._color,placement:this._placement,renderOccluded:this._renderOccluded,textureId:this._textureId}))},n.destroyExternalResources=function(){this._hasExternalMaterial||(this._material=null)},n.createGeometries=function(e){for(const t of l.lineStripsToParameters(this.geometry,this.normal)){const i=l.createGeometry(r.unwrap(this._material),t);e.addGeometry(i)}},n.forEachExternalMaterial=function(e){this._hasExternalMaterial||e(r.unwrap(this._material))},t._createClass(a,[{key:"renderOccluded",get:function(){return r.isSome(this._material)?this._material.parameters.renderOccluded:this._renderOccluded},set:function(e){this._renderOccluded=e,r.isSome(this._material)&&this._material.setParameters({renderOccluded:e})}},{key:"geometry",get:function(){return this._geometry},set:function(e){this._geometry=e,this.recreateGeometry()}},{key:"normal",get:function(){return this._normal},set:function(e){this._normal=e,this.recreateGeometry()}},{key:"width",get:function(){return r.isSome(this._material)?this._material.parameters.width:this._width},set:function(e){this._width=e,r.isSome(this._material)&&this._material.setParameters({width:e})}},{key:"color",get:function(){return r.isSome(this._material)?this._material.parameters.color:this._color},set:function(e){this._color=s.clone(e),r.isSome(this._material)&&this._material.setParameters({color:this._color})}},{key:"placement",get:function(){return r.isSome(this._material)?this._material.parameters.placement:this._placement},set:function(e){this._placement=e,r.isSome(this._material)&&this._material.setParameters({placement:this._placement})}},{key:"textureId",get:function(){return r.isSome(this._material)?this._material.parameters.textureId:this._textureId},set:function(e){this._textureId=e,r.isSome(this._material)&&this._material.setParameters({textureId:e})}}]),a}(n.Object3DVisualElement);const h=a.create();e.MarkerVisualElement=m,Object.defineProperty(e,Symbol.toStringTag,{value:"Module"})}));
