/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.26/esri/copyright.txt for details.
*/
define(["exports","../../../../chunks/_rollupPluginBabelHelpers","../../../../core/maybe","../../../../chunks/mat4","../../../../chunks/vec2","../../../../chunks/vec2f64","../../../../chunks/vec3","../../../../chunks/vec3f64","../../../../chunks/vec4","../../../../chunks/vec4f64","./Object3DVisualElement","../../webgl-engine/lib/Attribute","../../webgl-engine/lib/Geometry","../../webgl-engine/lib/Material","../../webgl-engine/lib/VertexAttribute","../../webgl-engine/materials/CheckerBoardMaterial"],(function(e,t,r,i,c,n,o,s,a,l,u,h,d,_,f,g){"use strict";let m=function(e){function u(t){var r;return(r=e.call(this,t)||this)._checkerBoardMaterial=null,r._renderOccluded=_.RenderOccludedFlag.OccludeAndTransparent,r._geometry=null,r._size=n.fromValues(1,1),r._color1=l.fromValues(1,.5,0,.5),r._color2=l.fromValues(1,1,1,.5),r.applyProps(t),r}t._inheritsLoose(u,e);var m=u.prototype;return m._updateMaterial=function(){r.isSome(this._checkerBoardMaterial)&&this._checkerBoardMaterial.setParameters({size:this._size,color1:this._color1,color2:this._color2,renderOccluded:this._renderOccluded})},m.createExternalResources=function(){this._checkerBoardMaterial=new g.CheckerBoardMaterial({size:this._size,color1:this._color1,color2:this._color2,transparent:!0,writeDepth:!1,polygonOffset:!0,renderOccluded:_.RenderOccludedFlag.OccludeAndTransparent})},m.destroyExternalResources=function(){this._checkerBoardMaterial=null},m.forEachExternalMaterial=function(e){r.isSome(this._checkerBoardMaterial)&&e(this._checkerBoardMaterial)},m.createGeometries=function(e){if(r.isNone(this._geometry)||r.isNone(this._checkerBoardMaterial))return;const t=y;i.getTranslation(t,this.transform);const c=this._geometry,n=[],a=s.create();c.position.forEach((e=>{o.subtract(a,e,t),n.push(a[0],a[1],a[2])}));const l=[];c.uv.forEach((e=>{l.push(e[0],e[1])}));const u=new d.Geometry(this._checkerBoardMaterial,[[f.VertexAttribute.POSITION,new h.Attribute(n,3,!0)],[f.VertexAttribute.UV0,new h.Attribute(l,2,!0)]],[[f.VertexAttribute.POSITION,c.triangleIndices],[f.VertexAttribute.UV0,c.triangleIndices]]);e.addGeometry(u)},m._geometryChanged=function(){this.recreateGeometry()},t._createClass(u,[{key:"renderOccluded",get:function(){return this._renderOccluded},set:function(e){e!==this._renderOccluded&&(this._renderOccluded=e,this._updateMaterial())}},{key:"geometry",get:function(){return this._geometry},set:function(e){this._geometry=e,this._geometryChanged()}},{key:"size",get:function(){return this._size},set:function(e){c.copy(this._size,e),this._updateMaterial()}},{key:"color1",get:function(){return this._color1},set:function(e){a.exactEquals(e,this._color1)||(a.copy(this._color1,e),this._updateMaterial())}},{key:"color2",get:function(){return this._color2},set:function(e){a.exactEquals(e,this._color2)||(a.copy(this._color2,e),this._updateMaterial())}}]),u}(u.Object3DVisualElement);const y=s.create();e.MeasurementAreaVisualElement=m,Object.defineProperty(e,Symbol.toStringTag,{value:"Module"})}));
