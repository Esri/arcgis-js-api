/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.21/esri/copyright.txt for details.
*/
define(["exports","../../../../chunks/_rollupPluginBabelHelpers","../../../../core/maybe","../../../../chunks/mat4","../../../../chunks/vec3","../../../../chunks/vec3f64","../../../../chunks/vec4","../../../../chunks/vec4f64","./Object3DVisualElement","../../webgl-engine/lib/Geometry","../../webgl-engine/materials/CheckerBoardMaterial"],(function(e,t,r,i,o,c,s,a,n,l,u){"use strict";let h=function(e){function n(t){var r;return(r=e.call(this,t)||this)._checkerBoardMaterial=null,r._renderOccluded=4,r._geometry=null,r._size=[1,1],r._color1=a.fromValues(1,.5,0,.5),r._color2=a.fromValues(1,1,1,.5),r.applyProps(t),r}t._inheritsLoose(n,e);var h=n.prototype;return h.updateMaterial=function(){r.isSome(this._checkerBoardMaterial)&&this._checkerBoardMaterial.setParameterValues({size:this._size,color1:this._color1,color2:this._color2,renderOccluded:this._renderOccluded})},h.createExternalResources=function(){this._checkerBoardMaterial=new u.CheckerBoardMaterial({size:this._size,color1:this._color1,color2:this._color2,transparent:!0,writeDepth:!1,polygonOffset:!0,renderOccluded:4})},h.destroyExternalResources=function(){this._checkerBoardMaterial=null},h.forEachExternalMaterial=function(e){r.isSome(this._checkerBoardMaterial)&&e(this._checkerBoardMaterial)},h.createGeometries=function(e){if(r.isNone(this._geometry)||r.isNone(this._checkerBoardMaterial))return;const t=d;i.getTranslation(t,this.transform);const s=this._geometry,a=[],n=c.create();s.position.forEach((e=>{o.subtract(n,e,t),a.push(n[0],n[1],n[2])}));const u=[];s.uv.forEach((e=>{u.push(e[0],e[1])}));const h=new l.Geometry([["position",{size:3,data:a,exclusive:!0}],["uv0",{size:2,data:u,exclusive:!0}]],[["position",s.triangleIndices],["uv0",s.triangleIndices]]);e.addGeometry(h,this._checkerBoardMaterial)},h.geometryChanged=function(){this.recreateGeometry()},t._createClass(n,[{key:"renderOccluded",get:function(){return this._renderOccluded},set:function(e){e!==this._renderOccluded&&(this._renderOccluded=e,this.updateMaterial())}},{key:"geometry",get:function(){return this._geometry},set:function(e){this._geometry=e,this.geometryChanged()}},{key:"size",get:function(){return this._size},set:function(e){this._size=e,this.updateMaterial()}},{key:"color1",get:function(){return this._color1},set:function(e){s.exactEquals(e,this._color1)||(s.copy(this._color1,e),this.updateMaterial())}},{key:"color2",get:function(){return this._color2},set:function(e){s.exactEquals(e,this._color2)||(s.copy(this._color2,e),this.updateMaterial())}}]),n}(n.Object3DVisualElement);const d=c.create();e.MeasurementAreaVisualElement=h,Object.defineProperty(e,"__esModule",{value:!0})}));
