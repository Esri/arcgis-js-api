/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.25/esri/copyright.txt for details.
*/
define(["exports","../../../../chunks/_rollupPluginBabelHelpers","../../../../core/maybe","../../../../chunks/mat4","../../../../chunks/vec2","../../../../chunks/vec2f64","../../../../chunks/vec3","../../../../chunks/vec3f64","../../../../chunks/vec4","../../../../chunks/vec4f64","./Object3DVisualElement","../../webgl-engine/lib/Geometry","../../webgl-engine/lib/Material","../../webgl-engine/lib/VertexAttribute","../../webgl-engine/materials/CheckerBoardMaterial"],(function(e,t,r,c,i,o,n,s,a,l,u,h,d,_,f){"use strict";let g=function(e){function u(t){var r;return(r=e.call(this,t)||this)._checkerBoardMaterial=null,r._renderOccluded=d.RenderOccludedFlag.OccludeAndTransparent,r._geometry=null,r._size=o.fromValues(1,1),r._color1=l.fromValues(1,.5,0,.5),r._color2=l.fromValues(1,1,1,.5),r.applyProps(t),r}t._inheritsLoose(u,e);var g=u.prototype;return g._updateMaterial=function(){r.isSome(this._checkerBoardMaterial)&&this._checkerBoardMaterial.setParameters({size:this._size,color1:this._color1,color2:this._color2,renderOccluded:this._renderOccluded})},g.createExternalResources=function(){this._checkerBoardMaterial=new f.CheckerBoardMaterial({size:this._size,color1:this._color1,color2:this._color2,transparent:!0,writeDepth:!1,polygonOffset:!0,renderOccluded:d.RenderOccludedFlag.OccludeAndTransparent})},g.destroyExternalResources=function(){this._checkerBoardMaterial=null},g.forEachExternalMaterial=function(e){r.isSome(this._checkerBoardMaterial)&&e(this._checkerBoardMaterial)},g.createGeometries=function(e){if(r.isNone(this._geometry)||r.isNone(this._checkerBoardMaterial))return;const t=m;c.getTranslation(t,this.transform);const i=this._geometry,o=[],a=s.create();i.position.forEach((e=>{n.subtract(a,e,t),o.push(a[0],a[1],a[2])}));const l=[];i.uv.forEach((e=>{l.push(e[0],e[1])}));const u=new h.Geometry([[_.VertexAttribute.POSITION,{size:3,data:o,exclusive:!0}],[_.VertexAttribute.UV0,{size:2,data:l,exclusive:!0}]],[[_.VertexAttribute.POSITION,i.triangleIndices],[_.VertexAttribute.UV0,i.triangleIndices]]);e.addGeometry(u,this._checkerBoardMaterial)},g._geometryChanged=function(){this.recreateGeometry()},t._createClass(u,[{key:"renderOccluded",get:function(){return this._renderOccluded},set:function(e){e!==this._renderOccluded&&(this._renderOccluded=e,this._updateMaterial())}},{key:"geometry",get:function(){return this._geometry},set:function(e){this._geometry=e,this._geometryChanged()}},{key:"size",get:function(){return this._size},set:function(e){i.copy(this._size,e),this._updateMaterial()}},{key:"color1",get:function(){return this._color1},set:function(e){a.exactEquals(e,this._color1)||(a.copy(this._color1,e),this._updateMaterial())}},{key:"color2",get:function(){return this._color2},set:function(e){a.exactEquals(e,this._color2)||(a.copy(this._color2,e),this._updateMaterial())}}]),u}(u.Object3DVisualElement);const m=s.create();e.MeasurementAreaVisualElement=g,Object.defineProperties(e,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})}));
