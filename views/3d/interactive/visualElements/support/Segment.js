/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.19/esri/copyright.txt for details.
*/
define(["exports","../../../../../chunks/vec3f64","../../../../../chunks/vec3","../../../support/mathUtils","../../../../../geometry/projectionEllipsoid","../../../../../geometry/projection","../../../support/stack"],(function(e,t,r,n,s,c,i){"use strict";let o=function(){function e(e=t.create(),r=t.create()){this.startRenderSpace=e,this.endRenderSpace=r,this.type="euclidean"}var n=e.prototype;return n.eval=function(e,t,n){return r.lerp(t,this.startRenderSpace,this.endRenderSpace,e),n&&(r.subtract(n,this.endRenderSpace,this.startRenderSpace),r.normalize(n,n)),t},n.createRenderGeometry=function(e,t){const n=[],s=[],c=(t,c)=>{const i=d;r.subtract(i,t,e),n.push([i[0],i[1],i[2]]),s.push([c[0],c[1],c[2]])},o=t.worldUpAtPosition(this.eval(.5,h),i.sv3d.get());return c(this.startRenderSpace,o),c(this.endRenderSpace,o),{points:n,normals:s}},e}(),a=function(){function e(e,r,n){this.startRenderSpace=e,this.endRenderSpace=r,this.renderSpatialReference=n,this.type="geodesic",this._start=t.create(),this._end=t.create(),this._pcpf=s.getSphericalPCPF(n),this._project=c.canProjectWithoutEngine(n,this._pcpf),this._projectIn(e,this._start),this._projectIn(r,this._end)}var i=e.prototype;return i._projectIn=function(e,t){this._project?c.projectVectorToVector(e,this.renderSpatialReference,t,this._pcpf):r.copy(t,e)},i.eval=function(e,t,s){if(this._project)if(s){const i=d;n.slerpTangent(this._start,this._end,e,t,i),r.add(u,t,i),c.projectVectorToVector(t,this._pcpf,t,this.renderSpatialReference),c.projectVectorToVector(u,this._pcpf,u,this.renderSpatialReference),r.subtract(s,u,t),r.normalize(s,s)}else n.slerp(this._start,this._end,e,t),c.projectVectorToVector(t,this._pcpf,t,this.renderSpatialReference);else r.lerp(t,this._start,this._end,e),s&&(r.subtract(s,this._end,this._start),r.normalize(s,s));return t},i.createRenderGeometry=function(e,t){const n=[],s=[],c=(t,c)=>{const i=u;r.subtract(i,t,e),n.push([i[0],i[1],i[2]]),s.push([c[0],c[1],c[2]])},i=128+1&-2;for(let r=0;r<i;++r){const e=r/(i-1),n=h,s=d;this.eval(e,n),t.worldUpAtPosition(n,s),c(n,s)}return{points:n,normals:s}},e}();function p(e,t,r,n){switch(e){case"euclidean":return new o(t,r);case"geodesic":return new a(t,r,n)}}const h=t.create(),d=t.create(),u=t.create();e.EuclideanSegment=o,e.GeodesicSegment=a,e.createSegment=p,Object.defineProperty(e,"__esModule",{value:!0})}));
