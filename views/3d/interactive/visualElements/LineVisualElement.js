/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.25/esri/copyright.txt for details.
*/
define(["exports","../../../../chunks/_rollupPluginBabelHelpers","../../../../core/maybe","../../../../chunks/mat4","../../../../chunks/mat4f64","../../../../chunks/vec3","../../../../chunks/vec3f64","../../../../chunks/vec4f32","./Object3DVisualElement","../../support/engineContent/line","../../webgl-engine/lib/Material","../../webgl-engine/materials/RibbonLineMaterial"],(function(e,t,r,i,s,o,n,a,l,h,m,u){"use strict";let p=function(e){function s(t,i){var s;return(s=e.call(this,t)||this)._hasExternalMaterial=!1,s._renderOccluded=m.RenderOccludedFlag.OccludeAndTransparent,s._width=1,s._color=a.fromValues(1,0,1,1),s._innerWidth=1,s._innerColor=null,s._stipplePattern=null,s._stippleOffColor=null,s._stipplePreferContinuous=!0,s._writeDepthEnabled=!0,s._falloff=0,s._polygonOffset=!1,s._material=i,s._hasExternalMaterial=r.isSome(i),s.applyProps(t),s}t._inheritsLoose(s,e);var l=s.prototype;return l.setGeometryFromRenderSpacePoint=function(e,t=1e3){const r=[];r.push([[e[0]-t,e[1]+0,e[2]+0],[e[0]+t,e[1]+0,e[2]+0]]),r.push([[e[0]-0,e[1]-t,e[2]+0],[e[0]+0,e[1]+t,e[2]+0]]),r.push([[e[0]-0,e[1]+0,e[2]-t],[e[0]+0,e[1]+0,e[2]+t]]),this.geometry=r},l.setGeometryFromExtent=function(e){const t=this.view.spatialReference,r=n.create(),i=n.create(),s=100,a=[];o.set(r,e[0],e[1],s),this.view.renderCoordsHelper.toRenderCoords(r,t,i),a.push([i[0],i[1],i[2]]),o.set(r,e[2],e[1],s),this.view.renderCoordsHelper.toRenderCoords(r,t,i),a.push([i[0],i[1],i[2]]),o.set(r,e[2],e[3],s),this.view.renderCoordsHelper.toRenderCoords(r,t,i),a.push([i[0],i[1],i[2]]),o.set(r,e[0],e[3],s),this.view.renderCoordsHelper.toRenderCoords(r,t,i),a.push([i[0],i[1],i[2]]),o.set(r,e[0],e[1],s),this.view.renderCoordsHelper.toRenderCoords(r,t,i),a.push([i[0],i[1],i[2]]),o.set(r,e[0],e[1],s),this.view.renderCoordsHelper.toRenderCoords(r,t,i),a.push([i[0],i[1],i[2]]),this.geometry=[a]},l.setGeometryFromFrustum=function(e){const t=[];e.lines.forEach((e=>{t.push([e.origin[0],e.origin[1],e.origin[2]]),t.push([e.endpoint[0],e.endpoint[1],e.endpoint[2]])})),this.geometry=[t]},l.setGeometryFromBoundedPlane=function(e){const t=[],r=e.origin,i=e.basis1,s=e.basis2,o=.5,a=n.create(),l=n.create(),h=n.create(),m=n.create();a[0]=r[0]-i[0]*o-s[0]*o,a[1]=r[1]-i[1]*o-s[1]*o,a[2]=r[2]-i[2]*o-s[2]*o,l[0]=r[0]-i[0]*o+s[0]*o,l[1]=r[1]-i[1]*o+s[1]*o,l[2]=r[2]-i[2]*o+s[2]*o,h[0]=r[0]+i[0]*o+s[0]*o,h[1]=r[1]+i[1]*o+s[1]*o,h[2]=r[2]+i[2]*o+s[2]*o,m[0]=r[0]+i[0]*o-s[0]*o,m[1]=r[1]+i[1]*o-s[1]*o,m[2]=r[2]+i[2]*o-s[2]*o,t.push([a[0],a[1],a[2]]),t.push([l[0],l[1],l[2]]),t.push([h[0],h[1],h[2]]),t.push([m[0],m[1],m[2]]),t.push([a[0],a[1],a[2]]),this.geometry=[t]},l.setGeometryFromSegment=function(e){const t=e.endRenderSpace;this.transform=i.fromTranslation(f,t);const{points:r}=e.createRenderGeometry(t,this.view.renderCoordsHelper);this.geometry=[r]},l.setGeometryFromSegments=function(e,t=n.ZEROS){this.transform=i.fromTranslation(f,t),this.geometry=e.map((e=>e.createRenderGeometry(t,this.view.renderCoordsHelper).points))},l.getTransformedGeometry=function(){return r.isNone(this._geometry)?null:this._geometry.map((e=>e.map((e=>o.transformMat4(n.create(),e,this.transform)))))},l.createExternalResources=function(){this._hasExternalMaterial||(this._material=new u.RibbonLineMaterial({width:this._width,color:this._color,stippleOffColor:this._stippleOffColor,stipplePattern:this._stipplePattern,stipplePreferContinuous:this._stipplePreferContinuous,isClosed:!1,falloff:this._falloff,innerColor:this._innerColor,innerWidth:this._innerWidth,hasPolygonOffset:this._polygonOffset,renderOccluded:this._renderOccluded,writeDepth:this._writeDepthEnabled}))},l.destroyExternalResources=function(){this._hasExternalMaterial||(this._material=null)},l.createGeometries=function(e){for(const t of h.lineStripsToParameters(this.geometry)){const i=h.createGeometry(t);e.addGeometry(i,r.unwrap(this._material))}},l.forEachExternalMaterial=function(e){this._hasExternalMaterial||e(r.unwrap(this._material))},t._createClass(s,[{key:"renderOccluded",get:function(){return r.isSome(this._material)?this._material.parameters.renderOccluded:this._renderOccluded},set:function(e){this._renderOccluded=e,r.isSome(this._material)&&this._material.setParameters({renderOccluded:e})}},{key:"geometry",get:function(){return this._geometry},set:function(e){this._geometry=e,this.recreateGeometry()}},{key:"width",get:function(){return r.isSome(this._material)?this._material.parameters.width:this._width},set:function(e){this._width=e,r.isSome(this._material)&&this._material.setParameters({width:e})}},{key:"color",get:function(){return r.isSome(this._material)?this._material.parameters.color:this._color},set:function(e){this._color=a.clone(e),r.isSome(this._material)&&this._material.setParameters({color:this._color})}},{key:"innerWidth",get:function(){return r.isSome(this._material)?this._material.parameters.innerWidth:this._innerWidth},set:function(e){this._innerWidth=e,r.isSome(this._material)&&this._material.setParameters({innerWidth:e})}},{key:"innerColor",get:function(){return r.isSome(this._material)?this._material.parameters.innerColor:this._innerColor},set:function(e){this._innerColor=r.isSome(e)?a.clone(e):e,r.isSome(this._material)&&this._material.setParameters({innerColor:this._innerColor})}},{key:"stipplePattern",get:function(){return r.isSome(this._material)?this._material.parameters.stipplePattern:this._stipplePattern},set:function(e){this._stipplePattern=e,r.isSome(this._material)&&this._material.setParameters({stipplePattern:e})}},{key:"stippleOffColor",get:function(){return r.isSome(this._material)?this._material.parameters.stippleOffColor:this._stippleOffColor},set:function(e){this._stippleOffColor=r.isSome(e)?a.clone(e):null,r.isSome(this._material)&&this._material.setParameters({stippleOffColor:this._stippleOffColor})}},{key:"stipplePreferContinuous",get:function(){return r.isSome(this._material)?this._material.parameters.stipplePreferContinuous:this._stipplePreferContinuous},set:function(e){this._stipplePreferContinuous=e,r.isSome(this._material)&&this._material.setParameters({stipplePreferContinuous:e})}},{key:"writeDepthEnabled",get:function(){return r.isSome(this._material)?this._material.parameters.writeDepth:this._writeDepthEnabled},set:function(e){this._writeDepthEnabled=e,r.isSome(this._material)&&this._material.setParameters({writeDepth:e})}},{key:"falloff",get:function(){return r.isSome(this._material)?this._material.parameters.falloff:this._falloff},set:function(e){this._falloff=e,r.isSome(this._material)&&this._material.setParameters({falloff:e})}},{key:"polygonOffset",get:function(){return r.isSome(this._material)?this._material.parameters.hasPolygonOffset:this._polygonOffset},set:function(e){this._polygonOffset=e,r.isSome(this._material)&&this._material.setParameters({hasPolygonOffset:e})}}]),s}(l.Object3DVisualElement);const f=s.create();e.LineVisualElement=p,Object.defineProperties(e,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})}));
