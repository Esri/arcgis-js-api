/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.26/esri/copyright.txt for details.
*/
define(["exports","../../../../chunks/_rollupPluginBabelHelpers","../../../../core/maybe","../../../../chunks/mat4","../../../../chunks/mat4f64","../../../../chunks/vec3","../../../../chunks/vec3f64","../../../../chunks/vec4f64","./Object3DVisualElement","../../support/engineContent/line","../../webgl-engine/lib/Material","../../webgl-engine/materials/RibbonLineMaterial"],(function(e,t,r,n,s,i,o,a,l,u,m,c){"use strict";let h=function(e){function s(t,n){var s;return(s=e.call(this,t)||this)._hasExternalMaterial=!1,s._hasExternalMaterial=r.isSome(n),s._material=r.isSome(n)?n:new c.RibbonLineMaterial({width:1,color:a.fromValues(1,0,1,1),stippleOffColor:null,stipplePattern:null,stipplePreferContinuous:!0,isClosed:!1,falloff:0,innerColor:null,innerWidth:1,hasPolygonOffset:!1,renderOccluded:m.RenderOccludedFlag.OccludeAndTransparent,writeDepth:!0}),s.applyProps(t),s}t._inheritsLoose(s,e);var l=s.prototype;return l.setGeometryFromRenderSpacePoint=function(e,t=1e3){this.geometry=[[[e[0]-t,e[1]+0,e[2]+0],[e[0]+t,e[1]+0,e[2]+0]],[[e[0]-0,e[1]-t,e[2]+0],[e[0]+0,e[1]+t,e[2]+0]],[[e[0]-0,e[1]+0,e[2]-t],[e[0]+0,e[1]+0,e[2]+t]]]},l.setGeometryFromExtent=function(e){const t=this.view.spatialReference,r=o.create(),n=o.create(),s=100,a=[];i.set(r,e[0],e[1],s),this.view.renderCoordsHelper.toRenderCoords(r,t,n),a.push([n[0],n[1],n[2]]),i.set(r,e[2],e[1],s),this.view.renderCoordsHelper.toRenderCoords(r,t,n),a.push([n[0],n[1],n[2]]),i.set(r,e[2],e[3],s),this.view.renderCoordsHelper.toRenderCoords(r,t,n),a.push([n[0],n[1],n[2]]),i.set(r,e[0],e[3],s),this.view.renderCoordsHelper.toRenderCoords(r,t,n),a.push([n[0],n[1],n[2]]),i.set(r,e[0],e[1],s),this.view.renderCoordsHelper.toRenderCoords(r,t,n),a.push([n[0],n[1],n[2]]),i.set(r,e[0],e[1],s),this.view.renderCoordsHelper.toRenderCoords(r,t,n),a.push([n[0],n[1],n[2]]),this.geometry=[a]},l.setGeometryFromFrustum=function(e){const t=[];e.lines.forEach((e=>{t.push([e.origin[0],e.origin[1],e.origin[2]]),t.push([e.endpoint[0],e.endpoint[1],e.endpoint[2]])})),this.geometry=[t]},l.setGeometryFromBoundedPlane=function(e){const t=[],r=e.origin,n=e.basis1,s=e.basis2,i=.5,a=o.create(),l=o.create(),u=o.create(),m=o.create();a[0]=r[0]-n[0]*i-s[0]*i,a[1]=r[1]-n[1]*i-s[1]*i,a[2]=r[2]-n[2]*i-s[2]*i,l[0]=r[0]-n[0]*i+s[0]*i,l[1]=r[1]-n[1]*i+s[1]*i,l[2]=r[2]-n[2]*i+s[2]*i,u[0]=r[0]+n[0]*i+s[0]*i,u[1]=r[1]+n[1]*i+s[1]*i,u[2]=r[2]+n[2]*i+s[2]*i,m[0]=r[0]+n[0]*i-s[0]*i,m[1]=r[1]+n[1]*i-s[1]*i,m[2]=r[2]+n[2]*i-s[2]*i,t.push([a[0],a[1],a[2]]),t.push([l[0],l[1],l[2]]),t.push([u[0],u[1],u[2]]),t.push([m[0],m[1],m[2]]),t.push([a[0],a[1],a[2]]),this.geometry=[t]},l.setGeometryFromSegment=function(e){const t=e.endRenderSpace;this.transform=n.fromTranslation(f,t);const{points:r}=e.createRenderGeometry(t,this.view.renderCoordsHelper);this.geometry=[r]},l.setGeometryFromSegments=function(e,t=o.ZEROS){this.transform=n.fromTranslation(f,t),this.geometry=e.map((e=>e.createRenderGeometry(t,this.view.renderCoordsHelper).points))},l.getTransformedGeometry=function(){return r.isNone(this._geometry)?null:this._geometry.map((e=>e.map((e=>i.transformMat4(o.create(),e,this.transform)))))},l.createExternalResources=function(){},l.destroyExternalResources=function(){},l.createGeometries=function(e){for(const t of u.lineStripsToParameters(this.geometry)){const n=u.createGeometry(r.unwrap(this._material),t);e.addGeometry(n)}},l.forEachExternalMaterial=function(e){this._hasExternalMaterial||e(r.unwrap(this._material))},t._createClass(s,[{key:"renderOccluded",get:function(){return this._material.parameters.renderOccluded},set:function(e){this._material.setParameters({renderOccluded:e})}},{key:"geometry",get:function(){return this._geometry},set:function(e){this._geometry=e,this.recreateGeometry()}},{key:"width",get:function(){return this._material.parameters.width},set:function(e){this._material.setParameters({width:e})}},{key:"color",get:function(){return this._material.parameters.color},set:function(e){this._material.setParameters({color:a.clone(e)})}},{key:"innerWidth",get:function(){return this._material.parameters.innerWidth},set:function(e){this._material.setParameters({innerWidth:e})}},{key:"innerColor",get:function(){return this._material.parameters.innerColor},set:function(e){this._material.setParameters({innerColor:r.isSome(e)?a.clone(e):null})}},{key:"stipplePattern",get:function(){return this._material.parameters.stipplePattern},set:function(e){r.isSome(this._material)&&this._material.setParameters({stipplePattern:e})}},{key:"stippleOffColor",get:function(){return this._material.parameters.stippleOffColor},set:function(e){this._material.setParameters({stippleOffColor:r.isSome(e)?a.clone(e):null})}},{key:"stipplePreferContinuous",get:function(){return this._material.parameters.stipplePreferContinuous},set:function(e){this._material.setParameters({stipplePreferContinuous:e})}},{key:"writeDepthEnabled",get:function(){return this._material.parameters.writeDepth},set:function(e){this._material.setParameters({writeDepth:e})}},{key:"falloff",get:function(){return this._material.parameters.falloff},set:function(e){this._material.setParameters({falloff:e})}},{key:"polygonOffset",get:function(){return this._material.parameters.hasPolygonOffset},set:function(e){this._material.setParameters({hasPolygonOffset:e})}}]),s}(l.Object3DVisualElement);const f=s.create();e.LineVisualElement=h,Object.defineProperty(e,Symbol.toStringTag,{value:"Module"})}));
