/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.19/esri/copyright.txt for details.
*/
define(["exports","../../../../chunks/_rollupPluginBabelHelpers","../../../../chunks/tslib.es6","../../../../core/has","../../../../core/maybe","../../../../core/Logger","../../../../core/accessorSupport/ensureType","../../../../core/accessorSupport/decorators/property","../../../../core/accessorSupport/decorators/subclass","../../../../core/Error","../../../../core/urlUtils","../../../../core/uuid","../../../../portal/support/resourceExtension","../../../../core/promiseUtils","../../../../core/Accessor","../../../../core/Collection","./AnalysisManagerItem"],(function(e,s,t,r,o,a,i,n,c,l,y,p,u,h,_,m,d){"use strict";e.AnalysisManager=function(e){function t(s){var t;return(t=e.call(this,s)||this)._items=new Map,t.analyses=new m,t}s._inheritsLoose(t,e);var r=t.prototype;return r.initialize=function(){this.analyses.on("after-add",(e=>{const s=e.item;this._items.set(s,this._createItem(s))})),this.analyses.on("after-remove",(e=>{const s=e.item,t=this._getItem(s);o.isSome(t)&&(t.destroy(),this._items.delete(s))}))},r.whenAnalysisView=async function(e){return this._items.has(e)?this._items.get(e).promise:h.reject(new l("view:no-analysisview-for-analysis","No analysis view has been found for the analysis"))},r.getAnalysisView=function(e){const s=this._items.get(e);return s?s.analysisView:null},r._createItem=function(e){return new d.AnalysisManagerItem(e,this.viewFactory,this.controllerFactory)},r._getItem=function(e){return this._items.get(e)},t}(_),t.__decorate([n.property({type:m})],e.AnalysisManager.prototype,"analyses",void 0),t.__decorate([n.property()],e.AnalysisManager.prototype,"viewFactory",void 0),t.__decorate([n.property()],e.AnalysisManager.prototype,"controllerFactory",void 0),e.AnalysisManager=t.__decorate([c.subclass("esri.views.3d.interactive.graphics.AnalysisManager")],e.AnalysisManager),Object.defineProperty(e,"__esModule",{value:!0})}));
