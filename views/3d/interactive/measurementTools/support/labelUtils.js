/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.18/esri/copyright.txt for details.
*/
define(["exports","../../../../../core/screenUtils","../../../../../chunks/vec3f64","../../../../../chunks/vec3","../../../../../chunks/vec2","./viewUtils"],(function(e,r,n,t,o,c){"use strict";function a(e,r,n){return e.projectToRenderScreen(r,p),!(p[2]<0||p[2]>1)&&(e.renderToScreen(p,n),!0)}function i(e,r,n,t,a,i){if(!r)return!1;c.screenSpaceTangent(r.start,r.end,d,e),o.set(l,-d[1],d[0]);let s=!1;switch(t){case"top":s=l[1]<0;break;case"bottom":s=l[1]>0;break;case"left":s=l[0]>0;break;case"right":s=l[0]<0}if(s&&o.negate(l,l),0===o.length(l))switch(t){case"top":l[1]=1;break;case"bottom":l[1]=-1;break;case"left":l[0]=-1;break;case"right":l[0]=1}return e.projectToRenderScreen(r.origin,p),!(p[2]<0||p[2]>1)&&(e.renderToScreen(p,a),o.scale(l,l,n*e.pixelRatio),o.add(l,l,p),e.renderToScreen(l,i),!0)}function s(e,r,n,t,a,i){return!(!r||!n)&&(c.screenSpaceTangent(r.end,r.start,d,e),c.screenSpaceTangent(n.start,n.end,u,e),o.add(l,d,u),o.negate(l,l),o.normalize(l,l),e.projectToRenderScreen(r.end,p),!(p[2]<0||p[2]>1)&&(e.renderToScreen(p,a),o.scale(l,l,t*e.pixelRatio),o.add(l,l,p),e.renderToScreen(l,i),!0))}const d=r.createRenderScreenPointArray(),u=r.createRenderScreenPointArray(),l=r.createRenderScreenPointArray(),p=r.createRenderScreenPointArray3(),S=r.createRenderScreenPointArray3(),b=n.create(),P=r.createScreenPointArray(),f=r.createScreenPointArray();e.computeLabelPositionFromCorner=s,e.computeLabelPositionFromPlane=function(e,r,n,c,a,i){return e.projectToRenderScreen(r,p),t.add(b,r,n),e.projectToRenderScreen(b,S),!(p[2]<0||p[2]>1||S[2]<0||S[2]>1)&&(o.subtract(l,S,p),o.normalize(l,l),e.renderToScreen(p,a),o.scale(l,l,c*e.pixelRatio),o.add(l,l,p),e.renderToScreen(l,i),!0)},e.computeLabelPositionFromPoint=a,e.computeLabelPositionFromSegment=i,e.mirrorPosition=function(e){switch(e){case"top":return"bottom";case"right":return"left";case"bottom":return"top";case"left":return"right"}},e.positionLabelOnCorner=function(e,r,n,t,o){const c=s(o,r,n,t,P,f);return c&&e.updatePosition(P,f),c},e.positionLabelOnPoint=function(e,r,n){const t=a(n,r,P);return t&&e.updatePosition(P,null),t},e.positionLabelOnSegment=function(e,r,n,t,o){const c=i(o,r,n,t,P,f);return c&&e.updatePosition(P,f),c},Object.defineProperty(e,"__esModule",{value:!0})}));
