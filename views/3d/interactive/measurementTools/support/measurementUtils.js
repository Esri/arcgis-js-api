/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.19/esri/copyright.txt for details.
*/
define(["../../../../../geometry/SpatialReference","../../../../../geometry/Polygon","../../../../../chunks/vec3f64","../../../../../chunks/vec3","../../../support/mathUtils","../../../../../geometry/projection","../../../../../geometry/support/geodesicUtils","../../../../../geometry/geometryEngine"],(function(e,t,n,r,o,i,a,c){"use strict";var s;!function(e){function t(e,t){const n=t.center;r.set(n,0,0,0);for(let i=0;i<e.length;++i)r.add(n,n,e[i]);r.scale(n,n,1/e.length);let o=0;for(let i=0;i<e.length;++i)o=Math.max(o,r.squaredDistance(n,e[i]));t.radius=Math.sqrt(o)}function n(e,t){if(e.length<3)throw new Error("need at least 3 points to fit a plane");o.planeFromPoints(e[0],e[1],e[2],t)}function s(e,t){return r.dot(e,t)+e[3]}function h(e,t,n){return i.projectPointToVector(e,l,n)&&i.projectPointToVector(t,u,n)?r.distance(l,u):0}function d(e,t){if(!i.projectPointToWGS84ComparableLonLat(e,l)||!i.projectPointToWGS84ComparableLonLat(t,u))return 0;const n={distance:null};return a.inverseGeodeticSolver(n,[l[0],l[1]],[u[0],u[1]]),n.distance}function m(e,t,n){const r={distance:null};return a.inverseGeodeticSolver(r,[e[0],e[1]],[t[0],t[1]],n),r.distance}function L(e,t,n){const r=t[0]-e[0],o=t[1]-e[1],i=n[0]-e[0],a=n[1]-e[1];return.5*Math.abs(r*a-o*i)}function b(e,t,n,r){const o=g;return i.projectVectorToWGS84ComparableLonLat(e,r,l)&&i.projectVectorToWGS84ComparableLonLat(t,r,u)&&i.projectVectorToWGS84ComparableLonLat(n,r,f)?(o.setPoint(0,0,l),o.setPoint(0,1,u),o.setPoint(0,2,f),Math.abs(c.geodesicArea(o,"square-meters"))):0}function G(e,t,n){Math.abs(e[0])>Math.abs(e[1])?r.set(t,0,1,0):r.set(t,1,0,0),r.cross(n,e,t),r.normalize(t,t),r.cross(t,n,e),r.normalize(n,n)}function P(e,t=null,n=!0){const o=1e-6,i=(e,t)=>{if(0===t[0]&&0===t[1]&&0===t[2])return!1;for(let n=0;n<e.length;++n)if(r.dot(t,e[n])<-o)return!1;return!0};if(0===e.length)return!1;if(1===e.length)return t&&r.copy(t,e[0]),!0;r.set(p,0,0,0);for(let a=0;a<e.length;++a)r.add(p,p,e[a]);if(r.normalize(p,p),i(e,p))return t&&r.copy(t,p),!0;if(!n)return!1;for(let a=0;a<e.length;++a)for(let n=0;n<e.length;++n)if(a!==n&&(r.cross(p,e[a],e[n]),r.normalize(p,p),i(e,p)))return t&&r.copy(t,p),!0;return!1}function S(e,t){if(e===t)return!0;if(e.size!==t.size)return!1;for(let n=0;n<e.size;++n)if(!t.has(e[n]))return!1;return!0}e.boundingSphere=t,e.bestFitPlane=n,e.planePointDistance=s,e.segmentLengthEuclidean=h,e.segmentLengthGeodesic=d,e.segmentLengthGeodesicVector=m,e.triangleAreaEuclidean=L,e.triangleAreaGeodesic=b,e.tangentFrame=G,e.fitHemisphere=P,e.compareSets=S}(s||(s={}));const l=n.create(),u=n.create(),f=n.create(),g=new t({rings:[[l,u,f]],spatialReference:e.WGS84}),p=n.create();return s}));
