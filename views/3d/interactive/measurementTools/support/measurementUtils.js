/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.20/esri/copyright.txt for details.
*/
define(["../../../../../chunks/vec3","../../../../../chunks/vec3f64","../../../../../geometry/geometryEngine","../../../../../geometry/Polygon","../../../../../geometry/projection","../../../../../geometry/SpatialReference","../../../../../geometry/support/geodesicUtils","../../../support/mathUtils"],(function(e,t,n,r,o,i,a,c){"use strict";var s;!function(t){function r(t,n){const r=n.center;e.set(r,0,0,0);for(let i=0;i<t.length;++i)e.add(r,r,t[i]);e.scale(r,r,1/t.length);let o=0;for(let i=0;i<t.length;++i)o=Math.max(o,e.squaredDistance(r,t[i]));n.radius=Math.sqrt(o)}function i(e,t){if(e.length<3)throw new Error("need at least 3 points to fit a plane");c.planeFromPoints(e[0],e[1],e[2],t)}function s(t,n){return e.dot(t,n)+t[3]}function h(t,n,r){return o.projectPointToVector(t,l,r)&&o.projectPointToVector(n,u,r)?e.distance(l,u):0}function d(e,t){if(!o.projectPointToWGS84ComparableLonLat(e,l)||!o.projectPointToWGS84ComparableLonLat(t,u))return 0;const n={distance:null};return a.inverseGeodeticSolver(n,[l[0],l[1]],[u[0],u[1]]),n.distance}function m(e,t,n){const r={distance:null};return a.inverseGeodeticSolver(r,[e[0],e[1]],[t[0],t[1]],n),r.distance}function L(e,t,n){const r=t[0]-e[0],o=t[1]-e[1],i=n[0]-e[0],a=n[1]-e[1];return.5*Math.abs(r*a-o*i)}function b(e,t,r,i){const a=g;return o.projectVectorToWGS84ComparableLonLat(e,i,l)&&o.projectVectorToWGS84ComparableLonLat(t,i,u)&&o.projectVectorToWGS84ComparableLonLat(r,i,f)?(a.setPoint(0,0,l),a.setPoint(0,1,u),a.setPoint(0,2,f),Math.abs(n.geodesicArea(a,"square-meters"))):0}function G(t,n,r){Math.abs(t[0])>Math.abs(t[1])?e.set(n,0,1,0):e.set(n,1,0,0),e.cross(r,t,n),e.normalize(n,n),e.cross(n,r,t),e.normalize(r,r)}function P(t,n=null,r=!0){const o=1e-6,i=(t,n)=>{if(0===n[0]&&0===n[1]&&0===n[2])return!1;for(let r=0;r<t.length;++r)if(e.dot(n,t[r])<-o)return!1;return!0};if(0===t.length)return!1;if(1===t.length)return n&&e.copy(n,t[0]),!0;e.set(p,0,0,0);for(let a=0;a<t.length;++a)e.add(p,p,t[a]);if(e.normalize(p,p),i(t,p))return n&&e.copy(n,p),!0;if(!r)return!1;for(let a=0;a<t.length;++a)for(let r=0;r<t.length;++r)if(a!==r&&(e.cross(p,t[a],t[r]),e.normalize(p,p),i(t,p)))return n&&e.copy(n,p),!0;return!1}function S(e,t){if(e===t)return!0;if(e.size!==t.size)return!1;for(let n=0;n<e.size;++n)if(!t.has(e[n]))return!1;return!0}t.boundingSphere=r,t.bestFitPlane=i,t.planePointDistance=s,t.segmentLengthEuclidean=h,t.segmentLengthGeodesic=d,t.segmentLengthGeodesicVector=m,t.triangleAreaEuclidean=L,t.triangleAreaGeodesic=b,t.tangentFrame=G,t.fitHemisphere=P,t.compareSets=S}(s||(s={}));const l=t.create(),u=t.create(),f=t.create(),g=new r({rings:[[l,u,f]],spatialReference:i.WGS84}),p=t.create();return s}));
