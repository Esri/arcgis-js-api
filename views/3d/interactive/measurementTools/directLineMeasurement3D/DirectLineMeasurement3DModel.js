/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.20/esri/copyright.txt for details.
*/
define(["exports","../../../../../chunks/_rollupPluginBabelHelpers","../../../../../chunks/tslib.es6","../../../../../core/Accessor","../../../../../core/Handles","../../../../../core/maybe","../../../../../core/accessorSupport/decorators/property","../../../../../core/has","../../../../../core/accessorSupport/ensureType","../../../../../core/Logger","../../../../../core/accessorSupport/decorators/subclass","../../../../../layers/DirectLineMeasurementLayer"],(function(e,t,r,o,n,i,a,s,c,u,l,d){"use strict";e.DirectLineMeasurement3DModel=function(e){function r(){var t;return(t=e.apply(this,arguments)||this)._handles=new n,t.layer=new d({visible:!1,listMode:"hide"}),t.cursorPoint=null,t.state="initial",t.active=!1,t}t._inheritsLoose(r,e);var o=r.prototype;return o.initialize=function(){this.sceneView.map.add(this.layer),this.reset()},o.destroy=function(){this._handles=i.destroyMaybe(this._handles),this.sceneView.map.remove(this.layer),this.layer.destroy()},o.reset=function(){this.clearMeasurement()},o.clearMeasurement=function(){this.state="initial",this.startPoint=null,this.endPoint=null,this.cursorPoint=null,this._clearOverride("measurementSurfaceLocation")},o.finishMeasurement=function(){if(!this._isOverridden("measurementSurfaceLocation")){const e=this.measurementSurfaceLocation,t="camera-dependent"===e?this.sceneView.state.camera.aboveGround?"above-the-surface":"below-the-surface":e;this._override("measurementSurfaceLocation",t)}this.state="measured"},t._createClass(r,[{key:"startPoint",get:function(){return this.layer.startPoint},set:function(e){this.layer.startPoint=e}},{key:"startPointSurfaceLocation",set:function(e){this._set("startPointSurfaceLocation",e)}},{key:"endPoint",get:function(){return this.layer.endPoint},set:function(e){this.layer.endPoint=e}},{key:"endPointSurfaceLocation",set:function(e){this._set("endPointSurfaceLocation",e)}},{key:"measurementSurfaceLocation",get:function(){const e=this.startPointSurfaceLocation,t=this.endPointSurfaceLocation;return null==e||null==t||"above-the-surface"===e&&"below-the-surface"===t||"below-the-surface"===e&&"above-the-surface"===t||"on-the-surface"===e&&"on-the-surface"===t?"camera-dependent":"above-the-surface"===e||"above-the-surface"===t?"above-the-surface":"below-the-surface"}},{key:"validMeasurement",get:function(){return i.isSome(this.layer.startPoint)&&i.isSome(this.layer.endPoint)}},{key:"isMeasuring",get:function(){return!!this.startPoint}}]),r}(o),r.__decorate([a.property()],e.DirectLineMeasurement3DModel.prototype,"messages",void 0),r.__decorate([a.property({constructOnly:!0})],e.DirectLineMeasurement3DModel.prototype,"sceneView",void 0),r.__decorate([a.property()],e.DirectLineMeasurement3DModel.prototype,"layer",void 0),r.__decorate([a.property()],e.DirectLineMeasurement3DModel.prototype,"startPoint",null),r.__decorate([a.property({value:null})],e.DirectLineMeasurement3DModel.prototype,"startPointSurfaceLocation",null),r.__decorate([a.property()],e.DirectLineMeasurement3DModel.prototype,"endPoint",null),r.__decorate([a.property({value:null})],e.DirectLineMeasurement3DModel.prototype,"endPointSurfaceLocation",null),r.__decorate([a.property()],e.DirectLineMeasurement3DModel.prototype,"measurementSurfaceLocation",null),r.__decorate([a.property()],e.DirectLineMeasurement3DModel.prototype,"cursorPoint",void 0),r.__decorate([a.property()],e.DirectLineMeasurement3DModel.prototype,"state",void 0),r.__decorate([a.property()],e.DirectLineMeasurement3DModel.prototype,"active",void 0),r.__decorate([a.property({readOnly:!0})],e.DirectLineMeasurement3DModel.prototype,"validMeasurement",null),r.__decorate([a.property({readOnly:!0})],e.DirectLineMeasurement3DModel.prototype,"isMeasuring",null),e.DirectLineMeasurement3DModel=r.__decorate([l.subclass("esri.views.3d.interactive.measurementTools.directLineMeasurement3D.DirectLineMeasurement3DModel")],e.DirectLineMeasurement3DModel),Object.defineProperty(e,"__esModule",{value:!0})}));
