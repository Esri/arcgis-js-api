/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.26/esri/copyright.txt for details.
*/
define(["exports","../../../../chunks/_rollupPluginBabelHelpers","../../../../core/mathUtils","../../../../chunks/vec3","../../../../chunks/vec3f64","./Lightsources","./SphericalHarmonics"],(function(i,t,n,e,s,h,r){"use strict";let a=function(){this.color=s.create(),this.intensity=1},o=function(){this.direction=s.create(),this.ambient=new a,this.diffuse=new a};const c=.4;let l=function(){function i(){this._shOrder=2,this._legacy=new o,this.globalFactor=.5,this.noonFactor=.5,this._sphericalHarmonics=new h.SphericalHarmonicsAmbientLight,this._mainLight=new h.MainLight(s.create(),s.fromValues(1,0,0),!1)}var a=i.prototype;return a.set=function(i){r.combineLights(i,this._shOrder,this._mainLight,this._sphericalHarmonics),e.copy(this._legacy.direction,this._mainLight.direction);const t=1/Math.PI;this._legacy.ambient.color[0]=.282095*this._sphericalHarmonics.r[0]*t,this._legacy.ambient.color[1]=.282095*this._sphericalHarmonics.g[0]*t,this._legacy.ambient.color[2]=.282095*this._sphericalHarmonics.b[0]*t,e.scale(this._legacy.diffuse.color,this._mainLight.intensity,t),e.copy(g,this._legacy.diffuse.color),e.scale(g,g,c*this.globalFactor),e.add(this._legacy.ambient.color,this._legacy.ambient.color,g)},a.copyFrom=function(i){this._sphericalHarmonics.r=Array.from(i.sh.r),this._sphericalHarmonics.g=Array.from(i.sh.g),this._sphericalHarmonics.b=Array.from(i.sh.b),this._mainLight.direction=s.clone(i.mainLight.direction),this._mainLight.intensity=s.clone(i.mainLight.intensity),this._mainLight.castShadows=i.mainLight.castShadows,this._mainLight.specularStrength=i.mainLight.specularStrength,this._mainLight.environmentStrength=i.mainLight.environmentStrength,this.globalFactor=i.globalFactor,this.noonFactor=i.noonFactor},a.lerpLighting=function(i,t,s){if(e.lerp(this._mainLight.intensity,i.mainLight.intensity,t.mainLight.intensity,s),this._mainLight.environmentStrength=n.lerp(i.mainLight.environmentStrength,t.mainLight.environmentStrength,s),this._mainLight.specularStrength=n.lerp(i.mainLight.specularStrength,t.mainLight.specularStrength,s),e.copy(this._mainLight.direction,t.mainLight.direction),this._mainLight.castShadows=t.mainLight.castShadows,this.globalFactor=n.lerp(i.globalFactor,t.globalFactor,s),this.noonFactor=n.lerp(i.noonFactor,t.noonFactor,s),i.sh.r.length===t.sh.r.length)for(let e=0;e<t.sh.r.length;e++)this._sphericalHarmonics.r[e]=n.lerp(i.sh.r[e],t.sh.r[e],s),this._sphericalHarmonics.g[e]=n.lerp(i.sh.g[e],t.sh.g[e],s),this._sphericalHarmonics.b[e]=n.lerp(i.sh.b[e],t.sh.b[e],s);else for(let n=0;n<t.sh.r.length;n++)this._sphericalHarmonics.r[n]=t.sh.r[n],this._sphericalHarmonics.g[n]=t.sh.g[n],this._sphericalHarmonics.b[n]=t.sh.b[n]},t._createClass(i,[{key:"legacy",get:function(){return this._legacy}},{key:"sh",get:function(){return this._sphericalHarmonics}},{key:"mainLight",get:function(){return this._mainLight}}]),i}();const g=s.create();i.SceneLighting=l,i.ambientBoost=c,Object.defineProperty(i,Symbol.toStringTag,{value:"Module"})}));
