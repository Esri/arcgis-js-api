/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.18/esri/copyright.txt for details.
*/
define(["exports","../../../../chunks/_rollupPluginBabelHelpers","../../../../chunks/vec3f64","../../../../chunks/vec3","./SphericalHarmonics"],(function(i,t,n,e,r){"use strict";const s=n.create();let o=function(){function i(){this._renderLighting={main:{intensity:n.create(),direction:n.fromValues(1,0,0),castShadows:!1},sphericalHarmonics:{sh:{r:[0],g:[0],b:[0]}}},this._shOrder=2,this._oldSunlight={direction:n.create(),ambient:{color:n.create(),intensity:0},diffuse:{color:n.create(),intensity:0}}}var o=i.prototype;return o.setLightDirectionUniform=function(i){i.setUniform3fv("lightingMainDirection",this._renderLighting.main.direction)},o.setUniforms=function(i,t=!1){if(t){const t=(1-this._info.groundLightingFactor)*(1-this._info.globalFactor);i.setUniform1f("lightingFixedFactor",t)}else i.setUniform1f("lightingFixedFactor",0);i.setUniform1f("lightingGlobalFactor",this._info.globalFactor),this.setLightDirectionUniform(i),i.setUniform3fv("lightingMainIntensity",this._renderLighting.main.intensity),i.setUniform1f("ambientBoostFactor",.4);const n=this._renderLighting.sphericalHarmonics.sh;0===this._shOrder?i.setUniform3f("lightingAmbientSH0",n.r[0],n.g[0],n.b[0]):1===this._shOrder?(i.setUniform4f("lightingAmbientSH_R",n.r[0],n.r[1],n.r[2],n.r[3]),i.setUniform4f("lightingAmbientSH_G",n.g[0],n.g[1],n.g[2],n.g[3]),i.setUniform4f("lightingAmbientSH_B",n.b[0],n.b[1],n.b[2],n.b[3])):2===this._shOrder&&(i.setUniform3f("lightingAmbientSH0",n.r[0],n.g[0],n.b[0]),i.setUniform4f("lightingAmbientSH_R1",n.r[1],n.r[2],n.r[3],n.r[4]),i.setUniform4f("lightingAmbientSH_G1",n.g[1],n.g[2],n.g[3],n.g[4]),i.setUniform4f("lightingAmbientSH_B1",n.b[1],n.b[2],n.b[3],n.b[4]),i.setUniform4f("lightingAmbientSH_R2",n.r[5],n.r[6],n.r[7],n.r[8]),i.setUniform4f("lightingAmbientSH_G2",n.g[5],n.g[6],n.g[7],n.g[8]),i.setUniform4f("lightingAmbientSH_B2",n.b[5],n.b[6],n.b[7],n.b[8]))},o.set=function(i){this._info=i,r.combineLights(i.lights,this._shOrder,this._renderLighting),e.negate(this._oldSunlight.direction,this._renderLighting.main.direction);const t=1/Math.PI;this._oldSunlight.ambient.color[0]=.282095*this._renderLighting.sphericalHarmonics.sh.r[0]*t,this._oldSunlight.ambient.color[1]=.282095*this._renderLighting.sphericalHarmonics.sh.g[0]*t,this._oldSunlight.ambient.color[2]=.282095*this._renderLighting.sphericalHarmonics.sh.b[0]*t,this._oldSunlight.ambient.intensity=1,this._oldSunlight.diffuse.color[0]=this._renderLighting.main.intensity[0]*t,this._oldSunlight.diffuse.color[1]=this._renderLighting.main.intensity[1]*t,this._oldSunlight.diffuse.color[2]=this._renderLighting.main.intensity[2]*t,this._oldSunlight.diffuse.intensity=1;const n=e.copy(s,this._oldSunlight.diffuse.color);e.scale(n,n,.4*this._info.globalFactor),e.add(this._oldSunlight.ambient.color,this._oldSunlight.ambient.color,n)},t._createClass(i,[{key:"globalFactor",get:function(){return this._info.globalFactor}},{key:"old",get:function(){return this._oldSunlight}}]),i}();i.SceneLighting=o,Object.defineProperty(i,"__esModule",{value:!0})}));
