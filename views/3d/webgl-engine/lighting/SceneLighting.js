/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
define(["exports","../../../../chunks/_rollupPluginBabelHelpers","../../../../chunks/vec3","../../../../chunks/vec3f64","./Lightsources","./SphericalHarmonics"],(function(i,t,n,e,o,s){"use strict";let r=function(){function i(){this._shOrder=2,this._ambientBoost=.4,this._oldSunlight={direction:e.create(),ambient:{color:e.create(),intensity:1},diffuse:{color:e.create(),intensity:1}},this.globalFactor=.5,this.groundLightingFactor=.5,this._sphericalHarmonics=new o.SphericalHarmonicsAmbientLight,this._mainLight={intensity:e.create(),direction:e.fromValues(1,0,0),castShadows:!1}}var r=i.prototype;return r.setLightDirectionUniform=function(i){i.setUniform3fv("lightingMainDirection",this._mainLight.direction)},r.setUniforms=function(i,t=!1){const n=t?(1-this.groundLightingFactor)*(1-this.globalFactor):0;i.setUniform1f("lightingFixedFactor",n),i.setUniform1f("lightingGlobalFactor",this.globalFactor),this.setLightDirectionUniform(i),i.setUniform3fv("lightingMainIntensity",this._mainLight.intensity),i.setUniform1f("ambientBoostFactor",this._ambientBoost);const e=this._sphericalHarmonics;0===this._shOrder?i.setUniform3f("lightingAmbientSH0",e.r[0],e.g[0],e.b[0]):1===this._shOrder?(i.setUniform4f("lightingAmbientSH_R",e.r[0],e.r[1],e.r[2],e.r[3]),i.setUniform4f("lightingAmbientSH_G",e.g[0],e.g[1],e.g[2],e.g[3]),i.setUniform4f("lightingAmbientSH_B",e.b[0],e.b[1],e.b[2],e.b[3])):2===this._shOrder&&(i.setUniform3f("lightingAmbientSH0",e.r[0],e.g[0],e.b[0]),i.setUniform4f("lightingAmbientSH_R1",e.r[1],e.r[2],e.r[3],e.r[4]),i.setUniform4f("lightingAmbientSH_G1",e.g[1],e.g[2],e.g[3],e.g[4]),i.setUniform4f("lightingAmbientSH_B1",e.b[1],e.b[2],e.b[3],e.b[4]),i.setUniform4f("lightingAmbientSH_R2",e.r[5],e.r[6],e.r[7],e.r[8]),i.setUniform4f("lightingAmbientSH_G2",e.g[5],e.g[6],e.g[7],e.g[8]),i.setUniform4f("lightingAmbientSH_B2",e.b[5],e.b[6],e.b[7],e.b[8]))},r.set=function(i){s.combineLights(i,this._shOrder,this._mainLight,this._sphericalHarmonics),n.copy(this._oldSunlight.direction,this._mainLight.direction);const t=1/Math.PI;this._oldSunlight.ambient.color[0]=.282095*this._sphericalHarmonics.r[0]*t,this._oldSunlight.ambient.color[1]=.282095*this._sphericalHarmonics.g[0]*t,this._oldSunlight.ambient.color[2]=.282095*this._sphericalHarmonics.b[0]*t,n.scale(this._oldSunlight.diffuse.color,this._mainLight.intensity,t),n.copy(h,this._oldSunlight.diffuse.color),n.scale(h,h,this._ambientBoost*this.globalFactor),n.add(this._oldSunlight.ambient.color,this._oldSunlight.ambient.color,h)},t._createClass(i,[{key:"lightingMainDirection",get:function(){return this._mainLight.direction}},{key:"old",get:function(){return this._oldSunlight}}]),i}();const h=e.create();i.SceneLighting=r,Object.defineProperty(i,"__esModule",{value:!0})}));
