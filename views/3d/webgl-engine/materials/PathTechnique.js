/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.24/esri/copyright.txt for details.
*/
import{_ as e}from"../../../../chunks/tslib.es6.js";import{f as o}from"../../../../chunks/vec3f64.js";import{ViewingMode as t}from"../../../ViewingMode.js";import{ShaderOutput as i}from"../core/shaderLibrary/ShaderOutputOptions.js";import{PathVertexPositionPassParameters as r}from"../core/shaderLibrary/attributes/PathVertexPosition.glsl.js";import{NormalsDoubleSidedMode as s}from"../core/shaderLibrary/shading/Normals.glsl.js";import{PBRMode as n}from"../core/shaderLibrary/shading/PhysicallyBasedRenderingParameters.glsl.js";import{doublePrecisionRequiresObfuscation as a}from"../core/shaderLibrary/util/DoublePrecision.glsl.js";import{ReloadableShaderModule as l}from"../core/shaderTechnique/ReloadableShaderModule.js";import{ShaderTechnique as p}from"../core/shaderTechnique/ShaderTechnique.js";import{parameter as c}from"../core/shaderTechnique/ShaderTechniqueConfiguration.js";import{TransparencyPassType as u}from"../lib/basicInterfaces.js";import{blendingDefault as d,oitBlending as h,oitDepthTest as m,OITPolygonOffset as v}from"../lib/OrderIndependentTransparency.js";import{Program as f}from"../lib/Program.js";import{stencilWriteMaskOn as y,stencilBaseAllZerosParams as b}from"../lib/StencilUtils.js";import{VertexAttribute as P}from"../lib/VertexAttribute.js";import{DefaultTechniqueConfiguration as g}from"./DefaultTechniqueConfiguration.js";import{P as O}from"../../../../chunks/Path.glsl.js";import{makePipelineState as T,frontFaceCullingParams as j,defaultDepthWriteParams as S,defaultColorWriteParams as N}from"../../../webgl/renderState.js";const R=new Map([[P.POSITION,0],[P.PROFILERIGHT,1],[P.PROFILEUP,2],[P.PROFILEVERTEXANDNORMAL,3],[P.FEATUREVALUE,4]]);class C extends r{constructor(){super(...arguments),this.ambient=o(.2,.2,.2),this.diffuse=o(.8,.8,.8),this.specular=o(0,0,0),this.opacity=1}}class E extends p{initializeConfiguration(e,o){o.spherical=e.viewingMode===t.Global,o.doublePrecisionRequiresObfuscation=a(e.rctx)}initializeProgram(e){const o=E.shader.get().build(this.configuration);return new f(e.rctx,o,R)}_setPipelineState(e){const o=this.configuration,t=e===u.NONE,r=e===u.FrontFace,n=e=>!e.hasSlicePlane&&!(e.transparent||e.doubleSidedMode===s.None);return T({blending:o.output!==i.Color&&o.output!==i.Alpha||!o.transparent?null:t?d:h(e),culling:n(o)&&j,depthTest:{func:m(e)},depthWrite:t||r?S:null,colorWrite:N,stencilWrite:o.hasOccludees?y:null,stencilTest:o.hasOccludees?b:null,polygonOffset:t||r?null:v})}initializePipeline(){return this._setPipelineState(this.configuration.transparencyPassType)}}E.shader=new l(O,(()=>import("../shaders/Path.glsl.js")));class L extends g{constructor(){super(...arguments),this.output=i.Color,this.doubleSidedMode=s.None,this.transparencyPassType=u.NONE,this.spherical=!1,this.receiveShadows=!1,this.receiveAmbientOcclusion=!1,this.vvSize=!1,this.vvColor=!1,this.vvOpacity=!1,this.hasSlicePlane=!1,this.transparent=!1,this.hasOccludees=!1,this.hasMultipassTerrain=!1,this.cullAboveGround=!1,this.doublePrecisionRequiresObfuscation=!1}}e([c({count:i.COUNT})],L.prototype,"output",void 0),e([c({count:s.COUNT})],L.prototype,"doubleSidedMode",void 0),e([c({count:u.COUNT})],L.prototype,"transparencyPassType",void 0),e([c()],L.prototype,"spherical",void 0),e([c()],L.prototype,"receiveShadows",void 0),e([c()],L.prototype,"receiveAmbientOcclusion",void 0),e([c()],L.prototype,"vvSize",void 0),e([c()],L.prototype,"vvColor",void 0),e([c()],L.prototype,"vvOpacity",void 0),e([c()],L.prototype,"hasSlicePlane",void 0),e([c()],L.prototype,"transparent",void 0),e([c()],L.prototype,"hasOccludees",void 0),e([c()],L.prototype,"hasMultipassTerrain",void 0),e([c()],L.prototype,"cullAboveGround",void 0),e([c()],L.prototype,"doublePrecisionRequiresObfuscation",void 0),e([c({constValue:n.Disabled})],L.prototype,"pbrMode",void 0),e([c({constValue:!0})],L.prototype,"hasVvInstancing",void 0),e([c({constValue:!1})],L.prototype,"useCustomDTRExponentForWater",void 0),e([c({constValue:!1})],L.prototype,"useFillLights",void 0);export{C as PathPassParameters,E as PathTechnique,L as PathTechniqueConfiguration,R as pathVertexAttributeLocations};
