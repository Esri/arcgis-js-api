/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.18/esri/copyright.txt for details.
*/
define(["exports","../../../../chunks/_rollupPluginBabelHelpers","../lib/GLMaterial","./WaterTechnique"],(function(e,t,a,i){"use strict";let s=function(e){function a(t){var a;return(a=e.call(this,t)||this).updateParameters(),a}t._inheritsLoose(a,e);var s=a.prototype;return s.updateParameters=function(e){this.technique=this.techniqueRep.acquireAndReleaseExisting(i.WaterTechnique,this.material.getTechniqueConfig(this.output,e),this.technique)},s.beginSlot=function(e){if(2===this.output)return 22===e;if(5===this.output)return null==e;if(4===this.output)return 3===e;let t=3;return this.material.params.transparent&&(t=this.material.params.writeDepth?5:8),e===t},s.setElapsedTimeUniform=function(e){const t=.001*this.material.animation.time;e.setUniform1f("timeElapsed",t*this.material.params.animationSpeed)},s._updateShadowState=function(e){e.shadowMappingEnabled!==this.material.params.receiveShadows&&this.material.setParameterValues({receiveShadows:e.shadowMappingEnabled})},s._updateSSRState=function(e){e.ssrEnabled!==this.material.params.ssrEnabled&&this.material.setParameterValues({ssrEnabled:e.ssrEnabled})},s.ensureResources=function(e){return this.technique.ensureResource(e)},s.ensureParameters=function(e){0===this.output&&(this._updateShadowState(e),this._updateSSRState(e)),this.updateParameters(e)},s.bind=function(e,t){e.bindProgram(this.technique.program),this.technique.bindPass(e,this.material.params,t),2!==this.output&&0!==this.output||this.setElapsedTimeUniform(this.technique.program)},a}(a);e.WaterGLMaterial=s,Object.defineProperty(e,"__esModule",{value:!0})}));
