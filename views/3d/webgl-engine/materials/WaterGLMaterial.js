/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.23/esri/copyright.txt for details.
*/
define(["exports","../../../../chunks/_rollupPluginBabelHelpers","../core/shaderLibrary/ShaderOutputOptions","../lib/basicInterfaces","../lib/GLMaterial","./WaterTechnique"],(function(e,t,a,r,i,s){"use strict";let n=function(e){function i(){return e.apply(this,arguments)||this}t._inheritsLoose(i,e);var n=i.prototype;return n.updateParameters=function(e){return this.ensureTechnique(s.WaterTechnique,e)},n.setElapsedTimeUniform=function(e){const t=.001*this._material.animation.time;e.setUniform1f("timeElapsed",t*this._material.parameters.animationSpeed)},n._updateShadowState=function(e){e.shadowMappingEnabled!==this._material.parameters.receiveShadows&&this._material.setParameters({receiveShadows:e.shadowMappingEnabled})},n._updateSSRState=function(e){e.ssrEnabled!==this._material.parameters.ssrEnabled&&this._material.setParameters({ssrEnabled:e.ssrEnabled})},n.ensureResources=function(e){const t=this._techniqueRep.constructionContext.waterTextureRepository;return t.ready||t.updating||t.loadTextures(e),t.ready?r.ResourceState.LOADED:r.ResourceState.LOADING},n.beginSlot=function(e){return this._output===a.ShaderOutput.Color&&(this._updateShadowState(e),this._updateSSRState(e)),this.updateParameters(e)},n.bind=function(e,t){t.bindPass(this._material.parameters,e),this._output!==a.ShaderOutput.Normal&&this._output!==a.ShaderOutput.Color||this.setElapsedTimeUniform(t.program)},i}(i);e.WaterGLMaterial=n,Object.defineProperties(e,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})}));
