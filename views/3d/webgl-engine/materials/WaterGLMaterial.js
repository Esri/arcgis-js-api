/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.20/esri/copyright.txt for details.
*/
define(["exports","../../../../chunks/_rollupPluginBabelHelpers","../lib/GLMaterial","./WaterTechnique"],(function(e,t,a,i){"use strict";let s=function(e){function a(t){var a;return(a=e.call(this,t)||this).updateParameters(),a}t._inheritsLoose(a,e);var s=a.prototype;return s.updateParameters=function(e){this._technique=this._techniqueRep.releaseAndAcquire(i.WaterTechnique,this._material.getTechniqueConfig(this._output,e),this._technique)},s.beginSlot=function(e){if(2===this._output)return 22===e;if(5===this._output)return null==e;if(4===this._output)return 3===e;let t=3;return this._material.params.transparent&&(t=this._material.params.writeDepth?5:8),e===t},s.setElapsedTimeUniform=function(e){const t=.001*this._material.animation.time;e.setUniform1f("timeElapsed",t*this._material.params.animationSpeed)},s._updateShadowState=function(e){e.shadowMappingEnabled!==this._material.params.receiveShadows&&this._material.setParameterValues({receiveShadows:e.shadowMappingEnabled})},s._updateSSRState=function(e){e.ssrEnabled!==this._material.params.ssrEnabled&&this._material.setParameterValues({ssrEnabled:e.ssrEnabled})},s.ensureResources=function(e){return this._technique.ensureResource(e)},s.ensureParameters=function(e){0===this._output&&(this._updateShadowState(e),this._updateSSRState(e)),this.updateParameters(e)},s.bind=function(e){this._technique.bindPass(this._material.params,e),2!==this._output&&0!==this._output||this.setElapsedTimeUniform(this._technique.program)},a}(a);e.WaterGLMaterial=s,Object.defineProperty(e,"__esModule",{value:!0})}));
