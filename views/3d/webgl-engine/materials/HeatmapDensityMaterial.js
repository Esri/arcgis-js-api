/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.23/esri/copyright.txt for details.
*/
define(["exports","../../../../chunks/_rollupPluginBabelHelpers","../../support/buffer/InterleavedLayout","../lib/GLMaterial","../lib/Material","../lib/RenderPass","../lib/RenderSlot","../lib/VertexAttribute","./internal/bufferWriterUtils","../shaders/HeatmapDensityTechnique"],(function(e,t,r,i,n,u,a,s,o,l){"use strict";const c={searchRadius:128,resolutionForScale:0,colorRampData:null,isAttributeDriven:!1,minDensity:0,maxDensity:100,fieldTotal:0,pixelRatio:1,...n.DefaultMaterialParameters};let f=function(e){function r(t){var r;return(r=e.call(this,t,c)||this)._techniqueConfig=new l.HeatmapDensityTechniqueConfiguration,r}t._inheritsLoose(r,e);var i=r.prototype;return i.requiresSlot=function(e,t){return e===a.RenderSlot.DRAPED_MATERIAL&&t===u.RenderPass.MATERIAL},i.getTechniqueConfig=function(){return this._techniqueConfig.isAttributeDriven=this.parameters.isAttributeDriven,this._techniqueConfig},i.createGLMaterial=function(e){return new b(e)},i.intersect=function(){},i.createBufferWriter=function(){return new A(this.parameters.isAttributeDriven?d:h)},r}(n.Material),b=function(e){function r(t){return e.call(this,t)||this}t._inheritsLoose(r,e);var i=r.prototype;return i.beginSlot=function(e){return this.updateParameters(e)},i.updateParameters=function(e){return this.ensureTechnique(l.HeatmapDensityTechnique,e)},i.bind=function(e,t){t.bindPass(this._material.parameters,e)},r}(i),A=function(){function e(e){this.vertexBufferLayout=e}var t=e.prototype;return t.allocate=function(e){return this.vertexBufferLayout.createBuffer(e)},t.elementCount=function(e){return e.indices.get(s.VertexAttribute.POSITION).length*p},t.write=function(e,t,r,i){o.writePosition(t.indices.get(s.VertexAttribute.POSITION),t.vertexAttributes.get(s.VertexAttribute.POSITION).data,e.transformation,r.position,i,p);const n=t.indices.get(s.VertexAttribute.POSITION).length,u=r.uv0;let a=i;for(let s=0;s<n;++s)u.setValues(a++,-1,-1),u.setValues(a++,1,-1),u.setValues(a++,1,1),u.setValues(a++,1,1),u.setValues(a++,-1,1),u.setValues(a++,-1,-1);const l="featureAttribute"in r?r.featureAttribute:null;l&&o.writeBufferFloat(t.indices.get(s.VertexAttribute.FEATUREATTRIBUTE),t.vertexAttributes.get(s.VertexAttribute.FEATUREATTRIBUTE).data,l,i,p)},e}();const h=r.newLayout().vec3f(s.VertexAttribute.POSITION).vec2f(s.VertexAttribute.UV0),d=h.clone().f32(s.VertexAttribute.FEATUREATTRIBUTE),p=6;function T(e){return e instanceof f}Object.defineProperty(e,"RadiusMode",{enumerable:!0,get:()=>l.RadiusMode}),e.HeatmapDensityMaterial=f,e.isHeatMapDensityMaterial=T,Object.defineProperties(e,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})}));
