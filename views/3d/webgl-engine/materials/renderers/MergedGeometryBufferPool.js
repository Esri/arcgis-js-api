/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
define(["exports","../../../../../core/maybe","../../../../../core/MemCache","../../../../../core/uid","../../lib/StaticFloat32ArrayObject"],(function(t,e,r,o,n){"use strict";const c=r.MIN_PRIORITY+1;let i=function(){function t(t,e,r){this._rctx=t,this._locations=e,this._layout=r,this._cache=t.newCache(`MergedRenderer pool ${o.generateUID()}`,s)}var r=t.prototype;return r.dispose=function(){this._cache.destroy()},r.newBuffer=function(t){const r=t.toString(),o=this._cache.pop(r);if(e.isSome(o)){const t=o.pop();return o.length>0&&this._cache.put(r,o,t.array.byteLength*o.length,c),t}return new n.StaticFloat32ArrayObject(this._rctx,this._locations,this._layout,t)},r.deleteBuffer=function(t){const r=t.array.byteLength,o=t.array.length.toString(),n=this._cache.pop(o);return e.isSome(n)?(n.push(t),this._cache.put(o,n,r*n.length,-1)):this._cache.put(o,[t],r,-1),null},t}();function s(t,e){if(0===e)return void t.forEach((t=>t.dispose()));const r=t.pop(),o=t.length*r.array.byteLength;return r.dispose(),o}t.MergedGeometryBufferPool=i,Object.defineProperty(t,"__esModule",{value:!0})}));
