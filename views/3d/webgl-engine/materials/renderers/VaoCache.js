/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.26/esri/copyright.txt for details.
*/
define(["exports","../../../../../core/maybe","../../../../../core/MemCache","../../../../../core/uid","../../lib/VertexArrayObject","../../../../webgl/BufferObject","../../../../webgl/enums"],(function(e,t,o,c,r,n,i){"use strict";const s=o.MIN_PRIORITY+1;let h=function(){function e(e,t,o){this._rctx=e,this._locations=t,this._layout=o,this._cache=e.newCache(`VaoCache ${c.generateUID()}`,u)}var o=e.prototype;return o.dispose=function(){this._cache.destroy()},o.newVao=function(e){const o=e.toString(),c=this._cache.pop(o);if(t.isSome(c)){const t=c.pop();return c.length>0&&this._cache.put(o,c,e*c.length,s),t}const h=new r.VertexArrayObject(this._rctx,this._locations,{geometry:this._layout},{geometry:n.BufferObject.createVertex(this._rctx,i.Usage.STATIC_DRAW)});return h.vertexBuffers.geometry.setSize(e),h},o.deleteVao=function(e){if(t.isNone(e))return null;const o=e.size,c=o.toString(),r=this._cache.pop(c);return t.isSome(r)?(r.push(e),this._cache.put(c,r,o*r.length,-1)):this._cache.put(c,[e],o,-1),null},e}();function u(e,t){if(t===o.RemoveMode.ALL)return void e.forEach((e=>e.dispose()));const c=e.pop(),r=e.length*c.size;return c.dispose(),r}e.VaoCache=h,Object.defineProperty(e,Symbol.toStringTag,{value:"Module"})}));
