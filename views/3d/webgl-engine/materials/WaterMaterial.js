/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.18/esri/copyright.txt for details.
*/
define(["exports","../../../../chunks/_rollupPluginBabelHelpers","./internal/MaterialUtil","../lib/Material","../lib/OrderIndependentTransparency","./internal/DefaultBufferWriter","./WaterTechnique","./WaterGLMaterial","../lib/AnimationTimer","./internal/waterMaterialUtils"],(function(e,t,i,a,n,r,s,o,u,c){"use strict";let h=function(e){function a(t,i){var a;return(a=e.call(this,i,t,c.defaultWaterMaterialParameters)||this).animation=new u.AnimationTimer,a.techniqueConfig=new s.WaterTechniqueConfiguration,a}t._inheritsLoose(a,e);var h=a.prototype;return h.getTechniqueConfig=function(e,t){return this.techniqueConfig.output=e,this.techniqueConfig.writeDepth=this.params.writeDepth,this.techniqueConfig.receiveShadows=this.params.receiveShadows,this.techniqueConfig.slicePlaneEnabled=this.params.slicePlaneEnabled,this.techniqueConfig.transparent=this.params.transparent,this.techniqueConfig.useSSR=this.params.ssrEnabled,this.techniqueConfig.isDraped=this.params.isDraped,this.techniqueConfig.transparencyPassType=t?t.transparencyPassType:3,this.techniqueConfig.enableOffset=!t||t.camera.relativeElevation<n.OITPolygonOffsetLimit,this.techniqueConfig},h.update=function(e){const t=Math.min(e.camera.relativeElevation,e.camera.distance);return this.animation.enabled=Math.sqrt(this.params.waveTextureRepeat/this.params.waveStrength)*t<l,this.animation.advance(e.dt),this.animation.enabled},h.intersect=function(e,t,a,n,r,s,o){i.intersectTriangleGeometry(e,t,n,r,s,void 0,o)},h.getGLMaterial=function(e){if(0===e.output&&this.params.isDraped){const t=e;return t.output=5,new o.WaterGLMaterial(t)}switch(e.output){case 0:case 2:case 4:case 7:return new o.WaterGLMaterial(e)}},h.createBufferWriter=function(){return new r.DefaultBufferWriter(r.PositionUVLayout)},a}(a.Material);const l=35e3;e.WaterMaterial=h,Object.defineProperty(e,"__esModule",{value:!0})}));
