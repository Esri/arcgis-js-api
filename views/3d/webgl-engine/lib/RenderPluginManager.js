/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.18/esri/copyright.txt for details.
*/
define(["exports","../../../../chunks/_rollupPluginBabelHelpers","./Util","./depthRange"],(function(e,n,t,r){"use strict";let s=function(){function e(e){this.pluginContext=e,this.renderPlugins=new Array,this.slots=[];for(let e=0;e<23;++e)this.slots[e]=[]}var s=e.prototype;return s.add=function(e,n){this.renderPlugins.push(n);for(let t=0;t<e.length;++t){const r=e[t];this.slots[r].push(n)}n.initializeRenderContext(this.pluginContext),this.pluginContext.requestRender()},s.remove=function(e){const n=this.renderPlugins.length;this.renderPlugins=this.renderPlugins.filter((n=>n!==e)),t.assert(this.renderPlugins.length<n,"Removing non-added render plugin");for(let n=0;n<this.slots.length;++n)this.slots[n]=this.slots[n].filter((n=>n!==e));e.uninitializeRenderContext(),this.pluginContext.requestRender()},s.prepareRender=function(e){for(const n of this.renderPlugins)n.prepareRender&&n.prepareRender(e)},s.render=function(e,n){n.slot=e;const t=this.slots[e];let r=!1;for(const e of t)e.canRender&&e.render(n)&&(r=!0);return r},s.queryDepthRange=function(e){const n=i;n.near=1/0,n.far=-1/0;for(const t of this.renderPlugins)if(t.queryDepthRange){const s=t.queryDepthRange(e);s&&r.union(n,s,n)}return n},n._createClass(e,[{key:"needsHighlight",get:function(){return this.renderPlugins.some((e=>e.needsHighlight))}},{key:"needsLinearDepth",get:function(){return this.renderPlugins.some((e=>e.needsLinearDepth))}},{key:"needsLaserlineWithContrastControl",get:function(){const e=this.slots[17];return!!e&&e.length>0}},{key:"renderOccludedFlags",get:function(){let e=0;return this.renderPlugins.forEach((n=>{n.renderOccludedFlags&&(e|=n.renderOccludedFlags)})),e}}]),e}();const i={near:0,far:0};e.RenderPluginManager=s,Object.defineProperty(e,"__esModule",{value:!0})}));
