/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.18/esri/copyright.txt for details.
*/
define(["../../../../chunks/_rollupPluginBabelHelpers","../../../../core/maybe","./geometryDataUtils","./Util","./IdGen","./BoundingInfo"],(function(t,n,e,i,r,o){"use strict";let u=function(){function r(t,n){this._boundingInfo=null,this._id=r.__idGen.gen(n),this._data=t}var u=r.prototype;return u.getIndices=function(t){return this.data.getIndices(t)},u.getAttribute=function(t){return this.data.getAttribute(t)},u.computeAttachmentOrigin=function(t){return"triangle"===this.data.primitiveType?this.computeAttachmentOriginTriangles(t):this.computeAttachmentOriginPoints(t)},u.computeAttachmentOriginTriangles=function(t){const n=this.getIndices(i.VertexAttrConstants.POSITION),r=this.getAttribute(i.VertexAttrConstants.POSITION);return e.computeAttachmentOriginTriangles(r,n,t)},u.computeAttachmentOriginPoints=function(t){const n=this.getIndices(i.VertexAttrConstants.POSITION),r=this.getAttribute(i.VertexAttrConstants.POSITION);return e.computeAttachmentOriginPoints(r,n,t)},u.invalidateBoundingInfo=function(){this._boundingInfo=null},u._calculateBoundingInfo=function(){let t=this.data.getIndices(i.VertexAttrConstants.POSITION);const n=this.data.getAttribute(i.VertexAttrConstants.POSITION),r="triangle"===this.data.primitiveType?3:1;if(0===t.length){t=new Uint32Array(r);for(let n=0;n<r;++n)t[n]=n}const u=t.length;i.assert(u%r==0,"Indexing error: "+u.toFixed(0)+" not divisible by "+r.toFixed(0));const s=e.generateDefaultIndexArray(u/r);return new o(s,r,t,n)},t._createClass(r,[{key:"id",get:function(){return this._id}},{key:"data",get:function(){return this._data}},{key:"indexCount",get:function(){return this.data.indexCount}},{key:"vertexCount",get:function(){return this.data.indexCount}},{key:"faceCount",get:function(){return this.data.indexCount/3}},{key:"boundingInfo",get:function(){return n.isNone(this._boundingInfo)&&(this._boundingInfo=this._calculateBoundingInfo()),this._boundingInfo}}]),r}();return u.__idGen=new r.IdGen,u}));
