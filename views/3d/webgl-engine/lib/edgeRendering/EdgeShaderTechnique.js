/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.18/esri/copyright.txt for details.
*/
define(["require","exports","../../../../../chunks/_rollupPluginBabelHelpers","../../../../../chunks/tslib.es6","../../../../../core/has","../../../../../core/mathUtils","../../core/shaderTechnique/ReloadableShaderModule","../../core/shaderTechnique/ShaderTechnique","../../core/shaderTechnique/ShaderTechniqueConfiguration","../../../../webgl/Program","../../../../webgl/renderState","../../../../webgl/FramebufferObject","../../../../webgl/RenderingContext","../../core/shaderLibrary/attributes/VertexPosition.glsl","../../../../../chunks/EdgeShaderProgram.glsl"],(function(e,r,i,a,t,o,n,l,s,c,d,u,h,f,m){"use strict";r.EdgeShaderTechnique=function(e){function r(){return e.apply(this,arguments)||this}i._inheritsLoose(r,e);var a=r.prototype;return a.bindPass=function(e,r){const i=this.program,{edgeRenderParameters:a,bindParameters:t}=r;f.VertexPosition.bindViewProjTransform(i,a.viewProjectionTransform),i.setUniformMatrix3fv("uTransformNormal_ViewFromGlobal",a.transformNormal_ViewFromGlobal),i.setUniformMatrix4fv("uProj",t.camera.projectionMatrix),i.setUniform2f("uDepthBias",.5,-4e-4),i.setUniform2f("uPixelToNDC",2/t.camera.fullViewport[2],2/t.camera.fullViewport[3]),i.setUniform2f("uNDCToPixel",t.camera.fullViewport[2]/2,t.camera.fullViewport[3]/2),i.setUniform1f("uDistanceFalloffFactor",a.distanceFalloffFactor),i.setUniform2f("uViewportDimInv",1/t.camera.fullViewport[2],1/t.camera.fullViewport[3]),i.setUniform1f("uPixelRatio",t.camera.pixelRatio||1)},a.initializeProgram=function(e){const i=r.shader.get(),a=this.configuration,t=i.build({slicePlaneEnabled:a.slicePlaneEnabled,sliceHighlightDisabled:a.sliceHighlightDisabled,sliceEnabledForVertexPrograms:!1,silhouette:a.silhouette,legacy:a.legacy,antialiasing:a.antialiasing,mode:a.mode,doublePrecisionRequiresObfuscation:a.doublePrecisionRequiresObfuscation});return new c(e.rctx,t.generateSource("vertex"),t.generateSource("fragment"),i.attributeLocations)},a.initializePipeline=function(e){const r=e.rctx.capabilities.blendMinMax;return r?d.makePipelineState({blending:d.separateBlendingParams(1,1,0,1,32774,r.MAX),depthTest:{func:515},colorWrite:d.defaultColorWriteParams}):d.makePipelineState({depthTest:{func:515},depthWrite:d.defaultDepthWriteParams,colorWrite:d.defaultColorWriteParams})},r}(l.ShaderTechnique),r.EdgeShaderTechnique.shader=new n.ReloadableShaderModule(m.EdgeShaderProgram,(()=>new Promise((function(r,i){e(["../../shaders/sources/edgeRenderer/EdgeShaderProgram.glsl"],r,i)})))),function(e){let r=function(e){function r(){var r;return(r=e.apply(this,arguments)||this).slicePlaneEnabled=!1,r.sliceHighlightDisabled=!1,r.silhouette=!1,r.legacy=!1,r.antialiasing=!1,r.mode=0,r.doublePrecisionRequiresObfuscation=!1,r}return i._inheritsLoose(r,e),r}(s.ShaderTechniqueConfiguration);a.__decorate([s.parameter()],r.prototype,"slicePlaneEnabled",void 0),a.__decorate([s.parameter()],r.prototype,"sliceHighlightDisabled",void 0),a.__decorate([s.parameter()],r.prototype,"silhouette",void 0),a.__decorate([s.parameter()],r.prototype,"legacy",void 0),a.__decorate([s.parameter()],r.prototype,"antialiasing",void 0),a.__decorate([s.parameter({count:3})],r.prototype,"mode",void 0),a.__decorate([s.parameter()],r.prototype,"doublePrecisionRequiresObfuscation",void 0),e.Configuration=r}(r.EdgeShaderTechnique||(r.EdgeShaderTechnique={})),Object.defineProperty(r,"__esModule",{value:!0})}));
