/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.25/esri/copyright.txt for details.
*/
define(["../../../../../chunks/_rollupPluginBabelHelpers","../../../support/buffer/workerHelper","./bufferLayouts","./edgePreprocessing","./edgeProcessing"],(function(e,t,n,r,i){"use strict";let o=function(){function n(){}var o=n.prototype;return o.extract=function(){var t=e._asyncToGenerator((function*(e){const t=a(e),n=i.extract(t),r=[t.data.buffer];return{result:s(n,r),transferList:r}}));function n(e){return t.apply(this,arguments)}return n}(),o.extractComponentsEdgeLocations=function(){var n=e._asyncToGenerator((function*(e){const n=a(e),o=i.extractEdgeInformation(n.data,n.skipDeduplicate,n.indices,n.indicesLength),s=r.extractEdges(o,l,d),c=[];return{result:t.packInterleavedBuffer(s.regular.instancesData,c),transferList:c}}));function o(e){return n.apply(this,arguments)}return o}(),o.extractEdgeLocations=function(){var n=e._asyncToGenerator((function*(e){const n=a(e),o=i.extractEdgeInformation(n.data,n.skipDeduplicate,n.indices,n.indicesLength),s=r.extractEdges(o,f,d),c=[];return{result:t.packInterleavedBuffer(s.regular.instancesData,c),transferList:c}}));function o(e){return n.apply(this,arguments)}return o}(),n}();function a(e){return{data:n.EdgeInputBufferLayout.createView(e.dataBuffer),indices:"Uint32Array"===e.indicesType?new Uint32Array(e.indices):"Uint16Array"===e.indicesType?new Uint16Array(e.indices):e.indices,indicesLength:e.indicesLength,writerSettings:e.writerSettings,skipDeduplicate:e.skipDeduplicate}}function s(e,n){n.push(e.regular.lodInfo.lengths.buffer),n.push(e.silhouette.lodInfo.lengths.buffer);return{regular:{instancesData:t.packInterleavedBuffer(e.regular.instancesData,n),lodInfo:{lengths:e.regular.lodInfo.lengths.buffer}},silhouette:{instancesData:t.packInterleavedBuffer(e.silhouette.instancesData,n),lodInfo:{lengths:e.silhouette.lodInfo.lengths.buffer}},averageEdgeLength:e.averageEdgeLength}}let c=function(){function e(){}var t=e.prototype;return t.allocate=function(e){return i.extractEdgeLocationsLayout.createBuffer(e)},t.trim=function(e,t){return e.slice(0,t)},t.write=function(e,t,n){e.position0.setVec(t,n.position0),e.position1.setVec(t,n.position1)},e}(),u=function(){function e(){}var t=e.prototype;return t.allocate=function(e){return i.extractComponentsEdgeLocationsLayout.createBuffer(e)},t.trim=function(e,t){return e.slice(0,t)},t.write=function(e,t,n){e.position0.setVec(t,n.position0),e.position1.setVec(t,n.position1),e.componentIndex.set(t,n.componentIndex)},e}();const f=new c,l=new u,d={allocate:()=>null,write:()=>{},trim:()=>null};return o}));
