/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.25/esri/copyright.txt for details.
*/
define(["../../../../core/maybe","./glUtil3D","../../../../chunks/Compositing.glsl","../shaders/CompositingTechnique","../shaders/CompositingTechniqueConfiguration","../../../../chunks/HUDCompositing.glsl","../shaders/HUDCompositingTechnique","../../../../chunks/OITCompositing.glsl","../shaders/OITCompositingTechnique","../../../../chunks/OverlayCompositing.glsl","../shaders/OverlayCompositingTechnique","../../../webgl/enums","../../../webgl/Util"],(function(e,t,i,s,r,o,n,a,h,c,u,m,_){"use strict";return function(){function p(e,t){this._rctx=e,this._techniqueRepository=t,this._configuration=new r.CompositingTechniqueConfiguration,this._passParameters=new i.CompositingPassParameters,this._oitParameters=new a.OITCompositingPassParameters,this._hudParameters=new o.HUDCompositingPassParameters,this._overlayParameters=new c.OverlayCompositingPassParameters}var g=p.prototype;return g.dispose=function(){this._vao=e.disposeMaybe(this._vao)},g.compositeOIT=function(e,t,i,s){this._oitParameters.colorTexture=t,this._oitParameters.alphaTexture=i,this._oitParameters.frontFaceTexture=s;const r=this._rctx,o=this._techniqueRepository.acquire(h.OITCompositingTechnique);r.bindTechnique(o,this._oitParameters,e);const n=this._ensureVAO();r.bindVAO(n),r.drawArrays(m.PrimitiveType.TRIANGLE_STRIP,0,_.vertexCount(n,"geometry")),o.release()},g.compositeHUD=function(e,t){this._hudParameters.texture=t;const i=this._rctx,s=this._techniqueRepository.acquire(n.HUDCompositingTechnique);i.bindTechnique(s,this._hudParameters,e);const r=this._ensureVAO();i.bindVAO(r),i.drawArrays(m.PrimitiveType.TRIANGLE_STRIP,0,_.vertexCount(r,"geometry")),s.release()},g.compositeOverlay=function(e,t,i,s){this._overlayParameters.texture=t,this._overlayParameters.opacity=i,this._overlayParameters.overlayIndex=s;const r=this._rctx,o=this._techniqueRepository.acquire(u.OverlayCompositingTechnique);r.bindTechnique(o,this._overlayParameters,e);const n=this._ensureVAO();r.bindVAO(n),r.drawArrays(m.PrimitiveType.TRIANGLE_STRIP,0,_.vertexCount(n,"geometry")),o.release()},g.composite=function(e,t,i=r.AlphaMode.None,o=1){const n=this._rctx;this._configuration.alphaMode=i,this._configuration.hasOpacityFactor=1!==o,this._passParameters.texture=t,this._passParameters.opacity=o;const a=this._techniqueRepository.acquire(s.CompositingTechnique,this._configuration);n.bindTechnique(a,this._passParameters,e);const h=this._ensureVAO();n.bindVAO(h),n.drawArrays(m.PrimitiveType.TRIANGLE_STRIP,0,_.vertexCount(h,"geometry")),a.release()},g._ensureVAO=function(){return e.isNone(this._vao)&&(this._vao=t.createQuadVAO(this._rctx)),this._vao},p}()}));
