/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.19/esri/copyright.txt for details.
*/
define(["exports","../../../../chunks/vec3f64","../../../../chunks/vec3","../../../../chunks/triangle"],(function(t,e,n,r){"use strict";let a=(()=>{const t=new Uint32Array(131072);for(let e=0;e<t.length;++e)t[e]=e;return t})();const s=new Uint16Array([0]),c=(()=>{const t=new Uint16Array(65536);for(let e=0;e<t.length;++e)t[e]=e;return t})();function i(t){if(1===t)return s;if(t<c.length)return new Uint16Array(c.buffer,0,t);if(t>a.length){const e=Math.max(2*a.length,t);a=new Uint32Array(e);for(let t=0;t<a.length;t++)a[t]=t}return new Uint32Array(a.buffer,0,t)}function l(t,e,a){if(!t)return!1;const{size:s,data:c}=t;n.set(a,0,0,0),n.set(g,0,0,0);let i=0,l=0;for(let o=0;o<e.length-2;o+=3){const t=e[o+0]*s,u=e[o+1]*s,A=e[o+2]*s;n.set(d,c[t+0],c[t+1],c[t+2]),n.set(f,c[u+0],c[u+1],c[u+2]),n.set(h,c[A+0],c[A+1],c[A+2]);const y=r.areaPoints3d(d,f,h);y?(n.add(d,d,f),n.add(d,d,h),n.scale(d,d,1/3*y),n.add(a,a,d),i+=y):(n.add(g,g,d),n.add(g,g,f),n.add(g,g,h),l+=3)}return(0!==l||0!==i)&&(0!==i?(n.scale(a,a,1/i),!0):0!==l&&(n.scale(a,g,1/l),!0))}function o(t,e,r){if(!t||!e)return!1;const{size:a,data:s}=t;n.set(r,0,0,0);let c=-1,i=0;for(let n=0;n<e.length;n++){const t=e[n]*a;c!==t&&(r[0]+=s[t+0],r[1]+=s[t+1],r[2]+=s[t+2],i++),c=t}return i>1&&n.scale(r,r,1/i),i>0}function u(t,e,r,a){if(!t)return!1;const{size:s,data:c}=t;n.set(a,0,0,0),n.set(g,0,0,0);let i=0,l=0;const o=e?e.length-1:c.length/s-1,u=o+(r?2:0);for(let h=0;h<u;h+=2){const t=h<o?h:o,r=h<o?h+1:0,u=(e?e[t]:t)*s,A=(e?e[r]:r)*s;d[0]=c[u+0],d[1]=c[u+1],d[2]=c[u+2],f[0]=c[A+0],f[1]=c[A+1],f[2]=c[A+2],n.scale(d,n.add(d,d,f),.5);const y=n.dist(d,f);y>0?(n.add(a,a,n.scale(d,d,y)),i+=y):(n.add(g,g,d),l++)}return 0!==i?(n.scale(a,a,1/i),!0):0!==l&&(n.scale(a,g,1/l),!0)}const d=e.create(),f=e.create(),h=e.create(),g=e.create();t.computeAttachmentOriginLines=u,t.computeAttachmentOriginPoints=o,t.computeAttachmentOriginTriangles=l,t.generateDefaultIndexArray=i,Object.defineProperty(t,"__esModule",{value:!0})}));
