/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.20/esri/copyright.txt for details.
*/
define(["exports","../../../../../chunks/_rollupPluginBabelHelpers","../../../support/buffer/glUtil","../DefaultVertexAttributeLocations","../intersectorUtils","../../materials/renderers/utils","../../../../webgl/BufferObject","../../../../webgl/VertexArrayObject"],(function(e,t,r,s,n,i,a,o){"use strict";let l=function(){function e(e,t){const n=e.renderContext.rctx,l=t.geometry,u=t.material;this.materialRep=e.materialRep,u.setParameterValues({instancedDoublePrecision:!0});const d=u.createBufferWriter(),m=d.vertexBufferLayout,f=d.elementCount(l),c=d.allocate(f);d.write({},l,c,0),this.geometry=l,this.material=u,this.glMaterials=i.acquireMaterials(u,this.materialRep),this.vertexBufferLayout=m,this.vbo=a.createVertex(n,35044,c.buffer),this.vao=new o(n,s.Default3D,{geometry:r.glLayout(m)},{geometry:this.vbo}),this.vertexCount=f}var l=e.prototype;return l.destroy=function(){i.releaseMaterials(this.material,this.materialRep),this.vbo.dispose(),this.vao.dispose()},l.intersect=function(e,t,r,s,i,a){const o=this.geometry.id,l=i.toString();this.material.intersect(this.geometry,null,e.transform.transform,e,r,s,((r,s,u,d)=>{if(r>=0){if(null!=t&&!t(e.rayBeginPoint,e.rayEndPoint,r))return;const m={type:"external",metadata:{layerUid:a.layerUid,graphicUid:a.graphicUid(i)}};if((null==e.results.min.drapedLayerOrder||d>=e.results.min.drapedLayerOrder)&&(null==e.results.min.dist||r<e.results.min.dist)&&(e.results.min.set(m,l,r,s,e.transform.transform,d,null,o,u),e.results.min.intersector="LodRenderer"),0!==e.options.store&&(null==e.results.max.drapedLayerOrder||d>=e.results.max.drapedLayerOrder)&&(null==e.results.max.dist||r>e.results.max.dist)&&(e.results.max.set(m,l,r,s,e.transform.transform,d,null,o,u),e.results.min.intersector="LodRenderer"),2===e.options.store){const t=new n.IntersectorResult(e.results.min.ray);t.set(m,l,r,s,e.transform.transform,d,null,o,u),t.intersector="LodRenderer",e.results.all.push(t)}}}))},t._createClass(e,[{key:"boundingInfo",get:function(){return this.geometry.boundingInfo}},{key:"triangleCount",get:function(){return this.vertexCount/3}}]),e}();e.LodComponentData=l,Object.defineProperty(e,"__esModule",{value:!0})}));
