/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.24/esri/copyright.txt for details.
*/
import{_ as e}from"../../../../chunks/tslib.es6.js";import{ShaderOutput as t}from"../core/shaderLibrary/ShaderOutputOptions.js";import{ReloadableShaderModule as r}from"../core/shaderTechnique/ReloadableShaderModule.js";import{ShaderTechnique as o}from"../core/shaderTechnique/ShaderTechnique.js";import{parameter as i}from"../core/shaderTechnique/ShaderTechniqueConfiguration.js";import{CullFaceOptions as s,TransparencyPassType as n}from"../lib/basicInterfaces.js";import{blendingDefault as a,oitBlending as p,oitDepthWrite as l,OITPolygonOffset as u}from"../lib/OrderIndependentTransparency.js";import{Program as c}from"../lib/Program.js";import{VertexAttribute as h}from"../lib/VertexAttribute.js";import{DefaultTechniqueConfiguration as d}from"../materials/DefaultTechniqueConfiguration.js";import{S as m}from"../../../../chunks/ShadedColorMaterial.glsl.js";import{CompareFunction as f}from"../../../webgl/enums.js";import{makePipelineState as b,cullingParams as S,defaultDepthWriteParams as y,defaultColorWriteParams as g}from"../../../webgl/renderState.js";class T extends o{initializeProgram(e){const t=T.shader.get().build(this.configuration);return new c(e.rctx,t,O)}_setPipelineState(e){const r=this.configuration,o=e===n.NONE,i=e===n.FrontFace;return b({blending:r.output!==t.Color&&r.output!==t.Alpha||!r.transparent?null:o?a:p(e),culling:S(r.cullFace),depthTest:{func:i?f.LESS:r.shadingEnabled?f.LEQUAL:f.LESS},depthWrite:o?r.writeDepth&&y:l(e),colorWrite:g,polygonOffset:o||i?null:u})}initializePipeline(){return this._setPipelineState(this.configuration.transparencyPassType)}}T.shader=new r(m,(()=>import("./ShadedColorMaterial.glsl.js")));class j extends d{constructor(){super(...arguments),this.output=t.Color,this.cullFace=s.None,this.transparencyPassType=n.NONE,this.hasSlicePlane=!1,this.transparent=!1,this.writeDepth=!0,this.screenSizeEnabled=!0,this.shadingEnabled=!0,this.hasMultipassTerrain=!1,this.cullAboveGround=!1}}e([i({count:t.COUNT})],j.prototype,"output",void 0),e([i({count:s.COUNT})],j.prototype,"cullFace",void 0),e([i({count:n.COUNT})],j.prototype,"transparencyPassType",void 0),e([i()],j.prototype,"hasSlicePlane",void 0),e([i()],j.prototype,"transparent",void 0),e([i()],j.prototype,"writeDepth",void 0),e([i()],j.prototype,"screenSizeEnabled",void 0),e([i()],j.prototype,"shadingEnabled",void 0),e([i()],j.prototype,"hasMultipassTerrain",void 0),e([i()],j.prototype,"cullAboveGround",void 0);const O=new Map([[h.POSITION,0],[h.NORMAL,1],[h.OFFSET,2]]);export{T as ShadedColorMaterialTechnique,j as ShadedColorMaterialTechniqueConfiguration,O as ShadedColorMaterialVertexAttrLocations};
