/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.21/esri/copyright.txt for details.
*/
define(["require","exports","../../../../chunks/_rollupPluginBabelHelpers","../../../../chunks/tslib.es6","../../../../chunks/Terrain.glsl","../core/shaderTechnique/ReloadableShaderModule","../core/shaderTechnique/ShaderTechnique","../core/shaderTechnique/ShaderTechniqueConfiguration","../lib/DefaultVertexAttributeLocations","../lib/Program","../lib/StencilUtils","../../../webgl/renderState"],(function(e,r,t,a,o,i,n,d,l,c,s,u){"use strict";let p=function(e){function r(){return e.apply(this,arguments)||this}t._inheritsLoose(r,e);var a=r.prototype;return a.initializeProgram=function(e){const t=r.shader.get(),a=this.configuration,o=t.build({overlayMode:a.overlayMode,output:a.output,viewingMode:e.viewingMode,slicePlaneEnabled:a.slicePlaneEnabled,sliceHighlightDisabled:!1,sliceEnabledForVertexPrograms:!1,textureFadingEnabled:a.textureFadingEnabled&&!a.renderOccluded,hasBackgroundColor:a.hasBackgroundColor,useGrid:a.useGrid,receiveShadows:a.receiveShadows&&!a.renderOccluded,receiveAmbientOcclusion:!1,atmosphere:a.atmosphere,tileBorders:a.tileBorders,screenSizePerspective:a.screenSizePerspective,pbrMode:0,ssrEnabled:a.ssrEnabled,highStepCount:!1});return new c.Program(e.rctx,o,l.Default3D)},a.initializePipeline=function(){const e=this.configuration,r=e.backfaceCullingEnabled&&!e.renderOccluded;return u.makePipelineState({blending:e.renderOccluded?u.simpleBlendingParams(1,771):null,culling:r&&u.backFaceCullingParams,depthTest:!e.renderOccluded&&{func:513},depthWrite:!e.renderOccluded&&u.defaultDepthWriteParams,colorWrite:u.defaultColorWriteParams,stencilTest:e.stencilEnabled?s.renderWhenBitIsNotSet(1):null})},r}(n.ShaderTechnique);p.shader=new i.ReloadableShaderModule(o.TerrainShader,(()=>new Promise((function(r,t){e(["../core/shaderLibrary/terrain/Terrain.glsl"],r,t)}))));let h=function(e){function r(){var r;return(r=e.apply(this,arguments)||this).output=0,r.overlayMode=0,r.atmosphere=!1,r.receiveShadows=!1,r.slicePlaneEnabled=!1,r.backfaceCullingEnabled=!1,r.stencilEnabled=!1,r.textureFadingEnabled=!1,r.hasBackgroundColor=!1,r.useGrid=!1,r.renderOccluded=!1,r.ssrEnabled=!1,r.tileBorders=!1,r.screenSizePerspective=!1,r}return t._inheritsLoose(r,e),r}(d.ShaderTechniqueConfiguration);a.__decorate([d.parameter({count:8})],h.prototype,"output",void 0),a.__decorate([d.parameter({count:3})],h.prototype,"overlayMode",void 0),a.__decorate([d.parameter()],h.prototype,"atmosphere",void 0),a.__decorate([d.parameter()],h.prototype,"receiveShadows",void 0),a.__decorate([d.parameter()],h.prototype,"slicePlaneEnabled",void 0),a.__decorate([d.parameter()],h.prototype,"backfaceCullingEnabled",void 0),a.__decorate([d.parameter()],h.prototype,"stencilEnabled",void 0),a.__decorate([d.parameter()],h.prototype,"textureFadingEnabled",void 0),a.__decorate([d.parameter()],h.prototype,"hasBackgroundColor",void 0),a.__decorate([d.parameter()],h.prototype,"useGrid",void 0),a.__decorate([d.parameter()],h.prototype,"renderOccluded",void 0),a.__decorate([d.parameter()],h.prototype,"ssrEnabled",void 0),a.__decorate([d.parameter()],h.prototype,"tileBorders",void 0),a.__decorate([d.parameter()],h.prototype,"screenSizePerspective",void 0),r.TerrainTechnique=p,r.TerrainTechniqueConfiguration=h,Object.defineProperty(r,"__esModule",{value:!0})}));
