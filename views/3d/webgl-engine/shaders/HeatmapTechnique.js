/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.23/esri/copyright.txt for details.
*/
define(["require","exports","../../../../chunks/_rollupPluginBabelHelpers","../../../../chunks/tslib.es6","../core/shaderTechnique/ReloadableShaderModule","../core/shaderTechnique/ShaderTechnique","../core/shaderTechnique/ShaderTechniqueConfiguration","../lib/DefaultVertexAttributeLocations","../lib/OrderIndependentTransparency","../lib/Program","../../../../chunks/Heatmap.glsl","../../../webgl/enums","../../../webgl/renderState","../../../../chunks/HeatmapDensity.glsl"],(function(e,t,i,r,n,a,o,s,u,l,d,h,c,m){"use strict";let p=function(e){function t(t,i){var r;return r=e.call(this,t,i,(()=>r.destroy()))||this}i._inheritsLoose(t,e);var r=t.prototype;return r.initializeProgram=function(e){const i=t.shader.get().build({mode:this.configuration.mode});return new l.Program(e.rctx,i,s.Default3D)},r.initializePipeline=function(e){return c.makePipelineState({blending:u.blendingDefault,colorWrite:c.defaultColorWriteParams,depthTest:null,depthWrite:null})},r.bindPass=function(e,t){const{densityMap:i,colorRamp:r,maxDensity:n,minDensity:a,searchRadius:o}=e;this.program.bindTexture(i,"densityMap"),this.program.bindTexture(r,"tex"),this.configuration.mode===m.HeatmapMode.KernelDensity&&this.program.setUniform1f("densityMultiplier",3/(o*o*Math.PI)),this.program.setUniform1f("densityNormalizer",1/(n-a)),this.program.setUniform1f("minDensity",a)},i._createClass(t,[{key:"primitiveType",get:function(){return h.PrimitiveType.TRIANGLE_STRIP}}]),t}(a.ShaderTechnique);p.shader=new n.ReloadableShaderModule(d.HeatmapShader,(()=>new Promise(((t,i)=>e(["./Heatmap.glsl"],t,i)))));let f=function(e){function t(){var t;return(t=e.apply(this,arguments)||this).mode=m.HeatmapMode.GaussianBlur,t}return i._inheritsLoose(t,e),t}(o.ShaderTechniqueConfiguration);r.__decorate([o.parameter()],f.prototype,"mode",void 0),Object.defineProperty(t,"HeatmapMode",{enumerable:!0,get:()=>m.HeatmapMode}),t.HeatmapTechnique=p,t.HeatmapTechniqueConfiguration=f,Object.defineProperties(t,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})}));
