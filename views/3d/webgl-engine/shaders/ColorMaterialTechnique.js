/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.24/esri/copyright.txt for details.
*/
import{ShaderOutput as e}from"../core/shaderLibrary/ShaderOutputOptions.js";import{ReloadableShaderModule as t}from"../core/shaderTechnique/ReloadableShaderModule.js";import{ShaderTechnique as r}from"../core/shaderTechnique/ShaderTechnique.js";import{TransparencyPassType as i}from"../lib/basicInterfaces.js";import{Default3D as n}from"../lib/DefaultVertexAttributeLocations.js";import{blendingDefault as o,oitBlending as s,oitDepthTest as l,getOITPolygonOffset as a}from"../lib/OrderIndependentTransparency.js";import{Program as c}from"../lib/Program.js";import{stencilWriteMaskOn as p,stencilToolMaskBaseParams as u,stencilBaseAllZerosParams as h}from"../lib/StencilUtils.js";import{C as f}from"../../../../chunks/ColorMaterial.glsl.js";import{makePipelineState as d,cullingParams as m,defaultDepthWriteParams as g,defaultColorWriteParams as b}from"../../../webgl/renderState.js";class P extends r{initializeProgram(e){const t=P.shader.get().build(this.configuration);return new c(e.rctx,t,n)}_createPipeline(t,r){const n=this.configuration,c=t===i.NONE,f=t===i.FrontFace;return d({blending:n.output!==e.Color&&n.output!==e.Alpha||!n.transparent?null:c?o:s(t),culling:m(n.cullFace),depthTest:{func:l(t)},depthWrite:c||f?n.writeDepth&&g:null,colorWrite:b,stencilWrite:n.hasOccludees?p:null,stencilTest:n.hasOccludees?r?u:h:null,polygonOffset:c||f?n.polygonOffset&&j:a(n.enableOffset)})}initializePipeline(){return this._occludeePipelineState=this._createPipeline(this.configuration.transparencyPassType,!0),this._createPipeline(this.configuration.transparencyPassType,!1)}getPipelineState(e,t){return t?this._occludeePipelineState:super.getPipelineState(e,t)}}P.shader=new t(f,(()=>import("./ColorMaterial.glsl.js")));const j={factor:1,units:1};export{P as ColorMaterialTechnique};
