/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.26/esri/copyright.txt for details.
*/
define(["require","exports","../../../../chunks/_rollupPluginBabelHelpers","../core/shaderLibrary/ShaderOutput","../core/shaderTechnique/ReloadableShaderModule","../core/shaderTechnique/ShaderTechnique","../lib/DefaultVertexAttributeLocations","../lib/Program","../lib/StencilUtils","../../../../chunks/NativeLine.glsl","../../../webgl/context-util","../../../webgl/enums","../../../webgl/renderState"],(function(e,t,i,n,r,l,a,o,s,u,c,p,d){"use strict";let h=function(e){function t(){return e.apply(this,arguments)||this}i._inheritsLoose(t,e);var r=t.prototype;return r.initializeConfiguration=function(e,t){t.hasWebGL2Context=e.rctx.type===c.ContextType.WEBGL2},r.initializeProgram=function(e){return new o.Program(e.rctx,t.shader.get().build(this.configuration),a.Default3D)},r.initializePipeline=function(){const e=this.configuration,t=d.separateBlendingParams(p.BlendFactor.SRC_ALPHA,p.BlendFactor.ONE,p.BlendFactor.ONE_MINUS_SRC_ALPHA,p.BlendFactor.ONE_MINUS_SRC_ALPHA),i=(t,i=null,n=null)=>d.makePipelineState({blending:i,depthTest:s.depthCompareLess,depthWrite:n,colorWrite:d.defaultColorWriteParams,stencilWrite:e.hasOccludees?s.stencilWriteMaskOn:null,stencilTest:e.hasOccludees?t?s.stencilToolMaskBaseParams:s.stencilBaseAllZerosParams:null});return e.output===n.ShaderOutput.Color?(this._occludeePipelineState=i(!0,e.transparent||this._stippleEnabled?t:null,d.defaultDepthWriteParams),i(!1,e.transparent||this._stippleEnabled?t:null,d.defaultDepthWriteParams)):i(!1)},r.getPipelineState=function(t,i){return i?this._occludeePipelineState:e.prototype.getPipelineState.call(this,t,i)},i._createClass(t,[{key:"_stippleEnabled",get:function(){return this.configuration.stippleEnabled&&this.configuration.output!==n.ShaderOutput.Highlight}},{key:"primitiveType",get:function(){return p.PrimitiveType.LINES}}]),t}(l.ShaderTechnique);h.shader=new r.ReloadableShaderModule(u.NativeLine,(()=>new Promise(((t,i)=>e(["./NativeLine.glsl"],t,i))))),t.NativeLineTechnique=h,Object.defineProperty(t,Symbol.toStringTag,{value:"Module"})}));
