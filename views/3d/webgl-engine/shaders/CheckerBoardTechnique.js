/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.18/esri/copyright.txt for details.
*/
define(["require","exports","../../../../chunks/_rollupPluginBabelHelpers","../../../../chunks/tslib.es6","../core/shaderTechnique/ReloadableShaderModule","../core/shaderTechnique/ShaderTechnique","../core/shaderTechnique/ShaderTechniqueConfiguration","../lib/DefaultVertexAttributeLocations","../../../webgl/Program","../../../webgl/renderState","../core/shaderLibrary/util/View.glsl","../lib/OrderIndependentTransparency","../../../../chunks/CheckerBoard.glsl"],(function(e,r,t,n,i,o,a,s,c,p,u,l,h){"use strict";let d=function(e){function r(){return e.apply(this,arguments)||this}t._inheritsLoose(r,e);var n=r.prototype;return n.initializeProgram=function(e){const t=r.shader.get(),n=this.configuration,i=t.build({OITEnabled:0===n.transparencyPassType});return new c(e.rctx,i.generateSource("vertex"),i.generateSource("fragment"),s.Default3D)},n.bindPass=function(e,r,t){u.View.bindProjectionMatrix(this.program,t.camera.projectionMatrix),this.program.setUniform2fv("size",r.size),this.program.setUniform4fv("color1",r.color1),this.program.setUniform4fv("color2",r.color2)},n.bindDraw=function(e){u.View.bindView(this.program,e)},n.setPipelineState=function(e){const r=this.configuration,t=3===e,n=2===e;return p.makePipelineState({blending:r.transparent?t?g:l.OITBlending(e):null,depthTest:{func:l.OITDepthTest(e)},depthWrite:t?r.writeDepth&&p.defaultDepthWriteParams:l.OITDepthWrite(e),colorWrite:p.defaultColorWriteParams,polygonOffset:t||n?r.polygonOffset&&f:{factor:-1,units:-25}})},n.initializePipeline=function(){return this.setPipelineState(this.configuration.transparencyPassType)},r}(o.ShaderTechnique);d.shader=new i.ReloadableShaderModule(h.CheckerBoardShader,(()=>new Promise((function(r,t){e(["./CheckerBoard.glsl"],r,t)}))));const f={factor:0,units:-25},g=p.separateBlendingParams(770,1,771,771);let y=function(e){function r(){var r;return(r=e.apply(this,arguments)||this).transparent=!1,r.writeDepth=!0,r.polygonOffset=!1,r.transparencyPassType=3,r}return t._inheritsLoose(r,e),r}(a.ShaderTechniqueConfiguration);n.__decorate([a.parameter()],y.prototype,"transparent",void 0),n.__decorate([a.parameter()],y.prototype,"writeDepth",void 0),n.__decorate([a.parameter()],y.prototype,"polygonOffset",void 0),n.__decorate([a.parameter({count:4})],y.prototype,"transparencyPassType",void 0),r.CheckerBoardTechnique=d,r.CheckerBoardTechniqueConfiguration=y,Object.defineProperty(r,"__esModule",{value:!0})}));
