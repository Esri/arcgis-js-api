/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
define(["require","exports","../../../../chunks/_rollupPluginBabelHelpers","../../../../chunks/tslib.es6","../core/shaderLibrary/util/View.glsl","../core/shaderTechnique/ReloadableShaderModule","../core/shaderTechnique/ShaderTechnique","../core/shaderTechnique/ShaderTechniqueConfiguration","../lib/DefaultVertexAttributeLocations","../lib/OrderIndependentTransparency","../lib/Program","../../../../chunks/MeasurementArrow.glsl","../../../webgl/renderState"],(function(e,r,t,n,i,o,a,s,l,u,p,c,d){"use strict";let h=function(e){function r(r,t,n){return e.call(this,r,t,n)||this}t._inheritsLoose(r,e);var n=r.prototype;return n.initializeProgram=function(e){const t=r.shader.get().build();return new p.Program(e.rctx,t,l.Default3D)},n.bindPass=function(e,r){i.bindProjectionMatrix(this.program,r.camera.projectionMatrix),this.program.setUniform1f("width",e.width),this.program.setUniform1f("outlineSize",e.outlineSize),this.program.setUniform4fv("outlineColor",e.outlineColor),this.program.setUniform1f("stripeLength",e.stripeLength),this.program.setUniform4fv("stripeEvenColor",e.stripeEvenColor),this.program.setUniform4fv("stripeOddColor",e.stripeOddColor)},n.bindDraw=function(e){i.bindView(this.program,e),this.program.rebindTextures()},n.setPipelineState=function(e){const r=3===e,t=this.configuration;return d.makePipelineState({blending:t.transparent?r?u.blendingDefault:u.OITBlending(e):null,polygonOffset:this.configuration.polygonOffsetEnabled&&{factor:0,units:-4},depthTest:{func:513},depthWrite:d.defaultDepthWriteParams,colorWrite:d.defaultColorWriteParams})},n.initializePipeline=function(){return this.setPipelineState(this.configuration.transparencyPassType)},t._createClass(r,[{key:"primitiveType",get:function(){return 5}}]),r}(a.ShaderTechnique);h.shader=new o.ReloadableShaderModule(c.MeasurementArrowShader,(()=>new Promise(((r,t)=>e(["./MeasurementArrow.glsl"],r,t)))));let f=function(e){function r(){var r;return(r=e.apply(this,arguments)||this).polygonOffsetEnabled=!1,r.transparent=!1,r.transparencyPassType=3,r}return t._inheritsLoose(r,e),r}(s.ShaderTechniqueConfiguration);n.__decorate([s.parameter()],f.prototype,"polygonOffsetEnabled",void 0),n.__decorate([s.parameter()],f.prototype,"transparent",void 0),n.__decorate([s.parameter({count:4})],f.prototype,"transparencyPassType",void 0),r.MeasurementArrowTechnique=h,r.MeasurementArrowTechniqueConfiguration=f,Object.defineProperty(r,"__esModule",{value:!0})}));
