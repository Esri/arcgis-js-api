/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.24/esri/copyright.txt for details.
*/
import{ViewingMode as t}from"../../../ViewingMode.js";import{ShaderOutput as e}from"../core/shaderLibrary/ShaderOutputOptions.js";import{ReloadableShaderModule as i}from"../core/shaderTechnique/ReloadableShaderModule.js";import{ShaderTechnique as r}from"../core/shaderTechnique/ShaderTechnique.js";import{TransparencyPassType as o}from"../lib/basicInterfaces.js";import{Default3D as n}from"../lib/DefaultVertexAttributeLocations.js";import{oitBlending as s}from"../lib/OrderIndependentTransparency.js";import{Program as a}from"../lib/Program.js";import{H as l}from"../../../../chunks/HUDMaterial.glsl.js";import{BlendFactor as u,CompareFunction as p,PrimitiveType as c}from"../../../webgl/enums.js";import{simpleBlendingParams as h,defaultDepthWriteParams as m,makePipelineState as f,defaultColorWriteParams as d}from"../../../webgl/renderState.js";class g extends r{initializeConfiguration(e,i){i.spherical=e.viewingMode===t.Global}initializeProgram(t){const e=g.shader.get().build(this.configuration);return new a(t.rctx,e,n)}_setPipelineState(t){const i=this.configuration,r=t===o.NONE,n=t===o.FrontFace,a=this.configuration.hasPolygonOffset&&b,l=(r||n)&&i.output!==e.Highlight?(i.depthEnabled||i.output===e.Occlusion)&&m:null;return f({blending:i.output===e.Color||i.output===e.Alpha||i.output===e.Highlight?r?j:s(t):null,depthTest:{func:p.LEQUAL},depthWrite:l,colorWrite:d,polygonOffset:a})}initializePipeline(){return this._setPipelineState(this.configuration.transparencyPassType)}get primitiveType(){return this.configuration.output===e.Occlusion?c.POINTS:c.TRIANGLES}}g.shader=new i(l,(()=>import("./HUDMaterial.glsl.js")));const b={factor:0,units:-4},j=h(u.ONE,u.ONE_MINUS_SRC_ALPHA);export{g as HUDMaterialTechnique};
