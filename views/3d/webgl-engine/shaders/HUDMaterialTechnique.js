/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.26/esri/copyright.txt for details.
*/
define(["require","exports","../../../../chunks/_rollupPluginBabelHelpers","../../../ViewingMode","../core/shaderLibrary/ShaderOutput","../core/shaderTechnique/ReloadableShaderModule","../core/shaderTechnique/ShaderTechnique","../lib/DefaultVertexAttributeLocations","../lib/OrderIndependentTransparency","../lib/Program","../lib/TransparencyPassType","../../../../chunks/HUDMaterial.glsl","../../../webgl/context-util","../../../webgl/enums","../../../webgl/renderState"],(function(e,t,i,n,r,a,o,l,u,s,c,p,h,d,g){"use strict";let f=function(e){function t(){return e.apply(this,arguments)||this}i._inheritsLoose(t,e);var a=t.prototype;return a.initializeConfiguration=function(e,t){t.hasWebGL2Context=e.rctx.type===h.ContextType.WEBGL2,t.spherical=e.viewingMode===n.ViewingMode.Global},a.initializeProgram=function(e){return new s.Program(e.rctx,t.shader.get().build(this.configuration),l.Default3D)},a._setPipelineState=function(e){const t=this.configuration,i=e===c.TransparencyPassType.NONE,n=e===c.TransparencyPassType.FrontFace,a=this.configuration.hasPolygonOffset?P:null,o=(i||n)&&t.output!==r.ShaderOutput.Highlight&&(t.depthEnabled||t.occlusionPass)?g.defaultDepthWriteParams:null;return g.makePipelineState({blending:t.output===r.ShaderOutput.Color||t.output===r.ShaderOutput.Alpha||t.output===r.ShaderOutput.Highlight?i?y:u.oitBlending(e):null,depthTest:{func:d.CompareFunction.LEQUAL},depthWrite:o,colorWrite:g.defaultColorWriteParams,polygonOffset:a})},a.initializePipeline=function(){return this._setPipelineState(this.configuration.transparencyPassType)},i._createClass(t,[{key:"primitiveType",get:function(){return this.configuration.occlusionPass?d.PrimitiveType.POINTS:d.PrimitiveType.TRIANGLES}}]),t}(o.ShaderTechnique);f.shader=new a.ReloadableShaderModule(p.HUDMaterial,(()=>new Promise(((t,i)=>e(["./HUDMaterial.glsl"],t,i)))));const P={factor:0,units:-4},y=g.simpleBlendingParams(d.BlendFactor.ONE,d.BlendFactor.ONE_MINUS_SRC_ALPHA);t.HUDMaterialTechnique=f,Object.defineProperty(t,Symbol.toStringTag,{value:"Module"})}));
