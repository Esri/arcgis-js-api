/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.20/esri/copyright.txt for details.
*/
define(["exports","../../../../chunks/_rollupPluginBabelHelpers","../../../../core/maybe","../../../../core/PerformanceSampler","../../../../core/accessorSupport/utils","../../../webgl/Measurement"],(function(e,t,r,i,s,n){"use strict";const a=["prepare","shadowmap","lineardepth","normals","ssao","opaque","opaque edges","transparent","transparent edges","hudvisibility","transparent terrain","atmosphere","laserline","occluded","antialiasing","highlights","hudOccluded","hudNotoccluded"];let o=function(){function e(){this.triangles=0,this.drawCalls=0}return e.prototype.reset=function(){this.triangles=0,this.drawCalls=0},e}();function l(e,t,i){r.isSome(i)&&(i.drawCalls+=e,i.triangles+=t)}let u=function(e){function r(){var t;return(t=e.call(this,"total")||this).total=0,t.frameCount=0,t}return t._inheritsLoose(r,e),r}(i),m=function(){function e(){this._startTime=0,this._lastSample=0,this._enableGPUTimer=0,this.totalTime=new u,this.gpuTime=new i("gpu",9),this.renderPassTimings=a.map((e=>new i(e))),this.stats=new o}var t=e.prototype;return t.enableGPUTimer=function(){return++this._enableGPUTimer,{remove:s.once((()=>--this._enableGPUTimer))}},t.prerender=function(e){this._startTime=this._lastSample=performance.now(),this._enableGPUTimer&&(this._gpuTimer=n.startMeasurement(e))},t.advance=function(e){const t=performance.now();this.renderPassTimings[e].record(t-this._lastSample),this._lastSample=t},t.postrender=function(){r.isSome(this._gpuTimer)&&(this._gpuTimer.stop((e=>r.isSome(e)&&this.gpuTime.record(e)),16),this._gpuTimer=null);const e=performance.now()-this._startTime;this.totalTime.record(e),this.totalTime.total+=e,this.totalTime.frameCount++},e}();e.RenderStats=o,e.RenderTime=u,e.RendererPerformanceInfo=m,e.addToRenderStats=l,e.performanceStatsCategories=a,Object.defineProperty(e,"__esModule",{value:!0})}));
