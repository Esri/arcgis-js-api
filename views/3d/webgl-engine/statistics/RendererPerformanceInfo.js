/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
define(["exports","../../../../chunks/_rollupPluginBabelHelpers","../../../../core/maybe","../../../../core/PerformanceSampler","../../../../core/accessorSupport/utils","../../../webgl/Measurement"],(function(e,t,r,i,n,s){"use strict";const a=["prepare","shadowmap","lineardepth","normals","ssao","opaque","opaque edges","transparent","transparent edges","hudvisibility","transparent terrain","atmosphere","laserline","occluded","antialiasing","highlights","hudOccluded","hudNotoccluded"];let o=function(e){function r(){var t;return(t=e.call(this,"total")||this).total=0,t.frameCount=0,t}return t._inheritsLoose(r,e),r}(i),l=function(){function e(){this._startTime=0,this._lastSample=0,this._enableGPUTimer=0,this.totalTime=new o,this.gpuTime=new i("gpu",9),this.renderPassTimings=a.map((e=>new i(e)))}var t=e.prototype;return t.enableGPUTimer=function(){return++this._enableGPUTimer,{remove:n.once((()=>--this._enableGPUTimer))}},t.prerender=function(e){this._startTime=this._lastSample=performance.now(),this._enableGPUTimer&&(this._gpuTimer=s.startMeasurement(e))},t.advance=function(e){const t=performance.now();this.renderPassTimings[e].record(t-this._lastSample),this._lastSample=t},t.postrender=function(){r.isSome(this._gpuTimer)&&(this._gpuTimer.stop((e=>r.isSome(e)&&this.gpuTime.record(e)),16),this._gpuTimer=null);const e=performance.now()-this._startTime;this.totalTime.record(e),this.totalTime.total+=e,this.totalTime.frameCount++},e}();e.RenderTime=o,e.RendererPerformanceInfo=l,e.performanceStatsCategories=a,Object.defineProperty(e,"__esModule",{value:!0})}));
