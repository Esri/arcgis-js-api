/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.25/esri/copyright.txt for details.
*/
define(["exports","../../../../chunks/_rollupPluginBabelHelpers","../../../../core/Handles","../../../../core/reactiveUtils","../../state/controllers/GamepadKeyboardController","../../../input/InputHandler"],(function(e,a,t,n,l,r){"use strict";let i=function(e){function r(a){var n;return(n=e.call(this,!0)||this)._view=a,n._watchHandles=new t,n._handle=n.registerIncoming("gamepad",(e=>n._handleEventGamepad(e))),n._handle.pause(),n}a._inheritsLoose(r,e);var i=r.prototype;return i.onInstall=function(a){e.prototype.onInstall.call(this,a),this._watchHandles.add([n.watch((()=>this._view.navigation.gamepad.enabled),(e=>{e?this._handle.resume():(this._handle.pause(),this._cameraControllerGamepad&&(this._cameraControllerGamepad.finishController(),this._cameraControllerGamepad=null))}),n.initial),n.watch((()=>this._view.navigation.gamepad.device),(e=>{this._cameraControllerGamepad&&e&&this._cameraControllerGamepad.gamepadDevice!==e&&(this._cameraControllerGamepad.finishController(),this._cameraControllerGamepad=null)}))])},i.onUninstall=function(){this._watchHandles.removeAll(),e.prototype.onUninstall.call(this)},i._handleEventGamepad=function(e){const a=this._view.navigation.gamepad.device;if(a&&e.data.device!==a)return;const t=this._cameraControllerGamepad&&this._cameraControllerGamepad.active;if(t||l.GamepadKeyboardController.activatesFor(this._view,e.data)){if(!t){const a=new l.GamepadKeyboardController({view:this._view,gamepadDevice:e.data.device});this._view.state.switchCameraController(a)&&(this._cameraControllerGamepad=a)}this._cameraControllerGamepad&&this._cameraControllerGamepad.active&&this._cameraControllerGamepad.gamepadDevice===e.data.device&&this._cameraControllerGamepad.handleEventGamepad(e.data)}},r}(r.InputHandler);e.GamepadNavigation=i,Object.defineProperties(e,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})}));
