/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.18/esri/copyright.txt for details.
*/
define(["exports","../../../chunks/_rollupPluginBabelHelpers","../../../chunks/tslib.es6","../../../core/has","../../../core/Logger","../../../core/accessorSupport/ensureType","../../../core/accessorSupport/decorators/property","../../../core/accessorSupport/decorators/subclass","../../../core/urlUtils","../../../core/uuid","../../../portal/support/resourceExtension","../../../core/Accessor","../../../core/mathUtils","../support/mathUtils","../../../core/Handles","../../../geometry/projectionEllipsoid","../support/stack","../../../chunks/lineSegment","../../../chunks/ray","../../../chunks/boundedPlane","../../../chunks/clipRay","../../../chunks/frustum","../../../chunks/sphere","../../../chunks/triangle","../camera/intersectionUtils","../camera/constraintUtils/surfaceCollision"],(function(e,t,s,n,r,o,i,a,c,l,u,h,p,d,C,f,v,y,m,k,S,g,w,E,_,b){"use strict";e.SurfaceCollisionConstraint=function(e){function s(t){var s;return(s=e.call(this,t)||this).handles=new C,s}t._inheritsLoose(s,e);var n=s.prototype;return n.initialize=function(){this.handles.add(this.view.basemapTerrain.on("elevation-change",(e=>this.handleElevationChangeEvent(e))))},n.destroy=function(){this.handles&&(this.handles.destroy(),this.handles=null)},n.handleElevationChangeEvent=function(e){if(this.view.state.cameraController)return;const t=this.view.state.camera;_.eyeWithinExtent(this.view,t,e.extent,e.spatialReference)&&this.applyToCurrentCamera()},n.applyToCurrentCamera=function(){this.view.state.updateCamera((e=>{b.applySurfaceCollisionConstraint(this.view,e,1)}))},s}(h),s.__decorate([i.property({constructOnly:!0})],e.SurfaceCollisionConstraint.prototype,"view",void 0),e.SurfaceCollisionConstraint=s.__decorate([a.subclass("esri.views.3d.state.ElevationCollisionConstraint")],e.SurfaceCollisionConstraint);var U=e.SurfaceCollisionConstraint;e.default=U,Object.defineProperty(e,"__esModule",{value:!0})}));
