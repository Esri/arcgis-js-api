/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.23/esri/copyright.txt for details.
*/
define(["exports","../../../chunks/_rollupPluginBabelHelpers","../../../chunks/tslib.es6","../../../core/Accessor","../../../core/Handles","../../../core/accessorSupport/decorators/property","../../../core/arrayUtils","../../../core/has","../../../core/accessorSupport/ensureType","../../../core/accessorSupport/decorators/subclass","../camera/constraintUtils","../camera/intersectionUtils","../camera/constraintUtils/surfaceCollision"],(function(e,t,n,s,i,o,r,a,l,c,u,h,p){"use strict";e.SurfaceCollisionConstraint=function(e){function n(t){var n;return(n=e.call(this,t)||this).handles=new i,n}t._inheritsLoose(n,e);var s=n.prototype;return s.initialize=function(){this.handles.add(this.view.basemapTerrain.on("elevation-change",(e=>this._handleElevationChangeEvent(e))))},s.destroy=function(){this.handles&&(this.handles.destroy(),this.handles=null)},s._handleElevationChangeEvent=function(e){if(this.view.state.cameraController)return;const t=this.view.state.camera;h.eyeWithinExtent(this.view,t,e.extent,e.spatialReference)&&this._applyToCurrentCamera()},s._applyToCurrentCamera=function(){this.view.state.updateCamera((e=>{p.applySurfaceCollisionConstraint(this.view,e,p.Mode.EYE_AND_CENTER)}))},n}(s),n.__decorate([o.property({constructOnly:!0})],e.SurfaceCollisionConstraint.prototype,"view",void 0),e.SurfaceCollisionConstraint=n.__decorate([c.subclass("esri.views.3d.state.ElevationCollisionConstraint")],e.SurfaceCollisionConstraint);const d=e.SurfaceCollisionConstraint;e.default=d,Object.defineProperties(e,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})}));
