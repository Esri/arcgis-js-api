/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.20/esri/copyright.txt for details.
*/
define(["exports","../../../chunks/_rollupPluginBabelHelpers","../../../chunks/tslib.es6","../../../core/Accessor","../../../core/Handles","../../../core/accessorSupport/decorators/property","../../../core/has","../../../core/accessorSupport/ensureType","../../../core/Logger","../../../core/accessorSupport/decorators/subclass","../../../core/mathUtils","../../../geometry/support/ray","../../../chunks/sphere","../../../geometry/support/vectorStacks","../camera/constraintUtils/surfaceCollision","../../../geometry/projectionEllipsoid","../camera/intersectionUtils"],(function(e,t,r,o,s,n,i,a,c,l,u,p,h,d,C,v,f){"use strict";e.SurfaceCollisionConstraint=function(e){function r(t){var r;return(r=e.call(this,t)||this).handles=new s,r}t._inheritsLoose(r,e);var o=r.prototype;return o.initialize=function(){this.handles.add(this.view.basemapTerrain.on("elevation-change",(e=>this.handleElevationChangeEvent(e))))},o.destroy=function(){this.handles&&(this.handles.destroy(),this.handles=null)},o.handleElevationChangeEvent=function(e){if(this.view.state.cameraController)return;const t=this.view.state.camera;f.eyeWithinExtent(this.view,t,e.extent,e.spatialReference)&&this.applyToCurrentCamera()},o.applyToCurrentCamera=function(){this.view.state.updateCamera((e=>{C.applySurfaceCollisionConstraint(this.view,e,1)}))},r}(o),r.__decorate([n.property({constructOnly:!0})],e.SurfaceCollisionConstraint.prototype,"view",void 0),e.SurfaceCollisionConstraint=r.__decorate([l.subclass("esri.views.3d.state.ElevationCollisionConstraint")],e.SurfaceCollisionConstraint);var y=e.SurfaceCollisionConstraint;e.default=y,Object.defineProperty(e,"__esModule",{value:!0})}));
