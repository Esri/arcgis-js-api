/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.19/esri/copyright.txt for details.
*/
define(["exports","../../../../chunks/_rollupPluginBabelHelpers","../../../../chunks/tslib.es6","../../../../core/has","../../../../core/maybe","../../../../core/Logger","../../../../core/accessorSupport/ensureType","../../../../core/accessorSupport/decorators/property","../../../../core/accessorSupport/decorators/subclass","../../../../core/urlUtils","../../../../core/uuid","../../../../portal/support/resourceExtension","../../../../core/promiseUtils","../../../ViewAnimation","./CameraController"],(function(t,e,i,s,n,o,r,a,c,l,u,h,p,S,m){"use strict";t.AnimationController=function(t){function i(){return t.apply(this,arguments)||this}e._inheritsLoose(i,t);var s=i.prototype;return s.onControllerStart=function(){this.state=m.State.Running,n.isSome(this.viewAnimation)&&this.viewAnimation.when((()=>this.updateStateFromViewAnimation()),(()=>this.updateStateFromViewAnimation()))},s.updateStateFromViewAnimation=function(){!n.isSome(this.viewAnimation)||this.state!==m.State.Ready&&this.state!==m.State.Running||(this.viewAnimation.state===S.State.FINISHED?this.finish():this.viewAnimation.state===S.State.STOPPED&&(this.state=m.State.Stopped))},s.onControllerEnd=function(){n.isSome(this.viewAnimation)&&!this.viewAnimation.done&&(this.state===m.State.Finished?this.viewAnimation.finish():this.state===m.State.Stopped&&this.viewAnimation.stop()),this._asyncResult&&(this.state===m.State.Finished?this._asyncResult.resolve():this._asyncResult.reject(p.createAbortError()))},s.finish=function(){this.finishController()},e._createClass(i,[{key:"canStop",get:function(){return!0}},{key:"asyncResult",get:function(){return this._asyncResult},set:function(t){this._asyncResult&&(this._asyncResult.reject(p.createAbortError()),this._asyncResult=null),this.state===m.State.Finished||this.state===m.State.Stopped?this.state===m.State.Finished?t.resolve():t.reject(p.createAbortError()):this._asyncResult=t}}]),i}(m.CameraController),t.AnimationController=i.__decorate([c.subclass("esri.views.3d.state.controllers.AnimationController")],t.AnimationController),Object.defineProperty(t,"__esModule",{value:!0})}));
