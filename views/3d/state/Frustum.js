/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.18/esri/copyright.txt for details.
*/
define(["exports","../../../chunks/_rollupPluginBabelHelpers","../../../chunks/vec3f64","../../../chunks/vec3","../support/mathUtils","../../../chunks/frustum"],(function(t,e,i,n,s,r){"use strict";let u=function(){function t(t){this.frustum=r.create(),this.lines=new Array(12),this.origin=i.create(),this.direction=i.create(),this._altitude=null,this.renderCoordsHelper=t?t.renderCoordsHelper:null;for(let t=0;t<12;t++)this.lines[t]={origin:null,direction:i.create(),endpoint:null}}var u=t.prototype;return u.update=function(t){r.fromMatrix(t.viewMatrix,t.projectionMatrix,this.frustum),n.copy(this.origin,t.eye),n.copy(this.direction,t.viewForward),this._altitude=this.renderCoordsHelper.getAltitude(this.origin),this.updateLines()},u.updatePoints=function(t){for(let e=0;e<this.frustum.points.length;e++)n.copy(this.frustum.points[e],t[e]);r.recomputePlanes(this.frustum),this.updateLines()},u.intersectsSphere=function(t){return r.intersectsSphere(this.frustum.planes,t)},u.intersectsRay=function(t){return r.intersectsRay(this.frustum.planes,t)},u.intersectsLineSegment=function(t,e){return r.intersectsLineSegment(this.frustum.planes,t,e)},u.intersectsPoint=function(t){return r.intersectsPoint(this.frustum.planes,t)},u.updateLines=function(){const{points:t}=this.frustum;for(let e=0;e<4;e++){const i=e,n=e+4;this.updateLine(this.lines[e],t[i],t[n]),this.updateLine(this.lines[e+4],t[i],3===e?t[0]:t[i+1]),this.updateLine(this.lines[e+8],t[n],3===e?t[4]:t[n+1])}},u.updateLine=function(t,e,i){t.origin=e,t.endpoint=i,s.directionFromTo(t.direction,e,i)},e._createClass(t,[{key:"planes",get:function(){return this.frustum.planes}},{key:"points",get:function(){return this.frustum.points}},{key:"mutablePoints",get:function(){return this.frustum.points}},{key:"altitude",get:function(){return this._altitude}}]),t}();u.planePointIndices=r.planePointIndices,u.nearFarLineIndices=[[0,4],[1,5],[2,6],[3,7]],t.Frustum=u,t.default=u,Object.defineProperty(t,"__esModule",{value:!0})}));
