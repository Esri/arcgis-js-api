/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.20/esri/copyright.txt for details.
*/
define(["exports","../../../chunks/_rollupPluginBabelHelpers","../../../geometry","../../../core/asyncUtils","../../../core/Error","../../../core/unitUtils","../../../geometry/projectionEllipsoid","../../../portal/support/geometryServiceUtils","../../../rest/support/ProjectParameters","../../../geometry/Point","../../../geometry/SpatialReference"],(function(e,r,t,i,o,n,s,c,a,l,u){"use strict";let p=function(){function e(e,r,t=null){this.spatialReference=r,this.unitInMeters=n.getMetersPerUnitForSR(this.spatialReference,s.getReferenceEllipsoid(this.spatialReference).metersPerDegree),this._geometryServicePromise=i.result(this.loadGeometryService(e,t))}var t=e.prototype;return t.loadGeometryService=function(){var e=r._asyncToGenerator((function*(e,r){if(r)return r;try{return yield c.create(e&&e.get("portalItem"))}catch{throw new o("mapcoordshelper:missing-geometry-service","Must specify geometryService in esri/config")}}));function t(r,t){return e.apply(this,arguments)}return t}(),t.awaitGeometryService=function(){var e=r._asyncToGenerator((function*(){const e=yield this._geometryServicePromise;if(!0===e.ok)return e.value;throw e.error}));function t(){return e.apply(this,arguments)}return t}(),t.toGeographic=function(){var e=r._asyncToGenerator((function*(e){const r=yield this.awaitGeometryService();let t,i=!0;Array.isArray(e[0])&&"number"!=typeof e[0]?t=e:(t=[e],i=!1);const o=t.map((e=>e instanceof l?e:new l(e,this.spatialReference))),n=new a({geometries:o,outSpatialReference:u.WGS84}),s=(yield r.project(n)).map((e=>"point"===e.type?[e.x,e.y]:void 0));return i?s:s[0]}));function t(r){return e.apply(this,arguments)}return t}(),e}();e.MapCoordsHelper=p,e.default=p,Object.defineProperty(e,"__esModule",{value:!0})}));
