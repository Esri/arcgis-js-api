/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.18/esri/copyright.txt for details.
*/
define(["exports","../../../core/Error","../../../geometry/SpatialReference","../../../geometry/Point","../../../geometry","../../../core/asyncUtils","../../../tasks/support/ProjectParameters","../../../core/unitUtils","../../../portal/support/geometryServiceUtils"],(function(e,t,r,i,o,a,n,s,c){"use strict";let p=function(){function e(e,t,r=null){this.spatialReference=t,this.unitInMeters=s.getMetersPerUnitForSR(this.spatialReference),this._geometryServicePromise=a.result(this.loadGeometryService(e,r))}var o=e.prototype;return o.loadGeometryService=async function(e,r){if(r)return r;try{return await c.create(e&&e.get("portalItem"))}catch{throw new t("mapcoordshelper:missing-geometry-service","Must specify geometryService in esri/config")}},o.awaitGeometryService=async function(){const e=await this._geometryServicePromise;if(!0===e.ok)return e.value;throw e.error},o.toGeographic=async function(e){const t=await this.awaitGeometryService();let o,a=!0;Array.isArray(e[0])&&"number"!=typeof e[0]?o=e:(o=[e],a=!1);const s=o.map((e=>e instanceof i?e:new i(e,this.spatialReference))),c=new n({geometries:s,outSpatialReference:r.WGS84}),p=(await t.project(c)).map((e=>"point"===e.type?[e.x,e.y]:void 0));return a?p:p[0]},e}();e.MapCoordsHelper=p,e.default=p,Object.defineProperty(e,"__esModule",{value:!0})}));
