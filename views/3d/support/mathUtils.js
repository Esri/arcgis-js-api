/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.18/esri/copyright.txt for details.
*/
define(["exports","../../../core/mathUtils","../../../chunks/vec3f64","../../../chunks/vec3"],(function(t,n,i,o){"use strict";let e=function(){function t(t,n){this.min=t,this.max=n,this.range=n-t}var i=t.prototype;return i.ndiff=function(t,n=0){return Math.ceil((t-n)/this.range)*this.range+n},i._normalize=function(t,n,i,o=0,e=!1){return(i-=o)<t?i+=this.ndiff(t-i):i>n&&(i-=this.ndiff(i-n)),e&&i===n&&(i=t),i+o},i.normalize=function(t,n=0,i=!1){return this._normalize(this.min,this.max,t,n,i)},i.clamp=function(t,i=0){return n.clamp(t-i,this.min,this.max)+i},i.monotonic=function(t,n,i){return t<n?n:n+this.ndiff(t-n,i)},i.minimalMonotonic=function(t,n,i){return this._normalize(t,t+this.range,n,i)},i.center=function(t,n,i){return n=this.monotonic(t,n,i),this.normalize((t+n)/2,i)},i.diff=function(t,n,i){return this.monotonic(t,n,i)-t},i.shortestSignedDiff=function(t,n){t=this.normalize(t);const i=(n=this.normalize(n))-t,o=n<t?this.minimalMonotonic(t,n)-t:n-this.minimalMonotonic(n,t);return Math.abs(i)<Math.abs(o)?i:o},i.contains=function(t,n,i){return n=this.minimalMonotonic(t,n),(i=this.minimalMonotonic(t,i))>t&&i<n},t}();const r=i.create(),a=i.create();function c(t){for(const n in t){const i=t[n];i instanceof Function&&(t[n]=i.bind(t))}return t}const s=c(new e(0,2*Math.PI)),u=c(new e(-Math.PI,Math.PI)),h=c(new e(0,360)),f=i.create(),l=i.create(),m=i.create();t.Cyclical=e,t.angle=function(t,i,e){t=o.normalize(l,t),i=o.normalize(m,i);const r=n.acosClamped(o.dot(t,i));if(e){const n=o.cross(f,t,i);if(o.dot(n,e)<0)return-r}return r},t.bilerp=function(t,n,i,o,e,r){const a=t+(n-t)*e;return a+(i+(o-i)*e-a)*r},t.cartesianToSpherical=function(t,i){const e=o.length(t),r=n.asinClamped(t[2]/e),a=Math.atan2(t[1]/e,t[0]/e);return o.set(i,e,r,a),i},t.cosCapped=function(t,n){return t>n?Math.cos(n):Math.cos(t)},t.cyclical2PI=s,t.cyclicalDeg=h,t.cyclicalPI=u,t.directionFromTo=function(t,n,i){const o=i[0]-n[0],e=i[1]-n[1],r=i[2]-n[2];let a=o*o+e*e+r*r;return a?(a=1/Math.sqrt(a),t[0]=o*a,t[1]=e*a,t[2]=r*a,t):(t[0]=0,t[1]=0,t[2]=0,t)},t.fovx2fovy=function(t,n,i){return 2*Math.atan(i*Math.tan(.5*t)/n)},t.fovy2fovx=function(t,n,i){return 2*Math.atan(n*Math.tan(.5*t)/i)},t.makeOrthonormal=function(t,n,i){i=i||t;const e=o.dot(t,n);o.set(i,t[0]-e*n[0],t[1]-e*n[1],t[2]-e*n[2]),o.normalize(i,i)},t.makePiecewiseLinearFunction=function(t){const n=t.length;return function(i){if(i<=t[0][0])return t[0][1];if(i>=t[n-1][0])return t[n-1][1];let o=1;for(;i>t[o][0];)o++;const e=t[o-1][0],r=t[o][0],a=(r-i)/(r-e);return a*t[o-1][1]+(1-a)*t[o][1]}},t.maxScale=function(t){const n=t[0]*t[0]+t[4]*t[4]+t[8]*t[8],i=t[1]*t[1]+t[5]*t[5]+t[9]*t[9],o=t[2]*t[2]+t[6]*t[6]+t[10]*t[10];return Math.sqrt(Math.max(Math.max(n,i),o))},t.moduloPositive=function(t,n){return(t%n+n)%n},t.planeFromPoints=function(t,n,i,e){o.subtract(r,n,t),o.subtract(a,i,t),o.cross(e,r,a),o.normalize(e,e),e[3]=-o.dot(t,e)},t.scaleFromMatrix=function(t,n){const i=Math.sqrt(n[0]*n[0]+n[4]*n[4]+n[8]*n[8]),e=Math.sqrt(n[1]*n[1]+n[5]*n[5]+n[9]*n[9]),r=Math.sqrt(n[2]*n[2]+n[6]*n[6]+n[10]*n[10]);return o.set(t,i,e,r),t},t.slerp=function(t,n,e,r=i.create()){const a=o.length(t),c=o.length(n),s=o.dot(t,n)/(a*c);if(s<.9999999999999999){const i=Math.acos(s),u=((1-e)*a+e*c)/Math.sin(i),h=u/a*Math.sin((1-e)*i),f=u/c*Math.sin(e*i);return o.scale(l,t,h),o.scale(m,n,f),o.add(r,l,m)}return o.lerp(r,t,n,e)},t.sphericalToCartesian=function(t,n){const i=t[0],e=t[1],r=t[2],a=Math.cos(e);o.set(n,i*a*Math.cos(r),i*a*Math.sin(r),i*Math.sin(e))},t.tangentFrame=function(t,n,i){Math.abs(t[0])>Math.abs(t[1])?o.set(n,0,1,0):o.set(n,1,0,0),o.cross(i,t,n),o.normalize(n,n),o.cross(n,i,t),o.normalize(i,i)},Object.defineProperty(t,"__esModule",{value:!0})}));
