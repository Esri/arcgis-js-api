/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.19/esri/copyright.txt for details.
*/
define(["exports","../../../core/mathUtils","../../../chunks/vec3f64","../../../chunks/vec3"],(function(t,n,o,i){"use strict";function e(t,n){return t>n?Math.cos(n):Math.cos(t)}function a(t,n,o){return 2*Math.atan(o*Math.tan(.5*t)/n)}function r(t,n,o){return 2*Math.atan(n*Math.tan(.5*t)/o)}function c(t){const n=t[0]*t[0]+t[4]*t[4]+t[8]*t[8],o=t[1]*t[1]+t[5]*t[5]+t[9]*t[9],i=t[2]*t[2]+t[6]*t[6]+t[10]*t[10];return Math.sqrt(Math.max(Math.max(n,o),i))}function s(t,n){const o=Math.sqrt(n[0]*n[0]+n[4]*n[4]+n[8]*n[8]),e=Math.sqrt(n[1]*n[1]+n[5]*n[5]+n[9]*n[9]),a=Math.sqrt(n[2]*n[2]+n[6]*n[6]+n[10]*n[10]);return i.set(t,o,e,a),t}function u(t,n,o){o=o||t;const e=i.dot(t,n);i.set(o,t[0]-e*n[0],t[1]-e*n[1],t[2]-e*n[2]),i.normalize(o,o)}function h(t,n,o){Math.abs(t[0])>Math.abs(t[1])?i.set(n,0,1,0):i.set(n,1,0,0),i.cross(o,t,n),i.normalize(n,n),i.cross(n,o,t),i.normalize(o,o)}function l(t,n){return(t%n+n)%n}function f(t,o){const e=i.length(t),a=n.asinClamped(t[2]/e),r=Math.atan2(t[1]/e,t[0]/e);return i.set(o,e,a,r),o}function m(t,n){const o=t[0],e=t[1],a=t[2],r=Math.cos(e);i.set(n,o*r*Math.cos(a),o*r*Math.sin(a),o*Math.sin(e))}function M(t,n,o){const i=o[0]-n[0],e=o[1]-n[1],a=o[2]-n[2];let r=i*i+e*e+a*a;return r?(r=1/Math.sqrt(r),t[0]=i*r,t[1]=e*r,t[2]=a*r,t):(t[0]=0,t[1]=0,t[2]=0,t)}function d(t,n,o,i,e,a){const r=t+(n-t)*e;return r+(o+(i-o)*e-r)*a}function p(t,n,e,a=o.create()){const r=i.length(t),c=i.length(n),s=i.dot(t,n)/(r*c);if(s<.9999999999999999){const o=Math.acos(s),u=((1-e)*r+e*c)/Math.sin(o),h=u/r*Math.sin((1-e)*o),l=u/c*Math.sin(e*o);return i.scale(k,t,h),i.scale(w,n,l),i.add(a,k,w)}return i.lerp(a,t,n,e)}function g(t,n,e,a=o.create(),r=o.create()){const c=i.length(t),s=i.length(n),u=i.dot(t,n)/(c*s);if(u<.9999999999999999){const o=Math.acos(u),h=Math.sin(o),l=Math.sin(e*o),f=Math.sin((1-e)*o),m=(1-e)*c+e*s;{const o=m/h,e=o/c*f,r=o/s*l;i.scale(k,t,e),i.scale(w,n,r),i.add(a,k,w)}{const a=1/c*(-Math.cos((1-e)*o)*o*m+f*(-c+s));i.scale(k,t,a);const u=1/s*(Math.cos(e*o)*o*m+l*(-c+s));i.scale(w,n,u),i.add(r,k,w),i.scale(r,r,1/h)}return r}return i.lerp(a,t,n,e),i.subtract(r,n,t),i.normalize(r,r),r}function z(t,o,e){t=i.normalize(k,t),o=i.normalize(w,o);const a=n.acosClamped(i.dot(t,o));if(e){const n=i.cross(_,t,o);if(i.dot(n,e)<0)return-a}return a}function b(t){const n=t.length;return function(o){if(o<=t[0][0])return t[0][1];if(o>=t[n-1][0])return t[n-1][1];let i=1;for(;o>t[i][0];)i++;const e=t[i-1][0],a=t[i][0],r=(a-o)/(a-e);return r*t[i-1][1]+(1-r)*t[i][1]}}let x=function(){function t(t,n){this.min=t,this.max=n,this.range=n-t}var o=t.prototype;return o.ndiff=function(t,n=0){return Math.ceil((t-n)/this.range)*this.range+n},o._normalize=function(t,n,o,i=0,e=!1){return(o-=i)<t?o+=this.ndiff(t-o):o>n&&(o-=this.ndiff(o-n)),e&&o===n&&(o=t),o+i},o.normalize=function(t,n=0,o=!1){return this._normalize(this.min,this.max,t,n,o)},o.clamp=function(t,o=0){return n.clamp(t-o,this.min,this.max)+o},o.monotonic=function(t,n,o){return t<n?n:n+this.ndiff(t-n,o)},o.minimalMonotonic=function(t,n,o){return this._normalize(t,t+this.range,n,o)},o.center=function(t,n,o){return n=this.monotonic(t,n,o),this.normalize((t+n)/2,o)},o.diff=function(t,n,o){return this.monotonic(t,n,o)-t},o.shortestSignedDiff=function(t,n){t=this.normalize(t);const o=(n=this.normalize(n))-t,i=n<t?this.minimalMonotonic(t,n)-t:n-this.minimalMonotonic(n,t);return Math.abs(o)<Math.abs(i)?o:i},o.contains=function(t,n,o){return n=this.minimalMonotonic(t,n),(o=this.minimalMonotonic(t,o))>t&&o<n},t}();function v(t,n,o,e){i.subtract(P,n,t),i.subtract(y,o,t),i.cross(e,P,y),i.normalize(e,e),e[3]=-i.dot(t,e)}const P=o.create(),y=o.create();function F(t){for(const n in t){const o=t[n];o instanceof Function&&(t[n]=o.bind(t))}return t}const q=F(new x(0,2*Math.PI)),C=F(new x(-Math.PI,Math.PI)),I=F(new x(0,360)),_=o.create(),k=o.create(),w=o.create();t.Cyclical=x,t.angle=z,t.bilerp=d,t.cartesianToSpherical=f,t.cosCapped=e,t.cyclical2PI=q,t.cyclicalDeg=I,t.cyclicalPI=C,t.directionFromTo=M,t.fovx2fovy=a,t.fovy2fovx=r,t.makeOrthonormal=u,t.makePiecewiseLinearFunction=b,t.maxScale=c,t.moduloPositive=l,t.planeFromPoints=v,t.scaleFromMatrix=s,t.slerp=p,t.slerpTangent=g,t.sphericalToCartesian=m,t.tangentFrame=h,Object.defineProperty(t,"__esModule",{value:!0})}));
