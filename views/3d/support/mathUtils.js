/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.23/esri/copyright.txt for details.
*/
define(["exports","../../../core/mathUtils","../../../chunks/vec3","../../../chunks/vec3f64"],(function(t,n,o,i){"use strict";function e(t,n){return t>n?Math.cos(n):Math.cos(t)}function r(t,n,o){return 2*Math.atan(o*Math.tan(.5*t)/n)}function a(t,n,o){return 2*Math.atan(n*Math.tan(.5*t)/o)}function c(t){const n=t[0]*t[0]+t[4]*t[4]+t[8]*t[8],o=t[1]*t[1]+t[5]*t[5]+t[9]*t[9],i=t[2]*t[2]+t[6]*t[6]+t[10]*t[10];return Math.sqrt(Math.max(n,o,i))}function s(t,n){const i=Math.sqrt(n[0]*n[0]+n[4]*n[4]+n[8]*n[8]),e=Math.sqrt(n[1]*n[1]+n[5]*n[5]+n[9]*n[9]),r=Math.sqrt(n[2]*n[2]+n[6]*n[6]+n[10]*n[10]);return o.set(t,i,e,r),t}function u(t,n,i){i=i||t;const e=o.dot(t,n);o.set(i,t[0]-e*n[0],t[1]-e*n[1],t[2]-e*n[2]),o.normalize(i,i)}function h(t,n,i){Math.abs(t[0])>Math.abs(t[1])?o.set(n,0,1,0):o.set(n,1,0,0),o.cross(i,t,n),o.normalize(n,n),o.cross(n,i,t),o.normalize(i,i)}function l(t,n){return(t%n+n)%n}function f(t,n,o,i,e,r){const a=t+(n-t)*e;return a+(o+(i-o)*e-a)*r}function m(t,n,e,r=i.create()){const a=o.length(t),c=o.length(n),s=o.dot(t,n)/(a*c);if(s<.9999999999999999){const i=Math.acos(s),u=((1-e)*a+e*c)/Math.sin(i),h=u/a*Math.sin((1-e)*i),l=u/c*Math.sin(e*i);return o.scale(_,t,h),o.scale(k,n,l),o.add(r,_,k)}return o.lerp(r,t,n,e)}function M(t,n,e,r=i.create(),a=i.create()){const c=o.length(t),s=o.length(n),u=o.dot(t,n)/(c*s);if(u<.9999999999999999){const i=Math.acos(u),h=Math.sin(i),l=Math.sin(e*i),f=Math.sin((1-e)*i),m=(1-e)*c+e*s;{const i=m/h,e=i/c*f,a=i/s*l;o.scale(_,t,e),o.scale(k,n,a),o.add(r,_,k)}{const r=1/c*(-Math.cos((1-e)*i)*i*m+f*(-c+s));o.scale(_,t,r);const u=1/s*(Math.cos(e*i)*i*m+l*(-c+s));o.scale(k,n,u),o.add(a,_,k),o.scale(a,a,1/h)}return a}return o.lerp(r,t,n,e),o.subtract(a,n,t),o.normalize(a,a),a}function d(t,i,e){t=o.normalize(_,t),i=o.normalize(k,i);const r=n.acosClamped(o.dot(t,i));if(e){const n=o.cross(I,t,i);if(o.dot(n,e)<0)return-r}return r}function g(t){const n=t.length;return function(o){if(o<=t[0][0])return t[0][1];if(o>=t[n-1][0])return t[n-1][1];let i=1;for(;o>t[i][0];)i++;const e=t[i-1][0],r=t[i][0],a=(r-o)/(r-e);return a*t[i-1][1]+(1-a)*t[i][1]}}let p=function(){function t(t,n){this.min=t,this.max=n,this.range=n-t}var o=t.prototype;return o.ndiff=function(t,n=0){return Math.ceil((t-n)/this.range)*this.range+n},o._normalize=function(t,n,o,i=0,e=!1){return(o-=i)<t?o+=this.ndiff(t-o):o>n&&(o-=this.ndiff(o-n)),e&&o===n&&(o=t),o+i},o.normalize=function(t,n=0,o=!1){return this._normalize(this.min,this.max,t,n,o)},o.clamp=function(t,o=0){return n.clamp(t-o,this.min,this.max)+o},o.monotonic=function(t,n,o){return t<n?n:n+this.ndiff(t-n,o)},o.minimalMonotonic=function(t,n,o){return this._normalize(t,t+this.range,n,o)},o.center=function(t,n,o){return n=this.monotonic(t,n,o),this.normalize((t+n)/2,o)},o.diff=function(t,n,o){return this.monotonic(t,n,o)-t},o.shortestSignedDiff=function(t,n){t=this.normalize(t);const o=(n=this.normalize(n))-t,i=n<t?this.minimalMonotonic(t,n)-t:n-this.minimalMonotonic(n,t);return Math.abs(o)<Math.abs(i)?o:i},o.contains=function(t,n,o){return n=this.minimalMonotonic(t,n),(o=this.minimalMonotonic(t,o))>t&&o<n},t}();function z(t,n,i,e){o.subtract(b,n,t),o.subtract(v,i,t),o.cross(e,b,v),o.normalize(e,e),e[3]=-o.dot(t,e)}const b=i.create(),v=i.create();function x(t){for(const n in t){const o=t[n];o instanceof Function&&(t[n]=o.bind(t))}return t}const P=x(new p(0,2*Math.PI)),y=x(new p(-Math.PI,Math.PI)),F=x(new p(0,360)),I=i.create(),_=i.create(),k=i.create();t.Cyclical=p,t.angle=d,t.bilerp=f,t.cosCapped=e,t.cyclical2PI=P,t.cyclicalDeg=F,t.cyclicalPI=y,t.fovx2fovy=r,t.fovy2fovx=a,t.makeOrthonormal=u,t.makePiecewiseLinearFunction=g,t.maxScale=c,t.moduloPositive=l,t.planeFromPoints=z,t.scaleFromMatrix=s,t.slerp=m,t.slerpTangent=M,t.tangentFrame=h,Object.defineProperties(t,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})}));
