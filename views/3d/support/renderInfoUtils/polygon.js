/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.25/esri/copyright.txt for details.
*/
define(["exports","../../../../chunks/_rollupPluginBabelHelpers","../../../../geometry/projection","../../../../geometry/support/triangulationUtils","../../layers/graphics/elevationAlignmentUtils","../../terrain/OverlayRenderer"],(function(o,n,t,i,e,s){"use strict";function r(o,n,t,s){const r=i.pathsToTriangulationInfo(o.rings,o.hasZ,i.CounterClockwiseMode.CCW_IS_HOLE),l=new Float64Array(r.position.length),a=e.applyPerVertexElevationAlignment(r.position,o.spatialReference,0,l,0,r.position,0,r.position.length/3,n,t,s),c=null!=a;return new h(r.position,l,u(r.polygons,r.position,l),p(r.outlines,r.position,l),c,a)}function l(o,n){const e=i.pathsToTriangulationInfo(o.rings,!1,i.CounterClockwiseMode.CCW_IS_HOLE),r=t.projectBuffer(e.position,o.spatialReference,0,e.position,n,0,e.position.length/3);for(let t=2;t<e.position.length;t+=3)e.position[t]=s.DRAPED_Z;return{position:e.position,polygons:u(e.polygons,e.position),outlines:p(e.outlines,e.position),projectionSuccess:r}}function p(o,n,t){return o.filter((({count:o})=>o>1)).map((({index:o,count:i})=>{const e=3*o,s=e+3*i;return t?new c(o,i,n.subarray(e,s),t.subarray(e,s)):new a(o,i,n.subarray(e,s))}))}function u(o,n,t){const i=new Array;for(const{index:e,count:s,holeIndices:r,pathLengths:l}of o){if(s<=1)continue;const o=3*e,p=o+3*s,u=r.map((o=>o-e));i.push({index:e,count:s,holeIndices:u,pathLengths:l,position:n.subarray(o,p),mapPosition:t?t.subarray(o,p):void 0})}return i}let a=function(o,n,t){this.index=o,this.count=n,this.position=t},c=function(o){function t(n,t,i,e){var s;return(s=o.call(this,n,t,i)||this).mapPosition=e,s}return n._inheritsLoose(t,o),t}(a),h=function(o,n,t,i,e,s){this.position=o,this.mapPosition=n,this.polygons=t,this.outlines=i,this.projectionSuccess=e,this.sampledElevation=s};o.PolygonRenderInfo=h,o.geometryToRenderInfo=r,o.geometryToRenderInfoDraped=l,Object.defineProperties(o,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})}));
