/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.19/esri/copyright.txt for details.
*/
define(["exports","../../../../chunks/vec3f64","../../../../chunks/vec3","../../support/mathUtils","../../support/geometryUtils","./common"],(function(e,t,n,r,i,o){"use strict";function c(e,t,n=o.defaultApplyOptions){if(!e.state.isLocal)return 0;const r=e.state.constraints.distance;if(!e.pointsOfInterest.surfaceOrigin.renderLocation||r===1/0)return 0;p.min=0,p.max=r,a(e,n,p);const i=u(e,t),c=p.max-i;return c>=-1e-6?0:c}function s(e,t,r=o.defaultApplyOptions){const s=c(e,t,r);if(0===s)return!1;const a=e.pointsOfInterest.surfaceOrigin,p=u(e,t)+s,O=n.copy(d,t.eye),g=o.interactionDirectionTowardsConstraintMinimization(t,r.interactionDirection,f(e,t,l),y);if(i.sphere.intersectRay(i.sphere.fromCenterAndRadius(a.renderLocation,p),i.ray.wrap(t.eye,g),t.eye)){const r=n.subtract(m,t.eye,O);n.add(t.center,t.center,r),t.markViewDirty();const i=e.renderCoordsHelper.getAltitude(t.center);return e.renderCoordsHelper.intersectInfiniteManifold(t.ray,i,t.center),t.markViewDirty(),!0}return!1}function a(e,t,n){const r=t.interactionType;if(0===r)return;const{min:i,max:s}=n,{interactionStartCamera:a,interactionFactor:f}=t,p=1===r||4===r,d=c(e,a),m=0===d?0:u(e,a);n.min=i,n.max=s;const y=.05*m;o.adjustRangeForInteraction(d,m,p,f,y,n)}function u(e,t){const r=e.pointsOfInterest.surfaceOrigin;return n.distance(t.eye,r.renderLocation)}function f(e,t,n){const i=e.pointsOfInterest.surfaceOrigin;return r.directionFromTo(n,t.eye,i.renderLocation)}const p={min:0,max:0},d=t.create(),m=t.create(),y=t.create(),l=t.create();e.applyDistanceConstraint=s,e.getDistanceConstraintError=c,Object.defineProperty(e,"__esModule",{value:!0})}));
