/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.25/esri/copyright.txt for details.
*/
define(["exports","./constraintUtils/altitude","./constraintUtils/common","./constraintUtils/ConstraintTypes","./constraintUtils/distance","./constraintUtils/InteractionType","./constraintUtils/surfaceCollision","./constraintUtils/tilt","./constraintUtils/TiltMode","../../animation/easing"],(function(t,n,e,i,o,r,a,s,c,l){"use strict";function p(t,n,o=E,r=n){r!==n&&r.copyFrom(n),r.computeUp(t.state.viewingMode);let s=!1;for(let i=0;i<d;i++){let n=0;for(const i of C)if(e.hasConstraintType(o.selection,i.type)){const e=Math.abs(i.error(t,r,o));i.apply(t,r,o)&&(s=!0,n+=e)}if(0===n)break}const c=e.hasConstraintType(o.selection,i.ConstraintTypes.COLLISION),l=y(o.interactionType,t);return c&&a.applySurfaceCollisionConstraint(t,r,l)&&(s=!0),s&&r.computeUp(t.state.viewingMode),s}function y(t,n){switch(t){case r.InteractionType.PAN:return a.Mode.EYE_AND_CENTER;case r.InteractionType.ASCEND:return n.state.isGlobal?a.Mode.EYE_AND_CENTER_SCALE:a.Mode.EYE_AND_CENTER;default:return a.Mode.EYE}}function T(t){const n=Math.min(1,t/150);return l.inOutCubic(n)}function u(t,n,e){return s.getTiltConstraintError(t,n,e)*n.distance}const C=[{type:i.ConstraintTypes.TILT,error:u,apply:s.applyTiltConstraint},{type:i.ConstraintTypes.ALTITUDE,error:n.getAltitudeConstraintError,apply:n.applyAltitudeConstraint},{type:i.ConstraintTypes.DISTANCE,error:o.getDistanceConstraintError,apply:o.applyDistanceConstraint}],E={selection:i.ConstraintTypes.ALL,interactionType:r.InteractionType.NONE,interactionFactor:0,interactionStartCamera:null,interactionDirection:null,tiltMode:c.TiltMode.TUMBLE},d=5;t.applyAll=p,t.pixelDistanceToInteractionFactor=T,Object.defineProperties(t,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})}));
