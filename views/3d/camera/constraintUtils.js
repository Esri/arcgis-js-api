/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.24/esri/copyright.txt for details.
*/
import{j as t}from"../../../chunks/vec2.js";import{getAltitudeConstraintError as o,applyAltitudeConstraint as r}from"./constraintUtils/altitude.js";export{applyAltitudeConstraint,getAltitudeConstraintError}from"./constraintUtils/altitude.js";import{ConstraintTypes as n,InteractionType as i,TiltMode as e,hasConstraintType as s}from"./constraintUtils/common.js";export{ConstraintTypes,InteractionType}from"./constraintUtils/common.js";import{getDistanceConstraintError as a,applyDistanceConstraint as l}from"./constraintUtils/distance.js";export{applyDistanceConstraint,getDistanceConstraintError}from"./constraintUtils/distance.js";import{applySurfaceCollisionConstraint as c,Mode as p}from"./constraintUtils/surfaceCollision.js";export{Mode as ApplyCollisionMode,applySurfaceCollisionConstraint}from"./constraintUtils/surfaceCollision.js";import{applyTiltConstraint as m,getTiltConstraintError as f}from"./constraintUtils/tilt.js";export{applyTiltConstraint,getTiltConstraintError}from"./constraintUtils/tilt.js";import{inOutCubic as u}from"../../animation/easing.js";function E(t,o,r=d,i=o){let e=!1;i!==o&&i.copyFrom(o),i.computeUp(t.state.viewingMode);for(let n=0;n<j;n++){let o=0;for(const n of U)if(s(r.selection,n.type)){const s=Math.abs(n.error(t,i,r));n.apply(t,i,r)&&(e=!0,o+=s)}if(0===o)break}const a=s(r.selection,n.COLLISION),l=C(r.interactionType,t);return a&&c(t,i,l)&&(e=!0),e&&i.computeUp(t.state.viewingMode),e}function C(t,o){switch(t){case i.PAN:return p.EYE_AND_CENTER;case i.ASCEND:return o.state.isGlobal?p.EYE_AND_CENTER_SCALE:p.EYE_AND_CENTER;default:return p.EYE}}function y(o,r){const n="number"==typeof o?o:t(o,r),i=Math.min(1,n/150);return u(i)}function T(t,o,r){return f(t,o,r)*o.distance}const U=[{type:n.TILT,error:T,apply:m},{type:n.ALTITUDE,error:o,apply:r},{type:n.DISTANCE,error:a,apply:l}],d={selection:n.ALL,interactionType:i.NONE,interactionFactor:0,interactionStartCamera:null,interactionDirection:null,tiltMode:e.TUMBLE},j=5;export{E as applyAll,y as pixelDistanceToInteractionFactor};
