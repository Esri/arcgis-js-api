/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
define(["../../../../chunks/_rollupPluginBabelHelpers","../../../../chunks/tslib.es6","../../../../core/Accessor","../../../../core/maybe","../../../../core/accessorSupport/decorators/property","../../../../core/arrayUtils","../../../../core/has","../../../../core/accessorSupport/ensureType","../../../../core/accessorSupport/decorators/subclass","../../../../properties/defaultUnit","../AnalysisView3D","./support/AreaMeasurementController","./support/AreaMeasurementView3DData","./support/AreaMeasurementVisualization"],(function(e,a,t,s,i,r,n,o,l,u,p,y,c,d){"use strict";let h=function(a){function t(e){var t;return(t=a.call(this,e)||this).type="area-measurement-view-3d",t.analysisViewData=new c.AreaMeasurementView3DData,t}e._inheritsLoose(t,a);var i=t.prototype;return i.initialize=function(){this.analysisViewData.path.view=this.view,this.analysisViewData.path.areaMeasurement=this.analysis,this.analysisVisualization=new d.AreaMeasurementVisualization({view:this.view,analysis:this.analysis,analysisView:this}),this.analysisController=new y.AreaMeasurementController({view:this.view,analysis:this.analysis,analysisViewData:this.analysisViewData})},i.destroy=function(){this.analysisController=s.destroyMaybe(this.analysisController),this.analysisVisualization=s.destroyMaybe(this.analysisVisualization),this.analysisViewData=s.destroyMaybe(this.analysisViewData)},e._createClass(t,[{key:"updating",get:function(){var e;return!(null==(e=this.analysisVisualization)||!e.loadingMessages)}},{key:"result",get:function(){const e=this.analysisViewData.measurementData;return s.isSome(e)?"euclidean"===e.actualMeasurementMode?{area:e.area,pathLength:e.perimeterLength,mode:"euclidian"}:{area:e.geodesicArea,pathLength:e.pathLength,mode:"geodesic"}:{area:null,mode:null,pathLength:null}}},{key:"unit",get:function(){return s.unwrapOr(this.analysis.unit,this._defaultUnit)}},{key:"testData",get:function(){return{visualization:this.analysisVisualization,controller:this.analysisController}}}]),t}(p.AnalysisView3D(t));a.__decorate([i.property()],h.prototype,"type",void 0),a.__decorate([i.property()],h.prototype,"analysis",void 0),a.__decorate([i.property()],h.prototype,"updating",null),a.__decorate([i.property()],h.prototype,"analysisVisualization",void 0),a.__decorate([i.property()],h.prototype,"analysisController",void 0),a.__decorate([i.property()],h.prototype,"result",null),a.__decorate([i.property()],h.prototype,"analysisViewData",void 0),a.__decorate([i.property()],h.prototype,"unit",null),a.__decorate([i.property(u.defaultUnitPropertyMetadata)],h.prototype,"_defaultUnit",void 0),h=a.__decorate([l.subclass("esri.views.3d.analysis.AreaMeasurement.AreaMeasurementView3D")],h);return h}));
