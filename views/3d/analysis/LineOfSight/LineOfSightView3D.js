/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
define(["../../../../chunks/_rollupPluginBabelHelpers","../../../../chunks/tslib.es6","../../../../core/Accessor","../../../../core/Evented","../../../../core/HandleOwner","../../../../core/maybe","../../../../core/accessorSupport/decorators/property","../../../../core/arrayUtils","../../../../core/has","../../../../core/accessorSupport/ensureType","../../../../core/accessorSupport/decorators/subclass","../AnalysisView3D","./LineOfSightController","./LineOfSightViewData","./LineOfSightVisualization"],(function(t,e,i,s,a,r,o,n,l,y,p,u,c,d,h){"use strict";let _=function(e){function i(t){var i;return(i=e.call(this,t)||this).type="line-of-sight-view",i.suspended=!1,i.fullOpacity=1,i.analysisViewData=new d.LineOfSightViewData,i}t._inheritsLoose(i,e);var s=i.prototype;return s.initialize=function(){const t=this.view,e=this.analysis;this._analysisController=new c.LineOfSightController({analysis:e,analysisViewData:this.analysisViewData,view:t}),this._analysisVisualization=new h.LineOfSightVisualization({analysis:e,analysisView:this,view:t}),this.handles.add([this._analysisController.on("result-changed",(t=>{t.target!==this.analysisViewData.cursorTarget&&this.emit("result-changed",t)}))])},s.destroy=function(){this._analysisController=r.destroyMaybe(this._analysisController),this._analysisVisualization=r.destroyMaybe(this._analysisVisualization)},s.getResultForTarget=function(t){const e=this.analysisViewData.analyses.find((e=>e.target===t)),i=r.applySome(e,(t=>t.result));return r.unwrapOr(i,null)},t._createClass(i,[{key:"results",get:function(){return this.analysisViewData.analyses.map((t=>t.result))}},{key:"priority",get:function(){return this._analysisController.priority},set:function(t){this._analysisController.priority=t}},{key:"updating",get:function(){return r.isSome(this._analysisController)&&this._analysisController.updating}},{key:"test",get:function(){return{visualization:this._analysisVisualization,controller:this._analysisController}}}]),i}(u.AnalysisView3D(a.HandleOwnerMixin(s.EventedMixin(i))));e.__decorate([o.property()],_.prototype,"type",void 0),e.__decorate([o.property()],_.prototype,"analysis",void 0),e.__decorate([o.property({readOnly:!0})],_.prototype,"results",null),e.__decorate([o.property()],_.prototype,"priority",null),e.__decorate([o.property()],_.prototype,"suspended",void 0),e.__decorate([o.property()],_.prototype,"fullOpacity",void 0),e.__decorate([o.property()],_.prototype,"analysisViewData",void 0),e.__decorate([o.property()],_.prototype,"updating",null),e.__decorate([o.property()],_.prototype,"_analysisController",void 0),e.__decorate([o.property()],_.prototype,"_analysisVisualization",void 0),_=e.__decorate([p.subclass("esri.views.3d.analysis.LineOfSight.LineOfSightView3D")],_);return _}));
