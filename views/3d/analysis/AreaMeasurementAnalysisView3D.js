/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.23/esri/copyright.txt for details.
*/
define(["../../../chunks/_rollupPluginBabelHelpers","../../../chunks/tslib.es6","../../../core/Accessor","../../../core/maybe","../../../core/accessorSupport/decorators/property","../../../core/arrayUtils","../../../core/has","../../../core/accessorSupport/ensureType","../../../core/accessorSupport/decorators/subclass","../../../properties/defaultUnit","./AnalysisView3D","./interfaces","./AreaMeasurement/support/AreaMeasurementController","./AreaMeasurement/support/AreaMeasurementPathHelper","./AreaMeasurement/support/AreaMeasurementVisualization"],(function(e,t,r,a,s,o,i,n,l,p,u,y,c,d,h){"use strict";let m=function(t){function r(e){var r;return(r=t.call(this,e)||this).type="area-measurement-view-3d",r.measurementData=null,r.lastDraggedVertex=null,r.cursorPoint=null,r.mode=y.MeasurementMode.Auto,r}e._inheritsLoose(r,t);var s=r.prototype;return s.initialize=function(){this.path=new d.AreaMeasurement3DPathHelper({view:this.view,areaMeasurement:this.analysis}),this.analysisVisualization=new h.AreaMeasurementVisualization({view:this.view,analysis:this.analysis,analysisViewData:this}),this.analysisController=new c.AreaMeasurementController({view:this.view,analysis:this.analysis,analysisViewData:this})},s.destroy=function(){this.analysisController=a.destroyMaybe(this.analysisController),this.analysisVisualization=a.destroyMaybe(this.analysisVisualization),this.path.destroy()},e._createClass(r,[{key:"updating",get:function(){var e;return!(null==(e=this.analysisVisualization)||!e.loadingMessages)}},{key:"result",get:function(){if(a.isNone(this.measurementData))return{area:null,mode:null,perimeter:null};const e=this.measurementData;return"euclidean"===e.actualMeasurementMode?{area:e.area,perimeter:e.perimeterLength,mode:"euclidian"}:{area:e.geodesicArea,perimeter:e.pathLength,mode:"geodesic"}}},{key:"validMeasurement",get:function(){return this.path.isValidPolygon}},{key:"unit",get:function(){return a.unwrapOr(this.analysis.unit,this._defaultUnit)}},{key:"testData",get:function(){return{visualization:this.analysisVisualization,controller:this.analysisController}}}]),r}(u.AnalysisView3D(r));t.__decorate([s.property()],m.prototype,"type",void 0),t.__decorate([s.property()],m.prototype,"analysis",void 0),t.__decorate([s.property()],m.prototype,"updating",null),t.__decorate([s.property()],m.prototype,"analysisVisualization",void 0),t.__decorate([s.property()],m.prototype,"analysisController",void 0),t.__decorate([s.property()],m.prototype,"result",null),t.__decorate([s.property()],m.prototype,"measurementData",void 0),t.__decorate([s.property()],m.prototype,"validMeasurement",null),t.__decorate([s.property()],m.prototype,"path",void 0),t.__decorate([s.property()],m.prototype,"lastDraggedVertex",void 0),t.__decorate([s.property()],m.prototype,"cursorPoint",void 0),t.__decorate([s.property()],m.prototype,"mode",void 0),t.__decorate([s.property()],m.prototype,"unit",null),t.__decorate([s.property(p.defaultUnitPropertyMetadata)],m.prototype,"_defaultUnit",void 0),m=t.__decorate([l.subclass("esri.views.3d.analysis.AreaMeasurementAnalysisView3D")],m);return m}));
