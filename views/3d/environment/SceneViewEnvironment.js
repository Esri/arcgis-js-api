/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.23/esri/copyright.txt for details.
*/
define(["../../../chunks/_rollupPluginBabelHelpers","../../../chunks/tslib.es6","../../../core/lang","../../../core/Logger","../../../core/accessorSupport/decorators/property","../../../core/accessorSupport/decorators/cast","../../../core/accessorSupport/decorators/subclass","../../../core/accessorSupport/ensureType","./lightingUtils","./SceneViewAtmosphere","./SunLighting","./SunnyWeather","./VirtualLighting","./weather","../../../webscene/Environment","../../../webscene/Lighting"],(function(e,t,n,i,r,o,s,c,h,a,l,g,p,u,d,b){"use strict";var w;const y=i.getLogger("esri.views.3d.environment.SceneViewEnvironment");let m=w=function(t){function i(e){var n;return(n=t.call(this,e)||this).atmosphere=new a.default,n.lighting=new l,n}e._inheritsLoose(i,t),i.fromWebsceneEnvironment=function(e){const t=e.cloneConstructProperties();return new w({...t,lighting:l.fromWebsceneLighting(t.lighting)})};var r=i.prototype;return r.castLighting=function(e){return this._convertLighting(e)},r.applyLighting=function(e){this.lighting=this._convertLighting(e)},r._convertLighting=function(e){return e?e instanceof l||e instanceof p?e:e instanceof b?"sun"===(null==(t=this.lighting)?void 0:t.type)?this.lighting.cloneWithWebsceneLighting(e):l.fromWebsceneLighting(e):c.ensureOneOfType(h.lightingTypes,e):new l;var t},r.clone=function(){return new w({lighting:this.lighting.clone(),atmosphere:this.atmosphere.clone(),weather:this.weather.clone(),atmosphereEnabled:this.atmosphereEnabled,starsEnabled:this.starsEnabled,background:n.clone(this.background)})},r.cloneWithWebsceneEnvironment=function(e){return new w({atmosphere:this.atmosphere.clone(),weather:this.weather.clone(),atmosphereEnabled:this.atmosphereEnabled,starsEnabled:this.starsEnabled,background:n.clone(this.background),...e.cloneConstructProperties(),lighting:this.lighting.type&&"sun"!==this.lighting.type?l.fromWebsceneLighting(e.lighting):this.lighting.cloneWithWebsceneLighting(e.lighting)})},e._createClass(i,[{key:"weather",set:function(e){u.validateWeatherType(null==e?void 0:e.type,y)&&this._set("weather",e)}}]),i}(d);t.__decorate([r.property({type:a.default,json:{read:!1},nonNullable:!0})],m.prototype,"atmosphere",void 0),t.__decorate([r.property({types:u.weatherTypes,nonNullable:!0,json:{write:!1},value:new g})],m.prototype,"weather",null),t.__decorate([r.property({nonNullable:!0})],m.prototype,"lighting",void 0),t.__decorate([o.cast("lighting")],m.prototype,"castLighting",null),m=w=t.__decorate([s.subclass("esri.views.3d.environment.SceneViewEnvironment")],m);return m}));
