/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.26/esri/copyright.txt for details.
*/
define(["../../../chunks/_rollupPluginBabelHelpers","../../../chunks/tslib.es6","../../../core/compilerUtils","../../../core/lang","../../../core/accessorSupport/decorators/property","../../../core/accessorSupport/decorators/cast","../../../core/accessorSupport/decorators/subclass","../../../core/accessorSupport/ensureType","./lightingUtils","./SceneViewAtmosphere","./SunLighting","./VirtualLighting","../../../webscene/Environment","../../../webscene/SunLighting","../../../webscene/VirtualLighting"],(function(e,t,n,i,r,s,o,g,h,c,l,a,u,p,b){"use strict";var d;let m=d=function(t){function r(e){var n;return(n=t.call(this,e)||this).atmosphere=new c.SceneViewAtmosphere,n.lighting=new l,n.cachedCameraTrackingEnabled=null,n}e._inheritsLoose(r,t),r.fromWebsceneEnvironment=function(e){const t=e.cloneConstructProperties();return new d({...t,lighting:t.lighting?"virtual"===t.lighting.type?a.fromWebsceneLighting(t.lighting):l.fromWebsceneLighting(t.lighting):void 0})};var s=r.prototype;return s.castLighting=function(e){return this._convertLighting(e)},s.applyLighting=function(e){this.lighting=this._convertLighting(e)},s._convertLighting=function(e){return e?e instanceof l||e instanceof a?e:e instanceof p?this.lighting&&"virtual"!==this.lighting.type?this.lighting.cloneWithWebsceneLighting(e):new l({...e.cloneConstructProperties(),...this.lighting?.cloneNonPersistentConstructProperties()}):e instanceof b?this.lighting&&"virtual"===this.lighting.type?this.lighting.cloneWithWebsceneLighting(e):new a({...e.cloneConstructProperties(),...this.lighting?.cloneNonPersistentConstructProperties()}):g.ensureOneOfType(h.lightingTypes,e):new l},s.clone=function(){return new d({lighting:this.lighting.clone(),atmosphere:this.atmosphere.clone(),weather:this.weather.clone(),atmosphereEnabled:this.atmosphereEnabled,starsEnabled:this.starsEnabled,background:i.clone(this.background)})},s.cloneWithWebsceneEnvironment=function(e){return new d({atmosphere:this.atmosphere.clone(),weather:this.weather.clone(),atmosphereEnabled:this.atmosphereEnabled,starsEnabled:this.starsEnabled,background:i.clone(this.background),...e.cloneConstructProperties(),lighting:this._getLighting(e)})},s._getLighting=function(e){switch(e.lighting.type){case"sun":return this.lighting&&"sun"===this.lighting.type?this.lighting.cloneWithWebsceneLighting(e.lighting):l.fromWebsceneLighting(e.lighting);case"virtual":return this.lighting&&"virtual"===this.lighting.type?this.lighting.cloneWithWebsceneLighting(e.lighting):a.fromWebsceneLighting(e.lighting);default:return n.neverReached(e.lighting),l.fromWebsceneLighting(e.lighting)}},r}(u);t.__decorate([r.property({type:c.SceneViewAtmosphere,json:{read:!1},nonNullable:!0})],m.prototype,"atmosphere",void 0),t.__decorate([r.property({nonNullable:!0})],m.prototype,"lighting",void 0),t.__decorate([s.cast("lighting")],m.prototype,"castLighting",null),m=d=t.__decorate([o.subclass("esri.views.3d.environment.SceneViewEnvironment")],m);return m}));
