/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.23/esri/copyright.txt for details.
*/
define(["exports","../../../chunks/_rollupPluginBabelHelpers","../../../core/has","../../../core/maybe","./NoiseTextureAtlasTechnique","../webgl-engine/lib/glUtil3D","../../webgl/enums","../../webgl/FramebufferObject"],(function(e,t,i,r,s,o,a,n){"use strict";const u=i("esri-mobile")?64:128,l=u/128,h=Math.ceil(Math.sqrt(u)),f=(u+2)*h;let c=function(){function e(e,t){this._frameBuffer=new n.FramebufferObject(e,{colorTarget:a.TargetType.TEXTURE,width:f,height:f},{target:a.TextureType.TEXTURE_2D,pixelFormat:a.PixelFormat.RGBA,dataType:a.PixelType.UNSIGNED_BYTE,wrapMode:a.TextureWrapMode.CLAMP_TO_EDGE,samplingMode:a.TextureSamplingMode.LINEAR,hasMipmap:!1,width:f,height:f}),this._vao=o.createQuadVAO(e),this._technique=new s.NoiseTextureAtlasTechnique({rctx:e,viewingMode:t.state.viewingMode})}var i=e.prototype;return i.destroy=function(){this._technique=r.releaseMaybe(this._technique),this._frameBuffer=r.disposeMaybe(this._frameBuffer),this._vao=r.disposeMaybe(this._vao)},i.render=function(e){if(r.isNone(this._vao)||r.isNone(this.textureAtlas))return;const t=e.getViewport();e.setViewport(0,0,f,f),e.bindFramebuffer(this._frameBuffer);const i=e.useTechnique(this._technique);i.setUniform1f("tileSize",u),i.setUniform1f("tileRows",h),e.bindVAO(this._vao),i.assertCompatibleVertexAttributeLocations(this._vao),e.gl.drawArrays(e.gl.TRIANGLE_STRIP,0,4),e.setViewport(t.x,t.y,t.width,t.height)},t._createClass(e,[{key:"textureAtlas",get:function(){return this._frameBuffer.colorTexture}}]),e}();e.ATLAS_SIZE=f,e.NoiseTextureAtlas=c,e.TEXTURE_SCALE=l,e.TILE_ROWS=h,e.TILE_SIZE=u,Object.defineProperties(e,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})}));
