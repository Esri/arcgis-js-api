/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.26/esri/copyright.txt for details.
*/
define(["exports","../../../core/maybe","../../../chunks/mat4","../../../chunks/mat4f64","./AtmosphereType","../../../chunks/SimpleAtmosphere.glsl","./SimpleAtmosphereTechnique","./SimpleAtmosphereTechniqueConfiguration","./resources/SimpleAtmosphereTexture","../support/buffer/glUtil","../support/buffer/InterleavedLayout","../webgl-engine/lib/DefaultVertexAttributeLocations","../webgl-engine/lib/GeometryUtil","../webgl-engine/lib/VertexArrayObject","../webgl-engine/lib/VertexAttribute","../../webgl/BufferObject","../../webgl/enums","../../webgl/Texture","../../webgl/Util"],(function(e,t,r,i,o,s,n,a,u,c,p,h,l,m,f,b,g,y,x){"use strict";let A=function(){function e(e,t){this.type=o.AtmosphereType.Panoramic,this._configuration=new a.SimpleAtmosphereTechniqueConfiguration,this._passParameters=new s.SimpleAtmospherePassParameters,this._configuration.geometry=a.SimpleAtmosphereGeometry.Cylinder,this._technique=t.techniqueRepository.acquire(n.SimpleAtmosphereTechnique,this._configuration);const r=t.renderContext.rctx;this._vao=this._createVertexArrayObject(r),this._vaoCount=x.vertexCount(this._vao,"geometry"),this._passParameters.texture=new y.Texture(r,{pixelFormat:g.PixelFormat.RGBA,dataType:g.PixelType.UNSIGNED_BYTE,wrapMode:g.TextureWrapMode.CLAMP_TO_EDGE,samplingMode:g.TextureSamplingMode.LINEAR,flipped:!0,width:1,height:512},u.earthAtmosphereTextureSimple)}var r=e.prototype;return r.destroy=function(){this._passParameters.texture=t.disposeMaybe(this._passParameters.texture),this._vao.dispose(),this._technique.release()},r.render=function(e){const t=e.rctx,r=t.bindTechnique(this._technique,this._passParameters,e.bindParameters);d(_,e.bindParameters.camera.viewMatrix),r.setUniformMatrix4fv("view",_),t.bindVAO(this._vao),r.assertCompatibleVertexAttributeLocations(this._vao),t.drawArrays(g.PrimitiveType.TRIANGLES,0,this._vaoCount)},r.renderHaze=function(){return!1},r._createVertexArrayObject=function(e){const t=l.createPolySphereData(1,2,!1),r=t.indices[0][1],i=t.vertexAttributes[0][1];for(let a=0;a<r.length;a+=3){const e=r[a];r[a]=r[a+2],r[a+2]=e}const o=i.data,s=T.createBuffer(r.length),n=s.position;for(let a=0;a<r.length;++a){const e=3*r[a];n.set(a,0,o[e]),n.set(a,1,o[e+1]),n.set(a,2,o[e+2])}return new m.VertexArrayObject(e,h.Default3D,{geometry:c.glLayout(T)},{geometry:b.BufferObject.createVertex(e,g.Usage.STATIC_DRAW,s.buffer)})},e}();function d(e,t){r.copy(e,t),e[12]=0,e[13]=0,e[14]=0,e[15]=1}const _=i.create(),T=p.newLayout().vec3f(f.VertexAttribute.POSITION);e.PanoramicAtmosphere=A,Object.defineProperty(e,Symbol.toStringTag,{value:"Module"})}));
