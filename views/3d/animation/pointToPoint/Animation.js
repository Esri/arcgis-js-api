/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.26/esri/copyright.txt for details.
*/
define(["exports","../../../../chunks/_rollupPluginBabelHelpers","../../../../core/time","../../../../chunks/vec3","../../../../chunks/vec3f64","./Camera","../../webgl-engine/lib/Camera","../../../animation/pointToPoint/Animation"],(function(t,i,e,n,r,o,c,s){"use strict";const a=r.create();let m=function(){function t(t){this.currentTime=e.Milliseconds(0),this._animation=new s.Animation((()=>new o(t))),this._current=new o(t)}var r=t.prototype;return r.update=function(t,i,r){const o=this._animation.definition.source,c=this._animation.definition.target,s=n.subtract(a,i.center,t.center),m=n.length(s);m>=1e-5?(s[0]/=m,s[1]/=m,s[2]/=m):(s[0]=0,s[1]=1,s[0]=0),n.copy(o.lookAtDirection,s),n.copy(c.lookAtDirection,s),o.copyFromRenderCamera(t),c.copyFromRenderCamera(i),this._current.copyFrom(o),this._animation.update(o,c,r),this.currentTime=e.Milliseconds(0),t.almostEquals(i)&&(this.currentTime=this._animation.time)},r.cameraAt=function(t,i){return this._animation.cameraAt(t,this._current),i=i||new c.Camera,this._current.copyToRenderCamera(i),i},r.step=function(t,i){return this.finished||(this.currentTime=e.Milliseconds(this.currentTime+e.millisecondsFromSeconds(t)),this.currentTime>=this.time&&(this.currentTime=this.time)),this.cameraAt(this.currentTime/this.time,i)},i._createClass(t,[{key:"finished",get:function(){return this.currentTime>=this._animation.time}},{key:"time",get:function(){return this._animation.time}}]),t}();t.Animation=m,Object.defineProperty(t,Symbol.toStringTag,{value:"Module"})}));
