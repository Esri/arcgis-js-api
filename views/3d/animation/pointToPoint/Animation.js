/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
define(["exports","../../../../chunks/_rollupPluginBabelHelpers","../../../../core/time","../../../../chunks/vec3","../../../../chunks/vec3f64","./Camera","../../webgl-engine/lib/Camera","../../../animation/pointToPoint/Animation"],(function(t,e,i,n,r,o,s,c){"use strict";const a=r.create();let m=function(){function t(t){this.currentTime=i.Milliseconds(0),this._animation=new c.Animation((()=>new o(t))),this._current=new o(t)}var r=t.prototype;return r.update=function(t,e,r){const o=this._animation.definition.source,s=this._animation.definition.target,c=n.subtract(a,e.center,t.center),m=n.length(c);m>=1e-5?(c[0]/=m,c[1]/=m,c[2]/=m):(c[0]=0,c[1]=1,c[0]=0),n.copy(o.lookAtDirection,c),n.copy(s.lookAtDirection,c),o.copyFromRenderCamera(t),s.copyFromRenderCamera(e),this._current.copyFrom(o),this._animation.update(o,s,r),this.currentTime=i.Milliseconds(0),t.almostEquals(e)&&(this.currentTime=this._animation.time)},r.cameraAt=function(t,e){return this._animation.cameraAt(t,this._current),e=e||new s,this._current.copyToRenderCamera(e),e},r.step=function(t,e){return this.finished||(this.currentTime=i.Milliseconds(this.currentTime+i.MillisecondsFromSeconds(t)),this.currentTime>=this.time&&(this.currentTime=this.time)),this.cameraAt(this.currentTime/this.time,e)},e._createClass(t,[{key:"finished",get:function(){return this.currentTime>=this._animation.time}},{key:"time",get:function(){return this._animation.time}}]),t}();t.Animation=m,t.default=m,Object.defineProperty(t,"__esModule",{value:!0})}));
