/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.23/esri/copyright.txt for details.
*/
define(["exports","../../../../core/screenUtils"],(function(e,t){"use strict";function n(e){const n=i(e),s=o(n),l=2*s,u=Math.round(t.pt2px(e.maxPathLength)/l)+1,p=s,c=10,h=a(e),d=r(e),{flowSpeed:f,trailLength:g,density:m}=e;return{lineRenderWidth:n,segmentLength:l,verticesPerLine:u,lineCollisionWidth:p,lineSpacing:c,lineColor:h,lineOpacity:d,lineSpeed:f,fadeDuration:g,density:m,smoothing:t.pt2px(e.smoothing),velocityScale:"flow-from"===e.flowRepresentation?1:-1,minWeightThreshold:.001,minSpeedThreshold:.001,maxTurnAngle:1,mergeLines:!0,interpolate:!0,profile:!1}}function o(e){return"constant"===e.kind?e.value[0]:e.values[e.values.length-1]}function s(e){const t=e.toRgba();return[t[0]/255,t[1]/255,t[2]/255,t[3]]}function i(e){if(!e.hasVisualVariables("size"))return{kind:"constant",value:[t.pt2px(e.trailWidth)]};const n=e.getVisualVariablesForType("size")[0],o=[],s=[];let i;if(n.stops){for(const e of n.stops)o.push(e.value),s.push(e.size);i=n.stops.length}else o.push(n.minDataValue,n.maxDataValue),s.push(n.minSize,n.maxSize),i=2;return{kind:"ramp",stops:o,values:s,count:i}}function a(e){if(!e.hasVisualVariables("color"))return{kind:"constant",value:s(e.color)};const t=e.getVisualVariablesForType("color")[0],n=[],o=[];for(const i of t.stops)n.push(i.value),Array.prototype.push.apply(o,s(i.color));return{kind:"ramp",stops:n,values:o,count:t.stops.length}}function r(e){if(!e.hasVisualVariables("opacity"))return{kind:"constant",value:[1]};const t=e.getVisualVariablesForType("opacity")[0],n=[],o=[];for(const s of t.stops)n.push(s.value),o.push(s.opacity);return{kind:"ramp",stops:n,values:o,count:t.stops.length}}e.createFlowRendererSettings=n,Object.defineProperties(e,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})}));
