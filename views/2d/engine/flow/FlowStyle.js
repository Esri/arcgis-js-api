/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.23/esri/copyright.txt for details.
*/
define(["../../../../chunks/_rollupPluginBabelHelpers","../../../../core/maybe","../../../../core/promiseUtils","./FlowGLResources","./flowRendererUtils"],(function(e,t,r,n,i){"use strict";let s=function(){function s(e,t,r,n){this._loadImagery=e,this._createStreamlinesMesh=t,this._timeExtent=n,this._rendererSettings=i.createFlowRendererSettings(r)}var d=s.prototype;return d.areResourcesCompatible=function(e){let r=!0;return r=r&&e._loadImagery===this._loadImagery,r=r&&e._createStreamlinesMesh===this._createStreamlinesMesh,r=r&&e._rendererSettings.verticesPerLine===this._rendererSettings.verticesPerLine,r=r&&e._rendererSettings.segmentLength===this._rendererSettings.segmentLength,r=r&&e._rendererSettings.lineSpacing===this._rendererSettings.lineSpacing,r=r&&e._rendererSettings.density===this._rendererSettings.density,r=r&&e._rendererSettings.smoothing===this._rendererSettings.smoothing,r=r&&e._rendererSettings.velocityScale===this._rendererSettings.velocityScale,r=r&&e._rendererSettings.minWeightThreshold===this._rendererSettings.minWeightThreshold,r=r&&e._rendererSettings.minSpeedThreshold===this._rendererSettings.minSpeedThreshold,r=r&&e._rendererSettings.mergeLines===this._rendererSettings.mergeLines,r=r&&e._rendererSettings.velocityScale===this._rendererSettings.velocityScale,r=r&&e._rendererSettings.interpolate===this._rendererSettings.interpolate,r=r&&e._rendererSettings.lineColor.kind===this._rendererSettings.lineColor.kind,r=r&&e._rendererSettings.lineOpacity.kind===this._rendererSettings.lineOpacity.kind,r=r&&e._rendererSettings.lineRenderWidth.kind===this._rendererSettings.lineRenderWidth.kind,r&&this._rendererSettings.mergeLines&&(r=e._rendererSettings.lineCollisionWidth===this._rendererSettings.lineCollisionWidth),r&&e._timeExtent!==this._timeExtent&&(r=!(!t.isSome(e._timeExtent)||!t.isSome(this._timeExtent))&&e._timeExtent.equals(this._timeExtent)),r},d.loadResources=function(){var t=e._asyncToGenerator((function*(e,t){const{extent:i,size:s}=e;r.throwIfAborted(t);const d=yield this._loadImagery(i,s[0],s[1],this._timeExtent,t),{vertexData:l,indexData:h}=yield this._createStreamlinesMesh(this._rendererSettings,d,t);return new n(l,h,{lineColor:this._rendererSettings.lineColor,lineOpacity:this._rendererSettings.lineOpacity,lineRenderWidth:this._rendererSettings.lineRenderWidth})}));function i(e,r){return t.apply(this,arguments)}return i}(),e._createClass(s,[{key:"animated",get:function(){return this._rendererSettings.lineSpeed>0}},{key:"renderSettings",get:function(){return this._rendererSettings}}]),s}();return s}));
