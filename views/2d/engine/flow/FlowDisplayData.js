/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
define(["../../../../chunks/_rollupPluginBabelHelpers","../../../../core/Logger"],(function(e,t){"use strict";const s=t.getLogger("esri.views.2d.engine.flow.FlowDisplayData");let i=function(){function t(e,t,s,i){this.state={name:"created"},this.flowStyle=e,this.extent=t,this.size=s,this.pixelRatio=i}var i=t.prototype;return i.load=function(){var t=e._asyncToGenerator((function*(){const e=new AbortController;this.state={name:"loading",abortController:e};const t=yield this.flowStyle.loadResources({extent:this.extent,size:this.size,pixelRatio:this.pixelRatio},e.signal);this.state={name:"loaded",resources:t}}));function s(){return t.apply(this,arguments)}return s}(),i.prepareForRendering=function(e,t,i){if("loaded"!==this.state.name)return void s.error("Only loaded resources can be attached.");const o=this.state.resources;o.prepareForRendering(e,t,i),this.state={name:"attached",resources:o}},i.destroy=function(){if("loading"===this.state.name)return this.state.abortController.abort(),void(this.state={name:"detached"});"attached"===this.state.name&&(this.state.resources.detach(),this.state={name:"detached"})},i.update=function(e){if(!this.flowStyle.areResourcesCompatible(e.flowStyle))return!1;return!(!this.extent.equals(e.extent)||this.size[0]!==e.size[0]||this.size[1]!==e.size[1]||this.pixelRatio!==e.pixelRatio)&&(this.flowStyle=e.flowStyle,!0)},t}();return i}));
