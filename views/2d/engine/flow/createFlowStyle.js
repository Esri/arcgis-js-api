/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.26/esri/copyright.txt for details.
*/
define(["../../../../core/maybe","./utils","./styles/Imagery","./styles/Particles","./styles/Stack","./styles/Streamlines"],(function(e,t,o,a,n,i){"use strict";const l=4,r=1,s=.5,c=!0,g=!0,u=2.3;function y(y,m){const{flowSpeed:d,trailLength:S}=y,f=t.getFlowSimulationSettings(y);let p=null;const w={opacity:t.getOpacity(y),size:t.getSize(y)};let h=t.getColor(y);if("none"===y.background)w.color=h;else{"constant"===h.kind&&(h={kind:"ramp",stops:[0,1],values:[0,0,0,1,h.value[0],h.value[1],h.value[2],h.value[3]],count:2});const e={loadImagery:m.loadImagery,timeExtent:m.timeExtent,color:h,opacity:{kind:"constant",value:[1]}};p=new o.Imagery(e),w.color=t.getForegroundColor()}const k={loadImagery:m.loadImagery,createFlowMesh:m.createFlowMesh,simulationSettings:f,timeExtent:m.timeExtent,trailLength:S,flowSpeed:d,featheringSize:r,featheringOffset:s,introFade:c,fadeToZero:g,decayRate:u,color:w.color,opacity:w.opacity,size:w.size},v="butt"===y.trailCap||t.getMax(t.getSize(y))<=l?new i(k):new a.Particles(k);return e.isSome(p)?new n.Stack([p,v]):v}return y}));
