/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.20/esri/copyright.txt for details.
*/
define(["../../../../layers/support/LOD","../../../../layers/support/TileInfo"],(function(e,i){"use strict";return function(){function t(e,i){this.lockedSchemaPixelSize=e,this.isGCS=i}var n=t.prototype;return n.getLevelRowColumn=function(e){return this.isGCS?[e[0],e[1]>>1,e[2]>>1]:256===this.lockedSchemaPixelSize&&e[0]>0?[e[0]-1,e[1]>>1,e[2]>>1]:e},n.adjustLevel=function(e){return this.isGCS?e:256===this.lockedSchemaPixelSize?e>0?e-1:0:e},n.getShift=function(e,i){let t=0,n=0;return(256===this.lockedSchemaPixelSize||this.isGCS)&&(e[2]%2&&(t=i),e[1]%2&&(n=i)),[t,n]},n.getScale=function(e){if(this.isGCS){if(512===this.lockedSchemaPixelSize)return 4}else if(256===this.lockedSchemaPixelSize&&0===e)return 1;return 2},t.create256x256CompatibleTileInfo=function(t){if(!t)return null;if(256===t.size[0]&&256===t.size[1])return t;const n=256,l=t.spatialReference.isGeographic,o=[],s=t.lods.length;for(let i=0;i<s;i++){const n=t.lods[i],s=l?n.resolution:2*n.resolution;o.push(new e({level:n.level,scale:n.scale,resolution:s}))}return new i({size:[n,n],dpi:t.dpi,format:t.format,compressionQuality:t.compressionQuality,origin:t.origin,spatialReference:t.spatialReference,lods:o})},t.create512x512CompatibleTileInfo=function(t){if(!t)return null;if(256===t.size[0]||256===t.size[1])return null;const n=512,l=[],o=t.lods.length;for(let i=0;i<o;i++){const n=t.lods[i],o=.5*n.resolution;l.push(new e({level:n.level,scale:n.scale,resolution:o}))}return new i({size:[n,n],dpi:t.dpi,format:t.format,compressionQuality:t.compressionQuality,origin:t.origin,spatialReference:t.spatialReference,lods:l})},t}()}));
