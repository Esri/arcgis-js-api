/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.19/esri/copyright.txt for details.
*/
define(["../../../../../core/has","../../../../../core/mathUtils","../../../../webgl/Program","../../../../webgl/checkWebGLError","../../../../webgl/FramebufferObject","./Programs"],(function(e,r,t,a,n,s){"use strict";return function(){function e(){this._programByKey=new Map}var r=e.prototype;return r.dispose=function(){this._programByKey.forEach((e=>e.dispose())),this._programByKey.clear()},r.getMaterialProgram=function(e,r,a){const n=r.key<<2|this._getMaterialOptionsValue(r.type,a);if(this._programByKey.has(n))return this._programByKey.get(n);const s=this._getProgramTemplate(r.type),{shaders:c}=s,{vertexShader:i,fragmentShader:o}=c(a),u=r.getShaderHeader(),g=r.getShaderMain(),p=i.replace("#pragma header",u).replace("#pragma main",g),l=new t(e,p,o,r.getAttributeLocations());return this._programByKey.set(n,l),l},r._getMaterialOptionsValue=function(e,r){switch(e){case 0:{const e=r;return(e.pattern?1:0)<<1|(e.id?1:0)}case 1:{const e=r;return(e.pattern?1:0)<<1|(e.id?1:0)}case 2:return r.id?1:0;case 3:{const e=r;return(e.pattern?1:0)<<1|(e.id?1:0)}case 4:{const e=r;return(e.sdf?1:0)<<1|(e.id?1:0)}case 5:return r.id?1:0;case 6:return r.id?1:0;default:return 0}},r._getProgramTemplate=function(e){switch(e){case 0:return s.background;case 5:return s.circle;case 1:return s.fill;case 4:return s.icon;case 3:return s.line;case 2:return s.outline;case 6:return s.text;default:return null}},e}()}));
