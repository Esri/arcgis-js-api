/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.18/esri/copyright.txt for details.
*/
define(["exports","../../../../../chunks/_rollupPluginBabelHelpers","./Filter","./StyleDefinition","./StyleProperty","../../webgl/definitions"],(function(t,i,e,a,n,o){"use strict";let r=function(){function t(t,i,e,n){switch(this.type=t,this.typeName=i.type,this.id=i.id,this.source=i.source,this.sourceLayer=i["source-layer"],this.minzoom=i.minzoom,this.maxzoom=i.maxzoom,this.filter=i.filter,this.layout=i.layout,this.paint=i.paint,this.z=e,this.uid=n,t){case 0:this._layoutDefinition=a.StyleDefinition.backgroundLayoutDefinition,this._paintDefinition=a.StyleDefinition.backgroundPaintDefinition;break;case 1:this._layoutDefinition=a.StyleDefinition.fillLayoutDefinition,this._paintDefinition=a.StyleDefinition.fillPaintDefinition;break;case 2:this._layoutDefinition=a.StyleDefinition.lineLayoutDefinition,this._paintDefinition=a.StyleDefinition.linePaintDefinition;break;case 3:this._layoutDefinition=a.StyleDefinition.symbolLayoutDefinition,this._paintDefinition=a.StyleDefinition.symbolPaintDefinition;break;case 4:this._layoutDefinition=a.StyleDefinition.circleLayoutDefinition,this._paintDefinition=a.StyleDefinition.circlePaintDefinition}this._layoutProperties=this._parseLayout(this.layout),this._paintProperties=this._parsePaint(this.paint)}var i=t.prototype;return i.getFeatureFilter=function(){return void 0!==this._featureFilter?this._featureFilter:this._featureFilter=e.createFilter(this.filter)},i.getLayoutProperty=function(t){return this._layoutProperties[t]},i.getPaintProperty=function(t){return this._paintProperties[t]},i.getLayoutValue=function(t,i,e){let a;const n=this._layoutProperties[t];n&&(a=n.getValue(i,e));const o=this._layoutDefinition[t];return void 0===a&&(a=o.default),"enum"===o.type?a=o.values.indexOf(a):"array"===o.type&&"enum"===o.value&&(a=a.map((t=>o.values.indexOf(t)))),a},i.getPaintValue=function(t,i,e){let a;const n=this._paintProperties[t];n&&(a=n.getValue(i,e));const o=this._paintDefinition[t];return void 0===a&&(a=o.default),"enum"===o.type&&(a=o.values.indexOf(a)),a},i.isPainterDataDriven=function(){const t=this._paintProperties;if(t)for(const i in t)if(t[i].isDataDriven)return!0;return!1},i._parseLayout=function(t){const i={};for(const e in t){const a=this._layoutDefinition[e];a&&(i[e]=new n(a,t[e]))}return i},i._parsePaint=function(t){const i={};for(const e in t){const a=this._paintDefinition[e];a&&(i[e]=new n(a,t[e]))}return i},t}(),s=function(t){function e(i,e,a,n){return t.call(this,i,e,a,n)||this}return i._inheritsLoose(e,t),e}(r),l=function(t){function e(i,e,a,n){var o;const r=(o=t.call(this,i,e,a,n)||this).getPaintProperty("fill-color");o.hasDataDrivenColor=!!r&&r.isDataDriven;const s=o.getPaintProperty("fill-opacity");o.hasDataDrivenOpacity=!!s&&s.isDataDriven,o.hasDataDrivenFill=o.hasDataDrivenColor||o.hasDataDrivenOpacity;const l=o.getPaintProperty("fill-outline-color");return o.outlineUsesFillColor=!l,o.hasDataDrivenOutlineColor=!!l&&l.isDataDriven,o.hasDataDrivenOutline=(l?o.hasDataDrivenOutlineColor:o.hasDataDrivenColor)||o.hasDataDrivenOpacity,o}return i._inheritsLoose(e,t),e}(r),u=function(t){function e(i,e,n,r){var s;const l=(s=t.call(this,i,e,n,r)||this).getPaintProperty("line-color");s.hasDataDrivenColor=!!l&&l.isDataDriven;const u=s.getPaintProperty("line-opacity");s.hasDataDrivenOpacity=!!u&&u.isDataDriven;const D=s.getPaintProperty("line-width");s.hasDataDrivenWidth=!!D&&D.isDataDriven,s.hasDataDrivenLine=s.hasDataDrivenColor||s.hasDataDrivenOpacity||s.hasDataDrivenWidth;let h=e.paint["line-width"];return h||(h=a.StyleDefinition.linePaintDefinition["line-width"].default),s.isThinLine=!s.hasDataDrivenWidth&&"number"==typeof h&&h<o.THIN_LINE_THRESHOLD,s}return i._inheritsLoose(e,t),e}(r),D=function(t){function e(i,e,a,n){var o;const r=(o=t.call(this,i,e,a,n)||this).getPaintProperty("icon-color");o.hasDataDrivenIconColor=!!r&&r.isDataDriven;const s=o.getPaintProperty("icon-opacity");o.hasDataDrivenIconOpacity=!!s&&s.isDataDriven;const l=o.getLayoutProperty("icon-size");o.hasDataDrivenIconSize=!!l&&l.isDataDriven,o.hasDataDrivenIcon=o.hasDataDrivenIconColor||o.hasDataDrivenIconOpacity||o.hasDataDrivenIconSize;const u=o.getPaintProperty("text-color");o.hasDataDrivenTextColor=!!u&&u.isDataDriven;const D=o.getPaintProperty("text-opacity");o.hasDataDrivenTextOpacity=!!D&&D.isDataDriven;const h=o.getLayoutProperty("text-size");return o.hasDataDrivenTextSize=!!h&&h.isDataDriven,o.hasDataDrivenText=o.hasDataDrivenTextColor||o.hasDataDrivenTextOpacity||o.hasDataDrivenTextSize,o}return i._inheritsLoose(e,t),e}(r),h=function(t){function e(i,e,a,n){var o;const r=(o=t.call(this,i,e,a,n)||this).getPaintProperty("circle-radius");o.hasDataDrivenRadius=!!r&&r.isDataDriven;const s=o.getPaintProperty("circle-color");o.hasDataDrivenColor=!!s&&s.isDataDriven;const l=o.getPaintProperty("circle-opacity");o.hasDataDrivenOpacity=!!l&&l.isDataDriven;const u=o.getPaintProperty("circle-stroke-width");o.hasDataDrivenStrokeWidth=!!u&&u.isDataDriven;const D=o.getPaintProperty("circle-stroke-color");o.hasDataDrivenStrokeColor=!!D&&D.isDataDriven;const h=o.getPaintProperty("circle-stroke-opacity");o.hasDataDrivenStrokeOpacity=!!h&&h.isDataDriven;const c=o.getPaintProperty("circle-blur");return o.hasDataDrivenBlur=!!c&&c.isDataDriven,o}return i._inheritsLoose(e,t),e}(r);t.BackgroundStyleLayer=s,t.CircleStyleLayer=h,t.FillStyleLayer=l,t.IconLayout=function(t,i,e,a){this.allowOverlap=t.getLayoutValue("icon-allow-overlap",i,a),this.anchor=t.getLayoutValue("icon-anchor",i,a),this.ignorePlacement=t.getLayoutValue("icon-ignore-placement",i,a),this.keepUpright=t.getLayoutValue("icon-keep-upright",i,a),this.offset=t.getLayoutValue("icon-offset",i,a),this.optional=t.getLayoutValue("icon-optional",i,a),this.padding=t.getLayoutValue("icon-padding",i,a),this.rotate=t.getLayoutValue("icon-rotate",i,a),this.rotationAlignment=t.getLayoutValue("icon-rotation-alignment",i,a),this.size=t.getLayoutValue("icon-size",i,a),2===this.rotationAlignment&&(this.rotationAlignment=e?0:1)},t.LineStyleLayer=u,t.StyleLayer=r,t.SymbolStyleLayer=D,t.TextLayout=function(t,i,e,a){this.allowOverlap=t.getLayoutValue("text-allow-overlap",i,a),this.anchor=t.getLayoutValue("text-anchor",i,a),this.fontArray=t.getLayoutValue("text-font",i,a),this.ignorePlacement=t.getLayoutValue("text-ignore-placement",i,a),this.justify=t.getLayoutValue("text-justify",i,a),this.keepUpright=t.getLayoutValue("text-keep-upright",i,a),this.letterSpacing=t.getLayoutValue("text-letter-spacing",i,a),this.lineHeight=t.getLayoutValue("text-line-height",i,a),this.maxAngle=t.getLayoutValue("text-max-angle",i,a),this.maxWidth=t.getLayoutValue("text-max-width",i,a),this.offset=t.getLayoutValue("text-offset",i,a),this.optional=t.getLayoutValue("text-optional",i,a),this.padding=t.getLayoutValue("text-padding",i,a),this.rotate=t.getLayoutValue("text-rotate",i,a),this.rotationAlignment=t.getLayoutValue("text-rotation-alignment",i,a),this.size=t.getLayoutValue("text-size",i,a),this.transform=t.getLayoutValue("text-transform",i,a),this.writingMode=t.getLayoutValue("text-writing-mode",i,a),2===this.rotationAlignment&&(this.rotationAlignment=e?0:1)},Object.defineProperty(t,"__esModule",{value:!0})}));
