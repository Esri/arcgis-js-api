/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.26/esri/copyright.txt for details.
*/
define(["exports","../../../../../../chunks/_rollupPluginBabelHelpers","../../../../../../Color","../../../../../../core/maybe","../../../../../../core/screenUtils","../../color","../../definitions","../Technique","../../../../../webgl/enums"],(function(e,t,o,r,a,n,i,l,c){"use strict";let u=function(e){function l(){return e.apply(this,arguments)||this}return t._inheritsLoose(l,e),l.getStorageSpec=function({attributes:e}){return{visualVariables:!0,attributes:e??null}},l._createRendererSchema=function(){return{type:"pie-chart",colors:new Float32Array(4*i.CHART_MAX_FIELDS),defaultColor:new Float32Array(4),othersColor:new Float32Array(4),outlineColor:new Float32Array(4),holePercentage:0,sectorThreshold:0,outlineWidth:1,numberOfFields:10}},l.createOrUpdateRendererSchema=function(e,t){const{attributes:l,defaultColor:c,holePercentage:u,othersCategory:s,outline:p}=t,h=r.isSome(e)&&"pie-chart"===e.type?e:this._createRendererSchema();for(let r=0;r<i.CHART_MAX_FIELDS;r++){const e=r>=l.length?new o([0,0,0,0]):l[r].color;n.writeColor(h.colors,e,4*r)}return n.writeColor(h.defaultColor,c),n.writeColor(h.othersColor,s?.color),n.writeColor(h.outlineColor,p?.color),h.outlineWidth=a.pt2px(p?.width||0),h.holePercentage=u,h.sectorThreshold=s?.threshold||0,h.numberOfFields=l.length,h},l.getVariation=function(e){return{numberOfFields:e.numberOfFields}},l.getVariationHash=function(e){return e.numberOfFields},l}(l.Technique);u.type="pie-chart",u.programSpec={shader:"materials/pie",vertexLayout:{geometry:[{location:0,name:"a_pos",count:2,type:c.DataType.SHORT},{location:1,name:"a_vertexOffset",count:2,type:c.DataType.SHORT},{location:2,name:"a_texCoords",count:2,type:c.DataType.UNSIGNED_SHORT},{location:3,name:"a_bitSetAndDistRatio",count:2,type:c.DataType.UNSIGNED_SHORT},{location:4,name:"a_id",count:4,type:c.DataType.UNSIGNED_BYTE},{location:5,name:"a_color",count:4,type:c.DataType.UNSIGNED_BYTE,normalized:!0},{location:6,name:"a_outlineColor",count:4,type:c.DataType.UNSIGNED_BYTE,normalized:!0},{location:7,name:"a_sizeAndOutlineWidth",count:4,type:c.DataType.UNSIGNED_BYTE},{location:8,name:"a_zoomRange",count:2,type:c.DataType.UNSIGNED_SHORT}]},hittestAttributes:["a_vertexOffset","a_texCoords"]},e.PieChartTechnique=u,Object.defineProperty(e,Symbol.toStringTag,{value:"Module"})}));
