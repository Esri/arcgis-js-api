/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
define(["exports","../../../../chunks/_rollupPluginBabelHelpers","../../../../core/maybe","./cpuMapped/FreeList"],(function(e,t,i,n){"use strict";let a=function(){function e(e,t,i,n,a){this.target=e,this.geometryType=t,this.materialKey=i,this.indexFrom=n,this.indexCount=a}var i=e.prototype;return i.extend=function(e){this.indexCount+=e},i.draw=function(e,t,i){this.target.draw(e,t,i,this.indexFrom,this.indexCount)},t._createClass(e,[{key:"indexEnd",get:function(){return this.indexFrom+this.indexCount}}]),e}(),s=function(){function e(e,t){this.geometryType=0,this._target=e,this.geometryType=t}e.from=function(t,n,a,s){const o=new e(t,n);if(i.isSome(s))for(const e of s)a.seekIndex(e),o.addRecord(a);else for(;a.next();)o.addRecord(a);return o};var t=e.prototype;return t.addRecord=function(e){const t=this._target,s=this.geometryType,o=e.materialKey,d=e.indexFrom,r=e.indexCount;if(i.isNone(this._head)){const e=new a(t,s,o,d,r);return void(this._head=new n.List(e))}let h=null,u=this._head;for(;u;){if(d<u.data.indexFrom)return this._insert(o,d,r,h,u);h=u,u=u.next}this._insert(o,d,r,h,null)},t.forEach=function(e){i.isSome(this._head)&&this._head.forEach(e)},t.infos=function*(){if(i.isSome(this._head))for(const e of this._head.values())yield e},t._insert=function(e,t,s,o,d){if(i.isNone(o)&&i.isNone(d)){const i=new a(this._target,this.geometryType,e,t,s);this._head=new n.List(i)}return i.isNone(o)&&i.isSome(d)?this._insertAtHead(e,t,s,d):i.isSome(o)&&i.isNone(d)?this._insertAtEnd(e,t,s,o):i.isSome(o)&&i.isSome(d)?this._insertAtMiddle(e,t,s,o,d):void 0},t._insertAtHead=function(e,t,i,s){const o=t+i;if(e===s.data.materialKey&&o===s.data.indexFrom)s.data.indexFrom=t,s.data.indexCount+=i;else{const o=new a(this._target,this.geometryType,e,t,i);this._head=new n.List(o),this._head.next=s}},t._insertAtEnd=function(e,t,i,s){if(s.data.materialKey===e&&s.data.indexEnd===t)s.data.indexCount+=i;else{const o=new a(this._target,this.geometryType,e,t,i),d=new n.List(o);s.next=d}},t._insertAtMiddle=function(e,t,i,s,o){const d=t+i;if(s.data.materialKey===e&&s.data.indexEnd===t)s.data.indexCount+=i,s.data.materialKey===o.data.materialKey&&s.data.indexEnd===o.data.indexFrom&&(s.data.indexCount+=o.data.indexCount,s.next=o.next);else if(e===o.data.materialKey&&d===o.data.indexFrom)o.data.indexFrom=t,o.data.indexCount+=i;else{const d=new a(this._target,this.geometryType,e,t,i),r=new n.List(d);s.next=r,r.next=o}},e}();e.FeatureDisplayList=s,e.FeatureDisplayListInfo=a,Object.defineProperty(e,"__esModule",{value:!0})}));
