/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.18/esri/copyright.txt for details.
*/
define(["../../../../../../chunks/_rollupPluginBabelHelpers","../../../../../../core/Logger","../../../../../../core/screenUtils","../../definitions","../../number","../../materialKey/MaterialKey","../../color","../../Utils","./util","./WGLMeshTemplate","./WGLBaseLineTemplate"],(function(e,t,i,r,l,n,o,s,a,c,p){"use strict";const u=t.getLogger("esri.views.2d.engine.webgl.WGLLineTemplate");return function(t){function c(e,i,r,l,o,s,c,p,u,d,f,m,L,h,y,_){var P;P=t.call(this)||this;const S=n.LineMaterialKey.load(e);return i&&(S.sdf=i.sdf,S.pattern=!0,S.textureBinding=i.textureBinding),P._capType=l,P._joinType=o,P._miterLimitCosine=a.getLimitCosine(s),P.tessellationProperties._fillColor=c,P.tessellationProperties._tl=p,P.tessellationProperties._br=u,P._hasPattern=d,P._isDashed=f,P._joinOnUTurn=y,P._isColorLocked=m,P._zOrder=h,P.effects=_,P._materialKey=S.data,P.tessellationProperties._bitset=m?1:0,P.tessellationProperties._halfWidth=.5*r,P.tessellationProperties._halfReferenceWidth=.5*L,P._initializeTessellator(!1),P}return e._inheritsLoose(c,t),c.fromCIMLine=function(e,t,n){const s=e.color,a=e.scaleFactor||1,p=e.isDashed;let u=e.cap;p&&1===u&&(u=2);const d=e.join,f=i.pt2px(e.width)*a,m=i.pt2px(e.referenceWidth),L=i.pt2px(e.miterLimit),h=s&&o.premultiplyAlphaRGBA(s)||0;if(!t)return new c(e.materialKey,t,f,u,d,L,h,0,0,!1,p,e.colorLocked,m,e.zOrder,n,e.effects);const{rect:y,width:_,height:P}=t,S=y.x+r.SPRITE_PADDING,g=y.y+r.SPRITE_PADDING,T=S+_,w=g+P,D=l.i1616to32(S,g),x=l.i1616to32(T,w);return new c(e.materialKey,t,f,u,d,L,h,D,x,!0,p,e.colorLocked,m,e.zOrder,n,e.effects)},c.fromSimpleLine=function(e,t,n){const{color:a}=e,p="esriSLSSolid"!==e.style&&"esriSLSNull"!==e.style,u=s.getCapType(e.cap||"round",p),d=s.getJoinType(e.join||"round");let f=a&&"esriSLSNull"!==e.style&&o.premultiplyAlphaRGBAArray(a)||0;"esriSLSNull"===e.style&&(f=0);const m=i.pt2px(e.width),L=e.miterLimit;if(!t)return new c(e.materialKey,t,m,u,d,L,f,0,0,!1,p,!1,m,0,n,null);const{rect:h,width:y,height:_}=t,P=h.x+r.SPRITE_PADDING,S=h.y+r.SPRITE_PADDING,g=P+y,T=S+_,w=l.i1616to32(P,S),D=l.i1616to32(g,T);return new c(e.materialKey,t,m,u,d,L,f,w,D,!0,p,!1,m,0,n,null)},c.fromPictureLineSymbol=function(e,t,i,r){return u.error("PictureLineSymbol support does not exist!"),null},c}(p(c))}));
