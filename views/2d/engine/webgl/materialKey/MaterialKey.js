/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.18/esri/copyright.txt for details.
*/
define(["exports","../../../../../chunks/_rollupPluginBabelHelpers","../../../../../core/Error","../enums","../mesh/templates/meshUtils"],(function(t,e,i,n,r){"use strict";function o(t,e=!1){const i=n.WGLVVFlag.SIZE_FIELD_STOPS|n.WGLVVFlag.SIZE_MINMAX_VALUE|n.WGLVVFlag.SIZE_SCALE_STOPS|n.WGLVVFlag.SIZE_UNIT_VALUE,r=(t&(n.WGLVVTarget.FIELD_TARGETS_OUTLINE|n.WGLVVTarget.MINMAX_TARGETS_OUTLINE|n.WGLVVTarget.SCALE_TARGETS_OUTLINE|n.WGLVVTarget.UNIT_TARGETS_OUTLINE))>>>4;return e?i&r:i&~r}function s(t){const e=o(t,!1);return t&(n.WGLVVFlag.COLOR|n.WGLVVFlag.OPACITY|n.WGLVVFlag.ROTATION|e)}let a=function(){function t(t){this._data=0,this._data=t}t.load=function(t){const e=this.shared;return e.data=t,e};var r=t.prototype;return r.setBit=function(t,e){const i=1<<t;e?this._data|=i:this._data&=~i},r.bit=function(t){return(this._data&1<<t)>>t},r.setBits=function(t,e,i){for(let n=e,r=0;n<i;n++,r++)this.setBit(n,0!=(t&1<<r))},r.bits=function(t,e){let i=0;for(let n=t,r=0;n<e;n++,r++)i|=this.bit(n)<<r;return i},r.hasVV=function(){return!1},r.setVV=function(t,e){},r.getVariation=function(){return{mapAligned:this.mapAligned,pattern:this.pattern,sdf:this.sdf}},r.getVariationHash=function(){return this._data&~(7&this.textureBinding)},e._createClass(t,[{key:"data",set:function(t){this._data=t},get:function(){return this._data}},{key:"geometryType",get:function(){return this.bits(8,11)},set:function(t){this.setBits(t,8,11)}},{key:"mapAligned",get:function(){return!!this.bit(20)},set:function(t){this.setBit(20,t)}},{key:"sdf",get:function(){return!!this.bit(11)},set:function(t){this.setBit(11,t)}},{key:"pattern",get:function(){return!!this.bit(12)},set:function(t){this.setBit(12,t)}},{key:"textureBinding",get:function(){return this.bits(0,8)},set:function(t){this.setBits(t,0,8)}},{key:"geometryTypeString",get:function(){switch(this.geometryType){case n.WGLGeometryType.FILL:return"fill";case n.WGLGeometryType.MARKER:return"marker";case n.WGLGeometryType.LINE:return"line";case n.WGLGeometryType.TEXT:return"text";case n.WGLGeometryType.LABEL:return"label";default:throw new i(`Unable to handle unknown geometryType: ${this.geometryType}`)}}}]),t}();a.shared=new a(0);const u=t=>function(t){function i(){return t.apply(this,arguments)||this}e._inheritsLoose(i,t);var r=i.prototype;return r.hasVV=function(){return t.prototype.hasVV.call(this)||this.vvSizeMinMaxValue||this.vvSizeScaleStops||this.vvSizeFieldStops||this.vvSizeUnitValue},r.setVV=function(e,i){t.prototype.setVV.call(this,e,i);const r=o(e,i)&e;this.vvSizeMinMaxValue=!!(r&n.WGLVVFlag.SIZE_MINMAX_VALUE),this.vvSizeFieldStops=!!(r&n.WGLVVFlag.SIZE_FIELD_STOPS),this.vvSizeUnitValue=!!(r&n.WGLVVFlag.SIZE_UNIT_VALUE),this.vvSizeScaleStops=!!(r&n.WGLVVFlag.SIZE_SCALE_STOPS)},e._createClass(i,[{key:"vvSizeMinMaxValue",get:function(){return 0!==this.bit(16)},set:function(t){this.setBit(16,t)}},{key:"vvSizeScaleStops",get:function(){return 0!==this.bit(17)},set:function(t){this.setBit(17,t)}},{key:"vvSizeFieldStops",get:function(){return 0!==this.bit(18)},set:function(t){this.setBit(18,t)}},{key:"vvSizeUnitValue",get:function(){return 0!==this.bit(19)},set:function(t){this.setBit(19,t)}}]),i}(t),l=t=>function(t){function i(){return t.apply(this,arguments)||this}e._inheritsLoose(i,t);var r=i.prototype;return r.hasVV=function(){return t.prototype.hasVV.call(this)||this.vvRotation},r.setVV=function(e,i){t.prototype.setVV.call(this,e,i),this.vvRotation=!i&&!!(e&n.WGLVVFlag.ROTATION)},e._createClass(i,[{key:"vvRotation",get:function(){return 0!==this.bit(15)},set:function(t){this.setBit(15,t)}}]),i}(t),c=t=>function(t){function i(){return t.apply(this,arguments)||this}e._inheritsLoose(i,t);var r=i.prototype;return r.hasVV=function(){return t.prototype.hasVV.call(this)||this.vvColor},r.setVV=function(e,i){t.prototype.setVV.call(this,e,i),this.vvColor=!i&&!!(e&n.WGLVVFlag.COLOR)},e._createClass(i,[{key:"vvColor",get:function(){return 0!==this.bit(13)},set:function(t){this.setBit(13,t)}}]),i}(t),h=t=>function(t){function i(){return t.apply(this,arguments)||this}e._inheritsLoose(i,t);var r=i.prototype;return r.hasVV=function(){return t.prototype.hasVV.call(this)||this.vvOpacity},r.setVV=function(e,i){t.prototype.setVV.call(this,e,i),this.vvOpacity=!i&&!!(e&n.WGLVVFlag.OPACITY)},e._createClass(i,[{key:"vvOpacity",get:function(){return 0!==this.bit(14)},set:function(t){this.setBit(14,t)}}]),i}(t);let v=function(t){function i(){return t.apply(this,arguments)||this}return e._inheritsLoose(i,t),i.load=function(t){const e=this.shared;return e.data=t,e},i.from=function(t,e){const i=this.load(0);return i.geometryType=n.WGLGeometryType.FILL,e?i.dotDensity=!0:i.setVV(t,!1),i.data},i.prototype.getVariation=function(){return{...t.prototype.getVariation.call(this),dotDensity:this.dotDensity,vvColor:this.vvColor,vvOpacity:this.vvOpacity}},e._createClass(i,[{key:"dotDensity",get:function(){return!!this.bit(15)},set:function(t){this.setBit(15,t)}}]),i}(c(h(a)));v.shared=new v(0);let p=function(t){function i(){return t.apply(this,arguments)||this}return e._inheritsLoose(i,t),i.load=function(t){const e=this.shared;return e.data=t,e},i.from=function(t){const e=this.load(0);return e.geometryType=n.WGLGeometryType.MARKER,e.setVV(t,!1),e.data},i.prototype.getVariation=function(){return{...t.prototype.getVariation.call(this),vvColor:this.vvColor,vvRotation:this.vvRotation,vvOpacity:this.vvOpacity,vvSizeFieldStops:this.vvSizeFieldStops,vvSizeMinMaxValue:this.vvSizeMinMaxValue,vvSizeScaleStops:this.vvSizeScaleStops,vvSizeUnitValue:this.vvSizeUnitValue}},i}(c(h(l(u(a)))));p.shared=new p(0);let V=function(t){function i(){return t.apply(this,arguments)||this}return e._inheritsLoose(i,t),i.load=function(t){const e=this.shared;return e.data=t,e},i.from=function(t,e){const i=this.load(0);return i.geometryType=n.WGLGeometryType.LINE,i.setVV(t,e),i.data},i.prototype.getVariation=function(){return{...t.prototype.getVariation.call(this),vvColor:this.vvColor,vvOpacity:this.vvOpacity,vvSizeFieldStops:this.vvSizeFieldStops,vvSizeMinMaxValue:this.vvSizeMinMaxValue,vvSizeScaleStops:this.vvSizeScaleStops,vvSizeUnitValue:this.vvSizeUnitValue}},i}(c(h(u(a))));V.shared=new V(0);let y=function(t){function i(){return t.apply(this,arguments)||this}return e._inheritsLoose(i,t),i.load=function(t){const e=this.shared;return e.data=t,e},i.from=function(t){const e=this.load(t);return e.geometryType=n.WGLGeometryType.TEXT,e.setVV(t,!1),e.data},i.prototype.getVariation=function(){return{...t.prototype.getVariation.call(this),vvColor:this.vvColor,vvOpacity:this.vvOpacity,vvRotation:this.vvRotation,vvSizeFieldStops:this.vvSizeFieldStops,vvSizeMinMaxValue:this.vvSizeMinMaxValue,vvSizeScaleStops:this.vvSizeScaleStops,vvSizeUnitValue:this.vvSizeUnitValue}},i}(c(h(l(u(a)))));y.shared=new y(0);let f=function(t){function i(){return t.apply(this,arguments)||this}return e._inheritsLoose(i,t),i.load=function(t){const e=this.shared;return e.data=t,e},i.from=function(t,e){const i=this.load(0);return i.geometryType=n.WGLGeometryType.LABEL,i.setVV(t,!1),i.mapAligned=!!r.isMapAligned(e),i.data},i.prototype.getVariation=function(){return{...t.prototype.getVariation.call(this),vvSizeFieldStops:this.vvSizeFieldStops,vvSizeMinMaxValue:this.vvSizeMinMaxValue,vvSizeScaleStops:this.vvSizeScaleStops,vvSizeUnitValue:this.vvSizeUnitValue}},i}(u(a));f.shared=new f(0),t.FillMaterialKey=v,t.LabelMaterialKey=f,t.LineMaterialKey=V,t.MarkerMaterialKey=p,t.MaterialKeyBase=a,t.TextMaterialKey=y,t.createMaterialKey=function(t,e,i,r,o){switch(t){case n.WGLGeometryType.FILL:return v.from(e,r);case n.WGLGeometryType.LINE:return V.from(e,i);case n.WGLGeometryType.MARKER:return p.from(e);case n.WGLGeometryType.TEXT:return y.from(e);case n.WGLGeometryType.LABEL:return f.from(e,o);default:throw new Error(`Unable to createMaterialKey for unknown geometryType ${t}`)}},t.getFillVVFlags=function(t){return t&(n.WGLVVFlag.COLOR|n.WGLVVFlag.OPACITY)},t.getLabelVVFlags=function(t){return t&o(t,!1)},t.getLineVVFlags=function(t,e){if(e){return t&o(t,!0)}const i=o(t,!1);return t&(n.WGLVVFlag.COLOR|n.WGLVVFlag.OPACITY|i)},t.getMarkerVVFlags=s,t.getSizeFlagsMask=o,t.getTextVVFlags=function(t){return s(t)},t.hydrateMaterialKey=function(t){switch(a.load(t).geometryType){case n.WGLGeometryType.MARKER:return new p(t);case n.WGLGeometryType.FILL:return new v(t);case n.WGLGeometryType.LINE:return new V(t);case n.WGLGeometryType.TEXT:return new y(t);case n.WGLGeometryType.LABEL:return new f(t)}},Object.defineProperty(t,"__esModule",{value:!0})}));
