/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.23/esri/copyright.txt for details.
*/
define(["exports","../../../../../chunks/_rollupPluginBabelHelpers","../../../../../core/Error","../alignmentUtils","../enums"],(function(t,e,i,n,s){"use strict";function o(t,e){const i=s.WGLVVFlag.SIZE_FIELD_STOPS|s.WGLVVFlag.SIZE_MINMAX_VALUE|s.WGLVVFlag.SIZE_SCALE_STOPS|s.WGLVVFlag.SIZE_UNIT_VALUE,n=(t&(s.WGLVVTarget.FIELD_TARGETS_OUTLINE|s.WGLVVTarget.MINMAX_TARGETS_OUTLINE|s.WGLVVTarget.SCALE_TARGETS_OUTLINE|s.WGLVVTarget.UNIT_TARGETS_OUTLINE))>>>4;return e.isOutline||e.isOutlinedFill?i&n:i&~n}const r=0,a=8,u=7,l=8,v=11,h=11,c=12,p=13,y=14,S=15,V=15,f=16,d=17,L=18,g=19,T=20,G=21,m=22;function z(t,e){switch(t){case s.WGLGeometryType.FILL:return O.from(e);case s.WGLGeometryType.LINE:return U.from(e);case s.WGLGeometryType.MARKER:return A.from(e);case s.WGLGeometryType.TEXT:return B.from(e);case s.WGLGeometryType.LABEL:return b.from(e);default:throw new Error(`Unable to createMaterialKey for unknown geometryType ${t}`)}}function M(t){switch(_.load(t).geometryType){case s.WGLGeometryType.MARKER:return new A(t);case s.WGLGeometryType.FILL:return new O(t);case s.WGLGeometryType.LINE:return new U(t);case s.WGLGeometryType.TEXT:return new B(t);case s.WGLGeometryType.LABEL:return new b(t)}}let _=function(){function t(t){this._data=0,this._data=t}t.load=function(t){const e=this.shared;return e.data=t,e};var n=t.prototype;return n.setBit=function(t,e){const i=1<<t;e?this._data|=i:this._data&=~i},n.bit=function(t){return(this._data&1<<t)>>t},n.setBits=function(t,e,i){for(let n=e,s=0;n<i;n++,s++)this.setBit(n,0!=(t&1<<s))},n.bits=function(t,e){let i=0;for(let n=t,s=0;n<e;n++,s++)i|=this.bit(n)<<s;return i},n.hasVV=function(){return!1},n.setVV=function(t,e){},n.getVariation=function(){return{mapAligned:this.mapAligned,pattern:this.pattern,sdf:this.sdf}},n.getVariationHash=function(){return this._data&~(u&this.textureBinding)},e._createClass(t,[{key:"data",get:function(){return this._data},set:function(t){this._data=t}},{key:"geometryType",get:function(){return this.bits(l,v)},set:function(t){this.setBits(t,l,v)}},{key:"mapAligned",get:function(){return!!this.bit(T)},set:function(t){this.setBit(T,t)}},{key:"sdf",get:function(){return!!this.bit(h)},set:function(t){this.setBit(h,t)}},{key:"pattern",get:function(){return!!this.bit(c)},set:function(t){this.setBit(c,t)}},{key:"textureBinding",get:function(){return this.bits(r,a)},set:function(t){this.setBits(t,r,a)}},{key:"geometryTypeString",get:function(){switch(this.geometryType){case s.WGLGeometryType.FILL:return"fill";case s.WGLGeometryType.MARKER:return"marker";case s.WGLGeometryType.LINE:return"line";case s.WGLGeometryType.TEXT:return"text";case s.WGLGeometryType.LABEL:return"label";default:throw new i(`Unable to handle unknown geometryType: ${this.geometryType}`)}}}]),t}();_.shared=new _(0);const E=t=>function(t){function i(){return t.apply(this,arguments)||this}e._inheritsLoose(i,t);var n=i.prototype;return n.hasVV=function(){return t.prototype.hasVV.call(this)||this.vvSizeMinMaxValue||this.vvSizeScaleStops||this.vvSizeFieldStops||this.vvSizeUnitValue},n.setVV=function(e,i){t.prototype.setVV.call(this,e,i);const n=o(e,i)&e;this.vvSizeMinMaxValue=!!(n&s.WGLVVFlag.SIZE_MINMAX_VALUE),this.vvSizeFieldStops=!!(n&s.WGLVVFlag.SIZE_FIELD_STOPS),this.vvSizeUnitValue=!!(n&s.WGLVVFlag.SIZE_UNIT_VALUE),this.vvSizeScaleStops=!!(n&s.WGLVVFlag.SIZE_SCALE_STOPS)},e._createClass(i,[{key:"vvSizeMinMaxValue",get:function(){return 0!==this.bit(f)},set:function(t){this.setBit(f,t)}},{key:"vvSizeScaleStops",get:function(){return 0!==this.bit(d)},set:function(t){this.setBit(d,t)}},{key:"vvSizeFieldStops",get:function(){return 0!==this.bit(L)},set:function(t){this.setBit(L,t)}},{key:"vvSizeUnitValue",get:function(){return 0!==this.bit(g)},set:function(t){this.setBit(g,t)}}]),i}(t),F=t=>function(t){function i(){return t.apply(this,arguments)||this}e._inheritsLoose(i,t);var n=i.prototype;return n.hasVV=function(){return t.prototype.hasVV.call(this)||this.vvRotation},n.setVV=function(e,i){t.prototype.setVV.call(this,e,i),this.vvRotation=!i.isOutline&&!!(e&s.WGLVVFlag.ROTATION)},e._createClass(i,[{key:"vvRotation",get:function(){return 0!==this.bit(S)},set:function(t){this.setBit(S,t)}}]),i}(t),W=t=>function(t){function i(){return t.apply(this,arguments)||this}e._inheritsLoose(i,t);var n=i.prototype;return n.hasVV=function(){return t.prototype.hasVV.call(this)||this.vvColor},n.setVV=function(e,i){t.prototype.setVV.call(this,e,i),this.vvColor=!i.isOutline&&!!(e&s.WGLVVFlag.COLOR)},e._createClass(i,[{key:"vvColor",get:function(){return 0!==this.bit(p)},set:function(t){this.setBit(p,t)}}]),i}(t),I=t=>function(t){function i(){return t.apply(this,arguments)||this}e._inheritsLoose(i,t);var n=i.prototype;return n.hasVV=function(){return t.prototype.hasVV.call(this)||this.vvOpacity},n.setVV=function(e,i){t.prototype.setVV.call(this,e,i),this.vvOpacity=!i.isOutline&&!!(e&s.WGLVVFlag.OPACITY)},e._createClass(i,[{key:"vvOpacity",get:function(){return 0!==this.bit(y)},set:function(t){this.setBit(y,t)}}]),i}(t);let O=function(t){function i(){return t.apply(this,arguments)||this}return e._inheritsLoose(i,t),i.load=function(t){const e=this.shared;return e.data=t,e},i.from=function(t){const e=this.load(0);return e.geometryType=s.WGLGeometryType.FILL,e.dotDensity="dot-density"===t.stride.fill,e.simple="simple"===t.stride.fill,e.outlinedFill=t.isOutlinedFill,e.dotDensity||e.setVV(t.vvFlags,t),e.data},i.prototype.getVariation=function(){return{...t.prototype.getVariation.call(this),dotDensity:this.dotDensity,outlinedFill:this.outlinedFill,simple:this.simple,vvColor:this.vvColor,vvOpacity:this.vvOpacity,vvSizeFieldStops:this.vvSizeFieldStops,vvSizeMinMaxValue:this.vvSizeMinMaxValue,vvSizeScaleStops:this.vvSizeScaleStops,vvSizeUnitValue:this.vvSizeUnitValue}},e._createClass(i,[{key:"dotDensity",get:function(){return!!this.bit(V)},set:function(t){this.setBit(V,t)}},{key:"simple",get:function(){return!!this.bit(m)},set:function(t){this.setBit(m,t)}},{key:"outlinedFill",get:function(){return!!this.bit(G)},set:function(t){this.setBit(G,t)}}]),i}(W(I(E(_))));O.shared=new O(0);let A=function(t){function i(){return t.apply(this,arguments)||this}return e._inheritsLoose(i,t),i.load=function(t){const e=this.shared;return e.data=t,e},i.from=function(t){const e=this.load(0);return e.geometryType=s.WGLGeometryType.MARKER,e.setVV(t.vvFlags,t),e.data},i.prototype.getVariation=function(){return{...t.prototype.getVariation.call(this),vvColor:this.vvColor,vvRotation:this.vvRotation,vvOpacity:this.vvOpacity,vvSizeFieldStops:this.vvSizeFieldStops,vvSizeMinMaxValue:this.vvSizeMinMaxValue,vvSizeScaleStops:this.vvSizeScaleStops,vvSizeUnitValue:this.vvSizeUnitValue}},i}(W(I(F(E(_)))));A.shared=new A(0);let U=function(t){function i(){return t.apply(this,arguments)||this}return e._inheritsLoose(i,t),i.load=function(t){const e=this.shared;return e.data=t,e},i.from=function(t){const e=this.load(0);return e.geometryType=s.WGLGeometryType.LINE,e.setVV(t.vvFlags,t),e.data},i.prototype.getVariation=function(){return{...t.prototype.getVariation.call(this),vvColor:this.vvColor,vvOpacity:this.vvOpacity,vvSizeFieldStops:this.vvSizeFieldStops,vvSizeMinMaxValue:this.vvSizeMinMaxValue,vvSizeScaleStops:this.vvSizeScaleStops,vvSizeUnitValue:this.vvSizeUnitValue}},i}(W(I(E(_))));U.shared=new U(0);let B=function(t){function i(){return t.apply(this,arguments)||this}return e._inheritsLoose(i,t),i.load=function(t){const e=this.shared;return e.data=t,e},i.from=function(t){const e=this.load(0);return e.geometryType=s.WGLGeometryType.TEXT,e.setVV(t.vvFlags,t),e.data},i.prototype.getVariation=function(){return{...t.prototype.getVariation.call(this),vvColor:this.vvColor,vvOpacity:this.vvOpacity,vvRotation:this.vvRotation,vvSizeFieldStops:this.vvSizeFieldStops,vvSizeMinMaxValue:this.vvSizeMinMaxValue,vvSizeScaleStops:this.vvSizeScaleStops,vvSizeUnitValue:this.vvSizeUnitValue}},i}(W(I(F(E(_)))));B.shared=new B(0);let b=function(t){function i(){return t.apply(this,arguments)||this}return e._inheritsLoose(i,t),i.load=function(t){const e=this.shared;return e.data=t,e},i.from=function(t){const e=this.load(0);return e.geometryType=s.WGLGeometryType.LABEL,e.setVV(t.vvFlags,t),e.mapAligned=n.isMapAligned(t.placement),e.data},i.prototype.getVariation=function(){return{...t.prototype.getVariation.call(this),vvSizeFieldStops:this.vvSizeFieldStops,vvSizeMinMaxValue:this.vvSizeMinMaxValue,vvSizeScaleStops:this.vvSizeScaleStops,vvSizeUnitValue:this.vvSizeUnitValue}},i}(E(_));b.shared=new b(0),t.FillMaterialKey=O,t.LabelMaterialKey=b,t.LineMaterialKey=U,t.MarkerMaterialKey=A,t.MaterialKeyBase=_,t.TextMaterialKey=B,t.createMaterialKey=z,t.getSizeFlagsMask=o,t.hydrateMaterialKey=M,Object.defineProperties(t,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})}));
