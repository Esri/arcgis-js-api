/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.25/esri/copyright.txt for details.
*/
define(["exports","../../../../../chunks/_rollupPluginBabelHelpers","../../../../../core/Error","../alignmentUtils","../enums"],(function(t,e,i,o,n){"use strict";function s(t,e,i){const o=n.WGLVVFlag.SIZE_FIELD_STOPS|n.WGLVVFlag.SIZE_MINMAX_VALUE|n.WGLVVFlag.SIZE_SCALE_STOPS|n.WGLVVFlag.SIZE_UNIT_VALUE,s=(e&(n.WGLVVTarget.FIELD_TARGETS_OUTLINE|n.WGLVVTarget.MINMAX_TARGETS_OUTLINE|n.WGLVVTarget.SCALE_TARGETS_OUTLINE|n.WGLVVTarget.UNIT_TARGETS_OUTLINE))>>>4;return t===n.WGLGeometryType.LINE&&i.isOutline||t===n.WGLGeometryType.FILL&&b(i.symbologyType)?o&s:o&~s}const r=0,a=8,y=7,l=8,u=11,p=11,v=12,c=13,h=14,S=15,V=16,f=17,L=18,T=19,g=20,m=21,d=26,G=Object.keys(n.WGLSymbologyType).filter((t=>"number"==typeof n.WGLSymbologyType[t])).reduce(((t,e)=>({...t,[e]:n.WGLSymbologyType[e]})),{});function _(t){return t===n.WGLSymbologyType.SIMPLE||t===n.WGLSymbologyType.OUTLINE_FILL_SIMPLE}function b(t){return t===n.WGLSymbologyType.OUTLINE_FILL||t===n.WGLSymbologyType.OUTLINE_FILL_SIMPLE}function E(t){return _(t.symbologyType)}function M(t){return b(t.symbologyType)}function z(t,e){switch(t){case n.WGLGeometryType.FILL:return B.from(e);case n.WGLGeometryType.LINE:return C.from(e);case n.WGLGeometryType.MARKER:return k.from(e);case n.WGLGeometryType.TEXT:return R.from(e);case n.WGLGeometryType.LABEL:return w.from(e);default:throw new Error(`Unable to createMaterialKey for unknown geometryType ${t}`)}}function W(t){switch(F.load(t).geometryType){case n.WGLGeometryType.MARKER:return new k(t);case n.WGLGeometryType.FILL:return new B(t);case n.WGLGeometryType.LINE:return new C(t);case n.WGLGeometryType.TEXT:return new R(t);case n.WGLGeometryType.LABEL:return new w(t)}}let F=function(){function t(t){this._data=0,this._data=t}t.load=function(t){const e=this.shared;return e.data=t,e};var o=t.prototype;return o.setBit=function(t,e){const i=1<<t;e?this._data|=i:this._data&=~i},o.bit=function(t){return(this._data&1<<t)>>t},o.setBits=function(t,e,i){for(let o=e,n=0;o<i;o++,n++)this.setBit(o,0!=(t&1<<n))},o.bits=function(t,e){let i=0;for(let o=t,n=0;o<e;o++,n++)i|=this.bit(o)<<n;return i},o.hasVV=function(){return!1},o.setVV=function(t,e){},o.getVariation=function(){return{mapAligned:this.mapAligned,pattern:this.pattern,sdf:this.sdf,symbologyType:{value:n.WGLSymbologyType[this.symbologyType],options:G,namespace:"SYMBOLOGY_TYPE"}}},o.getVariationHash=function(){return this._data&~(y&this.textureBinding)},e._createClass(t,[{key:"data",get:function(){return this._data},set:function(t){this._data=t}},{key:"geometryType",get:function(){return this.bits(l,u)},set:function(t){this.setBits(t,l,u)}},{key:"mapAligned",get:function(){return!!this.bit(g)},set:function(t){this.setBit(g,t)}},{key:"sdf",get:function(){return!!this.bit(p)},set:function(t){this.setBit(p,t)}},{key:"pattern",get:function(){return!!this.bit(v)},set:function(t){this.setBit(v,t)}},{key:"textureBinding",get:function(){return this.bits(r,a)},set:function(t){this.setBits(t,r,a)}},{key:"symbologyType",get:function(){return this.bits(m,d)},set:function(t){this.setBits(t,m,d)}},{key:"geometryTypeString",get:function(){switch(this.geometryType){case n.WGLGeometryType.FILL:return"fill";case n.WGLGeometryType.MARKER:return"marker";case n.WGLGeometryType.LINE:return"line";case n.WGLGeometryType.TEXT:return"text";case n.WGLGeometryType.LABEL:return"label";default:throw new i(`Unable to handle unknown geometryType: ${this.geometryType}`)}}}]),t}();F.shared=new F(0);const I=t=>function(t){function i(){return t.apply(this,arguments)||this}e._inheritsLoose(i,t);var o=i.prototype;return o.hasVV=function(){return t.prototype.hasVV.call(this)||this.vvSizeMinMaxValue||this.vvSizeScaleStops||this.vvSizeFieldStops||this.vvSizeUnitValue},o.setVV=function(e,i){t.prototype.setVV.call(this,e,i);const o=s(this.geometryType,e,i)&e;this.vvSizeMinMaxValue=!!(o&n.WGLVVFlag.SIZE_MINMAX_VALUE),this.vvSizeFieldStops=!!(o&n.WGLVVFlag.SIZE_FIELD_STOPS),this.vvSizeUnitValue=!!(o&n.WGLVVFlag.SIZE_UNIT_VALUE),this.vvSizeScaleStops=!!(o&n.WGLVVFlag.SIZE_SCALE_STOPS)},e._createClass(i,[{key:"vvSizeMinMaxValue",get:function(){return 0!==this.bit(V)},set:function(t){this.setBit(V,t)}},{key:"vvSizeScaleStops",get:function(){return 0!==this.bit(f)},set:function(t){this.setBit(f,t)}},{key:"vvSizeFieldStops",get:function(){return 0!==this.bit(L)},set:function(t){this.setBit(L,t)}},{key:"vvSizeUnitValue",get:function(){return 0!==this.bit(T)},set:function(t){this.setBit(T,t)}}]),i}(t),O=t=>function(t){function i(){return t.apply(this,arguments)||this}e._inheritsLoose(i,t);var o=i.prototype;return o.hasVV=function(){return t.prototype.hasVV.call(this)||this.vvRotation},o.setVV=function(e,i){t.prototype.setVV.call(this,e,i),this.vvRotation=!i.isOutline&&!!(e&n.WGLVVFlag.ROTATION)},e._createClass(i,[{key:"vvRotation",get:function(){return 0!==this.bit(S)},set:function(t){this.setBit(S,t)}}]),i}(t),A=t=>function(t){function i(){return t.apply(this,arguments)||this}e._inheritsLoose(i,t);var o=i.prototype;return o.hasVV=function(){return t.prototype.hasVV.call(this)||this.vvColor},o.setVV=function(e,i){t.prototype.setVV.call(this,e,i),this.vvColor=!i.isOutline&&!!(e&n.WGLVVFlag.COLOR)},e._createClass(i,[{key:"vvColor",get:function(){return 0!==this.bit(c)},set:function(t){this.setBit(c,t)}}]),i}(t),U=t=>function(t){function i(){return t.apply(this,arguments)||this}e._inheritsLoose(i,t);var o=i.prototype;return o.hasVV=function(){return t.prototype.hasVV.call(this)||this.vvOpacity},o.setVV=function(e,i){t.prototype.setVV.call(this,e,i),this.vvOpacity=!i.isOutline&&!!(e&n.WGLVVFlag.OPACITY)},e._createClass(i,[{key:"vvOpacity",get:function(){return 0!==this.bit(h)},set:function(t){this.setBit(h,t)}}]),i}(t);let B=function(t){function i(){return t.apply(this,arguments)||this}return e._inheritsLoose(i,t),i.load=function(t){const e=this.shared;return e.data=t,e},i.from=function(t){const{symbologyType:e,vvFlags:i}=t,o=this.load(0);return o.geometryType=n.WGLGeometryType.FILL,o.symbologyType=e,e!==n.WGLSymbologyType.DOT_DENSITY&&o.setVV(i,t),o.data},i.prototype.getVariation=function(){return{...t.prototype.getVariation.call(this),vvColor:this.vvColor,vvOpacity:this.vvOpacity,vvSizeFieldStops:this.vvSizeFieldStops,vvSizeMinMaxValue:this.vvSizeMinMaxValue,vvSizeScaleStops:this.vvSizeScaleStops,vvSizeUnitValue:this.vvSizeUnitValue}},i}(A(U(I(F))));B.shared=new B(0);let k=function(t){function i(){return t.apply(this,arguments)||this}return e._inheritsLoose(i,t),i.load=function(t){const e=this.shared;return e.data=t,e},i.from=function(t){const{symbologyType:e,vvFlags:i}=t,o=this.load(0);return o.geometryType=n.WGLGeometryType.MARKER,o.symbologyType=e,e!==n.WGLSymbologyType.HEATMAP&&o.setVV(i,t),o.data},i.prototype.getVariation=function(){return{...t.prototype.getVariation.call(this),vvColor:this.vvColor,vvRotation:this.vvRotation,vvOpacity:this.vvOpacity,vvSizeFieldStops:this.vvSizeFieldStops,vvSizeMinMaxValue:this.vvSizeMinMaxValue,vvSizeScaleStops:this.vvSizeScaleStops,vvSizeUnitValue:this.vvSizeUnitValue}},i}(A(U(O(I(F)))));k.shared=new k(0);let C=function(t){function i(){return t.apply(this,arguments)||this}return e._inheritsLoose(i,t),i.load=function(t){const e=this.shared;return e.data=t,e},i.from=function(t){const e=this.load(0);return e.geometryType=n.WGLGeometryType.LINE,e.symbologyType=t.symbologyType,e.setVV(t.vvFlags,t),e.data},i.prototype.getVariation=function(){return{...t.prototype.getVariation.call(this),vvColor:this.vvColor,vvOpacity:this.vvOpacity,vvSizeFieldStops:this.vvSizeFieldStops,vvSizeMinMaxValue:this.vvSizeMinMaxValue,vvSizeScaleStops:this.vvSizeScaleStops,vvSizeUnitValue:this.vvSizeUnitValue}},i}(A(U(I(F))));C.shared=new C(0);let R=function(t){function i(){return t.apply(this,arguments)||this}return e._inheritsLoose(i,t),i.load=function(t){const e=this.shared;return e.data=t,e},i.from=function(t){const e=this.load(0);return e.geometryType=n.WGLGeometryType.TEXT,e.symbologyType=t.symbologyType,e.setVV(t.vvFlags,t),e.data},i.prototype.getVariation=function(){return{...t.prototype.getVariation.call(this),vvColor:this.vvColor,vvOpacity:this.vvOpacity,vvRotation:this.vvRotation,vvSizeFieldStops:this.vvSizeFieldStops,vvSizeMinMaxValue:this.vvSizeMinMaxValue,vvSizeScaleStops:this.vvSizeScaleStops,vvSizeUnitValue:this.vvSizeUnitValue}},i}(A(U(O(I(F)))));R.shared=new R(0);let w=function(t){function i(){return t.apply(this,arguments)||this}return e._inheritsLoose(i,t),i.load=function(t){const e=this.shared;return e.data=t,e},i.from=function(t){const e=this.load(0);return e.geometryType=n.WGLGeometryType.LABEL,e.symbologyType=t.symbologyType,e.setVV(t.vvFlags,t),e.mapAligned=o.isMapAligned(t.placement),e.data},i.prototype.getVariation=function(){return{...t.prototype.getVariation.call(this),vvSizeFieldStops:this.vvSizeFieldStops,vvSizeMinMaxValue:this.vvSizeMinMaxValue,vvSizeScaleStops:this.vvSizeScaleStops,vvSizeUnitValue:this.vvSizeUnitValue}},i}(I(F));w.shared=new w(0),t.FillMaterialKey=B,t.LabelMaterialKey=w,t.LineMaterialKey=C,t.MarkerMaterialKey=k,t.MaterialKeyBase=F,t.TextMaterialKey=R,t.createMaterialKey=z,t.hasOutlineFillSymbology=M,t.hasSimpleSymbology=E,t.hydrateMaterialKey=W,t.isOutlineFillSymbology=b,t.isSimpleSymbology=_,Object.defineProperties(t,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})}));
