/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.19/esri/copyright.txt for details.
*/
define(["exports","../../../../../chunks/_rollupPluginBabelHelpers","../../../../../core/maybe","../number","../enums","./WGLBrush"],(function(e,t,r,n,i,a){"use strict";let s=function(e){function a(){var t;return(t=e.apply(this,arguments)||this)._programOptions={id:!1},t}t._inheritsLoose(a,e);var s=a.prototype;return s.dispose=function(){},s.drawMany=function(e,t){const{context:a,displayLevel:s,requiredLevel:l,state:o,drawPhase:c,painter:u,styleLayerUID:f}=e,d=e.styleLayer,p=d.circleMaterial,y=u.vectorTilesMaterialManager,m=1.2,v=d.getPaintValue("circle-translate",s),_=d.getPaintValue("circle-translate-anchor",s),g=c===i.WGLDrawPhase.HITTEST,h=this._programOptions;h.id=g;const M=y.getMaterialProgram(a,p,h);a.bindProgram(M),M.setUniformMatrix3fv("u_displayMat3",1===_?o.displayMat3:o.displayViewMat3),M.setUniform2fv("u_circleTranslation",v),M.setUniform1f("u_depth",d.z),M.setUniform1f("u_antialiasingWidth",m);let L=-1;if(g){const e=n.u32to4Xu8(f+1);M.setUniform4fv("u_id",e)}for(const n of t){if(!n.layerData.has(f))continue;n.key.level!==L&&(L=n.key.level,p.setDataUniforms(M,s,d,L));const e=n.layerData.get(f);e.prepareForRendering(a);const t=e.circleVertexArrayObject;r.isNone(t)||(a.bindVAO(t),M.setUniformMatrix3fv("u_dvsMat3",n.transforms.dvs),l!==n.key.level?a.setStencilFunction(514,n.stencilRef,255):a.setStencilFunction(516,255,255),a.drawElements(4,e.circleIndexCount,5125,Uint32Array.BYTES_PER_ELEMENT*e.circleIndexStart),n.triangleCount+=e.circleIndexCount/3)}},a}(a);e.WGLBrushVTLCircle=s,Object.defineProperty(e,"__esModule",{value:!0})}));
