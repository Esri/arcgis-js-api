/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.20/esri/copyright.txt for details.
*/
define(["../../../../../chunks/_rollupPluginBabelHelpers","../../../../../core/maybe","../../../../../chunks/vec4f32","../Utils","./WGLBrush","../shaders/BackgroundPrograms","../../../../webgl/programUtils"],(function(t,e,r,o,s,n,i){"use strict";const a=()=>o.createProgramDescriptor("clip",{geometry:[{location:0,name:"a_pos",count:2,type:5122}]});return function(o){function s(){var t;return(t=o.apply(this,arguments)||this)._color=r.fromValues(0,1,0,1),t}t._inheritsLoose(s,o);var c=s.prototype;return c.dispose=function(){this._program&&this._program.dispose()},c.prepareState=function({context:t}){t.setStencilTestEnabled(!0),t.setBlendingEnabled(!1),t.setFaceCullingEnabled(!1),t.setColorMask(!1,!1,!1,!1),t.setStencilOp(7680,7680,7681),t.setStencilWriteMask(255),t.setStencilFunction(519,0,255)},c.draw=function(t,r){const{context:o,state:s}=t,c=a(),u=r.getVAO(o,s,c.attributes,c.bufferLayouts);e.isNone(u.indexBuffer)||(this._program||(this._program=i.createProgram(o,n.background)),o.useProgram(this._program),this._program.setUniform2fv("u_coord_range",[1,1]),this._program.setUniform4fv("u_color",this._color),this._program.setUniformMatrix3fv("u_dvsMat3",s.displayMat3),o.bindVAO(u),o.drawElements(4,u.indexBuffer.size,5125,0),o.bindVAO())},s}(s)}));
