/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.18/esri/copyright.txt for details.
*/
define(["../../../../../chunks/_rollupPluginBabelHelpers","../../../../webgl/programUtils","../../../../../chunks/vec4f32","./WGLBrush","../Utils","../shaders/BackgroundPrograms"],(function(t,e,r,o,s,n){"use strict";return function(o){function i(){var t;return(t=o.apply(this,arguments)||this)._color=r.fromValues(0,1,0,1),t}t._inheritsLoose(i,o);var a=i.prototype;return a.dispose=function(){this._program&&this._program.dispose()},a.prepareState=function({context:t}){t.setStencilTestEnabled(!0),t.setBlendingEnabled(!1),t.setFaceCullingEnabled(!1),t.setColorMask(!1,!1,!1,!1),t.setStencilOp(7680,7680,7681),t.setStencilWriteMask(255),t.setStencilFunction(519,0,255)},a.draw=function(t,r){const{context:o,state:i}=t;this._program||(this._program=e.createProgram(o,n.background));const a=this._program,c=s.createProgramDescriptor("clip",{geometry:[{location:0,name:"a_pos",count:2,type:5122}]}),l=r.getVAO(o,i,c.attributes,c.bufferLayouts);o.bindProgram(this._program),a.setUniform2fv("u_coord_range",[1,1]),a.setUniform4fv("u_color",this._color),a.setUniformMatrix3fv("u_dvsMat3",i.displayMat3),o.bindVAO(l),o.drawElements(4,l.indexBuffer.size,5125,0),o.bindVAO()},i}(o)}));
