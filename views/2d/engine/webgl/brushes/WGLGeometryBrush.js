/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.18/esri/copyright.txt for details.
*/
define(["../../../../../chunks/_rollupPluginBabelHelpers","../../../../../core/has","../../../../../core/mathUtils","../definitions","../../../../../chunks/builtins","../../../../webgl/VertexArrayObject","../../../../webgl/FramebufferObject","../../../../webgl/RenderingContext","./WGLBrush"],(function(t,e,i,n,r,s,a,o,u){"use strict";return function(e){function i(){return e.apply(this,arguments)||this}t._inheritsLoose(i,e);var r=i.prototype;return r.prepareState=function({context:t},e,i){const n=i&&-1!==i.indexOf("id");t.setBlendingEnabled(!n),t.setBlendFunctionSeparate(1,771,1,771),t.setColorMask(!0,!0,!0,!0),t.setStencilWriteMask(0),t.setStencilTestEnabled(!0),t.setStencilFunction(514,e.stencilRef,255)},r.draw=function(t,e,i){if(e.commitChanges(t),!e.visible)return;const n=this.getGeometryType(),r=e.getDisplayList(),s=e.getGeometry(n);s&&r&&(t.timeline.begin(this.name),t.attributeView.bindTextures(t.context),r.byType(n,(n=>{this.drawGeometry(t,e,n,s,i)})),t.timeline.end(this.name))},r._getVAO=function(t,e,i,n){return n.vao||(n.vao=new s(t,i,e,n.vertexBufferMap,n.indexBuffer)),n.vao},r._setSharedUniforms=function(t,e,i){t.setUniform1f("u_pixelRatio",e.pixelRatio),t.setUniformMatrix3fv("u_dvsMat3",i.transforms.dvs),t.setUniformMatrix3fv("u_displayViewMat3",e.state.displayViewMat3),t.setUniform1i("u_attributeTextureSize",e.attributeView.size),t.setUniform1i("u_attributeData0",n.TEXTURE_BINDING_ATTRIBUTE_DATA_0),t.setUniform1i("u_attributeData1",n.TEXTURE_BINDING_ATTRIBUTE_DATA_1),t.setUniform1i("u_attributeData2",n.TEXTURE_BINDING_ATTRIBUTE_DATA_2),t.setUniform1i("u_attributeData3",n.TEXTURE_BINDING_ATTRIBUTE_DATA_3)},i}(u)}));
