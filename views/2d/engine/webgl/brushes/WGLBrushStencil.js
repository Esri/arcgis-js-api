/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.18/esri/copyright.txt for details.
*/
define(["../../../../../chunks/_rollupPluginBabelHelpers","../../../../../core/has","../../../../../core/mathUtils","../../../../../chunks/builtins","../../../../webgl/BufferObject","../../../../webgl/VertexArrayObject","../../../../webgl/FramebufferObject","../../../../webgl/programUtils","../../../../webgl/RenderingContext","../../../../../chunks/vec4f32","./WGLBrush","../shaders/BackgroundPrograms"],(function(e,t,r,i,s,o,n,a,l,d,c,u){"use strict";return function(t){function r(){var e;return(e=t.apply(this,arguments)||this)._color=d.fromValues(1,0,0,1),e._initialized=!1,e}e._inheritsLoose(r,t);var i=r.prototype;return i.dispose=function(){this._solidProgram&&(this._solidProgram.dispose(),this._solidProgram=null),this._solidVertexArrayObject&&(this._solidVertexArrayObject.dispose(),this._solidVertexArrayObject=null)},i.prepareState=function({context:e},t){e.setDepthWriteEnabled(!1),e.setDepthTestEnabled(!1),e.setStencilTestEnabled(!0),e.setBlendingEnabled(!1),e.setColorMask(!1,!1,!1,!1),e.setStencilOp(7680,7680,7681),e.setStencilWriteMask(255),e.setStencilFunctionSeparate(1032,516,t.stencilRef,255)},i.draw=function(e,t){const{context:r}=e;this._initialized||this._initialize(r),r.bindVAO(this._solidVertexArrayObject),r.bindProgram(this._solidProgram),this._solidProgram.setUniformMatrix3fv("u_dvsMat3",t.transforms.dvs),this._solidProgram.setUniform2fv("u_coord_range",t.coordRange),this._solidProgram.setUniform1f("u_depth",0),this._solidProgram.setUniform4fv("u_color",this._color),r.drawArrays(5,0,4),r.bindVAO()},i._initialize=function(e){if(this._initialized)return!0;const t=a.createProgram(e,u.background);if(!t)return!1;const r=new Int8Array([0,0,1,0,0,1,1,1]),i=s.createVertex(e,35044,r),n=new o(e,u.background.attributes,{geometry:[{name:"a_pos",count:2,type:5120,offset:0,stride:2,normalized:!1,divisor:0}]},{geometry:i});return this._solidProgram=t,this._solidVertexArrayObject=n,this._initialized=!0,!0},r}(c)}));
