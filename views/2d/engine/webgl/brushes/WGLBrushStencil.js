/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
define(["../../../../../chunks/_rollupPluginBabelHelpers","../../../../../chunks/vec4f32","../../../../webgl/BufferObject","../../../../webgl/FramebufferObject","../../../../../core/has","../../../../webgl/checkWebGLError","../../../../webgl/enums","../../../../../chunks/builtins","../../../../webgl/programUtils","../../../../webgl/Texture","../../../../webgl/VertexArrayObject","./WGLBrush","../shaders/BackgroundPrograms"],(function(e,t,r,i,s,o,n,a,l,c,d,u,h){"use strict";let g=function(i){function s(){var e;return(e=i.apply(this,arguments)||this)._color=t.fromValues(1,0,0,1),e._initialized=!1,e}e._inheritsLoose(s,i);var o=s.prototype;return o.dispose=function(){this._solidProgram&&(this._solidProgram.dispose(),this._solidProgram=null),this._solidVertexArrayObject&&(this._solidVertexArrayObject.dispose(),this._solidVertexArrayObject=null)},o.prepareState=function({context:e},t){e.setDepthWriteEnabled(!1),e.setDepthTestEnabled(!1),e.setStencilTestEnabled(!0),e.setBlendingEnabled(!1),e.setColorMask(!1,!1,!1,!1),e.setStencilOp(7680,7680,7681),e.setStencilWriteMask(255),e.setStencilFunctionSeparate(1032,516,t.stencilRef,255)},o.draw=function(e,t){const{context:r}=e;this._initialized||this._initialize(r),r.bindVAO(this._solidVertexArrayObject),r.useProgram(this._solidProgram),this._solidProgram.setUniformMatrix3fv("u_dvsMat3",t.transforms.dvs),this._solidProgram.setUniform2fv("u_coord_range",[t.rangeX,t.rangeY]),this._solidProgram.setUniform1f("u_depth",0),this._solidProgram.setUniform4fv("u_color",this._color),r.drawArrays(5,0,4),r.bindVAO()},o._initialize=function(e){if(this._initialized)return!0;const t=l.createProgram(e,h.background);if(!t)return!1;const i={geometry:[{name:"a_pos",count:2,type:5120,offset:0,stride:2,normalized:!1,divisor:0}]},s=new Int8Array([0,0,1,0,0,1,1,1]),o=r.createVertex(e,35044,s),n=new d(e,h.background.attributes,i,{geometry:o});return this._solidProgram=t,this._solidVertexArrayObject=n,this._initialized=!0,!0},s}(u);return g}));
