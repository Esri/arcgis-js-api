/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.19/esri/copyright.txt for details.
*/
define(["../../../../../chunks/_rollupPluginBabelHelpers","../../../../../core/has","../../../../../core/mathUtils","../../../../../chunks/vec4f32","../../../../../chunks/builtins","../../../../webgl/BufferObject","../../../../webgl/VertexArrayObject","../../../../webgl/FramebufferObject","../../../../webgl/programUtils","./WGLBrush","../shaders/BackgroundPrograms"],(function(t,e,r,i,s,o,n,a,l,c,d){"use strict";return function(e){function r(){var t;return(t=e.apply(this,arguments)||this)._color=i.fromValues(1,0,0,1),t._initialized=!1,t}t._inheritsLoose(r,e);var s=r.prototype;return s.dispose=function(){this._solidProgram&&(this._solidProgram.dispose(),this._solidProgram=null),this._solidVertexArrayObject&&(this._solidVertexArrayObject.dispose(),this._solidVertexArrayObject=null)},s.prepareState=function({context:t},e){t.setDepthWriteEnabled(!1),t.setDepthTestEnabled(!1),t.setStencilTestEnabled(!0),t.setBlendingEnabled(!1),t.setColorMask(!1,!1,!1,!1),t.setStencilOp(7680,7680,7681),t.setStencilWriteMask(255),t.setStencilFunctionSeparate(1032,516,e.stencilRef,255)},s.draw=function(t,e){const{context:r}=t;this._initialized||this._initialize(r),r.bindVAO(this._solidVertexArrayObject),r.bindProgram(this._solidProgram),this._solidProgram.setUniformMatrix3fv("u_dvsMat3",e.transforms.dvs),this._solidProgram.setUniform2fv("u_coord_range",e.coordRange),this._solidProgram.setUniform1f("u_depth",0),this._solidProgram.setUniform4fv("u_color",this._color),r.drawArrays(5,0,4),r.bindVAO()},s._initialize=function(t){if(this._initialized)return!0;const e=l.createProgram(t,d.background);if(!e)return!1;const r={geometry:[{name:"a_pos",count:2,type:5120,offset:0,stride:2,normalized:!1,divisor:0}]},i=new Int8Array([0,0,1,0,0,1,1,1]),s=o.createVertex(t,35044,i),a=new n(t,d.background.attributes,r,{geometry:s});return this._solidProgram=e,this._solidVertexArrayObject=a,this._initialized=!0,!0},r}(c)}));
