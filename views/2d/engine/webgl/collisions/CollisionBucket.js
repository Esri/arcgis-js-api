/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.18/esri/copyright.txt for details.
*/
define(["../../../../../chunks/_rollupPluginBabelHelpers","../../../tiling/TileKey","../../../tiling/PagedTileQueue","../../../tiling/TileInfoView","../../../tiling/TileQueue","../../../tiling/TileStrategy","./CollisionBucketEntry"],(function(e,t,i,n,s,h,r){"use strict";return function(){function i(e,t){this.neighbors=new Array(9),this._tiles=new Array(t);for(let e=0;e<t;e++)this._tiles[e]=new r;this.key=e}var n=i.prototype;return n.getTile=function(e){return this._tiles[e]},n.getReference=function(e){const t=this._tiles[e];return t&&t.reference},n.onRegisterLayer=function(e){this.invalidateRange(e),this._add(e)},n.onUnregisterLayer=function(e){this.invalidateRange(e),this._remove(e)},n.onLabelsRendered=function(){},n.invalidateRange=function(e){for(let t=e;t<this._tiles.length;t++)this._tiles[t].dirty=!0},n.add=function(e){this._add(e)},n.remove=function(e){this._remove(e)},n.canDelete=function(){return 0===this._tiles.length},n.ready=function(){for(const e of this._tiles)e.dirty=!1},n.computeNeighbors=function(e){this.neighbors[0]=this._getNeighbor(e,-1,-1),this.neighbors[1]=this._getNeighbor(e,0,-1),this.neighbors[2]=this._getNeighbor(e,1,-1),this.neighbors[3]=this._getNeighbor(e,-1,0),this.neighbors[4]=this,this.neighbors[5]=this._getNeighbor(e,1,0),this.neighbors[6]=this._getNeighbor(e,-1,1),this.neighbors[7]=this._getNeighbor(e,0,1),this.neighbors[8]=this._getNeighbor(e,1,1)},n.reset=function(e,t,i){const n=this._tiles[i.index];n&&n.reset(e,t,i)},n._add=function(e){const t=[];if(e>=this._tiles.length)this._tiles.push(new r);else{for(let i=0;i<this._tiles.length;i++)i===e&&t.push(new r),t.push(this._tiles[i]);this._tiles=t}},n._remove=function(e){const t=[];for(let i=0;i<this._tiles.length;i++)i!==e&&t.push(this._tiles[i]);this._tiles=t},n._getNeighbor=function(e,i,n){const s=this.key,h=s.col+i,r=s.row+n,o=s.level,l=s.world,g=t.getId(o,r,h,l);return e.has(g)?e.get(g):null},e._createClass(i,[{key:"isDirty",get:function(){for(const e of this._tiles)if(e.dirty)return!0;return!1}},{key:"size",get:function(){return this._tiles.length}}]),i}()}));
