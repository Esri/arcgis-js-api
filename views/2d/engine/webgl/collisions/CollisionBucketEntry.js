/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.18/esri/copyright.txt for details.
*/
define(["../../../../../chunks/_rollupPluginBabelHelpers","../../../../../chunks/vec2"],(function(e,t){"use strict";return function(){function r(){this._reference=null}return r.prototype.reset=function(e,r,n){const{state:s}=e,i=n.layerView.tileRenderer,c=this.reference;if(!c||!c.hasData)return!1;r&&(c.isDirty=!0);const o=c.transforms.labelMat2d,f=o[4],a=o[5];for(const e of c.displayObjects){const r=i.featuresView.attributeView,u=n.hasVV()?r.getVVSize(e.id):0;for(const r of e.metrics){n.hasVV()&&r.computeVVOffset(u,n.vvEval);const e=r.bounds.center,i=r.bounds.centerT;c.isDirty&&(r.minZoom=-1);const h=t.copy(i,r.anchor);if(s.rotation?t.transformMat2d(h,h,o):(i[0]=h[0]+f,i[1]=h[1]+a),t.add(i,h,e),i[0]+=r.offsetX,i[1]+=r.offsetY,r.boxes)for(const e of r.boxes){const n=e.center,i=r.anchor,c=e.centerT;t.add(c,i,n),s.rotation?t.transformMat2d(c,c,o):(c[0]=c[0]+f,c[1]=c[1]+a)}}}return!0},e._createClass(r,[{key:"dirty",get:function(){return this.reference&&this.reference.isDirty},set:function(e){this.reference&&this.reference.hasData&&(e||this.reference.isDirty)&&(this.reference.isDirty=e)}},{key:"index",get:function(){return this._reference&&this._reference.labelIndex}},{key:"reference",get:function(){return this._reference},set:function(e){this._reference=e}}]),r}()}));
