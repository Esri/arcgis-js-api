/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.19/esri/copyright.txt for details.
*/
define(["exports","../../../../../chunks/_rollupPluginBabelHelpers","../../../../../core/maybe"],(function(t,e,n){"use strict";const s=6,o=4294967296;let r=function(){function t(t){this._head=t,this._cursor=t}t.from=function(e){return new t(i.from(new Float32Array(e)))};var s=t.prototype;return s.computedMinZoom=function(){return this._cursor.computedMinZoom()},s.setComputedMinZoom=function(t){return this._cursor.setComputedMinZoom(t)},s.boundsComputedAnchorX=function(t){return this._cursor.boundsComputedAnchorX(t)},s.boundsComputedAnchorY=function(t){return this._cursor.boundsComputedAnchorY(t)},s.setBoundsComputedAnchorX=function(t,e){return this._cursor.setBoundsComputedAnchorX(t,e)},s.setBoundsComputedAnchorY=function(t,e){return this._cursor.setBoundsComputedAnchorY(t,e)},s.boundsCenterX=function(t){return this._cursor.boundsCenterX(t)},s.boundsCenterY=function(t){return this._cursor.boundsCenterY(t)},s.boundsWidth=function(t){return this._cursor.boundsWidth(t)},s.boundsHeight=function(t){return this._cursor.boundsHeight(t)},s.link=function(t){if(n.isSome(t._head))return this._cursor.link(t._head)},s.getCursor=function(){return this.copy()},s.copy=function(){var e;const n=new t(null==(e=this._head)?void 0:e.copy());if(!n._head)return n;let s=n._head,o=n._head._link;for(;o;)s._link=o.copy(),s=o,o=s._link;return n},s.peekId=function(){var t;return null!=(t=this._cursor.peekId())?t:this._cursor._link.peekId()},s.nextId=function(){const t=this.id;for(;t===this.id;)if(!this.next())return!1;return!0},s.save=function(){this._savedCursor=this._cursor,this._savedOffset=this._cursor._offset},s.restore=function(){this._cursor=this._savedCursor,this._cursor._offset=this._savedOffset},s.next=function(){if(!this._cursor)return!1;if(!this._cursor.next()){if(!this._cursor._link)return!1;this._cursor=this._cursor._link,this._cursor._offset=0}return!0},s.lookup=function(t){for(this._cursor=this._head;this._cursor&&!this._cursor.lookup(t);){if(!this._cursor._link)return!1;this._cursor=this._cursor._link}return!!this._cursor},s.delete=function(t){let e=this._head,s=null;for(;e;){if(e.delete(t))return e.isEmpty()&&n.isSome(s)&&(s._link=e._link),!0;s=e,e=e._link}return!1},e._createClass(t,[{key:"id",get:function(){return this._cursor.id}},{key:"baseZoom",get:function(){return this._cursor.baseZoom}},{key:"anchorX",get:function(){return this._cursor.anchorX}},{key:"anchorY",get:function(){return this._cursor.anchorY}},{key:"directionX",get:function(){return this._cursor.directionX}},{key:"directionY",get:function(){return this._cursor.directionY}},{key:"size",get:function(){return this._cursor.size}},{key:"hasVV",get:function(){return this._cursor.hasVV}},{key:"boundsCount",get:function(){return this._cursor.boundsCount}}]),t}(),i=function(){function t(t){this._offset=-1,this._link=null,this._count=0,this._deletedCount=0,this._offsets={instance:null},this._buffer=t}t.from=function(e){return new t(new Float32Array(e))};var r=t.prototype;return r.isEmpty=function(){return this._deletedCount===this.count},r.computedMinZoom=function(){return this._buffer[this._offset+8]},r.setComputedMinZoom=function(t){this._buffer[this._offset+8]=t},r.boundsComputedAnchorX=function(t){return this._buffer[this._offset+10+t*s+0]},r.boundsComputedAnchorY=function(t){return this._buffer[this._offset+10+t*s+1]},r.setBoundsComputedAnchorX=function(t,e){this._buffer[this._offset+10+t*s+0]=e},r.setBoundsComputedAnchorY=function(t,e){this._buffer[this._offset+10+t*s+1]=e},r.boundsCenterX=function(t){return this._buffer[this._offset+10+t*s+2]},r.boundsCenterY=function(t){return this._buffer[this._offset+10+t*s+3]},r.boundsWidth=function(t){return this._buffer[this._offset+10+t*s+4]},r.boundsHeight=function(t){return this._buffer[this._offset+10+t*s+5]},r.link=function(t){let e=this;for(;e._link;)e=e._link;e._link=t},r.getCursor=function(){return this.copy()},r.copy=function(){const e=new t(this._buffer);return e._link=this._link,e._offset=this._offset,e._deletedCount=this._deletedCount,e._offsets=this._offsets,e._count=this._count,e},r.peekId=function(){const t=this._offset+10+this.boundsCount*s+0;return t>=this._buffer.length?0:this._buffer[t]},r.next=function(){let t=0;for(;this._offset<this._buffer.length&&t++<100&&(-1===this._offset?this._offset=0:this._offset+=10+this.boundsCount*s,this.id===o););return this.id!==o&&this._offset<this._buffer.length},r.delete=function(t){const e=this._offset,n=this.lookup(t);if(n)for(this.id=4294967295,++this._deletedCount;this.next()&&this.id===t;)this.id=4294967295,++this._deletedCount;return this._offset=e,n},r.lookup=function(t){const e=this._offset;if(n.isNone(this._offsets.instance)){this._offsets.instance=new Map;const t=this.copy();t._offset=-1;let e=0;for(;t.next();)t.id!==e&&(this._offsets.instance.set(t.id,t._offset),e=t.id)}return!!this._offsets.instance.has(t)&&(this._offset=this._offsets.instance.get(t),this.id!==o||(this._offset=e,!1))},r._computeCount=function(){const t=this._offset;let e=0;for(this._offset=-1;this.next();)e++;return this._offset=t,e},e._createClass(t,[{key:"count",get:function(){return this._count||(this._count=this._computeCount()),this._count}},{key:"id",get:function(){return this._buffer[this._offset+0]},set:function(t){this._buffer[this._offset+0]=t}},{key:"baseZoom",get:function(){return this._buffer[this._offset+1]}},{key:"anchorX",get:function(){return this._buffer[this._offset+2]}},{key:"anchorY",get:function(){return this._buffer[this._offset+3]}},{key:"directionX",get:function(){return this._buffer[this._offset+4]}},{key:"directionY",get:function(){return this._buffer[this._offset+5]}},{key:"size",get:function(){return this._buffer[this._offset+6]}},{key:"hasVV",get:function(){return this._buffer[this._offset+7]}},{key:"boundsCount",get:function(){return this._buffer[this._offset+9]}}]),t}();t.MetricReader=r,t.MetricReaderNode=i,Object.defineProperty(t,"__esModule",{value:!0})}));
