/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.18/esri/copyright.txt for details.
*/
define(["exports","../../../../chunks/_rollupPluginBabelHelpers","./enums","./brushes/WGLBrushInfo","./brushes/WGLBrushStencil","./WGLContainer"],(function(e,t,r,s,n,i){"use strict";const l=(e,t)=>e.key.level-t.key.level!=0?e.key.level-t.key.level:e.key.row-t.key.row!=0?e.key.row-t.key.row:e.key.col-t.key.col;let o=function(e){function i(t){var r;return(r=e.call(this)||this)._tileInfoView=t,r}t._inheritsLoose(i,e);var o=i.prototype;return o.renderChildren=function(t){this.sortChildren(l),this.setStencilReference(),e.prototype.renderChildren.call(this,t)},o.createRenderParams=function(t){const{state:r}=t;return{...e.prototype.createRenderParams.call(this,t),requiredLevel:this._tileInfoView.getClosestInfoForScale(r.scale).level,displayLevel:this._tileInfoView.tileInfo.scaleToZoom(r.scale)}},o.prepareRenderPasses=function(t){const i=t.registerRenderPass({name:"stencil",brushes:[n],drawPhase:r.WGLDrawPhase.DEBUG|r.WGLDrawPhase.MAP|r.WGLDrawPhase.HIGHLIGHT,target:()=>this.getStencilTarget()}),l=t.registerRenderPass({name:"tileInfo",brushes:[s],drawPhase:r.WGLDrawPhase.DEBUG,target:()=>this.children,has:"esri-tiles-debug"});return[...e.prototype.prepareRenderPasses.call(this,t),i,l]},o.getStencilTarget=function(){return this.children},o.updateTransforms=function(e){for(const t of this.children){const r=this._tileInfoView.getTileResolution(t.key);t.setTransform(e,r)}},o.setStencilReference=function(){let e=1;for(const t of this.children)t.stencilRef=e++},i}(i);e.default=o,e.sortByLevel=l,Object.defineProperty(e,"__esModule",{value:!0})}));
