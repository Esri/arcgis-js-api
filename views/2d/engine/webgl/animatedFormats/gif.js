/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.26/esri/copyright.txt for details.
*/
define(["exports","../../../../../chunks/_rollupPluginBabelHelpers","../../../../../core/time","../../../../../geometry/support/meshUtils/exporters/gltf/imageutils","../../../../../chunks/index4"],(function(e,t,i,n,s){"use strict";function a(e,t){return r.apply(this,arguments)}function r(){return(r=t._asyncToGenerator((function*(e,t){const a=s.parseGIF_1(e),r=s.decompressFrames_1(a,!0),{width:o,height:c}=a.lsd,u=document.createElement("canvas");u.width=o,u.height=c;const d=u.getContext("2d",{willReadFrequently:!0}),l=[],m=[];for(const s of r){m.push(i.Milliseconds(s.delay||100));const e=new ImageData(s.patch,s.dims.width,s.dims.height),t=n.imageTypeToCanvas(e),a=3===s.disposalType?d.getImageData(s.dims.left,s.dims.top,s.dims.width,s.dims.height):void 0;d.drawImage(t,s.dims.left,s.dims.top);const r=d.getImageData(0,0,o,c);l.push(r),1===s.disposalType||(2===s.disposalType?d.clearRect(s.dims.left,s.dims.top,s.dims.width,s.dims.height):3===s.disposalType&&d.putImageData(a,s.dims.left,s.dims.top))}return{frameDurations:m,getFrame:e=>l[e],width:o,height:c}}))).apply(this,arguments)}const o=[71,73,70];function c(e){const t=new Uint8Array(e);return!o.some(((e,i)=>e!==t[i]))}function u(e){if(!c(e))return!1;const t=new DataView(e),i=t.getUint8(10);let n=13+(128&i?3*2**(1+(7&i)):0),s=0,a=!1;for(;!a;){switch(t.getUint8(n++)){case 33:if(!r())return!1;break;case 44:o();break;case 59:a=!0;break;default:return!1}if(s>1)return!0}function r(){switch(t.getUint8(n++)){case 249:u();break;case 1:d();break;case 254:l();break;case 255:m();break;default:return!1}return!0}function o(){s++,n+=8;const e=t.getUint8(n++);n+=128&e?3*2**(1+(7&e)):0,n++,f()}function u(){n++,n+=4,f()}function d(){s++,n++,n+=12,f()}function l(){f()}function m(){n++,n+=8,n+=3,f()}function f(){let e;for(;e=t.getUint8(n++);)n+=e}return!1}e.isAnimatedGIF=u,e.isGIF=c,e.parseGif=a,Object.defineProperty(e,Symbol.toStringTag,{value:"Module"})}));
