/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.26/esri/copyright.txt for details.
*/
define(["exports","../../../../../chunks/_rollupPluginBabelHelpers","../../../../../chunks/index3","../../../../../core/promiseUtils","../../../../../core/time"],(function(e,t,o,n,r){"use strict";function i(e,t){return a.apply(this,arguments)}function a(){return(a=t._asyncToGenerator((function*(e,t){const i=o.parseApng3rdParty(e);if(i instanceof Error)throw i;yield i.createImages(),n.throwIfAborted(t);const{frames:a,width:s,height:p}=i,c=document.createElement("canvas");c.width=s,c.height=p;const l=c.getContext("2d",{willReadFrequently:!0}),u=[],d=[];for(const o of a){d.push(r.Milliseconds(o.delay||100));const e=o.imageElement;0===o.blendOp?l.globalCompositeOperation="copy":l.globalCompositeOperation="source-over";const t=2===o.disposeOp?l.getImageData(o.left,o.top,o.width,o.height):void 0;l.drawImage(e,o.left,o.top);const n=l.getImageData(0,0,s,p);u.push(n),0===o.disposeOp||(1===o.disposeOp?l.clearRect(o.left,o.top,o.width,o.height):2===o.disposeOp&&l.putImageData(t,o.left,o.top))}return{frameDurations:d,getFrame:e=>u[e],width:s,height:p}}))).apply(this,arguments)}const s=[137,80,78,71,13,10,26,10];function p(e){const t=new Uint8Array(e);return!s.some(((e,o)=>e!==t[o]))}function c(e){if(!p(e))return!1;const t=new DataView(e),o=new Uint8Array(e);let n,r=8;do{const e=t.getUint32(r);if(n=String.fromCharCode.apply(String,Array.prototype.slice.call(o.subarray(r+4,r+8))),"acTL"===n)return!0;r+=12+e}while("IEND"!==n&&r<o.length);return!1}e.isAnimatedPNG=c,e.isPNG=p,e.parseApng=i,Object.defineProperty(e,Symbol.toStringTag,{value:"Module"})}));
