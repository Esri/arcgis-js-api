/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.18/esri/copyright.txt for details.
*/
define(["exports","../../../core/screenUtils","../engine/webgl/definitions","../engine/webgl/alignmentUtils","../engine/webgl/mesh/templates/shapingUtils","../engine/webgl/util/BidiText"],(function(e,t,i,n,s,a){"use strict";e.getTextBounds=async function(e,o,l){const g=n.getXAnchorDirection("center"),r=n.getYAnchorDirection("middle"),c=o.textureManager.rasterizeItem(e.toJSON(),window.devicePixelRatio||1,null,l),[,h]=a.bidiText(e.text),d=(await c).glyphMosaicItems;return s.shapeGlyphs(d,h,{angle:e.angle||0,xOffset:t.pt2px(e.xoffset||0),yOffset:t.pt2px(e.yoffset||0),lineHeight:i.MAGIC_LABEL_LINE_HEIGHT*Math.max(.25,Math.min(e.lineHeight,4)),maxLineWidth:Math.max(32,Math.min(t.pt2px(e.lineWidth),512)),decoration:e.font.decoration,scale:Math.min(Math.round(t.pt2px(e.font.size)),127)/i.GLYPH_SIZE,hAlign:g,vAlign:r,isCIM:!1}).boundsT},Object.defineProperty(e,"__esModule",{value:!0})}));
