/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.26/esri/copyright.txt for details.
*/
define(["exports","../../../chunks/_rollupPluginBabelHelpers","../../../core/BidiText","../../../core/screenUtils","../engine/webgl/alignmentUtils","../engine/webgl/definitions","../engine/webgl/mesh/templates/shapingUtils"],(function(e,t,n,i,o,r,s){"use strict";function a(e,t,n){return l.apply(this,arguments)}function l(){return(l=t._asyncToGenerator((function*(e,t,a){const l=o.getXAnchorDirection("center"),c=o.getYAnchorDirection("middle"),u=t.textureManager.rasterizeItem(e.toJSON(),window.devicePixelRatio||1,void 0,a),[,d]=n.bidiText(e.text),p=(yield u).glyphMosaicItems;return s.shapeGlyphs(p??[],d,{angle:e.angle??0,xOffset:i.pt2px(e.xoffset??0),yOffset:i.pt2px(e.yoffset??0),lineHeight:r.MAGIC_LABEL_LINE_HEIGHT*Math.max(.25,e.lineHeight),maxLineWidth:Math.max(32,Math.min(i.pt2px(e.lineWidth),512)),decoration:e.font.decoration,scale:Math.min(Math.round(i.pt2px(e.font.size)),127)/r.GLYPH_SIZE,hAlign:l,vAlign:c,isCIM:!1,hasBackground:!!e.backgroundColor,borderLineSize:e.borderLineSize}).boundsT}))).apply(this,arguments)}let c=a;function u(e,t,n){return d.apply(this,arguments)}function d(){return(d=t._asyncToGenerator((function*(e,t,n){return c(e,t,n)}))).apply(this,arguments)}const p={stubGetTextBounds:e=>c=e,restoreGetTextBounds:()=>c=a};e.getTextBounds=u,e.test=p,Object.defineProperty(e,Symbol.toStringTag,{value:"Module"})}));
