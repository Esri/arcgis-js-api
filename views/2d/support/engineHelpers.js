/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.25/esri/copyright.txt for details.
*/
define(["exports","../../../chunks/_rollupPluginBabelHelpers","../../../core/BidiText","../../../core/screenUtils","../engine/webgl/alignmentUtils","../engine/webgl/definitions","../engine/webgl/mesh/templates/shapingUtils"],(function(e,t,n,i,o,s,r){"use strict";function l(e,t,n){return a.apply(this,arguments)}function a(){return(a=t._asyncToGenerator((function*(e,t,l){const a=o.getXAnchorDirection("center"),u=o.getYAnchorDirection("middle"),c=t.textureManager.rasterizeItem(e.toJSON(),window.devicePixelRatio||1,null,l),[,p]=n.bidiText(e.text),g=(yield c).glyphMosaicItems;return r.shapeGlyphs(g,p,{angle:e.angle??0,xOffset:i.pt2px(e.xoffset??0),yOffset:i.pt2px(e.yoffset??0),lineHeight:s.MAGIC_LABEL_LINE_HEIGHT*Math.max(.25,e.lineHeight),maxLineWidth:Math.max(32,Math.min(i.pt2px(e.lineWidth),512)),decoration:e.font.decoration,scale:Math.min(Math.round(i.pt2px(e.font.size)),127)/s.GLYPH_SIZE,hAlign:a,vAlign:u,isCIM:!1}).boundsT}))).apply(this,arguments)}let u=l;function c(e,t,n){return p.apply(this,arguments)}function p(){return(p=t._asyncToGenerator((function*(e,t,n){return u(e,t,n)}))).apply(this,arguments)}const g={stubGetTextBounds:e=>u=e,restoreGetTextBounds:()=>u=l};e.getTextBounds=c,e.test=g,Object.defineProperties(e,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})}));
