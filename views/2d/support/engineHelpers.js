/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
define(["exports","../../../chunks/_rollupPluginBabelHelpers","../../../core/BidiText","../../../core/screenUtils","../engine/webgl/alignmentUtils","../engine/webgl/definitions","../engine/webgl/mesh/templates/shapingUtils"],(function(e,t,n,i,l,o,s){"use strict";function a(e,t,n){return r.apply(this,arguments)}function r(){return(r=t._asyncToGenerator((function*(e,t,a){var r,c,h;const p=l.getXAnchorDirection("center"),u=l.getYAnchorDirection("middle"),g=t.textureManager.rasterizeItem(e.toJSON(),window.devicePixelRatio||1,null,a),[,d]=n.bidiText(e.text),f=(yield g).glyphMosaicItems;return s.shapeGlyphs(f,d,{angle:null!=(r=e.angle)?r:0,xOffset:i.pt2px(null!=(c=e.xoffset)?c:0),yOffset:i.pt2px(null!=(h=e.yoffset)?h:0),lineHeight:o.MAGIC_LABEL_LINE_HEIGHT*Math.max(.25,Math.min(e.lineHeight,4)),maxLineWidth:Math.max(32,Math.min(i.pt2px(e.lineWidth),512)),decoration:e.font.decoration,scale:Math.min(Math.round(i.pt2px(e.font.size)),127)/o.GLYPH_SIZE,hAlign:p,vAlign:u,isCIM:!1}).boundsT}))).apply(this,arguments)}e.getTextBounds=a,Object.defineProperty(e,"__esModule",{value:!0})}));
