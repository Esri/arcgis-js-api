/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.23/esri/copyright.txt for details.
*/
define(["exports","../../engine/webgl/enums","../../engine/webgl/materialKey/MaterialKey"],(function(e,t,r){"use strict";function a(e){if("line-marker"===e.type){var t;return{type:"line-marker",color:null==(t=e.color)?void 0:t.toJSON(),placement:e.placement,style:e.style}}return e.constructor.fromJSON(e.toJSON()).toJSON()}function l(e){return hydrateKey(e)}function n(e,t,r){if(!e)return null;switch(e.type){case"simple-fill":case"picture-fill":return s(e,t,r);case"simple-marker":case"picture-marker":return c(e,t,r);case"simple-line":return o(e,t,r);case"text":return u(e,t,r);case"label":return i(e,t,r);case"cim":return{type:"cim",rendererKey:t.vvFlags,data:e.data,maxVVSize:t.maxVVSize};case"CIMSymbolReference":return{type:"cim",rendererKey:t.vvFlags,data:e,maxVVSize:t.maxVVSize};case"web-style":return{...a(e),type:"web-style",hash:e.hash(),rendererKey:t.vvFlags,maxVVSize:t.maxVVSize};default:throw new Error(`symbol not supported ${e.type}`)}}function i(e,a,n){const i=e.toJSON(),s=r.createMaterialKey(t.WGLGeometryType.LABEL,{...a,placement:i.labelPlacement});return{materialKey:n?l(s):s,hash:e.hash(),...i,labelPlacement:i.labelPlacement}}function s(e,n,i){const s=n.supportsOutlineFills,o=r.createMaterialKey(t.WGLGeometryType.FILL,{...n,isOutlinedFill:s}),c=i?l(o):o,u=e.clone(),y=u.outline;n.supportsOutlineFills||(u.outline=null);const m={materialKey:c,hash:u.hash(),isOutlinedFill:!!n.supportsOutlineFills,...a(u)};if(n.supportsOutlineFills)return m;const h=[];if(h.push(m),y){const e=r.createMaterialKey(t.WGLGeometryType.LINE,{...n,isOutline:!0}),s={materialKey:i?l(e):e,hash:y.hash(),...a(y)};h.push(s)}return{type:"composite-symbol",layers:h,hash:h.reduce(((e,t)=>t.hash+e),"")}}function o(e,n,i){const s=r.createMaterialKey(t.WGLGeometryType.LINE,n),o=i?l(s):s,c=e.clone(),u=c.marker;c.marker=null;const y=[];if(y.push({materialKey:o,hash:c.hash(),...a(c)}),u){var m;const e=r.createMaterialKey(t.WGLGeometryType.MARKER,n),s=i?l(e):e;u.color=null!=(m=u.color)?m:c.color,y.push({materialKey:s,hash:u.hash(),lineWidth:c.width,...a(u)})}return{type:"composite-symbol",layers:y,hash:y.reduce(((e,t)=>t.hash+e),"")}}function c(e,n,i){const s=r.createMaterialKey(t.WGLGeometryType.MARKER,n),o=i?l(s):s,c=a(e);return{materialKey:o,hash:e.hash(),...c,angle:e.angle,maxVVSize:n.maxVVSize}}function u(e,n,i){const s=r.createMaterialKey(t.WGLGeometryType.TEXT,n),o=i?l(s):s,c=a(e);return{materialKey:o,hash:e.hash(),...c,angle:e.angle,maxVVSize:n.maxVVSize}}e.createSymbolSchema=n,Object.defineProperties(e,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})}));
