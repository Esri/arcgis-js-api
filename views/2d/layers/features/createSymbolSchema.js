/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.26/esri/copyright.txt for details.
*/
define(["exports","../../engine/webgl/enums","../../engine/webgl/materialKey/MaterialKey"],(function(e,t,a){"use strict";function r(e){if("line-marker"===e.type){return{type:"line-marker",color:e.color?.toJSON(),placement:e.placement,style:e.style}}return e.constructor.fromJSON(e.toJSON()).toJSON()}function l(e){return a.hydrateMaterialKey(e)}function n(e,t,a=!1){if(!e)return null;switch(e.type){case"simple-fill":case"picture-fill":return i(e,t,a);case"simple-marker":case"picture-marker":return s(e,t,a);case"simple-line":return y(e,t,a);case"text":return c(e,t,a);case"label":return o(e,t,a);case"cim":return{type:"cim",rendererKey:t.vvFlags,data:e.data,maxVVSize:t.maxVVSize};case"CIMSymbolReference":return{type:"cim",rendererKey:t.vvFlags,data:e,maxVVSize:t.maxVVSize};case"web-style":return{...r(e),type:"web-style",hash:e.hash(),rendererKey:t.vvFlags,maxVVSize:t.maxVVSize};default:throw new Error(`symbol not supported ${e.type}`)}}function o(e,r,n){const o=e.toJSON(),i=a.createMaterialKey(t.WGLGeometryType.LABEL,{...r,placement:o.labelPlacement});return{materialKey:n?l(i):i,hash:e.hash(),...o,labelPlacement:o.labelPlacement}}function i(e,n,o){const i=a.createMaterialKey(t.WGLGeometryType.FILL,n),y=o?l(i):i,s=e.clone(),c=s.outline,m=a.isOutlineFillSymbology(n.symbologyType);m||(s.outline=null);const h={materialKey:y,hash:s.hash(),...r(s)};if(m)return h;const u=[];if(u.push(h),c){const e=a.createMaterialKey(t.WGLGeometryType.LINE,{...n,isOutline:!0}),i={materialKey:o?l(e):e,hash:c.hash(),...r(c)};u.push(i)}return{type:"composite-symbol",layers:u,hash:u.reduce(((e,t)=>t.hash+e),"")}}function y(e,n,o){const i=a.isOutlineFillSymbology(n.symbologyType)?t.WGLSymbologyType.DEFAULT:n.symbologyType,y=a.createMaterialKey(t.WGLGeometryType.LINE,{...n,symbologyType:i}),s=o?l(y):y,c=e.clone(),m=c.marker;c.marker=null;const h=[];if(h.push({materialKey:s,hash:c.hash(),...r(c)}),m){const e=a.createMaterialKey(t.WGLGeometryType.MARKER,n),i=o?l(e):e;m.color=m.color??c.color,h.push({materialKey:i,hash:m.hash(),lineWidth:c.width,...r(m)})}return{type:"composite-symbol",layers:h,hash:h.reduce(((e,t)=>t.hash+e),"")}}function s(e,n,o){const i=a.createMaterialKey(t.WGLGeometryType.MARKER,n),y=o?l(i):i,s=r(e);return{materialKey:y,hash:e.hash(),...s,angle:e.angle,maxVVSize:n.maxVVSize}}function c(e,n,o){const i=a.createMaterialKey(t.WGLGeometryType.TEXT,n),y=o?l(i):i,s=r(e);return{materialKey:y,hash:e.hash(),...s,angle:e.angle,maxVVSize:n.maxVVSize}}e.createSymbolSchema=n,Object.defineProperty(e,Symbol.toStringTag,{value:"Module"})}));
