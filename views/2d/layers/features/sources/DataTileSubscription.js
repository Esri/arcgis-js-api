/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.19/esri/copyright.txt for details.
*/
define(["exports","../../../../../chunks/_rollupPluginBabelHelpers","../../../../../core/CircularArray","../support/UpdateToken"],(function(e,t,n,s){"use strict";let i=function(){function e(e){this.requests={done:new Array,stream:new n(10)},this._abortController=new AbortController,this.didSend=!1,this.tile=e}var i=e.prototype;return i.sentEnd=function(){return this.requests.done.some((e=>e.message.end))},i.clear=function(){this.requests.done=[]},i.applyUpdate=function(e){this.requests.done.forEach((t=>t.message.status.unset(e)))},i.invalidate=function(e){switch(e){case"fields":return void("none"===this._invalid&&(this._invalid="fields"));case"all":return void(this._invalid="all")}},i.done=function(){this._invalid="none"},i.add=function(e){var t;e.message.status=null!=(t=e.message.status)?t:s.UpdateToken.empty(),this.requests.done.push(e),e.message.end&&(this.resolved=!0)},i.abort=function(){this._abortController.abort()},t._createClass(e,[{key:"invalid",get:function(){return this._invalid}},{key:"signal",get:function(){return this._abortController.signal}},{key:"options",get:function(){return{signal:this._abortController.signal}}}]),e}();e.DataTileSubscription=i,Object.defineProperty(e,"__esModule",{value:!0})}));
