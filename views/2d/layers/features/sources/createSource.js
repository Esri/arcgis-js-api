/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.24/esri/copyright.txt for details.
*/
import{unwrapOr as e}from"../../../../../core/maybe.js";import{isHostedAgolService as r}from"../../../../../layers/support/arcgisLayerUrl.js";import{DrillDownFeatureSource as t}from"./DrillDownFeatureSource.js";import{GeoEventSource as o}from"./GeoEventSource.js";import{PagedFeatureSource as n}from"./PagedFeatureSource.js";import{SnapshotFeatureSource as s}from"./SnapshotFeatureSource.js";function a(e,r,a,u,i,p){const f=c(e,r,a,u,i,p);switch(f.type){case"feature":switch(f.origin){case"hosted":case"local":return new n(f);case"snapshot":return new s(f);case"unknown":return new t(f)}case"geoevent":return new o(f)}}function c(t,o,n,s,a,c){switch(t.type){case"snapshot":return{type:"feature",origin:"snapshot",featureCount:e(t.featureCount,0),serviceInfo:t,onMessage:s,outSR:o,tileInfoView:n,canAcceptRequest:a,store:c};case"stream":return{type:"geoevent",serviceInfo:t,onMessage:s,outSR:o,canAcceptRequest:a};case"memory":case"on-demand":return{type:"feature",serviceInfo:t,onMessage:s,outSR:o,origin:u(t.source),tileInfoView:n,canAcceptRequest:a}}function u(e){return Array.isArray(e)?"local":"path"in e&&r(e.path)?"hosted":"unknown"}}export{a as createSource};
