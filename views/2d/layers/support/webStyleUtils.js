/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.23/esri/copyright.txt for details.
*/
define(["exports","../../../../chunks/_rollupPluginBabelHelpers","../../../../core/devEnvironmentUtils","../../../../core/Error","../../../../core/promiseUtils","../../../../core/urlUtils","../../../../portal/Portal","../../../../chunks/persistableUrlUtils","../../../../symbols/support/styleUtils"],(function(e,t,r,n,l,o,s,i,a){"use strict";function u(e,t,r){return c.apply(this,arguments)}function c(){return(c=t._asyncToGenerator((function*(e,t,r){if(!e.name)return Promise.reject(new n("style-symbol-reference-name-missing","Missing name in style symbol reference"));if(e.styleName&&"Esri2DPointSymbolsStyle"===e.styleName)return m(e,r);try{return f(yield a.fetchStyle(e,t,r),e.name,t,r)}catch(o){return l.throwIfAborted(o),null}}))).apply(this,arguments)}function m(e,t){return y.apply(this,arguments)}function y(){return(y=t._asyncToGenerator((function*(e,t){const r=a.Style2DUrlTemplate.replace(/\{SymbolName\}/gi,e.name);try{const e=yield a.requestJSON(r,t);return a.makeCIMSymbolRef(e.data)}catch(n){return l.throwIfAborted(n),null}}))).apply(this,arguments)}function f(e,t,r,n){return p.apply(this,arguments)}function p(){return(p=t._asyncToGenerator((function*(e,t,u,c){const m=e.data,y={portal:u&&u.portal||s.getDefault(),url:o.urlToObject(e.baseUrl),origin:"portal-item"},f=m.items.find((e=>e.name===t));if(!f){throw new n("symbolstyleutils:symbol-name-not-found",`The symbol name '${t}' could not be found`,{symbolName:t})}let p=i.fromJSON(a.symbolUrlFromStyleItem(f,"cimRef"),y);r.isDevEnvironment()&&(p=r.adjustStaticAGOUrl(p));try{const e=yield a.requestJSON(p,c);return a.makeCIMSymbolRef(e.data)}catch(b){return l.throwIfAborted(b),null}}))).apply(this,arguments)}e.fetchCIMSymbolReference=u,Object.defineProperties(e,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})}));
