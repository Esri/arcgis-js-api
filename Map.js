/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.20/esri/copyright.txt for details.
*/
define(["./chunks/_rollupPluginBabelHelpers","./chunks/tslib.es6","./Basemap","./Ground","./core/Accessor","./core/CollectionFlattener","./core/Evented","./core/Logger","./core/accessorSupport/decorators/property","./core/has","./core/accessorSupport/decorators/cast","./core/accessorSupport/decorators/subclass","./layers/support/editableLayers","./support/basemapUtils","./support/groundUtils","./support/LayersMixin","./support/TablesMixin"],(function(e,r,t,a,s,o,n,l,i,p,c,u,d,y,b,h,_){"use strict";const g=l.getLogger("esri.Map");let L=function(r){function t(e){var t;return(t=r.call(this,e)||this).allLayers=new o({getCollections:()=>{var e,r,a;return[null==(e=t.basemap)?void 0:e.baseLayers,null==(r=t.ground)?void 0:r.layers,t.layers,null==(a=t.basemap)?void 0:a.referenceLayers]},getChildrenFunction:e=>"layers"in e?e.layers:null}),t.allTables=new o({getCollections:()=>[t.tables,t.layers],getChildrenFunction:e=>{const r=[];return"tables"in e&&r.push(e.tables),"layers"in e&&r.push(e.layers),r},itemFilterFunction:e=>{const r=e.parent;return r&&"tables"in r&&r.tables.includes(e)}}),t.basemap=null,t.editableLayers=new o({getCollections:()=>[t.allLayers],itemFilterFunction:d.isEditableLayer}),t.ground=new a,t._basemapCache=y.createCache(),t}e._inheritsLoose(t,r);var s=t.prototype;return s.destroy=function(){var e,r;this.allLayers.destroy(),this.allTables.destroy(),this.editableLayers.destroy(),null==(e=this.ground)||e.destroy(),null==(r=this.basemap)||r.destroy(),y.destroyCache(this._basemapCache),this._basemapCache=null},s.castBasemap=function(e){return y.ensureType(e,this._basemapCache)},s.castGround=function(e){const r=b.ensureType(e);return r||(g.error("Map.ground may not be set to null or undefined"),this._get("ground"))},s.findLayerById=function(e){return this.allLayers.find((r=>r.id===e))},s.findTableById=function(e){return this.allTables.find((r=>r.id===e))},t}(_.TablesMixin(h.LayersMixin(n.EventedMixin(s))));return r.__decorate([i.property({readOnly:!0,dependsOn:[]})],L.prototype,"allLayers",void 0),r.__decorate([i.property({readOnly:!0})],L.prototype,"allTables",void 0),r.__decorate([i.property({type:t})],L.prototype,"basemap",void 0),r.__decorate([c.cast("basemap")],L.prototype,"castBasemap",null),r.__decorate([i.property({readOnly:!0})],L.prototype,"editableLayers",void 0),r.__decorate([i.property({type:a,nonNullable:!0})],L.prototype,"ground",void 0),r.__decorate([c.cast("ground")],L.prototype,"castGround",null),L=r.__decorate([u.subclass("esri.Map")],L),L}));
