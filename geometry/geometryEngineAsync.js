// COPYRIGHT Â© 2020 Esri
//
// All rights reserved under the copyright laws of the United States
// and applicable international laws, treaties, and conventions.
//
// This material is licensed for use under the Esri Master License
// Agreement (MLA), and is bound by the terms of that agreement.
// You may redistribute and use this code without modification,
// provided you adhere to the terms of the MLA and include this
// copyright notice.
//
// See use restrictions at http://www.esri.com/legal/pdfs/mla_e204_e300/english
//
// For additional information, contact:
// Environmental Systems Research Institute, Inc.
// Attn: Contracts and Legal Services Department
// 380 New York Street
// Redlands, California, USA 92373
// USA
//
// email: contracts@esri.com
//
// See http://js.arcgis.com/4.17/esri/copyright.txt for details.

define(["require","exports","tslib","../geometry","../core/workers"],(function(e,n,t,r,i){"use strict";function o(e){var n;return Array.isArray(e)?null===(n=e[0])||void 0===n?void 0:n.spatialReference:null==e?void 0:e.spatialReference}function a(e){return e?Array.isArray(e)?e.map(a):e.toJSON?e.toJSON():e:e}function u(e){return Array.isArray(e)?e.map((function(e){return r.fromJSON(e)})):r.fromJSON(e)}var s;function c(){return t.__awaiter(this,void 0,void 0,(function(){return t.__generator(this,(function(e){return s||(s=i.open("geometryEngineWorker",{strategy:"distributed"})),[2,s]}))}))}function f(e,n){return t.__awaiter(this,void 0,void 0,(function(){return t.__generator(this,(function(t){switch(t.label){case 0:return[4,c()];case 1:return[2,t.sent().invoke("executeGEOperation",{operation:e,parameters:a(n)})]}}))}))}function l(e){return"xmin"in e?e.center:"x"in e?e:e.extent.center}Object.defineProperty(n,"__esModule",{value:!0}),n.geodesicLength=n.geodesicArea=n.planarLength=n.planarArea=n.geodesicDensify=n.densify=n.generalize=n.flipVertical=n.flipHorizontal=n.rotate=n.nearestVertices=n.nearestVertex=n.nearestCoordinate=n.geodesicBuffer=n.buffer=n.offset=n.union=n.intersect=n.symmetricDifference=n.difference=n.convexHull=n.simplify=n.isSimple=n.relate=n.overlaps=n.disjoint=n.within=n.touches=n.intersects=n.equals=n.distance=n.crosses=n.contains=n.cut=n.clip=n.extendedSpatialReferenceInfo=void 0,n.extendedSpatialReferenceInfo=function(e){return f("extendedSpatialReferenceInfo",[e])},n.clip=function(e,n){return t.__awaiter(this,void 0,void 0,(function(){return t.__generator(this,(function(t){switch(t.label){case 0:return[4,f("clip",[o(e),e,n])];case 1:return[2,u(t.sent())]}}))}))},n.cut=function(e,n){return t.__awaiter(this,void 0,void 0,(function(){return t.__generator(this,(function(t){switch(t.label){case 0:return[4,f("cut",[o(e),e,n])];case 1:return[2,u(t.sent())]}}))}))},n.contains=function(e,n){return f("contains",[o(e),e,n])},n.crosses=function(e,n){return f("crosses",[o(e),e,n])},n.distance=function(e,n,t){return f("distance",[o(e),e,n,t])},n.equals=function(e,n){return f("equals",[o(e),e,n])},n.intersects=function(e,n){return f("intersects",[o(e),e,n])},n.touches=function(e,n){return f("touches",[o(e),e,n])},n.within=function(e,n){return f("within",[o(e),e,n])},n.disjoint=function(e,n){return f("disjoint",[o(e),e,n])},n.overlaps=function(e,n){return f("overlaps",[o(e),e,n])},n.relate=function(e,n,t){return f("relate",[o(e),e,n,t])},n.isSimple=function(e){return f("isSimple",[o(e),e])},n.simplify=function(e){return t.__awaiter(this,void 0,void 0,(function(){return t.__generator(this,(function(n){switch(n.label){case 0:return[4,f("simplify",[o(e),e])];case 1:return[2,u(n.sent())]}}))}))},n.convexHull=function(e,n){return void 0===n&&(n=!1),t.__awaiter(this,void 0,void 0,(function(){return t.__generator(this,(function(t){switch(t.label){case 0:return[4,f("convexHull",[o(e),e,n])];case 1:return[2,u(t.sent())]}}))}))},n.difference=function(e,n){return t.__awaiter(this,void 0,void 0,(function(){return t.__generator(this,(function(t){switch(t.label){case 0:return[4,f("difference",[o(e),e,n])];case 1:return[2,u(t.sent())]}}))}))},n.symmetricDifference=function(e,n){return t.__awaiter(this,void 0,void 0,(function(){return t.__generator(this,(function(t){switch(t.label){case 0:return[4,f("symmetricDifference",[o(e),e,n])];case 1:return[2,u(t.sent())]}}))}))},n.intersect=function(e,n){return t.__awaiter(this,void 0,void 0,(function(){return t.__generator(this,(function(t){switch(t.label){case 0:return[4,f("intersect",[o(e),e,n])];case 1:return[2,u(t.sent())]}}))}))},n.union=function(e,n){return void 0===n&&(n=null),t.__awaiter(this,void 0,void 0,(function(){var r;return t.__generator(this,(function(t){switch(t.label){case 0:return[4,f("union",[o(r=function(e,n){var t;return Array.isArray(e)?t=e:((t=[]).push(e),null!=n&&t.push(n)),t}(e,n)),r])];case 1:return[2,u(t.sent())]}}))}))},n.offset=function(e,n,r,i,a,s){return t.__awaiter(this,void 0,void 0,(function(){return t.__generator(this,(function(t){switch(t.label){case 0:return[4,f("offset",[o(e),e,n,r,i,a,s])];case 1:return[2,u(t.sent())]}}))}))},n.buffer=function(e,n,r,i){return void 0===i&&(i=!1),t.__awaiter(this,void 0,void 0,(function(){return t.__generator(this,(function(t){switch(t.label){case 0:return[4,f("buffer",[o(e),e,n,r,i])];case 1:return[2,u(t.sent())]}}))}))},n.geodesicBuffer=function(e,n,r,i,a,s){return t.__awaiter(this,void 0,void 0,(function(){return t.__generator(this,(function(t){switch(t.label){case 0:return[4,f("geodesicBuffer",[o(e),e,n,r,i,a,s])];case 1:return[2,u(t.sent())]}}))}))},n.nearestCoordinate=function(e,n,i){return void 0===i&&(i=!0),t.__awaiter(this,void 0,void 0,(function(){var a;return t.__generator(this,(function(u){switch(u.label){case 0:return[4,f("nearestCoordinate",[o(e),e,n,i])];case 1:return a=u.sent(),[2,t.__assign(t.__assign({},a),{coordinate:r.Point.fromJSON(a.coordinate)})]}}))}))},n.nearestVertex=function(e,n){return t.__awaiter(this,void 0,void 0,(function(){var i;return t.__generator(this,(function(a){switch(a.label){case 0:return[4,f("nearestVertex",[o(e),e,n])];case 1:return i=a.sent(),[2,t.__assign(t.__assign({},i),{coordinate:r.Point.fromJSON(i.coordinate)})]}}))}))},n.nearestVertices=function(e,n,i,a){return t.__awaiter(this,void 0,void 0,(function(){return t.__generator(this,(function(u){switch(u.label){case 0:return[4,f("nearestVertices",[o(e),e,n,i,a])];case 1:return[2,u.sent().map((function(e){return t.__assign(t.__assign({},e),{coordinate:r.Point.fromJSON(e.coordinate)})}))]}}))}))},n.rotate=function(e,n,r){return t.__awaiter(this,void 0,void 0,(function(){var i,o,a,u;return t.__generator(this,(function(t){switch(t.label){case 0:if(null==e)throw new Error("Illegal Argument Exception");return i=e.spatialReference,r=null!=r?r:l(e),u=(a=e.constructor).fromJSON,[4,f("rotate",[i,e,n,r])];case 1:return(o=u.apply(a,[t.sent()])).spatialReference=i,[2,o]}}))}))},n.flipHorizontal=function(e,n){return t.__awaiter(this,void 0,void 0,(function(){var r,i,o,a;return t.__generator(this,(function(t){switch(t.label){case 0:if(null==e)throw new Error("Illegal Argument Exception");return r=e.spatialReference,n=null!=n?n:l(e),a=(o=e.constructor).fromJSON,[4,f("flipHorizontal",[r,e,n])];case 1:return(i=a.apply(o,[t.sent()])).spatialReference=r,[2,i]}}))}))},n.flipVertical=function(e,n){return t.__awaiter(this,void 0,void 0,(function(){var r,i,o,a;return t.__generator(this,(function(t){switch(t.label){case 0:if(null==e)throw new Error("Illegal Argument Exception");return r=e.spatialReference,n=null!=n?n:l(e),a=(o=e.constructor).fromJSON,[4,f("flipVertical",[r,e,n])];case 1:return(i=a.apply(o,[t.sent()])).spatialReference=r,[2,i]}}))}))},n.generalize=function(e,n,r,i){return t.__awaiter(this,void 0,void 0,(function(){return t.__generator(this,(function(t){switch(t.label){case 0:return[4,f("generalize",[o(e),e,n,r,i])];case 1:return[2,u(t.sent())]}}))}))},n.densify=function(e,n,r){return t.__awaiter(this,void 0,void 0,(function(){return t.__generator(this,(function(t){switch(t.label){case 0:return[4,f("densify",[o(e),e,n,r])];case 1:return[2,u(t.sent())]}}))}))},n.geodesicDensify=function(e,n,r,i){return void 0===i&&(i=0),t.__awaiter(this,void 0,void 0,(function(){return t.__generator(this,(function(t){switch(t.label){case 0:return[4,f("geodesicDensify",[o(e),e,n,r,i])];case 1:return[2,u(t.sent())]}}))}))},n.planarArea=function(e,n){return f("planarArea",[o(e),e,n])},n.planarLength=function(e,n){return f("planarLength",[o(e),e,n])},n.geodesicArea=function(e,n,t){return f("geodesicArea",[o(e),e,n,t])},n.geodesicLength=function(e,n,t){return f("geodesicLength",[o(e),e,n,t])}}));