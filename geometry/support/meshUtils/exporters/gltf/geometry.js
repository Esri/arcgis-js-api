/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.18/esri/copyright.txt for details.
*/
define(["exports","../../../../Point","../../../../../geometry","../../../../../core/mathUtils","../../../../../chunks/vec3f64","../../../../../chunks/vec3"],(function(t,e,r,s,i,o){"use strict";function n(t,e){t.vertexAttributes.normal||(t.vertexAttributes.normal=new Float32Array(t.vertexAttributes.position.length));const r=e.faces.length/3;for(let i=0;i<r;++i){const r=e.faces[3*i+0],n=e.faces[3*i+1],b=e.faces[3*i+2],v=o.set(a,t.vertexAttributes.position[3*r+0],t.vertexAttributes.position[3*r+1],t.vertexAttributes.position[3*r+2]),l=o.set(u,t.vertexAttributes.position[3*n+0],t.vertexAttributes.position[3*n+1],t.vertexAttributes.position[3*n+2]),m=o.set(x,t.vertexAttributes.position[3*b+0],t.vertexAttributes.position[3*b+1],t.vertexAttributes.position[3*b+2]),A=o.subtract(l,l,v),c=o.subtract(m,m,v),f=o.cross(A,A,c);s.isNaN(t.vertexAttributes.normal[3*r+0])&&(t.vertexAttributes.normal[3*r+0]=0),s.isNaN(t.vertexAttributes.normal[3*r+1])&&(t.vertexAttributes.normal[3*r+1]=0),s.isNaN(t.vertexAttributes.normal[3*r+2])&&(t.vertexAttributes.normal[3*r+2]=0),s.isNaN(t.vertexAttributes.normal[3*n+0])&&(t.vertexAttributes.normal[3*n+0]=0),s.isNaN(t.vertexAttributes.normal[3*n+1])&&(t.vertexAttributes.normal[3*n+1]=0),s.isNaN(t.vertexAttributes.normal[3*n+2])&&(t.vertexAttributes.normal[3*n+2]=0),s.isNaN(t.vertexAttributes.normal[3*b+0])&&(t.vertexAttributes.normal[3*b+0]=0),s.isNaN(t.vertexAttributes.normal[3*b+1])&&(t.vertexAttributes.normal[3*b+1]=0),s.isNaN(t.vertexAttributes.normal[3*b+2])&&(t.vertexAttributes.normal[3*b+2]=0),t.vertexAttributes.normal[3*r+0]+=f[0],t.vertexAttributes.normal[3*r+1]+=f[1],t.vertexAttributes.normal[3*r+2]+=f[2],t.vertexAttributes.normal[3*n+0]+=f[0],t.vertexAttributes.normal[3*n+1]+=f[1],t.vertexAttributes.normal[3*n+2]+=f[2],t.vertexAttributes.normal[3*b+0]+=f[0],t.vertexAttributes.normal[3*b+1]+=f[1],t.vertexAttributes.normal[3*b+2]+=f[2]}for(let e=0;e<t.vertexAttributes.normal.length;e+=3)o.set(b,t.vertexAttributes.normal[e],t.vertexAttributes.normal[e+1],t.vertexAttributes.normal[e+2]),o.normalize(b,b),t.vertexAttributes.normal[e+0]=b[0],t.vertexAttributes.normal[e+1]=b[1],t.vertexAttributes.normal[e+2]=b[2]}const a=i.create(),u=i.create(),x=i.create(),b=i.create();t.computeOrigin=function(t){const r=t.extent.xmax-t.extent.width/2,s=t.extent.ymax-t.extent.height/2,i=t.extent.zmin;return new e({x:r,y:s,z:i,spatialReference:t.extent.spatialReference})},t.smoothNormalsMesh=function(t){if(t.components){for(const e of t.components)"smooth"===e.shading&&e.faces&&n(t,e);t.vertexAttributesChanged()}},Object.defineProperty(t,"__esModule",{value:!0})}));
