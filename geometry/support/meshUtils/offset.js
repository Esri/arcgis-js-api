/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.25/esri/copyright.txt for details.
*/
define(["exports","../../../core/Logger","../../../core/maybe","../../../chunks/mat3","../../../chunks/mat3f64","../../../chunks/mat4f64","../../../chunks/vec3","../../../chunks/vec3f64","../../projection","../../projectionEllipsoid","./geographicUtils","./projection"],(function(e,t,o,r,i,n,s,a,c,g,m,f){"use strict";function p(e,r,i){if(e.vertexAttributes&&e.vertexAttributes.position)if(o.isSome(e.transform))null!=i?.geographic&&i.geographic!==e.transform.geographic&&t.getLogger("esri.geometry.support.meshUtils.offset").warn(`Specifying the 'geographic' parameter (${i.geographic}) different from the Mesh transform setting (${e.transform.geographic}) is not supported`),l(e.transform,r);else{m.isGeographicMesh(e.spatialReference,i)?u(e,r):h(e,r)}}function l(e,t){const o=e.origin;e.origin=s.add(a.create(),o,t)}function u(e,t){const i=e.spatialReference,n=e.vertexAttributes.position,a=e.vertexAttributes.normal,m=e.vertexAttributes.tangent,p=new Float64Array(n.length),l=o.isSome(a)?new Float32Array(a.length):null,u=o.isSome(m)?new Float32Array(m.length):null,h=e.extent.center,v=S;c.computeTranslationToOriginAndRotation(i,[h.x,h.y,h.z],F,g.getSphericalPCPF(i)),r.fromMat4(d,F),s.transformMat3(v,t,d),f.projectToPCPF(n,i,p),o.isSome(a)&&o.isSome(l)&&f.projectNormalToPCPF(a,n,p,i,l),o.isSome(m)&&o.isSome(u)&&f.projectTangentToPCPF(m,n,p,i,u),P(p,v),f.projectFromPCPF(p,n,i),o.isSome(a)&&o.isSome(l)&&f.projectNormalFromPCPF(l,n,p,i,a),o.isSome(m)&&o.isSome(u)&&f.projectTangentFromPCPF(u,n,p,i,m),e.vertexAttributesChanged()}function h(e,t){P(e.vertexAttributes.position,t),e.vertexAttributesChanged()}function P(e,t){if(e)for(let o=0;o<e.length;o+=3)for(let r=0;r<3;r++)e[o+r]+=t[r]}const S=a.create(),F=n.create(),d=i.create();e.offset=p,Object.defineProperties(e,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})}));
