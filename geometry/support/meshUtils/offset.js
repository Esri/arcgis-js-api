/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.26/esri/copyright.txt for details.
*/
define(["exports","../../../core/Logger","../../../core/maybe","../../../chunks/mat3","../../../chunks/mat3f64","../../../chunks/mat4f64","../../../chunks/vec3","../../../chunks/vec3f64","../../projection","../../spatialReferenceEllipsoidUtils","./geographicUtils","./projection"],(function(e,t,r,o,i,n,s,a,c,g,f,m){"use strict";function p(e,o,i){if(e.vertexAttributes&&e.vertexAttributes.position)if(r.isSome(e.transform))null!=i?.geographic&&i.geographic!==e.transform.geographic&&t.getLogger("esri.geometry.support.meshUtils.offset").warn(`Specifying the 'geographic' parameter (${i.geographic}) different from the Mesh transform setting (${e.transform.geographic}) is not supported`),l(e.transform,o);else{f.isGeographicMesh(e.spatialReference,i)?u(e,o):h(e,o)}}function l(e,t){const r=e.origin;e.origin=s.add(a.create(),r,t)}function u(e,t){const i=e.spatialReference,n=e.vertexAttributes.position,a=e.vertexAttributes.normal,f=e.vertexAttributes.tangent,p=new Float64Array(n.length),l=r.isSome(a)?new Float32Array(a.length):null,u=r.isSome(f)?new Float32Array(f.length):null,h=e.extent.center,b=S;c.computeTranslationToOriginAndRotation(i,[h.x,h.y,h.z],F,g.getSphericalPCPF(i)),o.fromMat4(A,F),s.transformMat3(b,t,A),m.projectToPCPF(n,i,p),r.isSome(a)&&r.isSome(l)&&m.projectNormalToPCPF(a,n,p,i,l),r.isSome(f)&&r.isSome(u)&&m.projectTangentToPCPF(f,n,p,i,u),P(p,b),m.projectFromPCPF(p,n,i),r.isSome(a)&&r.isSome(l)&&m.projectNormalFromPCPF(l,n,p,i,a),r.isSome(f)&&r.isSome(u)&&m.projectTangentFromPCPF(u,n,p,i,f),e.vertexAttributesChanged()}function h(e,t){P(e.vertexAttributes.position,t),e.vertexAttributesChanged()}function P(e,t){if(e)for(let r=0;r<e.length;r+=3)for(let o=0;o<3;o++)e[r+o]+=t[o]}const S=a.create(),F=n.create(),A=i.create();e.offset=p,Object.defineProperty(e,Symbol.toStringTag,{value:"Module"})}));
