/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.18/esri/copyright.txt for details.
*/
define(["exports","../../../core/Logger","../../../chunks/vec3f64","../../../chunks/vec3","../../projectionEllipsoid","../../projection","./projection"],(function(e,t,r,o,n,c,i){"use strict";const s=t.getLogger("esri.geometry.support.meshUtils.scale");function a(e,t,n=r.ZEROS){if(e)for(let r=0;r<e.length;r+=3){for(let t=0;t<3;t++)l[t]=e[r+t]-n[t];o.scale(l,l,t);for(let t=0;t<3;t++)e[r+t]=l[t]+n[t]}}const l=r.create(),p=r.create();e.scale=function(e,t,r){if(!e.vertexAttributes||!e.vertexAttributes.position)return;const o=e.spatialReference,l=o.isWGS84||o.isWebMercator&&(!r||!1!==r.geographic),f=r&&r.origin||e.extent.center;l?function(e,t,r){const o=e.spatialReference,s=n.getSphericalPCPF(o),l=p;c.projectPointToVector(r,l,s)||c.projectPointToVector(e.extent.center,l,s);const f=e.vertexAttributes.position,g=e.vertexAttributes.normal,u=e.vertexAttributes.tangent,j=new Float64Array(f.length),E=new Float32Array(g?g.length:0),F=new Float32Array(u?u.length:0);i.projectToECEF(f,o,j),g&&i.projectNormalToECEF(g,f,j,o,E);u&&i.projectTangentToECEF(u,f,j,o,F);a(j,t,l),i.projectFromECEF(j,f,o),g&&i.projectNormalFromECEF(E,f,j,o,g);u&&i.projectTangentFromECEF(F,f,j,o,u);e.clearCache()}(e,t,f):function(e,t,r){const o=p;if(!c.projectPointToVector(r,o,e.spatialReference)){const t=e.extent.center;o[0]=t.x,o[1]=t.y,o[2]=t.z,s.error(`Failed to project specified origin (wkid:${r.spatialReference.wkid}) to mesh spatial reference (wkid:${e.spatialReference.wkid}). Using mesh extent.center instead`)}a(e.vertexAttributes.position,t,o),e.clearCache()}(e,t,f)},Object.defineProperty(e,"__esModule",{value:!0})}));
