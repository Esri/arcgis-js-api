/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.26/esri/copyright.txt for details.
*/
define(["exports","./coordsUtils"],(function(n,t){"use strict";function e(n){return n?n.hasZ?[n.xmax-n.xmin/2,n.ymax-n.ymin/2,n.zmax-n.zmin/2]:[n.xmax-n.xmin/2,n.ymax-n.ymin/2]:null}function l(n){return n?r(n.rings,n.hasZ??!1):null}function r(n,t){if(!n||!n.length)return null;const e=[],l=[],r=t?[1/0,-1/0,1/0,-1/0,1/0,-1/0]:[1/0,-1/0,1/0,-1/0];for(let i=0,g=n.length;i<g;i++){const e=o(n[i],t,r);e&&l.push(e)}if(l.sort(((n,e)=>{let l=n[2]-e[2];return 0===l&&t&&(l=n[4]-e[4]),l})),l.length&&(e[0]=l[0][0],e[1]=l[0][1],t&&(e[2]=l[0][3]),(e[0]<r[0]||e[0]>r[1]||e[1]<r[2]||e[1]>r[3]||t&&(e[2]<r[4]||e[2]>r[5]))&&(e.length=0)),!e.length){const l=n[0]&&n[0].length?i(n[0],t):null;if(!l)return null;e[0]=l[0],e[1]=l[1],t&&l.length>2&&(e[2]=l[2])}return e}function o(n,t,e){let l=0,r=0,o=0,i=0,g=0;const u=n.length?n[0][0]:0,s=n.length?n[0][1]:0,c=n.length&&t?n[0][2]:0;for(let f=0;f<n.length;f++){const h=n[f],a=n[(f+1)%n.length],[d,m,x]=h,y=d-u,C=m-s,[p,A,b]=a,z=p-u,M=A-s,R=y*M-z*C;if(i+=R,l+=(y+z)*R,r+=(C+M)*R,t&&h.length>2&&a.length>2){const n=x-c,t=b-c,e=y*t-z*n;o+=(n+t)*e,g+=e}d<e[0]&&(e[0]=d),d>e[1]&&(e[1]=d),m<e[2]&&(e[2]=m),m>e[3]&&(e[3]=m),t&&(x<e[4]&&(e[4]=x),x>e[5]&&(e[5]=x))}if(i>0&&(i*=-1),g>0&&(g*=-1),!i)return null;i*=.5,g*=.5;const h=[l/(6*i)+u,r/(6*i)+s,i];return t&&(e[4]===e[5]||0===g?(h[3]=(e[4]+e[5])/2,h[4]=0):(h[3]=o/(6*g)+c,h[4]=g)),h}function i(n,e){const l=e?[0,0,0]:[0,0],r=e?[0,0,0]:[0,0];let o=0,i=0,g=0,u=0;for(let s=0,c=n.length;s<c-1;s++){const c=n[s],h=n[s+1];if(c&&h){l[0]=c[0],l[1]=c[1],r[0]=h[0],r[1]=h[1],e&&c.length>2&&h.length>2&&(l[2]=c[2],r[2]=h[2]);const n=t.getLength(l,r);if(n){o+=n;const l=t.getMidpoint(c,h);i+=n*l[0],g+=n*l[1],e&&l.length>2&&(u+=n*l[2])}}}return o>0?e?[i/o,g/o,u/o]:[i/o,g/o]:n.length?n[0]:null}const g=1e-6;function u(n){if(!n||!n.rings)return null;const{rings:e}=n;let l=0;for(let r=0;r<e.length;r++)l+=t.getRingArea(e[r]);if(l<g)return r(e,!1);const o=[0,0],i=e[0][0];for(let t=0;t<e.length;t++)c(o,i,e[t]);return o[0]*=1/l,o[1]*=1/l,o[0]+=i[0],o[1]+=i[1],o}const s=1/3;function c(n,e,l){if(!n||!l||l.length<3)return null;const r=l[0],o=[0,0],i=[l[1][0]-r[0],l[1][1]-r[1]];let g;for(let t=2;t<l.length;t++)o[0]=l[t][0]-r[0],o[1]=l[t][1]-r[1],g=.5*s*(o[0]*i[1]-o[1]*i[0]),n[0]+=g*(i[0]+o[0]),n[1]+=g*(i[1]+o[1]),i[0]=o[0],i[1]=o[1];const u=t.getRingArea(l),c=[r[0],r[1]];return c[0]-=e[0],c[1]-=e[1],c[0]*=u,c[1]*=u,n[0]+=c[0],n[1]+=c[1],n}n.extentCentroid=e,n.lineCentroid=i,n.polygonCentroid=l,n.ringCentroid=o,n.ringsCentroid=r,n.weightedAreaCentroid=u,Object.defineProperty(n,Symbol.toStringTag,{value:"Module"})}));
