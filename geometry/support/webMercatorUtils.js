/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.18/esri/copyright.txt for details.
*/
define(["exports","../../core/lang","./spatialReferenceUtils","../SpatialReference","./Ellipsoid"],(function(e,n,t,i,r){"use strict";function s(e){return 57.29577951308232*e}function a(e){return.017453292519943*e}function o(e){return null!=e.wkid||null!=e.wkt}const c=[0,0];function l(e,n,t,i,r){const s=e,a=r;if("x"in s&&"x"in a)[a.x,a.y]=n(s.x,s.y,c,i);else if("xmin"in s&&"xmin"in a)[a.xmin,a.ymin]=n(s.xmin,s.ymin,c,i),[a.xmax,a.ymax]=n(s.xmax,s.ymax,c,i);else if("paths"in s&&"paths"in a||"rings"in s&&"rings"in a){const e="paths"in s?s.paths:s.rings,t=[];let r;for(let s=0;s<e.length;s++){const a=e[s];r=[],t.push(r);for(let e=0;e<a.length;e++)r.push(n(a[e][0],a[e][1],[0,0],i)),a[e].length>2&&r[e].push(a[e][2]),a[e].length>3&&r[e].push(a[e][3])}"paths"in a?a.paths=t:a.rings=t}else if("points"in s&&"points"in a){const e=s.points,t=[];for(let r=0;r<e.length;r++)t[r]=n(e[r][0],e[r][1],[0,0],i),e[r].length>2&&t[r].push(e[r][2]),e[r].length>3&&t[r].push(e[r][3]);a.points=t}return a.spatialReference=t,r}function u(e,n){const i=e&&(o(e)?e:e.spatialReference),r=n&&(o(n)?n:n.spatialReference);return(!e||!("type"in e)||"mesh"!==e.type)&&((!n||!("type"in n)||"mesh"!==n.type)&&(!(!i||!r)&&(!!t.equals(r,i)||(t.isWebMercator(r)&&t.isWGS84(i)||t.isWebMercator(i)&&t.isWGS84(r)))))}function h(e,n,t=[0,0]){n>89.99999?n=89.99999:n<-89.99999&&(n=-89.99999);const i=a(n);return t[0]=a(e)*r.earth.radius,t[1]=r.earth.halfSemiMajorAxis*Math.log((1+Math.sin(i))/(1-Math.sin(i))),t}function p(e,n,t=[0,0],i=!1){const a=s(e/r.earth.radius);return t[0]=i?a:a-360*Math.floor((a+180)/360),t[1]=s(Math.PI/2-2*Math.atan(Math.exp(-1*n/r.earth.radius))),t}e.canProject=u,e.geographicToWebMercator=function(e,t=!1,r=n.clone(e)){return l(e,h,i.WebMercator,t,r)},e.lngLatToXY=h,e.project=function(e,r){const s=e&&e.spatialReference,a=r&&(o(r)?r:r.spatialReference);return u(s,a)?t.equals(s,a)?n.clone(e):t.isWebMercator(a)?l(e,h,i.WebMercator,!1,n.clone(e)):t.isWGS84(a)?l(e,p,i.WGS84,!1,n.clone(e)):null:null},e.webMercatorToGeographic=function(e,t=!1,r=n.clone(e)){return l(e,p,i.WGS84,t,r)},e.xyToLngLat=p,Object.defineProperty(e,"__esModule",{value:!0})}));
