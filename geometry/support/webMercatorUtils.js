/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.20/esri/copyright.txt for details.
*/
define(["exports","../../core/lang","../SpatialReference","./Ellipsoid","./spatialReferenceUtils"],(function(n,e,t,i,r){"use strict";const a=57.29577951308232,s=.017453292519943;function o(n){return n*a}function c(n){return n*s}function l(n){return n/i.earth.radius}function u(n){return Math.PI/2-2*Math.atan(Math.exp(-1*n/i.earth.radius))}function h(n){return null!=n.wkid||null!=n.wkt}const p=[0,0];function f(n,e,t,i,r){const a=n,s=r;if(s.spatialReference=t,"x"in a&&"x"in s)[s.x,s.y]=e(a.x,a.y,p,i);else if("xmin"in a&&"xmin"in s)[s.xmin,s.ymin]=e(a.xmin,a.ymin,p,i),[s.xmax,s.ymax]=e(a.xmax,a.ymax,p,i);else if("paths"in a&&"paths"in s||"rings"in a&&"rings"in s){const n="paths"in a?a.paths:a.rings,t=[];let r;for(let a=0;a<n.length;a++){const s=n[a];r=[],t.push(r);for(let n=0;n<s.length;n++)r.push(e(s[n][0],s[n][1],[0,0],i)),s[n].length>2&&r[n].push(s[n][2]),s[n].length>3&&r[n].push(s[n][3])}"paths"in s?s.paths=t:s.rings=t}else if("points"in a&&"points"in s){const n=a.points,t=[];for(let r=0;r<n.length;r++)t[r]=e(n[r][0],n[r][1],[0,0],i),n[r].length>2&&t[r].push(n[r][2]),n[r].length>3&&t[r].push(n[r][3]);s.points=t}return r}function x(n,e){const t=n&&(h(n)?n:n.spatialReference),i=e&&(h(e)?e:e.spatialReference);return!(n&&"type"in n&&"mesh"===n.type||e&&"type"in e&&"mesh"===e.type||!t||!i)&&(!!r.equals(i,t)||(r.isWebMercator(i)&&r.isWGS84(t)||r.isWebMercator(t)&&r.isWGS84(i)))}function M(n,i){const a=n&&n.spatialReference,s=i&&(h(i)?i:i.spatialReference);return x(a,s)?r.equals(a,s)?e.clone(n):r.isWebMercator(s)?f(n,g,t.WebMercator,!1,e.clone(n)):r.isWGS84(s)?f(n,m,t.WGS84,!1,e.clone(n)):null:null}function g(n,e,t=[0,0]){e>89.99999?e=89.99999:e<-89.99999&&(e=-89.99999);const r=c(e);return t[0]=c(n)*i.earth.radius,t[1]=i.earth.halfSemiMajorAxis*Math.log((1+Math.sin(r))/(1-Math.sin(r))),t}function m(n,e,t=[0,0],r=!1){const a=o(n/i.earth.radius);return t[0]=r?a:a-360*Math.floor((a+180)/360),t[1]=o(Math.PI/2-2*Math.atan(Math.exp(-1*e/i.earth.radius))),t}function y(n,i=!1,r=e.clone(n)){return f(n,g,t.WebMercator,i,r)}function W(n,i=!1,r=e.clone(n)){return f(n,m,t.WGS84,i,r)}n.canProject=x,n.geographicToWebMercator=y,n.lngLatToXY=g,n.project=M,n.webMercatorToGeographic=W,n.x2lon=l,n.xyToLngLat=m,n.y2lat=u,Object.defineProperty(n,"__esModule",{value:!0})}));
