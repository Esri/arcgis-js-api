/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.21/esri/copyright.txt for details.
*/
define(["exports","../../core/lang","../../core/maybe","../SpatialReference","./Ellipsoid","./spatialReferenceUtils"],(function(e,n,t,i,r,a){"use strict";const s=57.29577951308232,o=.017453292519943;function c(e){return e*s}function l(e){return e*o}function u(e){return e/r.earth.radius}function h(e){return Math.PI/2-2*Math.atan(Math.exp(-e/r.earth.radius))}function p(e){return null!=e.wkid||null!=e.wkt}const f=[0,0];function x(e,n,t,i,r){const a=e,s=r;if(s.spatialReference=t,"x"in a&&"x"in s)[s.x,s.y]=n(a.x,a.y,f,i);else if("xmin"in a&&"xmin"in s)[s.xmin,s.ymin]=n(a.xmin,a.ymin,f,i),[s.xmax,s.ymax]=n(a.xmax,a.ymax,f,i);else if("paths"in a&&"paths"in s||"rings"in a&&"rings"in s){const e="paths"in a?a.paths:a.rings,t=[];let r;for(let a=0;a<e.length;a++){const s=e[a];r=[],t.push(r);for(let e=0;e<s.length;e++)r.push(n(s[e][0],s[e][1],[0,0],i)),s[e].length>2&&r[e].push(s[e][2]),s[e].length>3&&r[e].push(s[e][3])}"paths"in s?s.paths=t:s.rings=t}else if("points"in a&&"points"in s){const e=a.points,t=[];for(let r=0;r<e.length;r++)t[r]=n(e[r][0],e[r][1],[0,0],i),e[r].length>2&&t[r].push(e[r][2]),e[r].length>3&&t[r].push(e[r][3]);s.points=t}return r}function M(e,n){const t=e&&(p(e)?e:e.spatialReference),i=n&&(p(n)?n:n.spatialReference);return!(e&&"type"in e&&"mesh"===e.type||n&&"type"in n&&"mesh"===n.type||!t||!i)&&(!!a.equals(i,t)||(a.isWebMercator(i)&&a.isWGS84(t)||a.isWebMercator(t)&&a.isWGS84(i)))}function g(e,r){if(t.isNone(e))return null;const s=e.spatialReference,o=r&&(p(r)?r:r.spatialReference);return M(s,o)?a.equals(s,o)?n.clone(e):a.isWebMercator(o)?x(e,m,i.WebMercator,!1,n.clone(e)):a.isWGS84(o)?x(e,y,i.WGS84,!1,n.clone(e)):null:null}function m(e,n,t=[0,0]){n>89.99999?n=89.99999:n<-89.99999&&(n=-89.99999);const i=l(n);return t[0]=l(e)*r.earth.radius,t[1]=r.earth.halfSemiMajorAxis*Math.log((1+Math.sin(i))/(1-Math.sin(i))),t}function y(e,n,t=[0,0],i=!1){const a=c(e/r.earth.radius);return t[0]=i?a:a-360*Math.floor((a+180)/360),t[1]=c(Math.PI/2-2*Math.atan(Math.exp(-n/r.earth.radius))),t}function W(e,t=!1,r=n.clone(e)){return x(e,m,i.WebMercator,t,r)}function d(e,t=!1,r=n.clone(e)){return x(e,y,i.WGS84,t,r)}e.canProject=M,e.geographicToWebMercator=W,e.lngLatToXY=m,e.project=g,e.webMercatorToGeographic=d,e.x2lon=u,e.xyToLngLat=y,e.y2lat=h,Object.defineProperty(e,"__esModule",{value:!0})}));
