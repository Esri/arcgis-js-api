/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.26/esri/copyright.txt for details.
*/
define(["exports","../../core/lang","../../core/maybe","../SpatialReference","./Ellipsoid","./spatialReferenceUtils"],(function(n,e,t,i,r,a){"use strict";const o=57.29577951308232,s=.017453292519943;function c(n){return n*o}function l(n){return n*s}function u(n){return n/r.earth.radius}function h(n){return Math.PI/2-2*Math.atan(Math.exp(-n/r.earth.radius))}function p(n){return null!=n.wkid||null!=n.wkt}const f=[0,0];function g(n,e,t,i,r){const a=n,o=r;if(o.spatialReference=t,"x"in a&&"x"in o)[o.x,o.y]=e(a.x,a.y,f,i);else if("xmin"in a&&"xmin"in o)[o.xmin,o.ymin]=e(a.xmin,a.ymin,f,i),[o.xmax,o.ymax]=e(a.xmax,a.ymax,f,i);else if("paths"in a&&"paths"in o||"rings"in a&&"rings"in o){const n="paths"in a?a.paths:a.rings,t=[];let r;for(let a=0;a<n.length;a++){const o=n[a];r=[],t.push(r);for(let n=0;n<o.length;n++)r.push(e(o[n][0],o[n][1],[0,0],i)),o[n].length>2&&r[n].push(o[n][2]),o[n].length>3&&r[n].push(o[n][3])}"paths"in o?o.paths=t:o.rings=t}else if("points"in a&&"points"in o){const n=a.points,t=[];for(let r=0;r<n.length;r++)t[r]=e(n[r][0],n[r][1],[0,0],i),n[r].length>2&&t[r].push(n[r][2]),n[r].length>3&&t[r].push(n[r][3]);o.points=t}return r}function x(n,e){const t=n&&(p(n)?n:n.spatialReference),i=e&&(p(e)?e:e.spatialReference);return!(n&&"type"in n&&"mesh"===n.type||e&&"type"in e&&"mesh"===e.type||!t||!i)&&(!!a.equals(i,t)||(a.isWebMercator(i)&&a.isWGS84(t)||a.isWebMercator(t)&&a.isWGS84(i)))}function M(n,r){if(t.isNone(n))return null;const o=n.spatialReference,s=r&&(p(r)?r:r.spatialReference);return x(o,s)?a.equals(o,s)?e.clone(n):a.isWebMercator(s)?g(n,m,i.WebMercator,!1,e.clone(n)):a.isWGS84(s)?g(n,y,i.WGS84,!1,e.clone(n)):null:null}function m(n,e,t=[0,0]){e>89.99999?e=89.99999:e<-89.99999&&(e=-89.99999);const i=l(e);return t[0]=l(n)*r.earth.radius,t[1]=r.earth.halfSemiMajorAxis*Math.log((1+Math.sin(i))/(1-Math.sin(i))),t}function y(n,e,t=[0,0],i=!1){const a=c(n/r.earth.radius);return t[0]=i?a:a-360*Math.floor((a+180)/360),t[1]=c(Math.PI/2-2*Math.atan(Math.exp(-e/r.earth.radius))),t}function W(n,t=!1,r=e.clone(n)){return g(n,m,i.WebMercator,t,r)}function b(n,t=!1,r=e.clone(n)){return g(n,y,i.WGS84,t,r)}n.canProject=x,n.geographicToWebMercator=W,n.lngLatToXY=m,n.project=M,n.webMercatorToGeographic=b,n.x2lon=u,n.xyToLngLat=y,n.y2lat=h,Object.defineProperty(n,Symbol.toStringTag,{value:"Module"})}));
