/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.26/esri/copyright.txt for details.
*/
define(["exports","../../core/maybe","./jsonUtils"],(function(n,t,e){"use strict";function i(n){return n&&"upperLeft"===n.originPosition}const u=(n,t,e)=>[t,e],r=(n,t,e)=>[t,e,n[2]],o=(n,t,e)=>[t,e,n[2],n[3]];function a(n){if(!n)return null;return{originPosition:"upper-left"===n.originPosition?"upperLeft":"lower-left"===n.originPosition?"lowerLeft":n.originPosition,scale:n.tolerance?[n.tolerance,n.tolerance]:[1,1],translate:t.isSome(n.extent)?[n.extent.xmin,n.extent.ymax]:[0,0]}}function l(n,e){if(n===e||null==n&&null==e)return!0;if(null==n||null==e)return!1;let u,r,o,a,l,s;return i(n)?(u=n.translate[0],r=n.translate[1],o=n.scale[0]):(u=t.isSome(n.extent)?n.extent.xmin:0,r=t.isSome(n.extent)?n.extent.ymax:0,o=n.tolerance),i(e)?(a=e.translate[0],l=e.translate[1],s=e.scale[0]):(a=t.isSome(e.extent)?e.extent.xmin:0,l=t.isSome(e.extent)?e.extent.ymax:0,s=e.tolerance),u===a&&r===l&&o===s}function s({scale:n,translate:t},e){return Math.round((e-t[0])/n[0])}function m({scale:n,translate:t},e){return Math.round((t[1]-e)/n[1])}function c(n,t,e){const i=[];let u,r,o,a;for(let l=0;l<e.length;l++){const c=e[l];l>0?(o=s(n,c[0]),a=m(n,c[1]),o===u&&a===r||(i.push(t(c,o-u,a-r)),u=o,r=a)):(u=s(n,c[0]),r=m(n,c[1]),i.push(t(c,u,r)))}return i.length>0?i:null}function f(n,t,e){return t[0]=s(n,e[0]),t[3]=m(n,e[1]),t[2]=s(n,e[2]),t[1]=m(n,e[3]),t}function x(n,t,e,i){return c(n,e?i?o:r:i?r:u,t)}function z(n,t,e,i){const a=[],l=e?i?o:r:i?r:u;for(let u=0;u<t.length;u++){const e=c(n,l,t[u]);e&&e.length>=3&&a.push(e)}return a.length?a:null}function g(n,t,e,i){const a=[],l=e?i?o:r:i?r:u;for(let u=0;u<t.length;u++){const e=c(n,l,t[u]);e&&e.length>=2&&a.push(e)}return a.length?a:null}function h({scale:n,translate:t},e){return e*n[0]+t[0]}function y({scale:n,translate:t},e){return t[1]-e*n[1]}function I(n,t,e){const i=new Array(e.length);if(!e.length)return i;const[u,r]=n.scale;let o=h(n,e[0][0]),a=y(n,e[0][1]);i[0]=t(e[0],o,a);for(let l=1;l<e.length;l++){const n=e[l];o+=n[0]*u,a-=n[1]*r,i[l]=t(n,o,a)}return i}function q(n,t,e){const i=new Array(e.length);for(let u=0;u<e.length;u++)i[u]=I(n,t,e[u]);return i}function P(n,t,e){return e?(t[0]=h(n,e[0]),t[1]=y(n,e[3]),t[2]=h(n,e[2]),t[3]=y(n,e[1]),t):[h(n,t[0]),y(n,t[3]),h(n,t[2]),y(n,t[1])]}function p(n,t,e,i){return I(n,e?i?o:r:i?r:u,t)}function N(n,t,e,i){return q(n,e?i?o:r:i?r:u,t)}function d(n,t,e,i){return q(n,e?i?o:r:i?r:u,t)}function M(n,t,e){let[i,u]=e[0],r=Math.min(i,t[0]),o=Math.min(u,t[1]),a=Math.max(i,t[2]),l=Math.max(u,t[3]);for(let s=1;s<e.length;s++){const[n,t]=e[s];i+=n,u+=t,n<0&&(r=Math.min(r,i)),n>0&&(a=Math.max(a,i)),t<0?o=Math.min(o,u):t>0&&(l=Math.max(l,u))}return n[0]=r,n[1]=o,n[2]=a,n[3]=l,n}function T(n,t){if(!t.length)return null;n[0]=n[1]=Number.POSITIVE_INFINITY,n[2]=n[3]=Number.NEGATIVE_INFINITY;for(let e=0;e<t.length;e++)M(n,n,t[e]);return n}function S(n){const t=[Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY];return M(t,t,n)}function E(n){return T([0,0,0,0],n)}function A(n){return T([0,0,0,0],n)}function b(n,t,e,i,u){return t.xmin=s(n,e.xmin),t.ymin=m(n,e.ymin),t.xmax=s(n,e.xmax),t.ymax=m(n,e.ymax),t!==e&&(i&&(t.zmin=e.zmin,t.zmax=e.zmax),u&&(t.mmin=e.mmin,t.mmax=e.mmax)),t}function Y(n,t,e,i,u){return t.points=x(n,e.points,i,u)??[],t}function B(n,t,e,i,u){return t.x=s(n,e.x),t.y=m(n,e.y),t!==e&&(i&&(t.z=e.z),u&&(t.m=e.m)),t}function F(n,t,e,i,u){const r=z(n,e.rings,i,u);return r?(t.rings=r,t):null}function Q(n,t,e,i,u){const r=g(n,e.paths,i,u);return r?(t.paths=r,t):null}function V(n,t){return n&&t?e.isPoint(t)?B(n,{},t,!1,!1):e.isPolyline(t)?Q(n,{},t,!1,!1):e.isPolygon(t)?F(n,{},t,!1,!1):e.isMultipoint(t)?Y(n,{},t,!1,!1):e.isExtent(t)?b(n,{},t,!1,!1):null:null}function _(n,t,e,i,u){return t.xmin=h(n,e.xmin),t.ymin=y(n,e.ymin),t.xmax=h(n,e.xmax),t.ymax=y(n,e.ymax),t!==e&&(i&&(t.zmin=e.zmin,t.zmax=e.zmax),u&&(t.mmin=e.mmin,t.mmax=e.mmax)),t}function w(n,e,i,u,r){return t.isSome(i)&&(e.points=p(n,i.points,u,r)),e}function C(n,e,i,u,r){return t.isNone(i)||(e.x=h(n,i.x),e.y=y(n,i.y),e!==i&&(u&&(e.z=i.z),r&&(e.m=i.m))),e}function G(n,e,i,u,r){return t.isSome(i)&&(e.rings=d(n,i.rings,u,r)),e}function O(n,e,i,u,r){return t.isSome(i)&&(e.paths=N(n,i.paths,u,r)),e}n.equals=l,n.getQuantizedBoundsCoordsArray=M,n.getQuantizedBoundsCoordsArrayArray=T,n.getQuantizedBoundsPaths=E,n.getQuantizedBoundsPoints=S,n.getQuantizedBoundsRings=A,n.quantizeBounds=f,n.quantizeExtent=b,n.quantizeGeometry=V,n.quantizeMultipoint=Y,n.quantizePaths=g,n.quantizePoint=B,n.quantizePoints=x,n.quantizePolygon=F,n.quantizePolyline=Q,n.quantizeRings=z,n.quantizeX=s,n.quantizeY=m,n.toQuantizationTransform=a,n.unquantizeBounds=P,n.unquantizeCoordsArray=I,n.unquantizeCoordsArrayArray=q,n.unquantizeExtent=_,n.unquantizeMultipoint=w,n.unquantizePaths=N,n.unquantizePoint=C,n.unquantizePoints=p,n.unquantizePolygon=G,n.unquantizePolyline=O,n.unquantizeRings=d,n.unquantizeX=h,n.unquantizeY=y,Object.defineProperty(n,Symbol.toStringTag,{value:"Module"})}));
