/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.26/esri/copyright.txt for details.
*/
define(["exports","../../core/ObjectStack","../../chunks/vec3","../../chunks/vec3f64","./lineSegment","./vectorStacks"],(function(t,e,c,n,r,s){"use strict";function o(t){return t?{p0:n.clone(t.p0),p1:n.clone(t.p1),p2:n.clone(t.p2)}:{p0:n.create(),p1:n.create(),p2:n.create()}}function a(t,e,c){const n=v.get();return n.p0=t,n.p1=e,n.p2=c,n}function u(t,e=o()){return p(t.p0,t.p1,t.p2,e)}function p(t,e,n,r=o()){return c.copy(r.p0,t),c.copy(r.p1,e),c.copy(r.p2,n),r}function i(t,e){const n=t.p0,o=t.p1,a=t.p2,u=c.subtract(s.sv3d.get(),o,n),p=c.subtract(s.sv3d.get(),a,o),i=c.subtract(s.sv3d.get(),n,a),d=c.subtract(s.sv3d.get(),e,n),f=c.subtract(s.sv3d.get(),e,o),g=c.subtract(s.sv3d.get(),e,a),b=c.cross(u,u,i),v=c.dot(c.cross(s.sv3d.get(),u,b),d),m=c.dot(c.cross(s.sv3d.get(),p,b),f),y=c.dot(c.cross(s.sv3d.get(),i,b),g);if(v>0&&m>0&&y>0){const t=c.dot(b,d);return t*t/c.dot(b,b)}const S=r.distance2(r.fromValues(n,u,l.get()),e),k=r.distance2(r.fromValues(o,p,l.get()),e),h=r.distance2(r.fromValues(a,i,l.get()),e);return Math.min(S,k,h)}function d(t,e,n){const r=1e-5,{direction:s,origin:o}=e,{p0:a,p1:u,p2:p}=t,i=u[0]-a[0],d=u[1]-a[1],f=u[2]-a[2],g=p[0]-a[0],b=p[1]-a[1],l=p[2]-a[2],v=s[1]*l-b*s[2],m=s[2]*g-l*s[0],y=s[0]*b-g*s[1],S=i*v+d*m+f*y;if(S>-r&&S<r)return!1;const k=1/S,h=o[0]-a[0],j=o[1]-a[1],O=o[2]-a[2],V=k*(h*v+j*m+O*y);if(V<0||V>1)return!1;const w=j*f-d*O,M=O*i-f*h,P=h*d-i*j,x=k*(s[0]*w+s[1]*M+s[2]*P);if(x<0||V+x>1)return!1;if(n){const t=k*(g*w+b*M+l*P);c.scale(n,s,t),c.add(n,o,n)}return!0}function f(t,e,c){const n=e[0]-t[0],r=e[1]-t[1],s=c[0]-t[0],o=c[1]-t[1];return.5*Math.abs(n*o-r*s)}function g(t){return f(t.p0,t.p1,t.p2)}function b(t,e,n){return c.subtract(m,e,t),c.subtract(y,n,t),c.length(c.cross(m,m,y))/2}const l=new e.ObjectStack(r.create),v=new e.ObjectStack((()=>o())),m=n.create(),y=n.create();t.area2d=g,t.areaPoints2d=f,t.areaPoints3d=b,t.copy=u,t.create=o,t.distance2=i,t.fromValues=p,t.intersectRay=d,t.wrap=a,Object.defineProperty(t,Symbol.toStringTag,{value:"Module"})}));
