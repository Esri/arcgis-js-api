/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.18/esri/copyright.txt for details.
*/
define(["../chunks/_rollupPluginBabelHelpers","../chunks/tslib.es6","../core/has","../core/lang","../core/Logger","../core/accessorSupport/ensureType","../core/accessorSupport/decorators/property","../core/accessorSupport/decorators/subclass","../core/accessorSupport/decorators/writer","../core/urlUtils","../core/uuid","../portal/support/resourceExtension","./SpatialReference","./Geometry","./Point","./Extent","./support/zmUtils","./support/extentUtils"],(function(t,e,r,s,n,i,a,o,h,l,c,p,u,f,d,y,v,_){"use strict";var g;let R=g=function(e){function r(...t){var r;return(r=e.call(this,...t)||this).paths=[],r.type="polyline",r}t._inheritsLoose(r,e);var n=r.prototype;return n.normalizeCtorArgs=function(t,e){let r,s,n=null,i=null;return t&&!Array.isArray(t)?(n=t.paths?t.paths:null,e||(t.spatialReference?e=t.spatialReference:t.paths||(e=t)),r=t.hasZ,s=t.hasM):n=t,n=n||[],e=e||u.WGS84,n.length&&n[0]&&null!=n[0][0]&&"number"==typeof n[0][0]&&(n=[n]),i=n[0]&&n[0][0],i&&(void 0===r&&void 0===s?(r=i.length>2,s=!1):void 0===r?r=!s&&i.length>3:void 0===s&&(s=!r&&i.length>3)),{paths:n,spatialReference:e,hasZ:r,hasM:s}},n.writePaths=function(t,e){e.paths=s.clone(this.paths)},n.addPath=function(t){if(!t)return;this.clearCache();const e=this.paths,r=e.length;if(function(t){return!Array.isArray(t[0])}(t)){const s=[];for(let e=0,r=t.length;e<r;e++)s[e]=t[e].toArray();e[r]=s}else e[r]=t.concat();return this},n.clone=function(){const t=new g;return t.spatialReference=this.spatialReference,t.paths=s.clone(this.paths),t.hasZ=this.hasZ,t.hasM=this.hasM,t},n.getPoint=function(t,e){if(!this._validateInputs(t,e))return null;const r=this.paths[t][e],s=this.hasZ,n=this.hasM;return s&&!n?new d(r[0],r[1],r[2],void 0,this.spatialReference):n&&!s?new d(r[0],r[1],void 0,r[2],this.spatialReference):s&&n?new d(r[0],r[1],r[2],r[3],this.spatialReference):new d(r[0],r[1],this.spatialReference)},n.insertPoint=function(t,e,r){return this._validateInputs(t,e,!0)?(this.clearCache(),v.updateSupportFromPoint(this,r),Array.isArray(r)||(r=r.toArray()),this.paths[t].splice(e,0,r),this):this},n.removePath=function(t){if(!this._validateInputs(t,null))return null;this.clearCache();const e=this.paths.splice(t,1)[0],r=this.spatialReference;return e.map((t=>new d(t,r)))},n.removePoint=function(t,e){return this._validateInputs(t,e)?(this.clearCache(),new d(this.paths[t].splice(e,1)[0],this.spatialReference)):null},n.setPoint=function(t,e,r){return this._validateInputs(t,e)?(this.clearCache(),v.updateSupportFromPoint(this,r),Array.isArray(r)||(r=r.toArray()),this.paths[t][e]=r,this):this},n._validateInputs=function(t,e,r=!1){if(null==t||t<0||t>=this.paths.length)return!1;if(null!=e){const s=this.paths[t];if(r&&(e<0||e>s.length))return!1;if(!r&&(e<0||e>=s.length))return!1}return!0},n.toJSON=function(t){return this.write(null,t)},t._createClass(r,[{key:"extent",get:function(){const{spatialReference:t}=this,e=_.getPolylineExtent(this);if(!e)return null;const r=new y(e);return r.spatialReference=t,r}}]),r}(f);return e.__decorate([a.property({dependsOn:["hasM","hasZ","paths"],autoTracked:!1})],R.prototype,"cache",void 0),e.__decorate([a.property({readOnly:!0,dependsOn:["cache"],autoTracked:!1})],R.prototype,"extent",null),e.__decorate([a.property({type:[[[Number]]],json:{write:{isRequired:!0}}})],R.prototype,"paths",void 0),e.__decorate([h.writer("paths")],R.prototype,"writePaths",null),R=g=e.__decorate([o.subclass("esri.geometry.Polyline")],R),R.prototype.toJSON.isDefaultToJSON=!0,R}));
