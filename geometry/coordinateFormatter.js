/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
define(["exports","../core/Error","../chunks/pe","./Point","./SpatialReference"],(function(e,t,n,o,r){"use strict";function i(){return n.isLoaded()}function a(){return n.isSupported()}function s(){return n.load()}function c(e,t){const i=[];e=(e=(e=e.replace(/[\u00B0\u00BA]/g,"^")).replace(/\u2032/g,"'")).replace(/\u2033/g,'"');const a=S(t);return n.PeNotationDms.dms_to_geog(a,1,[e],i)?new o(i[0][0],i[0][1],t||r.WGS84):null}function u(e,t,i){const a=[],s=m(i);if(-1===s)return console.warn(`invalid conversionMode: ${i}`),null;const c=S(t);return n.PeNotationMgrs.mgrs_to_geog_extended(c,1,[e],s,a)?new o(a[0][0],a[0][1],t||r.WGS84):null}function l(e,t){const i=[];!t&&/\(.+27/.test(e)&&(t=r.GCS_NAD_1927);const a=S(t);return n.PeNotationUsng.usng_to_geog(a,1,[e],i)?new o(i[0][0],i[0][1],t||r.WGS84):null}function _(e,t,i){const a=[],s=N(i);if(-1===s)return console.warn(`invalid conversionMode: ${i}`),null;const c=S(t);return n.PeNotationUtm.utm_to_geog(c,1,[e],s,a)?new o(a[0][0],a[0][1],t||r.WGS84):null}function d(e,t,o=0){const r=[[e.x,e.y]],i=[],a=S(e.spatialReference);let s=0;switch(t){case"dd":s=n.PeNotationDms.geog_to_dd(a,1,r,o,i);break;case"ddm":s=n.PeNotationDms.geog_to_ddm(a,1,r,o,i);break;case"dms":s=n.PeNotationDms.geog_to_dms(a,1,r,o,i);break;default:return console.warn(`invalid format: ${t}`),null}return s?i[0]:null}function g(e,t,o=0,r=!1){const i=[[e.x,e.y]],a=[],s=S(e.spatialReference);let c=m(t);if(-1===c)return console.warn(`invalid conversionMode: ${t}`),null;r&&(c|=n.PeNotationMgrs.PE_MGRS_ADD_SPACES);return n.PeNotationMgrs.geog_to_mgrs_extended(s,1,i,o,!1,c,a)?a[0]:null}function P(e,t=0,o=!1){const r=[[e.x,e.y]],i=[],a=S(e.spatialReference);return n.PeNotationUsng.geog_to_usng(a,1,r,t,!1,o,i)?i[0]:null}function f(e,t,o=!1){const r=[[e.x,e.y]],i=[],a=S(e.spatialReference);let s=N(t);if(-1===s)return console.warn(`invalid conversionMode: ${t}`),null;o&&(s|=n.PeNotationUtm.PE_UTM_OPTS_ADD_SPACES);return n.PeNotationUtm.geog_to_utm(a,1,r,s,i)?i[0]:null}function S(e){let o=null;if(e||(e=r.WGS84),e.wkid){if(o=n.PeFactory.geogcs(e.wkid),!o)throw new t("coordinate-formatter:invalid-spatial-reference","wkid is not valid")}else{if(!e.wkt)throw new t("coordinate-formatter:invalid-spatial-reference","wkid and wkt are missing");if(o=n.PeFactory.fromString(n.PeDefs.PE_TYPE_GEOGCS,e.wkt),!o)throw new t("coordinate-formatter:invalid-spatial-reference","wkt is not valid")}return o}function m(e){let t=-1;switch(e){case"automatic":t=n.PeNotationMgrs.PE_MGRS_STYLE_AUTO;break;case"new-180-in-zone-01":t=n.PeNotationMgrs.PE_MGRS_STYLE_NEW|n.PeNotationMgrs.PE_MGRS_180_ZONE_1_PLUS;break;case"new-180-in-zone-60":t=n.PeNotationMgrs.PE_MGRS_STYLE_NEW;break;case"old-180-in-zone-01":t=n.PeNotationMgrs.PE_MGRS_STYLE_OLD|n.PeNotationMgrs.PE_MGRS_180_ZONE_1_PLUS;break;case"old-180-in-zone-60":t=n.PeNotationMgrs.PE_MGRS_STYLE_OLD}return t}function N(e){let t=-1;switch(e){case"latitude-band-indicators":t=n.PeNotationUtm.PE_UTM_OPTS_NONE;break;case"north-south-indicators":t=n.PeNotationUtm.PE_UTM_OPTS_NS}return t}e.fromLatitudeLongitude=c,e.fromMgrs=u,e.fromUsng=l,e.fromUtm=_,e.isLoaded=i,e.isSupported=a,e.load=s,e.toLatitudeLongitude=d,e.toMgrs=g,e.toUsng=P,e.toUtm=f,Object.defineProperty(e,"__esModule",{value:!0})}));
