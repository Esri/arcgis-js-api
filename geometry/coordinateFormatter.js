/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.18/esri/copyright.txt for details.
*/
define(["exports","../core/Error","./SpatialReference","./Point","../chunks/pe"],(function(e,t,n,o,r){"use strict";function i(e){let o=null;if(e||(e=n.WGS84),e.wkid){if(o=r.PeFactory.geogcs(e.wkid),!o)throw new t("coordinate-formatter:invalid-spatial-reference","wkid is not valid")}else{if(!e.wkt)throw new t("coordinate-formatter:invalid-spatial-reference","wkid and wkt are missing");if(o=r.PeFactory.fromString(r.PeDefs.PE_TYPE_GEOGCS,e.wkt),!o)throw new t("coordinate-formatter:invalid-spatial-reference","wkt is not valid")}return o}function a(e){let t=-1;switch(e){case"automatic":t=r.PeNotationMgrs.PE_MGRS_STYLE_AUTO;break;case"new-180-in-zone-01":t=r.PeNotationMgrs.PE_MGRS_STYLE_NEW|r.PeNotationMgrs.PE_MGRS_180_ZONE_1_PLUS;break;case"new-180-in-zone-60":t=r.PeNotationMgrs.PE_MGRS_STYLE_NEW;break;case"old-180-in-zone-01":t=r.PeNotationMgrs.PE_MGRS_STYLE_OLD|r.PeNotationMgrs.PE_MGRS_180_ZONE_1_PLUS;break;case"old-180-in-zone-60":t=r.PeNotationMgrs.PE_MGRS_STYLE_OLD}return t}function s(e){let t=-1;switch(e){case"latitude-band-indicators":t=r.PeNotationUtm.PE_UTM_OPTS_NONE;break;case"north-south-indicators":t=r.PeNotationUtm.PE_UTM_OPTS_NS}return t}e.fromLatitudeLongitude=function(e,t){const a=[];e=e.replace(/\u2032/g,"'");const s=i(t);return r.PeNotationDms.dms_to_geog(s,1,[e],a)?new o(a[0][0],a[0][1],t||n.WGS84):null},e.fromMgrs=function(e,t,s){const c=[],l=a(s);if(-1===l)return console.warn(`invalid conversionMode: ${s}`),null;const _=i(t);return r.PeNotationMgrs.mgrs_to_geog_extended(_,1,[e],l,c)?new o(c[0][0],c[0][1],t||n.WGS84):null},e.fromUsng=function(e,t){const a=[];!t&&/\(.+27/.test(e)&&(t=n.GCS_NAD_1927);const s=i(t);return r.PeNotationUsng.usng_to_geog(s,1,[e],a)?new o(a[0][0],a[0][1],t||n.WGS84):null},e.fromUtm=function(e,t,a){const c=[],l=s(a);if(-1===l)return console.warn(`invalid conversionMode: ${a}`),null;const _=i(t);return r.PeNotationUtm.utm_to_geog(_,1,[e],l,c)?new o(c[0][0],c[0][1],t||n.WGS84):null},e.isLoaded=function(){return r.isLoaded()},e.isSupported=function(){return r.isSupported()},e.load=function(){return r.load()},e.toLatitudeLongitude=function(e,t,n=0){const o=[[e.x,e.y]],a=[],s=i(e.spatialReference);let c=0;switch(t){case"dd":c=r.PeNotationDms.geog_to_dd(s,1,o,n,a);break;case"ddm":c=r.PeNotationDms.geog_to_ddm(s,1,o,n,a);break;case"dms":c=r.PeNotationDms.geog_to_dms(s,1,o,n,a);break;default:return console.warn(`invalid format: ${t}`),null}return c?a[0]:null},e.toMgrs=function(e,t,n=0,o=!1){const s=[[e.x,e.y]],c=[],l=i(e.spatialReference);let _=a(t);return-1===_?(console.warn(`invalid conversionMode: ${t}`),null):(o&&(_|=r.PeNotationMgrs.PE_MGRS_ADD_SPACES),r.PeNotationMgrs.geog_to_mgrs_extended(l,1,s,n,!1,_,c)?c[0]:null)},e.toUsng=function(e,t=0,n=!1){const o=[[e.x,e.y]],a=[],s=i(e.spatialReference);return r.PeNotationUsng.geog_to_usng(s,1,o,t,!1,n,a)?a[0]:null},e.toUtm=function(e,t,n=!1){const o=[[e.x,e.y]],a=[],c=i(e.spatialReference);let l=s(t);return-1===l?(console.warn(`invalid conversionMode: ${t}`),null):(n&&(l|=r.PeNotationUtm.PE_UTM_OPTS_ADD_SPACES),r.PeNotationUtm.geog_to_utm(c,1,o,l,a)?a[0]:null)},Object.defineProperty(e,"__esModule",{value:!0})}));
