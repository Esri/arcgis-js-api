/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.18/esri/copyright.txt for details.
*/
define(["../chunks/_rollupPluginBabelHelpers","../chunks/tslib.es6","../core/has","../core/lang","../core/Logger","../core/accessorSupport/ensureType","../core/accessorSupport/decorators/property","../core/accessorSupport/decorators/subclass","../core/accessorSupport/decorators/writer","../core/urlUtils","../core/uuid","../portal/support/resourceExtension","./Geometry","./Point","./Extent","./support/zmUtils"],(function(t,e,s,n,r,i,o,a,p,l,c,u,h,f,d,m){"use strict";var y;function g(t){return(e,s)=>null==e?s:null==s?e:t(e,s)}let _=y=function(e){function s(...t){var s;return(s=e.call(this,...t)||this).points=[],s.type="multipoint",s}t._inheritsLoose(s,e);var r=s.prototype;return r.normalizeCtorArgs=function(t,e){if(!t&&!e)return null;const s={};var n;Array.isArray(t)?(s.points=t,s.spatialReference=e):!(n=t)||"esri.geometry.SpatialReference"!==n.declaredClass&&null==n.wkid?(t.points&&(s.points=t.points),t.spatialReference&&(s.spatialReference=t.spatialReference),t.hasZ&&(s.hasZ=t.hasZ),t.hasM&&(s.hasM=t.hasM)):s.spatialReference=t;const r=s.points&&s.points[0];return r&&(void 0===s.hasZ&&void 0===s.hasM?(s.hasZ=r.length>2,s.hasM=!1):void 0===s.hasZ?s.hasZ=r.length>3:void 0===s.hasM&&(s.hasM=r.length>3)),s},r.writePoints=function(t,e){e.points=n.clone(this.points)},r.addPoint=function(t){return this.clearCache(),m.updateSupportFromPoint(this,t),Array.isArray(t)?this.points.push(t):this.points.push(t.toArray()),this},r.clone=function(){const t={points:n.clone(this.points),spatialReference:this.spatialReference};return this.hasZ&&(t.hasZ=!0),this.hasM&&(t.hasM=!0),new y(t)},r.getPoint=function(t){if(!this._validateInputs(t))return null;const e=this.points[t],s={x:e[0],y:e[1],spatialReference:this.spatialReference};let n=2;return this.hasZ&&(s.z=e[2],n=3),this.hasM&&(s.m=e[n]),new f(s)},r.removePoint=function(t){return this._validateInputs(t)?(this.clearCache(),new f(this.points.splice(t,1)[0],this.spatialReference)):null},r.setPoint=function(t,e){return this._validateInputs(t)?(this.clearCache(),m.updateSupportFromPoint(this,e),Array.isArray(e)||(e=e.toArray()),this.points[t]=e,this):this},r.toJSON=function(t){return this.write(null,t)},r._validateInputs=function(t){return null!=t&&t>=0&&t<this.points.length},t._createClass(s,[{key:"extent",get:function(){const t=this.points;if(!t.length)return null;const e=new d,s=this.hasZ,n=this.hasM,r=s?3:2,i=t[0],o=g(Math.min),a=g(Math.max);let p,l,c,u,[h,f]=i,[m,y]=i;for(let e=0,i=t.length;e<i;e++){const i=t[e],[d,g]=i;if(h=o(h,d),f=o(f,g),m=a(m,d),y=a(y,g),s&&i.length>2){const t=i[2];p=o(p,t),c=a(c,t)}if(n&&i.length>r){const t=i[r];l=o(l,t),u=a(u,t)}}return e.xmin=h,e.ymin=f,e.xmax=m,e.ymax=y,e.spatialReference=this.spatialReference,s?(e.zmin=p,e.zmax=c):(e.zmin=null,e.zmax=null),n?(e.mmin=l,e.mmax=u):(e.mmin=null,e.mmax=null),e}}]),s}(h);return e.__decorate([o.property({dependsOn:["points","hasZ","hasM","spatialReference"],autoTracked:!1})],_.prototype,"cache",void 0),e.__decorate([o.property({dependsOn:["cache"],autoTracked:!1})],_.prototype,"extent",null),e.__decorate([o.property({type:[[Number]],json:{write:{isRequired:!0}}})],_.prototype,"points",void 0),e.__decorate([p.writer("points")],_.prototype,"writePoints",null),_=y=e.__decorate([a.subclass("esri.geometry.Multipoint")],_),_.prototype.toJSON.isDefaultToJSON=!0,_}));
