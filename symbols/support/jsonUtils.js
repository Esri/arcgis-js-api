/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.26/esri/copyright.txt for details.
*/
define(["exports","../../symbols","../../core/Error","../../core/maybe","../../layers/support/layerUtils","../Symbol3D","./symbolConversion","../WebStyleSymbol"],(function(e,o,n,t,s,r,l,i){"use strict";function a(e,o,n,s){const r=m(e,{},{context:s,isLabelSymbol:!1});t.isSome(r)&&(o[n]=r)}function b(e,o,n,s){const r=m(e,{},{context:s,isLabelSymbol:!0});t.isSome(r)&&(o[n]=r)}function y(e){return e instanceof r||e instanceof i}function m(e,o,r){if(t.isNone(e))return null;const{context:i,isLabelSymbol:a}=r,b=i?.origin,m=i?.messages;if("web-scene"===b&&!y(e)){const s=l.to3D(e,{retainCIM:!0,hasLabelingContext:a});return t.isSome(s.symbol)?s.symbol.write(o,i):(m?.push(new n("symbol:unsupported",`Symbols of type '${e.declaredClass}' are not supported in scenes. Use 3D symbology instead when working with WebScene and SceneView`,{symbol:e,context:i,error:s.error})),null)}return("web-map"===b||"portal-item"===b&&!s.isSceneServiceLayer(i?.layer))&&y(e)?(m?.push(new n("symbol:unsupported",`Symbols of type '${e.declaredClass}' are not supported in web maps and portal items. Use 2D symbology and CIMSymbol instead when working with MapView`,{symbol:e,context:i})),null):e.write(o,i)}function c(e,n){return o.readSymbol(e,null,n)}e.fromJSON=c,e.write=a,e.writeLabelSymbol=b,Object.defineProperty(e,Symbol.toStringTag,{value:"Module"})}));
