/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.25/esri/copyright.txt for details.
*/
define(["exports","../../symbols","../../core/Error","../../core/maybe","../Symbol3D","./symbolConversion","../WebStyleSymbol"],(function(e,o,n,t,s,l,r){"use strict";const i=["building-scene","integrated-mesh","point-cloud","scene"];function b(e,o,n,s){const l=m(e,{},{context:s,isLabelSymbol:!1});t.isSome(l)&&(o[n]=l)}function a(e,o,n,s){const l=m(e,{},{context:s,isLabelSymbol:!0});t.isSome(l)&&(o[n]=l)}function c(e){return e instanceof s||e instanceof r}function m(e,o,s){if(t.isNone(e))return null;const{context:r,isLabelSymbol:b}=s,a=r?.origin,m=r?.messages;if("web-scene"===a&&!c(e)){const s=l.to3D(e,{retainCIM:!0,hasLabelingContext:b});return t.isSome(s.symbol)?s.symbol.write(o,r):(m?.push(new n("symbol:unsupported",`Symbols of type '${e.declaredClass}' are not supported in scenes. Use 3D symbology instead when working with WebScene and SceneView`,{symbol:e,context:r,error:s.error})),null)}const u=r?.layer?.type;return"web-map"!==a&&("portal-item"!==a||u&&i.includes(u))||!c(e)?e.write(o,r):(m?.push(new n("symbol:unsupported",`Symbols of type '${e.declaredClass}' are not supported in web maps and portal items. Use 2D symbology and CIMSymbol instead when working with MapView`,{symbol:e,context:r})),null)}function u(e,n){return o.readSymbol(e,null,n)}e.fromJSON=u,e.write=b,e.writeLabelSymbol=a,Object.defineProperties(e,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})}));
