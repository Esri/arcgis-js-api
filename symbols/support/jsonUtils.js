/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.24/esri/copyright.txt for details.
*/
import{readSymbol as e}from"../../symbols.js";import o from"../../core/Error.js";import{isSome as n,isNone as t}from"../../core/maybe.js";import s from"../Symbol3D.js";import{to3D as r}from"./symbolConversion.js";import i from"../WebStyleSymbol.js";const l=["building-scene","integrated-mesh","point-cloud","scene"];function m(e,o,t,s){const r=a(e,{},{context:s,isLabelSymbol:!1});n(r)&&(o[t]=r)}function b(e,o,t,s){const r=a(e,{},{context:s,isLabelSymbol:!0});n(r)&&(o[t]=r)}function c(e){return e instanceof s||e instanceof i}function a(e,s,i){if(t(e))return null;const{context:m,isLabelSymbol:b}=i,a=m?.origin,p=m?.messages;if("web-scene"===a&&!c(e)){const t=r(e,{retainCIM:!0,hasLabelingContext:b});return n(t.symbol)?t.symbol.write(s,m):(p?.push(new o("symbol:unsupported",`Symbols of type '${e.declaredClass}' are not supported in scenes. Use 3D symbology instead when working with WebScene and SceneView`,{symbol:e,context:m,error:t.error})),null)}return("web-map"===a||"portal-item"===a&&!l.includes(m?.layer?.type))&&c(e)?(p?.push(new o("symbol:unsupported",`Symbols of type '${e.declaredClass}' are not supported in web maps and portal items. Use 2D symbology and CIMSymbol instead when working with MapView`,{symbol:e,context:m})),null):e.write(s,m)}function p(o,n){return e(o,null,n)}export{p as fromJSON,m as write,b as writeLabelSymbol};
