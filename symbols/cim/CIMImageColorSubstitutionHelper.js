/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.25/esri/copyright.txt for details.
*/
define(["../../Color"],(function(t){"use strict";return function(){function a(){}var n=a.prototype;return n.applyColorSubstituition=function(t,a){if(!a)return t;this._rasterizationCanvas||(this._rasterizationCanvas=document.createElement("canvas"));const{width:n,height:e}=t,o=this._rasterizationCanvas,r=o.getContext("2d");t!==o&&(o.width=n,o.height=e,r.drawImage(t,0,0,n,e));const i=r.getImageData(0,0,n,e).data;if(a)for(const g of a)if(g&&g.oldColor&&4===g.oldColor.length&&g.newColor&&4===g.newColor.length){const[t,a,n,e]=g.oldColor,[o,r,s,h]=g.newColor;if(t===o&&a===r&&n===s&&e===h)continue;for(let g=0;g<i.length;g+=4)t===i[g]&&a===i[g+1]&&n===i[g+2]&&e===i[g+3]&&(i[g]=o,i[g+1]=r,i[g+2]=s,i[g+3]=h)}const s=new ImageData(i,n,e);return r.putImageData(s,0,0),o},n.tintImageData=function(a,n){if(!n)return a;this._rasterizationCanvas||(this._rasterizationCanvas=document.createElement("canvas"));const{width:e,height:o}=a,r=this._rasterizationCanvas,i=r.getContext("2d");a!==r&&(r.width=e,r.height=o,i.drawImage(a,0,0,e,o));const s=i.getImageData(0,0,e,o),g=new Uint8Array(s.data),h=new t(n),c=[h.r/255,h.g/255,h.b/255,h.a];for(let t=0;t<g.length;t+=4)g[t+0]*=c[0],g[t+1]*=c[1],g[t+2]*=c[2],g[t+3]*=c[3];const l=new ImageData(new Uint8ClampedArray(g.buffer),e,o);return i.putImageData(l,0,0),r},a}()}));
