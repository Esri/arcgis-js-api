/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
define(["exports"],(function(t){"use strict";const e=.03;let n=function(){function t(){this._path=[]}var e=t.prototype;return e.path=function(){return this._path},e.addPath=function(t,e){e||t.reverse(),Array.prototype.push.apply(this._path,t),e||t.reverse()},t.mergePath=function(t,e){e&&Array.prototype.push.apply(t,e)},e.startPath=function(t){this._path.push(t)},e.lineTo=function(t){this._path.push(t)},e.close=function(){const t=this._path;t.length>1&&(t[0][0]===t[t.length-1][0]&&t[0][1]===t[t.length-1][1]||t.push([t[0][0],t[0][1]]))},t}(),s=function(){function t(t=0,e=!1){}var e=t.prototype;return e.normalize=function(t){const e=Math.sqrt(t[0]*t[0]+t[1]*t[1]);t[0]/=e,t[1]/=e},e.calculateLength=function(t,e){const n=e[0]-t[0],s=e[1]-t[1];return Math.sqrt(n*n+s*s)},e.calculateSegLength=function(t,e){return this.calculateLength(t[e],t[e+1])},e.calculatePathLength=function(t){let e=0;const n=t?t.length:0;for(let s=0;s<n-1;++s)e+=this.calculateSegLength(t,s);return e},e.calculatePathArea=function(t){let e=0;const n=t?t.length:0;for(let s=0;s<n-1;++s)e+=(t[s+1][0]-t[s][0])*(t[s+1][1]+t[s][1]);return e/2},e.getCoord2D=function(t,e,n){return[t[0]+(e[0]-t[0])*n,t[1]+(e[1]-t[1])*n]},e.getSegCoord2D=function(t,e,n){return this.getCoord2D(t[e],t[e+1],n)},e.getAngle=function(t,e,n){const s=e[0]-t[0],o=e[1]-t[1];return Math.atan2(o,s)},e.getSegAngle=function(t,e,n){return this.getAngle(t[e],t[e+1],n)},e.getAngleCS=function(t,e,n){const s=e[0]-t[0],o=e[1]-t[1],r=Math.sqrt(s*s+o*o);return r>0?[s/r,o/r]:[1,0]},e.getSegAngleCS=function(t,e,n){return this.getAngleCS(t[e],t[e+1],n)},e.cut=function(t,e,n,s){return[n<=0?t[e]:this.getSegCoord2D(t,e,n),s>=1?t[e+1]:this.getSegCoord2D(t,e,s)]},e.addSegment=function(t,e,n){n&&t.push(e[0]),t.push(e[1])},e.getSubCurve=function(t,e,n){const s=[];return this.appendSubCurve(s,t,e,n)?s:null},e.appendSubCurve=function(t,e,n,s){const o=e?e.length-1:0;let r=0,u=!0,i=0;for(;i<o;){const o=this.calculateSegLength(e,i);if(0!==o){if(u){if(r+o>n){const h=(n-r)/o;let c=1,l=!1;r+o>=s&&(c=(s-r)/o,l=!0);const a=this.cut(e,i,h,c);if(a&&this.addSegment(t,a,u),l)break;u=!1}}else{if(r+o>s){const n=this.cut(e,i,0,(s-r)/o);n&&this.addSegment(t,n,u);break}this.addSegment(t,[e[i],e[i+1]],u)}r+=o,++i}else++i}return!0},e.getCIMPointAlong=function(t,e){const n=t?t.length-1:0;let s=0,o=-1;for(;o<n;){++o;const n=this.calculateSegLength(t,o);if(0!==n){if(s+n>e){const r=(e-s)/n;return this.getCoord2D(t[o],t[o+1],r)}s+=n}}return null},e.isEmpty=function(t,e){if(!t||t.length<=1)return!0;const n=t?t.length-1:0;let s=-1;for(;s<n;){if(++s,t[s+1][0]!==t[s][0]||t[s+1][1]!==t[s][1])return!1;if(e&&t[s+1][2]!==t[s][2])return!1}return!0},e.offset=function(t,e,n,s,o){if(!t||t.length<2)return null;let r=0,u=t[r++],i=r;for(;r<t.length;){const e=t[r];e[0]===u[0]&&e[1]===u[1]||(r!==i&&(t[i]=t[r]),u=t[i++]),r++}const h=t[0][0]===t[i-1][0]&&t[0][1]===t[i-1][1];if(h&&--i,i<(h?3:2))return null;const c=[];u=h?t[i-1]:null;let l=t[0];for(let a=0;a<i;a++){const o=a===i-1?h?t[0]:null:t[a+1];if(u)if(o){const t=[o[0]-l[0],o[1]-l[1]];this.normalize(t);const r=[l[0]-u[0],l[1]-u[1]];this.normalize(r);const i=r[0]*t[1]-r[1]*t[0],h=r[0]*t[0]+r[1]*t[1];if(i>=0==e<=0){if(h<1){const n=[t[0]-r[0],t[1]-r[1]];this.normalize(n);const o=Math.sqrt((1+h)/2);if(o>1/s){const t=-Math.abs(e)/o;c.push([l[0]-n[0]*t,l[1]-n[1]*t])}}}else switch(n){case"Mitered":{const n=Math.sqrt((1+h)/2);if(n>0&&1/n<s){const s=[t[0]-r[0],t[1]-r[1]];this.normalize(s);const o=Math.abs(e)/n;c.push([l[0]-s[0]*o,l[1]-s[1]*o]);break}}case"Bevelled":c.push([l[0]+r[1]*e,l[1]-r[0]*e]),c.push([l[0]+t[1]*e,l[1]-t[0]*e]);break;case"Rounded":if(h<1){c.push([l[0]+r[1]*e,l[1]-r[0]*e]);const n=Math.floor(2.5*(1-h));if(n>0){const s=1/n;let o=s;for(let u=1;u<n;u++,o+=s){const n=[r[1]*(1-o)+t[1]*o,-r[0]*(1-o)-t[0]*o];this.normalize(n),c.push([l[0]+n[0]*e,l[1]+n[1]*e])}}c.push([l[0]+t[1]*e,l[1]-t[0]*e])}break;default:if(i<0)c.push([l[0]+(r[1]+r[0])*e,l[1]+(r[1]-r[0])*e]),c.push([l[0]+(t[1]-t[0])*e,l[1]-(t[0]+t[1])*e]);else{const n=Math.sqrt((1+Math.abs(h))/2),s=[t[0]-r[0],t[1]-r[1]];this.normalize(s);const o=e/n;c.push([l[0]-s[0]*o,l[1]-s[1]*o])}}}else{const t=[l[0]-u[0],l[1]-u[1]];this.normalize(t),c.push([l[0]+t[1]*e,l[1]-t[0]*e])}else{const t=[o[0]-l[0],o[1]-l[1]];this.normalize(t),c.push([l[0]+t[1]*e,l[1]-t[0]*e])}u=l,l=o}return c.length<(h?3:2)?null:(h&&c.push([c[0][0],c[0][1]]),c)},t}();t.CurveHelper=s,t.PIXEL_TOLERANCE=e,t.PathHelper=n,Object.defineProperty(t,"__esModule",{value:!0})}));
