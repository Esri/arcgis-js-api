/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.18/esri/copyright.txt for details.
*/
define(["exports","../../../chunks/_rollupPluginBabelHelpers","../CIMCursor","../CurveHelper"],(function(e,t,n,i){"use strict";let s=function(){function e(){}return e.local=function(){return null===e.instance&&(e.instance=new e),e.instance},e.prototype.execute=function(e,t,n){return new r(e,t,n)},e}();s.instance=null;let r=function(e){function s(t,n,s){var r;return(r=e.call(this,t,!1,!0)||this)._curveHelper=new i.CurveHelper,r._angleToLine=void 0===n.angleToLine||n.angleToLine,r._offset=void 0!==n.offset?n.offset*s:0,r._type=n.extremityPlacement,r._position=void 0!==n.offsetAlongLine?n.offsetAlongLine*s:0,r._beginProcessed=!1,r}t._inheritsLoose(s,e);var r=s.prototype;return r.processPath=function(e){let t;switch(this._type){case"Both":default:this._beginProcessed?(t=this._atExtremities(e,this._position,!1),this._beginProcessed=!1,this.iteratePath=!1):(t=this._atExtremities(e,this._position,!0),this._beginProcessed=!0,this.iteratePath=!0);break;case"JustBegin":t=this._atExtremities(e,this._position,!0);break;case"JustEnd":t=this._atExtremities(e,this._position,!1);break;case"None":}return t},r._atExtremities=function(e,t,i){const s=e.length;if(s<2)return null;const r=i?1:s-2,o=i?s:-1,l=i?1:-1;let a,c=0,u=i?e[0]:e[s-1];for(let i=r;i!==o;i+=l){a=u,u=e[i];const s=this._curveHelper.calculateLength(a,u);if(c+s>t){const e=(t-c)/s,[i,r]=this._curveHelper.getAngleCS(a,u,e),o=n.getCoord2D(a,u,e);return this.internalPlacement.setTranslate(o[0]-this._offset*r,o[1]+this._offset*i),this._angleToLine&&this.internalPlacement.setRotateCS(-i,-r),this.internalPlacement}c+=s}return null},s}(n.PathTransformationCursor);e.PlacementAtExtremities=s,Object.defineProperty(e,"__esModule",{value:!0})}));
