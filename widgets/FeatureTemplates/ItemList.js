/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.24/esri/copyright.txt for details.
*/
import{Heading as e}from"../support/Heading.js";import{classes as t,isActivationKey as i}from"../support/widgetUtils.js";import{tsx as n}from"../support/jsxFactory.js";const s={base:"esri-item-list",list:"esri-item-list__list",group:"esri-item-list__group",scroller:"esri-item-list__scroller",groupHeader:"esri-item-list__group__header",item:"esri-item-list__list-item",itemSelected:"esri-item-list__list-item--selected",itemContainer:"esri-item-list__list-item-container",itemLabel:"esri-item-list__list-item-label",noMatchesMessage:"esri-item-list__no-matches-message",noItemsMessage:"esri-item-list__no-items-message",filterContainer:"esri-item-list__filter-container",filterContainerSticky:"esri-item-list__filter-container--sticky",filterPlaceholder:"esri-item-list__filter-placeholder",filterInput:"esri-item-list__filter-input",filterPlaceholderText:"esri-item-list__filter-placeholder-text",searchIcon:"esri-icon-search",widget:"esri-widget",input:"esri-input"};function r(e){const{id:t,identify:i,filterEnabled:s=!0,headingLevel:r=4,items:l,selectedItem:c,messages:m,filterText:u="",onFilterChange:d,renderIcon:I,onItemMouseLeave:f,onItemMouseEnter:g,onItemSelect:p}=e,_=e.enableListScroll??!0;return n("div",{key:t},s?a({filterText:u,messages:m,onFilterChange:d,id:t}):null,o({enableListScroll:_,identify:i,items:l,selectedItem:c,messages:m,filterText:u,headingLevel:r,renderIcon:I,onItemMouseLeave:f,onItemMouseEnter:g,onItemSelect:p}))}function l(e){return!!e.items}function o(e){const{headingLevel:t,identify:i,items:r,renderIcon:o,filterText:a,onItemMouseLeave:u,onItemMouseEnter:d,onItemSelect:I,selectedItem:f}=e,g=e.enableListScroll?s.scroller:null;return 0===r.length?n("div",{class:s.noMatchesMessage,key:"no-matches"},e.messages.noMatches):n("div",{class:g,key:"item-container"},r.map((e=>l(e)?m({group:e,filterText:a,headingLevel:t,identify:i,onItemMouseLeave:u,onItemMouseEnter:d,onItemSelect:I,renderIcon:o,selectedItem:f}):c({item:e,identify:i,grouped:!0,onItemMouseLeave:u,onItemMouseEnter:d,onItemSelect:I,renderIcon:o,filterText:a,selectedItem:f}))))}function a(e){const{messages:t,filterText:i,enableListScroll:r}=e;return n("div",{key:"filter",class:r?null:s.filterContainerSticky},n("calcite-input",{onCalciteInputInput:t=>{const i=t.currentTarget;e.onFilterChange&&e.onFilterChange(i.value)},placeholder:t.filterPlaceholder,value:i,type:"search"}))}function c(e){const{identify:r,item:l,selectedItem:o,grouped:a,onItemSelect:c,onItemMouseEnter:m,onItemMouseLeave:u,renderIcon:d}=e,I=`${r?.(l)||l.id}__${l.label}`,f=o?`${r?.(o)||o.id}__${o.label}`:"";return n("calcite-list-item",{"aria-level":a?"2":"","data-item":l,key:I,class:t(s.item,I===f?s.itemSelected:""),label:l.label,onclick:e=>{const t=e.currentTarget["data-item"];c&&c(t)},onmouseenter:e=>{const t=e.currentTarget["data-item"];m&&m(t)},onkeydown:e=>{if(!i(e.key))return;const t=e.currentTarget["data-item"];c&&c(t)},onmouseleave:e=>{const t=e.currentTarget["data-item"];u&&u(t)},tabIndex:0},n("div",{slot:"content-start"},d&&d({item:l})))}function m(t){const{group:i,identify:r,onItemMouseLeave:l,onItemMouseEnter:o,onItemSelect:a,filterText:m,renderIcon:u,selectedItem:d,headingLevel:I}=t;return n("div",{class:s.group,key:i.label},n(e,{level:I,class:s.groupHeader},i.label),i.items.map((e=>c({item:e,identify:r,grouped:!0,onItemMouseLeave:l,onItemMouseEnter:o,onItemSelect:a,renderIcon:u,filterText:m,selectedItem:d}))))}function u(e){const{match:t,text:i}=e;let r=null;if(t){const e=i.toLowerCase(),s=t.toLowerCase(),l=e.indexOf(s);if(-1===l)r=i;else{const e=i.substring(0,l),s=i.substr(l,t.length),o=i.substring(l+t.length);r=n("span",null,e,n("strong",null,s),o)}}else r=i;return n("span",{class:s.itemLabel},r)}export{r as ItemList,m as renderGroup,c as renderItem,u as renderLabel};
