/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.25/esri/copyright.txt for details.
*/
define(["../chunks/_rollupPluginBabelHelpers","../chunks/tslib.es6","../core/accessorSupport/decorators/property","../core/arrayUtils","../core/accessorSupport/decorators/cast","../core/accessorSupport/decorators/subclass","./Widget","./BuildingExplorer/BuildingExplorerViewModel","./BuildingExplorer/BuildingDisciplinesTree/BuildingDisciplinesTree","./BuildingExplorer/BuildingLevelPicker/BuildingLevelPicker","./BuildingExplorer/BuildingPhasePicker/BuildingPhasePicker","./support/Heading","./support/widgetUtils","./support/decorators/messageBundle","./support/jsxFactory"],(function(e,i,s,t,r,n,l,o,a,d,c,p,u,g,h){"use strict";const v={levels:!0,phases:!0,disciplines:!0},_="esri-building-explorer",y={esriWidget:"esri-widget",esriWidgetDisabled:"esri-widget--disabled",esriIconLoadingIndicator:"esri-icon-loading-indicator",esriRotating:"esri-rotating",widgetIcon:"esri-icon-organization",base:`${_} esri-widget--panel`,panelError:`${_}__panel--error`,loadingContainer:`${_}__loading-container`,content:`${_}__content`,section:`${_}__section`,levels:`${_}__levels`,phases:`${_}__phases`,disciplines:`${_}__disciplines`};let m=function(i){function s(e,s){var t;return(t=i.call(this,e,s)||this)._defaultViewModel=new o,t.viewModel=t._defaultViewModel,t.visibleElements={...v},t.headingLevel=3,t.iconClass=y.widgetIcon,t.messages=null,t.messagesCommon=null,t.toggleSiblingsVisibility=!1,t}e._inheritsLoose(s,i);var t=s.prototype;return t.destroy=function(){this.viewModel!==this._defaultViewModel&&this._defaultViewModel.destroy()},t._castVisibleElements=function(e){return{...v,...e}},t.render=function(){const e=this.viewModel,i="disabled"===e.state||!e.isSupported;return h.tsx("div",{key:this,class:u.classes(y.esriWidget,y.base,{[y.esriWidgetDisabled]:i}),"aria-label":this.messages.widgetLabel},this._renderContent())},t._renderContent=function(){const e=this.viewModel,i=this.messages;if(!e.isSupported)return h.tsx("p",{class:y.panelError},i.unsupported);if(!e.layers.length)return h.tsx("p",{class:y.panelError},i.noData);switch(e.state){case"loading":return this._renderLoadingIndicator();case"ready":return h.tsx("div",{key:"content",class:y.content},this._renderLevelPickerSection(),this._renderPhasePickerSection(),this._renderDisciplinesSection());case"failed":return h.tsx("p",{class:y.panelError},i.failed);default:return null}},t._renderLoadingIndicator=function(){const e=this.messagesCommon.loading;return h.tsx("div",{key:"loading-container",role:"presentation",class:y.loadingContainer,"aria-label":e,title:e},h.tsx("span",{"aria-hidden":"true",class:u.classes(y.esriIconLoadingIndicator,y.esriRotating)}))},t._renderLevelPickerSection=function(){const e=this.viewModel.level,i="ready"===e.state,s=e.allowedValues.length>1;if(!this.visibleElements.levels||!i||!s)return null;const t=this.messages?.level;return h.tsx("div",{key:"levels",class:u.classes(y.section,y.levels)},h.tsx(p.Heading,{level:this.headingLevel},t?.title),h.tsx(d,{vm:e,messages:t}))},t._renderPhasePickerSection=function(){const e=this.viewModel.phase,i="ready"===e.state,s=e.allowedValues.length>1;if(!this.visibleElements.phases||!i||!s)return null;const t=this.messages.phase;return h.tsx("div",{key:"phases",class:u.classes(y.section,y.phases)},h.tsx(p.Heading,{level:this.headingLevel},t.title),h.tsx(c,{vm:e,messages:t}))},t._renderDisciplinesSection=function(){const e=this.viewModel.disciplines,i="ready"===e.state,s=e.root.hasChildren;if(!this.visibleElements.disciplines||!i||!s)return null;const t=this.messages?.disciplines;return h.tsx("div",{key:"disciplines",class:u.classes(y.section,y.disciplines)},h.tsx(p.Heading,{level:this.headingLevel},t.title),h.tsx(a,{vm:e,messages:t,toggleSiblingsVisibility:this.toggleSiblingsVisibility}))},e._createClass(s,[{key:"view",get:function(){return this.viewModel.view},set:function(e){this.viewModel.view=e}},{key:"layers",get:function(){return this.viewModel.layers},set:function(e){this.viewModel.layers=e}},{key:"label",get:function(){return this.messages?.widgetLabel??""},set:function(e){this._overrideIfSome("label",e)}}]),s}(l);i.__decorate([s.property({type:o})],m.prototype,"viewModel",void 0),i.__decorate([s.property()],m.prototype,"view",null),i.__decorate([s.property()],m.prototype,"layers",null),i.__decorate([s.property()],m.prototype,"visibleElements",void 0),i.__decorate([r.cast("visibleElements")],m.prototype,"_castVisibleElements",null),i.__decorate([s.property()],m.prototype,"headingLevel",void 0),i.__decorate([s.property()],m.prototype,"iconClass",void 0),i.__decorate([s.property()],m.prototype,"label",null),i.__decorate([s.property(),g.messageBundle("esri/widgets/BuildingExplorer/t9n/BuildingExplorer")],m.prototype,"messages",void 0),i.__decorate([s.property(),g.messageBundle("esri/t9n/common")],m.prototype,"messagesCommon",void 0),i.__decorate([s.property({nonNullable:!0})],m.prototype,"toggleSiblingsVisibility",void 0),i.__decorate([s.property()],m.prototype,"uiStrings",void 0),m=i.__decorate([n.subclass("esri.widgets.BuildingExplorer")],m);return m}));
