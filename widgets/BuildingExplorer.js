/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.26/esri/copyright.txt for details.
*/
define(["../chunks/_rollupPluginBabelHelpers","../chunks/tslib.es6","../core/accessorSupport/decorators/property","../core/accessorSupport/decorators/cast","../core/arrayUtils","../core/accessorSupport/decorators/subclass","./Widget","./BuildingExplorer/BuildingExplorerViewModel","./BuildingExplorer/css","./BuildingExplorer/BuildingDisciplinesTree/BuildingDisciplinesTree","./BuildingExplorer/BuildingLevelPicker/BuildingLevelPicker","./BuildingExplorer/BuildingPhasePicker/BuildingPhasePicker","./support/Heading","./support/widgetUtils","./support/decorators/messageBundle","./support/jsxFactory"],(function(e,s,i,t,r,l,n,o,a,d,c,p,u,g,h,v){"use strict";const y={levels:!0,phases:!0,disciplines:!0};let S=function(s){function i(e,i){var t;return(t=s.call(this,e,i)||this)._defaultViewModel=new o,t.viewModel=t._defaultViewModel,t.visibleElements={...y},t.headingLevel=3,t.iconClass=a.CSS.widgetIcon,t.messages=null,t.messagesCommon=null,t.toggleSiblingsVisibility=!1,t}e._inheritsLoose(i,s);var t=i.prototype;return t.destroy=function(){this.viewModel!==this._defaultViewModel&&this._defaultViewModel.destroy()},t._castVisibleElements=function(e){return{...y,...e}},t.render=function(){const e=this.viewModel,s="disabled"===e.state||!e.isSupported;return v.tsx("div",{key:this,class:g.classes(a.CSS.esriWidget,a.CSS.base,{[a.CSS.esriWidgetDisabled]:s}),"aria-label":this.messages.widgetLabel},this._renderContent())},t._renderContent=function(){const e=this.viewModel,s=this.messages;if(!e.isSupported)return v.tsx("p",{class:a.CSS.panelError},s.unsupported);if(!e.layers.length)return v.tsx("p",{class:a.CSS.panelError},s.noData);switch(e.state){case"loading":return this._renderLoadingIndicator();case"ready":return v.tsx("div",{key:"content",class:a.CSS.content},this._renderLevelPickerSection(),this._renderPhasePickerSection(),this._renderDisciplinesSection());case"failed":return v.tsx("p",{class:a.CSS.panelError},s.failed);default:return null}},t._renderLoadingIndicator=function(){const e=this.messagesCommon.loading;return v.tsx("div",{key:"loading-container",role:"presentation",class:a.CSS.loadingContainer,"aria-label":e,title:e},v.tsx("span",{"aria-hidden":"true",class:g.classes(a.CSS.esriIconLoadingIndicator,a.CSS.esriRotating)}))},t._renderLevelPickerSection=function(){const e=this.viewModel.level,s="ready"===e.state,i=e.allowedValues.length>1;if(!this.visibleElements.levels||!s||!i)return null;const t=this.messages?.level;return v.tsx("div",{key:"levels",class:g.classes(a.CSS.section,a.CSS.levels)},v.tsx(u.Heading,{level:this.headingLevel},t?.title),v.tsx(c,{vm:e,messages:t}))},t._renderPhasePickerSection=function(){const e=this.viewModel.phase,s="ready"===e.state,i=e.allowedValues.length>1;if(!this.visibleElements.phases||!s||!i)return null;const t=this.messages.phase;return v.tsx("div",{key:"phases",class:g.classes(a.CSS.section,a.CSS.phases)},v.tsx(u.Heading,{level:this.headingLevel},t.title),v.tsx(p,{vm:e,messages:t}))},t._renderDisciplinesSection=function(){const e=this.viewModel.disciplines,s="ready"===e.state,i=e.root.hasChildren;if(!this.visibleElements.disciplines||!s||!i)return null;const t=this.messages?.disciplines;return v.tsx("div",{key:"disciplines",class:g.classes(a.CSS.section,a.CSS.disciplines)},v.tsx(u.Heading,{level:this.headingLevel},t.title),v.tsx(d,{vm:e,messages:t,toggleSiblingsVisibility:this.toggleSiblingsVisibility}))},e._createClass(i,[{key:"view",get:function(){return this.viewModel.view},set:function(e){this.viewModel.view=e}},{key:"layers",get:function(){return this.viewModel.layers},set:function(e){this.viewModel.layers=e}},{key:"label",get:function(){return this.messages?.widgetLabel??""},set:function(e){this._overrideIfSome("label",e)}}]),i}(n);s.__decorate([i.property({type:o})],S.prototype,"viewModel",void 0),s.__decorate([i.property()],S.prototype,"view",null),s.__decorate([i.property()],S.prototype,"layers",null),s.__decorate([i.property()],S.prototype,"visibleElements",void 0),s.__decorate([t.cast("visibleElements")],S.prototype,"_castVisibleElements",null),s.__decorate([i.property()],S.prototype,"headingLevel",void 0),s.__decorate([i.property()],S.prototype,"iconClass",void 0),s.__decorate([i.property()],S.prototype,"label",null),s.__decorate([i.property(),h.messageBundle("esri/widgets/BuildingExplorer/t9n/BuildingExplorer")],S.prototype,"messages",void 0),s.__decorate([i.property(),h.messageBundle("esri/t9n/common")],S.prototype,"messagesCommon",void 0),s.__decorate([i.property({nonNullable:!0})],S.prototype,"toggleSiblingsVisibility",void 0),s.__decorate([i.property()],S.prototype,"uiStrings",void 0),S=s.__decorate([l.subclass("esri.widgets.BuildingExplorer")],S);return S}));
