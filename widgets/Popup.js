/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.26/esri/copyright.txt for details.
*/
define(["require","../chunks/_rollupPluginBabelHelpers","../chunks/tslib.es6","../intl","../core/Collection","../core/events","../core/Handles","../core/Logger","../core/maybe","../core/reactiveUtils","../core/throttle","../core/accessorSupport/decorators/property","../core/accessorSupport/decorators/cast","../core/arrayUtils","../core/accessorSupport/decorators/subclass","./Feature","./Spinner","./Widget","./Feature/resources","./Feature/support/FeatureContentMixin","./Popup/actionUtils","./Popup/css","./Popup/PopupViewModel","./support/Heading","./support/decorators/accessibleHandler","./support/decorators/messageBundle","./support/decorators/vmEvent","./support/jsxFactory","./support/widgetUtils","../support/themeUtils","../intl/substitute"],(function(e,t,n,o,i,s,r,a,l,c,u,d,h,p,f,_,g,v,w,m,b,y,M,S,C,k,A,F,x,I,O){"use strict";const N="selected-index",E=0,P="popup-spinner",T={buttonEnabled:!0,position:"auto",breakpoint:{width:544}},B="esri-popup";function D(e,t){return void 0===t?`${B}__${e}`:`${B}__${e}-${t}`}const L={closeButton:!0,featureNavigation:!0};let R=function(n){function o(e,t){var o;return(o=n.call(this,e,t)||this)._blurClose=!1,o._blurContainer=!1,o._containerNode=null,o._mainContainerNode=null,o._featureMenuNode=null,o._actionsMenuNode=null,o._focusClose=!1,o._focusContainer=!1,o._focusDockButton=!1,o._focusFeatureMenuButton=!1,o._focusActionsMenuButton=!1,o._focusFirstFeature=!1,o._focusFirstAction=!1,o._handles=new r,o._pointerOffsetInPx=16,o._spinner=null,o._feature=null,o._featureMenuIntersectionObserverNode=null,o._featureMenuViewportNode=null,o._rootFlowItemNode=null,o._featureMenuIntersectionObserverCallback=([e])=>{e?.isIntersecting&&null!=o.viewModel.featurePage&&o.viewModel.featurePage++},o._featureMenuIntersectionObserver=new IntersectionObserver(o._featureMenuIntersectionObserverCallback,{root:window.document}),o._displaySpinnerThrottled=u.throttle((()=>o._displaySpinner()),E),o._exitRelatedRecordsActions=new WeakMap,o._featureSelectionActions=new WeakMap,o._flowItems=new i,o.alignment="auto",o.collapsed=!1,o.collapseEnabled=!0,o.dockEnabled=!1,o.featureMenuOpen=!1,o.headingLevel=2,o.maxInlineActions=3,o.messages=null,o.messagesCommon=null,o.spinnerEnabled=!0,o.viewModel=new M,o.visibleElements={...L},o._handleOpenRelatedFeature=e=>{o._openRelatedFeature(e)},o._addSelectedFeatureIndexHandle(),o.addHandles([c.watch((()=>o.viewModel?.screenLocation),(()=>o._positionContainer())),c.watch((()=>[o.viewModel?.active,o.dockEnabled]),(()=>o._toggleScreenLocationEnabled())),c.watch((()=>o.viewModel?.screenLocation),((e,t)=>{!!e!=!!t&&o.reposition()})),c.watch((()=>[o.viewModel?.view?.padding,o.viewModel?.view?.size,o.viewModel?.active,o.viewModel?.location,o.alignment]),(()=>o.reposition())),c.watch((()=>o.spinnerEnabled),(e=>o._spinnerEnabledChange(e))),c.watch((()=>o.viewModel?.view?.size),((e,t)=>o._updateDockEnabledForViewSize(e,t))),c.watch((()=>o.viewModel?.view),((e,t)=>o._viewChange(e,t))),c.watch((()=>o.viewModel?.view?.ready),((e,t)=>o._viewReadyChange(e??!1,t??!1))),c.watch((()=>[o.viewModel?.waitingForResult,o.viewModel?.location]),(()=>{o._hideSpinner(),o._displaySpinnerThrottled()})),c.watch((()=>o.selectedFeatureWidget),(()=>o._destroyFlowItemWidgets())),c.watch((()=>[o.selectedFeatureWidget?.viewModel?.title,o.selectedFeatureWidget?.viewModel?.state]),(()=>o._setTitleFromFeatureWidget())),c.watch((()=>[o.selectedFeatureWidget?.viewModel?.content,o.selectedFeatureWidget?.viewModel?.state]),(()=>o._setContentFromFeatureWidget())),c.when((()=>!o.collapsed),(()=>{"xsmall"===o.viewModel?.view?.widthBreakpoint&&o.viewModel.active&&o.collapseEnabled&&o.viewModel.centerAtLocation()})),c.on((()=>o.viewModel?.allActions),"change",(()=>o._watchActions())),c.watch((()=>o.viewModel?.allActions),(()=>o._watchActions()),c.initial),c.watch((()=>o.viewModel?.featureViewModels),(()=>o._featureMenuViewportScrollTop())),c.on((()=>o._flowItems),"change",(()=>{o.notifyChange("_activeFlowItemWidget"),o.scheduleRender()})),c.watch((()=>[o._activeFlowItemWidget?.viewModel?.state,o._activeFlowItemWidget?.viewModel?.title]),(()=>o.scheduleRender()))]),o}t._inheritsLoose(o,n);var d=o.prototype;return d.loadDependencies=function(){return Promise.all([new Promise(((t,n)=>e(["../chunks/calcite-flow"],t,n))),new Promise(((t,n)=>e(["../chunks/calcite-flow-item"],t,n))),new Promise(((t,n)=>e(["../chunks/calcite-action"],t,n))),new Promise(((t,n)=>e(["../chunks/calcite-tooltip"],t,n))),new Promise(((t,n)=>e(["../chunks/calcite-icon"],t,n)))])},d.destroy=function(){this._destroyFlowItemWidgets(),this._destroySelectedFeatureWidget(),this._destroySpinner(),this._handles?.destroy(),this._unobserveFeatureMenuObserver(),this._featureMenuIntersectionObserver?.disconnect()},d.castVisibleElements=function(e){return{...L,...e}},d.blur=function(){const{active:e}=this.viewModel;e||a.getLogger(this.declaredClass).warn("Popup can only be blurred when currently active."),this.visibleElements.closeButton?this._blurClose=!0:this._blurContainer=!0,this.scheduleRender()},d.clear=function(){return this.viewModel.clear()},d.close=function(){this.visible=!1},d.fetchFeatures=function(e,t){return this.viewModel.fetchFeatures(e,t)},d.focus=function(){const{active:e}=this.viewModel;e||a.getLogger(this.declaredClass).warn("Popup can only be focused when currently active."),this.visibleElements.closeButton?this._focusClose=!0:this._focusContainer=!0,this.scheduleRender()},d.next=function(){return this.viewModel.next()},d.open=function(e){this._handles.remove(N);const t=!!e&&!!e.featureMenuOpen,n=!!e&&!!e.actionsMenuOpen,o={collapsed:!!e&&!!e.collapsed,actionsMenuOpen:n,featureMenuOpen:t};"xsmall"===this.viewModel?.view?.widthBreakpoint&&(o.collapsed=!0),this.set(o),this.viewModel.open(e),this._shouldFocus(e),this._addSelectedFeatureIndexHandle()},d.previous=function(){return this.viewModel.previous()},d.reposition=function(){this.renderNow(),this._positionContainer(),this._setCurrentAlignment()},d.triggerAction=function(e){return this.viewModel.triggerAction(e)},d.render=function(){const{actionsMenuOpen:e,dockEnabled:t,featureMenuVisible:n,dividedActions:o,currentAlignment:i,currentDockPosition:s}=this,{active:r}=this.viewModel,{menuActions:a}=o,l=r&&a.length>1&&e,c=r&&t,u=r&&!t,d=this.selectedFeature?.layer?.title,h=this.selectedFeature?.layer?.id,p={[y.CSS.alignTopCenter]:"top-center"===i,[y.CSS.alignBottomCenter]:"bottom-center"===i,[y.CSS.alignTopLeft]:"top-left"===i,[y.CSS.alignBottomLeft]:"bottom-left"===i,[y.CSS.alignTopRight]:"top-right"===i,[y.CSS.alignBottomRight]:"bottom-right"===i,[y.CSS.isDocked]:c,[y.CSS.shadow]:u,[y.CSS.isDockedTopLeft]:"top-left"===s,[y.CSS.isDockedTopCenter]:"top-center"===s,[y.CSS.isDockedTopRight]:"top-right"===s,[y.CSS.isDockedBottomLeft]:"bottom-left"===s,[y.CSS.isDockedBottomCenter]:"bottom-center"===s,[y.CSS.isDockedBottomRight]:"bottom-right"===s,[y.CSS.isFeatureMenuOpen]:n,[y.CSS.isActionsMenuOpen]:l};return F.tsx("div",{class:this.classes(y.CSS.base,p),role:"presentation","data-layer-title":d,"data-layer-id":h,bind:this,afterCreate:this._positionContainer,afterUpdate:this._positionContainer},r?[this.renderMainContainer(),this.renderPointer()]:null)},d.renderLoadingIcon=function(){return F.tsx("span",{"aria-hidden":"true",class:this.classes(y.CSS.icon,y.CSS.iconLoading,y.CSS.rotating)})},d.renderNavigationLoading=function(){const{messagesCommon:e}=this;return this.viewModel.pendingPromisesCount?F.tsx("div",{key:D("loading-container"),role:"presentation",class:y.CSS.loadingContainer,"aria-label":e.loading,title:e.loading},this.renderLoadingIcon()):null},d.renderPreviousIcon=function(){const e=x.isRTL(this.container),t={[y.CSS.iconRightTriangleArrow]:e,[y.CSS.paginationPreviousIconRTL]:e,[y.CSS.iconLeftTriangleArrow]:!e,[y.CSS.paginationPreviousIconLTR]:!e};return F.tsx("span",{"aria-hidden":"true",class:this.classes(y.CSS.icon,t)})},d.renderPreviousButton=function(){const{messages:e}=this;return F.tsx("div",{role:"button",tabIndex:0,bind:this,onclick:this._previous,onkeydown:this._previous,class:this.classes(y.CSS.button,y.CSS.paginationPrevious),"aria-label":e.previous,title:e.previous},this.renderPreviousIcon())},d.renderNextIcon=function(){const e=x.isRTL(this.container),t={[y.CSS.iconLeftTriangleArrow]:e,[y.CSS.paginationNextIconRTL]:e,[y.CSS.iconRightTriangleArrow]:!e,[y.CSS.paginationNextIconLTR]:!e};return F.tsx("span",{"aria-hidden":"true",class:this.classes(y.CSS.icon,t)})},d.renderNextButton=function(){const{messages:e}=this;return F.tsx("div",{role:"button",tabIndex:0,bind:this,onclick:this._next,onkeydown:this._next,class:this.classes(y.CSS.button,y.CSS.paginationNext),"aria-label":e.next,title:e.next},this.renderNextIcon())},d.renderFeatureMenuButton=function(){const{featureMenuOpen:e,featureMenuId:t,messagesCommon:n}=this,{featureCount:o,selectedFeatureIndex:i}=this.viewModel;return F.tsx("div",{role:"button",tabIndex:0,bind:this,onclick:this._toggleFeatureMenu,onkeydown:this._toggleFeatureMenu,afterCreate:this._focusFeatureMenuButtonNode,afterUpdate:this._focusFeatureMenuButtonNode,class:this.classes(y.CSS.button,y.CSS.featureMenuButton),"aria-haspopup":"true","aria-controls":t,"aria-expanded":e.toString(),"aria-label":n.menu,title:n.menu},this._getPageText(o,i))},d.renderNavigationButtons=function(){return this.featureNavigationVisible?[this.renderPreviousButton(),this.renderNavigationLoading()||this.renderFeatureMenuButton(),this.renderNextButton()]:[]},d.renderDockIcon=function(){const{dockEnabled:e}=this,t=this._wouldDockTo(),n={[y.CSS.iconUndock]:e,[y.CSS.iconDock]:!e,[y.CSS.iconDockToRight]:!e&&("top-right"===t||"bottom-right"===t),[y.CSS.iconDockToLeft]:!e&&("top-left"===t||"bottom-left"===t),[y.CSS.iconDockToTop]:!e&&"top-center"===t,[y.CSS.iconDockToBottom]:!e&&"bottom-center"===t};return F.tsx("span",{"aria-hidden":"true",class:this.classes(n,y.CSS.icon)})},d.renderDockButton=function(){const{dockEnabled:e,messages:t}=this,n=this.viewModel?.view?.widthBreakpoint,o=e?t.undock:t.dock;return"xsmall"!==n&&this.dockOptions?.buttonEnabled?F.tsx("div",{role:"button","aria-label":o,title:o,tabIndex:0,bind:this,onclick:this._toggleDockEnabled,onkeydown:this._toggleDockEnabled,afterCreate:this._focusDockButtonNode,afterUpdate:this._focusDockButtonNode,class:this.classes(y.CSS.button,y.CSS.buttonDock)},this.renderDockIcon()):null},d.renderTitle=function(){const{title:e}=this.viewModel,{titleId:t,collapsible:n,contentCollapsed:o,messagesCommon:i}=this,s={[y.CSS.headerContainerButton]:n},r=F.tsx(S.Heading,{level:this.headingLevel,class:y.CSS.headerTitle,innerHTML:e??""}),a=n?F.tsx("button",{key:`${e}--collapsible`,id:t,title:o?i.expand:i.collapse,bind:this,enterAnimation:this._createFeatureUpdatedAnimation(),class:this.classes(y.CSS.headerContainer,s),"aria-expanded":o?"false":"true",onclick:this._toggleCollapsed,type:"button"},r,F.tsx("calcite-icon",{class:y.CSS.collapseIcon,key:"collapse-icon",icon:o?"chevron-down":"chevron-up",scale:"m"})):F.tsx("div",{key:e??"title",id:t,bind:this,enterAnimation:this._createFeatureUpdatedAnimation(),class:this.classes(y.CSS.headerContainer,s)},r);return e?a:null},d.renderCloseIcon=function(){return F.tsx("span",{"aria-hidden":"true",class:this.classes(y.CSS.icon,y.CSS.iconClose)})},d.renderCloseButton=function(){const{visibleElements:e,messagesCommon:t}=this;return e.closeButton?F.tsx("div",{role:"button",tabIndex:0,bind:this,onclick:this._close,onkeydown:this._close,class:y.CSS.button,"aria-label":t.close,title:t.close,afterCreate:this._closeButtonNodeUpdated,afterUpdate:this._closeButtonNodeUpdated},this.renderCloseIcon()):null},d.renderHeader=function(){return F.tsx("header",{class:y.CSS.header},this.renderTitle(),F.tsx("div",{class:y.CSS.headerButtons},this.renderDockButton(),this.renderCloseButton()))},d.renderContentContainer=function(){const{contentId:e,hasContent:t,contentCollapsed:n,_flowItems:o}=this,{content:i}=this.viewModel,s=o.toArray(),r={[y.CSS.contentHasFlows]:!!s.length};return t&&!n?F.tsx("div",{key:i??"content",enterAnimation:this._createFeatureUpdatedAnimation(),id:e,class:this.classes(y.CSS.content,r)},F.tsx("calcite-flow",{bind:this},F.tsx("calcite-flow-item",{bind:this,"data-node-ref":"_rootFlowItemNode",afterCreate:x.storeNode,key:"root-flow-item",onCalciteFlowItemBack:this._handleBackClick},this.renderContent()),s.map((e=>this.renderFlowItem(e)))),s.map((e=>this.renderFlowItemTooltips(e)))):null},d.renderFlowItem=function(e){const{messages:t}=this,n=I.isDarkTheme(),o="graphic"in e&&!e.isTable;return F.tsx("calcite-flow-item",{bind:this,class:this.classes({[y.CSS.calciteThemeDark]:!n,[y.CSS.calciteThemeLight]:n}),heading:e.title??"",description:this._getFlowItemDescription(e),onCalciteFlowItemBack:this._handleBackClick,key:`flow-item-${e.viewModel.uid}`},F.tsx("calcite-action",{class:y.CSS.actionExit,icon:"move-up",label:t?.exitRelatedRecords,text:t?.exitRelatedRecords,slot:"header-actions-start",bind:this,afterCreate:t=>this._storeExitRelatedRecordsAction(e,t),onclick:this._destroyFlowItemWidgets}),o?F.tsx("calcite-action",{class:y.CSS.actionSelectFeature,icon:"zoom-to-object",label:t?.selectFeature,text:t?.selectFeature,slot:"header-actions-end",bind:this,afterCreate:t=>this._storeFeatureSelectionAction(e,t),onclick:()=>this._handleOpenRelatedFeature(e)}):null,F.tsx("div",{class:this.classes(y.CSS.contentFlowItem,{[y.CSS.calciteThemeDark]:n,[y.CSS.calciteThemeLight]:!n})},e.render()))},d.renderFlowItemTooltips=function(e){const{messages:t,_exitRelatedRecordsActions:n,_featureSelectionActions:o}=this,i=I.isDarkTheme(),s=o.get(e);return[F.tsx("calcite-tooltip",{class:this.classes({[y.CSS.calciteThemeDark]:!i,[y.CSS.calciteThemeLight]:i}),key:`exit-related-records-tooltip-${e.viewModel.uid}`,label:t?.exitRelatedRecords,overlayPositioning:"fixed",referenceElement:n.get(e),placement:"top"},t?.exitRelatedRecords),s?F.tsx("calcite-tooltip",{class:this.classes({[y.CSS.calciteThemeDark]:!i,[y.CSS.calciteThemeLight]:i}),key:`select-related-record-tooltip-${e.viewModel.uid}`,label:t?.selectFeature,overlayPositioning:"fixed",referenceElement:s,placement:"top"},t?.selectFeature):null]},d.renderActionsMenuButton=function(){const{actionsMenuId:e,actionsMenuButtonId:t,actionsMenuOpen:n,dividedActions:o,messagesCommon:i}=this,s=n?i.close:i.open,{menuActions:r}=o;return r.length?F.tsx("div",{key:D("actions-menu-button"),class:this.classes(y.CSS.button,y.CSS.actionsMenuButton),role:"button",id:t,"aria-haspopup":"true","aria-controls":n?e:null,tabIndex:0,bind:this,onclick:this._toggleActionsMenu,onkeydown:this._toggleActionsMenu,afterCreate:this._focusActionsMenuButtonNode,afterUpdate:this._focusActionsMenuButtonNode,"aria-label":s,title:s},F.tsx("span",{"aria-hidden":"true",class:y.CSS.iconActionsMenu})):null},d.renderMenuActions=function(){const{actionsMenuId:e,actionsMenuButtonId:t,actionsMenuOpen:n,dividedActions:o}=this,{menuActions:i}=o;return i.length&&n?F.tsx("ul",{id:e,role:"menu","aria-labelledby":t,key:D("actions"),class:y.CSS.actions,bind:this,onkeyup:this._handleActionMenuKeyup,afterCreate:this._actionsMenuNodeUpdated,afterUpdate:this._actionsMenuNodeUpdated},i.toArray().map((e=>this.renderAction({action:e,type:"menu-item"})))):null},d.renderInlineActions=function(){const{inlineActions:e}=this.dividedActions;return e.length?e.toArray().map((e=>this.renderAction({action:e,type:"inline"}))):[]},d.renderInlineActionsContainer=function(){const{inlineActions:e,menuActions:t}=this.dividedActions,n=!!e.length,o=!!t.length;return n||o?F.tsx("div",{key:"inline-actions-container","data-inline-actions":n.toString(),"data-menu-actions":o.toString(),class:y.CSS.inlineActionsContainer},this.renderInlineActions(),this.renderActionsMenuButton(),this.renderMenuActions()):null},d.renderNavigation=function(){return this.featureNavigationVisible?F.tsx("section",{key:D("navigation"),class:this.classes(y.CSS.navigation)},this.renderNavigationButtons()):null},d.renderFooter=function(){const{featureNavigationVisible:e,dividedActions:t}=this,{inlineActions:n,menuActions:o}=t,i=!!n.length,s=!!o.length,r={[y.CSS.footerHasPagination]:e,[y.CSS.footerHasActions]:i,[y.CSS.footerHasActionsMenu]:s};return e||i?F.tsx("div",{key:D("feature-buttons"),class:this.classes(y.CSS.footer,r)},this.renderInlineActionsContainer(),this.renderNavigation()):null},d.renderFeatureMenuContainer=function(){const{messages:e}=this,{featureViewModels:t,isLoadingFeature:n}=this.viewModel,o=O.substitute(e.selectedFeatures,{total:t.length});return F.tsx("section",{key:D("menu"),class:y.CSS.featureMenu},F.tsx("strong",{class:y.CSS.featureMenuHeader},o),F.tsx("nav",{bind:this,class:y.CSS.featureMenuViewport,"data-node-ref":"_featureMenuViewportNode",afterCreate:x.storeNode},this.renderFeatureMenu(),F.tsx("div",{class:y.CSS.featureMenuObserver,bind:this,afterCreate:this._featureMenuIntersectionObserverCreated}),n?F.tsx("div",{class:y.CSS.featureMenuLoader},this.renderLoadingIcon()):null))},d.renderPointer=function(){return this.dockEnabled?null:F.tsx("div",{key:D("pointer"),class:y.CSS.pointer,role:"presentation"},F.tsx("div",{class:this.classes(y.CSS.pointerDirection,y.CSS.shadow)}))},d.renderMainContainer=function(){const{dockEnabled:e,currentAlignment:t,currentDockPosition:n,titleId:o,contentId:i,collapsible:s,hasContent:r,contentCollapsed:a,visibleElements:l}=this,{title:c}=this.viewModel,u="bottom-left"===t||"bottom-center"===t||"bottom-right"===t||"top-left"===n||"top-center"===n||"top-right"===n,d="top-left"===t||"top-center"===t||"top-right"===t||"bottom-left"===n||"bottom-center"===n||"bottom-right"===n,h={[y.CSS.shadow]:e,[y.CSS.isCollapsible]:s,[y.CSS.isCollapsed]:a};return F.tsx("div",{class:this.classes(y.CSS.main,y.CSS.widget,h),tabIndex:l.closeButton?void 0:-1,role:"dialog","aria-labelledby":c?o:"","aria-describedby":r&&!a?i:"",bind:this,onkeyup:this._handleMainKeyup,afterCreate:this._mainContainerNodeUpdated,afterUpdate:this._mainContainerNodeUpdated},u?this.renderFooter():null,u?this.renderFeatureMenuContainer():null,this.renderHeader(),this.renderContentContainer(),d?this.renderFooter():null,d?this.renderFeatureMenuContainer():null)},d.renderContent=function(){const e=this.viewModel?.content;return e?"string"==typeof e?F.tsx("div",{class:w.CSS.contentNode,key:e,innerHTML:e}):this.renderNodeContent(e):null},d.renderActionText=function(e){return F.tsx("span",{key:"text",class:y.CSS.actionText},e)},d.renderActionIcon=function(e){const t=this._getActionClass(e),n=this._getActionImage(e),o={[y.CSS.iconLoading]:e.active,[y.CSS.rotating]:e.active,[y.CSS.icon]:!!t,[y.CSS.actionImage]:!e.active&&!!n};return t&&(o[t]=!e.active),F.tsx("span",{key:"icon","aria-hidden":"true",class:this.classes(y.CSS.icon,o),styles:this._getIconStyles(n)})},d.renderAction=function(e){const{action:t,type:n}=e,o=this._getActionTitle(t),i={[y.CSS.action]:"toggle"!==t.type,[y.CSS.actionToggle]:"toggle"===t.type,[y.CSS.actionToggleOn]:"toggle"===t.type&&t.value,[y.CSS.buttonDisabled]:t.disabled},s=[this.renderActionIcon(t),this.renderActionText(o)],r="menu-item"===n?F.tsx("li",{key:t.uid,role:"menuitem",tabIndex:0,title:o,"aria-label":o,class:this.classes(y.CSS.button,i),onkeyup:this._handleActionMenuItemKeyup,bind:this,"data-action-uid":t.uid,onclick:this._triggerAction,onkeydown:this._triggerAction},s):F.tsx("div",{key:t.uid,role:"button",tabIndex:0,title:o,"aria-label":o,class:this.classes(y.CSS.button,i),onkeyup:this._handleActionMenuItemKeyup,bind:this,"data-action-uid":t.uid,onclick:this._triggerAction,onkeydown:this._triggerAction},s);return t.visible?r:null},d.renderFeatureMenuItem=function(e,t){const{messages:n,messagesCommon:o}=this,{selectedFeatureIndex:i,selectedFeatureViewModel:s}=this.viewModel,r=e===s,a={[y.CSS.featureMenuSelected]:r},l=r?F.tsx("span",{key:D(`feature-menu-selected-feature-${i}`),title:n.selectedFeature,"aria-label":n.selectedFeature,class:y.CSS.iconCheckMark}):null,c=F.tsx("span",{innerHTML:e.title||o.untitled});return F.tsx("li",{role:"menuitem",tabIndex:-1,key:D(`feature-menu-feature-${i}`),class:this.classes(a,y.CSS.featureMenuItem),bind:this,"data-feature-index":t,onblur:this._removeActiveFeature,onfocus:this._setActiveFeature,onkeyup:this._handleFeatureMenuItemKeyup,onclick:this._selectFeature,onkeydown:this._selectFeature,onmouseover:this._setActiveFeature,onmouseleave:this._removeActiveFeature},F.tsx("span",{class:y.CSS.featureMenuTitle},c,l))},d.renderFeatureMenu=function(){const{featureMenuId:e}=this,{featureViewModels:t}=this.viewModel;return t.length>1?F.tsx("ol",{class:y.CSS.featureMenuList,id:e,bind:this,afterCreate:this._featureMenuNodeUpdated,afterUpdate:this._featureMenuNodeUpdated,onkeyup:this._handleFeatureMenuKeyup,role:"menu"},t.filter((e=>!!e.graphic)).map(((e,t)=>this.renderFeatureMenuItem(e,t)))):null},d._storeFeatureSelectionAction=function(e,t){this._featureSelectionActions.set(e,t),this.scheduleRender()},d._storeExitRelatedRecordsAction=function(e,t){this._exitRelatedRecordsActions.set(e,t),this.scheduleRender()},d._getFlowItemDescription=function(e){return"featureCountDescription"in e?e.featureCountDescription:e.viewModel.description??""},d._openRelatedFeature=function(){var e=t._asyncToGenerator((function*(e){yield e.viewModel.updateGeometry();const t=e.graphic,n=t?.geometry;if(l.isNone(n)||l.isNone(t))return;this._destroyFlowItemWidgets(),yield this.viewModel.zoomTo({target:n});const o=b.getPointFromGeometry(n);this.open({features:[t],location:l.isSome(o)?o:void 0})}));function n(t){return e.apply(this,arguments)}return n}(),d._destroyFlowItemWidgets=function(){this._flowItems.removeAll().forEach((e=>{"showAllEnabled"in e.viewModel&&(e.viewModel.showAllEnabled=!1),e.viewModel=null,e.destroy()}))},d._handleBackClick=function(){const e=this._flowItems.pop();e&&(this._exitRelatedRecordsActions.delete(e),this._featureSelectionActions.delete(e),"showAllEnabled"in e.viewModel&&(e.viewModel.showAllEnabled=!1),e&&(e.viewModel=null,e.destroy()))},d._getActionTitle=function(e){const{messages:t,selectedFeature:n,messagesCommon:o}=this,{id:i}=e,s=n?.attributes,r=e.title??"",a="zoom-to-feature"===i?O.substitute(r,{messages:t}):"remove-selected-feature"===i?O.substitute(r,{messages:o}):"zoom-to-clustered-features"===i||"browse-clustered-features"===i?O.substitute(r,{messages:t}):e.title;return a&&s?O.substitute(a,s):a??""},d._getActionClass=function(e){const{selectedFeature:t}=this,n=t?.attributes,{className:o,image:i}=e,s=i||o?o:y.CSS.iconDefaultAction;return s&&n?O.substitute(s,n):s??""},d._getActionImage=function(e){const{selectedFeature:t}=this,n=t?.attributes,{image:o}=e;return o&&n?O.substitute(o,n):o??""},d._createFeatureUpdatedAnimation=function(){return x.cssTransition("enter",y.CSS.hasFeatureUpdated)},d._getInlineActionCount=function(){const{maxInlineActions:e,featureNavigationVisible:t}=this;if("number"!=typeof e)return null;const n=Math.round(e);return Math.max(t?n-1:n,0)},d._watchActions=function(){const{allActions:e}=this.viewModel;this.notifyChange("dividedActions");const t="actions";this._handles.remove(t),e&&e.forEach((e=>{this._handles.add(c.watch((()=>[e.uid,e.active,e.className,e.disabled,e.id,e.title,e.image,e.visible]),(()=>this.scheduleRender())),t)}))},d._divideActions=function(){const{allActions:e}=this.viewModel,t=e.filter((e=>e.visible)),n=this._getInlineActionCount(),o=null===n,s=0===n;return{inlineActions:o?t.slice(0):s?new i:t.slice(0,n),menuActions:o?new i:s?t.slice(0):t.slice(n)}},d._featureMenuOpenChanged=function(e){e?this._focusFirstFeature=!0:this._focusFeatureMenuButton=!0},d._actionsMenuOpenChanged=function(e){e?this._focusFirstAction=!0:this._focusActionsMenuButton=!0},d._setTitleFromFeatureWidget=function(){const{selectedFeatureWidget:e,messagesCommon:t}=this;e&&(this.viewModel.title="error"===e.viewModel?.state?t.errorMessage:e.viewModel?.title||"")},d._setContentFromFeatureWidget=function(){const{selectedFeatureWidget:e}=this;e&&(this.viewModel.content=e)},d._unobserveFeatureMenuObserver=function(){this._featureMenuIntersectionObserverNode&&this._featureMenuIntersectionObserver.unobserve(this._featureMenuIntersectionObserverNode)},d._featureMenuIntersectionObserverCreated=function(e){this._unobserveFeatureMenuObserver(),this._featureMenuIntersectionObserver.observe(e),this._featureMenuIntersectionObserverNode=e},d._handleFeatureMenuKeyup=function(e){"Escape"===s.eventKey(e)&&(e.stopPropagation(),this._focusFeatureMenuButton=!0,this.featureMenuOpen=!1,this.scheduleRender())},d._handleActionMenuKeyup=function(e){"Escape"===s.eventKey(e)&&(e.stopPropagation(),this._focusActionsMenuButton=!0,this.actionsMenuOpen=!1,this.scheduleRender())},d._setActiveFeature=function(e){const{viewModel:t}=this,n=e.currentTarget["data-feature-index"];t.activeFeature=t.features[n]||null},d._removeActiveFeature=function(){this.viewModel.activeFeature=null},d._handleFeatureMenuItemKeyup=function(e){const t=s.eventKey(e),{_featureMenuNode:n}=this,o=e.currentTarget["data-feature-index"];if(!n)return;const i=n.querySelectorAll("li"),r=i.length;if("ArrowUp"!==t)if("ArrowDown"!==t)if("Home"!==t)if("End"!==t);else{e.stopPropagation();i[i.length-1].focus()}else{e.stopPropagation();i[0].focus()}else{e.stopPropagation();i[(o+1+r)%r].focus()}else{e.stopPropagation();i[(o-1+r)%r].focus()}},d._handleActionMenuItemKeyup=function(e){const t=s.eventKey(e),{_actionsMenuNode:n}=this,o=e.currentTarget.dataset.actionUid,{menuActions:i}=this.dividedActions,r=i.findIndex((e=>e.uid===o));if(!n)return;const a=n.querySelectorAll("li"),l=a.length;if("ArrowUp"!==t)if("ArrowDown"!==t)if("Home"!==t)if("End"!==t);else{e.stopPropagation();a[a.length-1].focus()}else{e.stopPropagation();a[0].focus()}else{e.stopPropagation();a[(r+1+l)%l].focus()}else{e.stopPropagation();a[(r-1+l)%l].focus()}},d._handleMainKeyup=function(e){const t=s.eventKey(e);"ArrowLeft"===t&&(e.stopPropagation(),this.previous()),"ArrowRight"===t&&(e.stopPropagation(),this.next())},d._spinnerEnabledChange=function(e){if(this._destroySpinner(),!e)return;const t=this.get("viewModel.view");this._createSpinner(t)},d._hideSpinner=function(){const{_spinner:e}=this;e&&(e.location=null,e.hide())},d._displaySpinner=function(){const{_spinner:e}=this;if(!e)return;const{location:t,waitingForResult:n}=this.viewModel;n&&t?e.show({location:t}):e.hide()},d._getIconStyles=function(e){return{"background-image":e?`url(${e})`:""}},d._shouldFocus=function(){var e=t._asyncToGenerator((function*(e){e?.shouldFocus&&(yield c.whenOnce((()=>!0===this.viewModel?.active)),this.focus())}));function n(t){return e.apply(this,arguments)}return n}(),d._addSelectedFeatureIndexHandle=function(){const e=c.watch((()=>this.viewModel?.selectedFeatureIndex),((e,t)=>this._selectedFeatureIndexUpdated(e,t)));this._handles.add(e,N)},d._selectedFeatureIndexUpdated=function(e,t){const{featureCount:n}=this;n&&e!==t&&-1!==e&&(this._destroyFlowItemWidgets(),this.actionsMenuOpen=!1,this.featureMenuOpen=!1,this._mainContainerNode&&(this._mainContainerNode.scrollTop=0),this._rootFlowItemNode&&this._rootFlowItemNode.scrollContentTo({top:0}))},d._destroySelectedFeatureWidget=function(){const{_feature:e}=this;e&&(e.viewModel=null,e&&!e.destroyed&&e.destroy()),this._feature=null},d._isScreenLocationWithinView=function(e,t){return e.x>-1&&e.y>-1&&e.x<=t.width&&e.y<=t.height},d._isOutsideView=function(e){const{popupHeight:t,popupWidth:n,screenLocation:o,side:i,view:s}=e;if(isNaN(n)||isNaN(t)||!s||!o)return!1;const r=s.padding;return"right"===i&&o.x+n/2>s.width-r.right||("left"===i&&o.x-n/2<r.left||("top"===i&&o.y-t<r.top||"bottom"===i&&o.y+t>s.height-r.bottom))},d._calculateAutoAlignment=function(e){if("auto"!==e)return e;const{_pointerOffsetInPx:t,_containerNode:n,_mainContainerNode:o,viewModel:i}=this,{screenLocation:s,view:r}=i;if(l.isNone(s)||!r||!n)return"top-center";if(!this._isScreenLocationWithinView(s,r))return this._get("currentAlignment")||"top-center";function a(e){return parseInt(e.replace(/[^-\d\.]/g,""),10)}const c=o?window.getComputedStyle(o,null):null,u=c?a(c.getPropertyValue("max-height")):0,d=c?a(c.getPropertyValue("height")):0,{height:h,width:p}=n.getBoundingClientRect(),f=p+t,_=Math.max(h,u,d)+t,g=this._isOutsideView({popupHeight:_,popupWidth:f,screenLocation:s,side:"right",view:r}),v=this._isOutsideView({popupHeight:_,popupWidth:f,screenLocation:s,side:"left",view:r}),w=this._isOutsideView({popupHeight:_,popupWidth:f,screenLocation:s,side:"top",view:r}),m=this._isOutsideView({popupHeight:_,popupWidth:f,screenLocation:s,side:"bottom",view:r});return v?w?"bottom-right":"top-right":g?w?"bottom-left":"top-left":w?m?"top-center":"bottom-center":"top-center"},d._callCurrentAlignment=function(e){return"function"==typeof e?e.call(this):e},d._getCurrentAlignment=function(){const{alignment:e,dockEnabled:t}=this;return t||!this.viewModel.active?null:this._calculatePositionResult(this._calculateAutoAlignment(this._callCurrentAlignment(e)))},d._setCurrentAlignment=function(){this._set("currentAlignment",this._getCurrentAlignment())},d._setCurrentDockPosition=function(){this._set("currentDockPosition",this._getCurrentDockPosition())},d._calculatePositionResult=function(e){const t=["left","right"];return x.isRTL(this.container)&&t.reverse(),e.replace(/leading/gi,t[0]).replace(/trailing/gi,t[1])},d._callDockPosition=function(e){return"function"==typeof e?e.call(this):e},d._getDockPosition=function(){return this._calculatePositionResult(this._calculateAutoDockPosition(this._callDockPosition(this.dockOptions?.position)))},d._getCurrentDockPosition=function(){return this.dockEnabled&&this.viewModel.active?this._getDockPosition():null},d._wouldDockTo=function(){return this.dockEnabled?null:this._getDockPosition()},d._calculateAutoDockPosition=function(e){if("auto"!==e)return e;const t=this.viewModel?.view,n=x.isRTL(this.container)?"top-left":"top-right";if(!t)return n;const o=t.padding||{left:0,right:0,top:0,bottom:0},i=t.width-o.left-o.right,{breakpoints:s}=t;return s&&i<=s.xsmall?"bottom-center":n},d._positionContainer=function(e=this._containerNode){if(e&&(this._containerNode=e),!this._containerNode)return;const{screenLocation:t}=this.viewModel,{width:n}=this._containerNode.getBoundingClientRect(),o=this._calculatePositionStyle(t,n);o&&Object.assign(this._containerNode.style,o)},d._calculateFullWidth=function(e){const{currentAlignment:t,_pointerOffsetInPx:n}=this;return"top-left"===t||"bottom-left"===t||"top-right"===t||"bottom-right"===t?e+n:e},d._calculateAlignmentPosition=function(e,t,n,o){const{currentAlignment:i,_pointerOffsetInPx:s}=this;if(!n)return;const{padding:r}=n,a=o/2,l=n.height-t,c=n.width-e;return"bottom-center"===i?{top:t+s-r.top,left:e-a-r.left}:"top-left"===i?{bottom:l+s-r.bottom,right:c+s-r.right}:"bottom-left"===i?{top:t+s-r.top,right:c+s-r.right}:"top-right"===i?{bottom:l+s-r.bottom,left:e+s-r.left}:"bottom-right"===i?{top:t+s-r.top,left:e+s-r.left}:"top-center"===i?{bottom:l+s-r.bottom,left:e-a-r.left}:void 0},d._calculatePositionStyle=function(e,t){const{dockEnabled:n,view:o}=this;if(!o)return;if(n)return{left:"",top:"",right:"",bottom:""};if(l.isNone(e)||!t)return;const i=this._calculateFullWidth(t),s=this._calculateAlignmentPosition(e.x,e.y,o,i);return s?{top:void 0!==s.top?`${s.top}px`:"auto",left:void 0!==s.left?`${s.left}px`:"auto",bottom:void 0!==s.bottom?`${s.bottom}px`:"auto",right:void 0!==s.right?`${s.right}px`:"auto"}:void 0},d._viewChange=function(e,t){e&&t&&(this.close(),this.clear())},d._viewReadyChange=function(e,t){if(e){const e=this.get("viewModel.view");this._wireUpView(e)}else t&&(this.close(),this.clear())},d._wireUpView=function(e){if(this._destroySpinner(),!e)return;const{spinnerEnabled:t}=this;t&&this._createSpinner(e),this._setDockEnabledForViewSize(this.dockOptions)},d._dockingThresholdCrossed=function(e,t,n){const[o,i]=e,[s,r]=t,{width:a=0,height:l=0}=n??{};return o<=a&&s>a||o>a&&s<=a||i<=l&&r>l||i>l&&r<=l},d._updateDockEnabledForViewSize=function(e,t){if(!e||!t)return;const n=this.get("viewModel.view.padding")||{left:0,right:0,top:0,bottom:0},o=n.left+n.right,i=n.top+n.bottom,s=[],r=[];s[0]=e[0]-o,s[1]=e[1]-i,r[0]=t[0]-o,r[1]=t[1]-i;const{dockOptions:a}=this,l=a.breakpoint;this._dockingThresholdCrossed(s,r,l)&&this._setDockEnabledForViewSize(a),this._setCurrentDockPosition()},d._focusDockButtonNode=function(e){this._focusDockButton&&(this._focusDockButton=!1,e.focus())},d._closeButtonNodeUpdated=function(e){return this._focusClose?(this._focusClose=!1,void e.focus()):this._blurClose?(this._blurClose=!1,void e.blur()):void 0},d._mainContainerNodeUpdated=function(e){return this._mainContainerNode=e,this._focusContainer?(this._focusContainer=!1,void e.focus()):this._blurContainer?(this._blurContainer=!1,void e.blur()):void 0},d._featureMenuNodeUpdated=function(e){if(this._featureMenuNode=e,!e||!this._focusFirstFeature)return;this._focusFirstFeature=!1;const t=e.querySelectorAll("li");if(t.length){t[0].focus()}},d._actionsMenuNodeUpdated=function(e){if(this._actionsMenuNode=e,!e||!this._focusFirstAction)return;this._focusFirstAction=!1;const t=e.querySelectorAll("li");if(t.length){t[0].focus()}},d._focusFeatureMenuButtonNode=function(e){this._focusFeatureMenuButton&&(this._focusFeatureMenuButton=!1,e.focus())},d._focusActionsMenuButtonNode=function(e){this._focusActionsMenuButton&&(this._focusActionsMenuButton=!1,e.focus())},d._featureMenuViewportScrollTop=function(){this._featureMenuViewportNode&&(this._featureMenuViewportNode.scrollTop=0)},d._toggleScreenLocationEnabled=function(){const{dockEnabled:e,viewModel:t}=this;if(!t)return;const n=t.active&&!e;t.screenLocationEnabled=n},d._shouldDockAtCurrentViewSize=function(e){const t=e.breakpoint,n=this.viewModel?.view?.ui;if(!n)return!1;const{width:o,height:i}=n;if(isNaN(o)||isNaN(i))return!1;if(!t)return!1;const s=t.hasOwnProperty("width")&&o<=(t.width??0),r=t.hasOwnProperty("height")&&i<=(t.height??0);return s||r},d._setDockEnabledForViewSize=function(e){e.breakpoint&&(this.dockEnabled=this._shouldDockAtCurrentViewSize(e))},d._getPageText=function(e,t){return this.featureNavigationVisible?O.substitute(this.messages.pageText,{index:t+1,total:e}):null},d._destroySpinner=function(){const{_spinner:e,view:t}=this;e&&(t&&t.ui&&t.ui.remove(e,P),e.destroy(),this._spinner=null)},d._createSpinner=function(e){e&&(this._spinner=new g({view:e}),e.ui.add(this._spinner,{key:P,position:"manual"}))},d._toggleCollapsed=function(){this.collapsed=!this.collapsed},d._close=function(){this.close(),this.view&&this.view.focus()},d._toggleDockEnabled=function(){this.dockEnabled=!this.dockEnabled,this._focusDockButton=!0,this.scheduleRender()},d._toggleFeatureMenu=function(){const e=!this.featureMenuOpen;this._featureMenuOpenChanged(e),this.actionsMenuOpen=!1,this.featureMenuOpen=e},d._toggleActionsMenu=function(){const e=!this.actionsMenuOpen;this._actionsMenuOpenChanged(e),this.featureMenuOpen=!1,this.actionsMenuOpen=e},d._triggerAction=function(e){const t=e.currentTarget.dataset.actionUid,{allActions:n}=this.viewModel,o=n.findIndex((e=>e.uid===t)),i=n.getItemAt(o);i&&"toggle"===i.type&&(i.value=!i.value),this.actionsMenuOpen=!1,this.viewModel.triggerAction(o)},d._selectFeature=function(e){const t=e.currentTarget["data-feature-index"];isNaN(t)||(this.viewModel.selectedFeatureIndex=t),this.featureMenuOpen=!1,this._focusFeatureMenuButton=!0,this.scheduleRender()},d._next=function(){this.next()},d._previous=function(){this.previous()},t._createClass(o,[{key:"actionsMenuId",get:function(){return`${this.id}-actions-menu`}},{key:"actionsMenuButtonId",get:function(){return`${this.id}-actions-menu-button`}},{key:"featureMenuId",get:function(){return`${this.id}-feature-menu`}},{key:"titleId",get:function(){return`${this.id}-popup-title`}},{key:"contentId",get:function(){return`${this.id}-popup-content`}},{key:"hasContent",get:function(){const{selectedFeatureWidget:e,viewModel:t}=this;if(!e)return!!t?.content;const n=e.viewModel;if(n?.waitingForContent||"error"===n?.state)return!0;const o=n?.content;return Array.isArray(o)?!!o.length:!!o}},{key:"featureNavigationVisible",get:function(){return this.viewModel.active&&this.viewModel.featureCount>1&&null!=this.visibleElements.featureNavigation}},{key:"collapsible",get:function(){return!!(this.collapseEnabled&&this.viewModel.title&&this.hasContent)}},{key:"featureMenuVisible",get:function(){return this.featureNavigationVisible&&this.featureMenuOpen}},{key:"contentCollapsed",get:function(){return this.collapsible&&!this.featureMenuVisible&&this.collapsed}},{key:"dividedActions",get:function(){return this._divideActions()}},{key:"_activeFlowItemWidget",get:function(){const{_flowItems:e}=this;return e.getItemAt(e.length-1)||null}},{key:"actions",get:function(){return this.viewModel.actions},set:function(e){this.viewModel.actions=e}},{key:"actionsMenuOpen",get:function(){return!!this.viewModel.active&&this._get("actionsMenuOpen")},set:function(e){this._set("actionsMenuOpen",!!e)}},{key:"autoCloseEnabled",get:function(){return this.viewModel.autoCloseEnabled},set:function(e){this.viewModel.autoCloseEnabled=e}},{key:"autoOpenEnabled",get:function(){return this.viewModel.autoOpenEnabled},set:function(e){this.viewModel.autoOpenEnabled=e}},{key:"defaultPopupTemplateEnabled",get:function(){return this.viewModel.defaultPopupTemplateEnabled},set:function(e){this.viewModel.defaultPopupTemplateEnabled=e}},{key:"content",get:function(){return this.viewModel.content},set:function(e){this.viewModel.content=e}},{key:"currentAlignment",get:function(){return this._getCurrentAlignment()}},{key:"currentDockPosition",get:function(){return this._getCurrentDockPosition()}},{key:"dockOptions",get:function(){return this._get("dockOptions")||T},set:function(e){const t={...T},n=this.viewModel?.view?.breakpoints,o={};n&&(o.width=n.xsmall,o.height=n.xsmall);const i={...t,...e},s={...t.breakpoint,...o},{breakpoint:r}=i;"object"==typeof r?i.breakpoint={...s,...r}:r&&(i.breakpoint=s),this._set("dockOptions",i),this._setCurrentDockPosition(),this.reposition()}},{key:"featureCount",get:function(){return this.viewModel.featureCount}},{key:"features",get:function(){return this.viewModel.features},set:function(e){this.viewModel.features=e}},{key:"goToOverride",get:function(){return this.viewModel.goToOverride},set:function(e){this.viewModel.goToOverride=e}},{key:"highlightEnabled",get:function(){return this.viewModel.highlightEnabled},set:function(e){this.viewModel.highlightEnabled=e}},{key:"location",get:function(){return this.viewModel.location},set:function(e){this.viewModel.location=e}},{key:"label",get:function(){return this.messages?.widgetLabel??""},set:function(e){this._overrideIfSome("label",e)}},{key:"promises",get:function(){return this.viewModel.promises},set:function(e){this.viewModel.promises=e}},{key:"selectedFeature",get:function(){return this.viewModel.selectedFeature}},{key:"selectedFeatureIndex",get:function(){return this.viewModel.selectedFeatureIndex},set:function(e){this.viewModel.selectedFeatureIndex=e}},{key:"selectedFeatureWidget",get:function(){const{_feature:e,visibleElements:t,headingLevel:n,_flowItems:o}=this,{selectedFeatureViewModel:i}=this.viewModel,s={...t,title:!1};return i?(e?(e.viewModel=i,e.visibleElements=s):this._feature=new _({flowItems:o,headingLevel:n+1,viewModel:i,visibleElements:s}),this._feature):null}},{key:"title",get:function(){return this.viewModel.title},set:function(e){this.viewModel.title=e}},{key:"updateLocationEnabled",get:function(){return this.viewModel.updateLocationEnabled},set:function(e){this.viewModel.updateLocationEnabled=e}},{key:"view",get:function(){return this.viewModel.view},set:function(e){this.viewModel.view=e}},{key:"visible",get:function(){return this.viewModel.visible},set:function(e){this.viewModel.visible=e}}]),o}(m.FeatureContentMixin(v));n.__decorate([d.property({readOnly:!0})],R.prototype,"actionsMenuId",null),n.__decorate([d.property({readOnly:!0})],R.prototype,"actionsMenuButtonId",null),n.__decorate([d.property({readOnly:!0})],R.prototype,"featureMenuId",null),n.__decorate([d.property({readOnly:!0})],R.prototype,"titleId",null),n.__decorate([d.property({readOnly:!0})],R.prototype,"contentId",null),n.__decorate([d.property({readOnly:!0})],R.prototype,"hasContent",null),n.__decorate([d.property({readOnly:!0})],R.prototype,"featureNavigationVisible",null),n.__decorate([d.property({readOnly:!0})],R.prototype,"collapsible",null),n.__decorate([d.property({readOnly:!0})],R.prototype,"featureMenuVisible",null),n.__decorate([d.property({readOnly:!0})],R.prototype,"contentCollapsed",null),n.__decorate([d.property({readOnly:!0})],R.prototype,"dividedActions",null),n.__decorate([d.property({readOnly:!0,dependsOn:["_flowItems.length"]})],R.prototype,"_activeFlowItemWidget",null),n.__decorate([d.property()],R.prototype,"actions",null),n.__decorate([d.property()],R.prototype,"actionsMenuOpen",null),n.__decorate([d.property()],R.prototype,"alignment",void 0),n.__decorate([d.property()],R.prototype,"autoCloseEnabled",null),n.__decorate([d.property()],R.prototype,"autoOpenEnabled",null),n.__decorate([d.property()],R.prototype,"defaultPopupTemplateEnabled",null),n.__decorate([d.property()],R.prototype,"content",null),n.__decorate([d.property()],R.prototype,"collapsed",void 0),n.__decorate([d.property()],R.prototype,"collapseEnabled",void 0),n.__decorate([d.property({readOnly:!0})],R.prototype,"currentAlignment",null),n.__decorate([d.property({readOnly:!0})],R.prototype,"currentDockPosition",null),n.__decorate([d.property()],R.prototype,"dockOptions",null),n.__decorate([d.property()],R.prototype,"dockEnabled",void 0),n.__decorate([d.property({readOnly:!0})],R.prototype,"featureCount",null),n.__decorate([d.property()],R.prototype,"featureMenuOpen",void 0),n.__decorate([d.property()],R.prototype,"features",null),n.__decorate([d.property()],R.prototype,"goToOverride",null),n.__decorate([d.property()],R.prototype,"headingLevel",void 0),n.__decorate([d.property()],R.prototype,"highlightEnabled",null),n.__decorate([d.property()],R.prototype,"location",null),n.__decorate([d.property()],R.prototype,"label",null),n.__decorate([d.property()],R.prototype,"maxInlineActions",void 0),n.__decorate([d.property(),k.messageBundle("esri/widgets/Popup/t9n/Popup")],R.prototype,"messages",void 0),n.__decorate([d.property(),k.messageBundle("esri/t9n/common")],R.prototype,"messagesCommon",void 0),n.__decorate([d.property()],R.prototype,"promises",null),n.__decorate([d.property({readOnly:!0})],R.prototype,"selectedFeature",null),n.__decorate([d.property()],R.prototype,"selectedFeatureIndex",null),n.__decorate([d.property({readOnly:!0})],R.prototype,"selectedFeatureWidget",null),n.__decorate([d.property()],R.prototype,"spinnerEnabled",void 0),n.__decorate([d.property()],R.prototype,"title",null),n.__decorate([d.property()],R.prototype,"updateLocationEnabled",null),n.__decorate([d.property()],R.prototype,"view",null),n.__decorate([d.property({type:M}),A.vmEvent(["triggerAction","trigger-action"])],R.prototype,"viewModel",void 0),n.__decorate([d.property()],R.prototype,"visible",null),n.__decorate([d.property()],R.prototype,"visibleElements",void 0),n.__decorate([h.cast("visibleElements")],R.prototype,"castVisibleElements",null),n.__decorate([C.accessibleHandler()],R.prototype,"_close",null),n.__decorate([C.accessibleHandler()],R.prototype,"_toggleDockEnabled",null),n.__decorate([C.accessibleHandler()],R.prototype,"_toggleFeatureMenu",null),n.__decorate([C.accessibleHandler()],R.prototype,"_toggleActionsMenu",null),n.__decorate([C.accessibleHandler()],R.prototype,"_triggerAction",null),n.__decorate([C.accessibleHandler()],R.prototype,"_selectFeature",null),n.__decorate([C.accessibleHandler()],R.prototype,"_next",null),n.__decorate([C.accessibleHandler()],R.prototype,"_previous",null),R=n.__decorate([f.subclass("esri.widgets.Popup")],R);return R}));
