/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.26/esri/copyright.txt for details.
*/
define(["../../chunks/_rollupPluginBabelHelpers","../../chunks/tslib.es6","../../core/reactiveUtils","../../core/accessorSupport/decorators/property","../../core/accessorSupport/ensureType","../../core/arrayUtils","../../core/accessorSupport/decorators/subclass","../Slider","../support/widgetUtils","../support/jsxFactory","./ValuePickerBaseComponent","./ValuePickerSliderVisibleElements"],(function(e,t,s,i,o,r,l,n,a,c,u,p){"use strict";const d="esri-value-picker__slider",h={minorTick:`${d}__tick-minor`,majorTick:`${d}__tick-major`,stepsTick:`${d}__tick-steps`};function v(e){return(t,s)=>{s.classList.add(e)}}let _=function(t){function i(e,s){var i;return(i=t.call(this,e,s)||this)._majorTickCreatedFunction=v(h.majorTick),i._minorTickCreatedFunction=v(h.minorTick),i._stepsTickCreatedFunction=v(h.stepsTick),i._slider=new n({visibleElements:{labels:!0}}),i.labelFormatFunction=null,i.labels=null,i.min=null,i.minorTicks=null,i.majorTicks=null,i.max=null,i.reversed=!1,i.steps=null,i.type="slider",i.visibleElements=new p,i}e._inheritsLoose(i,t);var o=i.prototype;return o.initialize=function(){this.addHandles([s.watch((()=>this.viewModel?.values),(e=>{this._slider.values=e}),s.initial),s.watch((()=>this._slider.values),(e=>{this.viewModel&&this.viewModel.values!==e&&(this.viewModel.values=e)}))])},o.destroy=function(){this._slider.destroy()},o.render=function(){const{labels:e,labelFormatFunction:t,min:s,max:i,steps:o,minorTicks:r,majorTicks:l,reversed:n,viewModel:a}=this;if(!a)return c.tsx("div",null);const{disabled:u,layout:p}=a,h=`${p}${n?"-reversed":""}`,v="position",_=[],m={labels:this.visibleElements.thumbTooltip};return null!=s&&null!=i&&(r&&_.push({mode:v,values:r,tickCreatedFunction:this._minorTickCreatedFunction}),l&&_.push({mode:v,values:l,tickCreatedFunction:this._majorTickCreatedFunction}),e&&_.push({mode:v,values:e,labelsVisible:!0}),this.visibleElements.steps&&this.steps&&_.push({mode:v,values:this.steps,tickCreatedFunction:this._stepsTickCreatedFunction})),this._slider.set({disabled:u,labelFormatFunction:t,layout:h,min:s,max:i,steps:o,tickConfigs:_,visibleElements:m}),c.tsx("div",{class:d},this._slider.render())},o.animate=function(){this._step(this._ascending?1:-1)},o.next=function(){this._step(this._ascending?1:-1)},o.previous=function(){this._step(this._ascending?-1:1)},o._step=function(e){if(!this.viewModel||!this.steps?.length)return;if(!this.viewModel.values||!this.steps.includes(this.viewModel.values[0]))return void(this.viewModel.values=[this.steps[0]]);const t=this.steps.indexOf(this.viewModel.values[0])+e;t<0||t>=this.steps.length?this.viewModel.loop?this.viewModel.values=[this.steps[1===e?0:this.steps.length-1]]:"playing"===this.viewModel.state&&this.viewModel.pause():this.viewModel.values=[this.steps[t]]},e._createClass(i,[{key:"_ascending",get:function(){const{reversed:e,viewModel:t}=this;if(!t)return null;const{layout:s}=t;return"horizontal"===s&&!e||"vertical"===s&&e}},{key:"canNext",get:function(){const{_ascending:e,min:t,max:s,steps:i,viewModel:o}=this;if(null==e||null==t||null==s||!i?.length||!o)return!1;const{values:r}=o,l=r?.[0];return null==l||(e?l!==i[i.length-1]:l!==i[0])}},{key:"canPlay",get:function(){return null!=this.viewModel&&!!this.steps?.length&&null!=this.min&&null!=this.max}},{key:"canPrevious",get:function(){const{_ascending:e,min:t,max:s,steps:i,viewModel:o}=this;if(null==e||null==t||null==s||!i?.length||!o)return!1;const{values:r}=o,l=r?.[0];return null==l||(e?l!==i[0]:l!==i[i.length-1])}}]),i}(u);t.__decorate([i.property()],_.prototype,"_ascending",null),t.__decorate([i.property()],_.prototype,"canNext",null),t.__decorate([i.property()],_.prototype,"canPlay",null),t.__decorate([i.property()],_.prototype,"canPrevious",null),t.__decorate([i.property()],_.prototype,"labelFormatFunction",void 0),t.__decorate([i.property()],_.prototype,"labels",void 0),t.__decorate([i.property()],_.prototype,"min",void 0),t.__decorate([i.property()],_.prototype,"minorTicks",void 0),t.__decorate([i.property()],_.prototype,"majorTicks",void 0),t.__decorate([i.property()],_.prototype,"max",void 0),t.__decorate([i.property({nonNullable:!0})],_.prototype,"reversed",void 0),t.__decorate([i.property()],_.prototype,"steps",void 0),t.__decorate([i.property()],_.prototype,"type",void 0),t.__decorate([i.property({type:p,nonNullable:!0})],_.prototype,"visibleElements",void 0),_=t.__decorate([l.subclass("esri.widgets.ValuePicker.ValuePickerSlider")],_);return _}));
