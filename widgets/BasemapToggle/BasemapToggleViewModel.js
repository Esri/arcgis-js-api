/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.21/esri/copyright.txt for details.
*/
define(["../../chunks/_rollupPluginBabelHelpers","../../chunks/tslib.es6","../../core/compilerUtils","../../core/Evented","../../core/watchUtils","../../core/accessorSupport/decorators/property","../../core/has","../../core/accessorSupport/decorators/cast","../../core/Logger","../../core/accessorSupport/decorators/subclass","../../support/basemapDefinitions","../../support/basemapUtils"],(function(e,t,a,s,r,o,i,n,p,c,l,u){"use strict";let h=function(t){function s(a){var s;return(s=t.call(this,a)||this)._basemapCache={},s.nextBasemap=u.ensureType("hybrid",s._basemapCache),s.view=null,s.toggle=s.toggle.bind(e._assertThisInitialized(s)),s}e._inheritsLoose(s,t);var o=s.prototype;return o.initialize=function(){r.init(this,"nextBasemap",(e=>{e&&!e.loaded&&e.load().catch((()=>{}))}))},o.destroy=function(){this.view=null,u.destroyCache(this._basemapCache),this._basemapCache=null},o.castNextBasemap=function(e){return u.ensureType(e,this._basemapCache)},o.toggle=function(){if("disabled"===this.state)return;const e=this.activeBasemap,t=this.nextBasemap;this.view.map.basemap=t,this.nextBasemap=e,this.emit("toggle",{previous:e,current:t})},s.getThumbnailUrl=function(e){if(!e)return null;const{thumbnailUrl:t}=e;if(t)return t;const s=u.getWellKnownBasemapId(e);if(s)return l.esriBasemapDefinitions[s].thumbnailUrl;const r=e.baseLayers.find((e=>!!a.typeCast(e)().get("portalItem.thumbnailUrl")));return r?a.typeCast(r)().get("portalItem.thumbnailUrl"):null},e._createClass(s,[{key:"activeBasemap",get:function(){return u.ensureType(this.get("view.map.basemap")||"topo",this._basemapCache)}},{key:"state",get:function(){return this.get("view.ready")?"ready":"disabled"}}]),s}(s.EventedAccessor);return t.__decorate([o.property({readOnly:!0})],h.prototype,"activeBasemap",null),t.__decorate([o.property()],h.prototype,"nextBasemap",void 0),t.__decorate([n.cast("nextBasemap")],h.prototype,"castNextBasemap",null),t.__decorate([o.property({readOnly:!0})],h.prototype,"state",null),t.__decorate([o.property()],h.prototype,"view",void 0),t.__decorate([o.property()],h.prototype,"toggle",null),h=t.__decorate([c.subclass("esri.widgets.BasemapToggle.BasemapToggleViewModel")],h),h}));
