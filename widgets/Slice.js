/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.25/esri/copyright.txt for details.
*/
define(["require","../chunks/_rollupPluginBabelHelpers","../chunks/tslib.es6","../core/promiseUtils","../core/accessorSupport/decorators/property","../core/arrayUtils","../core/accessorSupport/ensureType","../core/accessorSupport/decorators/subclass","./Widget","./Slice/SliceViewModel","./support/Heading","./support/widgetUtils","./support/decorators/messageBundle","./support/jsxFactory"],(function(e,t,i,s,l,r,n,o,c,a,u,d,p,y){"use strict";const _="esri-slice",h={buttonDisabled:"esri-button--disabled",layerIncludeButton:"esri-slice__cross",widgetIcon:"esri-icon-slice",base:`${_} esri-widget esri-widget--panel`,layerList:`${_}__settings`,layerListHeading:"esri-slice__settings-title",layerItem:`${_}__layer-item`,layerItemTitle:`${_}__layer-item__title`,container:`${_}__container`,actionSection:"esri-slice__actions",hint:`${_}__hint`,hintText:`${_}__hint-text`,panelError:`${_}__panel--error`,newSliceButton:`${_}__clear-button esri-button esri-button--primary`,excludeButton:`${_}__exclude-button esri-button esri-button--secondary`,cancelButton:`${_}__cancel-button esri-button esri-button--secondary`};let v=function(i){function l(e,t){var s;return(s=i.call(this,e,t)||this).headingLevel=3,s.iconClass=h.widgetIcon,s.messages=null,s.viewModel=new a,s}t._inheritsLoose(l,i);var r=l.prototype;return r.loadDependencies=function(){return new Promise(((t,i)=>e(["../chunks/calcite-button"],t,i)))},r.render=function(){const e=this.viewModel.supported,t=this.viewModel.active,i="disabled"===this.viewModel.state,s="ready"===this.viewModel.state,l="slicing"===this.viewModel.state||"sliced"===this.viewModel.state,r="exclude"===this.viewModel.layersMode,{messages:n}=this,o=i&&h.buttonDisabled,c=t&&!l||r?null:y.tsx("button",{disabled:i,class:this.classes(h.newSliceButton,o),bind:this,onclick:this._onNewSliceClick,key:"esri-slice__clear",type:"button"},n.newSlice),a=l&&!r?y.tsx("button",{class:this.classes(h.excludeButton,o),bind:this,onclick:()=>{this.viewModel.enterExcludeLayerMode()},key:"esri-slice__exclude",type:"button"},n.excludeLayer):null,d=t&&r?y.tsx("button",{class:this.classes(h.cancelButton,o),bind:this,onclick:()=>{this.viewModel.exitExcludeLayerMode()},key:"esri-slice__cancel-exclude",type:"button"},n.cancel):null;let p=null;t&&(r?p=n.excludeHint:s&&(p=n.hint));const _=p?y.tsx("div",{class:h.hint,key:"esri-slice__hint"},y.tsx("p",{class:h.hintText},p)):null,v=this.excludedLayers?this.excludedLayers.toArray().map((e=>this._renderLayerItem({uid:e.uid,title:e.title,onClick:()=>(this.excludedLayers.remove(e),!1)}))):[];this.excludeGroundSurface&&v.push(this._renderLayerItem({uid:"ground",title:n.ground,onClick:()=>(this.excludeGroundSurface=!1,!1)}));const b=!r&&l&&v.length>0?y.tsx("div",{class:h.layerList,key:"esri-slice__settings"},y.tsx(u.Heading,{class:h.layerListHeading,level:this.headingLevel},n.excludedLayers),y.tsx("ul",null,v)):null,x=y.tsx("div",{class:h.panelError,key:"esri-slice__unsupported"},y.tsx("p",null,n.unsupported)),w=y.tsx("div",{class:h.actionSection},a,d,c),g=this.visible?y.tsx("div",{class:h.container},e?[_,b,w]:x):null;return y.tsx("div",{class:h.base,role:"presentation"},g)},r._renderLayerItem=function(e){return y.tsx("li",{class:h.layerItem,key:e.uid},y.tsx("calcite-button",{appearance:"transparent",class:h.layerIncludeButton,"icon-start":"x",scale:"s",title:this.messages.includeLayer,bind:this,onclick:e.onClick}),y.tsx("div",{class:h.layerItemTitle},e.title))},r._onNewSliceClick=function(){s.ignoreAbortErrors(this.viewModel.start())},t._createClass(l,[{key:"active",get:function(){return this.viewModel.active}},{key:"analysis",get:function(){return this.viewModel.analysis},set:function(e){this.viewModel.analysis=e}},{key:"excludedLayers",get:function(){return this.viewModel.excludedLayers},set:function(e){this.viewModel.excludedLayers=e}},{key:"excludeGroundSurface",get:function(){return this.viewModel.excludeGroundSurface},set:function(e){this.viewModel.excludeGroundSurface=e}},{key:"label",get:function(){return this.messages?.widgetLabel??""},set:function(e){this._overrideIfSome("label",e)}},{key:"view",get:function(){return this.viewModel.view},set:function(e){this.viewModel.view=e}},{key:"visible",get:function(){return this.viewModel.visible},set:function(e){this.viewModel.visible=e}}]),l}(c);i.__decorate([l.property()],v.prototype,"active",null),i.__decorate([l.property({constructOnly:!0,nonNullable:!0})],v.prototype,"analysis",null),i.__decorate([l.property()],v.prototype,"excludedLayers",null),i.__decorate([l.property()],v.prototype,"excludeGroundSurface",null),i.__decorate([l.property()],v.prototype,"headingLevel",void 0),i.__decorate([l.property()],v.prototype,"iconClass",void 0),i.__decorate([l.property()],v.prototype,"label",null),i.__decorate([l.property(),p.messageBundle("esri/widgets/Slice/t9n/Slice")],v.prototype,"messages",void 0),i.__decorate([l.property()],v.prototype,"view",null),i.__decorate([l.property({type:a})],v.prototype,"viewModel",void 0),i.__decorate([l.property()],v.prototype,"visible",null),v=i.__decorate([o.subclass("esri.widgets.Slice")],v);return v}));
