/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.20/esri/copyright.txt for details.
*/
define(["../chunks/_rollupPluginBabelHelpers","../chunks/tslib.es6","../chunks/button","../chunks/icon","../core/promiseUtils","../core/accessorSupport/decorators/aliasOf","../core/has","../core/accessorSupport/ensureType","../core/Logger","../core/accessorSupport/decorators/property","../core/accessorSupport/decorators/subclass","../views/3d/layers/SliceLayerView3D","./Widget","./Slice/SliceViewModel","./support/Heading","./support/widgetUtils","./support/decorators/messageBundle","./support/jsxFactory"],(function(e,t,s,i,l,r,o,c,n,a,d,u,p,_,y,v,h,b){"use strict";const x="esri-slice",w={buttonDisabled:"esri-button--disabled",layerIncludeButton:"esri-slice__cross",widgetIcon:"esri-icon-slice",base:`${x} esri-widget esri-widget--panel`,layerList:`${x}__settings`,layerListHeading:"esri-slice__settings-title",layerItem:`${x}__layer-item`,layerItemTitle:`${x}__layer-item__title`,container:`${x}__container`,actionSection:"esri-slice__actions",hint:`${x}__hint`,hintText:`${x}__hint-text`,panelError:`${x}__panel--error`,newSliceButton:`${x}__clear-button esri-button esri-button--primary`,excludeButton:`${x}__exclude-button esri-button esri-button--secondary`,cancelButton:`${x}__cancel-button esri-button esri-button--secondary`};let g=function(t){function s(e,s){var i;return(i=t.call(this,e,s)||this).messages=null,i.headingLevel=3,i.iconClass=w.widgetIcon,i.label=void 0,i.view=null,i.viewModel=new _,i}e._inheritsLoose(s,t);var i=s.prototype;return i.render=function(){const e=this.viewModel.isSupported,t=this.viewModel.active,s="disabled"===this.viewModel.state,i="ready"===this.viewModel.state,l="slicing"===this.viewModel.state||"sliced"===this.viewModel.state,r="exclude"===this.viewModel.layersMode,{messages:o}=this,c=s&&w.buttonDisabled,n=t&&!l||r?null:b.tsx("button",{disabled:s,class:this.classes(w.newSliceButton,c),bind:this,onclick:this._onNewSliceClick,key:"esri-slice__clear",type:"button"},o.newSlice),a=l&&!r?b.tsx("button",{class:this.classes(w.excludeButton,c),bind:this,onclick:()=>{this.viewModel.enterExcludeLayerMode()},key:"esri-slice__exclude",type:"button"},o.excludeLayer):null,d=t&&r?b.tsx("button",{class:this.classes(w.cancelButton,c),bind:this,onclick:()=>{this.viewModel.exitExcludeLayerMode()},key:"esri-slice__cancel-exclude",type:"button"},o.cancel):null;let u=null;t&&(r?u=o.excludeHint:i&&(u=o.hint));const p=u?b.tsx("div",{class:w.hint,key:"esri-slice__hint"},b.tsx("p",{class:w.hintText},u)):null,_=this.excludedLayers?this.excludedLayers.toArray().map((e=>this._renderLayerItem({uid:e.uid,title:e.title,onClick:()=>(this.excludedLayers.remove(e),!1)}))):[];this.excludeGroundSurface&&_.push(this._renderLayerItem({uid:"ground",title:o.ground,onClick:()=>(this.excludeGroundSurface=!1,!1)}));const v=!r&&l&&_.length>0?b.tsx("div",{class:w.layerList,key:"esri-slice__settings"},b.tsx(y.Heading,{class:w.layerListHeading,level:this.headingLevel},o.excludedLayers),b.tsx("ul",null,_)):null,h=b.tsx("div",{class:w.panelError,key:"esri-slice__unsupported"},b.tsx("p",null,o.unsupported)),x=b.tsx("div",{class:w.actionSection},a,d,n),g=this.visible?b.tsx("div",{class:w.container},e?[p,v,x]:h):null;return b.tsx("div",{class:w.base,role:"presentation"},g)},i._renderLayerItem=function(e){return b.tsx("li",{class:w.layerItem,key:e.uid},b.tsx("calcite-button",{appearance:"transparent",class:w.layerIncludeButton,"icon-start":"x",scale:"s",title:this.messages.includeLayer,bind:this,onclick:e.onClick}),b.tsx("div",{class:w.layerItemTitle},e.title))},i._onNewSliceClick=function(){l.ignoreAbortErrors(this.viewModel.removeSliceAndStart())},s}(p);return t.__decorate([a.property(),h.messageBundle("esri/widgets/Slice/t9n/Slice")],g.prototype,"messages",void 0),t.__decorate([a.property()],g.prototype,"headingLevel",void 0),t.__decorate([a.property()],g.prototype,"iconClass",void 0),t.__decorate([a.property({aliasOf:{source:"messages.widgetLabel",overridable:!0}})],g.prototype,"label",void 0),t.__decorate([r.aliasOf("viewModel.view")],g.prototype,"view",void 0),t.__decorate([r.aliasOf("viewModel.visible")],g.prototype,"visible",void 0),t.__decorate([r.aliasOf("viewModel.active")],g.prototype,"active",void 0),t.__decorate([a.property({type:_})],g.prototype,"viewModel",void 0),t.__decorate([r.aliasOf("viewModel.excludedLayers")],g.prototype,"excludedLayers",void 0),t.__decorate([r.aliasOf("viewModel.excludeGroundSurface")],g.prototype,"excludeGroundSurface",void 0),g=t.__decorate([d.subclass("esri.widgets.Slice")],g),g}));
