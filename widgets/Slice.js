/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.19/esri/copyright.txt for details.
*/
define(["../chunks/_rollupPluginBabelHelpers","../chunks/tslib.es6","../core/has","../core/Logger","../core/accessorSupport/ensureType","../core/accessorSupport/decorators/property","../core/accessorSupport/decorators/aliasOf","../core/accessorSupport/decorators/subclass","../core/urlUtils","../core/uuid","../portal/support/resourceExtension","../core/promiseUtils","./support/widgetUtils","./support/decorators/messageBundle","../chunks/index","./Widget","./Slice/SliceViewModel"],(function(e,s,t,i,l,o,r,c,n,a,d,u,p,_,y,v,h){"use strict";const x="esri-slice",b={buttonDisabled:"esri-button--disabled",layerIncludeButton:"esri-icon-close esri-slice__cross",widgetIcon:"esri-icon-slice",base:`${x} esri-widget esri-widget--panel`,layerList:`${x}__settings`,layerListHeading:"esri-slice__settings-title esri-widget__heading",layerItem:`${x}__layer-item`,container:`${x}__container`,actionSection:"esri-slice__actions",hint:`${x}__hint`,hintText:`${x}__hint-text`,panelError:`${x}__panel--error`,newSliceButton:`${x}__clear-button esri-button esri-button--primary`,excludeButton:`${x}__exclude-button esri-button esri-button--secondary`,cancelButton:`${x}__cancel-button esri-button esri-button--secondary`};let w=function(s){function t(e,t){var i;return(i=s.call(this,e,t)||this).messages=null,i.iconClass=b.widgetIcon,i.label=void 0,i.view=null,i.viewModel=new h,i}e._inheritsLoose(t,s);var i=t.prototype;return i.render=function(){const e=this.viewModel.isSupported,s=this.viewModel.active,t="disabled"===this.viewModel.state,i="ready"===this.viewModel.state,l="slicing"===this.viewModel.state||"sliced"===this.viewModel.state,o="exclude"===this.viewModel.layersMode,{messages:r}=this,c=t&&b.buttonDisabled,n=s&&!l||o?null:y.jsx("button",{disabled:t,class:this.classes(b.newSliceButton,c),bind:this,onclick:this._onNewSliceClick,key:"esri-slice__clear",type:"button"},r.newSlice),a=l&&!o?y.jsx("button",{class:this.classes(b.excludeButton,c),bind:this,onclick:()=>{this.viewModel.enterExcludeLayerMode()},key:"esri-slice__exclude",type:"button"},r.excludeLayer):null,d=s&&o?y.jsx("button",{class:this.classes(b.cancelButton,c),bind:this,onclick:()=>{this.viewModel.exitExcludeLayerMode()},key:"esri-slice__cancel-exclude",type:"button"},r.cancel):null;let u=null;s&&(o?u=r.excludeHint:i&&(u=r.hint));const p=u?y.jsx("div",{class:b.hint,key:"esri-slice__hint"},y.jsx("p",{class:b.hintText},u)):null,_=this.excludedLayers?this.excludedLayers.toArray().map((e=>y.jsx("li",{class:b.layerItem,key:e.uid},y.jsx("a",{href:"",onclick:()=>(this.excludedLayers.remove(e),!1),class:b.layerIncludeButton,title:r.includeLayer}),e.title))):[];this.excludeGroundSurface&&_.push(y.jsx("li",{class:b.layerItem,key:"ground"},y.jsx("a",{href:"",onclick:()=>(this.excludeGroundSurface=!1,!1),class:b.layerIncludeButton,title:r.includeLayer}),r.ground));const v=!o&&l&&_.length>0?y.jsx("div",{class:b.layerList,key:"esri-slice__settings"},y.jsx("h3",{class:b.layerListHeading},r.excludedLayers),y.jsx("ul",null,_)):null,h=y.jsx("div",{class:b.panelError,key:"esri-slice__unsupported"},y.jsx("p",null,r.unsupported)),x=y.jsx("div",{class:b.actionSection},a,d,n),w=this.visible?y.jsx("div",{class:b.container},e?[p,v,x]:h):null;return y.jsx("div",{class:b.base,role:"presentation"},w)},i._onNewSliceClick=function(){u.ignoreAbortErrors(this.viewModel.removeSliceAndStart())},t}(v);return s.__decorate([o.property(),_.messageBundle("esri/widgets/Slice/t9n/Slice")],w.prototype,"messages",void 0),s.__decorate([o.property()],w.prototype,"iconClass",void 0),s.__decorate([o.property({aliasOf:{source:"messages.widgetLabel",overridable:!0}})],w.prototype,"label",void 0),s.__decorate([r.aliasOf("viewModel.view")],w.prototype,"view",void 0),s.__decorate([r.aliasOf("viewModel.visible")],w.prototype,"visible",void 0),s.__decorate([r.aliasOf("viewModel.active")],w.prototype,"active",void 0),s.__decorate([o.property({type:h})],w.prototype,"viewModel",void 0),s.__decorate([r.aliasOf("viewModel.excludedLayers")],w.prototype,"excludedLayers",void 0),s.__decorate([r.aliasOf("viewModel.excludeGroundSurface")],w.prototype,"excludeGroundSurface",void 0),w=s.__decorate([c.subclass("esri.widgets.Slice")],w),w}));
