/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.18/esri/copyright.txt for details.
*/
define(["../chunks/_rollupPluginBabelHelpers","../chunks/tslib.es6","../core/has","../core/Logger","../core/accessorSupport/ensureType","../core/accessorSupport/decorators/property","../core/accessorSupport/decorators/aliasOf","../core/accessorSupport/decorators/subclass","../core/urlUtils","../core/uuid","../portal/support/resourceExtension","../core/promiseUtils","./support/widgetUtils","./support/decorators/messageBundle","./support/decorators/renderable","../chunks/index","./Widget","./Slice/SliceViewModel"],(function(e,s,i,l,t,r,o,c,d,a,n,u,p,_,v,y,h,x){"use strict";const b="esri-button esri-button--secondary",w="esri-button--disabled",g="esri-icon-close esri-slice__cross",M="esri-slice esri-widget esri-widget--panel",f="esri-slice__settings",S="esri-slice__settings-title esri-widget__heading",k="esri-slice__layer-item",j="esri-slice__container",L="esri-slice__actions",m="esri-slice__hint",O="esri-slice__hint-text",E="esri-slice__panel--error",G="esri-slice__exclude-button",A="esri-slice__cancel-button",B="esri-slice__clear-button";let U=function(s){function i(e,i){var l;return(l=s.call(this,e,i)||this).label=void 0,l.messages=null,l.view=null,l.viewModel=new x,l}e._inheritsLoose(i,s);var l=i.prototype;return l.render=function(){const e=this.viewModel.isSupported,s=this.viewModel.active,i="disabled"===this.viewModel.state,l="ready"===this.viewModel.state,t="slicing"===this.viewModel.state||"sliced"===this.viewModel.state,r="exclude"===this.viewModel.layersMode,o=[b,i&&w],{messages:c}=this,d=s&&!t||r?null:y.jsx("button",{disabled:i,class:this.classes(B,...o),bind:this,onclick:this._onNewSliceClick,key:"esri-slice__clear",type:"button"},c.newSlice),a=t&&!r?y.jsx("button",{class:this.classes(G,...o),bind:this,onclick:()=>{this.viewModel.enterExcludeLayerMode()},key:"esri-slice__exclude",type:"button"},c.excludeLayer):null,n=s&&r?y.jsx("button",{class:this.classes(A,...o),bind:this,onclick:()=>{this.viewModel.exitExcludeLayerMode()},key:"esri-slice__cancel-exclude",type:"button"},c.cancel):null;let u=null;s&&(r?u=c.excludeHint:l&&(u=c.hint));const p=u?y.jsx("div",{class:m,key:"esri-slice__hint"},y.jsx("p",{class:O},u)):null,_=this.excludedLayers?this.excludedLayers.toArray().map((e=>y.jsx("li",{class:k,key:e.uid},y.jsx("a",{href:"",onclick:()=>(this.excludedLayers.remove(e),!1),class:g,title:c.includeLayer}),e.title))):[];this.excludeGroundSurface&&_.push(y.jsx("li",{class:k,key:"ground"},y.jsx("a",{href:"",onclick:()=>(this.excludeGroundSurface=!1,!1),class:g,title:c.includeLayer}),c.ground));const v=!r&&t&&_.length>0?y.jsx("div",{class:f,key:"esri-slice__settings"},y.jsx("h3",{class:S},c.excludedLayers),y.jsx("ul",null,_)):null,h=y.jsx("div",{class:E,key:"esri-slice__unsupported"},y.jsx("p",null,c.unsupported)),x=y.jsx("div",{class:L},a,n,d),U=this.visible?y.jsx("div",{class:j},e?[p,v,x]:h):null;return y.jsx("div",{class:M,role:"presentation"},U)},l._onNewSliceClick=function(){u.ignoreAbortErrors(this.viewModel.removeSliceAndStart())},i}(h);return s.__decorate([r.property({aliasOf:{source:"messages.widgetLabel",overridable:!0}})],U.prototype,"label",void 0),s.__decorate([r.property(),v.renderable(),_.messageBundle("esri/widgets/Slice/t9n/Slice")],U.prototype,"messages",void 0),s.__decorate([o.aliasOf("viewModel.view")],U.prototype,"view",void 0),s.__decorate([o.aliasOf("viewModel.visible"),v.renderable()],U.prototype,"visible",void 0),s.__decorate([o.aliasOf("viewModel.active"),v.renderable()],U.prototype,"active",void 0),s.__decorate([r.property({type:x})],U.prototype,"viewModel",void 0),s.__decorate([o.aliasOf("viewModel.excludedLayers"),v.renderable()],U.prototype,"excludedLayers",void 0),s.__decorate([o.aliasOf("viewModel.excludeGroundSurface"),v.renderable()],U.prototype,"excludeGroundSurface",void 0),U=s.__decorate([c.subclass("esri.widgets.Slice")],U),U}));
