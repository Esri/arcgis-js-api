/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.18/esri/copyright.txt for details.
*/
define(["../chunks/_rollupPluginBabelHelpers","../chunks/tslib.es6","../core/has","../core/Logger","../core/accessorSupport/ensureType","../core/accessorSupport/decorators/property","../core/accessorSupport/decorators/aliasOf","../core/accessorSupport/decorators/subclass","../core/urlUtils","../core/uuid","../portal/support/resourceExtension","../core/promiseUtils","../core/unitUtils","./support/widgetUtils","./support/decorators/accessibleHandler","./support/decorators/messageBundle","./support/decorators/renderable","../chunks/index","./Widget","./AreaMeasurement2D/AreaMeasurement2DViewModel"],(function(e,s,t,r,a,i,n,o,l,u,d,c,p,m,_,v,b,y,w,g){"use strict";const M="esri-button esri-button--secondary",h="esri-button--disabled",x="esri-icon-measure-area",j="esri-area-measurement-2d",f="esri-widget",k="esri-widget--panel",O="esri-area-measurement-2d__container",U="esri-area-measurement-2d__hint",A="esri-area-measurement-2d__hint-text",S="esri-area-measurement-2d__panel--error",D="esri-area-measurement-2d__measurement",L="esri-area-measurement-2d__measurement-item",B="esri-area-measurement-2d__measurement-item--disabled",H="esri-area-measurement-2d__measurement-item-title",C="esri-area-measurement-2d__measurement-item-value",$="esri-area-measurement-2d__settings",E="esri-area-measurement-2d__units",z="esri-area-measurement-2d__units-label",I="esri-area-measurement-2d__units-select esri-select",P="esri-area-measurement-2d__units-select-wrapper",T="esri-area-measurement-2d__actions",V="esri-area-measurement-2d__clear-button";let W=function(s){function t(e,t){var r;return(r=s.call(this,e,t)||this).active=null,r.iconClass=x,r.label=void 0,r.messages=null,r.messagesUnits=null,r.unit=null,r.unitOptions=null,r.view=null,r.viewModel=new g,r}e._inheritsLoose(t,s);var r=t.prototype;return r.render=function(){const{id:e,viewModel:s,visible:t}=this,{active:r,isSupported:a,measurementLabel:i,state:n,unit:o,unitOptions:l}=s,u="disabled"===n,d="ready"===n,c="measuring"===n||"measured"===n,{messages:m,messagesUnits:_}=this,v=r&&d?y.jsx("section",{key:"hint",class:U},y.jsx("p",{class:A},m.hint)):null,b=a?null:y.jsx("section",{key:"unsupported",class:S},y.jsx("p",null,m.unsupported)),w=(e,s,t)=>s?y.jsx("div",{key:`${t}-enabled`,class:L},y.jsx("span",{class:H},e),y.jsx("span",{class:C},s)):y.jsx("div",{key:`${t}-disabled`,class:this.classes(L,B),"aria-disabled":"true"},y.jsx("span",{class:H},e)),g=c?y.jsx("section",{key:"measurement",class:D},w(m.area,i.area,"area"),w(m.perimeter,i.perimeter,"perimeter")):null,x=`${e}__units`,W=y.jsx("section",{key:"units",class:E},y.jsx("label",{class:z,for:x},m.unit),y.jsx("div",{class:P},y.jsx("select",{class:I,id:x,onchange:this._changeUnit,bind:this,value:o},l.map((e=>{var s;return y.jsx("option",{key:e,value:e},p.isMeasurementSystem(e)?_.systems[e]:null==(s=_.units[e])?void 0:s.pluralCapitalized)}))))),q=c?y.jsx("div",{key:"settings",class:$},W):null,F=!a||r&&!c?null:y.jsx("div",{class:T},y.jsx("button",{disabled:u,class:this.classes(M,V,u&&h),bind:this,onclick:this._newMeasurement,title:m.newMeasurement,type:"button","aria-label":m.newMeasurement},m.newMeasurement)),G=t?y.jsx("div",{class:O},b,v,q,g,F):null;return y.jsx("div",{class:this.classes(j,f,k)},G)},r._newMeasurement=function(){c.ignoreAbortErrors(this.viewModel.start())},r._changeUnit=function(e){const s=e.target,t=s.options[s.selectedIndex];t&&(this.viewModel.unit=t.value)},t}(w);return s.__decorate([n.aliasOf("viewModel.active"),b.renderable()],W.prototype,"active",void 0),s.__decorate([i.property()],W.prototype,"iconClass",void 0),s.__decorate([i.property({aliasOf:{source:"messages.widgetLabel",overridable:!0}})],W.prototype,"label",void 0),s.__decorate([i.property(),b.renderable(),v.messageBundle("esri/widgets/AreaMeasurement2D/t9n/AreaMeasurement2D")],W.prototype,"messages",void 0),s.__decorate([i.property(),b.renderable(),v.messageBundle("esri/core/t9n/Units")],W.prototype,"messagesUnits",void 0),s.__decorate([n.aliasOf("viewModel.unit")],W.prototype,"unit",void 0),s.__decorate([n.aliasOf("viewModel.unitOptions")],W.prototype,"unitOptions",void 0),s.__decorate([n.aliasOf("viewModel.view")],W.prototype,"view",void 0),s.__decorate([i.property({type:g}),b.renderable(["viewModel.state","viewModel.unitOptions","viewModel.unit","viewModel.measurementLabel"])],W.prototype,"viewModel",void 0),s.__decorate([n.aliasOf("viewModel.visible"),b.renderable()],W.prototype,"visible",void 0),s.__decorate([_.accessibleHandler()],W.prototype,"_newMeasurement",null),s.__decorate([_.accessibleHandler()],W.prototype,"_changeUnit",null),W=s.__decorate([o.subclass("esri.widgets.AreaMeasurement2D")],W),W}));
