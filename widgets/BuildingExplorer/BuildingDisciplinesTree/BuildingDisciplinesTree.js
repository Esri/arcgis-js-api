/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.23/esri/copyright.txt for details.
*/
define(["../../../chunks/_rollupPluginBabelHelpers","../../../chunks/tslib.es6","../../../core/reactiveUtils","../../../core/accessorSupport/decorators/property","../../../core/arrayUtils","../../../core/has","../../../core/accessorSupport/ensureType","../../../core/accessorSupport/decorators/subclass","../../Widget","../BuildingDisciplinesViewModel","./BuildingDisciplinesNode","../../support/widgetUtils","../../../core/Logger","../../support/jsxFactory"],(function(e,i,t,s,o,r,l,d,n,a,c,p,g,u){"use strict";const h={expand:"expand",collapse:"collapse",hideSublayer:"hideSublayer",showSublayer:"showSublayer"},y={base:`${"esri-building-disciplines-tree"}`};let _=function(i){function s(e){var t;return(t=i.call(this,e)||this)._defaultViewModel=new a,t.viewModel=t._defaultViewModel,t.messages=h,t.toggleSiblingsVisibility=!1,t._childWidgets=[],t._updateChildWidgets=()=>{t._destroyChildWidgets(),t.viewModel&&(t._childWidgets=t.viewModel.root.children.toArray().reverse().map((e=>new c({node:e,messages:t.messages,toggleSiblingsVisibility:t.toggleSiblingsVisibility}))))},t}e._inheritsLoose(s,i);var o=s.prototype;return o.initialize=function(){this.own(t.on((()=>{var e,i;return null==(e=this.viewModel)||null==(i=e.root)?void 0:i.children}),"after-changes",this._updateChildWidgets,{onListenerAdd:this._updateChildWidgets,onListenerRemove:this._updateChildWidgets}),t.watch((()=>[this.messages,this.toggleSiblingsVisibility]),this._updateChildWidgets,t.initial))},o.destroy=function(){this._destroyChildWidgets(),this.viewModel!==this._defaultViewModel&&this._defaultViewModel.destroy()},o.render=function(){return u.tsx("div",{role:"tree",class:y.base},this._childWidgets.map((e=>e.render())))},o._destroyChildWidgets=function(){this._childWidgets.forEach((e=>e.destroy())),this._childWidgets=[]},s}(n);i.__decorate([s.property({type:a})],_.prototype,"viewModel",void 0),i.__decorate([s.property()],_.prototype,"messages",void 0),i.__decorate([s.property({nonNullable:!0})],_.prototype,"toggleSiblingsVisibility",void 0),i.__decorate([s.property()],_.prototype,"_childWidgets",void 0),_=i.__decorate([d.subclass("esri.widgets.BuildingExplorer.BuildingDisciplinesTree.BuildingDisciplinesTree")],_);return _}));
