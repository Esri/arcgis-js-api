/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.20/esri/copyright.txt for details.
*/
define(["exports","../../../chunks/_rollupPluginBabelHelpers","../../../chunks/tslib.es6","../../../chunks/label","../../../core/maybe","../../../core/timeUtils","../../../core/uuid","../../../core/accessorSupport/decorators/property","../../../core/has","../../../core/accessorSupport/ensureType","../../../core/Logger","../../../core/accessorSupport/decorators/subclass","../../../core/accessorSupport/trackingUtils","../../../intl/number","../../Slider","../../Widget","../css","./Label","./LabeledColorPicker","../../support/widgetUtils","../../support/decorators/messageBundle","../../support/jsxFactory"],(function(e,o,r,t,s,i,l,a,n,u,c,d,h,p,_,m,v,b,g,S,f,C){"use strict";e.ThresholdConfigurator=function(e){function r(o){var r;return(r=e.call(this,o)||this).colorPickerVisible=!0,r._valueSliderId=`value-slider-${l.generateUUID()}`,r._colorPickerId=`color-picker-${l.generateUUID()}`,r._valueSlider=new _({visibleElements:{labels:!1,rangeLabels:!1},steps:i.convertTime(30,"minutes","milliseconds"),labelFormatFunction:(e,o)=>{const r=i.convertTime(e,"milliseconds","hours");return"tick"===o?p.formatNumber(r,{maximumFractionDigits:0}):""}}),r._onColorChange=e=>{r.options.color=e},r}o._inheritsLoose(r,e);var t=r.prototype;return t.initialize=function(){const e=({value:e})=>{this.options.value=e};this.own([h.reactionInit((()=>{const{value:e,minValue:o,maxValue:r}=this.options;return{value:e,minValue:o,maxValue:r}}),(({value:e,minValue:o,maxValue:r})=>{const t=this._valueSlider;t.min=o,t.max=r,t.values=[e];const s=r-o,l=Math.floor(i.convertTime(s,"milliseconds","hours"));t.tickConfigs=[{mode:"count",values:2*l+1,labelsVisible:!1},{mode:"count",values:l+1,labelsVisible:!0}]})),this._valueSlider.on("thumb-change",e),this._valueSlider.on("thumb-drag",e)])},t.destroy=function(){this._valueSlider=s.destroyMaybe(this._valueSlider)},t.render=function(){const e=this._messages.threshold,{color:o}=this.options;return C.tsx("div",{class:v.THRESHOLD_CONFIGURATOR_CSS.base},C.tsx(b.Label,{class:v.THRESHOLD_CONFIGURATOR_CSS.valueLabel,for:this._valueSliderId,label:e.valueLabel},this._valueSlider.render()),this.colorPickerVisible&&C.tsx(g.LabeledColorPicker,{id:this._colorPickerId,label:e.colorLabel,value:o,onChange:this._onColorChange}))},o._createClass(r,[{key:"testData",get:function(){return{valueSlider:this._valueSlider}}}]),r}(m),r.__decorate([a.property()],e.ThresholdConfigurator.prototype,"options",void 0),r.__decorate([a.property()],e.ThresholdConfigurator.prototype,"colorPickerVisible",void 0),r.__decorate([a.property()],e.ThresholdConfigurator.prototype,"testData",null),r.__decorate([a.property()],e.ThresholdConfigurator.prototype,"_valueSlider",void 0),r.__decorate([a.property(),f.messageBundle("esri/widgets/ShadowAccumulation/t9n/ShadowAccumulation")],e.ThresholdConfigurator.prototype,"_messages",void 0),e.ThresholdConfigurator=r.__decorate([d.subclass("esri.widgets.ShadowAccumulation.components.ThresholdConfigurator")],e.ThresholdConfigurator),Object.defineProperty(e,"__esModule",{value:!0})}));
