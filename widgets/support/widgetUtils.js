/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.24/esri/copyright.txt for details.
*/
import e from"@esri/arcgis-html-sanitizer";import t from"../../core/ArrayPool.js";import{makeHandle as n}from"../../core/handleUtils.js";import"../../core/has.js";import r from"../../core/Logger.js";import{clearVNodeCache as i}from"./vnodeCache.js";var o,s,a=function(e){if("WebkitTransition"in e.style)o="webkitTransitionEnd",s="webkitAnimationEnd";else{if(!("transition"in e.style))throw new Error("Your browser is not supported!");o="transitionend",s="animationend"}},c=function(e){o||a(e)},l=function(e,t){return void 0===t&&(t=e+"-active"),function(n){c(n);var r=!1,i=function(a){r||(r=!0,n.removeEventListener(o,i),n.removeEventListener(s,i),n.classList.remove(e),n.classList.remove(t))};n.classList.add(e),n.addEventListener(o,i),n.addEventListener(s,i),requestAnimationFrame((function(){n.classList.add(t)}))}},d=function(e,t){return void 0===t&&(t=e+"-active"),function(n,r){c(n);var i=!1,a=function(e){i||(i=!0,n.removeEventListener(o,a),n.removeEventListener(s,a),r())};n.classList.add(e),n.addEventListener(o,a),n.addEventListener(s,a),requestAnimationFrame((function(){n.classList.add(t)}))}};const u=r.getLogger("esri.widgets.support.widgetUtils");function p(e){const n=t.acquire();for(let t=0;t<arguments.length;t++){const e=arguments[t],r=typeof e;if("string"===r)n.push(e);else if(Array.isArray(e))n.push.apply(n,e);else if("object"===r)for(const t in e)e[t]&&n.push(t)}const r=n.join(" ");return t.release(n),r}const g=(()=>{const e=new Map,t=new ResizeObserver((t=>{i();for(const n of t)e.get(n.target)(n)}));return(r,i,o)=>(e.has(r)&&u.error("Already observing element",r),e.set(r,i),t.observe(r,o),n((()=>{t.unobserve(r),e.delete(r)})))})();function f(e){const t=e?.closest("[dir]");return null!==t&&t instanceof HTMLElement&&"rtl"===t.dir||"rtl"===document.dir}function m(e){return f(e)?"rtl":"ltr"}function h(e){const t="data-node-ref";this[e.getAttribute(t)]=null}function v(e){const t="data-node-ref";this[e.getAttribute(t)]=e}function w(e,t){return("enter"===e?l:d)(t)}const L=["dd","dl","dt","h1","h2","h3","h4","h5","h6","sub","sup",...["animate","animatetransform","circle","clippath","defs","ellipse","g","image","line","lineargradient","marker","mask","path","pattern","polygon","polyline","radialgradient","rect","stop","svg","switch","symbol","text","textpath","tspan","use"]],b=L.reduce(((e,t)=>(e[t]=[],e)),{}),y=["align","alink","alt","bgcolor","border","cellpadding","cellspacing","class","color","cols","colspan","coords","d","dir","face","height","hspace","ismap","lang","marginheight","marginwidth","multiple","nohref","noresize","noshade","nowrap","ref","rel","rev","rows","rowspan","scrolling","shape","span","summary","tabindex","title","usemap","valign","value","vlink","vspace","width"],E=new e({whiteList:b,onTagAttr:(e,t,n)=>{const r=`${t}="${n}"`;if(y.includes(t))return r},stripIgnoreTag:!0,stripIgnoreTagBody:["script","style"]},!0);function A(e,t){const n=e.getBoundingClientRect(),r=t.getBoundingClientRect(),i=n.top+n.height,o=r.top+r.height,s=n.top,a=r.top;(i>o||s<a)&&e.scrollIntoView({block:"end"})}function k(e){return"Enter"===e||" "===e}export{L as additionalAllowedTags,p as classes,w as cssTransition,h as discardNode,m as getDir,k as isActivationKey,f as isRTL,A as keepMenuItemWithinView,g as onResize,E as renderingSanitizer,y as safeAttrs,v as storeNode};
