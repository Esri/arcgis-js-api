/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.24/esri/copyright.txt for details.
*/
import t from"../../core/Error.js";import{getDateTimeFormatter as e,formatDate as r}from"../../intl/date.js";import{getLanguage as n}from"../../intl/locale.js";function o(t,r){const n=e(r),o=Date.now(),c=n.formatToParts(o),l=new Set;c.filter((({type:t})=>"literal"===t)).forEach((({value:t})=>l.add(t)));let s=0;const f={};for(;c.length>0;){const{type:e,value:r}=c.shift();for(let n=0;n<r.length;n++,s++){const r=t.charAt(s);if(l.has(r)){s++;break}if("literal"===e)break;f[e]||(f[e]=[]),f[e].push(r)}}const h={};try{h.day=a(f.day.join("")),h.month=a(f.month.join("")),h.year=a((f.year||f.relatedYear).join(""))}catch(u){throw i(r)}if(isNaN(h.day)||isNaN(h.month)||isNaN(h.year))throw i(r);return h}function a(t){const e=[/٠/g,/١/g,/٢/g,/٣/g,/٤/g,/٥/g,/٦/g,/٧/g,/٨/g,/٩/g];for(let r=0;r<10;r++)t=t.replace(e[r],r.toString());return Number(t)}function i(e){return new t(`could not parse date input, expecting the following format: ${r(Date.now(),e)}`)}const c={ar:6,"ar-dz":6,"ar-kw":6,"ar-ly":6,"ar-ma":1,"ar-sa":7,"ar-tn":1,bg:1,bs:1,ca:1,cs:1,da:1,de:1,"de-at":1,"de-ch":1,el:1,"en-au":1,"en-ca":7,"en-gb":1,"en-ie":1,"en-il":7,"en-in":7,"en-nz":1,"en-sg":7,es:1,"es-do":7,"es-mx":7,"es-us":7,et:1,fi:1,fr:1,"fr-ca":7,"fr-ch":1,he:7,hr:1,hu:1,id:7,it:1,"it-ch":1,ja:7,ko:7,lt:1,lv:1,nb:1,nl:1,"nl-be":1,pl:1,pt:7,"pt-br":7,ro:1,ru:1,sk:1,sl:1,sr:1,"sr-cyrl":1,sv:1,th:7,tr:1,uk:1,vi:1,"zh-cn":7,"zh-hk":7,"zh-mo":7,"zh-tw":7},l="Locale"in Intl&&"weekInfo"in Intl.Locale.prototype;function s(t){if(t=t.toLowerCase(),c[t])return c[t];if(l)try{const e=new Intl.Locale(t).weekInfo.firstDay;return c[t]=e,e}catch{}const e=n(t);return c[e]?c[e]:7}function f(t,e){return(e+7-s(t))%7}export{s as getFirstDayOfWeek,f as getLocaleDayOfWeek,o as parseDateIntoParts};
