/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.19/esri/copyright.txt for details.
*/
define(["../chunks/_rollupPluginBabelHelpers","../chunks/tslib.es6","../core/has","../core/maybe","../core/Logger","../core/accessorSupport/ensureType","../core/accessorSupport/decorators/property","../core/accessorSupport/decorators/aliasOf","../core/accessorSupport/decorators/subclass","../core/urlUtils","../core/uuid","../portal/support/resourceExtension","../core/promiseUtils","../core/watchUtils","./support/widgetUtils","../chunks/index","./Widget","./Spinner/SpinnerViewModel"],(function(e,i,t,o,s,n,r,c,a,l,p,u,h,d,v,_,w,f){"use strict";const b={base:"esri-spinner",spinnerStart:"esri-spinner--start",spinnerFinish:"esri-spinner--finish"};let y=function(i){function t(e,t){var o;return(o=i.call(this,e,t)||this)._animationDelay=500,o._animationPromise=null,o.location=null,o.view=null,o.viewModel=new f,o.visible=!1,o}e._inheritsLoose(t,i);var s=t.prototype;return s.initialize=function(){this.own([d.watch(this,"visible",(e=>this._visibleChange(e)))])},s.destroy=function(){this._animationPromise=null},s.show=function(e){const{location:i,promise:t}=e;i&&(this.viewModel.location=i),this.visible=!0;const o=()=>this.hide();t&&t.catch((()=>{})).then(o)},s.hide=function(){this.visible=!1},s.render=function(){const{visible:e}=this,{screenLocation:i}=this.viewModel,t=!!i,o=e&&t,s=!e&&t,n={[b.spinnerStart]:o,[b.spinnerFinish]:s},r=this._getPositionStyles();return _.jsx("div",{class:this.classes(b.base,n),styles:r})},s._visibleChange=function(e){if(e)return void(this.viewModel.screenLocationEnabled=!0);const i=h.after(this._animationDelay);this._animationPromise=i,i.catch((()=>{})).then((()=>{this._animationPromise===i&&(this.viewModel.screenLocationEnabled=!1,this._animationPromise=null)}))},s._getPositionStyles=function(){const{screenLocation:e,view:i}=this.viewModel;if(!i||o.isNone(e))return{};const{padding:t}=i;return{left:e.x-t.left+"px",top:e.y-t.top+"px"}},t}(w);return i.__decorate([c.aliasOf("viewModel.location")],y.prototype,"location",void 0),i.__decorate([c.aliasOf("viewModel.view")],y.prototype,"view",void 0),i.__decorate([r.property({type:f})],y.prototype,"viewModel",void 0),i.__decorate([c.aliasOf("viewModel.visible")],y.prototype,"visible",void 0),y=i.__decorate([a.subclass("esri.widgets.Spinner")],y),y}));
