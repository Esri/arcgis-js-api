/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.25/esri/copyright.txt for details.
*/
define(["../chunks/_rollupPluginBabelHelpers","../chunks/tslib.es6","../core/maybe","../core/promiseUtils","../core/reactiveUtils","../core/accessorSupport/decorators/property","../core/arrayUtils","../core/accessorSupport/ensureType","../core/accessorSupport/decorators/subclass","./Widget","./Spinner/SpinnerViewModel","./support/widgetUtils","./support/jsxFactory"],(function(e,i,t,n,o,s,r,c,l,a,p,u,h){"use strict";const d={base:"esri-spinner",spinnerStart:"esri-spinner--start",spinnerFinish:"esri-spinner--finish"};let v=function(i){function s(e,t){var n;return(n=i.call(this,e,t)||this)._animationDelay=500,n._animationPromise=null,n.viewModel=new p,n}e._inheritsLoose(s,i);var r=s.prototype;return r.initialize=function(){this.addHandles(o.watch((()=>this.visible),(e=>this._visibleChange(e))))},r.destroy=function(){this._animationPromise=null},r.show=function(e){const{location:i,promise:t}=e;i&&(this.viewModel.location=i),this.visible=!0;const n=()=>this.hide();t&&t.catch((()=>{})).then(n)},r.hide=function(){this.visible=!1},r.render=function(){const{visible:e}=this,{screenLocation:i}=this.viewModel,t=!!i,n=e&&t,o=!e&&t,s={[d.spinnerStart]:n,[d.spinnerFinish]:o},r=this._getPositionStyles();return h.tsx("div",{class:this.classes(d.base,s),styles:r})},r._visibleChange=function(e){if(e)return void(this.viewModel.screenLocationEnabled=!0);const i=n.after(this._animationDelay);this._animationPromise=i,i.catch((()=>{})).then((()=>{this._animationPromise===i&&(this.viewModel.screenLocationEnabled=!1,this._animationPromise=null)}))},r._getPositionStyles=function(){const{screenLocation:e,view:i}=this.viewModel;if(t.isNone(i)||t.isNone(e))return{};const{padding:n}=i;return{left:e.x-n.left+"px",top:e.y-n.top+"px"}},e._createClass(s,[{key:"location",get:function(){return this.viewModel.location},set:function(e){this.viewModel.location=e}},{key:"view",get:function(){return this.viewModel.view},set:function(e){this.viewModel.view=e}},{key:"visible",get:function(){return this.viewModel.visible},set:function(e){this.viewModel.visible=e}}]),s}(a);i.__decorate([s.property()],v.prototype,"location",null),i.__decorate([s.property()],v.prototype,"view",null),i.__decorate([s.property({type:p})],v.prototype,"viewModel",void 0),i.__decorate([s.property()],v.prototype,"visible",null),v=i.__decorate([l.subclass("esri.widgets.Spinner")],v);return v}));
