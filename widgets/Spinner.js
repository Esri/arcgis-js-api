/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.18/esri/copyright.txt for details.
*/
define(["../chunks/_rollupPluginBabelHelpers","../chunks/tslib.es6","../core/has","../core/Logger","../core/accessorSupport/ensureType","../core/accessorSupport/decorators/property","../core/accessorSupport/decorators/aliasOf","../core/accessorSupport/decorators/subclass","../core/urlUtils","../core/uuid","../portal/support/resourceExtension","../core/promiseUtils","../core/watchUtils","./support/widgetUtils","./support/decorators/renderable","../chunks/index","./Widget","./Spinner/SpinnerViewModel"],(function(e,i,o,t,s,n,r,c,a,l,p,d,u,h,v,w,_,f){"use strict";const b="esri-spinner",y="esri-spinner--start",m="esri-spinner--finish";let M=function(i){function o(e,o){var t;return(t=i.call(this,e,o)||this)._animationDelay=500,t._animationPromise=null,t.location=null,t.view=null,t.viewModel=new f,t.visible=!1,t}e._inheritsLoose(o,i);var t=o.prototype;return t.initialize=function(){this.own([u.watch(this,"visible",(e=>this._visibleChange(e)))])},t.destroy=function(){this._animationPromise=null},t.show=function(e){const{location:i,promise:o}=e;i&&(this.viewModel.location=i),this.visible=!0;const t=()=>this.hide();o&&o.catch((()=>{})).then(t)},t.hide=function(){this.visible=!1},t.render=function(){const{visible:e}=this,{screenLocation:i}=this.viewModel,o=!!i,t={[y]:e&&o,[m]:!e&&o},s=this._getPositionStyles();return w.jsx("div",{class:this.classes(b,t),styles:s})},t._visibleChange=function(e){if(e)return void(this.viewModel.screenLocationEnabled=!0);const i=d.after(this._animationDelay);this._animationPromise=i,i.catch((()=>{})).then((()=>{this._animationPromise===i&&(this.viewModel.screenLocationEnabled=!1,this._animationPromise=null)}))},t._getPositionStyles=function(){const{screenLocation:e,view:i}=this.viewModel;if(!i||!e)return{};const{padding:o}=i;return{left:e.x-o.left+"px",top:e.y-o.top+"px"}},o}(_);return i.__decorate([r.aliasOf("viewModel.location")],M.prototype,"location",void 0),i.__decorate([r.aliasOf("viewModel.view")],M.prototype,"view",void 0),i.__decorate([n.property({type:f}),v.renderable(["viewModel.screenLocation","viewModel.screenLocationEnabled"])],M.prototype,"viewModel",void 0),i.__decorate([r.aliasOf("viewModel.visible")],M.prototype,"visible",void 0),M=i.__decorate([c.subclass("esri.widgets.Spinner")],M),M}));
