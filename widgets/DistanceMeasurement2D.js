/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.18/esri/copyright.txt for details.
*/
define(["../chunks/_rollupPluginBabelHelpers","../chunks/tslib.es6","../core/has","../core/Logger","../core/accessorSupport/ensureType","../core/accessorSupport/decorators/property","../core/accessorSupport/decorators/aliasOf","../core/accessorSupport/decorators/subclass","../core/urlUtils","../core/uuid","../portal/support/resourceExtension","../core/promiseUtils","../core/unitUtils","./support/widgetUtils","./support/decorators/accessibleHandler","./support/decorators/messageBundle","./support/decorators/renderable","../chunks/index","./Widget","./DistanceMeasurement2D/DistanceMeasurement2DViewModel"],(function(e,s,t,i,r,n,a,o,l,d,c,u,p,m,_,v,b,y,w,g){"use strict";const M="esri-button esri-button--secondary",h="esri-button--disabled",x="esri-icon-measure-line",j="esri-distance-measurement-2d",f="esri-widget",k="esri-widget--panel",O="esri-distance-measurement-2d__container",U="esri-distance-measurement-2d__hint",D="esri-distance-measurement-2d__hint-text",S="esri-distance-measurement-2d__panel--error",L="esri-distance-measurement-2d__measurement",B="esri-distance-measurement-2d__measurement-item",H="esri-distance-measurement-2d__measurement-item--disabled",C="esri-distance-measurement-2d__measurement-item-title",$="esri-distance-measurement-2d__measurement-item-value",E="esri-distance-measurement-2d__settings",z="esri-distance-measurement-2d__units",A="esri-distance-measurement-2d__units-label",I="esri-distance-measurement-2d__units-select esri-select",P="esri-distance-measurement-2d__units-select-wrapper",T="esri-distance-measurement-2d__actions",V="esri-distance-measurement-2d__clear-button";let W=function(s){function t(e,t){var i;return(i=s.call(this,e,t)||this).iconClass=x,i.label=void 0,i.messages=null,i.messagesUnits=null,i.unit=null,i.unitOptions=null,i.view=null,i.viewModel=new g,i}e._inheritsLoose(t,s);var i=t.prototype;return i.render=function(){const{id:e,messages:s,messagesUnits:t,viewModel:i,visible:r}=this,{active:n,isSupported:a,measurementLabel:o,state:l,unit:d,unitOptions:c}=i,u="disabled"===l,m="measuring"===l||"measured"===l,_=n&&"ready"===l?y.jsx("section",{key:"hint",class:U},y.jsx("p",{class:D},s.hint)):null,v=a?null:y.jsx("section",{key:"unsupported",class:S},y.jsx("p",null,s.unsupported)),b=m?y.jsx("section",{key:"measurement",class:L},((e,s,t)=>s?y.jsx("div",{key:`${t}-enabled`,class:B},y.jsx("span",{class:C},e),y.jsx("span",{class:$},s)):y.jsx("div",{key:`${t}-disabled`,class:this.classes(B,H),"aria-disabled":"true"},y.jsx("span",{class:C},e)))(s.distance,o,"distance")):null,w=`${e}-units`,g=m?y.jsx("section",{key:"units",class:z},y.jsx("label",{class:A,for:w},s.unit),y.jsx("div",{class:P},y.jsx("select",{class:I,id:w,onchange:this._changeUnit,bind:this,value:d},c.map((e=>{var s;return y.jsx("option",{key:e,value:e},p.isMeasurementSystem(e)?t.systems[e]:null==(s=t.units[e])?void 0:s.pluralCapitalized)}))))):null,x=m?y.jsx("div",{key:"settings",class:E},g):null,W=!a||n&&!m?null:y.jsx("div",{class:T},y.jsx("button",{disabled:u,class:this.classes(M,V,u&&h),bind:this,onclick:this._newMeasurement,title:s.newMeasurement,"aria-label":s.newMeasurement,type:"button"},s.newMeasurement)),q=r?y.jsx("div",{class:O},v,_,x,b,W):null;return y.jsx("div",{class:this.classes(j,f,k)},q)},i._newMeasurement=function(){u.ignoreAbortErrors(this.viewModel.start())},i._changeUnit=function(e){const s=e.target,t=s.options[s.selectedIndex];t&&(this.viewModel.unit=t.value)},t}(w);return s.__decorate([a.aliasOf("viewModel.active"),b.renderable()],W.prototype,"active",void 0),s.__decorate([n.property()],W.prototype,"iconClass",void 0),s.__decorate([n.property({aliasOf:{source:"messages.widgetLabel",overridable:!0}})],W.prototype,"label",void 0),s.__decorate([n.property(),b.renderable(),v.messageBundle("esri/widgets/DistanceMeasurement2D/t9n/DistanceMeasurement2D")],W.prototype,"messages",void 0),s.__decorate([n.property(),b.renderable(),v.messageBundle("esri/core/t9n/Units")],W.prototype,"messagesUnits",void 0),s.__decorate([a.aliasOf("viewModel.unit")],W.prototype,"unit",void 0),s.__decorate([a.aliasOf("viewModel.unitOptions")],W.prototype,"unitOptions",void 0),s.__decorate([a.aliasOf("viewModel.view")],W.prototype,"view",void 0),s.__decorate([n.property({type:g}),b.renderable(["viewModel.state","viewModel.unitOptions","viewModel.unit","viewModel.measurementLabel"])],W.prototype,"viewModel",void 0),s.__decorate([a.aliasOf("viewModel.visible"),b.renderable()],W.prototype,"visible",void 0),s.__decorate([_.accessibleHandler()],W.prototype,"_newMeasurement",null),s.__decorate([_.accessibleHandler()],W.prototype,"_changeUnit",null),W=s.__decorate([o.subclass("esri.widgets.DistanceMeasurement2D")],W),W}));
