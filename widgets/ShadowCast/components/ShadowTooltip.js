/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.24/esri/copyright.txt for details.
*/
import{_ as t}from"../../../chunks/tslib.es6.js";import e from"../../../core/Accessor.js";import{removeMaybe as o,destroyMaybe as n,isNone as i}from"../../../core/maybe.js";import{watch as r,syncAndInitial as s}from"../../../core/reactiveUtils.js";import{property as a}from"../../../core/accessorSupport/decorators/property.js";import"../../../core/arrayUtils.js";import"../../../core/has.js";import"../../../core/accessorSupport/ensureType.js";import{subclass as c}from"../../../core/accessorSupport/decorators/subclass.js";import{ShadowTooltipContent as p}from"./ShadowTooltipContent.js";let d=class extends e{constructor(t){super(t),this._updateHandle=null,this._contentContainer=this._createContainer()}initialize(){this.container.appendChild(this._contentContainer),this._contentWidget=new p({},this._contentContainer),this._updateHandle=r((()=>{const t=this._contentContainer,{screenPoint:e,accumulatedShadowTime:o}=this.viewModel.tooltip;return{contentContainer:t,screenPoint:e,accumulatedShadowTime:o}}),(t=>this._update(t)),s)}destroy(){this._updateHandle=o(this._updateHandle),this._contentWidget=n(this._contentWidget),this.container.contains(this._contentContainer)&&this.container.removeChild(this._contentContainer)}get testData(){return{displayedValue:"none"===this._contentContainer.style.display?null:this._contentWidget.container.innerText}}_update({contentContainer:t,screenPoint:e,accumulatedShadowTime:o}){const{style:n}=t;i(e)?n.display="none":(n.display="block",n.transform=`translate(${e.x}px, ${e.y}px)`,this._contentWidget.accumulatedShadowTime=o)}_createContainer(){const t=document.createElement("div"),{style:e}=t;return e.position="absolute",e.top="0",e.left="0",t}};t([a()],d.prototype,"viewModel",void 0),t([a()],d.prototype,"container",void 0),t([a()],d.prototype,"_contentContainer",void 0),t([a()],d.prototype,"_contentWidget",void 0),d=t([c("esri.widgets.ShadowCast.components.ShadowTooltip")],d);export{d as ShadowTooltip};
