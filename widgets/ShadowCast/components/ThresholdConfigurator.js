/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.21/esri/copyright.txt for details.
*/
define(["require","exports","../../../chunks/_rollupPluginBabelHelpers","../../../chunks/tslib.es6","../../../core/maybe","../../../core/timeUtils","../../../core/uuid","../../../core/accessorSupport/decorators/property","../../../core/has","../../../core/accessorSupport/ensureType","../../../core/Logger","../../../core/accessorSupport/decorators/subclass","../../../core/accessorSupport/trackingUtils","../../../intl/number","../../Slider","../../Widget","../css","./Label","./LabeledColorPicker","../../support/widgetUtils","../../support/decorators/messageBundle","../../support/jsxFactory"],(function(e,o,r,t,s,i,l,a,n,u,c,d,h,p,_,v,m,b,g,S,C,f){"use strict";o.ThresholdConfigurator=function(o){function t(e){var r;return(r=o.call(this,e)||this).colorPickerVisible=!0,r._valueSliderId=`value-slider-${l.generateUUID()}`,r._colorPickerId=`color-picker-${l.generateUUID()}`,r._valueSlider=new _({visibleElements:{labels:!1,rangeLabels:!1},steps:i.convertTime(30,"minutes","milliseconds"),labelFormatFunction:(e,o)=>{const r=i.convertTime(e,"milliseconds","hours");return"tick"===o?p.formatNumber(r,{maximumFractionDigits:0}):""}}),r._onColorChange=e=>{r.options.color=e},r}r._inheritsLoose(t,o);var a=t.prototype;return a.initialize=function(){const e=({value:e})=>{this.options.value=e};this.own([h.reactionInit((()=>{const{value:e,minValue:o,maxValue:r}=this.options;return{value:e,minValue:o,maxValue:r}}),(({value:e,minValue:o,maxValue:r})=>{const t=this._valueSlider;t.min=o,t.max=r,t.values=[e];const s=r-o,l=Math.floor(i.convertTime(s,"milliseconds","hours"));t.tickConfigs=[{mode:"count",values:2*l+1,labelsVisible:!1},{mode:"count",values:l+1,labelsVisible:!0}]})),this._valueSlider.on("thumb-change",e),this._valueSlider.on("thumb-drag",e)])},a.loadDependencies=function(){return new Promise((function(o,r){e(["../../../chunks/label"],o,r)}))},a.destroy=function(){this._valueSlider=s.destroyMaybe(this._valueSlider)},a.render=function(){const e=this._messages.threshold,{color:o}=this.options;return f.tsx("div",{class:m.THRESHOLD_CONFIGURATOR_CSS.base},f.tsx(b.Label,{class:m.THRESHOLD_CONFIGURATOR_CSS.valueLabel,for:this._valueSliderId,label:e.valueLabel},this._valueSlider.render()),this.colorPickerVisible&&f.tsx(g.LabeledColorPicker,{id:this._colorPickerId,label:e.colorLabel,value:o,onChange:this._onColorChange}))},r._createClass(t,[{key:"testData",get:function(){return{valueSlider:this._valueSlider}}}]),t}(v),t.__decorate([a.property()],o.ThresholdConfigurator.prototype,"options",void 0),t.__decorate([a.property()],o.ThresholdConfigurator.prototype,"colorPickerVisible",void 0),t.__decorate([a.property()],o.ThresholdConfigurator.prototype,"testData",null),t.__decorate([a.property()],o.ThresholdConfigurator.prototype,"_valueSlider",void 0),t.__decorate([a.property(),C.messageBundle("esri/widgets/ShadowCast/t9n/ShadowCast")],o.ThresholdConfigurator.prototype,"_messages",void 0),o.ThresholdConfigurator=t.__decorate([d.subclass("esri.widgets.ShadowCast.components.ThresholdConfigurator")],o.ThresholdConfigurator),Object.defineProperty(o,"__esModule",{value:!0})}));
