/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.24/esri/copyright.txt for details.
*/
import{_ as e}from"../../../chunks/tslib.es6.js";import{isNone as t,applySome as s,isSome as o}from"../../../core/maybe.js";import{property as r}from"../../../core/accessorSupport/decorators/property.js";import"../../../core/arrayUtils.js";import"../../../core/has.js";import"../../../core/accessorSupport/ensureType.js";import{subclass as i}from"../../../core/accessorSupport/decorators/subclass.js";import c from"../../Widget.js";import{TIMEZONE_PICKER_CSS as n}from"../css.js";import{getTimezoneInfos as p}from"../../support/timeWidgetUtils.js";import"../../support/widgetUtils.js";import{messageBundle as l}from"../../support/decorators/messageBundle.js";import{tsx as a}from"../../support/jsxFactory.js";let m=class extends c{constructor(e,t){super(e,t),this._focused=!1}loadDependencies(){return import("@esri/calcite-components/dist/components/calcite-icon.js")}render(){const e=this._gmtOffsets,s=this._timezoneMessages;if(t(e)||t(s))return a("div",{class:n.base});const o=this.value,r=this._selectedItemText;return a("div",{class:n.base},a("select",{key:"hidden-select",class:n.hiddenSelect,"aria-label":s.chooseTimezone,title:s.chooseTimezone,value:String(o),bind:this,onfocus:this._onFocus,onblur:this._onBlur,onchange:this._onDropdownSelectChange},e.map((({utcOffset:e,shortWithUTC:t,long:s})=>a("option",{value:String(e)},t," - ",s)))),a("div",{key:"visible-select",class:this.classes({[n.select]:!0,[n.selectFocused]:this._focused})},r,a("calcite-icon",{icon:"chevron-down",scale:"s"})))}get _gmtOffsets(){return s(this._timezoneMessages,p)}get _selectedItem(){const e=this.value,s=this._gmtOffsets;return t(e)||t(s)?null:s.find((t=>t.utcOffset===e))}get _selectedItemText(){const e=this._selectedItem;return o(e)?e.short:""}_onDropdownSelectChange(e){const t=e.target,s=parseInt(t?.value,10);Number.isFinite(s)&&o(this.onChange)&&this.onChange(s)}_onFocus(){this._focused=!0}_onBlur(){this._focused=!1}};e([r()],m.prototype,"value",void 0),e([r()],m.prototype,"onChange",void 0),e([r(),l("esri/widgets/support/t9n/timezone")],m.prototype,"_timezoneMessages",void 0),e([r()],m.prototype,"_focused",void 0),e([r({readOnly:!0})],m.prototype,"_gmtOffsets",null),e([r({readOnly:!0})],m.prototype,"_selectedItem",null),e([r({readOnly:!0})],m.prototype,"_selectedItemText",null),m=e([i("esri.widgets.ShadowCast.components.TimezonePicker")],m);export{m as TimezonePicker};
