/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.18/esri/copyright.txt for details.
*/
define(["../../chunks/_rollupPluginBabelHelpers","../../chunks/tslib.es6","../../core/has","../../core/Logger","../../core/accessorSupport/ensureType","../../core/accessorSupport/decorators/property","../../core/accessorSupport/decorators/subclass","../../core/urlUtils","../../core/uuid","../../portal/support/resourceExtension","../../Color","../../core/Handles","../../core/watchUtils","./ElevationProfileLine","./support/elevationQuerySourceUtils"],(function(e,o,n,r,t,i,l,s,u,a,c,p,d,h,v){"use strict";let f=function(o){function n(e){var n;return(n=o.call(this,e)||this).type="ground",n.color=new c([136,186,83]),n.numSamplesForPreview=50,n.numSamplesPerChunk=500,n}e._inheritsLoose(n,o);var r=n.prototype;return r.queryElevation=async function(e,o){var n,r,t;const i=null==(n=this._viewModel)||null==(r=n.view)||null==(t=r.map)?void 0:t.ground;if(!i)throw new Error("No ground configured in the view");return i.queryElevation(e,o)},r.attach=function(e){const n=new p;n.add(o.prototype.attach.call(this,e));const r=()=>{this._watchTileInfos(n),this._onChange()};return n.add(d.on(e,"view.map.ground.layers","change",r,r,r)),n},r._watchTileInfos=function(e){var o,n,r,t;e.remove("tile-infos");const i=null!=(o=null==(n=this._viewModel)||null==(r=n.view.map)||null==(t=r.ground.layers)?void 0:t.toArray())?o:[];e.add(i.map((e=>e.watch("tileInfo",(()=>this.notifyChange("minDemResolution"))))),"tile-infos"),this.notifyChange("minDemResolution")},e._createClass(n,[{key:"minDemResolution",get:function(){var e,o,n;return v.getGroundMinDemResolution(null==(e=this._viewModel)||null==(o=e.view)||null==(n=o.map)?void 0:n.ground)}}]),n}(h.ElevationProfileLine);return o.__decorate([i.property({type:c,nonNullable:!0})],f.prototype,"color",void 0),o.__decorate([i.property({readOnly:!0})],f.prototype,"minDemResolution",null),f=o.__decorate([l.subclass("esri.widgets.ElevationProfile.ElevationProfileLineGround")],f),f}));
