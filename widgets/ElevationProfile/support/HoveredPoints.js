/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.19/esri/copyright.txt for details.
*/
define(["exports","../../../chunks/_rollupPluginBabelHelpers","../../../chunks/tslib.es6","../../../core/has","../../../core/maybe","../../../core/Logger","../../../core/accessorSupport/ensureType","../../../core/accessorSupport/decorators/property","../../../core/accessorSupport/decorators/subclass","../../../core/urlUtils","../../../core/uuid","../../../portal/support/resourceExtension","../../../core/accessorSupport/trackingUtils","../../../core/Accessor","../../../core/Collection","../../support/AnchorElementViewModel","./constants"],(function(e,o,t,r,n,s,i,c,d,a,p,l,h,u,v,_,P){"use strict";e.HoveredPoints=function(e){function t(o){var t;return(t=e.call(this,o)||this)._hoveredPoints=new v,t}o._inheritsLoose(t,e);var r=t.prototype;return r.initialize=function(){this._updateScreenLocationsHandle=h.autorun((()=>{this._hoveredPoints.forEach((({anchor:e,element:o})=>{n.applySome(e.screenLocation,(({x:e,y:t})=>{o.style.transform=`translate(${e}px, ${t}px)`}))}))}))},r.destroy=function(){this._updateScreenLocationsHandle=n.removeMaybe(this._updateScreenLocationsHandle),this._hoveredPoints.drain((e=>this._destroyHoveredPoint(e)))},r.update=function(e){const o=this.view,t=this._hoveredPoints,r=e.length;for(;this._hoveredPoints.length>r;)this._destroyHoveredPoint(this._hoveredPoints.pop());for(;this._hoveredPoints.length<r;){const e=this._makeHoveredPoint();t.push(e),o.surface.appendChild(e.element)}for(let n=0;n<r;++n){const o=t.getItemAt(r-1-n),s=e[n];this._updateHoveredPoint(o,s)}},r._makeHoveredPoint=function(){const{size:e,borderStyle:o,borderColor:t,borderWidth:r,boxShadow:n}=P.HOVERED_POINTS_STYLE,s=this.view,i=new _({view:s,screenLocationEnabled:!0}),c=document.createElement("div"),d=c.style;return d.position="absolute",d.top="0",d.left="0",d.contain="strict",d.boxSizing="border-box",d.width=`${e}px`,d.height=`${e}px`,d.marginTop=`-${e/2}px`,d.marginLeft=`-${e/2}px`,d.border=`${o} ${r}px ${t}`,d.borderRadius=`${e}px`,d.boxShadow=n,{anchor:i,element:c}},r._updateHoveredPoint=function({anchor:e,element:o},t){e.screenLocationEnabled=!0,e.location=t.hoveredPoint;const r=o.style;r.display="block",r.background=t.color.toCss()},r._destroyHoveredPoint=function({anchor:e,element:o}){e.destroy(),this.view.surface.removeChild(o)},t}(u),t.__decorate([c.property()],e.HoveredPoints.prototype,"view",void 0),t.__decorate([c.property()],e.HoveredPoints.prototype,"_hoveredPoints",void 0),e.HoveredPoints=t.__decorate([d.subclass("esri.widgets.ElevationProfile.support.HoveredPoints")],e.HoveredPoints),Object.defineProperty(e,"__esModule",{value:!0})}));
