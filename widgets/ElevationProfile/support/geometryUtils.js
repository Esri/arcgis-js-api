/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.18/esri/copyright.txt for details.
*/
define(["require","exports","../../../core/maybe","../../../core/promiseUtils","../../../geometry/support/spatialReferenceUtils","../../../geometry/SpatialReference","../../../core/unitUtils","../../../geometry/projection","../../../geometry/support/geodesicUtils"],(function(e,t,i,r,n,o,s,a,c){"use strict";function l(e,t){const i=e/t.maxSamples;return Math.max(t.samplingDistance,i)}function p(e){return i.isSome(e)&&"polyline"===e.type}t.densifyPath=async function(t,i,p,u){let d,h,f=null;const g=t.spatialReference,m=g.isGeographic||g.isWebMercator,y=await new Promise((function(t,i){e(["../../../geometry/geometryEngineAsync"],t,i)}));r.throwIfAborted(u);let w=0;if(m||(w=await y.planarLength(t,"meters"),r.throwIfAborted(u)),m||w>=p.geodesicDistanceThreshold){if(await a.initializeProjection([{source:g,dest:i},{source:g,dest:o.WGS84}],u),!n.isEarth(g)&&c.isSupported(g)){d=c.geodesicLengths([t],"meters")[0];const e=l(d,p);f=c.geodesicDensify(t,e)}else{const e=a.project(t,o.WGS84);d=await y.geodesicLength(e,"meters"),r.throwIfAborted(u);const i=l(d,p);f=await y.geodesicDensify(e,i,"meters"),r.throwIfAborted(u)}h=a.project(f,i)}else{await a.initializeProjection([{source:g,dest:i}],u),d=w;const e=l(d,p);h=await y.densify(t,e,"meters"),r.throwIfAborted(u),h=a.project(h,i)}return{densifiedPath:h,densifiedPathInMeasurementSR:f,pathLength:d/s.getMetersPerUnitForSR(i)}},t.isMultiPathPolyline=function(e){return p(e)&&e.paths.length>1},t.isPolyline=p,t.isValidInputPath=function(e){return p(e)&&1===e.paths.length&&e.paths[0].length>=2},Object.defineProperty(t,"__esModule",{value:!0})}));
