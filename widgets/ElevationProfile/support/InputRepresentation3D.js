/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.21/esri/copyright.txt for details.
*/
define(["exports","../../../chunks/_rollupPluginBabelHelpers","../../../core/handleUtils","../../../core/maybe","../../../core/promiseUtils","../../../support/elevationInfoUtils","../../../views/3d/interactive/editingTools/settings","../../../views/3d/interactive/visualElements/OutlineVisualElement","../../../views/3d/layers/graphics/GraphicState","../../../views/support/layerViewUtils"],(function(e,t,i,n,s,l,a,r,h,o){"use strict";let u=function(){function e(e){this._params=e,this._highlightTask=null,this._highlightHandle=null,this._visualElementHandle=null}var u=e.prototype;return u.destroy=function(){this.remove()},u.remove=function(){this._highlightTask=n.abortMaybe(this._highlightTask),this._highlightHandle=n.removeMaybe(this._highlightHandle),this._visualElementHandle=n.removeMaybe(this._visualElementHandle)},u.showHighlight=function(e){var i=this;if(this.remove(),n.isNone(e)||!c(e))return;const l=e.layer;this._highlightTask=s.createTask(function(){var n=t._asyncToGenerator((function*(t){const n=yield i._params.view.whenLayerView(l);s.throwIfAborted(t),o.highlightsSupported(n)&&(i._highlightHandle=n.highlight(e))}));return function(e){return n.apply(this,arguments)}}())},u.showReshaping=function(e){if(this.remove(),n.isNone(e))return;const t=this._params.view,s=new r.OutlineVisualElement({view:t,geometry:c(e)?e.geometry:null,attached:!1,elevationInfo:l.getGraphicEffectiveElevationInfo(e),renderOccluded:8}),o=new h.GraphicState({graphic:e}),u=[o.watch("isDraped",(e=>{s.isDraped=e})),o.on("changed",(()=>{s.geometry=c(e)?e.geometry:null})),t.trackGraphicState(o),t.maskOccludee(e),i.destroyHandle(s)];a.settings.visualElements.lineGraphics.outline.apply(s),s.attached=!0,this._visualElementHandle=i.handlesGroup(u)},e}();function c(e){return n.isSome(e.geometry)&&"polyline"===e.geometry.type}e.InputRepresentation3D=u,Object.defineProperty(e,"__esModule",{value:!0})}));
