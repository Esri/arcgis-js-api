/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.19/esri/copyright.txt for details.
*/
define(["exports","../../../core/maybe","../../../core/handleUtils","../../../core/promiseUtils","../../../support/elevationInfoUtils","../../../views/support/layerViewUtils","../../../views/3d/interactive/editingTools/settings","../../../views/3d/interactive/visualElements/OutlineVisualElement","../../../views/3d/layers/graphics/GraphicState"],(function(e,t,i,n,s,a,l,h,r){"use strict";let o=function(){function e(e){this._params=e,this._highlightTask=null,this._highlightHandle=null,this._visualElementHandle=null}var o=e.prototype;return o.destroy=function(){this.remove()},o.remove=function(){this._highlightTask=t.abortMaybe(this._highlightTask),this._highlightHandle=t.removeMaybe(this._highlightHandle),this._visualElementHandle=t.removeMaybe(this._visualElementHandle)},o.showHighlight=function(e){if(this.remove(),t.isNone(e)||!u(e))return;const i=e.layer;this._highlightTask=n.createTask((async t=>{const s=await this._params.view.whenLayerView(i);n.throwIfAborted(t),a.highlightsSupported(s)&&(this._highlightHandle=s.highlight(e))}))},o.showReshaping=function(e){if(this.remove(),t.isNone(e))return;const n=this._params.view,a=new h.OutlineVisualElement({view:n,geometry:u(e)?e.geometry:null,attached:!1,elevationInfo:s.getGraphicEffectiveElevationInfo(e),renderOccluded:8}),o=new r.GraphicState({graphic:e}),c=[o.watch("isDraped",(e=>{a.isDraped=e})),o.on("changed",(()=>{a.geometry=u(e)?e.geometry:null})),n.trackGraphicState(o),n.maskOccludee(e),i.destroyHandle(a)];l.settings.visualElements.lineGraphics.outline.apply(a),a.attached=!0,this._visualElementHandle=i.handlesGroup(c)},e}();function u(e){return t.isSome(e.geometry)&&"polyline"===e.geometry.type}e.InputRepresentation3D=o,Object.defineProperty(e,"__esModule",{value:!0})}));
