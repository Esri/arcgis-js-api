/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.26/esri/copyright.txt for details.
*/
define(["exports","../../../chunks/_rollupPluginBabelHelpers","../../../core/asyncUtils","../../../core/handleUtils","../../../core/maybe","../../../core/promiseUtils","../../../core/reactiveUtils","../../../support/elevationInfoUtils","../../../views/3d/interactive/editingTools/settings","../../../views/3d/interactive/visualElements/OutlineVisualElement","../../../views/3d/layers/graphics/GraphicState","../../../views/3d/webgl-engine/lib/Material","../../../views/support/layerViewUtils"],(function(e,t,i,n,l,a,s,r,h,o,c,u,g){"use strict";let d=function(){function e(e){this._params=e,this._highlightTask=null,this._highlightHandle=null,this._visualElementHandle=null}var d=e.prototype;return d.destroy=function(){this.remove()},d.remove=function(){this._highlightTask=l.abortMaybe(this._highlightTask),this._highlightHandle=l.removeMaybe(this._highlightHandle),this._visualElementHandle=l.removeMaybe(this._visualElementHandle)},d.showHighlight=function(e){var n=this;if(this.remove(),l.isNone(e)||!p(e))return;const s=e.layer;this._highlightTask=i.createTask(function(){var i=t._asyncToGenerator((function*(t){const i=yield n._params.view.whenLayerView(s);a.throwIfAborted(t),g.highlightsSupported(i)&&(n._highlightHandle=i.highlight(e))}));return function(e){return i.apply(this,arguments)}}())},d.showReshaping=function(e){if(this.remove(),l.isNone(e))return;const t=this._params.view,i=new o.OutlineVisualElement({view:t,geometry:p(e)?e.geometry:null,attached:!1,elevationInfo:r.getGraphicEffectiveElevationInfo(e),renderOccluded:u.RenderOccludedFlag.OccludeAndTransparentStencil}),a=new c.GraphicState({graphic:e}),g=[s.watch((()=>a.isDraped),(e=>{i.isDraped=e})),a.on("changed",(()=>{i.geometry=p(e)?e.geometry:null})),t.trackGraphicState(a),t.maskOccludee(e),n.destroyHandle(i)];h.settings.visualElements.lineGraphics.outline.apply(i),i.attached=!0,this._visualElementHandle=n.handlesGroup(g)},e}();function p(e){return l.isSome(e.geometry)&&"polyline"===e.geometry.type}e.InputRepresentation3D=d,Object.defineProperty(e,Symbol.toStringTag,{value:"Module"})}));
