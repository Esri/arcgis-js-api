/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.18/esri/copyright.txt for details.
*/
define(["require","exports","../../../core/maybe","../../../core/promiseUtils","../../../core/Handles","../../../core/watchUtils"],(function(i,t,e,n,a,o){"use strict";let s=function(){function t(i){this._parentViewModel=i,this._visualization=null,this._loadingTask=null,this._handles=new a}var s=t.prototype;return s.initialize=function(){this._handles.add(o.init(this._parentViewModel,"view",(()=>this._load())))},s.destroy=function(){this._handles.destroy(),this._handles=null,e.isSome(this._loadingTask)&&(this._loadingTask.abort(),this._loadingTask=null),e.isSome(this._visualization)&&(this._visualization.destroy(),this._visualization=null)},s._load=function(){e.isSome(this._loadingTask)&&this._loadingTask.abort(),this._loadingTask=n.createTask((async t=>{const e=this._parentViewModel;if("2d"===e.view.type){const a=new Promise((function(t,e){i(["./ElevationProfileVisualization2D"],t,e)})),o=(await n.whenOrAbort(a,t)).ElevationProfileVisualization2D;this._visualization=new o(e)}else if((i=>"3d"===i.view.type)(e)){const a=new Promise((function(t,e){i(["./ElevationProfileVisualization3D"],t,e)})),o=(await n.whenOrAbort(a,t)).ElevationProfileVisualization3D;this._visualization=new o(e)}}))},t}();t.ElevationProfileVisualization=s,Object.defineProperty(t,"__esModule",{value:!0})}));
