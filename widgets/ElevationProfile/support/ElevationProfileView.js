/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.20/esri/copyright.txt for details.
*/
define(["require","exports","../../../chunks/_rollupPluginBabelHelpers","../../../chunks/tslib.es6","../../../core/Accessor","../../../core/Handles","../../../core/maybe","../../../core/promiseUtils","../../../core/accessorSupport/decorators/property","../../../core/has","../../../core/accessorSupport/ensureType","../../../core/Logger","../../../core/accessorSupport/decorators/subclass","../../../core/accessorSupport/trackingUtils"],(function(e,i,o,t,n,s,r,l,a,c,u,h,d,p){"use strict";i.ElevationProfileView=function(i){function t(e){var o;return(o=i.call(this,e)||this)._implementation=null,o._loadingTask=null,o._handles=new s,o}o._inheritsLoose(t,i);var n=t.prototype;return n.initialize=function(){this._handles.add(p.autorun((()=>{this.tool.visible?this._show():this._hide()})))},n.destroy=function(){this._handles=r.destroyMaybe(this._handles),this._hide()},n._show=function(){var i=this;r.isSome(this._loadingTask)&&this._loadingTask.abort();const t=this.tool,n=t.viewModel.view;if(r.isNone(n))return this._hide();this._loadingTask=l.createTask(function(){var s=o._asyncToGenerator((function*(o){if("2d"===n.type){const s=new Promise((function(i,o){e(["./ElevationProfileView2D"],i,o)})),r=(yield l.whenOrAbort(s,o)).ElevationProfileView2D;i._implementation=new r(n,t)}else if("3d"===n.type){const s=new Promise((function(i,o){e(["./ElevationProfileView3D"],i,o)})),r=(yield l.whenOrAbort(s,o)).ElevationProfileView3D;i._implementation=new r(n,t)}}));return function(e){return s.apply(this,arguments)}}())},n._hide=function(){r.isSome(this._loadingTask)&&(this._loadingTask.abort(),this._loadingTask=null),this._implementation=r.destroyMaybe(this._implementation)},t}(n),t.__decorate([a.property()],i.ElevationProfileView.prototype,"tool",void 0),i.ElevationProfileView=t.__decorate([d.subclass("esri.widgets.ElevationProfile.support.ElevationProfileView")],i.ElevationProfileView),Object.defineProperty(i,"__esModule",{value:!0})}));
