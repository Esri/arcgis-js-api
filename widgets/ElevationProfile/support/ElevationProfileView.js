/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.19/esri/copyright.txt for details.
*/
define(["require","exports","../../../chunks/_rollupPluginBabelHelpers","../../../chunks/tslib.es6","../../../core/has","../../../core/maybe","../../../core/Logger","../../../core/accessorSupport/ensureType","../../../core/accessorSupport/decorators/property","../../../core/accessorSupport/decorators/subclass","../../../core/urlUtils","../../../core/uuid","../../../portal/support/resourceExtension","../../../core/promiseUtils","../../../core/accessorSupport/trackingUtils","../../../core/Accessor","../../../core/Handles"],(function(e,i,o,t,s,r,n,a,l,c,u,h,d,p,_,f,w){"use strict";i.ElevationProfileView=function(i){function t(e){var o;return(o=i.call(this,e)||this)._implementation=null,o._loadingTask=null,o._handles=new w,o}o._inheritsLoose(t,i);var s=t.prototype;return s.initialize=function(){this._handles.add(_.autorun((()=>{this.tool.visible?this._show():this._hide()})))},s.destroy=function(){this._handles=r.destroyMaybe(this._handles),this._hide()},s._show=function(){r.isSome(this._loadingTask)&&this._loadingTask.abort();const i=this.tool,o=i.viewModel.view;if(r.isNone(o))return this._hide();this._loadingTask=p.createTask((async t=>{if("2d"===o.type){const s=new Promise((function(i,o){e(["./ElevationProfileView2D"],i,o)})),r=(await p.whenOrAbort(s,t)).ElevationProfileView2D;this._implementation=new r(o,i)}else if("3d"===o.type){const s=new Promise((function(i,o){e(["./ElevationProfileView3D"],i,o)})),r=(await p.whenOrAbort(s,t)).ElevationProfileView3D;this._implementation=new r(o,i)}}))},s._hide=function(){r.isSome(this._loadingTask)&&(this._loadingTask.abort(),this._loadingTask=null),this._implementation=r.destroyMaybe(this._implementation)},t}(f),t.__decorate([l.property()],i.ElevationProfileView.prototype,"tool",void 0),i.ElevationProfileView=t.__decorate([c.subclass("esri.widgets.ElevationProfile.support.ElevationProfileView")],i.ElevationProfileView),Object.defineProperty(i,"__esModule",{value:!0})}));
