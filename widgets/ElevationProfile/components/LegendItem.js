/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.19/esri/copyright.txt for details.
*/
define(["exports","../../../chunks/_rollupPluginBabelHelpers","../../../chunks/tslib.es6","../../../core/has","../../../core/maybe","../../../core/Logger","../../../core/accessorSupport/ensureType","../../../core/accessorSupport/decorators/property","../../../core/accessorSupport/decorators/subclass","../../../core/urlUtils","../../../core/uuid","../../../portal/support/resourceExtension","../../../intl/substitute","../../../intl","../../support/widgetUtils","../../support/decorators/messageBundle","../../../chunks/index","../../Widget","../css","./Statistics","../support/intlUtils"],(function(e,t,s,i,o,r,n,l,c,a,d,p,_,h,u,g,b,E,y,k,x){"use strict";e.LegendItem=function(e){function s(t,s){var i;return(i=e.call(this,t,s)||this).expanded=!1,i.checkboxVisible=!0,i._messages=null,i}t._inheritsLoose(s,e);var i=s.prototype;return i.initialize=function(){this._statistics=new k.Statistics(this._statisticsProps),this.own(this.watch("_statisticsProps",(e=>{this._statistics.set(e)})))},i.destroy=function(){this._statistics=o.destroyMaybe(this._statistics)},i.render=function(){const e=this.expanded;return b.jsx("div",{key:this,class:this.classes(y.LEGEND_ITEM_CSS.base,{[y.LEGEND_ITEM_CSS.disabled]:this.disabled,[y.LEGEND_ITEM_CSS.expanded]:e})},this._renderColorIndicator(),b.jsx("div",{key:"header",class:y.LEGEND_ITEM_CSS.header},this._renderLabelWithCheckbox(),this._renderCollapseToggleButton()),e&&b.jsx("div",{key:"content",class:y.LEGEND_ITEM_CSS.content},this._statistics.render()))},i._renderColorIndicator=function(){return b.jsx("div",{key:"color-indicator",class:y.LEGEND_ITEM_CSS.colorIndicator,styles:{backgroundColor:this.line.color.toCss()}})},i._renderCollapseToggleButton=function(){const e=this._messages,t=this.expanded?e.hideDetails:e.showDetails;return b.jsx("button",{key:"collapse-toggle",bind:this,class:y.LEGEND_ITEM_CSS.collapseToggle,onclick:this._onCollapseToggleClick,title:t,"aria-label":t,type:"button"},b.jsx("span",{class:y.LEGEND_ITEM_CSS.collapseToggleIcon}))},i._onCollapseToggleClick=function(){this.onExpandedToggle()},i._renderLabelWithCheckbox=function(){const{line:e,checkboxVisible:t,disabled:s}=this,i=`${y.LEGEND_ITEM_CSS.base}__check-${e.id}`;return b.jsx("label",{key:"id",for:i,class:this.classes(y.LEGEND_ITEM_CSS.label,{[y.LEGEND_ITEM_CSS.labelDisabled]:s||!t})},t&&this._renderCheckbox(i),b.jsx("span",null,x.getTranslatedLineTitle(e,this._messages)))},i._renderCheckbox=function(e){const t=this.line,s=t.visible,i=this.disabled,o=this._messages,r=s?o.hideProfile:o.showProfile,n=x.getTranslatedLineTitle(t,this._messages),l=_.substitute(r,{name:n});return b.jsx("button",{key:"checkbox",id:e,class:this.classes(y.LEGEND_ITEM_CSS.checkbox,{[y.LEGEND_ITEM_CSS.checkboxChecked]:s}),title:l,checked:s,disabled:i,role:"checkbox","aria-checked":s?"true":"false","aria-label":l,bind:this,onclick:e=>this._onCheckboxToggle(e,t)})},i._onCheckboxToggle=function(e,t){e.stopPropagation(),t.toggleVisibility()},t._createClass(s,[{key:"disabled",get:function(){return!this.line.available}},{key:"_statisticsProps",get:function(){return{line:this.line,effectiveUnits:this.effectiveUnits}}}]),s}(E),s.__decorate([l.property({nonNullable:!0})],e.LegendItem.prototype,"effectiveUnits",void 0),s.__decorate([l.property({nonNullable:!0})],e.LegendItem.prototype,"line",void 0),s.__decorate([l.property()],e.LegendItem.prototype,"expanded",void 0),s.__decorate([l.property()],e.LegendItem.prototype,"disabled",null),s.__decorate([l.property()],e.LegendItem.prototype,"checkboxVisible",void 0),s.__decorate([l.property()],e.LegendItem.prototype,"onExpandedToggle",void 0),s.__decorate([l.property()],e.LegendItem.prototype,"_statistics",void 0),s.__decorate([l.property(),g.messageBundle("esri/widgets/ElevationProfile/t9n/ElevationProfile")],e.LegendItem.prototype,"_messages",void 0),e.LegendItem=s.__decorate([c.subclass("esri.widgets.ElevationProfile.LegendItem")],e.LegendItem),Object.defineProperty(e,"__esModule",{value:!0})}));
