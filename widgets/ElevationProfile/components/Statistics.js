/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.19/esri/copyright.txt for details.
*/
define(["exports","../../../chunks/_rollupPluginBabelHelpers","../../../chunks/tslib.es6","../../../core/has","../../../core/maybe","../../../core/Logger","../../../core/accessorSupport/ensureType","../../../core/accessorSupport/decorators/property","../../../core/accessorSupport/decorators/subclass","../../../core/urlUtils","../../../core/uuid","../../../portal/support/resourceExtension","../../../core/unitFormatUtils","../../../core/throttle","../../support/widgetUtils","../../support/decorators/messageBundle","../../../chunks/index","../../Widget","../css","../support/constants"],(function(t,e,s,i,r,o,a,n,c,l,d,S,p,u,_,h,v,m,f,g){"use strict";const y=100;t.Statistics=function(t){function s(e,s){var i;return(i=t.call(this,e,s)||this)._messagesUnits=null,i._updateLayout=t=>{const e=t.parentElement,s=t.style.display;e.removeChild(t),document.body.appendChild(t),t.style.display="block";let i=80;for(const r of t.childNodes)r instanceof HTMLElement&&(i=Math.max(i,r.offsetWidth));document.body.removeChild(t),e.appendChild(t),t.style.display=s,t.style.setProperty("--max-width",`${i}px`)},i._updateLayoutThrottled=u.throttle(i._updateLayout,y),i}e._inheritsLoose(s,t);var i=s.prototype;return i.initialize=function(){this.own(this._updateLayoutThrottled)},i.render=function(){return v.jsx("div",{bind:this,class:f.STATISTICS_CSS.base,afterCreate:this._updateLayout,afterUpdate:this._updateLayoutThrottled},this._renderStatistics())},i._renderStatistics=function(){var t;const e=null==(t=this._messages)?void 0:t.statistics;return e?[this._renderDistanceStatistic("maxDistance",e.maxDistance),this._renderElevationStatistic("elevationGain",e.gain),this._renderElevationStatistic("elevationLoss",e.loss),this._renderElevationStatistic("minElevation",e.minElevation),this._renderElevationStatistic("maxElevation",e.maxElevation),this._renderElevationStatistic("avgElevation",e.avgElevation),this._renderSlopeStatistic("maxPositiveSlope","maxNegativeSlope",e.maxSlope),this._renderSlopeStatistic("avgPositiveSlope","avgNegativeSlope",e.avgSlope)]:[]},i._renderDistanceStatistic=function(t,e){const s=this._renderValue(t,(t=>{const e=this.effectiveUnits.distance;return p.formatDecimal(this._messagesUnits,t,e,g.FORMAT_PRECISION)}));return this._renderStatistic(e,s)},i._renderElevationStatistic=function(t,e){const s=this._renderValue(t,(t=>{const e=this.effectiveUnits.elevation;return p.formatDecimal(this._messagesUnits,t,e,g.FORMAT_PRECISION)}));return this._renderStatistic(e,s)},i._renderSlopeStatistic=function(t,e,s){const i=v.jsx("div",{key:"slope-up",class:f.STATISTICS_CSS.slopeValue},v.jsx("div",{class:f.STATISTICS_CSS.slopeUpIcon}),this._renderValue(t,(t=>p.formatAngleDegrees(t,"degrees",g.FORMAT_PRECISION))),v.jsx("div",{class:f.STATISTICS_CSS.slopeDownIcon}),this._renderValue(e,(t=>p.formatAngleDegrees(t,"degrees",g.FORMAT_PRECISION))));return this._renderStatistic(s,i)},i._renderStatistic=function(t,e){return v.jsx("div",{class:f.STATISTICS_CSS.statistic},v.jsx("label",{class:f.STATISTICS_CSS.statisticLabel},t),v.jsx("div",{class:f.STATISTICS_CSS.statisticValue},e))},i._renderValue=function(t,e){const s=this.line,i=1===s.progress?s.statistics:null,o=r.applySome(i,(e=>e[t]));return r.isSome(o)?e(o):g.NOT_AVAILABLE},s}(m),s.__decorate([n.property()],t.Statistics.prototype,"effectiveUnits",void 0),s.__decorate([n.property()],t.Statistics.prototype,"line",void 0),s.__decorate([n.property(),h.messageBundle("esri/widgets/ElevationProfile/t9n/ElevationProfile")],t.Statistics.prototype,"_messages",void 0),s.__decorate([n.property(),h.messageBundle("esri/core/t9n/Units")],t.Statistics.prototype,"_messagesUnits",void 0),t.Statistics=s.__decorate([c.subclass("esri.widgets.ElevationProfile.Statistics")],t.Statistics),Object.defineProperty(t,"__esModule",{value:!0})}));
