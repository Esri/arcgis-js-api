/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.26/esri/copyright.txt for details.
*/
define(["require","../chunks/_rollupPluginBabelHelpers","../chunks/tslib.es6","../core/Handles","../core/reactiveUtils","../core/accessorSupport/decorators/property","../core/accessorSupport/decorators/cast","../core/arrayUtils","../core/accessorSupport/decorators/subclass","./Widget","./support/widgetUtils","./support/decorators/messageBundle","./support/jsxFactory","./UtilityNetworkAssociations/UtilityNetworkAssociationsViewModel"],(function(t,s,e,i,o,n,a,l,c,r,d,u,h,A){"use strict";const w={widgetBlockContent:"esri-un-associations__widget-block-content",widgetBlockActions:"esri-un-associations__widget-block-actions",widgetSettingsContainer:"esri-un-associations__widget-settings-container",widgetControlsLabelAndToggle:"esri-un-associations__controls-label-and-toggle",widgetControlsLabelAndSlider:"esri-un-associations__controls-label-and-slider",widgetControlsLabel:"esri-un-associations__controls-label",widgetControlsSlider:"esri-un-associations__controls-slider"},p={maxAllowableAssociationsSlider:!1};let b=function(e){function n(t,s){var o;return(o=e.call(this,t,s)||this)._autoRefreshAssociations=!0,o._associationsOptionsEnabled=!1,o._handles=new i,o._maxAllowableAssociationsSliderMax=1e3,o._maxAllowableAssociationsSliderMin=250,o._maxAllowableAssociationsSliderStep=250,o._warningMessage="",o.messages=null,o.showAssociationsEnabled=!1,o.viewModel=new A,o.visibleElements={...p},o}s._inheritsLoose(n,e);var a=n.prototype;return a.initialize=function(){this._handles.add([o.watch((()=>[this.view?.stationary,this.showAssociationsEnabled,this.includeConnectivityAssociations,this.includeStructuralAttachmentAssociations,this.maxAllowableAssociations]),(()=>{!0===this.autoRefreshAssociations&&(!0===this.showAssociationsEnabled?this.viewModel.showAssociations():this.viewModel.removeAssociations())}))])},a.castVisibleElements=function(t){return{...p,...t}},a.render=function(){const{messages:t}=this;return h.tsx("div",null,h.tsx("calcite-block",{heading:t.widgetLabel,class:w.widgetBlockContent,collapsible:!0,open:!0},this.autoRefreshAssociations?this.renderShowAssociationsSwitch():this.renderRefreshAssociationsAction(),this.renderShowStatusIcon(),this.renderSettings()),this.autoRefreshAssociations?this.renderShowAssociationsSwitchTooltip():this.renderRefreshAssociationsActionTooltip(),this.renderShowStatusIconTooltip())},a.loadDependencies=function(){return Promise.all([new Promise(((s,e)=>t(["../chunks/calcite-action"],s,e))),new Promise(((s,e)=>t(["../chunks/calcite-block"],s,e))),new Promise(((s,e)=>t(["../chunks/calcite-label"],s,e))),new Promise(((s,e)=>t(["../chunks/calcite-slider"],s,e))),new Promise(((s,e)=>t(["../chunks/calcite-switch"],s,e))),new Promise(((s,e)=>t(["../chunks/calcite-tooltip"],s,e)))])},a.renderConnectivityAssociationsToggle=function(){const{messages:{enableConnectivity:t}}=this;return h.tsx("div",{class:w.widgetControlsLabelAndToggle},h.tsx("calcite-label",{class:w.widgetControlsLabel},t),h.tsx("calcite-switch",{bind:this,disabled:!this._associationsOptionsEnabled&&this.autoRefreshAssociations,checked:this.includeConnectivityAssociations,onCalciteSwitchChange:this._connectivityAssociationsSwitchChange}))},a.renderMaxAllowableAssociationsSlider=function(){const{messages:{maxAllowableAssociations:t},visibleElements:{maxAllowableAssociationsSlider:s}}=this;return s?h.tsx("div",{class:w.widgetControlsLabelAndSlider},h.tsx("calcite-label",{class:w.widgetControlsLabel},t),h.tsx("calcite-slider",{bind:this,class:w.widgetControlsSlider,disabled:!this._associationsOptionsEnabled&&this.autoRefreshAssociations,min:this.maxAllowableAssociationsSliderMin,max:this.maxAllowableAssociationsSliderMax,step:this.maxAllowableAssociationsSliderStep,ticks:this.maxAllowableAssociationsSliderStep,value:this.maxAllowableAssociations,labelTicks:!0,snap:!0,scale:"s",onCalciteSliderChange:this._maxAllowableAssociationsSliderChange})):null},a.renderRefreshAssociationsAction=function(){return h.tsx("div",{slot:"control",style:"--calcite-ui-icon-color: #077ac2"},h.tsx("calcite-action",{id:"refreshAssociations-action",bind:this,class:w.widgetBlockActions,icon:"refresh-",text:"",onclick:this._refreshAssociations}))},a.renderRefreshAssociationsActionTooltip=function(){const{messages:{enableAssociations:t}}=this;return h.tsx("calcite-tooltip",{label:"refreshAssociations-action-tooltip-label",referenceElement:"refreshAssociations-action"},h.tsx("span",null,t))},a.renderSettings=function(){return h.tsx("div",{class:w.widgetSettingsContainer},this.renderConnectivityAssociationsToggle(),this.renderStructuralAttachmentAssociationsToggle(),this.renderMaxAllowableAssociationsSlider())},a.renderShowAssociationsSwitch=function(){return h.tsx("calcite-switch",{id:"showAssociations-switch",bind:this,class:w.widgetBlockActions,checked:this.showAssociationsEnabled,onCalciteSwitchChange:this._showAssociationsSwitchChange,slot:"control"})},a.renderShowAssociationsSwitchTooltip=function(){const{messages:{enableAssociations:t}}=this;return h.tsx("calcite-tooltip",{label:"showAssociations-switch-tooltip-label",referenceElement:"showAssociations-switch"},h.tsx("span",null,t))},a.renderShowStatusIcon=function(){const{messages:{maxAllowableAssociationsExceededWarning:t,noAssociationsFoundWarning:s}}=this,e=()=>this.maxAllowableAssociationsExceeded?(this._warningMessage=t,"exclamation-mark-triangle"):this.noAssociationsFound?(this._warningMessage=s,"exclamation-mark-triangle"):"blank",i=()=>"blank"===e();return h.tsx("div",{slot:"control",style:"--calcite-ui-icon-color: #edd317"},h.tsx("calcite-action",{id:"statusIcon-action",class:w.widgetBlockActions,icon:e(),disabled:i(),text:"",slot:"control"}))},a.renderShowStatusIconTooltip=function(){return h.tsx("calcite-tooltip",{label:"statusIcon-action-tooltip-label",referenceElement:"statusIcon-action"},h.tsx("span",null,this._warningMessage))},a.renderStructuralAttachmentAssociationsToggle=function(){const{messages:{enableStructuralAttachment:t}}=this;return h.tsx("div",{class:w.widgetControlsLabelAndToggle},h.tsx("calcite-label",{class:w.widgetControlsLabel},t),h.tsx("calcite-switch",{bind:this,disabled:!this._associationsOptionsEnabled&&this.autoRefreshAssociations,checked:this.includeStructuralAttachmentAssociations,onCalciteSwitchChange:this._structuralAttAssociationsSwitchChange}))},a._connectivityAssociationsSwitchChange=function(t){this.includeConnectivityAssociations=t.target.checked},a._maxAllowableAssociationsSliderChange=function(t){this.maxAllowableAssociations=Number(t.target.value)},a._refreshAssociations=function(){this.viewModel.showAssociations()},a._showAssociationsSwitchChange=function(t){this.showAssociationsEnabled=t.target.checked,this._associationsOptionsEnabled=t.target.checked},a._structuralAttAssociationsSwitchChange=function(t){this.includeStructuralAttachmentAssociations=t.target.checked},s._createClass(n,[{key:"autoRefreshAssociations",get:function(){return this._autoRefreshAssociations},set:function(t){this._autoRefreshAssociations=t}},{key:"connectivityAssociationsLineSymbol",get:function(){return this.viewModel.connectivityAssociationsLineSymbol},set:function(t){this.viewModel.connectivityAssociationsLineSymbol=t}},{key:"gdbVersion",get:function(){return this.viewModel.gdbVersion},set:function(t){this.viewModel.gdbVersion=t}},{key:"includeConnectivityAssociations",get:function(){return this.viewModel.includeConnectivityAssociations},set:function(t){this.viewModel.includeConnectivityAssociations=t}},{key:"includeStructuralAttachmentAssociations",get:function(){return this.viewModel.includeStructuralAttachmentAssociations},set:function(t){this.viewModel.includeStructuralAttachmentAssociations=t}},{key:"label",get:function(){return this.messages?.widgetLabel??""},set:function(t){this._overrideIfSome("label",t)}},{key:"maxAllowableAssociations",get:function(){return this.viewModel.maxAllowableAssociations},set:function(t){this.viewModel.maxAllowableAssociations=t}},{key:"maxAllowableAssociationsExceeded",get:function(){return this.viewModel.maxAllowableAssociationsExceeded},set:function(t){this.viewModel.maxAllowableAssociationsExceeded=t}},{key:"maxAllowableAssociationsSliderMax",get:function(){return this._maxAllowableAssociationsSliderMax},set:function(t){t<=this.maxAllowableAssociationsSliderMin||(this._maxAllowableAssociationsSliderMax=t)}},{key:"maxAllowableAssociationsSliderMin",get:function(){return this._maxAllowableAssociationsSliderMin},set:function(t){t<0||t>=this.maxAllowableAssociationsSliderMax||(this._maxAllowableAssociationsSliderMin=t)}},{key:"maxAllowableAssociationsSliderStep",get:function(){return this._maxAllowableAssociationsSliderStep},set:function(t){this._maxAllowableAssociationsSliderStep=t}},{key:"moment",get:function(){return this.viewModel.moment},set:function(t){this.viewModel.moment=t}},{key:"noAssociationsFound",get:function(){return this.viewModel.noAssociationsFound},set:function(t){this.viewModel.noAssociationsFound=t}},{key:"showArrowsConnectivity",get:function(){return this.viewModel.showArrowsConnectivity},set:function(t){this.viewModel.showArrowsConnectivity=t}},{key:"showArrowsStructuralAttachment",get:function(){return this.viewModel.showArrowsStructuralAttachment},set:function(t){this.viewModel.showArrowsStructuralAttachment=t}},{key:"structuralAttachmentAssociationsLineSymbol",get:function(){return this.viewModel.structuralAttachmentAssociationsLineSymbol},set:function(t){this.viewModel.structuralAttachmentAssociationsLineSymbol=t}},{key:"utilityNetwork",get:function(){return this.viewModel.utilityNetwork},set:function(t){this.viewModel.utilityNetwork=t}},{key:"view",get:function(){return this.viewModel.view},set:function(t){this.viewModel.view=t}}]),n}(r);e.__decorate([n.property()],b.prototype,"connectivityAssociationsLineSymbol",null),e.__decorate([n.property()],b.prototype,"gdbVersion",null),e.__decorate([n.property()],b.prototype,"includeConnectivityAssociations",null),e.__decorate([n.property()],b.prototype,"includeStructuralAttachmentAssociations",null),e.__decorate([n.property()],b.prototype,"label",null),e.__decorate([n.property()],b.prototype,"maxAllowableAssociations",null),e.__decorate([n.property()],b.prototype,"maxAllowableAssociationsExceeded",null),e.__decorate([n.property()],b.prototype,"maxAllowableAssociationsSliderMax",null),e.__decorate([n.property()],b.prototype,"maxAllowableAssociationsSliderMin",null),e.__decorate([n.property()],b.prototype,"maxAllowableAssociationsSliderStep",null),e.__decorate([n.property(),u.messageBundle("esri/widgets/UtilityNetworkAssociations/t9n/UtilityNetworkAssociations")],b.prototype,"messages",void 0),e.__decorate([n.property()],b.prototype,"moment",null),e.__decorate([n.property()],b.prototype,"noAssociationsFound",null),e.__decorate([n.property()],b.prototype,"showArrowsConnectivity",null),e.__decorate([n.property()],b.prototype,"showArrowsStructuralAttachment",null),e.__decorate([n.property()],b.prototype,"showAssociationsEnabled",void 0),e.__decorate([n.property()],b.prototype,"structuralAttachmentAssociationsLineSymbol",null),e.__decorate([n.property()],b.prototype,"utilityNetwork",null),e.__decorate([n.property()],b.prototype,"view",null),e.__decorate([n.property({type:A})],b.prototype,"viewModel",void 0),e.__decorate([n.property()],b.prototype,"visibleElements",void 0),e.__decorate([a.cast("visibleElements")],b.prototype,"castVisibleElements",null),b=e.__decorate([c.subclass("esri.widgets.UtilityNetworkAssociations")],b);return b}));
