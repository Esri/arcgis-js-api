/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.19/esri/copyright.txt for details.
*/
define(["../../../../chunks/_rollupPluginBabelHelpers","../../../../chunks/tslib.es6","../../../../core/has","../../../../core/Logger","../../../../core/accessorSupport/ensureType","../../../../core/accessorSupport/decorators/property","../../../../core/accessorSupport/decorators/subclass","../../../../core/urlUtils","../../../../core/uuid","../../../../portal/support/resourceExtension","../../../../core/Accessor","../../../../core/Collection"],(function(e,t,r,o,c,s,n,i,a,u,l,p){"use strict";const h="esri.widgets.FeatureTable.Grid.support.LocalStore";let m=function(t){function r(){var e;return(e=t.apply(this,arguments)||this).itemCache=new p,e.state="ready",e}e._inheritsLoose(r,t);var o=r.prototype;return o.destroy=function(){this.itemCache.destroy(),this._set("itemCache",null)},o.addItems=async function(e){this.itemCache.addMany(null==e?void 0:e.items)},o.fetchItems=async function(e){const{page:t,pageSize:r}=e,o=t*r;return this.itemCache.items.slice(o,o+r)},o.getLocalItemAt=function(e){return this.itemCache.getItemAt(e)},o.getItemAt=function(e){return Promise.resolve(this.itemCache.getItemAt(e))},o.load=async function(){},o.query=function(e){return this.fetchItems(e)},o.removeItemAt=async function(e){this.itemCache.removeAt(e)},o.reset=async function(){this.itemCache.removeAll()},o.updateItem=async function(e){const{index:t,name:r,value:o}=e,c=this.itemCache.getItemAt(t);c&&r&&c[r]&&(c[r]=o)},e._createClass(r,[{key:"count",get:function(){var e;return(null==(e=this.itemCache)?void 0:e.length)||0}}]),r}(l);return t.__decorate([s.property({readOnly:!0})],m.prototype,"count",null),t.__decorate([s.property()],m.prototype,"itemCache",void 0),t.__decorate([s.property({readOnly:!0})],m.prototype,"state",void 0),m=t.__decorate([n.subclass(h)],m),m}));
