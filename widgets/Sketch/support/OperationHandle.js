/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.20/esri/copyright.txt for details.
*/
define(["exports","../../../chunks/_rollupPluginBabelHelpers","../../../chunks/tslib.es6","../../../core/compilerUtils","../../../core/Evented","../../../core/accessorSupport/decorators/property","../../../core/has","../../../core/accessorSupport/ensureType","../../../core/Logger","../../../core/accessorSupport/decorators/subclass"],(function(e,o,t,r,n,p,a,i,s,c){"use strict";e.OperationHandle=function(e){function t(o){var t;return(t=e.call(this,o)||this).cancelled=!1,t.history={undo:[],redo:[]},t.type=null,t}o._inheritsLoose(t,e);var n=t.prototype;return n.addToHistory=function(e){this.history.redo=[],this.history.undo.push(e)},n.resetHistory=function(){this.history.redo=[],this.history.undo=[]},n.canUndo=function(){return this.history.undo.length>0},n.canRedo=function(){return this.history.redo.length>0},n.complete=function(){this.reset(),this.onEnd(),this.emit("complete")},n.cancel=function(){this.cancelled=!0,this.complete()},n.reset=function(){this.activeComponent.reset()},n.refreshComponent=function(){const e=this.activeComponent;e&&("box"!==e.type&&"reshape"!==e.type&&"graphic-mover"!==e.type||e.refresh())},o._createClass(t,[{key:"tool",get:function(){if(!this.activeComponent)return null;switch(this.activeComponent.type){case"graphic-mover":case"move-3d":return"move";case"box":case"transform-3d":return"transform";case"reshape":case"reshape-3d":return"reshape";case"draw":case"draw-3d":return null;default:r.neverReached(this.activeComponent)}return null}},{key:"undo",set:function(e){this._set("undo",(()=>{this.canUndo()&&e()}))}},{key:"redo",set:function(e){this._set("redo",(()=>{this.canRedo()&&e()}))}}]),t}(n.EventedAccessor),t.__decorate([p.property()],e.OperationHandle.prototype,"activeComponent",void 0),t.__decorate([p.property()],e.OperationHandle.prototype,"cancelled",void 0),t.__decorate([p.property()],e.OperationHandle.prototype,"history",void 0),t.__decorate([p.property()],e.OperationHandle.prototype,"tool",null),t.__decorate([p.property()],e.OperationHandle.prototype,"type",void 0),t.__decorate([p.property()],e.OperationHandle.prototype,"canUndo",null),t.__decorate([p.property()],e.OperationHandle.prototype,"canRedo",null),t.__decorate([p.property()],e.OperationHandle.prototype,"onEnd",void 0),t.__decorate([p.property()],e.OperationHandle.prototype,"undo",null),t.__decorate([p.property()],e.OperationHandle.prototype,"redo",null),t.__decorate([p.property()],e.OperationHandle.prototype,"toggleTool",void 0),t.__decorate([p.property()],e.OperationHandle.prototype,"addToSelection",void 0),t.__decorate([p.property()],e.OperationHandle.prototype,"removeFromSelection",void 0),e.OperationHandle=t.__decorate([c.subclass("esri.widgets.Sketch.support.OperationHandle")],e.OperationHandle),Object.defineProperty(e,"__esModule",{value:!0})}));
