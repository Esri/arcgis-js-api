// COPYRIGHT Â© 2020 Esri
//
// All rights reserved under the copyright laws of the United States
// and applicable international laws, treaties, and conventions.
//
// This material is licensed for use under the Esri Master License
// Agreement (MLA), and is bound by the terms of that agreement.
// You may redistribute and use this code without modification,
// provided you adhere to the terms of the MLA and include this
// copyright notice.
//
// See use restrictions at http://www.esri.com/legal/pdfs/mla_e204_e300/english
//
// For additional information, contact:
// Environmental Systems Research Institute, Inc.
// Attn: Contracts and Legal Services Department
// 380 New York Street
// Redlands, California, USA 92373
// USA
//
// email: contracts@esri.com
//
// See http://js.arcgis.com/4.17/esri/copyright.txt for details.

define(["require","exports","tslib","../core/deprecate","../core/events","../core/Handles","../core/Logger","../core/watchUtils","../core/accessorSupport/decorators","../libs/sortablejs/Sortable","../webdoc/support/Thumbnail","./Widget","./Bookmarks/BookmarksUserState","./Bookmarks/BookmarksViewModel","./FeatureTable/Grid/support/ButtonMenu","./FeatureTable/Grid/support/ButtonMenuItem","./support/widget"],(function(t,e,o,r,i,s,a,n,d,l,u,k,m,c,p,h,_){"use strict";var b="esri-bookmarks esri-widget--panel",v="esri-bookmarks__loader-container",f="esri-bookmarks__loader",g="esri-bookmarks__list",B="esri-bookmarks__list--sortable",y="esri-bookmarks__bookmark",x="esri-bookmarks__bookmark-button",I="esri-bookmarks__bookmark-image-container",E="esri-bookmarks__bookmark-edit-button",S="esri-bookmarks_bookmark-drag-handle",w="esri-bookmarks_bookmark-drag-handle-icon",A="esri-bookmarks__bookmark-icon",U="esri-bookmarks__image",C="esri-bookmarks__bookmark-name",M="esri-bookmarks__bookmark--active",N="esri-widget__content--empty",T="esri-bookmarks__no-bookmarks-heading",O="esri-widget__no-bookmark-icon",F="esri-bookmarks__no-bookmarks-description",H="esri-bookmarks__adding-bookmark",R="esri-bookmarks__add-bookmark",q="esri-bookmarks__add-bookmark-button",D="esri-bookmarks__add-bookmark-icon",L="esri-bookmarks__authoring-card",P="esri-bookmarks__authoring-container",V="esri-bookmarks__authoring-form",j="esri-bookmarks__authoring-label",z="esri-bookmarks__authoring-actions",K="esri-bookmarks__authoring-input--invalid",G="esri-bookmarks__authoring-delete-button",W="esri-bookmarks__authoring-cancel-button",J="esri-widget",Q="esri-widget--disabled",X="esri-button",Y="esri-button--tertiary",Z="esri-input",$="esri-icon-handle-vertical",tt="esri-icon-plus",et="esri-icon-edit",ot="esri-icon-handle-horizontal",rt="esri-icon-refresh",it="esri-icon-link",st="esri-icon-erase",at="esri-icon-bookmark",nt="esri-widget__heading",dt="esri-icon-loading-indicator",lt="esri-rotating",ut={addBookmark:!0,thumbnail:!0},kt=/^https:\/\/.*/i,mt=a.getLogger("esri.widgets.Bookmarks");return function(t){function e(e,r){var i=t.call(this,e,r)||this;return i._handles=new s,i._addInputNode=null,i._editInputNode=null,i._urlEditInputNode=null,i._addBookmarkButtonNode=null,i._focusAddBookmarkButton=!1,i._focusEditInputBox=!1,i._focusAddInputBox=!1,i._focusUrlEditInputBox=!1,i._sortable=null,i._sortableNode=null,i._focusSortUid=null,i._selectedSortUid=null,i._sortableSavedItems=null,i._userState=null,i.bookmarks=null,i.disabled=!1,i.editingEnabled=!1,i.goToOverride=null,i.iconClass=at,i.label=void 0,i.messages=null,i.messagesCommon=null,i.messagesUnits=null,i.view=null,i.viewModel=new c,i.visibleElements=o.__assign({},ut),i}return o.__extends(e,t),e.prototype.initialize=function(){var t=this;this.own([n.init(this,"viewModel.bookmarks",(function(){return t._bookmarksInitialized()})),n.init(this,"editingEnabled",(function(){return t._toggleSorting()}))])},e.prototype.destroy=function(){this._destroySortable(),this._handles.destroy(),this._handles=null,this._editMenu.destroy()},Object.defineProperty(e.prototype,"_editMenuItems",{get:function(){var t,e,o=this,r=this.messages,i=this._userState,s=null===(e=null===(t=null==i?void 0:i.editedBookmark)||void 0===t?void 0:t.thumbnail)||void 0===e?void 0:e.url;return[new h({label:null==r?void 0:r.menu.refreshThumbnail,iconClass:rt,clickFunction:function(){return o._refreshThumbnail()}}),new h({label:kt.test(s)?null==r?void 0:r.menu.editImageUrl:null==r?void 0:r.menu.useImageUrl,iconClass:it,clickFunction:function(){return o._startUseImageUrl()}}),s?new h({label:null==r?void 0:r.menu.removeThumbnail,iconClass:st,clickFunction:function(){return o._removeThumbnail()}}):null].filter(Boolean)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"_editMenu",{get:function(){var t=this._editMenuItems,e=this.messages,o=this._get("_editMenu");o&&o.destroy();var r=new p({iconClass:ot,label:null==e?void 0:e.menu.label});return r.items=t,r},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"bookmarkCreationOptions",{set:function(t){void 0!==t.captureExtent&&r.deprecatedProperty(mt,"bookmarkCreationOptions.captureExtent",{replacement:"bookmarkCreationOptions.captureViewpoint",version:"4.17"}),this._set("bookmarkCreationOptions",t)},enumerable:!1,configurable:!0}),e.prototype.castVisibleElements=function(t){return o.__assign(o.__assign({},ut),t)},e.prototype.endAddBookmark=function(){this._userState=null},e.prototype.goTo=function(t){return this.viewModel.goTo(t)},e.prototype.render=function(){var t,e="loading"===this.viewModel.state?this.renderLoading():this.renderBookmarks();return _.tsx("div",{class:this.classes(b,J,(t={},t[Q]=this.disabled,t))},e)},e.prototype.startAddBookmark=function(){this._userState=new m({state:"add"}),this._focusAddInputBox=!0,this.scheduleRender()},e.prototype.renderLoading=function(){return _.tsx("div",{class:v,key:"loader"},_.tsx("div",{class:f}))},e.prototype.renderNoBookmarksContainer=function(){var t=this.messages;return _.tsx("div",{class:N,key:"no-bookmarks"},_.tsx("span",{"aria-hidden":"true",class:this.classes(O,at)}),_.tsx("h1",{class:this.classes(nt,T)},null==t?void 0:t.noBookmarksHeading),_.tsx("p",{class:F},null==t?void 0:t.noBookmarksDescription))},e.prototype.renderAddBookmarkLoading=function(){var t;return _.tsx("div",{key:"adding-bookmark",class:H},_.tsx("span",{"aria-hidden":"true",class:this.classes(dt,lt)}),null===(t=this.messages)||void 0===t?void 0:t.addingBookmark)},e.prototype.renderBookmarkItems=function(t){var e=this;if(!t)return null;var o=this._userState,r=this.editingEnabled;return t.map((function(t){return r&&t&&o&&("edit"===o.state||"edit-thumbnail"===o.state)&&o.bookmark===t?"edit-thumbnail"===o.state?e.renderEditingBookmarkUrl(o.editedBookmark):e.renderEditingBookmark(o.editedBookmark):e.renderBookmark(t)})).toArray()},e.prototype.renderBookmarksContainer=function(t){var e,o,r=this._userState,i=this.editingEnabled,s="add"===(null==r?void 0:r.state),a=i&&!s?this.renderAddBookmarkButton():null,n=i?s&&r.loading?this.renderAddBookmarkLoading():"add"===(null==r?void 0:r.state)?this.renderAddingBookmark():null:null;return[_.tsx("ul",{key:"bookmark-list","aria-label":null===(o=this.messages)||void 0===o?void 0:o.widgetLabel,class:this.classes(g,(e={},e[B]=this.editingEnabled,e)),afterCreate:this._sortNodeCreated,afterRemoved:this._destroySortable,"data-node-ref":"_sortableNode",bind:this},this.renderBookmarkItems(t)),a,n]},e.prototype.renderAddBookmarkButton=function(){var t;return this.visibleElements.addBookmark?_.tsx("div",{key:"add-bookmark-item",class:R},_.tsx("button",{class:this.classes(X,Y,q),onclick:this.startAddBookmark,afterCreate:this._storeAddBookmarkButton,afterUpdate:this._storeAddBookmarkButton,"data-node-ref":"_addBookmarkButtonNode",bind:this,type:"button"},_.tsx("span",{"aria-hidden":"true",class:this.classes(D,tt)}),null===(t=this.messages)||void 0===t?void 0:t.addBookmark)):null},e.prototype.renderBookmarks=function(){var t=this.viewModel.bookmarks,e=t&&t.filter(Boolean),o=e&&e.length,r=o||this.editingEnabled?this.renderBookmarksContainer(e):null;return[o?null:this.renderNoBookmarksContainer(),r]},e.prototype.renderEditContainer=function(t){var e=this.messagesCommon;return _.tsx("div",{key:"edit-container"},_.tsx("button",{title:null==e?void 0:e.edit,"aria-label":null==e?void 0:e.edit,"data-bookmark":t,onclick:this._showEditBookmarkForm,bind:this,class:E,type:"button"},_.tsx("span",{"aria-hidden":"true",class:et})))},e.prototype.renderDragHandle=function(t){var e,r=this.messagesCommon,i=((e={})["data-bookmark-uid"]=t.uid,e);return _.tsx("div",o.__assign({role:"button",tabIndex:0,key:"drag-handle",bind:this,class:S,onkeydown:this._dragHandleKeydown,afterCreate:this._focusDragHandle,afterUpdate:this._focusDragHandle,onblur:this._dragHandleBlur,"aria-pressed":this._selectedSortUid===t.uid?"true":"false","aria-label":null==r?void 0:r.dragHandleLabel,title:null==r?void 0:r.dragHandleTitle},i),_.tsx("span",{"aria-hidden":"true",class:this.classes(w,$)}))},e.prototype.renderBookmarkImageIcon=function(){return _.tsx("span",{"aria-hidden":"true",class:this.classes(A,at)})},e.prototype.renderBookmarkImage=function(t){var e=this.visibleElements,o=t.thumbnail,r=o&&o.url||"";return e.thumbnail&&r?_.tsx("img",{src:r,alt:"",class:U}):null},e.prototype.renderBookmarkButton=function(t){var e=this.messagesCommon,o=t.name||(null==e?void 0:e.untitled),r=_.tsx("div",{class:I},this.renderBookmarkImage(t)||this.renderBookmarkImageIcon());return _.tsx("button",{key:"bookmark-button",class:x,bind:this,"data-bookmark":t,onclick:this._goToBookmark,type:"button"},r,_.tsx("span",{class:C},o))},e.prototype.renderBookmark=function(t){var e,r,i=this.viewModel.activeBookmark,s=((e={})[M]=i===t,e),a=this.editingEnabled?this.renderEditContainer(t):null,n=((r={})["data-bookmark-uid"]=t.uid,r),d=this.editingEnabled?this.renderDragHandle(t):null;return _.tsx("li",o.__assign({key:t,class:this.classes(y,s)},n),d,this.renderBookmarkButton(t),a)},e.prototype.renderEditingBookmarkName=function(t){var e=this.messages,o="name-required"===this._userState.validationState;return _.tsx("label",{class:j},null==e?void 0:e.title,o?_.tsx("strong",null,null==e?void 0:e.invalidTitle):null,_.tsx("input",{required:!0,bind:this,class:this.classes(Z,o?K:null),type:"text",value:t.name,afterCreate:this._storeEditInput,afterUpdate:this._focusEditInput,"data-bookmark":t,"data-node-ref":"_editInputNode",placeholder:null==e?void 0:e.titlePlaceholder}))},e.prototype.renderEditingBookmarkUrlActions=function(){var t=this.messagesCommon;return _.tsx("div",{class:z},_.tsx("input",{type:"button",value:null==t?void 0:t.back,class:this.classes(X,Y),onclick:this._closeUrlEditBookmarkForm,bind:this}),_.tsx("input",{class:X,type:"submit",value:null==t?void 0:t.add}))},e.prototype.renderEditingBookmarkActions=function(){var t=this.messagesCommon,e=this._userState.bookmark;return _.tsx("div",{class:z},_.tsx("input",{type:"button",value:null==t?void 0:t.delete,class:this.classes(X,Y,G),"data-bookmark":e,onclick:this._deleteBookmark,bind:this}),_.tsx("input",{type:"button",value:null==t?void 0:t.cancel,class:this.classes(X,Y),onclick:this._closeEditBookmarkForm,bind:this}),_.tsx("input",{class:X,type:"submit",value:null==t?void 0:t.save}))},e.prototype.renderEditingBookmarkUrlInput=function(t){var e,o=this.messages,r=this._userState,i=null===(e=t.thumbnail)||void 0===e?void 0:e.url,s=kt.test(i)?i:null,a="absolute-url-required"===r.validationState;return _.tsx("label",{class:j},a?_.tsx("strong",null,null==o?void 0:o.invalidImageUrl):null,_.tsx("input",{required:!0,bind:this,class:this.classes(Z,a?K:null),type:"text",value:s,afterCreate:this._storeUrlEditInput,afterUpdate:this._focusUrlEditInput,"data-bookmark":t,"data-node-ref":"_urlEditInputNode",title:null==o?void 0:o.imageUrlTooltip,placeholder:null==o?void 0:o.imageUrlPlaceholder}))},e.prototype.renderEditingBookmarkUrl=function(t){var e,r=((e={})["data-bookmark-uid"]=t.uid,e);return _.tsx("li",o.__assign({key:"edit-bookmark-url-form",class:L},r),_.tsx("form",{class:V,onsubmit:this._editBookmarkUrlSubmit,bind:this},this.renderEditingBookmarkUrlInput(t),this.renderEditingBookmarkUrlActions()))},e.prototype.renderEditingBookmark=function(t){var e,r=((e={})["data-bookmark-uid"]=t.uid,e);return _.tsx("li",o.__assign({key:"edit-bookmark-form",class:L},r),_.tsx("form",{class:V,onsubmit:this._editBookmarkSubmit,bind:this},_.tsx("div",{class:P},_.tsx("div",{class:I},this.renderBookmarkImage(t),this._editMenu.render()),this.renderEditingBookmarkName(t)),this.renderEditingBookmarkActions()))},e.prototype.renderAddingBookmarkName=function(){var t=this._userState,e=this.messages,o="name-required"===t.validationState;return _.tsx("label",{class:j},null==e?void 0:e.title,o?_.tsx("strong",null,null==e?void 0:e.invalidTitle):null,_.tsx("input",{required:!0,bind:this,class:this.classes(Z,o?K:null),type:"text",afterCreate:this._storeAddInput,afterUpdate:this._focusAddInput,"data-node-ref":"_addInputNode",value:"",placeholder:null==e?void 0:e.titlePlaceholder}))},e.prototype.renderAddingBookmarkActions=function(){var t=this.messagesCommon;return _.tsx("div",{class:this.classes(z)},_.tsx("input",{type:"button",value:null==t?void 0:t.cancel,class:this.classes(X,Y,W),onclick:this._endAddBookmark.bind(this),bind:this}),_.tsx("input",{class:X,type:"submit",value:null==t?void 0:t.add}))},e.prototype.renderAddingBookmark=function(){return _.tsx("div",{key:"add-bookmark-form",class:L},_.tsx("form",{class:V,onsubmit:this._addBookmarkSubmit,bind:this},this.renderAddingBookmarkName(),this.renderAddingBookmarkActions()))},e.prototype._dragHandleBlur=function(){this._selectedSortUid=null,this.scheduleRender()},e.prototype._dragHandleKeydown=function(t){t.stopPropagation();var e=this._sortableSavedItems,o=i.eventKey(t);if(-1!==["ArrowDown","ArrowUp","Escape","Tab"," ","Enter"].indexOf(o)){var r=this._sortable,s=this._selectedSortUid,a=r.toArray(),n=t.target.getAttribute("data-bookmark-uid"),d=a.indexOf(n);if(" "===o||"Enter"===o){var l=s&&s===n;return this._selectedSortUid=l?null:n,this._sortableSavedItems=l?null:this._sortable.toArray(),void this.scheduleRender()}if("Tab"===o)return this._selectedSortUid=null,void this.scheduleRender();if("Escape"===o&&e)return this._selectedSortUid=null,this._updateSortItems(e,r,n),void this.scheduleRender();if(-1!==d&&s){var u,k,m,c="ArrowUp"===o?d-1:d+1;if(!(c>=a.length||c<=-1))k=d,m=c,(u=a).splice(m,0,u.splice(k,1)[0]),this._updateSortItems(a,r,n)}}},e.prototype._updateSortItems=function(t,e,o){e.sort(t),this._sortBookmarks(e),this._focusSortUid=o,this._selectedSortUid=o},e.prototype._focusDragHandle=function(t){var e=this._focusSortUid;t&&e&&(t.getAttribute("data-bookmark-uid")===e&&(t.focus(),this._focusSortUid=null))},e.prototype._toggleSorting=function(){var t=this,e=this._sortable,o=this._sortableNode,r=this.editingEnabled;if(o)if(e)e.option("disabled",!r);else{var i=l.create(o,{dataIdAttr:"data-bookmark-uid",handle:"."+S,group:"bookmarks",disabled:!r,onSort:function(){return t._sortBookmarks(i)}});this._sortable=i}},e.prototype._sortNodeCreated=function(t){this._sortableNode=t,this._toggleSorting()},e.prototype._sortBookmarks=function(t){var e=this.viewModel.bookmarks;if(e){var o=t.toArray();e.sort((function(t,e){var r=o.indexOf(t.uid),i=o.indexOf(e.uid);return r>i?1:r<i?-1:0}))}},e.prototype._destroySortable=function(){var t=this._sortable;t&&t.destroy(),this._sortable=null},e.prototype._endAddBookmark=function(){this._focusAddBookmarkButton=!0,this.endAddBookmark()},e.prototype._bookmarksInitialized=function(){var t=this,e=this._handles;e.remove("bookmarks-init"),e.add(n.on(this,"viewModel.bookmarks","change",(function(){return t._bookmarksChanged()})),"bookmarks-init")},e.prototype._bookmarksChanged=function(){var t=this,e=this.viewModel.bookmarks,o=this._handles;o.remove("bookmarks-change");var r=e.map((function(e){return n.watch(e,["active","name","thumbnail.url"],(function(){return t.scheduleRender()}))}));o.add(r,"bookmarks-change"),this.scheduleRender()},e.prototype._showEditBookmarkForm=function(t){var e=t.currentTarget["data-bookmark"];this._focusEditInputBox=!0,this._userState=new m({bookmark:e,state:"edit"}),this.viewModel.goTo(e),this.scheduleRender()},e.prototype._closeUrlEditBookmarkForm=function(){this._focusEditInputBox=!0,this._userState.state="edit"},e.prototype._closeEditBookmarkForm=function(){this._userState=null},e.prototype._addBookmarkSubmit=function(t){var e=this;t.preventDefault();var o=this._addInputNode,r=this._userState,i=this.bookmarkCreationOptions,s=o&&o.value.trim();s?(r.loading=!0,this.viewModel.createBookmark(i).then((function(t){t.name=s,e.viewModel.bookmarks.add(t),e._endAddBookmark()}))):r.validationState="name-required"},e.prototype._editBookmarkAndClose=function(t,e){return o.__awaiter(this,void 0,void 0,(function(){return o.__generator(this,(function(o){switch(o.label){case 0:return[4,this.viewModel.editBookmark(t,e)];case 1:return o.sent(),this._closeEditBookmarkForm(),[2]}}))}))},e.prototype._editBookmarkSubmit=function(t){t.preventDefault();var e=this._editInputNode,o=this._userState,r=e&&e.value.trim();r?(o.bookmark.name=r,o.bookmark.thumbnail=o.editedBookmark.thumbnail,this._editBookmarkAndClose(o.bookmark,{takeScreenshot:!1})):o.validationState="name-required"},e.prototype._storeAddBookmarkButton=function(t){this._addBookmarkButtonNode=t,this._focusAddBookmark()},e.prototype._storeEditInput=function(t){this._editInputNode=t,this._focusEditInput()},e.prototype._storeAddInput=function(t){this._addInputNode=t,this._focusAddInput()},e.prototype._storeUrlEditInput=function(t){this._urlEditInputNode=t,this._focusUrlEditInput()},e.prototype._focusUrlEditInput=function(){this._urlEditInputNode&&this._focusUrlEditInputBox&&(this._focusUrlEditInputBox=!1,this._urlEditInputNode.focus())},e.prototype._focusAddInput=function(){this._addInputNode&&this._focusAddInputBox&&(this._focusAddInputBox=!1,this._addInputNode.focus())},e.prototype._focusAddBookmark=function(){this._addBookmarkButtonNode&&this._focusAddBookmarkButton&&(this._focusAddBookmarkButton=!1,this._addBookmarkButtonNode.focus())},e.prototype._focusEditInput=function(){this._editInputNode&&this._focusEditInputBox&&(this._focusEditInputBox=!1,this._editInputNode.focus())},e.prototype._deleteBookmark=function(t){var e=t.currentTarget["data-bookmark"];this.viewModel.bookmarks.remove(e)},e.prototype._goToBookmark=function(t){var e=t.currentTarget["data-bookmark"];this.endAddBookmark(),this._closeEditBookmarkForm(),this.viewModel.goTo(e)},e.prototype._refreshThumbnail=function(){return o.__awaiter(this,void 0,void 0,(function(){var t,e,r,i,s;return o.__generator(this,(function(a){switch(a.label){case 0:return e=(t=this)._userState,r=t._editMenu,i=t.viewModel,s=t.bookmarkCreationOptions,e.validationState=void 0,[4,i.editBookmark(this._userState.editedBookmark,o.__assign(o.__assign({},s),{takeScreenshot:!0,captureExtent:!1,captureViewpoint:!1,captureRotation:!1,captureScale:!1}))];case 1:return a.sent(),r.open=!1,this._focusEditInputBox=!0,this.scheduleRender(),[2]}}))}))},e.prototype._removeThumbnail=function(){var t=this._userState,e=this._editMenu;t.editedBookmark.thumbnail=null,t.validationState=void 0,e.open=!1,this._focusEditInputBox=!0,this.scheduleRender()},e.prototype._startUseImageUrl=function(){this._userState.state="edit-thumbnail",this._editMenu.open=!1,this._focusUrlEditInputBox=!0,this.scheduleRender()},e.prototype._editBookmarkUrlSubmit=function(t){t.preventDefault();var e=this._urlEditInputNode,o=this._userState,r=e.value;kt.test(r)?(r&&(o.editedBookmark.thumbnail=new u.default({url:r})),this._closeUrlEditBookmarkForm()):o.validationState="absolute-url-required"},o.__decorate([d.property({type:m}),_.renderable(["state","editedBookmark","loading","validationState"])],e.prototype,"_userState",void 0),o.__decorate([d.property({readOnly:!0,dependsOn:["messages","_userState.editedBookmark.thumbnail.url"]})],e.prototype,"_editMenuItems",null),o.__decorate([d.property({readOnly:!0,dependsOn:["messages","_editMenuItems"]})],e.prototype,"_editMenu",null),o.__decorate([d.property({value:null})],e.prototype,"bookmarkCreationOptions",null),o.__decorate([d.aliasOf("viewModel.bookmarks")],e.prototype,"bookmarks",void 0),o.__decorate([_.renderable(),d.property()],e.prototype,"disabled",void 0),o.__decorate([_.renderable(),d.property()],e.prototype,"editingEnabled",void 0),o.__decorate([d.aliasOf("viewModel.goToOverride")],e.prototype,"goToOverride",void 0),o.__decorate([d.property()],e.prototype,"iconClass",void 0),o.__decorate([d.property({aliasOf:{source:"messages.widgetLabel",overridable:!0}})],e.prototype,"label",void 0),o.__decorate([d.property(),_.renderable(),_.messageBundle("esri/widgets/Bookmarks/t9n/Bookmarks")],e.prototype,"messages",void 0),o.__decorate([d.property(),_.renderable(),_.messageBundle("esri/t9n/common")],e.prototype,"messagesCommon",void 0),o.__decorate([d.property(),_.renderable(),_.messageBundle("esri/core/t9n/Units")],e.prototype,"messagesUnits",void 0),o.__decorate([d.aliasOf("viewModel.view")],e.prototype,"view",void 0),o.__decorate([d.property({type:c}),_.renderable(["activeBookmark","state","bookmarks"]),_.vmEvent(["select-bookmark","bookmark-edit","bookmark-select"])],e.prototype,"viewModel",void 0),o.__decorate([d.property(),_.renderable()],e.prototype,"visibleElements",void 0),o.__decorate([d.cast("visibleElements")],e.prototype,"castVisibleElements",null),o.__decorate([d.property()],e.prototype,"endAddBookmark",null),o.__decorate([d.property()],e.prototype,"startAddBookmark",null),e=o.__decorate([d.subclass("esri.widgets.Bookmarks")],e)}(k)}));