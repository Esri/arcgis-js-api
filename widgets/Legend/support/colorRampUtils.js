/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.20/esri/copyright.txt for details.
*/
define(["require","exports","../../../chunks/_rollupPluginBabelHelpers","../../../Color","./utils"],(function(e,l,n,o,t){"use strict";const r=new o([64,64,64]);function u(e,l){const n=[],o=e.length-1;return 5===e.length?n.push(0,2,4):n.push(0,o),e.map(((e,r)=>n.indexOf(r)>-1?t.createStopLabel(e,r,o,l):null))}function a(e,l,n){return s.apply(this,arguments)}function s(){return(s=n._asyncToGenerator((function*(l,o,t){let r=!1,a=[],s=[];if(l.stops){const e=l.stops;a=e.map((e=>e.value)),r=e.some((e=>!!e.label)),r&&(s=e.map((e=>e.label)))}const c=a[0],p=a[a.length-1];if(null==c&&null==p)return null;const f=r?null:u(a,t);return(yield Promise.all(a.map(function(){var t=n._asyncToGenerator((function*(n,t){return{value:n,color:"opacity"===l.type?yield i(n,l,o):(yield new Promise((function(l,n){e(["../../../renderers/visualVariables/support/visualVariableUtils"],l,n)}))).getColor(l,n),label:r?s[t]:f[t]}}));return function(e,l){return t.apply(this,arguments)}}()))).reverse()}))).apply(this,arguments)}function i(e,l){return c.apply(this,arguments)}function c(){return(c=n._asyncToGenerator((function*(l,n,t=r){const u=new o(t),a=(yield new Promise((function(l,n){e(["../../../renderers/visualVariables/support/visualVariableUtils"],l,n)}))).getOpacity(n,l);return null!=a&&(u.a=a),u}))).apply(this,arguments)}function p(e){let l=!1,n=[],o=[];n=e.map((e=>e.value)),l=e.some((e=>!!e.label)),l&&(o=e.map((e=>e.label)));const t=n[0],r=n[n.length-1];if(null==t&&null==r)return null;const a=l?null:u(n,!1);return n.map(((n,t)=>({value:n,color:f(n,e),label:l?o[t]:a[t]}))).reverse()}function f(e,l){const{startIndex:n,endIndex:t,weight:r}=m(e,l);if(n===t)return l[n].color;const u=o.blendColors(l[n].color,l[t].color,r);return new o(u)}function m(e,l){let n=0,o=l.length-1;return l.some(((l,t)=>e<l.value?(o=t,!0):(n=t,!1))),{startIndex:n,endIndex:o,weight:(e-l[n].value)/(l[o].value-l[n].value)}}function h(e,l){let n=[];if(e&&"multipart"===e.type)e.colorRamps.reverse().forEach((function(t,r){0===r?n.push({value:l.max,color:new o(t.toColor),label:"high"}):n.push({value:null,color:new o(t.toColor),label:""}),r===e.colorRamps.length-1?n.push({value:l.min,color:new o(t.fromColor),label:"low"}):n.push({value:null,color:new o(t.fromColor),label:""})}));else{let t,r;e&&"algorithmic"===e.type?(t=e.fromColor,r=e.toColor):(t=[0,0,0,1],r=[255,255,255,1]),n=[{value:l.max,color:new o(r),label:"high"},{value:l.min,color:new o(t),label:"low"}]}return n}l.getColorFromPointCloudStops=f,l.getRampStops=a,l.getRampStopsForPointCloud=p,l.getStrectchRampStops=h,Object.defineProperty(l,"__esModule",{value:!0})}));
