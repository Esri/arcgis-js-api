/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.18/esri/copyright.txt for details.
*/
define(["exports","../../../../core/screenUtils","../../../support/widgetUtils","../../../../libs/maquette/projection","../../../../libs/maquette/projector","../../../../chunks/index","../../../../symbols/support/symbolUtils","../../../../symbols/support/svgUtils"],(function(e,r,t,s,i,l,a,o){"use strict";const n=i.createProjector(),c="http://www.w3.org/2000/svg",p="esri-relationship-ramp--diamond__container",m="esri-relationship-ramp--diamond__left-column",d="esri-relationship-ramp--diamond__right-column",u="esri-relationship-ramp--diamond__middle-column",h="esri-relationship-ramp--diamond__middle-column--label",f="esri-relationship-ramp--diamond__middle-column--ramp",v="esri-relationship-ramp--square__table",x="esri-relationship-ramp--square__table-row",b="esri-relationship-ramp--square__table-cell",g="esri-relationship-ramp--square__table-label",k="esri-relationship-ramp--square__table-label--left-bottom",w="esri-relationship-ramp--square__table-label--right-bottom",_="esri-relationship-ramp--square__table-label--left-top",j="esri-relationship-ramp--square__table-label--right-top",y="esri-univariate-above-and-below-ramp__symbol",z="esri-legend__color-ramp";function S(e,r,t){const s=`${t}_arrowStart`,i=`${t}_arrowEnd`,l="left"===e,a={markerStart:null,markerEnd:null};switch(r){case"HL":l?a.markerStart=`url(#${i})`:a.markerEnd=`url(#${s})`;break;case"LL":a.markerStart=`url(#${i})`;break;case"LH":l?a.markerEnd=`url(#${s})`:a.markerStart=`url(#${i})`;break;default:a.markerEnd=`url(#${s})`}return a}function E(e="vertical"){const r="stroke:rgb(200, 200, 200);stroke-width:1";return"vertical"===e?l.jsx("svg",{height:"4",width:"10"},l.jsx("line",{x1:"0",y1:"2",x2:"10",y2:"2",style:r})):l.jsx("svg",{height:"10",width:"10"},l.jsx("line",{x1:"5",y1:"0",x2:"5",y2:"10",style:r}))}function A(e,r="vertical"){const t=document.createElement("div");return t.style.height="20px",t.className=y,null!=e&&(t.style.opacity=e.toString()),n.append(t,E.bind(null,r)),t}function $(e,t,s="vertical"){let i=0;const l=e.infos,a="full"===t||"below"===t?4:2;for(let e="full"===t||"above"===t?0:2;e<=a;e++)if(2===e)i+="horizontal"===s?10:20;else{i+=r.pt2px(l[e].size)+("horizontal"===s?20:10)}return i}e.getUnivariateAboveAndBelowColorRampMargin=function(e,t="classic"){const s=e.infos;return"classic"===t?(r.pt2px(s[0].size)+10)/2:(s[0].size-s[s.length-1].size)/2},e.getUnivariateAboveAndBelowColorRampPreview=function(e,r){if(!e)return null;const t=e.infos.map((e=>e.color)),s=a.renderColorRampPreviewHTML("full"===r.type?t:"above"===r.type?t.slice(0,3):t.slice(2,5),{width:r.width,height:r.height,align:r.rampAlignment});return s.className=z,null!=r.opacity&&(s.style.opacity=r.opacity.toString()),s},e.getUnivariateAboveAndBelowColorRampSize=function(e,t,s="vertical"){const i=$(e,t,s),l=e.infos,a="full"===t||"above"===t?0:2,o="full"===t||"below"===t?4:2,n="full"===t?l[a].size+l[o].size:"above"===t?l[a].size:l[o].size;return i-(r.pt2px(n/2)+15)},e.getUnivariateAboveAndBelowRampElements=function(e,t,s="vertical"){const i=e.infos;let l=i.filter((({type:e})=>"size-ramp"===e))[0],a=i.filter((({type:e})=>"color-ramp"===e))[0];var o;return l&&(l={...l},l.infos=[...l.infos]),a&&(a={...a},a.infos=[...a.infos]),function(e,t,s="vertical"){e.infos.forEach(((e,i)=>{if(2===i)e.preview=A(t,s);else{const t=r.pt2px(e.size)+("horizontal"===s?20:10),i="div"===e.preview.tagName.toLowerCase(),l=i?e.preview:document.createElement("div");l.className=y,"horizontal"===s?l.style.width=`${t}px`:l.style.height=`${t}px`,i||l.appendChild(e.preview),e.preview=l}}))}(l,t,s),"horizontal"===s&&(l.infos.reverse(),null==(o=a)||o.infos.reverse()),{sizeRampElement:l,colorRampElement:a}},e.getUnivariateAboveAndBelowSizeRampSize=$,e.renderRelationshipRamp=function(e,r,s){const{focus:i,labels:a}=e,n=!!i,y=function(e,r,t,s=60){const{focus:i,numClasses:a,colors:n,rotation:p}=e,m=!!i,d=Math.sqrt(Math.pow(s,2)+Math.pow(s,2))+(m?0:5);let u=null;null!=t&&(u=`opacity: ${t}`);const h=[],v=[],x=[],g=(s||75)/a;for(let e=0;e<a;e++){const r=e*g;for(let t=0;t<a;t++){const s=t*g,i=o.generateFillAttributes(n[e][t]),l=o.generateStrokeAttributes(null),a={type:"rect",x:s,y:r,width:g,height:g};h.push(o.renderDef(i)),v.push(o.renderShape(a,i.fill,l,null)),x.push(o.getBoundingBox(a))}}const k=10,w=15,_=15,j=10;let y=null;m||(y="margin: -15px -15px -18px -15px");const z=S("left",i,r),E=S("right",i,r),A=o.computeBBox(x),$=o.getTransformMatrix(A,d,d,0,!1,p),q=o.getTransformMatrix(A,d,d,0,!1,m?-45:null);return l.jsx("div",{style:u,class:m?f:b},l.jsx("svg",{xmlns:c,width:d,height:d,style:y},l.jsx("defs",null,l.jsx("marker",{id:`${r}_arrowStart`,markerWidth:"10",markerHeight:"10",refX:"5",refY:"5",markerUnits:"strokeWidth",orient:"auto"},l.jsx("polyline",{points:"0,0 5,5 0,10",fill:"none",stroke:"#555555","stroke-width":"1"})),l.jsx("marker",{id:`${r}_arrowEnd`,markerWidth:"10",markerHeight:"10",refX:"0",refY:"5",markerUnits:"strokeWidth",orient:"auto"},l.jsx("polyline",{points:"5,0 0,5 5,10",fill:"none",stroke:"#555555","stroke-width":"1"})),h),l.jsx("g",{transform:$},v),l.jsx("g",{transform:q},l.jsx("line",{fill:"none",stroke:"#555555","stroke-width":"1","marker-start":z.markerStart,"marker-end":z.markerEnd,x1:-k,y1:s-w,x2:-k,y2:w}),l.jsx("line",{fill:"none",stroke:"#555555","stroke-width":"1","marker-start":E.markerStart,"marker-end":E.markerEnd,x1:_,y1:s+j,x2:s-_,y2:s+j}))))}(e,r,s);return n?l.jsx("div",{class:p},l.jsx("div",{class:m},a.left),l.jsx("div",{class:u},l.jsx("div",{class:h},a.top),y,l.jsx("div",{class:h},a.bottom)),l.jsx("div",{class:d},a.right)):l.jsx("div",{class:v},l.jsx("div",{class:x},l.jsx("div",{class:t.classes(b,g,w)},a.left),l.jsx("div",{class:b}),l.jsx("div",{class:t.classes(b,g,k)},a.top)),l.jsx("div",{class:x},l.jsx("div",{class:b}),y,l.jsx("div",{class:b})),l.jsx("div",{class:x},l.jsx("div",{class:t.classes(b,g,j)},a.bottom),l.jsx("div",{class:b}),l.jsx("div",{class:t.classes(b,g,_)},a.right)))},Object.defineProperty(e,"__esModule",{value:!0})}));
