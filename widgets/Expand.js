/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.19/esri/copyright.txt for details.
*/
define(["../chunks/_rollupPluginBabelHelpers","../chunks/tslib.es6","../core/has","../core/Logger","../core/accessorSupport/ensureType","../core/accessorSupport/decorators/property","../core/accessorSupport/decorators/aliasOf","../core/accessorSupport/decorators/subclass","../core/urlUtils","../core/uuid","../portal/support/resourceExtension","./support/decorators/accessibleHandler","./support/decorators/messageBundle","../chunks/index","./support/widget","./Widget","./Expand/ExpandViewModel"],(function(e,n,o,t,r,s,a,d,i,c,p,l,u,x,_,h,g){"use strict";const y={base:"esri-expand esri-widget",modeAuto:"esri-expand--auto",modeDrawer:"esri-expand--drawer",modeFloating:"esri-expand--floating",container:"esri-expand__container",containerExpanded:"esri-expand__container--expanded",panel:"esri-expand__panel",button:"esri-widget--button",text:"esri-icon-font-fallback-text",icon:"esri-collapse__icon",iconExpanded:"esri-expand__icon--expanded",iconNumber:"esri-expand__icon-number",iconNumberExpanded:"esri-expand__icon-number--expanded",expandIcon:"esri-icon-expand",collapseIcon:"esri-icon-collapse",content:"esri-expand__content",contentExpanded:"esri-expand__content--expanded",expandMask:"esri-expand__mask",expandMaskExpanded:"esri-expand__mask--expanded"};let m=function(n){function o(o,t){var r;return(r=n.call(this,o,t)||this).autoCollapse=null,r.closeOnEsc=!0,r.collapseTooltip="",r.content="",r.expanded=null,r.expandTooltip="",r.group=null,r.iconNumber=0,r.label=void 0,r.messages=null,r.messagesCommon=null,r.mode="auto",r.view=null,r.viewModel=new g,r._handleKeyDown=n=>{const{closeOnEsc:o,_toggleButtonEl:t,expanded:s}=e._assertThisInitialized(r);if(!s||!o||n.target===t||"Escape"!==n.key)return;("function"==typeof o?o(n):o)&&(r.expanded=!1,null==t||t.focus())},r}e._inheritsLoose(o,n);var t=o.prototype;return t.expand=function(){this.viewModel.expanded=!0},t.collapse=function(){this.viewModel.expanded=!1},t.toggle=function(){this.viewModel.expanded=!this.viewModel.expanded},t.render=function(){const{mode:e}=this,n={[y.modeAuto]:"auto"===e,[y.modeDrawer]:"drawer"===e,[y.modeFloating]:"floating"===e};return x.jsx("div",{class:this.classes(y.base,n),onkeydown:this._handleKeyDown},this.renderMask(),this.renderContainer())},t.renderContainer=function(){const{expanded:e}=this,n={[y.containerExpanded]:e};return x.jsx("div",{class:this.classes(y.container,n)},this.renderPanel(),this.renderContent())},t.renderMask=function(){const{expanded:e}=this,n={[y.expandMaskExpanded]:e};return x.jsx("div",{bind:this,onclick:this._toggle,class:this.classes(y.expandMask,n)})},t.renderBadgeNumber=function(){const{expanded:e,iconNumber:n}=this;return n&&!e?x.jsx("span",{key:"expand__icon-number",class:y.iconNumber},n):null},t.renderPanelNumber=function(){const{iconNumber:e,expanded:n}=this;return e&&n?x.jsx("span",{key:"expand__expand-icon-number",class:this.classes(y.iconNumber,y.iconNumberExpanded)},e):null},t.renderIcon=function(){const{collapseIconClass:e,expandIconClass:n,expanded:o}=this,t={[y.iconExpanded]:o,[e]:o,[n]:!o};return e===n&&(t[e]=!0),x.jsx("span",{"aria-hidden":"true",class:this.classes(y.icon,t)})},t.renderTitle=function(){return x.jsx("span",{class:y.text},this.expandTitle)},t.renderExpandButton=function(){const{expanded:e,expandTitle:n,contentId:o}=this;return x.jsx("div",{afterCreate:this._storeToggleButtonEl,"aria-controls":o,"aria-expanded":e?"true":"false",bind:this,class:y.button,onclick:this._toggle,onkeydown:this._toggle,role:"button",tabindex:"0",title:n},this.renderBadgeNumber(),this.renderIcon(),this.renderTitle())},t.renderPanel=function(){return x.jsx("div",{class:y.panel},this.renderExpandButton(),this.renderPanelNumber())},t.renderContent=function(){const{expanded:e,contentId:n}=this,o={[y.contentExpanded]:e};return x.jsx("div",{id:n,role:"region",class:this.classes(y.content,o)},this.renderContentContainer())},t.renderContentContainer=function(){const e=this.content;return"string"==typeof e?x.jsx("div",{innerHTML:e}):_.isWidget(e)?e.render():e instanceof HTMLElement?x.jsx("div",{bind:e,afterCreate:this._attachToNode}):_.hasDomNode(e)?x.jsx("div",{bind:e.domNode,afterCreate:this._attachToNode}):null},t._toggle=function(){this.toggle()},t._attachToNode=function(e){const n=this;e.appendChild(n)},t._storeToggleButtonEl=function(e){this._toggleButtonEl=e},e._createClass(o,[{key:"contentId",get:function(){return`${this.id}_controls_content`}},{key:"expandTitle",get:function(){const{expanded:e,messagesCommon:n,collapseTooltip:o,expandTooltip:t}=this;return e?o||n.collapse:t||n.expand}},{key:"collapseIconClass",get:function(){return y.collapseIcon},set:function(e){e?this._override("collapseIconClass",e):this._clearOverride("collapseIconClass")}},{key:"expandIconClass",get:function(){return _.isWidget(this.content)?this.content.iconClass:y.expandIcon},set:function(e){e?this._override("expandIconClass",e):this._clearOverride("expandIconClass")}}]),o}(h);return n.__decorate([s.property({readOnly:!0})],m.prototype,"contentId",null),n.__decorate([s.property({readOnly:!0})],m.prototype,"expandTitle",null),n.__decorate([a.aliasOf("viewModel.autoCollapse")],m.prototype,"autoCollapse",void 0),n.__decorate([s.property()],m.prototype,"closeOnEsc",void 0),n.__decorate([s.property()],m.prototype,"collapseIconClass",null),n.__decorate([s.property()],m.prototype,"collapseTooltip",void 0),n.__decorate([s.property()],m.prototype,"content",void 0),n.__decorate([a.aliasOf("viewModel.expanded")],m.prototype,"expanded",void 0),n.__decorate([s.property()],m.prototype,"expandIconClass",null),n.__decorate([s.property()],m.prototype,"expandTooltip",void 0),n.__decorate([a.aliasOf("viewModel.group")],m.prototype,"group",void 0),n.__decorate([s.property()],m.prototype,"iconNumber",void 0),n.__decorate([s.property({aliasOf:{source:"messages.widgetLabel",overridable:!0}})],m.prototype,"label",void 0),n.__decorate([s.property(),u.messageBundle("esri/widgets/Expand/t9n/Expand")],m.prototype,"messages",void 0),n.__decorate([s.property(),u.messageBundle("esri/t9n/common")],m.prototype,"messagesCommon",void 0),n.__decorate([s.property()],m.prototype,"mode",void 0),n.__decorate([a.aliasOf("viewModel.view")],m.prototype,"view",void 0),n.__decorate([s.property({type:g})],m.prototype,"viewModel",void 0),n.__decorate([l.accessibleHandler()],m.prototype,"_toggle",null),m=n.__decorate([d.subclass("esri.widgets.Expand")],m),m}));
