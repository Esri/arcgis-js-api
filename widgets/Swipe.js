/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.19/esri/copyright.txt for details.
*/
define(["../chunks/_rollupPluginBabelHelpers","../chunks/tslib.es6","../core/has","../core/Logger","../core/accessorSupport/ensureType","../core/accessorSupport/decorators/property","../core/accessorSupport/decorators/aliasOf","../core/accessorSupport/decorators/subclass","../core/urlUtils","../core/uuid","../portal/support/resourceExtension","../core/events","./support/widgetUtils","./support/decorators/messageBundle","../chunks/index","./Widget","./Swipe/SwipeViewModel"],(function(e,i,t,n,r,o,s,a,l,d,c,p,u,v,h,_,w){"use strict";const f={base:"esri-swipe",baseDisabled:"esri-swipe--disabled",vertical:"esri-swipe--vertical",horizontal:"esri-swipe--horizontal",container:"esri-swipe__container",divider:"esri-swipe__divider",handle:"esri-swipe__handle",handleHidden:"esri-swipe__handle--hidden",widgetIcon:"esri-icon-up-down-arrows",handleIcon:"esri-swipe__handle-icon",dragIconHorizontal:"esri-icon-drag-horizontal",dragIconVertical:"esri-icon-drag-vertical",widget:"esri-widget",disabled:"esri-disabled"},g={handle:!0,divider:!0};let y=function(i){function t(t,n){var r;return(r=i.call(this,t,n)||this).direction=null,r.disabled=!1,r.dragLabel=void 0,r.iconClass=f.widgetIcon,r.label=void 0,r.leadingLayers=null,r.messages=null,r.position=null,r.trailingLayers=null,r.view=null,r.viewModel=new w,r._pointerOffset=null,r._container=null,r._onContainerPointerDown=r._onContainerPointerDown.bind(e._assertThisInitialized(r)),r._onContainerPointerMove=r._onContainerPointerMove.bind(e._assertThisInitialized(r)),r._onContainerPointerUp=r._onContainerPointerUp.bind(e._assertThisInitialized(r)),r}e._inheritsLoose(t,i);var n=t.prototype;return n.render=function(){const{state:e,direction:i}=this.viewModel,t="disabled"===e||this.disabled,n={[f.disabled]:t,[f.baseDisabled]:t,[f.vertical]:"vertical"===i,[f.horizontal]:"horizontal"===i};return h.jsx("div",{class:this.classes(f.base,f.widget,n)},"disabled"===e?null:this.renderContainer())},n.renderHandle=function(){const{direction:e}=this.viewModel,{visibleElements:i}=this,t={[f.dragIconHorizontal]:"vertical"===e,[f.dragIconVertical]:"horizontal"===e},n=this.classes(f.handle,!i.handle&&f.handleHidden);return h.jsx("div",{key:"handle",role:"presentation",class:n},h.jsx("span",{"aria-hidden":"true",class:this.classes(f.handleIcon,t)}))},n.renderDivider=function(){const{visibleElements:e}=this;return e&&e.divider?h.jsx("div",{key:"divider",role:"presentation",class:f.divider}):null},n.renderContent=function(){return[this.renderDivider(),this.renderHandle()]},n.renderContainer=function(){const{disabled:e,dragLabel:i,viewModel:t}=this,{max:n,min:r,direction:o,position:s}=t,a=`${s}%`,l={top:"vertical"===o?a:null,left:"vertical"===o?null:a},d=this.renderContent();return e?h.jsx("div",{key:"container",role:"presentation",styles:l,class:f.container},d):h.jsx("div",{tabIndex:0,key:"container",bind:this,afterCreate:this._afterContainerCreate,onkeydown:this._onContainerKeyDown,"touch-action":"none",role:"slider",title:i,"aria-label":i,"aria-orientation":o,"aria-valuemax":`${n}`,"aria-valuemin":`${r}`,"aria-valuenow":`${s}`,"aria-valuetext":a,styles:l,class:f.container},d)},n._afterContainerCreate=function(e){this._container=e,e.addEventListener("pointerdown",this._onContainerPointerDown)},n._calculatePointerOffset=function(e){const{direction:i}=this,t=e.target,n=("vertical"===i?t.clientHeight:t.clientWidth)/2,r=t.getBoundingClientRect(),o=e.clientX-r.left,s=e.clientY-r.top;this._pointerOffset="vertical"===i?s-n:o-n},n._onContainerPointerDown=function(e){e.preventDefault(),this._container&&document.activeElement!==this.container&&this._container.focus(),this._calculatePointerOffset(e),document.addEventListener("pointerup",this._onContainerPointerUp),document.addEventListener("pointermove",this._onContainerPointerMove)},n._onContainerPointerUp=function(e){e.preventDefault(),document.removeEventListener("pointerup",this._onContainerPointerUp),document.removeEventListener("pointermove",this._onContainerPointerMove)},n._onContainerPointerMove=function(e){e.preventDefault();const{_pointerOffset:i,container:t,direction:n}=this,{clientX:r,clientY:o}=e,{top:s,left:a,width:l,height:d}=t.getBoundingClientRect(),c=("vertical"===n?o-s-i:r-a-i)/("vertical"===n?d:l)*100;this.position=c},n._getKeyPosition=function(e){const i=p.eventKey(e),{position:t}=this,{max:n,min:r,step:o,stepMultiplier:s,direction:a}=this.viewModel,l=o*s;["ArrowUp","ArrowDown","ArrowLeft","ArrowRight","Home","End","PageUp","PageDown"].indexOf(i)>-1&&(e.preventDefault(),e.stopPropagation());if("vertical"===a?"ArrowDown"===i||"ArrowRight"===i:"ArrowUp"===i||"ArrowRight"===i){return t+(e.shiftKey?l:o)}if("vertical"===a?"ArrowUp"===i||"ArrowLeft"===i:"ArrowDown"===i||"ArrowLeft"===i){return t-(e.shiftKey?l:o)}if("Home"===i)return r;if("End"===i)return n;if("vertical"===a?"PageDown"===i:"PageUp"===i)return t+l;return("vertical"===a?"PageUp"===i:"PageDown"===i)?t-l:null},n._onContainerKeyDown=function(e){const i=this._getKeyPosition(e);"number"==typeof i&&(this.position=i)},e._createClass(t,[{key:"visibleElements",get:function(){return this._get("visibleElements")||g},set:function(e){this._set("visibleElements",{...g,...e})}}]),t}(_);return i.__decorate([s.aliasOf("viewModel.direction")],y.prototype,"direction",void 0),i.__decorate([o.property()],y.prototype,"disabled",void 0),i.__decorate([o.property({aliasOf:{source:"messages.dragLabel",overridable:!0}})],y.prototype,"dragLabel",void 0),i.__decorate([o.property()],y.prototype,"iconClass",void 0),i.__decorate([o.property({aliasOf:{source:"messages.widgetLabel",overridable:!0}})],y.prototype,"label",void 0),i.__decorate([s.aliasOf("viewModel.leadingLayers")],y.prototype,"leadingLayers",void 0),i.__decorate([o.property(),v.messageBundle("esri/widgets/Swipe/t9n/Swipe")],y.prototype,"messages",void 0),i.__decorate([s.aliasOf("viewModel.position")],y.prototype,"position",void 0),i.__decorate([s.aliasOf("viewModel.trailingLayers")],y.prototype,"trailingLayers",void 0),i.__decorate([s.aliasOf("viewModel.view")],y.prototype,"view",void 0),i.__decorate([o.property({type:w})],y.prototype,"viewModel",void 0),i.__decorate([o.property()],y.prototype,"visibleElements",null),y=i.__decorate([a.subclass("esri.widgets.Swipe")],y),y}));
