/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.19/esri/copyright.txt for details.
*/
define(["exports","../../../core/maybe","../../../intl/date","../../../Color","../../../renderers/visualVariables/SizeVariable","../../../renderers/support/numberUtils","../../../renderers/support/utils"],(function(t,e,n,o,i,r,a){"use strict";function s(t){return n.formatDate(new Date(t),a.timelineDateFormatOptions)}function u(t){return r.format(t)}function l(t,n,o){if(!e.isSome(n)||!e.isSome(t))return[];const i=[];for(let e=-1*o;e<=o;e++)0!==e&&i.push(n+e*t);return i}function h(t){const{max:e,min:n,padding:o,pathHeight:i,pathWidth:r,stops:a}=t,s=e-n;let u,l=`M0 0 L${r} 0 `;const h=3===a.length?[a[0],a[1],a[2]]:[a[0],a[2],a[4]],m=Math.min.apply(Math,h.map((t=>t.size))),p=Math.max(Math.abs(h[0].size-h[1].size),Math.abs(h[2].size-h[1].size));return h.reverse(),h.forEach((({size:t,value:e},a)=>{const h=Math.round((t-m)/p*100)/100,c=Math.round(i-(e-n)/s*i);u=h*r,0===u&&(u=o*r),0===a&&(l+=`L${u} 0 `),l+=`L${u} ${c} `})),l+=`L${u} ${i} L0 ${i} L0 0 Z`,l}function m(t){const{bottomValue:e,bottomWidth:n,max:o,min:i,pathHeight:r,pathWidth:a,topValue:s,topWidth:u}=t,l=u*a,h=n*a,m=o-i,p=Math.round(r-(e-i)/m*r);return`M${l} 0 L${l} ${Math.round(r-(s-i)/m*r)} L${h} ${p} L${h} ${r} L0 ${r} L0 0 Z`}function p(t){let e=t.maxSize,n=t.minSize;return e instanceof i&&(e=e.stops[0].size),n instanceof i&&(n=n.stops[0].size),[e,n]}function c(t,e,n){const o=n.length-1,i=n[0],r=n[o]-i,a=e-t,s=[];for(let u=1;u<o;u++){const e=(n[u]-i)/r*a+t;s.push({index:u,value:e})}return s.unshift({index:0,value:t}),s.push({index:o,value:e}),s}function f(t){return t instanceof o?t.toCss(!0):o.fromString(t).toCss(!0)}t.formatDateLabel=s,t.formatNumberLabel=u,t.getDeviationValues=l,t.getDynamicPathForSizeStops=h,t.getFillFromColor=f,t.getPathForSizeStops=m,t.getSizesFromVariable=p,t.getStopChanges=c,Object.defineProperty(t,"__esModule",{value:!0})}));
