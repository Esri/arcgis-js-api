/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.26/esri/copyright.txt for details.
*/
define(["../../chunks/_rollupPluginBabelHelpers","../../chunks/tslib.es6","../../core/accessorSupport/decorators/property","../../core/accessorSupport/ensureType","../../core/arrayUtils","../../core/accessorSupport/decorators/subclass","./SmartMappingSliderBase","./ColorSlider/ColorSliderViewModel","../support/widgetUtils","../support/decorators/messageBundle","../support/jsxFactory"],(function(e,r,t,i,s,a,n,l,o,d,p){"use strict";var c;const u="esri-color-slider",m={base:u,rampElement:`${u}__ramp`,sliderContainer:`${u}__slider-container`,histogramContainer:`${u}__histogram-container`,primaryHandle:`${u}--primary-handle`,track:`${u}--interactive-track`,esriWidget:"esri-widget",esriWidgetPanel:"esri-widget--panel",widgetIcon:"esri-icon-edit",disabled:"esri-disabled"};let g=c=function(r){function t(e,t){var i;return(i=r.call(this,e,t)||this)._bgFillId=null,i._rampFillId=null,i.messages=null,i.viewModel=new l,i._bgFillId=`${i.id}-bg-fill`,i._rampFillId=`${i.id}-linear-gradient`,i}e._inheritsLoose(t,r),t.fromRendererResult=function(e,r){const{visualVariable:{stops:t},statistics:i}=e,{avg:s,stddev:a}=i,n=e.renderer.authoringInfo.visualVariables.find((e=>"color"===e.type)),l=n.minSliderValue,o=n.maxSliderValue;return new c({max:o,min:l,stops:t,histogramConfig:{average:s,standardDeviation:a,bins:r?r.bins:[]},primaryHandleEnabled:"high-to-low"!==n.theme})};var i=t.prototype;return i.updateFromRendererResult=function(e,r){const{visualVariable:{stops:t},statistics:i}=e,{avg:s,stddev:a}=i,n=e.renderer.authoringInfo.visualVariables.find((e=>"color"===e.type)),l=n.minSliderValue,o=n.maxSliderValue;this.set({max:o,min:l,stops:t,histogramConfig:{average:s,standardDeviation:a,bins:r?r.bins:[]},primaryHandleEnabled:"high-to-low"!==n.theme})},i.render=function(){const{label:e,primaryHandleEnabled:r,state:t,visibleElements:i}=this,s="disabled"===t,a=this.classes(m.base,m.esriWidget,m.esriWidgetPanel,{[m.disabled]:s,[m.primaryHandle]:r,[m.track]:i.interactiveTrack});return p.tsx("div",{"aria-label":e,class:a},s?null:this.renderContent(this.renderRamp(),m.sliderContainer,m.histogramContainer))},i.renderRamp=function(){const{_bgFillId:e,_rampFillId:r,viewModel:t,zoomOptions:i}=this,s=t.getStopInfo();return p.tsx("div",{class:m.rampElement},p.tsx("svg",{xmlns:"http://www.w3.org/2000/svg"},p.tsx("defs",null,this.renderRampFillDefinition(r,s),this.renderBackgroundFillDefinition(e)),p.tsx("rect",{x:"0",y:"0",fill:`url(#${e})`,height:"100%",width:"100%"}),p.tsx("rect",{x:"0",y:"0",fill:`url(#${r})`,height:"100%",width:"100%"})),i?this.renderZoomCaps():null)},e._createClass(t,[{key:"handlesSyncedToPrimary",get:function(){return this.viewModel.handlesSyncedToPrimary},set:function(e){this.viewModel.handlesSyncedToPrimary=e}},{key:"label",get:function(){return this.messages?.widgetLabel??""},set:function(e){this._overrideIfSome("label",e)}},{key:"primaryHandleEnabled",get:function(){return this.viewModel.primaryHandleEnabled},set:function(e){this.viewModel.primaryHandleEnabled=e}},{key:"stops",get:function(){return this.viewModel.stops},set:function(e){this.viewModel.stops=e}}]),t}(n.SmartMappingSliderBase);r.__decorate([t.property()],g.prototype,"handlesSyncedToPrimary",null),r.__decorate([t.property()],g.prototype,"label",null),r.__decorate([t.property(),d.messageBundle("esri/widgets/smartMapping/ColorSlider/t9n/ColorSlider")],g.prototype,"messages",void 0),r.__decorate([t.property()],g.prototype,"primaryHandleEnabled",null),r.__decorate([t.property()],g.prototype,"stops",null),r.__decorate([t.property()],g.prototype,"viewModel",void 0),g=c=r.__decorate([a.subclass("esri.widgets.smartMapping.ColorSlider")],g);return g}));
