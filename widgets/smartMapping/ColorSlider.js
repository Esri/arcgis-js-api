/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.25/esri/copyright.txt for details.
*/
define(["../../chunks/_rollupPluginBabelHelpers","../../chunks/tslib.es6","../../core/accessorSupport/decorators/property","../../core/arrayUtils","../../core/accessorSupport/ensureType","../../core/accessorSupport/decorators/subclass","./SmartMappingSliderBase","./ColorSlider/ColorSliderViewModel","../support/widgetUtils","../support/decorators/messageBundle","../support/jsxFactory"],(function(e,r,i,t,s,l,a,o,n,d,p){"use strict";var c;const u={base:"esri-color-slider",rampElement:"esri-color-slider__ramp",sliderContainer:"esri-color-slider__slider-container",histogramContainer:"esri-color-slider__histogram-container",primaryHandle:"esri-color-slider--primary-handle",track:"esri-color-slider--interactive-track",esriWidget:"esri-widget",esriWidgetPanel:"esri-widget--panel",widgetIcon:"esri-icon-edit",disabled:"esri-disabled"};let m=c=function(r){function i(e,i){var t;return(t=r.call(this,e,i)||this)._bgFillId=null,t._rampFillId=null,t.messages=null,t.viewModel=new o,t._bgFillId=`${t.id}-bg-fill`,t._rampFillId=`${t.id}-linear-gradient`,t}e._inheritsLoose(i,r),i.fromRendererResult=function(e,r){const{visualVariable:{stops:i},statistics:t}=e,{avg:s,stddev:l}=t,a=e.renderer.authoringInfo.visualVariables.find((e=>"color"===e.type)),o=a.minSliderValue,n=a.maxSliderValue;return new c({max:n,min:o,stops:i,histogramConfig:{average:s,standardDeviation:l,bins:r?r.bins:[]},primaryHandleEnabled:"high-to-low"!==a.theme})};var t=i.prototype;return t.updateFromRendererResult=function(e,r){const{visualVariable:{stops:i},statistics:t}=e,{avg:s,stddev:l}=t,a=e.renderer.authoringInfo.visualVariables.find((e=>"color"===e.type)),o=a.minSliderValue,n=a.maxSliderValue;this.set({max:n,min:o,stops:i,histogramConfig:{average:s,standardDeviation:l,bins:r?r.bins:[]},primaryHandleEnabled:"high-to-low"!==a.theme})},t.render=function(){const{label:e,primaryHandleEnabled:r,state:i,visibleElements:t}=this,s="disabled"===i,l=this.classes(u.base,u.esriWidget,u.esriWidgetPanel,{[u.disabled]:s,[u.primaryHandle]:r,[u.track]:t.interactiveTrack});return p.tsx("div",{"aria-label":e,class:l},s?null:this.renderContent(this.renderRamp(),u.sliderContainer,u.histogramContainer))},t.renderRamp=function(){const{_bgFillId:e,_rampFillId:r,viewModel:i,zoomOptions:t}=this,s=i.getStopInfo();return p.tsx("div",{class:u.rampElement},p.tsx("svg",{xmlns:"http://www.w3.org/2000/svg"},p.tsx("defs",null,this.renderRampFillDefinition(r,s),this.renderBackgroundFillDefinition(e)),p.tsx("rect",{x:"0",y:"0",fill:`url(#${e})`,height:"100%",width:"100%"}),p.tsx("rect",{x:"0",y:"0",fill:`url(#${r})`,height:"100%",width:"100%"})),t?this.renderZoomCaps():null)},e._createClass(i,[{key:"handlesSyncedToPrimary",get:function(){return this.viewModel.handlesSyncedToPrimary},set:function(e){this.viewModel.handlesSyncedToPrimary=e}},{key:"label",get:function(){return this.messages?.widgetLabel??""},set:function(e){this._overrideIfSome("label",e)}},{key:"primaryHandleEnabled",get:function(){return this.viewModel.primaryHandleEnabled},set:function(e){this.viewModel.primaryHandleEnabled=e}},{key:"stops",get:function(){return this.viewModel.stops},set:function(e){this.viewModel.stops=e}}]),i}(a.SmartMappingSliderBase);r.__decorate([i.property()],m.prototype,"handlesSyncedToPrimary",null),r.__decorate([i.property()],m.prototype,"label",null),r.__decorate([i.property(),d.messageBundle("esri/widgets/smartMapping/ColorSlider/t9n/ColorSlider")],m.prototype,"messages",void 0),r.__decorate([i.property()],m.prototype,"primaryHandleEnabled",null),r.__decorate([i.property()],m.prototype,"stops",null),r.__decorate([i.property()],m.prototype,"viewModel",void 0),m=c=r.__decorate([l.subclass("esri.widgets.smartMapping.ColorSlider")],m);return m}));
