/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.18/esri/copyright.txt for details.
*/
define(["../../chunks/_rollupPluginBabelHelpers","../../chunks/tslib.es6","../../core/has","../../core/Logger","../../core/accessorSupport/ensureType","../../core/accessorSupport/decorators/property","../../core/accessorSupport/decorators/subclass","../../core/urlUtils","../../core/uuid","../../portal/support/resourceExtension","./SmartMappingSliderViewModel"],(function(e,t,n,r,o,s,a,i,l,d,u){"use strict";let p=function(t){function n(e){var n;return(n=t.call(this,e)||this).handlesSyncedToPrimary=!0,n}e._inheritsLoose(n,t);var r=n.prototype;return r.getStopIndexFromValueIndex=function(e){const{primaryHandleEnabled:t,stops:n}=this;return 0===e?0:t&&1===e?2:n.length-1},r.getStopChanges=function(e,t){return this.primaryHandleEnabled?1===e?this._getStopChangesAfterPrimaryHandleMove(e,t):this._getStopChangesAfterSecondaryHandleMove(e,t):this._getStopChangesAfterHandleMove(e,t)},r._getStopChangesAfterPrimaryHandleMove=function(e,t){const{handlesSyncedToPrimary:n,stops:r,values:o}=this,s=this.getStopIndexFromValueIndex(e);if(n){const{max:n,min:s}=this,a=t-o[e],i=Math.max(Math.min(o[0]+a,n),s),l=Math.max(Math.min(o[2]+a,n),s);return 5===r.length?[{index:0,value:this.toPrecision(i)},{index:1,value:this.toPrecision((t+i)/2)},{index:2,value:t},{index:3,value:this.toPrecision((t+l)/2)},{index:4,value:this.toPrecision(l)}]:[{index:0,value:i},{index:1,value:t},{index:2,value:l}]}return 5===r.length?[{index:1,value:this.toPrecision((o[1]+o[0])/2)},{index:2,value:t},{index:3,value:this.toPrecision((o[1]+o[2])/2)}]:[{index:s,value:t}]},r._getStopChangesAfterSecondaryHandleMove=function(e,t){const{stops:n,values:r}=this,o=this.getStopIndexFromValueIndex(e);if(5===n.length){return[{index:o,value:t},{index:0===o?1:3,value:this.toPrecision((t+r[1])/2)}]}return[{index:o,value:t}]},r._getStopChangesAfterHandleMove=function(e,t){const{max:n,min:r,stops:o,values:s}=this,a=this.getStopIndexFromValueIndex(e),i=0===e?r:s[e-1],l=e===s.length-1?n:s[e+1],d=o.map((e=>e.hasOwnProperty("ratio")?e.ratio:e.value));d[a]=Math.max(Math.min(t,l),i);const u=d[d.length-1]-d[0],p=o.length-1;return d.map(((e,t)=>({index:t,value:this.toPrecision(d[0]+t*u/p)})))},e._createClass(n,[{key:"primaryHandleEnabled",set:function(e){this._set("primaryHandleEnabled",e)},get:function(){const{stops:e}=this;if(!e||!e.length)return!1;const t=e.length;return(3===t||5===t)&&this._get("primaryHandleEnabled")}},{key:"values",get:function(){const{primaryHandleEnabled:e,stops:t}=this;if(!t||!t.length||t.length<2)return[];const n=this.getValuesFromStops();return e?3===n.length?[n[0],n[1],n[2]]:[n[0],n[2],n[4]]:[n[0],n[n.length-1]]}}]),n}(u);return t.__decorate([s.property()],p.prototype,"handlesSyncedToPrimary",void 0),t.__decorate([s.property({dependsOn:["stops","stops.length"]})],p.prototype,"primaryHandleEnabled",null),t.__decorate([s.property({dependsOn:["primaryHandleEnabled","stops","stops.length"],readOnly:!0})],p.prototype,"values",null),p=t.__decorate([a.subclass("esri.widgets.smartMapping.SmartMappingPrimaryHandleSliderViewModel")],p),p}));
