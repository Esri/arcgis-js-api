/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.19/esri/copyright.txt for details.
*/
define(["../../chunks/_rollupPluginBabelHelpers","../../chunks/tslib.es6","../../core/has","../../core/Logger","../../core/accessorSupport/ensureType","../../core/accessorSupport/decorators/property","../../core/accessorSupport/decorators/subclass","../../core/urlUtils","../../core/uuid","../../portal/support/resourceExtension","./SmartMappingSliderViewModel"],(function(e,t,n,r,i,s,o,a,l,u,d){"use strict";let c=function(t){function n(e){var n;return(n=t.call(this,e)||this).handlesSyncedToPrimary=!0,n}e._inheritsLoose(n,t);var r=n.prototype;return r.setValue=function(e,t){const{max:n,min:r,values:i}=this;if(i[e]===(t=this.toPrecision(t))||t>n||t<r)return;if(this.primaryHandleEnabled){const n=this.values[1];(0===e&&t>n||2===e&&t<n)&&(t=n)}const s=this.getStopChanges(e,t);this.updateStops(s),this.notifyChange("values"),this.notifyChange("labels")},r.getStopIndexFromValueIndex=function(e){const{primaryHandleEnabled:t,stops:n}=this;return 0===e?0:t&&1===e?2:n.length-1},r.getStopChanges=function(e,n){return this.primaryHandleEnabled?1===e?this._getStopChangesAfterPrimaryHandleMove(e,n):this._getStopChangesAfterSecondaryHandleMove(e,n):t.prototype.getStopChanges.call(this,e,n)},r._getStopChangesAfterPrimaryHandleMove=function(e,t){const{handlesSyncedToPrimary:n,stops:r,values:i}=this,s=this.getStopIndexFromValueIndex(e);if(n){const{max:n,min:s}=this,o=t-i[e],a=Math.max(Math.min(i[0]+o,n),s),l=Math.max(Math.min(i[2]+o,n),s);return 5===r.length?[{index:0,value:this.toPrecision(a)},{index:1,value:this.toPrecision((t+a)/2)},{index:2,value:t},{index:3,value:this.toPrecision((t+l)/2)},{index:4,value:this.toPrecision(l)}]:[{index:0,value:a},{index:1,value:t},{index:2,value:l}]}return 5===r.length?[{index:1,value:this.toPrecision((i[1]+i[0])/2)},{index:2,value:t},{index:3,value:this.toPrecision((i[1]+i[2])/2)}]:[{index:s,value:t}]},r._getStopChangesAfterSecondaryHandleMove=function(e,t){const{stops:n,values:r}=this,i=this.getStopIndexFromValueIndex(e);if(5===n.length){return[{index:i,value:t},{index:0===i?1:3,value:this.toPrecision((t+r[1])/2)}]}return[{index:i,value:t}]},e._createClass(n,[{key:"primaryHandleEnabled",get:function(){const{stops:e}=this;if(!e||!e.length)return!1;const t=e.length;return(3===t||5===t)&&this._get("primaryHandleEnabled")},set:function(e){this._set("primaryHandleEnabled",e)}},{key:"values",get:function(){const{primaryHandleEnabled:e,stops:t}=this;if(!t||!t.length||t.length<2)return[];const n=this.getValuesFromStops();return e?3===n.length?[n[0],n[1],n[2]]:[n[0],n[2],n[4]]:[n[0],n[n.length-1]]}}]),n}(d);return t.__decorate([s.property()],c.prototype,"handlesSyncedToPrimary",void 0),t.__decorate([s.property()],c.prototype,"primaryHandleEnabled",null),t.__decorate([s.property({readOnly:!0})],c.prototype,"values",null),c=t.__decorate([o.subclass("esri.widgets.smartMapping.SmartMappingPrimaryHandleSliderViewModel")],c),c}));
