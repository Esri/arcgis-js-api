/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.18/esri/copyright.txt for details.
*/
define(["../../chunks/_rollupPluginBabelHelpers","../../chunks/tslib.es6","../../core/has","../../core/Logger","../../core/accessorSupport/ensureType","../../core/accessorSupport/decorators/property","../../core/accessorSupport/decorators/aliasOf","../../core/accessorSupport/decorators/subclass","../../core/urlUtils","../../core/uuid","../../portal/support/resourceExtension","../../renderers/support/ClassBreakInfo","../support/widgetUtils","../support/decorators/messageBundle","../support/decorators/renderable","../../chunks/index","./SmartMappingSliderBase","./ClassedColorSlider/ClassedColorSliderViewModel"],(function(e,r,s,o,l,i,t,a,n,d,c,u,p,m,b,g,h,f){"use strict";var w;const v="esri-classed-color-slider",_="esri-classed-color-slider__ramp",x="esri-classed-color-slider__slider-container",k="esri-classed-color-slider__histogram-container",M="esri-widget",y="esri-widget--panel",C="esri-disabled";let F=w=function(r){function s(e,s){var o;return(o=r.call(this,e,s)||this)._bgFillId=null,o._rampFillId=null,o.breaks=null,o.label=void 0,o.messages=null,o.viewModel=new f,o._bgFillId=`${o.id}-bg-fill`,o._rampFillId=`${o.id}-linear-gradient`,o}e._inheritsLoose(s,r),s.fromRendererResult=function(e,r){const{renderer:{classBreakInfos:s}}=e,o=s.map((e=>{const r=e.symbol.color;return{min:e.minValue,max:e.maxValue,color:r}}));return new w({breaks:o,histogramConfig:{bins:r?r.bins:[]}})};var o=s.prototype;return o.updateClassBreakInfos=function(e){const r=this.breaks;if(r.length===e.length)return e.map(((e,s)=>{const o=e.symbol;return o.color=r[s].color,new u({minValue:r[s].min,maxValue:r[s].max,symbol:o})}));console.error(`Number of input breakInfos must match number of slider breaks: ${r.length}`)},o.updateFromRendererResult=function(e,r){const{renderer:{classBreakInfos:s}}=e,o=s.map((e=>{const r=e.symbol.color;return{min:e.minValue,max:e.maxValue,color:r}}));this.set({breaks:o}),null!=r&&r.bins&&(this.histogramConfig.bins=r.bins)},o.render=function(){const{state:e,label:r}=this,s="disabled"===e,o=this.classes(v,M,y,{[C]:s});return g.jsx("div",{"aria-label":r,class:o},s?null:this.renderContent(this.renderRamp(),x,k))},o.renderRamp=function(){const{_bgFillId:e,_rampFillId:r,viewModel:s}=this,o=s.getStopInfo();return g.jsx("div",{class:_},g.jsx("svg",{xmlns:"http://www.w3.org/2000/svg"},g.jsx("defs",null,this.renderRampFillDefinition(r,o),this.renderBackgroundFillDefinition(e)),g.jsx("rect",{x:"0",y:"0",fill:`url(#${e})`,height:"100%",width:"100%"}),g.jsx("rect",{x:"0",y:"0",fill:`url(#${r})`,height:"100%",width:"100%"})))},s}(h.SmartMappingSliderBase);return r.__decorate([t.aliasOf("viewModel.breaks")],F.prototype,"breaks",void 0),r.__decorate([i.property({aliasOf:{source:"messages.widgetLabel",overridable:!0}})],F.prototype,"label",void 0),r.__decorate([i.property(),b.renderable(),m.messageBundle("esri/widgets/smartMapping/ClassedColorSlider/t9n/ClassedColorSlider")],F.prototype,"messages",void 0),r.__decorate([i.property(),b.renderable(["viewModel.breaks","viewModel.hasTimeData","viewModel.inputFormatFunction","viewModel.inputParseFunction","viewModel.labelFormatFunction","viewModel.max","viewModel.min","viewModel.values"])],F.prototype,"viewModel",void 0),F=w=r.__decorate([a.subclass("esri.widgets.smartMapping.ClassedColorSlider")],F),F}));
