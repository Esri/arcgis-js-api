/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.25/esri/copyright.txt for details.
*/
define(["../../chunks/_rollupPluginBabelHelpers","../../chunks/tslib.es6","../../core/accessorSupport/decorators/property","../../core/arrayUtils","../../core/accessorSupport/ensureType","../../core/accessorSupport/decorators/subclass","../../renderers/support/ClassBreakInfo","./SmartMappingSliderBase","./ClassedColorSlider/ClassedColorSliderViewModel","../support/widgetUtils","../support/decorators/messageBundle","../support/jsxFactory"],(function(e,r,s,t,i,l,o,n,a,d,c,u){"use strict";var p;const m={base:"esri-classed-color-slider",rampElement:"esri-classed-color-slider__ramp",sliderContainer:"esri-classed-color-slider__slider-container",histogramContainer:"esri-classed-color-slider__histogram-container",track:"esri-classed-color-slider--interactive-track",esriWidget:"esri-widget",esriWidgetPanel:"esri-widget--panel",widgetIcon:"esri-icon-edit",disabled:"esri-disabled"};let g=p=function(r){function s(e,s){var t;return(t=r.call(this,e,s)||this)._bgFillId=null,t._rampFillId=null,t.messages=null,t.viewModel=new a,t._bgFillId=`${t.id}-bg-fill`,t._rampFillId=`${t.id}-linear-gradient`,t}e._inheritsLoose(s,r),s.fromRendererResult=function(e,r){const{renderer:{classBreakInfos:s}}=e,t=s.map((e=>{const r=e.symbol.color;return{min:e.minValue,max:e.maxValue,color:r}}));return new p({breaks:t,histogramConfig:{bins:r?r.bins:[]}})};var t=s.prototype;return t.updateClassBreakInfos=function(e){const r=this.breaks;if(r.length===e.length)return e.map(((e,s)=>{const t=e.symbol;return t.color=r[s].color,new o({minValue:r[s].min,maxValue:r[s].max,symbol:t})}));console.error(`Number of input breakInfos must match number of slider breaks: ${r.length}`)},t.updateFromRendererResult=function(e,r){const{renderer:{classBreakInfos:s}}=e,t=s.map((e=>{const r=e.symbol.color;return{min:e.minValue,max:e.maxValue,color:r}}));this.set({breaks:t}),r?.bins&&(this.histogramConfig.bins=r.bins)},t.render=function(){const{state:e,label:r,visibleElements:s}=this,t="disabled"===e,i=this.classes(m.base,m.esriWidget,m.esriWidgetPanel,{[m.disabled]:t,[m.track]:s.interactiveTrack});return u.tsx("div",{"aria-label":r,class:i},t?null:this.renderContent(this.renderRamp(),m.sliderContainer,m.histogramContainer))},t.renderRamp=function(){const{_bgFillId:e,_rampFillId:r,viewModel:s}=this,t=s.getStopInfo();return u.tsx("div",{class:m.rampElement},u.tsx("svg",{xmlns:"http://www.w3.org/2000/svg"},u.tsx("defs",null,this.renderRampFillDefinition(r,t),this.renderBackgroundFillDefinition(e)),u.tsx("rect",{x:"0",y:"0",fill:`url(#${e})`,height:"100%",width:"100%"}),u.tsx("rect",{x:"0",y:"0",fill:`url(#${r})`,height:"100%",width:"100%"})))},e._createClass(s,[{key:"breaks",get:function(){return this.viewModel.breaks},set:function(e){this.viewModel.breaks=e}},{key:"label",get:function(){return this.messages?.widgetLabel??""},set:function(e){this._overrideIfSome("label",e)}}]),s}(n.SmartMappingSliderBase);r.__decorate([s.property()],g.prototype,"breaks",null),r.__decorate([s.property()],g.prototype,"label",null),r.__decorate([s.property(),c.messageBundle("esri/widgets/smartMapping/ClassedColorSlider/t9n/ClassedColorSlider")],g.prototype,"messages",void 0),r.__decorate([s.property()],g.prototype,"viewModel",void 0),g=p=r.__decorate([l.subclass("esri.widgets.smartMapping.ClassedColorSlider")],g);return g}));
