/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.18/esri/copyright.txt for details.
*/
define(["../../../chunks/_rollupPluginBabelHelpers","../../../chunks/tslib.es6","../../../core/has","../../../core/Logger","../../../core/accessorSupport/ensureType","../../../core/accessorSupport/decorators/property","../../../core/accessorSupport/decorators/subclass","../../../core/urlUtils","../../../core/uuid","../../../portal/support/resourceExtension","../../../Color","../support/utils","../SmartMappingSliderViewModel"],(function(t,e,s,o,r,i,n,a,l,u,c,p,h){"use strict";let g=function(e){function s(t){var s;return(s=e.call(this,t)||this)._initialValues=[],s}t._inheritsLoose(s,e);var o=s.prototype;return o.setValue=function(t,e){const{max:s,min:o,stops:r}=this;if(e>s||e<o)return;const i=0===t?0:r.length-1;if(e===r[i].value)return;const{values:n}=this,a=0===t?o:n[t-1],l=t===n.length-1?s:n[t+1],u=Math.max(Math.min(e,l),a),c=0===i?u:r[0].value,h=0===i?r[r.length-1].value:u,g=p.getStopChanges(c,h,this._initialValues);this.updateStops(g),this.notifyChange("values"),this.notifyChange("labels")},o.getStopInfo=function(t){const{min:e,max:s,stops:o}=this;if(!o||!o.length)return[];const r=this._getColorForStops(t).toRgb();return o.map((t=>({color:new c([...r,t.opacity]),offset:(s-t.value)/(s-e)})))},o._getColorForStops=function(t){return t?t instanceof c?t:c.fromString(t):null},t._createClass(s,[{key:"stops",set:function(t){this._initialValues=null==t?void 0:t.map((t=>t.value)),this._set("stops",t)}}]),s}(h);return e.__decorate([i.property()],g.prototype,"stops",null),g=e.__decorate([n.subclass("esri.widgets.smartMapping.OpacitySlider.OpacitySliderViewModel")],g),g}));
