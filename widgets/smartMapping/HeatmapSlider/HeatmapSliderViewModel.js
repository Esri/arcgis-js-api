/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.19/esri/copyright.txt for details.
*/
define(["../../../chunks/_rollupPluginBabelHelpers","../../../chunks/tslib.es6","../../../core/has","../../../core/maybe","../../../core/Logger","../../../core/accessorSupport/ensureType","../../../core/accessorSupport/decorators/property","../../../core/accessorSupport/decorators/subclass","../../../core/urlUtils","../../../core/uuid","../../../portal/support/resourceExtension","../../../intl/locale","../../../intl/messages","../../../intl","../../../core/Handles","../support/utils","../SmartMappingSliderViewModel"],(function(e,t,o,r,s,a,i,n,l,p,c,d,u,m,h,y,g){"use strict";let _=function(t){function o(e){var o;return(o=t.call(this,e)||this)._handles=new h,o._initialRatios=[],o.hasTimeData=!1,o.labelFormatFunction=(e,t)=>"min"===t?o.messages.bottomLabel:"max"===t?o.messages.topLabel:e.toString(),o.max=1,o.messages=null,o.min=0,o.zoomingEnabled=!1,o}e._inheritsLoose(o,t);var s=o.prototype;return s.initialize=function(){const e=async()=>this.messages=await u.fetchMessageBundle("esri/widgets/smartMapping/HeatmapSlider/t9n/HeatmapSlider");e(),this._handles.add(d.onLocaleChange(e))},s.setValue=function(e,t){const{max:o,min:r,stops:s}=this;if(t>o||t<r)return;if(t===s[e].ratio)return;const{values:a}=this,i=0===e?0:s.length-1,n=0===e?r:a[e-1],l=e===a.length-1?o:a[e+1],p=Math.max(Math.min(t,l),n),c=0===i?p:s[0].ratio,d=0===i?s[s.length-1].ratio:p,u=y.getStopChanges(c,d,this._initialRatios);this.updateStops(u),this.notifyChange("values"),this.notifyChange("labels")},s.getStopInfo=function(){const{stops:e}=this;return e&&e.length?e.map((e=>({color:e.color,offset:1-e.ratio}))):[]},e._createClass(o,[{key:"state",get:function(){const{messages:e,max:t,min:o}=this;return e&&r.isSome(t)&&r.isSome(o)?"ready":"disabled"}},{key:"stops",set:function(e){this._initialRatios=null==e?void 0:e.map((e=>e.ratio)),this._set("stops",e)}},{key:"values",get:function(){const{stops:e}=this;return!e||!e.length||e.length<2?[]:[e[0].ratio,e[e.length-1].ratio]}}]),o}(g);return t.__decorate([i.property({readOnly:!0})],_.prototype,"hasTimeData",void 0),t.__decorate([i.property({readOnly:!0})],_.prototype,"labelFormatFunction",void 0),t.__decorate([i.property({readOnly:!0})],_.prototype,"max",void 0),t.__decorate([i.property()],_.prototype,"messages",void 0),t.__decorate([i.property({readOnly:!0})],_.prototype,"min",void 0),t.__decorate([i.property({readOnly:!0})],_.prototype,"state",null),t.__decorate([i.property()],_.prototype,"stops",null),t.__decorate([i.property({readOnly:!0})],_.prototype,"values",null),t.__decorate([i.property({readOnly:!0})],_.prototype,"zoomingEnabled",void 0),_=t.__decorate([n.subclass("esri.widgets.smartMapping.HeatmapSlider.HeatmapSliderViewModel")],_),_}));
