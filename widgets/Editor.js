/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.26/esri/copyright.txt for details.
*/
define(["require","../chunks/_rollupPluginBabelHelpers","../chunks/tslib.es6","../intl","../core/HandleOwner","../core/Logger","../core/maybe","../core/promiseUtils","../core/reactiveUtils","../core/accessorSupport/decorators/property","../core/accessorSupport/decorators/cast","../core/arrayUtils","../core/accessorSupport/decorators/subclass","../layers/support/fieldUtils","./Attachments","./FeatureForm","./FeatureTemplates","./Spinner","./Widget","./Editor/deprecationUtils","./Editor/EditorViewModel","./FeatureTemplates/ItemList","./support/Heading","./support/SnappingControls","./support/decorators/accessibleHandler","./support/decorators/messageBundle","./support/decorators/vmEvent","./support/jsxFactory","./support/widgetUtils","./support/SketchTooltipControls/SketchTooltipControls","../intl/substitute"],(function(e,t,n,a,i,o,s,r,l,c,d,p,u,m,h,_,g,f,w,v,y,k,b,A,C,M,F,T,x,W,E){"use strict";const S="esri-editor",P=`${S}__panel`,L=`${S}__prompt`,B={base:`${S} esri-widget esri-widget--panel`,message:`${S}__message`,actions:`${S}__actions`,helpMessage:`${S}__help-message`,progressBar:`${S}__progress-bar`,panelToolbar:`${P}-toolbar`,panelContent:`${P}-content`,panelContentMessage:`${P}-content__message`,panelContentSection:`${P}-content__section`,panelContentSectionGroup:`${P}-content__section__group`,panelContentScrimContainer:`${P}-content__scrim-container`,settingsContainer:`${S}__settings`,updateFeaturesActionButtons:`${S}__update-features-action-buttons`,updateFeaturesActionButtonsButton:`${S}__update-features-action-buttons--button`,featureTemplatesContainer:`${S}__feature-templates-container`,ownerAdminNotice:`${S}__owner-admin-notice`,promptContainer:L,promptHeader:`${L}__header`,promptHeading:`${L}__header__heading`,promptMessage:`${L}__message`,promptDivider:`${L}__divider`,promptActions:`${L}__actions`,warningIcon:"esri-icon-notice-triangle",widgetIcon:"esri-icon-edit"},I={undoRedoButtons:!1,snappingControls:!0,snappingControlsElements:{header:!1,enabledToggle:!0,selfEnabledToggle:!0,featureEnabledToggle:!0,layerList:!0},sketchTooltipControls:!0};function H(e){e.focus()}const D="esri.widgets.Editor",U=o.getLogger(D);let $=function(n){function a(e,a){var i;return(i=n.call(this,e,a)||this)._featureForm=new _,i._attachments=new h({visibleElements:{addSubmitButton:!1,cancelAddButton:!1,cancelUpdateButton:!1,deleteButton:!1,errorMessage:!1,progressBar:!1,updateButton:!1}}),i._featureTemplates=new g({enableListScroll:!1}),i._filterText="",i._prompt=null,i._spinner=new f,i.useDeprecatedCreateWorkflow=!1,i.headingLevel=4,i.iconClass=B.widgetIcon,i.messages=null,i.messagesCommon=null,i.messagesTemplates=null,i.supportingWidgetDefaults=null,i.viewModel=new y,i.visibleElements={...I},i.EditorPanel=({handleBack:e,heading:n,headingLevel:a,key:o},...s)=>{const{messagesCommon:r,viewModel:l,visibleElements:c}=t._assertThisInitialized(i),d=l.sketchViewModel,p=l.syncing||i._attachments.submitting;return T.tsx("calcite-flow-item",{closable:!1,heading:n,headingLevel:a,key:o,loading:p,onCalciteFlowItemBack:e??void 0},T.tsx("div",{key:"panel-toolbar",class:B.panelToolbar},i._renderSettings(),c.undoRedoButtons&&[T.tsx("calcite-button",{key:"undo-button",label:r.undo,appearance:"transparent",kind:"neutral",alignment:"center",iconStart:"undo",scale:"l",disabled:!d.canUndo(),onclick:d.undo.bind(d)},r.undo),T.tsx("calcite-button",{key:"redo-button",label:r.redo,appearance:"transparent",kind:"neutral",alignment:"center",iconStart:"redo",scale:"l",disabled:!d.canRedo(),onclick:d.redo.bind(d)},r.redo)]),...s)},i._showDiscardWarning=()=>{const{messages:e}=t._assertThisInitialized(i),n="create"===i.activeWorkflow?.type,a=r.createDeferred();return i._prompt={title:e[n?"cancelAddTitle":"cancelEditTitle"],message:e[n?"cancelAddWarningMessage":"cancelEditWarningMessage"],context:"danger",actions:{primary:{label:e[n?"discardFeature":"discardEdits"],action:()=>{a.resolve(),i._clearPrompt()}},secondary:{label:e[n?"continueAdding":"continueEditing"],action:()=>{a.reject(),i._clearPrompt()}}}},a.promise},i._onAttachmentDeleteConfirm=t._asyncToGenerator((function*(){const e=i._attachments,{activeWorkflow:t}=i.viewModel;t&&("create-features"===t.type?e.deleteFile():(yield e.deleteAttachment(e.viewModel.activeAttachmentInfo),i._clearPrompt()),yield t.previous(),i._clearPrompt())})),i._onAttachmentsError=e=>{i._prompt={title:i.messages.errorWarningTitle,message:e.message,context:"warning",actions:{primary:{label:i.messagesCommon.form.ok,action:i._clearPrompt}}}},i._clearPrompt=()=>{i._prompt=null},i._onBack=i._onBack.bind(t._assertThisInitialized(i)),i._onSave=i._onSave.bind(t._assertThisInitialized(i)),i._onDelete=i._onDelete.bind(t._assertThisInitialized(i)),i._onToggleUpdateWorkflow=i._onToggleUpdateWorkflow.bind(t._assertThisInitialized(i)),i._onAttachmentAdd=i._onAttachmentAdd.bind(t._assertThisInitialized(i)),i._onAttachmentUpdate=i._onAttachmentUpdate.bind(t._assertThisInitialized(i)),i._onAttachmentDelete=i._onAttachmentDelete.bind(t._assertThisInitialized(i)),i}t._inheritsLoose(a,n);var i=a.prototype;return i.initialize=function(){var e=this;const n=()=>this.scheduleRender();this.addHandles([l.watch((()=>b.incrementHeadingLevel(this.headingLevel)),(e=>{this._featureForm.headingLevel=e,this._featureTemplates.headingLevel=e}),l.initial),l.on((()=>this.viewModel.featureTemplatesViewModel),"select",function(){var n=t._asyncToGenerator((function*({item:t,oldItem:n}){e.viewModel.activeWorkflow&&(yield e.viewModel.cancelWorkflow()),t&&t.id!==n?.id&&(e.useDeprecatedCreateWorkflow?e.startCreateWorkflowAtFeatureCreation(t):e.startCreateFeaturesWorkflowAtFeatureCreation(t))}));return function(e){return n.apply(this,arguments)}}()),l.watch((()=>this.viewModel.selectedTemplateItem),(e=>this._featureTemplates.select(e,!1))),l.on((()=>this.viewModel.activeWorkflow),"cancel-request",(({controller:e})=>{const{messages:t,messagesCommon:n}=this;this._prompt={title:t.cancelRequestTitle,message:t.cancelRequestWarningMessage,context:"danger",actions:{primary:{label:n.form.yes,action:()=>{e.allow(),this._clearPrompt()}},secondary:{label:n.form.no,action:()=>{e.deny(),this._clearPrompt()}}}}})),l.watch((()=>this.viewModel),(e=>{this._featureForm.viewModel=e?.featureFormViewModel??null,this._attachments.viewModel=e?.attachmentsViewModel??null,this._featureTemplates.viewModel=e?.featureTemplatesViewModel??null,this._spinner.viewModel=e?.spinnerViewModel??null,e.showDiscardPrompt=this._showDiscardWarning}),l.initial),l.watch((()=>this.view),((e,t)=>{const n=`editor-${this.id}-spinner`;t?.ui.remove(this._spinner,n),e?.ui.add(this._spinner,{key:n,position:"manual"})}),l.initial),l.on((()=>this.viewModel?.sketchViewModel),"create",n),l.when((()=>this.supportingWidgetDefaults),(e=>{this._featureForm.set(e.featureForm),this._attachments.set(e.attachments),this._featureTemplates.set(e.featureTemplates),this.viewModel.sketchViewModel.set(e.sketch)}),l.initial),l.when((()=>this._attachments?.error),(e=>this._onAttachmentsError(e))),l.when((()=>this.viewModel?.failures),(e=>{const{messages:t}=this,[{error:n,retry:a,cancel:i}]=e;this._prompt={title:t.errorWarningTitle,message:E.substitute(t.errorWarningMessageTemplate,{errorMessage:n.message}),context:"warning",actions:{primary:{label:t.retry,action:()=>{a(),this._clearPrompt()}},secondary:{label:t.ignore,action:()=>{i(),this._clearPrompt()}}}}})),l.watch((()=>this.viewModel?.state),(e=>{switch(e){case"awaiting-feature-to-update":case"ready":case"disabled":this._filterText="",this._featureTemplates.filterText=""}})),l.watch((()=>[this._attachments?.selectedFile,this._attachments?.submitting]),n),l.watch((()=>this.viewModel.featureFormDisabled),(e=>this._featureForm.disabled=e)),l.on((()=>this.view),"key-down",(e=>{"Escape"===e.key&&this.viewModel.back()}))])},i.destroy=function(){this._attachments.destroy(),this._featureForm.destroy(),this._featureTemplates.destroy()},i.loadDependencies=function(){return Promise.all([new Promise(((t,n)=>e(["../chunks/calcite-accordion-item"],t,n))),new Promise(((t,n)=>e(["../chunks/calcite-accordion"],t,n))),new Promise(((t,n)=>e(["../chunks/calcite-button"],t,n))),new Promise(((t,n)=>e(["../chunks/calcite-flow-item"],t,n))),new Promise(((t,n)=>e(["../chunks/calcite-flow"],t,n))),new Promise(((t,n)=>e(["../chunks/calcite-icon"],t,n))),new Promise(((t,n)=>e(["../chunks/calcite-list-item"],t,n))),new Promise(((t,n)=>e(["../chunks/calcite-list"],t,n))),new Promise(((t,n)=>e(["../chunks/calcite-notice"],t,n))),new Promise(((t,n)=>e(["../chunks/calcite-scrim"],t,n)))])},i.castVisibleElements=function(e){return{...I,...e,snappingControlsElements:{...I.snappingControlsElements,...e?.snappingControlsElements}}},i.startCreateWorkflowAtFeatureTypeSelection=function(){return v.workflowDeprecation(U,"startCreateWorkflowAtFeatureTypeSelection","startCreateFeaturesWorkflowAtFeatureTypeSelection"),this.viewModel.startCreateWorkflowAtFeatureTypeSelection()},i.startCreateFeaturesWorkflowAtFeatureTypeSelection=function(){return this.viewModel.startCreateFeaturesWorkflowAtFeatureTypeSelection()},i.startCreateWorkflowAtFeatureCreation=function(e){return v.workflowDeprecation(U,"startCreateWorkflowAtFeatureCreation","startCreateFeaturesWorkflowAtFeatureCreation"),this.viewModel.startCreateWorkflowAtFeatureCreation(e)},i.startCreateFeaturesWorkflowAtFeatureCreation=function(e){return this.viewModel.startCreateFeaturesWorkflowAtFeatureCreation(e)},i.startCreateWorkflowAtFeatureEdit=function(e){return v.workflowDeprecation(U,"startCreateWorkflowAtFeatureEdit"),this.viewModel.startCreateWorkflowAtFeatureEdit(e)},i.startUpdateWorkflowAtFeatureSelection=function(){return this.viewModel.startUpdateWorkflowAtFeatureSelection()},i.startUpdateWorkflowAtMultipleFeatureSelection=function(e){return this.viewModel.startUpdateWorkflowAtMultipleFeatureSelection(e)},i.startUpdateWorkflowAtFeatureEdit=function(e){return this.viewModel.startUpdateWorkflowAtFeatureEdit(e)},i.deleteFeatureFromWorkflow=function(){return this.viewModel.deleteFeatureFromWorkflow()},i.cancelWorkflow=function(e){return this.viewModel.cancelWorkflow(e)},i.render=function(){const{viewModel:e}=this;if(!e)return T.tsx("div",{class:B.base});const{state:t}=e;return T.tsx("div",{class:B.base},T.tsx("calcite-flow",null,e.pageStack.map((e=>this._renderPage(e,t))),this._renderPage(e.page,t)),this._renderPrompt())},i._renderPage=function(e,t){switch(e){case"disabled":break;case"ready":return this._renderLanding(t);case"awaiting-feature-creation-info":return this._renderTemplates(t);case"creating-features":case"editing-new-feature":case"editing-existing-feature":return this._renderAttributeEditing(t);case"awaiting-update-feature-candidate":return this._renderFeatureList(t);case"adding-attachment":return this._renderAttachmentAdding(t);case"editing-attachment":return this._renderAttachmentEditing(t)}return T.tsx("div",null)},i._renderTemplates=function(e){const{EditorPanel:t,headingLevel:n,messages:a,_onBack:i}=this;return T.tsx(t,{active:this._isPanelActive(e),key:"templates-panel",handleBack:i,heading:a.selectTemplate,headingLevel:n},T.tsx("div",{class:B.panelContent},this._featureTemplates.render()))},i._renderAttributeEditing=function(e){const{activeWorkflow:t,EditorPanel:n,messages:a,messagesCommon:i,headingLevel:o,_onBack:s,viewModel:r}=this;if(!t)return null;const l=t.type,c=r.featureFormViewModel,d="update"===l&&!t.data.edits.modified||r.syncing||c.updating,p="update"===l?a.editFeature:a.createFeatures,u="update"===l?i.update:i.create,m="create-features"===l&&"create-new"===t.createFeatureState,h="create-features"===l?t.numPendingFeatures:0,_=h>1?E.substitute(a.createFeaturesTemplate,{numFeatures:h}):u,g=t.shouldShowAttachments,f=c.inputFields.every((e=>!e.visible))&&!g?this._renderMessage(E.substitute(a.clickToFinishTemplate,{button:u})):T.tsx("div",{key:"panel-content-section",class:B.panelContentSection},this._renderOwnerAdminNoticeIfApplicable(t),T.tsx("div",{class:B.panelContentSectionGroup},this._featureForm.render(),g&&T.tsx("div",{key:"attachments"},T.tsx(b.Heading,{level:b.incrementHeadingLevel(o)},a.attachments),this._attachments.render())));return T.tsx(n,{active:this._isPanelActive(e),key:"attribute-editing-panel",heading:p,headingLevel:o,handleBack:s},T.tsx("div",{key:"panel-content",class:this.classes(B.panelContent,{[B.panelContentScrimContainer]:m})},f,m&&T.tsx("calcite-scrim",null)),this._renderFooterActions([{clickHandler:this._onSave,disabled:d,label:_,type:"primary"},r.shouldShowDeleteButton?{...this._deleteButtonCommonInfo,clickHandler:this._onDelete,disabled:r.syncing,label:i.delete}:null]))},i._renderOwnerAdminNoticeIfApplicable=function(e){if(e?.reliesOnOwnerAdminPrivileges)return T.tsx("calcite-notice",{open:!0,kind:"info",scale:"s",class:B.ownerAdminNotice},T.tsx("div",{slot:"message"},this.messages.ownerAdminNotice))},i._renderAttachmentAdding=function(e){const{_attachments:t,EditorPanel:n,_onBack:a,headingLevel:i,messages:o,messagesCommon:s}=this;return T.tsx(n,{active:this._isPanelActive(e),key:"attachment-adding-panel",heading:o.addAttachment,headingLevel:i,handleBack:a},T.tsx("div",{class:B.panelContent},t.render()),this._renderFooterActions([{label:t.submitting?s.cancel:s.add,disabled:t.submitting||!t.selectedFile,type:"primary",clickHandler:this._onAttachmentAdd}]))},i._renderAttachmentEditing=function(e){const{_attachments:t,EditorPanel:n,_onBack:a,activeWorkflow:i,headingLevel:o,messages:s,messagesCommon:r}=this;return i?T.tsx(n,{active:this._isPanelActive(e),key:"attachment-editing-panel",heading:s.editAttachment,headingLevel:o,handleBack:a},T.tsx("div",{class:B.panelContent},t.render()),i.shouldAllowAttachmentEditing?this._renderFooterActions([{label:r.update,disabled:t.submitting||!t.selectedFile,type:"primary",clickHandler:this._onAttachmentUpdate},{...this._deleteButtonCommonInfo,clickHandler:this._onAttachmentDelete,disabled:t.submitting,label:r.delete}]):void 0):null},i._renderMessage=function(e){return T.tsx("div",{key:"panel-content-message",class:B.panelContentMessage},e)},i._renderFooterActions=function(e){return T.tsx("div",{key:"footer-actions",slot:"footer",class:B.actions},e.filter(s.isSome).map((({type:e,disabled:t,class:n,clickHandler:a,label:i,...o},s)=>T.tsx("calcite-button",{key:`action-${s}`,slot:"footer-actions",class:n,disabled:t??!1,onclick:a,width:"full",...o},i))))},i._renderPrompt=function(){const e=this._prompt;if(!e)return null;const{title:t,message:n,context:a,actions:i}=e,o=i.secondary;let s;switch(a){case"danger":s="danger";break;case"info":s="brand";break;default:s="neutral"}const r=T.tsx("calcite-button",{afterCreate:H,appearance:"solid",key:"prompt-primary-button",kind:s,onclick:i.primary.action,scale:"m",width:o?"half":"full"},i.primary.label),l=o&&T.tsx("calcite-button",{appearance:"outline",key:"prompt-secondary-button",kind:s,onclick:o.action,scale:"m",width:"half"},o.label);return T.tsx("calcite-scrim",null,T.tsx("div",{class:`${B.promptContainer}--${a}`},T.tsx("div",{class:B.promptHeader},T.tsx("calcite-icon",{icon:"exclamation-mark-triangle"}),T.tsx(b.Heading,{class:B.promptHeading,level:this.headingLevel},t)),T.tsx("div",{class:B.promptMessage},n),T.tsx("div",{class:B.promptDivider}),T.tsx("div",{class:B.promptActions},l,r)))},i._renderLanding=function(e){const{EditorPanel:t,headingLevel:n,messages:a,viewModel:i}=this,{canUpdate:o}=i,s=this._featureTemplates.viewModel.numberOfFeatureTemplates,r=!o&&0===s;return T.tsx(t,{active:this._isPanelActive(e),key:"landing-panel",heading:a.widgetLabel,headingLevel:n},T.tsx("div",{class:B.panelContent},o&&T.tsx("div",{key:"edit-actions",class:B.panelContentSection},this._renderUpdateActions(e)),s>0&&T.tsx("div",{key:"create-actions",class:B.panelContentSection},this._renderCreateActions()),r&&T.tsx("div",{key:"no-content",class:B.panelContentMessage},a.noEditableLayers)),this._renderFooterHelpMessages())},i._renderFooterHelpMessages=function(){const{activeWorkflow:e,messages:t,view:n}=this,a=e?.helpMessage,i=a?t["3d"===n?.type?"helpMessages3d":"helpMessages2d"]?.[a]:null;return i?T.tsx("div",{key:"footer-actions",slot:"footer",class:B.helpMessage},i):null},i._renderUpdateActions=function(e){const{messages:t,messagesCommon:n}=this;return T.tsx("div",{key:"update-actions"},T.tsx(b.Heading,{level:b.incrementHeadingLevel(this.headingLevel)},t.editFeatures),T.tsx("calcite-list",{selectionMode:"single",selectionAppearance:"border"},T.tsx("calcite-list-item",{selected:"awaiting-feature-to-update"===e,label:n.select,onCalciteListItemSelect:this._onToggleUpdateWorkflow},T.tsx("calcite-icon",{icon:"cursor",slot:"content-start"}))))},i._renderCreateActions=function(){const{_featureTemplates:e,headingLevel:t,messages:n}=this;return T.tsx("div",{key:"create-actions"},T.tsx(b.Heading,{level:b.incrementHeadingLevel(t)},n.createFeatures),T.tsx("div",{key:"templates",class:B.featureTemplatesContainer},e.render()))},i._renderFeatureList=function(e){const{EditorPanel:t,_onBack:n,headingLevel:a,messages:i,messagesTemplates:o,viewModel:{activeWorkflow:r,editableItems:l}}=this;if("update"!==r?.type)return null;const c=r.data.candidates,d=E.substitute(i.multipleFeaturesTemplate,{total:c.length}),p=new Map;let u=0;c.map((e=>({label:this._getLabel(e),id:e.attributes[e.layer.objectIdField],data:e}))).filter((e=>{const{label:t,data:n}=e,a=this._filterText.toLowerCase(),{title:i}=n.layer,o=l.find((e=>e.layer===n.layer));if(!o)return null;const{attachmentsOnUpdateEnabled:s,supports:r}=o;return(r.includes("update")||r.includes("delete")||s)&&(!a||t?.toLowerCase().includes(a)||i?.toLowerCase().includes(a))})).filter(s.isSome).forEach((e=>{u++;const t=e.data.layer;p.has(t)?p.get(t)?.items.push(e):p.set(t,{id:`${t.id}`,label:t.title??"",items:[e]})}));const m=l.toArray().map((({layer:e})=>p.get(e))).filter(s.isSome),h=u>10||this._filterText.length>0;return T.tsx(t,{active:this._isPanelActive(e),key:"feature-list",heading:d,headingLevel:a,handleBack:n},T.tsx("div",{class:B.panelContent},T.tsx("div",{class:B.panelContentSection},k.ItemList({id:this.id,enableListScroll:!1,filterEnabled:h,filterText:this._filterText,items:m,messages:{filterPlaceholder:o.filterPlaceholder,noItems:o.noItems,noMatches:o.noMatches},onItemMouseEnter:e=>this.viewModel.selectFeature(e.data),onItemMouseLeave:()=>this.viewModel.selectFeature(null),onItemSelect:e=>this.viewModel.selectFeature(e.data,!0),onFilterChange:e=>this._filterText=e}))))},i._isPanelActive=function(e){return this.viewModel.state===e},i._renderSettings=function(){const e=this.visibleElements,t=e.snappingControls,n=e.sketchTooltipControls;return t||n?T.tsx("calcite-accordion",{class:B.settingsContainer,appearance:"transparent"},T.tsx("calcite-accordion-item",{heading:this.messagesCommon?.settings,iconStart:"gear"},n&&T.tsx(W.SketchTooltipControls,{tooltipOptions:this.tooltipOptions}),t&&T.tsx(A,{snappingOptions:this.snappingOptions,view:this.view,visibleElements:e.snappingControlsElements,afterCreate:e=>e.layerListOpen=!1}))):null},i._getLabel=function(e){const t=e.layer;if(!t)return null;const{objectIdField:n}=t,{attributes:a}=e,i=m.getDisplayFieldName(t);return i&&a[i]&&`${a[i]}`||E.substitute(this.messages.untitledFeatureTemplate,{id:a[n]})},i._onSave=function(){this.viewModel.save()},i._onDelete=function(){const{messages:e,messagesCommon:t}=this;this._prompt={title:e.deleteWarningTitle,message:e.deleteWarningMessage,context:"danger",actions:{primary:{label:t.delete,action:()=>{this.deleteFeatureFromWorkflow(),this._clearPrompt()}},secondary:{label:e.keepFeature,action:this._clearPrompt}}}},i._onToggleUpdateWorkflow=function(){var e=t._asyncToGenerator((function*(){const{viewModel:e}=this;e.canUpdate&&(e.activeWorkflow&&"awaiting-feature-to-update"===e.state?yield e.cancelWorkflow():yield e.startUpdateWorkflowAtFeatureSelection())}));function n(){return e.apply(this,arguments)}return n}(),i._onBack=function(){var e=t._asyncToGenerator((function*(e){return e?.stopPropagation(),this.viewModel.back()}));function n(t){return e.apply(this,arguments)}return n}(),i._onAttachmentAdd=function(){const{activeWorkflow:e}=this.viewModel;e&&("create-features"===e.type?(this._attachments.addFile(),e.previous()):this._attachments.addAttachment().then((()=>e.previous())))},i._onAttachmentUpdate=function(){const{activeWorkflow:e}=this.viewModel;e&&("create-features"===e.type?(this._attachments.updateFile(),e.previous()):this._attachments.updateAttachment().then((()=>e.previous())))},i._onAttachmentDelete=function(){const{messages:e,messagesCommon:t}=this;this._prompt={title:e.deleteAttachmentWarningTitle,message:e.deleteAttachmentWarningMessage,context:"danger",actions:{primary:{label:t.delete,action:this._onAttachmentDeleteConfirm},secondary:{label:e.keepAttachment,action:this._clearPrompt}}}},t._createClass(a,[{key:"_deleteButtonCommonInfo",get:function(){return{appearance:"outline",kind:"danger",type:"primary"}}},{key:"activeWorkflow",get:function(){return this.viewModel.activeWorkflow}},{key:"allowedWorkflows",get:function(){return this.viewModel.allowedWorkflows},set:function(e){this.viewModel.allowedWorkflows=e}},{key:"label",get:function(){return this.messages?.widgetLabel??""},set:function(e){this._overrideIfSome("label",e)}},{key:"labelOptions",get:function(){return this.viewModel.labelOptions},set:function(e){this.viewModel.labelOptions=e}},{key:"layerInfos",get:function(){return this.viewModel.layerInfos},set:function(e){this.viewModel.layerInfos=e}},{key:"snappingOptions",get:function(){return this.viewModel.snappingOptions},set:function(e){this.viewModel.snappingOptions=e}},{key:"tooltipOptions",get:function(){return this.viewModel.tooltipOptions},set:function(e){this.viewModel.tooltipOptions=e}},{key:"view",get:function(){return this.viewModel.view},set:function(e){this.viewModel.view=e}}]),a}(i.HandleOwnerMixin(w));n.__decorate([c.property()],$.prototype,"_featureForm",void 0),n.__decorate([c.property()],$.prototype,"_attachments",void 0),n.__decorate([c.property()],$.prototype,"_featureTemplates",void 0),n.__decorate([c.property()],$.prototype,"_filterText",void 0),n.__decorate([c.property()],$.prototype,"_prompt",void 0),n.__decorate([c.property()],$.prototype,"_spinner",void 0),n.__decorate([c.property()],$.prototype,"_deleteButtonCommonInfo",null),n.__decorate([c.property({readOnly:!0})],$.prototype,"activeWorkflow",null),n.__decorate([c.property()],$.prototype,"allowedWorkflows",null),n.__decorate([c.property()],$.prototype,"useDeprecatedCreateWorkflow",void 0),n.__decorate([c.property()],$.prototype,"headingLevel",void 0),n.__decorate([c.property()],$.prototype,"iconClass",void 0),n.__decorate([c.property()],$.prototype,"label",null),n.__decorate([c.property()],$.prototype,"labelOptions",null),n.__decorate([c.property()],$.prototype,"layerInfos",null),n.__decorate([c.property(),M.messageBundle("esri/widgets/Editor/t9n/Editor")],$.prototype,"messages",void 0),n.__decorate([c.property(),M.messageBundle("esri/t9n/common")],$.prototype,"messagesCommon",void 0),n.__decorate([c.property(),M.messageBundle("esri/widgets/FeatureTemplates/t9n/FeatureTemplates")],$.prototype,"messagesTemplates",void 0),n.__decorate([c.property()],$.prototype,"snappingOptions",null),n.__decorate([c.property()],$.prototype,"tooltipOptions",null),n.__decorate([c.property()],$.prototype,"supportingWidgetDefaults",void 0),n.__decorate([c.property()],$.prototype,"view",null),n.__decorate([c.property(),F.vmEvent(["workflow-cancel","workflow-commit"])],$.prototype,"viewModel",void 0),n.__decorate([c.property()],$.prototype,"visibleElements",void 0),n.__decorate([d.cast("visibleElements")],$.prototype,"castVisibleElements",null),n.__decorate([C.accessibleHandler()],$.prototype,"_onSave",null),n.__decorate([C.accessibleHandler()],$.prototype,"_onDelete",null),n.__decorate([C.accessibleHandler()],$.prototype,"_onToggleUpdateWorkflow",null),n.__decorate([C.accessibleHandler()],$.prototype,"_onBack",null),n.__decorate([C.accessibleHandler()],$.prototype,"_onAttachmentAdd",null),n.__decorate([C.accessibleHandler()],$.prototype,"_onAttachmentUpdate",null),n.__decorate([C.accessibleHandler()],$.prototype,"_onAttachmentDelete",null),$=n.__decorate([u.subclass(D)],$);return $}));
