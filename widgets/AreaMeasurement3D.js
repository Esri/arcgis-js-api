/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.18/esri/copyright.txt for details.
*/
define(["../chunks/_rollupPluginBabelHelpers","../chunks/tslib.es6","../core/has","../core/Logger","../core/accessorSupport/ensureType","../core/accessorSupport/decorators/property","../core/accessorSupport/decorators/aliasOf","../core/accessorSupport/decorators/subclass","../core/urlUtils","../core/uuid","../portal/support/resourceExtension","../core/promiseUtils","../core/unitUtils","./support/widgetUtils","./support/decorators/accessibleHandler","./support/decorators/messageBundle","./support/decorators/renderable","../chunks/index","./Widget","./AreaMeasurement3D/AreaMeasurement3DViewModel"],(function(e,s,t,r,a,i,n,o,l,u,d,c,p,m,_,v,b,y,h,g){"use strict";const w="esri-button esri-button--secondary",x="esri-button--disabled",M="esri-area-measurement-3d",j="esri-widget",f="esri-widget--panel",k="esri-area-measurement-3d__container",O="esri-area-measurement-3d__hint",U="esri-area-measurement-3d__hint-text",A="esri-area-measurement-3d__panel--error",S="esri-area-measurement-3d__measurement",D="esri-area-measurement-3d__measurement-item",L="esri-area-measurement-3d__measurement-item--disabled",B="esri-area-measurement-3d__measurement-item-title",H="esri-area-measurement-3d__measurement-item-value",$="esri-area-measurement-3d__settings",C="esri-area-measurement-3d__units",E="esri-area-measurement-3d__units-label",z="esri-area-measurement-3d__units-select esri-select",I="esri-area-measurement-3d__units-select-wrapper",P="esri-area-measurement-3d__actions",T="esri-area-measurement-3d__clear-button",V="esri-icon-measure-area";let W=function(s){function t(e,t){var r;return(r=s.call(this,e,t)||this).view=null,r.visible=null,r.iconClass=V,r.label=void 0,r.messages=null,r.messagesUnits=null,r.viewModel=new g,r.unitOptions=null,r.unit=null,r}e._inheritsLoose(t,s);var r=t.prototype;return r.render=function(){const{isSupported:e,active:s,measurement:t,state:r,unit:a}=this.viewModel,i="disabled"===r,n="ready"===r,o="measuring"===r||"measured"===r,{messages:l,messagesUnits:u}=this,d=s&&n?y.jsx("section",{key:"esri-area-measurement-3d__hint",class:O},y.jsx("p",{class:U},l.hint)):null,c=e?null:y.jsx("section",{key:"esri-area-measurement-3d__unsupported",class:A},y.jsx("p",null,l.unsupported)),m=(e,s,t)=>{switch(s.state){case"available":return y.jsx("div",{key:`${t}-enabled`,class:D},y.jsx("span",{class:B},e),y.jsx("span",{class:H},s.text));case"unavailable":return y.jsx("div",{key:`${t}-disabled`,class:this.classes(D,L)},y.jsx("span",{class:B},e));case"invalid":return y.jsx("div",{key:`${t}-enabled`,class:D},y.jsx("span",{class:B},e),y.jsx("span",{class:H},l.notApplicable))}},_=o?y.jsx("section",{key:"esri-area-measurement-3d__measurement",class:S},m(l.area,t.area,"area"),m(l.perimeterLength,t.perimeterLength,"perimeter-length")):null,v=`${this.id}__units`,b=y.jsx("label",{class:E,for:v},l.unit),h=y.jsx("div",{class:I},y.jsx("select",{class:z,id:v,onchange:this._changeUnit,bind:this,value:a},this.viewModel.unitOptions.map((e=>{var s;return y.jsx("option",{key:e,value:e},p.isMeasurementSystem(e)?u.systems[e]:null==(s=u.units[e])?void 0:s.pluralCapitalized)})))),g=o?y.jsx("section",{key:"esri-area-measurement-3d__units",class:C},b,h):null,V=o?y.jsx("div",{key:"settings",class:$},g):null,W=!e||s&&!o?null:y.jsx("div",{class:P},y.jsx("button",{disabled:i,class:this.classes(w,T,i&&x),bind:this,onclick:this._newMeasurement,type:"button"},l.newMeasurement)),q=this.visible?y.jsx("div",{class:k},c,d,V,_,W):null;return y.jsx("div",{key:"",class:this.classes(M,j,f),role:"presentation"},q)},r._newMeasurement=function(){c.ignoreAbortErrors(this.viewModel.start())},r._changeUnit=function(e){const s=e.target,t=s.options[s.selectedIndex];t&&(this.unit=t.value)},t}(h);return s.__decorate([n.aliasOf("viewModel.view")],W.prototype,"view",void 0),s.__decorate([n.aliasOf("viewModel.visible"),b.renderable()],W.prototype,"visible",void 0),s.__decorate([n.aliasOf("viewModel.active"),b.renderable()],W.prototype,"active",void 0),s.__decorate([i.property()],W.prototype,"iconClass",void 0),s.__decorate([i.property({aliasOf:{source:"messages.widgetLabel",overridable:!0}})],W.prototype,"label",void 0),s.__decorate([i.property(),b.renderable(),v.messageBundle("esri/widgets/AreaMeasurement3D/t9n/AreaMeasurement3D")],W.prototype,"messages",void 0),s.__decorate([i.property(),b.renderable(),v.messageBundle("esri/core/t9n/Units")],W.prototype,"messagesUnits",void 0),s.__decorate([i.property({type:g}),b.renderable(["viewModel.state","viewModel.unitOptions","viewModel.unit","viewModel.measurement"])],W.prototype,"viewModel",void 0),s.__decorate([n.aliasOf("viewModel.unitOptions")],W.prototype,"unitOptions",void 0),s.__decorate([n.aliasOf("viewModel.unit")],W.prototype,"unit",void 0),s.__decorate([_.accessibleHandler()],W.prototype,"_newMeasurement",null),s.__decorate([_.accessibleHandler()],W.prototype,"_changeUnit",null),W=s.__decorate([o.subclass("esri.widgets.AreaMeasurement3D")],W),W}));
