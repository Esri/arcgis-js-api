/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.19/esri/copyright.txt for details.
*/
define(["../chunks/_rollupPluginBabelHelpers","../chunks/tslib.es6","../core/has","../core/Logger","../core/accessorSupport/ensureType","../core/accessorSupport/decorators/property","../core/accessorSupport/decorators/aliasOf","../core/accessorSupport/decorators/subclass","../core/urlUtils","../core/uuid","../portal/support/resourceExtension","../core/promiseUtils","../core/unitUtils","./support/widgetUtils","./support/decorators/accessibleHandler","./support/decorators/messageBundle","../chunks/index","./Widget","./AreaMeasurement3D/AreaMeasurement3DViewModel"],(function(e,s,t,a,i,r,n,o,l,u,c,m,d,p,_,v,b,h,g){"use strict";const y="esri-area-measurement-3d",w={buttonDisabled:"esri-button--disabled",base:`${y} esri-widget esri-widget--panel`,container:`${y}__container`,hint:`${y}__hint`,hintText:`${y}__hint-text`,panelError:`${y}__panel--error`,measurement:`${y}__measurement`,measurementItem:`${y}__measurement-item`,measurementItemDisabled:`${y}__measurement-item--disabled`,measurementItemTitle:`${y}__measurement-item-title`,measurementItemValue:`${y}__measurement-item-value`,settings:`${y}__settings`,units:`${y}__units`,unitsLabel:`${y}__units-label`,unitsSelect:`${y}__units-select esri-select`,unitsSelectWrapper:`${y}__units-select-wrapper`,actionSection:`${y}__actions`,newMeasurementButton:`${y}__clear-button esri-button esri-button--primary`,widgetIcon:"esri-icon-measure-area"};let x=function(s){function t(e,t){var a;return(a=s.call(this,e,t)||this).view=null,a.visible=null,a.iconClass=w.widgetIcon,a.label=void 0,a.messages=null,a.messagesUnits=null,a.viewModel=new g,a.unitOptions=null,a.unit=null,a}e._inheritsLoose(t,s);var a=t.prototype;return a.render=function(){const{isSupported:e,active:s,measurement:t,state:a,unit:i}=this.viewModel,r="disabled"===a,n="ready"===a,o="measuring"===a||"measured"===a,{messages:l,messagesUnits:u}=this,c=s&&n?b.jsx("section",{key:"esri-area-measurement-3d__hint",class:w.hint},b.jsx("p",{class:w.hintText},l.hint)):null,m=e?null:b.jsx("section",{key:"esri-area-measurement-3d__unsupported",class:w.panelError},b.jsx("p",null,l.unsupported)),p=(e,s,t)=>{switch(s.state){case"available":return b.jsx("div",{key:`${t}-enabled`,class:w.measurementItem},b.jsx("span",{class:w.measurementItemTitle},e),b.jsx("span",{class:w.measurementItemValue},s.text));case"unavailable":return b.jsx("div",{key:`${t}-disabled`,class:this.classes(w.measurementItem,w.measurementItemDisabled)},b.jsx("span",{class:w.measurementItemTitle},e));case"invalid":return b.jsx("div",{key:`${t}-enabled`,class:w.measurementItem},b.jsx("span",{class:w.measurementItemTitle},e),b.jsx("span",{class:w.measurementItemValue},l.notApplicable))}},_=o?b.jsx("section",{key:"esri-area-measurement-3d__measurement",class:w.measurement},p(l.area,t.area,"area"),p(l.perimeterLength,t.perimeterLength,"perimeter-length")):null,v=`${this.id}__units`,h=b.jsx("label",{class:w.unitsLabel,for:v},l.unit),g=b.jsx("div",{class:w.unitsSelectWrapper},b.jsx("select",{class:w.unitsSelect,id:v,onchange:this._changeUnit,bind:this,value:i},this.viewModel.unitOptions.map((e=>{var s;return b.jsx("option",{key:e,value:e},d.isMeasurementSystem(e)?u.systems[e]:null==(s=u.units[e])?void 0:s.pluralCapitalized)})))),y=o?b.jsx("section",{key:"esri-area-measurement-3d__units",class:w.units},h,g):null,x=o?b.jsx("div",{key:"settings",class:w.settings},y):null,j=!e||s&&!o?null:b.jsx("div",{class:w.actionSection},b.jsx("button",{disabled:r,class:this.classes(w.newMeasurementButton,r&&w.buttonDisabled),bind:this,onclick:this._newMeasurement,type:"button"},l.newMeasurement)),M=this.visible?b.jsx("div",{class:w.container},m,c,x,_,j):null;return b.jsx("div",{key:this,class:w.base,role:"presentation"},M)},a._newMeasurement=function(){m.ignoreAbortErrors(this.viewModel.start())},a._changeUnit=function(e){const s=e.target,t=s.options[s.selectedIndex];t&&(this.unit=t.value)},t}(h);return s.__decorate([n.aliasOf("viewModel.view")],x.prototype,"view",void 0),s.__decorate([n.aliasOf("viewModel.visible")],x.prototype,"visible",void 0),s.__decorate([n.aliasOf("viewModel.active")],x.prototype,"active",void 0),s.__decorate([r.property()],x.prototype,"iconClass",void 0),s.__decorate([r.property({aliasOf:{source:"messages.widgetLabel",overridable:!0}})],x.prototype,"label",void 0),s.__decorate([r.property(),v.messageBundle("esri/widgets/AreaMeasurement3D/t9n/AreaMeasurement3D")],x.prototype,"messages",void 0),s.__decorate([r.property(),v.messageBundle("esri/core/t9n/Units")],x.prototype,"messagesUnits",void 0),s.__decorate([r.property({type:g})],x.prototype,"viewModel",void 0),s.__decorate([n.aliasOf("viewModel.unitOptions")],x.prototype,"unitOptions",void 0),s.__decorate([n.aliasOf("viewModel.unit")],x.prototype,"unit",void 0),s.__decorate([_.accessibleHandler()],x.prototype,"_newMeasurement",null),s.__decorate([_.accessibleHandler()],x.prototype,"_changeUnit",null),x=s.__decorate([o.subclass("esri.widgets.AreaMeasurement3D")],x),x}));
