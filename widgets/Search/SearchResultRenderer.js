/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.18/esri/copyright.txt for details.
*/
define(["../../chunks/_rollupPluginBabelHelpers","../../chunks/tslib.es6","../../core/has","../../core/Logger","../../core/accessorSupport/ensureType","../../core/accessorSupport/decorators/property","../../core/accessorSupport/decorators/subclass","../../core/urlUtils","../../core/uuid","../../portal/support/resourceExtension","../support/widgetUtils","../support/decorators/accessibleHandler","../support/decorators/messageBundle","../support/decorators/renderable","../../chunks/index","../Widget","./SearchViewModel"],(function(e,s,r,t,l,o,n,i,u,c,d,a,h,_,p,M,v){"use strict";const w="esri-search-result-renderer esri-widget",R="esri-widget__anchor",m="esri-search-result-renderer__more-results--show-more-results",k="esri-search-result-renderer__more-results",g="esri-search-result-renderer__more-results-list",y="esri-search-result-renderer__more-results-item",f="esri-search-result-renderer__more-results-list-header";let x=function(s){function r(e,r){var t;return(t=s.call(this,e,r)||this).messages=null,t.showMoreResultsOpen=!1,t.viewModel=null,t}e._inheritsLoose(r,s);var t=r.prototype;return t.render=function(){const e={[m]:this.showMoreResultsOpen};return p.jsx("div",{class:w},p.jsx("div",{key:"esri-search-renderer__container",class:this.classes(k,e)},this.renderSearchResultName(),this.renderMoreResults()))},t.renderMoreResults=function(){return p.jsx("div",{key:"esri-search-renderer__more-results"},this.renderMoreResultsButton(),this.renderMoreResultsLists())},t.renderSearchResultName=function(){var e;const s=null==(e=this.viewModel)?void 0:e.selectedResult,r=s&&s.name||"";return p.jsx("div",{key:"esri-search-renderer__result-name",class:y},r)},t.renderMoreResultsLists=function(){var e;const s=null==(e=this.viewModel)?void 0:e.results,{resultCount:r}=this.viewModel;if(r<2)return null;const t=s.map((e=>this.renderMoreResultsList(e)));return p.jsx("div",{key:"esri-search-renderer__more-results-container",class:g},t)},t.renderMoreResultsButton=function(){const{messages:e}=this,{resultCount:s}=this.viewModel;return s<2?null:p.jsx("div",{key:"esri-search-renderer__more-results-button",class:y},p.jsx("a",{class:R,href:"#",bind:this,onclick:this._showMoreResultsClick,onkeydown:this._showMoreResultsClick},this.showMoreResultsOpen?e.hideMoreResults:e.showMoreResults))},t.renderMoreResultsHeader=function(e,s){return p.jsx("div",{key:`esri-search-result-renderer__header-${s}`,class:f},e)},t.renderMoreResultsList=function(e){var s,r;const{results:t}=e,l=t.length,o=!!l,n=null==(s=this.viewModel)?void 0:s.selectedResult,i=1===l&&t[0]===n,u=this._getSourceName(e.source,e.sourceIndex),c=(null==(r=this.viewModel)?void 0:r.results.length)>1&&!i?this.renderMoreResultsHeader(u,e.sourceIndex):null,d=o&&t.map(((e,s)=>this.renderMoreResultsListItem(e,s))),a=o&&!i?p.jsx("ul",{key:`esri-search-result-renderer__list-${e.sourceIndex}`},d):null;return o?p.jsx("div",{key:`esri-search-result-renderer__results-${e.sourceIndex}`},c,a):null},t.renderMoreResultsListItem=function(e,s){return e!==this.get("viewModel.selectedResult")?p.jsx("li",{key:`esri-search-result-renderer__list-item-${s}`},p.jsx("a",{class:R,href:"#",tabindex:"0",bind:this,"data-result":e,onclick:this._selectResultClick,onkeydown:this._selectResultClick},e.name)):null},t._showMoreResultsClick=function(e){e.preventDefault(),this.showMoreResultsOpen=!this.showMoreResultsOpen;const s=this.get("viewModel.view.popup");s&&s.reposition()},t._selectResultClick=function(e){e.preventDefault();const s=e.currentTarget["data-result"];this.viewModel&&this.viewModel.select(s)},t._getSourceName=function(e,s){return s===v.ALL_INDEX?this.messages.all:e.name},r}(M);return s.__decorate([o.property(),_.renderable(),h.messageBundle("esri/widgets/Search/t9n/Search")],x.prototype,"messages",void 0),s.__decorate([_.renderable(),o.property()],x.prototype,"showMoreResultsOpen",void 0),s.__decorate([o.property(),_.renderable(["viewModel.results","viewModel.selectedResult","viewModel.resultCount"])],x.prototype,"viewModel",void 0),s.__decorate([a.accessibleHandler()],x.prototype,"_showMoreResultsClick",null),s.__decorate([a.accessibleHandler()],x.prototype,"_selectResultClick",null),x=s.__decorate([n.subclass("esri.widgets.Search.SearchResultRenderer")],x),x}));
