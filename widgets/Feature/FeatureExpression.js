/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
define(["../../chunks/_rollupPluginBabelHelpers","../../chunks/tslib.es6","../../core/watchUtils","../../core/accessorSupport/decorators/property","../../core/arrayUtils","../../core/has","../../core/accessorSupport/ensureType","../../core/accessorSupport/decorators/subclass","../Widget","./FeatureContent","./FeatureFields","./FeatureMedia","./FeatureExpression/FeatureExpressionViewModel","../support/widgetUtils","../../core/Logger","../support/jsxFactory"],(function(e,t,n,i,o,s,r,l,a,d,c,u,p,g,h,v){"use strict";const w={iconLoading:"esri-icon-loading-indicator esri-rotating",base:"esri-feature-expression",loadingSpinnerContainer:"esri-feature__loading-container",spinner:"esri-feature__loading-spinner"};let _=function(t){function i(e,n){var i;return(i=t.call(this,e,n)||this).viewModel=new p,i}e._inheritsLoose(i,t);var o=i.prototype;return o.initialize=function(){n.init(this,"viewModel.contentElementViewModel",(()=>this._setupExpressionWidget()))},o.destroy=function(){var e;null==(e=this._contentWidget)||e.destroy(),this._contentWidget=null},o.renderLoading=function(){return v.tsx("div",{key:"loading-container",class:w.loadingSpinnerContainer},v.tsx("span",{class:this.classes(w.iconLoading,w.spinner)}))},o.render=function(){var e;const{state:t}=this.viewModel;return v.tsx("div",{class:w.base},"loading"===t?this.renderLoading():"disabled"===t?null:null==(e=this._contentWidget)?void 0:e.render())},o._setupExpressionWidget=function(){var e;const{contentElementViewModel:t,contentElement:n}=this.viewModel,i=null==n?void 0:n.type;null==(e=this._contentWidget)||e.destroy(),this._contentWidget=null;const o=t?"fields"===i?new c({viewModel:t}):"media"===i?new u({viewModel:t}):"text"===i?new d({viewModel:t}):null:null;this._contentWidget=o,this.scheduleRender()},i}(a);t.__decorate([i.property({type:p})],_.prototype,"viewModel",void 0),_=t.__decorate([l.subclass("esri.widgets.Feature.FeatureExpression")],_);return _}));
