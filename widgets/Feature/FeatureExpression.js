/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.23/esri/copyright.txt for details.
*/
define(["../../chunks/_rollupPluginBabelHelpers","../../chunks/tslib.es6","../../core/watchUtils","../../core/accessorSupport/decorators/property","../../core/arrayUtils","../../core/has","../../core/accessorSupport/ensureType","../../core/accessorSupport/decorators/subclass","../Widget","./FeatureContent","./FeatureFields","./FeatureMedia","./FeatureExpression/FeatureExpressionViewModel","../support/widgetUtils","../../core/Logger","../support/jsxFactory"],(function(e,t,n,i,o,s,r,d,l,a,c,u,p,g,h,w){"use strict";const _={iconLoading:"esri-icon-loading-indicator esri-rotating",base:"esri-feature-expression",loadingSpinnerContainer:"esri-feature__loading-container",spinner:"esri-feature__loading-spinner"};let v=function(t){function i(e,n){var i;return(i=t.call(this,e,n)||this).viewModel=new p,i}e._inheritsLoose(i,t);var o=i.prototype;return o.initialize=function(){n.init(this,"viewModel.contentElementViewModel",(()=>this._setupExpressionWidget()))},o.destroy=function(){this._destroyContentWidget()},o.renderLoading=function(){return w.tsx("div",{key:"loading-container",class:_.loadingSpinnerContainer},w.tsx("span",{class:this.classes(_.iconLoading,_.spinner)}))},o.render=function(){var e;const{state:t}=this.viewModel;return w.tsx("div",{class:_.base},"loading"===t?this.renderLoading():"disabled"===t?null:null==(e=this._contentWidget)?void 0:e.render())},o._destroyContentWidget=function(){const{_contentWidget:e}=this;e&&(e.viewModel=null,e.destroy()),this._contentWidget=null},o._setupExpressionWidget=function(){const{contentElementViewModel:e,contentElement:t}=this.viewModel,n=null==t?void 0:t.type;this._destroyContentWidget();const i=e?"fields"===n?new c({viewModel:e}):"media"===n?new u({viewModel:e}):"text"===n?new a({viewModel:e}):null:null;this._contentWidget=i,this.scheduleRender()},i}(l);t.__decorate([i.property({type:p})],v.prototype,"viewModel",void 0),v=t.__decorate([d.subclass("esri.widgets.Feature.FeatureExpression")],v);return v}));
