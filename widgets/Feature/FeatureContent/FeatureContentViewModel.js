/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.26/esri/copyright.txt for details.
*/
define(["../../../chunks/_rollupPluginBabelHelpers","../../../chunks/tslib.es6","../../../Graphic","../../../core/Accessor","../../../core/HandleOwner","../../../core/reactiveUtils","../../../core/accessorSupport/decorators/property","../../../core/accessorSupport/ensureType","../../../core/arrayUtils","../../../core/accessorSupport/decorators/subclass","../support/featureUtils"],(function(e,t,r,o,n,a,s,c,i,l,p){"use strict";let d=function(t){function r(e){var r;return(r=t.call(this,e)||this)._loadingPromise=null,r.created=null,r.creator=null,r.destroyer=null,r.graphic=null,r.handles.add(a.watch((()=>r.creator),(e=>{r._destroyContent(),r._createContent(e)}),a.initial)),r}e._inheritsLoose(r,t);var o=r.prototype;return o.destroy=function(){this._destroyContent()},o._destroyContent=function(){const{created:e,graphic:t,destroyer:r}=this;e&&t&&(p.graphicCallback(r,{graphic:t}).catch((()=>null)),this._set("created",null))},o._createContent=function(){var t=e._asyncToGenerator((function*(e){const t=this.graphic;if(!t||!e)return;const r=p.graphicCallback(e,{graphic:t}).catch((()=>null));this._loadingPromise=r,this.notifyChange("state");const o=yield r;r===this._loadingPromise&&(this._loadingPromise=null,this.notifyChange("state"),this._set("created",o))}));function r(e){return t.apply(this,arguments)}return r}(),e._createClass(r,[{key:"state",get:function(){return this._loadingPromise?"loading":"ready"}}]),r}(n.HandleOwnerMixin(o));t.__decorate([s.property({readOnly:!0})],d.prototype,"created",void 0),t.__decorate([s.property()],d.prototype,"creator",void 0),t.__decorate([s.property()],d.prototype,"destroyer",void 0),t.__decorate([s.property({type:r})],d.prototype,"graphic",void 0),t.__decorate([s.property({readOnly:!0})],d.prototype,"state",null),d=t.__decorate([l.subclass("esri.widgets.Feature.FeatureContent.FeatureContentViewModel")],d);return d}));
