/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.18/esri/copyright.txt for details.
*/
define(["../../../chunks/_rollupPluginBabelHelpers","../../../chunks/tslib.es6","../../../core/has","../../../core/Logger","../../../core/accessorSupport/ensureType","../../../core/accessorSupport/decorators/property","../../../core/accessorSupport/decorators/subclass","../../../core/urlUtils","../../../core/uuid","../../../portal/support/resourceExtension","../../../core/Accessor","../../../Graphic","../../../core/watchUtils","../../../core/HandleOwner","../support/featureUtils"],(function(e,t,r,o,s,a,n,c,i,l,p,d,u,h,y){"use strict";let _=function(t){function r(r){var o;return(o=t.call(this,r)||this)._loadingPromise=null,o.created=null,o.creator=null,o.destroyer=null,o.graphic=null,o.handles.add(u.init(e._assertThisInitialized(o),"creator",(e=>{o._destroyContent(),o._createContent(e)}))),o}e._inheritsLoose(r,t);var o=r.prototype;return o.destroy=function(){this._destroyContent()},o._destroyContent=function(){const{created:e,graphic:t,destroyer:r}=this;e&&(y.graphicCallback(r,{graphic:t}).catch((()=>null)),this._set("created",null))},o._createContent=async function(e){const{graphic:t}=this,r=y.graphicCallback(e,{graphic:t}).catch((()=>null));this._loadingPromise=r,this.notifyChange("state");const o=await r;r===this._loadingPromise&&(this._loadingPromise=null,this.notifyChange("state"),this._set("created",o))},e._createClass(r,[{key:"state",get:function(){return this._loadingPromise?"loading":"ready"}}]),r}(h.HandleOwnerMixin(p));return t.__decorate([a.property({readOnly:!0})],_.prototype,"created",void 0),t.__decorate([a.property()],_.prototype,"creator",void 0),t.__decorate([a.property()],_.prototype,"destroyer",void 0),t.__decorate([a.property({type:d})],_.prototype,"graphic",void 0),t.__decorate([a.property({readOnly:!0})],_.prototype,"state",null),_=t.__decorate([n.subclass("esri.widgets.Feature.FeatureContent.FeatureContentViewModel")],_),_}));
