/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.20/esri/copyright.txt for details.
*/
define(["../../../chunks/_rollupPluginBabelHelpers","../../../chunks/tslib.es6","../../../Graphic","../../../core/Accessor","../../../core/HandleOwner","../../../core/watchUtils","../../../core/accessorSupport/decorators/property","../../../core/has","../../../core/accessorSupport/ensureType","../../../core/Logger","../../../core/accessorSupport/decorators/subclass","../support/featureUtils"],(function(e,t,r,o,n,a,s,c,i,l,p,d){"use strict";let u=function(t){function r(r){var o;return(o=t.call(this,r)||this)._loadingPromise=null,o.created=null,o.creator=null,o.destroyer=null,o.graphic=null,o.handles.add(a.init(e._assertThisInitialized(o),"creator",(e=>{o._destroyContent(),o._createContent(e)}))),o}e._inheritsLoose(r,t);var o=r.prototype;return o.destroy=function(){this._destroyContent()},o._destroyContent=function(){const{created:e,graphic:t,destroyer:r}=this;e&&(d.graphicCallback(r,{graphic:t}).catch((()=>null)),this._set("created",null))},o._createContent=function(){var t=e._asyncToGenerator((function*(e){const{graphic:t}=this,r=d.graphicCallback(e,{graphic:t}).catch((()=>null));this._loadingPromise=r,this.notifyChange("state");const o=yield r;r===this._loadingPromise&&(this._loadingPromise=null,this.notifyChange("state"),this._set("created",o))}));function r(e){return t.apply(this,arguments)}return r}(),e._createClass(r,[{key:"state",get:function(){return this._loadingPromise?"loading":"ready"}}]),r}(n.HandleOwnerMixin(o));return t.__decorate([s.property({readOnly:!0})],u.prototype,"created",void 0),t.__decorate([s.property()],u.prototype,"creator",void 0),t.__decorate([s.property()],u.prototype,"destroyer",void 0),t.__decorate([s.property({type:r})],u.prototype,"graphic",void 0),t.__decorate([s.property({readOnly:!0})],u.prototype,"state",null),u=t.__decorate([p.subclass("esri.widgets.Feature.FeatureContent.FeatureContentViewModel")],u),u}));
