/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.19/esri/copyright.txt for details.
*/
define(["../../chunks/_rollupPluginBabelHelpers","../../chunks/tslib.es6","../../core/has","../../core/Logger","../../core/accessorSupport/ensureType","../../core/accessorSupport/decorators/property","../../core/accessorSupport/decorators/aliasOf","../../core/accessorSupport/decorators/subclass","../../core/urlUtils","../../core/uuid","../../portal/support/resourceExtension","../../core/watchUtils","../support/widgetUtils","../support/decorators/messageBundle","../../chunks/index","../Widget","./support/FeatureElementInfo","./FeatureFields/FeatureFieldsViewModel","../support/uriUtils"],(function(e,t,s,r,i,o,l,n,a,d,u,f,c,p,_,m,h,v,y){"use strict";const w={base:"esri-feature-fields",fieldHeader:"esri-feature-fields__field-header",fieldData:"esri-feature-fields__field-data",fieldDataDate:"esri-feature-fields__field-data--date",esriTable:"esri-widget__table"};let I=function(t){function s(e,s){var r;return(r=t.call(this,e,s)||this)._featureElementInfo=null,r.attributes=null,r.description=null,r.expressionInfos=null,r.fieldInfos=null,r.title=null,r.viewModel=new v,r.messages=null,r.messagesURIUtils=null,r}e._inheritsLoose(s,t);var r=s.prototype;return r.initialize=function(){this._featureElementInfo=new h,f.init(this,["viewModel.description","viewModel.title"],(()=>this._setupFeatureElementInfo()))},r.destroy=function(){this._featureElementInfo.destroy()},r.renderFieldInfo=function(e,t){const{attributes:s}=this.viewModel,r=e.fieldName,i=e.label||r,o=s?null==s[r]?"":s[r]:"",l=!(!e.format||!e.format.dateFormat),n="number"==typeof o&&!l?this._forceLTR(o):y.autoLink(this.messagesURIUtils,o),a={[w.fieldDataDate]:l};return _.jsx("tr",{key:`fields-element-info-row-${r}-${t}`},_.jsx("th",{key:`fields-element-info-row-header-${r}-${t}`,class:w.fieldHeader,innerHTML:i}),_.jsx("td",{key:`fields-element-info-row-data-${r}-${t}`,class:this.classes(w.fieldData,a),innerHTML:n}))},r.renderFields=function(){const{formattedFieldInfos:e}=this.viewModel;return e.length?_.jsx("table",{class:w.esriTable,summary:this.messages.fieldsSummary},_.jsx("tbody",null,e.map(((e,t)=>this.renderFieldInfo(e,t))))):null},r.render=function(){var e;return _.jsx("div",{class:w.base},null==(e=this._featureElementInfo)?void 0:e.render(),this.renderFields())},r._setupFeatureElementInfo=function(){const{description:e,title:t}=this;this._featureElementInfo.set({description:e,title:t})},r._forceLTR=function(e){return`&lrm;${e}`},s}(m);return t.__decorate([l.aliasOf("viewModel.attributes")],I.prototype,"attributes",void 0),t.__decorate([l.aliasOf("viewModel.description")],I.prototype,"description",void 0),t.__decorate([l.aliasOf("viewModel.expressionInfos")],I.prototype,"expressionInfos",void 0),t.__decorate([l.aliasOf("viewModel.fieldInfos")],I.prototype,"fieldInfos",void 0),t.__decorate([l.aliasOf("viewModel.title")],I.prototype,"title",void 0),t.__decorate([o.property({type:v})],I.prototype,"viewModel",void 0),t.__decorate([o.property(),p.messageBundle("esri/widgets/Feature/t9n/Feature")],I.prototype,"messages",void 0),t.__decorate([o.property(),p.messageBundle("esri/widgets/support/t9n/uriUtils")],I.prototype,"messagesURIUtils",void 0),I=t.__decorate([n.subclass("esri.widgets.Feature.FeatureFields")],I),I}));
