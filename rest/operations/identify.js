/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.23/esri/copyright.txt for details.
*/
define(["exports","../../core/maybe","../../geometry/support/jsonUtils","../utils"],(function(e,t,r,n){"use strict";const i=e=>e.spatialReference.wkid||JSON.stringify(e.spatialReference);function a(e,a){const{dpi:s,gdbVersion:o,geometry:l,geometryPrecision:y,height:m,layerOption:f,mapExtent:u,maxAllowableOffset:c,returnFieldName:d,returnGeometry:g,returnUnformattedValues:p,returnZ:x,spatialReference:O,timeExtent:S,tolerance:N,width:$}=e.toJSON(),{dynamicLayers:b,layerDefs:J,layerIds:R}=n.toDynamicLayersJSON(e),w=a&&t.isSome(a.geometry)?a.geometry:null,T={geometryPrecision:y,maxAllowableOffset:c,returnFieldName:d,returnGeometry:g,returnUnformattedValues:p,returnZ:x,tolerance:N},j=w&&w.toJSON()||l;if(T.imageDisplay=`${$},${m},${s}`,o&&(T.gdbVersion=o),j&&(delete j.spatialReference,T.geometry=JSON.stringify(j),T.geometryType=r.getJsonType(j)),O?T.sr=O.wkid||JSON.stringify(O):j&&j.spatialReference?T.sr=i(j):u&&u.spatialReference&&(T.sr=i(u)),T.time=S?[S.start,S.end].join(","):null,u){const{xmin:e,ymin:t,xmax:r,ymax:n}=u;T.mapExtent=`${e},${t},${r},${n}`}return J&&(T.layerDefs=J),b&&!J&&(T.dynamicLayers=b),T.layers=f,R&&!b&&(T.layers+=`:${R.join(",")}`),T}e.identifyToIdentifyRESTParameters=a,Object.defineProperties(e,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})}));
