/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.23/esri/copyright.txt for details.
*/
define(["exports","../chunks/_rollupPluginBabelHelpers","../request","../geometry/support/normalizeUtils","./utils","./operations/identify","./support/IdentifyParameters","./support/IdentifyResult"],(function(e,t,r,n,s,o,u,i){"use strict";function l(e,t,r){return a.apply(this,arguments)}function a(){return(a=t._asyncToGenerator((function*(e,t,u){const i=(t=p(t)).geometry?[t.geometry]:[],l=s.parseUrl(e);return l.path+="/identify",n.normalizeCentralMeridian(i).then((e=>{const n=o.identifyToIdentifyRESTParameters(t,{geometry:e&&e[0]}),i=s.encode({...l.query,f:"json",...n}),a=s.asValidOptions(i,u);return r(l.path,a).then(f).then((e=>c(e,t.sublayers)))}))}))).apply(this,arguments)}function f(e){const t=e.data;t.results=t.results||[];const r={results:[]};return r.results=t.results.map((e=>i.fromJSON(e))),r}function p(e){return e=u.from(e)}function c(e,t){if(null==t||!t.length)return e;for(const r of e.results){const e=t.find((e=>r.layerId===e.id));r.feature.sourceLayer=e}return e}e.identify=l,Object.defineProperties(e,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})}));
