/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.25/esri/copyright.txt for details.
*/
define(["exports","../chunks/_rollupPluginBabelHelpers","../request","../geometry/support/normalizeUtils","./utils","./operations/identify","./support/IdentifyParameters","./support/IdentifyResult"],(function(e,t,r,n,s,o,i,u){"use strict";function a(e,t,r){return l.apply(this,arguments)}function l(){return(l=t._asyncToGenerator((function*(e,t,i){const u=(t=c(t)).geometry?[t.geometry]:[],a=s.parseUrl(e);return a.path+="/identify",n.normalizeCentralMeridian(u).then((e=>{const n=o.identifyToIdentifyRESTParameters(t,{geometry:e&&e[0]}),u=s.encode({...a.query,f:"json",...n}),l=s.asValidOptions(u,i);return r(a.path,l).then(f).then((e=>d(e,t.sublayers)))}))}))).apply(this,arguments)}function f(e){const t=e.data;return t.results=t.results||[],t.exceededTransferLimit=Boolean(t.exceededTransferLimit),t.results=t.results.map((e=>u.fromJSON(e))),t}function c(e){return e=i.from(e)}function d(e,t){if(!t?.length)return e;const r=new Map;function n(e){r.set(e.id,e),e.sublayers&&e.sublayers.forEach(n)}t.forEach(n);for(const s of e.results)s.feature.sourceLayer=r.get(s.layerId);return e}e.identify=a,Object.defineProperties(e,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})}));
