/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.26/esri/copyright.txt for details.
*/
define(["exports","../chunks/_rollupPluginBabelHelpers","../request","../geometry/support/normalizeUtils","./networkService","./utils","./route/utils","./support/ClosestFacilitySolveResult","./support/FeatureSet"],(function(e,r,t,i,s,o,l,n,a){"use strict";function c(e){return e instanceof a}function u(e,r,t){return p.apply(this,arguments)}function p(){return(p=r._asyncToGenerator((function*(e,r,a){const u=[],p=[],f={},y={},m=o.parseUrl(e),{path:d}=m;c(r.incidents)&&s.collectGeometries(r.incidents.features,p,"incidents.features",f),c(r.facilities)&&s.collectGeometries(r.facilities.features,p,"facilities.features",f),c(r.pointBarriers)&&s.collectGeometries(r.pointBarriers.features,p,"pointBarriers.features",f),c(r.polylineBarriers)&&s.collectGeometries(r.polylineBarriers.features,p,"polylineBarriers.features",f),c(r.polygonBarriers)&&s.collectGeometries(r.polygonBarriers.features,p,"polygonBarriers.features",f);const B=yield i.normalizeCentralMeridian(p);for(const t in f){const e=f[t];u.push(t),y[t]=B.slice(e[0],e[1])}if(s.isInputGeometryZAware(y,u)){let e=null;try{e=yield s.fetchServiceDescription(d,r.apiKey,a)}catch{}e&&!e.hasZ&&s.dropZValuesOffInputGeometry(y,u)}for(const t in y)y[t].forEach(((e,i)=>{r.get(t)[i].geometry=e}));const g={...a,query:{...m.query,...l.closestFacilityParametersToQueryParameters(r),f:"json"}},{data:h}=yield t(`${d}/solveClosestFacility`,g);return n.fromJSON(h)}))).apply(this,arguments)}e.solve=u,Object.defineProperty(e,Symbol.toStringTag,{value:"Module"})}));
