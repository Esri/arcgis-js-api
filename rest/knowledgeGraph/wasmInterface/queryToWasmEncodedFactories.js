/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.24/esri/copyright.txt for details.
*/
import"../../../geometry.js";import e from"../../../core/Error.js";import r from"../../../geometry/Multipoint.js";import t from"../../../geometry/Point.js";import o from"../../../geometry/Polygon.js";import n from"../../../geometry/Polyline.js";import s from"../../../geometry/Geometry.js";function a(s,a){if(s instanceof r)return f(s,a);if(s instanceof t)return l(s,a);if(s instanceof n||s instanceof o)return c(s,a);throw new e("knowledge-graph:unsupported-geometry","Only Point, Multipoint, Polyline, and Polygon geometry are supported by ArcGIS Knowledge",{geometry:s})}function i(e,r){const t=new r.ArrayValue;return e.forEach((e=>{t.add_value(m(e,r))})),t}function y(e,r){const t=new r.ObjectValue;for(const[o,n]of Object.entries(e))t.set_key_value(o,m(n,r));return t}function m(e,r){if(null==e)return"";if("object"!=typeof e)return e;if(e instanceof Date)return e;if(e instanceof s)return a(e,r);if(Array.isArray(e)){const t=new r.ArrayValue;return e.forEach((e=>{t.add_value(m(e,r))})),t}return y(e,r)}function c(e,r){const t=new r.GeometryValue;t.has_z=e.hasZ,t.has_m=e.hasM;const s=[],a=[];let i=[];e instanceof n?(t.geometry_type=r.esriGeometryType.esriGeometryPolyline,i=e.paths):e instanceof o&&(t.geometry_type=r.esriGeometryType.esriGeometryPolygon,i=e.rings);let y=0,m=0;return i.forEach((e=>{let r=0;e.forEach((e=>{r++,e.forEach((e=>{s[m]=e,m++}))})),a[y]=r,y++})),t.coords=new Float64Array(s),t.lengths=new Uint32Array(a),t}function f(e,r){const t=new r.GeometryValue;t.geometry_type=t.geometry_type=r.esriGeometryType.esriGeometryMultipoint,t.has_z=e.hasZ,t.has_m=e.hasM;const o=[],n=[];n[0]=e.points.length;let s=0;return e.points.forEach((e=>{e.forEach((e=>{o[s]=e,s++}))})),t.coords=new Float64Array(o),t.lengths=new Uint32Array(n),t}function l(e,r){const t=new r.GeometryValue;t.geometry_type=r.esriGeometryType.esriGeometryPoint,t.has_z=e.hasZ,t.has_m=e.hasM;const o=[],n=[];n[0]=1,o[0]=e.x,o[1]=e.y;let s=2;return e.hasZ&&(o[s]=e.z,s++),e.hasM&&(o[s]=e.m,s++),t.coords=new Float64Array(o),t.lengths=new Uint32Array(n),t}export{i as bindParamArrayToWasm,y as bindParamObjectToWasm,a as geometryToWasm};
