/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.25/esri/copyright.txt for details.
*/
define(["exports","../../../core/Logger","../Entity","../GraphObject","../ObjectValue","../Path","../Relationship","./KnowledgeWasmInterface","./WasmQueryWrapperInterfaces","./wasmToGeometryFactories"],(function(e,t,r,n,o,s,a,u,l,i){"use strict";const p=t.getLogger("esri.rest.knowledgeGraph.WasmToQueryResponseObjConstructors");function y(e,t){const r=[],n=e.count();for(let o=0;o<n;o++){const n=e.get_value_at(o);r.push(c(n,t))}return r}function c(e,t){if(null==e)return null;if("object"!=typeof e)return e;if("getDate"in e)return e;if("geometry_type"in e)switch(e.geometry_type.value){case null:return null;case u.WasmGeometryTypeCodes.ESRI_GEOMETRY_POINT:return i.wasmToPointGeometry(e);case u.WasmGeometryTypeCodes.ESRI_GEOMETRY_MULTIPOINT:return i.wasmToMultipointGeometry(e);case u.WasmGeometryTypeCodes.ESRI_GEOMETRY_POLYLINE:return i.wasmToPolylineGeometry(e);case u.WasmGeometryTypeCodes.ESRI_GEOMETRY_POLYGON:return i.wasmToPolygonGeometry(e);case u.WasmGeometryTypeCodes.ESRI_GEOMETRY_ENVELOPE:case u.WasmGeometryTypeCodes.ESRI_GEOMETRY_MULTI_PATCH:return p.warnOnce("Envelope and Multipatch are not supported on knowledge entities, but one of those geometry types was detected.  Result interpreted as null"),null;case u.WasmGeometryTypeCodes.ESRI_GEOMETRY_NULL:case u.WasmGeometryTypeCodes.ESRI_GEOMETRY_ANY:default:return p.warnOnce("Unknown or blank geometry type returned - Result interpreted as null"),null}else{if(!("object_value_type"in e))return p.warnOnce("A decoded value came back of a type that is not supported.  Result interpreted as null"),null;switch(e.object_value_type.value){case l.WasmGraphQueryResponseTypeCodes.OBJECT:return _(e,t);case l.WasmGraphQueryResponseTypeCodes.ENTITY:return d(e,t);case l.WasmGraphQueryResponseTypeCodes.RELATIONSHIP:return G(e,t);case l.WasmGraphQueryResponseTypeCodes.PATH:return E(e,t);case l.WasmGraphQueryResponseTypeCodes.ARRAY:return y(e,t);default:return p.warnOnce("Unknown graph object type detected!  Result interpreted as null"),null}}}function d(e,t){const n=e.type_name,o=T(e,t),s=t.globalIdField&&o.properties?o.properties[t.globalIdField]:"";return new r(Object.assign({typeName:n,id:s},o))}function m(e,t){return new n(T(e,t))}function T(e,t){const r={},n=e.key_count();for(let o=0;o<n;o++)r[e.get_key_at(o)]=c(e.get_value_at(o),t);return{properties:r}}function _(e,t){return new o(T(e,t))}function E(e,t){const r=e.entity_count(),n=e.relationship_count(),o=[];for(let s=0;s<r;s++)o.push(d(e.get_entity_at(s),t)),s<n&&o.push(G(e.get_relationship_at(s),t));return new s({path:o})}function G(e,t){const r=e.type_name,n=T(e,t);return new a(Object.assign({typeName:r,id:t.globalIdField&&n.properties?n.properties[t.globalIdField]:"",originId:t.originEntityGlobalIdField&&n.properties?n.properties[t.originEntityGlobalIdField]:"",destinationId:t.destEntityGlobalIdField&&n.properties?n.properties[t.destEntityGlobalIdField]:""},n))}e.decodedWasmObjToQueryResponseObj=c,e.wasmArrayToArray=y,e.wasmToEntity=d,e.wasmToGraphObject=m,e.wasmToObjectValue=_,e.wasmToPath=E,e.wasmToRelationship=G,Object.defineProperties(e,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})}));
