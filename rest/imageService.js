/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.19/esri/copyright.txt for details.
*/
define(["exports","../core/maybe","../request","../geometry/support/normalizeUtils","./utils","../tasks/support/ImageIdentifyResult"],(function(t,e,s,n,a,o){"use strict";function i(t){const e=null==t?void 0:t.time;if(e&&(null!=e.start||null!=e.end)){const s=[];null!=e.start&&s.push(e.start),null!=e.end&&-1===s.indexOf(e.end)&&s.push(e.end),t.time=s.join(",")}}async function r(t,s,o){const r=a.parseUrl(t),c=s.geometry?[s.geometry]:[],u=await n.normalizeCentralMeridian(c),m=s.toJSON();i(m);const l=u&&u[0];e.isSome(l)&&(m.geometry=l.toJSON());const d=a.encode({...r.query,f:"json",...m});return a.asValidOptions(d,o)}async function c(t,e,n){const o=await r(t,e,n),i=a.parseUrl(t),{data:c}=await s(`${i.path}/computeStatisticsHistograms`,o),{statistics:u}=c;return null!=u&&u.length&&u.forEach((t=>{t.avg=t.mean,t.stddev=t.standardDeviation})),{statistics:u,histograms:c.histograms}}async function u(t,e,n){const o=await r(t,e,n),i=a.parseUrl(t),{data:c}=await s(`${i.path}/computeHistograms`,o);return{histograms:c.histograms}}async function m(t,i,r){const c=a.parseUrl(t),u=i.geometry?[i.geometry]:[];return n.normalizeCentralMeridian(u).then((t=>{const n=i.toJSON(),o=t&&t[0];e.isSome(o)&&(n.geometry=JSON.stringify(o.toJSON()));const u=a.encode({...c.query,f:"json",...n}),m=a.asValidOptions(u,r);return s(c.path+"/identify",m)})).then((t=>o.fromJSON(t.data)))}t.computeHistograms=u,t.computeStatisticsHistograms=c,t.identify=m,Object.defineProperty(t,"__esModule",{value:!0})}));
