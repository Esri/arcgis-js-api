/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.19/esri/copyright.txt for details.
*/
define(["exports","../request","../geometry/support/normalizeUtils","./utils","../core/queryUtils","./networkUtils","../tasks/support/ServiceAreaSolveResult"],(function(e,r,t,i,a,s,o){"use strict";const n=a.createQueryParamsHelper({accumulateAttributes:{name:"accumulateAttributeNames"},attributeParameterValues:!0,defaultBreaks:!0,facilities:!0,outSpatialReference:{name:"outSR",getter:e=>e.outSpatialReference.wkid},pointBarriers:{name:"barriers"},polylineBarriers:!0,polygonBarriers:!0,restrictionAttributes:{name:"restrictionAttributeNames"},returnPointBarriers:{name:"returnBarriers"},travelMode:!0});async function l(e,a,l){const u=[],c=[],f={},p={},m=i.parseUrl(e);return a.facilities&&a.facilities.features&&s.collectGeometries(a.facilities.features,c,"facilities.features",f),a.pointBarriers&&a.pointBarriers.features&&s.collectGeometries(a.pointBarriers.features,c,"pointBarriers.features",f),a.polylineBarriers&&a.polylineBarriers.features&&s.collectGeometries(a.polylineBarriers.features,c,"polylineBarriers.features",f),a.polygonBarriers&&a.polygonBarriers.features&&s.collectGeometries(a.polygonBarriers.features,c,"polygonBarriers.features",f),t.normalizeCentralMeridian(c).then((e=>{for(const r in f){const t=f[r];u.push(r),p[r]=e.slice(t[0],t[1])}return s.isInputGeometryZAware(p,u)?s.fetchServiceDescription(m.path).catch((()=>({dontCheck:!0}))):Promise.resolve({dontCheck:!0})})).then((e=>{("dontCheck"in e?e.dontCheck:e.hasZ)||s.dropZValuesOffInputGeometry(p,u);for(const r in p)p[r].forEach(((e,t)=>{a.get(r)[t].geometry=e}));let t={query:{...m.query,f:"json",...n.toQueryParams(a)}};return l&&(t={...l,...t}),r(`${m.path}/solveServiceArea`,t)})).then((e=>o.fromJSON(e.data)))}e.solve=l,Object.defineProperty(e,"__esModule",{value:!0})}));
