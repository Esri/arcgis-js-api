/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.26/esri/copyright.txt for details.
*/
define(["exports","../../chunks/_rollupPluginBabelHelpers","../../request","../../core/Error","../utils","./support/ValidateNetworkTopologyResult"],(function(t,e,o,i,n,r){"use strict";function a(t,e,o){return s.apply(this,arguments)}function s(){return(s=e._asyncToGenerator((function*(t,e,i){const a=n.parseUrl(t),s=e.toJSON();e.validationSet&&(s.validationSet=JSON.stringify(e.validationSet));const l={...s,returnEdits:!0,f:"json"},d=n.encode({...a.query,...l}),u=n.asValidOptions(d,{...i,method:"post"}),p=`${a.path}/validateNetworkTopology`,{data:c}=yield o(p,u);if(!c)return null;const y=r.fromJSON(c);return y.serviceEdits=y.serviceEdits?.map((t=>({layerId:t.id,editedFeatures:t.editedFeatures})))??[],y}))).apply(this,arguments)}function l(t,e,o){return d.apply(this,arguments)}function d(){return(d=e._asyncToGenerator((function*(t,e,r){if(!e.gdbVersion)throw new i("submit-validate-network-topology-job:missing-gdb-version","version is missing");const a=n.parseUrl(t),s=e.toJSON();e.validationSet&&(s.validationSet=JSON.stringify(e.validationSet));const l=n.asValidOptions(a.query,{query:n.encode({...s,returnEdits:!0,async:!0,f:"json"}),...r,method:"post"}),d=`${a.path}/validateNetworkTopology`,{data:u}=yield o(d,l);return u?u.statusUrl:null}))).apply(this,arguments)}t.submitValidateNetworkTopologyJob=l,t.validateNetworkTopology=a,Object.defineProperty(t,Symbol.toStringTag,{value:"Module"})}));
