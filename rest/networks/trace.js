/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.21/esri/copyright.txt for details.
*/
define(["exports","../../chunks/_rollupPluginBabelHelpers","../../request","../utils","./support/TraceResult"],(function(e,t,r,n,a){"use strict";function o(e,t,r){return s.apply(this,arguments)}function s(){return(s=t._asyncToGenerator((function*(e,t,a){const o=n.parseUrl(e),s=t.toJSON();s.traceLocations=JSON.stringify(t.traceLocations),t.resultTypes&&(s.resultTypes=JSON.stringify(t.resultTypes));const i={...s,f:"json"},c=n.encode({...o.query,...i}),u=n.asValidOptions(c,a),g=`${o.path}/trace`;return r(g,u).then((e=>l(e,t.outSpatialReference)))}))).apply(this,arguments)}function l(e,t){const{data:r}=e;if(!r)return null;const n=a.fromJSON(r.traceResults);return n.aggregatedGeometry&&t&&(n.aggregatedGeometry.line&&(n.aggregatedGeometry.line.spatialReference=t.clone()),n.aggregatedGeometry.multipoint&&(n.aggregatedGeometry.multipoint.spatialReference=t.clone()),n.aggregatedGeometry.polygon&&(n.aggregatedGeometry.polygon.spatialReference=t.clone())),n}e.trace=o,Object.defineProperty(e,"__esModule",{value:!0})}));
