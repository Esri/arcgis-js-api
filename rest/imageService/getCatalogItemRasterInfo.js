/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.25/esri/copyright.txt for details.
*/
define(["exports","../../chunks/_rollupPluginBabelHelpers","../../request","../../geometry/Extent","../../geometry/Point","../../layers/support/RasterInfo","../../layers/support/RasterStorageInfo","../utils"],(function(e,t,i,l,a,s,n,r){"use strict";function o(e,t,i){return u.apply(this,arguments)}function u(){return(u=t._asyncToGenerator((function*(e,t,o){const u=r.parseUrl(e),p=r.encode({...u?.query,f:"json"}),d=r.asValidOptions(p,o),c=`${u?.path}/${t}/info`,f=i(`${c}`,d),g=i(`${c}/keyProperties`,d),h=yield Promise.allSettled([f,g]),m="fulfilled"===h[0].status?h[0].value.data:null,y="fulfilled"===h[1].status?h[1].value.data:null;let x=null;m.statistics?.length&&(x=m.statistics.map((e=>({min:e[0],max:e[1],avg:e[2],stddev:e[3]}))));const v=l.fromJSON(m.extent),P=Math.ceil(v.width/m.pixelSizeX-.1),S=Math.ceil(v.height/m.pixelSizeY-.1),b=v.spatialReference,k=new a({x:m.pixelSizeX,y:m.pixelSizeY,spatialReference:b}),w=m.histograms?.length?m.histograms:null,R=new n({origin:m.origin,blockWidth:m.blockWidth,blockHeight:m.blockHeight,firstPyramidLevel:m.firstPyramidLevel,maximumPyramidLevel:m.maxPyramidLevel});return new s({width:P,height:S,bandCount:m.bandCount,extent:v,spatialReference:b,pixelSize:k,pixelType:m.pixelType.toLowerCase(),statistics:x,histograms:w,keyProperties:y,storageInfo:R})}))).apply(this,arguments)}e.getCatalogItemRasterInfo=o,Object.defineProperties(e,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})}));
