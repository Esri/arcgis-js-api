/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.18/esri/copyright.txt for details.
*/
define(["exports","../Color","../smartMapping/symbology/support/symbologyUtils","../smartMapping/symbology/support/utils","../smartMapping/symbology/support/colors","./size"],(function(e,o,n,a,r,t){"use strict";const i={light:{color:[153,153,153,.25],width:"1px"},dark:{color:[153,153,153,.25],width:"1px"},darker:{color:[26,26,26,.25],width:"1px"}},m="#aaaaaa",c={default:{name:"default",label:"Default",description:"Default theme for visualizing features by their predominant category.",schemes:{point:{light:{common:{noDataColor:m,outline:i.light,size:"8px"},primary:"predominant-v1",secondary:["predominant-v2","predominant-v3","predominant-v4","predominant-v5","predominance-race","predominance-money","predominance-race-ethnic","predominance-rainbow","predominance-sequence"]},dark:{common:{noDataColor:m,outline:i.darker,size:"8px"},primary:"predominant-v2",secondary:["predominant-v1","predominant-v3","predominant-v4","predominant-v5","predominance-race","predominance-money","predominance-race-ethnic","predominance-rainbow","predominance-sequence"]}},polyline:{light:{common:{noDataColor:m,width:"2px"},primary:"predominant-v1",secondary:["predominant-v2","predominant-v3","predominant-v4","predominant-v5","predominance-race","predominance-money","predominance-race-ethnic","predominance-rainbow","predominance-sequence"]},dark:{common:{noDataColor:m,width:"2px"},primary:"predominant-v2",secondary:["predominant-v1","predominant-v3","predominant-v4","predominant-v5","predominance-race","predominance-money","predominance-race-ethnic","predominance-rainbow","predominance-sequence"]}},polygon:{light:{common:{noDataColor:m,outline:i.light,fillOpacity:.8,markerSize:"8px"},primary:"predominant-v1",secondary:["predominant-v2","predominant-v3","predominant-v4","predominant-v5","predominance-race","predominance-money","predominance-race-ethnic","predominance-rainbow","predominance-sequence"]},dark:{common:{noDataColor:m,outline:i.dark,fillOpacity:.8,markerSize:"8px"},primary:"predominant-v2",secondary:["predominant-v1","predominant-v3","predominant-v4","predominant-v5","predominance-race","predominance-money","predominance-race-ethnic","predominance-rainbow","predominance-sequence"]}}}}},p=n.createThemes({themeDictionary:c});function s(e){return n.getThemesforBasemap(p,e)}function l(e){const o=n.getRawSchemes({basemap:e.basemap,geometryType:e.geometryType,basemapTheme:e.basemapTheme,theme:p.get("default")});if(!o)return;const{schemesInfo:a,basemapId:r,basemapTheme:i}=o,m=a.common,c=t.getSchemes({basemap:e.basemap,geometryType:e.geometryType,worldScale:e.worldScale,view:e.view}),s=c&&c.primaryScheme;return{primaryScheme:u(e,a.primary,m,s),secondarySchemes:a.secondary.map((o=>u(e,o,m,s))).filter(Boolean),basemapId:r,basemapTheme:i}}function d(e){return n.filterSchemesByName(e.name,l(e))}function h(e){return n.filterSchemesByTag(e.includedTags,e.excludedTags,l(e))}function y(e){if(!e)return;const n={...e};return n.colors=n.colors.map((e=>new o(e))),n.noDataColor&&(n.noDataColor=new o(n.noDataColor)),"outline"in n&&n.outline&&(n.outline={color:n.outline.color&&new o(n.outline.color),width:n.outline.width}),"sizeScheme"in n&&n.sizeScheme&&(n.sizeScheme=t.cloneScheme(n.sizeScheme)),n}function u(e,n,t,i){const m=r[n];if(!m)return;const c=m[e.numColors]||m.stops,p="mesh"!==e.geometryType&&e.worldScale?e.view:null;switch(e.geometryType){case"point":case"multipoint":{const e=t;return function(e,n){return{name:e.name,tags:[...e.tags],colors:e.colors.map((e=>new o(e))),noDataColor:new o(e.noDataColor),outline:{color:new o(e.outline.color),width:e.outline.width},size:n?a.toWorldScale(e.size,n):e.size,sizeScheme:e.sizeScheme,opacity:e.opacity}}({name:m.name,tags:m.tags,colors:c,noDataColor:e.noDataColor,opacity:1,sizeScheme:i,outline:e.outline,size:e.size},p)}case"polyline":{const e=t;return function(e,n){return{name:e.name,tags:[...e.tags],colors:e.colors.map((e=>new o(e))),noDataColor:new o(e.noDataColor),width:n?a.toWorldScale(e.width,n):e.width,sizeScheme:e.sizeScheme,opacity:e.opacity}}({name:m.name,tags:m.tags,colors:c,noDataColor:e.noDataColor,opacity:1,sizeScheme:i,width:e.width},p)}case"polygon":{const e=t,n=i;n&&n.marker&&null!=e.markerSize&&(n.marker.size=e.markerSize);return function(e,n){const{sizeScheme:r}=e;return r.marker.size=n?a.toWorldScale(r.marker.size,n):r.marker.size,{name:e.name,tags:[...e.tags],colors:e.colors.map((e=>new o(e))),noDataColor:new o(e.noDataColor),outline:{color:new o(e.outline.color),width:e.outline.width},sizeScheme:r,opacity:e.opacity}}({name:m.name,tags:m.tags,colors:c,noDataColor:e.noDataColor,opacity:e.fillOpacity,outline:e.outline,sizeScheme:n},p)}case"mesh":{const e=t,n={name:m.name,tags:m.tags,colors:c,noDataColor:e.noDataColor,opacity:e.fillOpacity};return{name:(s=n).name,tags:[...s.tags],colors:s.colors.map((e=>new o(e))),noDataColor:new o(s.noDataColor),opacity:s.opacity}}default:return}var s}var g=Object.freeze({__proto__:null,getThemes:s,getSchemes:l,getSchemeByName:d,getSchemesByTag:h,cloneScheme:y});e.cloneScheme=y,e.getSchemeByName=d,e.getSchemes=l,e.getSchemesByTag=h,e.getThemes=s,e.predominanceSymbology=g}));
