/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.26/esri/copyright.txt for details.
*/
define(["exports","./quatf64","./vec3f64","./common","./mat4","./quat"],(function(t,n,a,e,o,r){"use strict";function s(t,n,a){const e=.5*a[0],o=.5*a[1],r=.5*a[2],s=n[0],u=n[1],c=n[2],i=n[3];return t[0]=s,t[1]=u,t[2]=c,t[3]=i,t[4]=e*i+o*c-r*u,t[5]=o*i+r*s-e*c,t[6]=r*i+e*u-o*s,t[7]=-e*s-o*u-r*c,t}function u(t,n){return t[0]=0,t[1]=0,t[2]=0,t[3]=1,t[4]=.5*n[0],t[5]=.5*n[1],t[6]=.5*n[2],t[7]=0,t}function c(t,n){return t[0]=n[0],t[1]=n[1],t[2]=n[2],t[3]=n[3],t[4]=0,t[5]=0,t[6]=0,t[7]=0,t}function i(t,n){const a=l;o.getRotation(a,n);const e=f;return o.getTranslation(e,n),s(t,a,e),t}const l=n.create(),f=a.create();function h(t,n){return t[0]=n[0],t[1]=n[1],t[2]=n[2],t[3]=n[3],t[4]=n[4],t[5]=n[5],t[6]=n[6],t[7]=n[7],t}function M(t){return t[0]=0,t[1]=0,t[2]=0,t[3]=1,t[4]=0,t[5]=0,t[6]=0,t[7]=0,t}function b(t,n,a,e,o,r,s,u,c){return t[0]=n,t[1]=a,t[2]=e,t[3]=o,t[4]=r,t[5]=s,t[6]=u,t[7]=c,t}const m=r.copy;function d(t,n){return t[0]=n[4],t[1]=n[5],t[2]=n[6],t[3]=n[7],t}const g=r.copy;function p(t,n){return t[4]=n[0],t[5]=n[1],t[6]=n[2],t[7]=n[3],t}function q(t,n){const a=n[4],e=n[5],o=n[6],r=n[7],s=-n[0],u=-n[1],c=-n[2],i=n[3];return t[0]=2*(a*i+r*s+e*c-o*u),t[1]=2*(e*i+r*u+o*s-a*c),t[2]=2*(o*i+r*c+a*u-e*s),t}function y(t,n,a){const e=n[0],o=n[1],r=n[2],s=n[3],u=.5*a[0],c=.5*a[1],i=.5*a[2],l=n[4],f=n[5],h=n[6],M=n[7];return t[0]=e,t[1]=o,t[2]=r,t[3]=s,t[4]=s*u+o*i-r*c+l,t[5]=s*c+r*u-e*i+f,t[6]=s*i+e*c-o*u+h,t[7]=-e*u-o*c-r*i+M,t}function x(t,n,a){let e=-n[0],o=-n[1],s=-n[2],u=n[3];const c=n[4],i=n[5],l=n[6],f=n[7],h=c*u+f*e+i*s-l*o,M=i*u+f*o+l*e-c*s,b=l*u+f*s+c*o-i*e,m=f*u-c*e-i*o-l*s;return r.rotateX(t,n,a),e=t[0],o=t[1],s=t[2],u=t[3],t[4]=h*u+m*e+M*s-b*o,t[5]=M*u+m*o+b*e-h*s,t[6]=b*u+m*s+h*o-M*e,t[7]=m*u-h*e-M*o-b*s,t}function R(t,n,a){let e=-n[0],o=-n[1],s=-n[2],u=n[3];const c=n[4],i=n[5],l=n[6],f=n[7],h=c*u+f*e+i*s-l*o,M=i*u+f*o+l*e-c*s,b=l*u+f*s+c*o-i*e,m=f*u-c*e-i*o-l*s;return r.rotateY(t,n,a),e=t[0],o=t[1],s=t[2],u=t[3],t[4]=h*u+m*e+M*s-b*o,t[5]=M*u+m*o+b*e-h*s,t[6]=b*u+m*s+h*o-M*e,t[7]=m*u-h*e-M*o-b*s,t}function T(t,n,a){let e=-n[0],o=-n[1],s=-n[2],u=n[3];const c=n[4],i=n[5],l=n[6],f=n[7],h=c*u+f*e+i*s-l*o,M=i*u+f*o+l*e-c*s,b=l*u+f*s+c*o-i*e,m=f*u-c*e-i*o-l*s;return r.rotateZ(t,n,a),e=t[0],o=t[1],s=t[2],u=t[3],t[4]=h*u+m*e+M*s-b*o,t[5]=M*u+m*o+b*e-h*s,t[6]=b*u+m*s+h*o-M*e,t[7]=m*u-h*e-M*o-b*s,t}function A(t,n,a){const e=a[0],o=a[1],r=a[2],s=a[3];let u=n[0],c=n[1],i=n[2],l=n[3];return t[0]=u*s+l*e+c*r-i*o,t[1]=c*s+l*o+i*e-u*r,t[2]=i*s+l*r+u*o-c*e,t[3]=l*s-u*e-c*o-i*r,u=n[4],c=n[5],i=n[6],l=n[7],t[4]=u*s+l*e+c*r-i*o,t[5]=c*s+l*o+i*e-u*r,t[6]=i*s+l*r+u*o-c*e,t[7]=l*s-u*e-c*o-i*r,t}function L(t,n,a){const e=n[0],o=n[1],r=n[2],s=n[3];let u=a[0],c=a[1],i=a[2],l=a[3];return t[0]=e*l+s*u+o*i-r*c,t[1]=o*l+s*c+r*u-e*i,t[2]=r*l+s*i+e*c-o*u,t[3]=s*l-e*u-o*c-r*i,u=a[4],c=a[5],i=a[6],l=a[7],t[4]=e*l+s*u+o*i-r*c,t[5]=o*l+s*c+r*u-e*i,t[6]=r*l+s*i+e*c-o*u,t[7]=s*l-e*u-o*c-r*i,t}function j(t,n,a,o){if(Math.abs(o)<e.getEpsilon())return h(t,n);const r=Math.sqrt(a[0]*a[0]+a[1]*a[1]+a[2]*a[2]);o*=.5;const s=Math.sin(o),u=s*a[0]/r,c=s*a[1]/r,i=s*a[2]/r,l=Math.cos(o),f=n[0],M=n[1],b=n[2],m=n[3];t[0]=f*l+m*u+M*i-b*c,t[1]=M*l+m*c+b*u-f*i,t[2]=b*l+m*i+f*c-M*u,t[3]=m*l-f*u-M*c-b*i;const d=n[4],g=n[5],p=n[6],q=n[7];return t[4]=d*l+q*u+g*i-p*c,t[5]=g*l+q*c+p*u-d*i,t[6]=p*l+q*i+d*c-g*u,t[7]=q*l-d*u-g*c-p*i,t}function v(t,n,a){return t[0]=n[0]+a[0],t[1]=n[1]+a[1],t[2]=n[2]+a[2],t[3]=n[3]+a[3],t[4]=n[4]+a[4],t[5]=n[5]+a[5],t[6]=n[6]+a[6],t[7]=n[7]+a[7],t}function B(t,n,a){const e=n[0],o=n[1],r=n[2],s=n[3],u=a[4],c=a[5],i=a[6],l=a[7],f=n[4],h=n[5],M=n[6],b=n[7],m=a[0],d=a[1],g=a[2],p=a[3];return t[0]=e*p+s*m+o*g-r*d,t[1]=o*p+s*d+r*m-e*g,t[2]=r*p+s*g+e*d-o*m,t[3]=s*p-e*m-o*d-r*g,t[4]=e*l+s*u+o*i-r*c+f*p+b*m+h*g-M*d,t[5]=o*l+s*c+r*u-e*i+h*p+b*d+M*m-f*g,t[6]=r*l+s*i+e*c-o*u+M*p+b*g+f*d-h*m,t[7]=s*l-e*u-o*c-r*i+b*p-f*m-h*d-M*g,t}const D=B;function E(t,n,a){return t[0]=n[0]*a,t[1]=n[1]*a,t[2]=n[2]*a,t[3]=n[3]*a,t[4]=n[4]*a,t[5]=n[5]*a,t[6]=n[6]*a,t[7]=n[7]*a,t}const Q=r.dot;function _(t,n,a,e){const o=1-e;return Q(n,a)<0&&(e=-e),t[0]=n[0]*o+a[0]*e,t[1]=n[1]*o+a[1]*e,t[2]=n[2]*o+a[2]*e,t[3]=n[3]*o+a[3]*e,t[4]=n[4]*o+a[4]*e,t[5]=n[5]*o+a[5]*e,t[6]=n[6]*o+a[6]*e,t[7]=n[7]*o+a[7]*e,t}function z(t,n){const a=Z(n);return t[0]=-n[0]/a,t[1]=-n[1]/a,t[2]=-n[2]/a,t[3]=n[3]/a,t[4]=-n[4]/a,t[5]=-n[5]/a,t[6]=-n[6]/a,t[7]=n[7]/a,t}function P(t,n){return t[0]=-n[0],t[1]=-n[1],t[2]=-n[2],t[3]=n[3],t[4]=-n[4],t[5]=-n[5],t[6]=-n[6],t[7]=n[7],t}const X=r.length,Y=X,Z=r.squaredLength,O=Z;function S(t,n){let a=Z(n);if(a>0){a=Math.sqrt(a);const e=n[0]/a,o=n[1]/a,r=n[2]/a,s=n[3]/a,u=n[4],c=n[5],i=n[6],l=n[7],f=e*u+o*c+r*i+s*l;t[0]=e,t[1]=o,t[2]=r,t[3]=s,t[4]=(u-e*f)/a,t[5]=(c-o*f)/a,t[6]=(i-r*f)/a,t[7]=(l-s*f)/a}return t}function k(t){return"quat2("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+", "+t[4]+", "+t[5]+", "+t[6]+", "+t[7]+")"}function w(t,n){return t[0]===n[0]&&t[1]===n[1]&&t[2]===n[2]&&t[3]===n[3]&&t[4]===n[4]&&t[5]===n[5]&&t[6]===n[6]&&t[7]===n[7]}function C(t,n){const a=t[0],o=t[1],r=t[2],s=t[3],u=t[4],c=t[5],i=t[6],l=t[7],f=n[0],h=n[1],M=n[2],b=n[3],m=n[4],d=n[5],g=n[6],p=n[7],q=e.getEpsilon();return Math.abs(a-f)<=q*Math.max(1,Math.abs(a),Math.abs(f))&&Math.abs(o-h)<=q*Math.max(1,Math.abs(o),Math.abs(h))&&Math.abs(r-M)<=q*Math.max(1,Math.abs(r),Math.abs(M))&&Math.abs(s-b)<=q*Math.max(1,Math.abs(s),Math.abs(b))&&Math.abs(u-m)<=q*Math.max(1,Math.abs(u),Math.abs(m))&&Math.abs(c-d)<=q*Math.max(1,Math.abs(c),Math.abs(d))&&Math.abs(i-g)<=q*Math.max(1,Math.abs(i),Math.abs(g))&&Math.abs(l-p)<=q*Math.max(1,Math.abs(l),Math.abs(p))}const F=Object.freeze(Object.defineProperty({__proto__:null,add:v,conjugate:P,copy:h,dot:Q,equals:C,exactEquals:w,fromMat4:i,fromRotation:c,fromRotationTranslation:s,fromTranslation:u,getDual:d,getReal:m,getTranslation:q,identity:M,invert:z,len:Y,length:X,lerp:_,mul:D,multiply:B,normalize:S,rotateAroundAxis:j,rotateByQuatAppend:A,rotateByQuatPrepend:L,rotateX:x,rotateY:R,rotateZ:T,scale:E,set:b,setDual:p,setReal:g,sqrLen:O,squaredLength:Z,str:k,translate:y},Symbol.toStringTag,{value:"Module"}));t.add=v,t.conjugate=P,t.copy=h,t.dot=Q,t.equals=C,t.exactEquals=w,t.fromMat4=i,t.fromRotation=c,t.fromRotationTranslation=s,t.fromTranslation=u,t.getDual=d,t.getReal=m,t.getTranslation=q,t.identity=M,t.invert=z,t.len=Y,t.length=X,t.lerp=_,t.mul=D,t.multiply=B,t.normalize=S,t.quat2=F,t.rotateAroundAxis=j,t.rotateByQuatAppend=A,t.rotateByQuatPrepend=L,t.rotateX=x,t.rotateY=R,t.rotateZ=T,t.scale=E,t.set=b,t.setDual=p,t.setReal=g,t.sqrLen=O,t.squaredLength=Z,t.str=k,t.translate=y}));
