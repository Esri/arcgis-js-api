/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.26/esri/copyright.txt for details.
*/
define(["exports","./dom","./index"],(function(e,t,n){"use strict";
/*!
   * All material copyright ESRI, All Rights Reserved, unless otherwise specified.
   * See https://github.com/Esri/calcite-components/blob/master/LICENSE.md for details.
   * v1.0.7
   */const o="hidden-form-input";function r(e){return"checked"in e}const c=new WeakMap,a=new WeakSet;function u(e,t){const n="calciteInternalFormComponentRegister";let o=!1;return e.addEventListener(n,(e=>{o=e.composedPath().some((e=>a.has(e))),e.stopPropagation()}),{once:!0}),t.dispatchEvent(new CustomEvent(n,{bubbles:!0,composed:!0})),o}function s(e){const{formEl:t}=e;return!!t&&("requestSubmit"in t?t.requestSubmit():t.submit(),!0)}function d(e){e.formEl?.reset()}function l(e){const{el:n,value:o}=e,s=t.closestElementCrossShadowBoundary(n,"form");if(!s||u(s,n))return;e.formEl=s,e.defaultValue=o,r(e)&&(e.defaultChecked=e.checked);const d=(e.onFormReset||i).bind(e);s.addEventListener("reset",d),c.set(e.el,d),a.add(n)}function i(){r(this)?this.checked=this.defaultChecked:this.value=this.defaultValue}function m(e){const{el:t,formEl:n}=e;if(!n)return;const o=c.get(t);n.removeEventListener("reset",o),c.delete(t),e.formEl=null,a.delete(t)}function f(e,t){e.defaultValue=t}const h=e=>{e.target.dispatchEvent(new CustomEvent("calciteInternalHiddenInputChange",{bubbles:!0}))},p=e=>e.removeEventListener("change",h);function E(e){const{el:t,formEl:n,name:r,value:c}=e,{ownerDocument:a}=t,u=t.querySelectorAll(`input[slot="${o}"]`);if(!n||!r)return void u.forEach((e=>{p(e),e.remove()}));const s=Array.isArray(c)?c:[c],d=[],l=new Set;let i;u.forEach((t=>{const n=s.find((e=>e==t.value));null!=n?(l.add(n),v(e,t,n)):d.push(t)})),s.forEach((t=>{if(l.has(t))return;let n=d.pop();n||(n=a.createElement("input"),n.slot=o),i||(i=a.createDocumentFragment()),i.append(n),n.addEventListener("change",h),v(e,n,t)})),i&&t.append(i),d.forEach((e=>{p(e),e.remove()}))}function v(e,t,n){const{defaultValue:o,disabled:c,name:a,required:u}=e;t.defaultValue=o,t.disabled=c,t.name=a,t.required=u,t.tabIndex=-1,r(e)?(t.checked=e.checked,t.defaultChecked=e.defaultChecked,t.value=e.checked?n||"on":""):t.value=n||"",e.syncHiddenFormInput?.(t)}const b=({component:e})=>(E(e),n.h("slot",{name:o}));e.HiddenFormInputSlot=b,e.afterConnectDefaultValueSet=f,e.connectForm=l,e.disconnectForm=m,e.resetForm=d,e.submitForm=s}));
