/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.23/esri/copyright.txt for details.
*/
define(["exports","./dom","./componentsUtils"],(function(e,t,n){"use strict";
/*!
   * All material copyright ESRI, All Rights Reserved, unless otherwise specified.
   * See https://github.com/Esri/calcite-components/blob/master/LICENSE.md for details.
   */const o="hidden-form-input";function a(e){return"checked"in e}const c=new WeakMap,l=new WeakSet;function r(e,t){const n="calciteInternalFormComponentRegister";let o=!1;return e.addEventListener(n,(e=>{o=e.composedPath().some((e=>l.has(e))),e.stopPropagation()}),{once:!0}),t.dispatchEvent(new CustomEvent(n,{bubbles:!0,composed:!0})),o}function d(e){const{el:n,value:o}=e,c=t.closestElementCrossShadowBoundary(n,"form");if(!c||r(c,n))return;e.formEl=c,e.defaultValue=o,a(e)&&(e.defaultChecked=e.checked);const d=(e.onFormReset||u).bind(e);c.addEventListener("reset",d),l.add(n)}function u(){a(this)?this.checked=this.defaultChecked:this.value=this.defaultValue}function s(e){const{el:t,formEl:n}=e;if(!n)return;const o=c.get(t);n.removeEventListener("reset",o),c.delete(t),e.formEl=null,l.delete(t)}function i(e,t){e.defaultValue=t}function f(e){const{el:t,formEl:n,name:a,value:c}=e,{ownerDocument:l}=t,r=t.querySelectorAll(`input[slot="${o}"]`);if(!n||!a)return void r.forEach((e=>e.remove()));const d=Array.isArray(c)?c:[c],u=[],s=new Set;let i;r.forEach((t=>{const n=d.find((e=>e==t.value));null!=n?(s.add(n),m(e,t,n)):u.push(t)})),d.forEach((t=>{if(s.has(t))return;let n=u.pop();n||(n=l.createElement("input"),n.slot=o),i||(i=l.createDocumentFragment()),i.append(n),m(e,n,t)})),i&&t.append(i),u.forEach((e=>e.remove()))}function m(e,t,n){var o;const{defaultValue:c,disabled:l,name:r,required:d}=e;t.defaultValue=c,t.disabled=l,t.name=r,t.required=d,t.tabIndex=-1,a(e)?(t.defaultChecked=e.defaultChecked,t.value=e.checked?n||"on":"",l||e.checked||(t.disabled=!0)):t.value=n||"",null===(o=e.syncHiddenFormInput)||void 0===o||o.call(e,t)}const h=({component:e})=>(f(e),n.h("slot",{name:o}));e.HiddenFormInputSlot=h,e.afterConnectDefaultValueSet=i,e.connectForm=d,e.disconnectForm=s}));
