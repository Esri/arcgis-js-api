/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.25/esri/copyright.txt for details.
*/
define(["exports","./componentsUtils"],(function(e,t){"use strict";
/*!
   * All material copyright ESRI, All Rights Reserved, unless otherwise specified.
   * See https://github.com/Esri/calcite-components/blob/master/LICENSE.md for details.
   * v1.0.0-beta.97
   */const n="hidden-form-input";function o(e){return"checked"in e}const r=new WeakMap,a=new WeakSet;function c(e,t){const n="calciteInternalFormComponentRegister";let o=!1;return e.addEventListener(n,(e=>{o=e.composedPath().some((e=>a.has(e))),e.stopPropagation()}),{once:!0}),t.dispatchEvent(new CustomEvent(n,{bubbles:!0,composed:!0})),o}function u(e){const{formEl:t}=e;return!!t&&("requestSubmit"in t?t.requestSubmit():t.submit(),!0)}function l(e){var t;null===(t=e.formEl)||void 0===t||t.reset()}function s(e){const{el:n,value:u}=e,l=t.closestElementCrossShadowBoundary(n,"form");if(!l||c(l,n))return;e.formEl=l,e.defaultValue=u,o(e)&&(e.defaultChecked=e.checked);const s=(e.onFormReset||d).bind(e);l.addEventListener("reset",s),r.set(e.el,s),a.add(n)}function d(){o(this)?this.checked=this.defaultChecked:this.value=this.defaultValue}function i(e){const{el:t,formEl:n}=e;if(!n)return;const o=r.get(t);n.removeEventListener("reset",o),r.delete(t),e.formEl=null,a.delete(t)}function m(e,t){e.defaultValue=t}const f=e=>{e.target.dispatchEvent(new CustomEvent("calciteInternalHiddenInputChange",{bubbles:!0}))},h=e=>e.removeEventListener("change",f);function p(e){const{el:t,formEl:o,name:r,value:a}=e,{ownerDocument:c}=t,u=t.querySelectorAll(`input[slot="${n}"]`);if(!o||!r)return void u.forEach((e=>{h(e),e.remove()}));const l=Array.isArray(a)?a:[a],s=[],d=new Set;let i;u.forEach((t=>{const n=l.find((e=>e==t.value));null!=n?(d.add(n),v(e,t,n)):s.push(t)})),l.forEach((t=>{if(d.has(t))return;let o=s.pop();o||(o=c.createElement("input"),o.slot=n),i||(i=c.createDocumentFragment()),i.append(o),o.addEventListener("change",f),v(e,o,t)})),i&&t.append(i),s.forEach((e=>{h(e),e.remove()}))}function v(e,t,n){var r;const{defaultValue:a,disabled:c,name:u,required:l}=e;t.defaultValue=a,t.disabled=c,t.name=u,t.required=l,t.tabIndex=-1,o(e)?(t.defaultChecked=e.defaultChecked,t.value=e.checked?n||"on":"",c||e.checked||(t.disabled=!0)):t.value=n||"",null===(r=e.syncHiddenFormInput)||void 0===r||r.call(e,t)}const E=({component:e})=>(p(e),t.h("slot",{name:n}));e.HiddenFormInputSlot=E,e.afterConnectDefaultValueSet=m,e.connectForm=s,e.disconnectForm=i,e.resetForm=l,e.submitForm=u}));
