/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.18/esri/copyright.txt for details.
*/
define(["exports","./vec3f64","./vec3","./mat4","../core/ObjectStack","./vec4f64","./vec4","../views/3d/support/stack","./plane","./clipRay"],(function(e,t,n,r,o,c,s,i,a,f){"use strict";function l(e){if(e){const{planes:n,points:r}=e;return{planes:[a.create(n[0]),a.create(n[1]),a.create(n[2]),a.create(n[3]),a.create(n[4]),a.create(n[5])],points:[t.clone(r[0]),t.clone(r[1]),t.clone(r[2]),t.clone(r[3]),t.clone(r[4]),t.clone(r[5]),t.clone(r[6]),t.clone(r[7])]}}return{planes:[a.create(),a.create(),a.create(),a.create(),a.create(),a.create()],points:[t.create(),t.create(),t.create(),t.create(),t.create(),t.create(),t.create(),t.create()]}}function u(e,t=l()){return p(e.planes,e.points,t)}function p(e,t,r=l()){for(let t=0;t<6;t++)a.copy(e[t],r.planes[t]);for(let e=0;e<8;e++)n.copy(r.points[e],t[e]);return r}function m(e,t,o=l()){const{points:c}=o,a=r.multiply(i.sm4d.get(),t,e);r.invert(a,a);for(let e=0;e<8;++e){const t=s.transformMat4(i.sv4d.get(),R[e],a);n.set(c[e],t[0]/t[3],t[1]/t[3],t[2]/t[3])}return y(o),o}function y(e){const{planes:t,points:n}=e;a.fromPoints(n[4],n[0],n[3],t[0]),a.fromPoints(n[1],n[5],n[6],t[1]),a.fromPoints(n[4],n[5],n[1],t[2]),a.fromPoints(n[3],n[2],n[6],t[3]),a.fromPoints(n[0],n[1],n[2],t[4]),a.fromPoints(n[5],n[4],n[7],t[5])}function P(e,t){for(let n=0;n<6;n++)if(a.isSphereFullyInside(e[n],t))return!1;return!0}function d(e,t){return A(e,f.fromRay(t,I.get()))}function V(e,t){for(let n=0;n<6;n++){const r=e[n];if(!a.clipInfinite(r,t))return!1}return!0}function g(e,t,n){return A(e,f.fromLineSegmentAndDirection(t,n,I.get()))}function v(e,t){for(let n=0;n<6;n++){if(a.signedDistance(e[n],t)>0)return!1}return!0}function S(e,t){for(let n=0;n<6;n++)if(a.isAABBFullyInside(e[n],t))return!1;return!0}function A(e,t){for(let n=0;n<6;n++)if(!a.clip(e[n],t))return!1;return!0}const B={bottom:[5,1,0,4],near:[0,1,2,3],far:[5,4,7,6],right:[1,5,6,2],left:[4,0,3,7],top:[7,3,2,6]},R=[c.fromValues(-1,-1,-1,1),c.fromValues(1,-1,-1,1),c.fromValues(1,1,-1,1),c.fromValues(-1,1,-1,1),c.fromValues(-1,-1,1,1),c.fromValues(1,-1,1,1),c.fromValues(1,1,1,1),c.fromValues(-1,1,1,1)],I=new o.ObjectStack(f.create);var b=Object.freeze({__proto__:null,create:l,copy:u,fromValues:p,fromMatrix:m,recomputePlanes:y,intersectsSphere:P,intersectsRay:d,intersectClipRay:V,intersectsLineSegment:g,intersectsPoint:v,intersectsAABB:S,planePointIndices:B});e.copy=u,e.create=l,e.fromMatrix=m,e.fromValues=p,e.frustumModule=b,e.intersectClipRay=V,e.intersectsAABB=S,e.intersectsLineSegment=g,e.intersectsPoint=v,e.intersectsRay=d,e.intersectsSphere=P,e.planePointIndices=B,e.recomputePlanes=y}));
