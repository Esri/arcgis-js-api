/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.18/esri/copyright.txt for details.
*/
define(["exports","./vec3f64","./common"],(function(t,n,r){"use strict";function a(t){const n=t[0],r=t[1],a=t[2];return Math.sqrt(n*n+r*r+a*a)}function e(t,n){return t[0]=n[0],t[1]=n[1],t[2]=n[2],t}function o(t,n,r,a){return t[0]=n,t[1]=r,t[2]=a,t}function u(t,n,r){return t[0]=n[0]+r[0],t[1]=n[1]+r[1],t[2]=n[2]+r[2],t}function s(t,n,r){return t[0]=n[0]-r[0],t[1]=n[1]-r[1],t[2]=n[2]-r[2],t}function c(t,n,r){return t[0]=n[0]*r[0],t[1]=n[1]*r[1],t[2]=n[2]*r[2],t}function i(t,n,r){return t[0]=n[0]/r[0],t[1]=n[1]/r[1],t[2]=n[2]/r[2],t}function h(t,n){return t[0]=Math.ceil(n[0]),t[1]=Math.ceil(n[1]),t[2]=Math.ceil(n[2]),t}function M(t,n){return t[0]=Math.floor(n[0]),t[1]=Math.floor(n[1]),t[2]=Math.floor(n[2]),t}function f(t,n,r){return t[0]=Math.min(n[0],r[0]),t[1]=Math.min(n[1],r[1]),t[2]=Math.min(n[2],r[2]),t}function l(t,n,r){return t[0]=Math.max(n[0],r[0]),t[1]=Math.max(n[1],r[1]),t[2]=Math.max(n[2],r[2]),t}function d(t,n){return t[0]=Math.round(n[0]),t[1]=Math.round(n[1]),t[2]=Math.round(n[2]),t}function m(t,n,r){return t[0]=n[0]*r,t[1]=n[1]*r,t[2]=n[2]*r,t}function b(t,n,r,a){return t[0]=n[0]+r[0]*a,t[1]=n[1]+r[1]*a,t[2]=n[2]+r[2]*a,t}function q(t,n){const r=n[0]-t[0],a=n[1]-t[1],e=n[2]-t[2];return Math.sqrt(r*r+a*a+e*e)}function x(t,n){const r=n[0]-t[0],a=n[1]-t[1],e=n[2]-t[2];return r*r+a*a+e*e}function v(t){const n=t[0],r=t[1],a=t[2];return n*n+r*r+a*a}function g(t,n){return t[0]=-n[0],t[1]=-n[1],t[2]=-n[2],t}function p(t,n){return t[0]=1/n[0],t[1]=1/n[1],t[2]=1/n[2],t}function L(t,n){const r=n[0],a=n[1],e=n[2];let o=r*r+a*a+e*e;return o>0&&(o=1/Math.sqrt(o),t[0]=n[0]*o,t[1]=n[1]*o,t[2]=n[2]*o),t}function A(t,n){return t[0]*n[0]+t[1]*n[1]+t[2]*n[2]}function D(t,n,r){const a=n[0],e=n[1],o=n[2],u=r[0],s=r[1],c=r[2];return t[0]=e*c-o*s,t[1]=o*u-a*c,t[2]=a*s-e*u,t}function O(t,n,r,a){const e=n[0],o=n[1],u=n[2];return t[0]=e+a*(r[0]-e),t[1]=o+a*(r[1]-o),t[2]=u+a*(r[2]-u),t}function z(t,n,r,a,e,o){const u=o*o,s=u*(2*o-3)+1,c=u*(o-2)+o,i=u*(o-1),h=u*(3-2*o);return t[0]=n[0]*s+r[0]*c+a[0]*i+e[0]*h,t[1]=n[1]*s+r[1]*c+a[1]*i+e[1]*h,t[2]=n[2]*s+r[2]*c+a[2]*i+e[2]*h,t}function E(t,n,r,a,e,o){const u=1-o,s=u*u,c=o*o,i=s*u,h=3*o*s,M=3*c*u,f=c*o;return t[0]=n[0]*i+r[0]*h+a[0]*M+e[0]*f,t[1]=n[1]*i+r[1]*h+a[1]*M+e[1]*f,t[2]=n[2]*i+r[2]*h+a[2]*M+e[2]*f,t}function I(t,n){n=n||1;const a=2*r.RANDOM()*Math.PI,e=2*r.RANDOM()-1,o=Math.sqrt(1-e*e)*n;return t[0]=Math.cos(a)*o,t[1]=Math.sin(a)*o,t[2]=e*n,t}function N(t,n,r){const a=n[0],e=n[1],o=n[2];return t[0]=r[0]*a+r[4]*e+r[8]*o+r[12],t[1]=r[1]*a+r[5]*e+r[9]*o+r[13],t[2]=r[2]*a+r[6]*e+r[10]*o+r[14],t}function P(t,n,r){const a=n[0],e=n[1],o=n[2];return t[0]=a*r[0]+e*r[3]+o*r[6],t[1]=a*r[1]+e*r[4]+o*r[7],t[2]=a*r[2]+e*r[5]+o*r[8],t}function y(t,n,r){const a=r[0],e=r[1],o=r[2],u=r[3],s=n[0],c=n[1],i=n[2];let h=e*i-o*c,M=o*s-a*i,f=a*c-e*s,l=e*f-o*M,d=o*h-a*f,m=a*M-e*h;const b=2*u;return h*=b,M*=b,f*=b,l*=2,d*=2,m*=2,t[0]=s+h+l,t[1]=c+M+d,t[2]=i+f+m,t}function _(t,n,r,a){const e=[],o=[];return e[0]=n[0]-r[0],e[1]=n[1]-r[1],e[2]=n[2]-r[2],o[0]=e[0],o[1]=e[1]*Math.cos(a)-e[2]*Math.sin(a),o[2]=e[1]*Math.sin(a)+e[2]*Math.cos(a),t[0]=o[0]+r[0],t[1]=o[1]+r[1],t[2]=o[2]+r[2],t}function S(t,n,r,a){const e=[],o=[];return e[0]=n[0]-r[0],e[1]=n[1]-r[1],e[2]=n[2]-r[2],o[0]=e[2]*Math.sin(a)+e[0]*Math.cos(a),o[1]=e[1],o[2]=e[2]*Math.cos(a)-e[0]*Math.sin(a),t[0]=o[0]+r[0],t[1]=o[1]+r[1],t[2]=o[2]+r[2],t}function Q(t,n,r,a){const e=[],o=[];return e[0]=n[0]-r[0],e[1]=n[1]-r[1],e[2]=n[2]-r[2],o[0]=e[0]*Math.cos(a)-e[1]*Math.sin(a),o[1]=e[0]*Math.sin(a)+e[1]*Math.cos(a),o[2]=e[2],t[0]=o[0]+r[0],t[1]=o[1]+r[1],t[2]=o[2]+r[2],t}function R(t,n){e(X,t),e(Y,n),L(X,X),L(Y,Y);const r=A(X,Y);return r>1?0:r<-1?Math.PI:Math.acos(r)}const X=n.create(),Y=n.create();function Z(t){return"vec3("+t[0]+", "+t[1]+", "+t[2]+")"}function j(t,n){return t[0]===n[0]&&t[1]===n[1]&&t[2]===n[2]}function k(t,n){const a=t[0],e=t[1],o=t[2],u=n[0],s=n[1],c=n[2];return Math.abs(a-u)<=r.EPSILON*Math.max(1,Math.abs(a),Math.abs(u))&&Math.abs(e-s)<=r.EPSILON*Math.max(1,Math.abs(e),Math.abs(s))&&Math.abs(o-c)<=r.EPSILON*Math.max(1,Math.abs(o),Math.abs(c))}let w=s,B=c,C=i,F=q,G=x,H=a,J=v;var K=Object.freeze({__proto__:null,length:a,copy:e,set:o,add:u,subtract:s,multiply:c,divide:i,ceil:h,floor:M,min:f,max:l,round:d,scale:m,scaleAndAdd:b,distance:q,squaredDistance:x,squaredLength:v,negate:g,inverse:p,normalize:L,dot:A,cross:D,lerp:O,hermite:z,bezier:E,random:I,transformMat4:N,transformMat3:P,transformQuat:y,rotateX:_,rotateY:S,rotateZ:Q,angle:R,str:Z,exactEquals:j,equals:k,sub:w,mul:B,div:C,dist:F,sqrDist:G,len:H,sqrLen:J});t.add=u,t.angle=R,t.bezier=E,t.ceil=h,t.copy=e,t.cross=D,t.dist=F,t.distance=q,t.div=C,t.divide=i,t.dot=A,t.equals=k,t.exactEquals=j,t.floor=M,t.hermite=z,t.inverse=p,t.len=H,t.length=a,t.lerp=O,t.max=l,t.min=f,t.mul=B,t.multiply=c,t.negate=g,t.normalize=L,t.random=I,t.rotateX=_,t.rotateY=S,t.rotateZ=Q,t.round=d,t.scale=m,t.scaleAndAdd=b,t.set=o,t.sqrDist=G,t.sqrLen=J,t.squaredDistance=x,t.squaredLength=v,t.str=Z,t.sub=w,t.subtract=s,t.transformMat3=P,t.transformMat4=N,t.transformQuat=y,t.vec3=K}));
