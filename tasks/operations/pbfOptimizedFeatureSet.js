/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.18/esri/copyright.txt for details.
*/
define(["exports","../../geometry/support/spatialReferenceUtils","../../core/unitUtils","../../layers/graphics/OptimizedFeature","../../layers/graphics/OptimizedFeatureSet","../../layers/graphics/OptimizedGeometry"],(function(e,t,r,o,n,i){"use strict";const s=["esriGeometryPoint","esriGeometryMultipoint","esriGeometryPolyline","esriGeometryPolygon"];let u=function(){function e(e){this.options=e,this.geometryTypes=s}var u=e.prototype;return u.createFeatureResult=function(){return new n},u.prepareFeatures=function(){},u.finishFeatureResult=function(e){if(!e||!e.features||!e.hasZ||!this.options.sourceSpatialReference||!e.spatialReference||t.equals(e.spatialReference,this.options.sourceSpatialReference)||e.spatialReference.vcsWkid)return;const o=r.getMetersPerVerticalUnitForSR(this.options.sourceSpatialReference)/r.getMetersPerVerticalUnitForSR(e.spatialReference);if(1!==o)for(const t of e.features){if(!t.geometry||!t.geometry.coords)continue;const e=t.geometry.coords;for(let t=2;t<e.length;t+=3)e[t]*=o}},u.addFeature=function(e,t){e.features.push(t)},u.createFeature=function(){return new o},u.createSpatialReference=function(){return{wkid:0}},u.createGeometry=function(){return new i},u.addField=function(e,t){e.fields.push(t)},u.addCoordinate=function(e,t){e.coords.push(t)},u.addCoordinatePoint=function(e,t){e.coords.push(t)},u.addLength=function(e,t){e.lengths.push(t)},u.addQueryGeometry=function(e,t){e.queryGeometry=t.queryGeometry,e.queryGeometryType=t.queryGeometryType},u.createPointGeometry=function(){return new i},e}();e.OPTIMIZED_GEOMETRY_TYPES=s,e.OptimizedFeatureSetParserContext=u,Object.defineProperty(e,"__esModule",{value:!0})}));
