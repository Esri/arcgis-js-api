/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
define(["exports","../../core/maybe","../../geometry/support/jsonUtils","../../rest/utils"],(function(e,t,r,n){"use strict";const i=e=>e.spatialReference.wkid||JSON.stringify(e.spatialReference);function a(e,a){const{dpi:s,gdbVersion:o,geometry:l,geometryPrecision:y,height:m,layerOption:f,mapExtent:c,maxAllowableOffset:u,returnFieldName:d,returnGeometry:p,returnUnformattedValues:g,returnZ:x,spatialReference:O,timeExtent:N,tolerance:S,width:$}=e.toJSON(),{dynamicLayers:J,layerDefs:R,layerIds:b}=n.toDynamicLayersJSON(e),w=a&&t.isSome(a.geometry)?a.geometry:null,j={geometryPrecision:y,maxAllowableOffset:u,returnFieldName:d,returnGeometry:p,returnUnformattedValues:g,returnZ:x,tolerance:S},D=w&&w.toJSON()||l;if(j.imageDisplay=`${$},${m},${s}`,o&&(j.gdbVersion=o),D&&(delete D.spatialReference,j.geometry=JSON.stringify(D),j.geometryType=r.getJsonType(D)),O?j.sr=O.wkid||JSON.stringify(O):D&&D.spatialReference?j.sr=i(D):c&&c.spatialReference&&(j.sr=i(c)),j.time=N?N.join(","):null,c){const{xmin:e,ymin:t,xmax:r,ymax:n}=c;j.mapExtent=`${e},${t},${r},${n}`}return R&&(j.layerDefs=R),J&&!R&&(j.dynamicLayers=J),j.layers=f,b&&!J&&(j.layers+=`:${b.join(",")}`),j}e.identifyToIdentifyRESTParameters=a,Object.defineProperty(e,"__esModule",{value:!0})}));
