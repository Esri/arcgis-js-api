define(["../../declare","dojo/Deferred","dojo/promise/all","../../graphic","./LocationProviderBase","../../SpatialReference","../../geometry/jsonUtils"],function(e,t,n,o,r,i){var a=100,c=25;return e("esri.tasks.locationproviders.LocationProviderClientBase",r,{inSpatialReference:null,constructor:function(){this.inSpatialReference||(this.inSpatialReference=new i(4326))},_locate:function(e,o){function r(){setTimeout(function(){for(var t=+new Date+a,c=[];t>+new Date&&u<e.length;){var p=e[u],h=f.getGeometry(p);p.geometry=h,h&&c.push(p),++u}o.outSpatialReference?i.push(f._project(c,o.outSpatialReference).then(function(){s=s.concat(c),l.progress(c)})):(s=s.concat(c),l.progress(c)),u<e.length?r():n(i).then(function(){l.resolve(s)})},c)}var i=[],s=[],l=new t,f=this,u=0;return r(),l.promise}})});