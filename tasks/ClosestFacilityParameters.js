// COPYRIGHT Â© 2022 Esri
//
// All rights reserved under the copyright laws of the United States
// and applicable international laws, treaties, and conventions.
//
// This material is licensed for use under the Esri Master License
// Agreement (MLA), and is bound by the terms of that agreement.
// You may redistribute and use this code without modification,
// provided you adhere to the terms of the MLA and include this
// copyright notice.
//
// See use restrictions at http://www.esri.com/legal/pdfs/mla_e204_e300/english
//
// For additional information, contact:
// Environmental Systems Research Institute, Inc.
// Attn: Contracts and Legal Services Department
// 380 New York Street
// Redlands, California, USA 92373
// USA
//
// email: contracts@esri.com
//
// See http://js.arcgis.com/3.42/esri/copyright.txt for details.

define(["dojo/_base/declare","dojo/_base/lang","dojo/_base/json","dojo/has","../kernel","../lang","../graphicsUtils","./NATypes"],(function(e,t,r,i,s,a,n,u){var l=e(null,{declaredClass:"esri.tasks.ClosestFacilityParameters",accumulateAttributes:null,attributeParameterValues:null,defaultCutoff:null,defaultTargetFacilityCount:null,directionsLanguage:null,directionsLengthUnits:null,directionsOutputType:null,directionsStyleName:null,directionsTimeAttribute:null,doNotLocateOnRestrictedElements:!0,facilities:null,impedanceAttribute:null,incidents:null,outputGeometryPrecision:null,outputGeometryPrecisionUnits:null,outputLines:null,outSpatialReference:null,overrides:null,pointBarriers:null,polygonBarriers:null,polylineBarriers:null,restrictionAttributes:null,restrictUTurns:null,returnDirections:!1,returnFacilities:!1,returnIncidents:!1,returnPointBarriers:!1,returnPolygonBarriers:!1,returnPolylineBarriers:!1,returnRoutes:!0,travelDirection:null,useHierarchy:!1,timeOfDay:null,timeOfDayUsage:null,travelMode:null,toJson:function(e){var t={returnDirections:this.returnDirections,returnFacilities:this.returnFacilities,returnIncidents:this.returnIncidents,returnBarriers:this.returnPointBarriers,returnPolygonBarriers:this.returnPolygonBarriers,returnPolylineBarriers:this.returnPolylineBarriers,returnCFRoutes:this.returnRoutes,useHierarchy:this.useHierarchy,attributeParameterValues:this.attributeParameterValues&&r.toJson(this.attributeParameterValues),defaultCutoff:this.defaultCutoff,defaultTargetFacilityCount:this.defaultTargetFacilityCount,directionsLanguage:this.directionsLanguage,directionsLengthUnits:u.LengthUnit[this.directionsLengthUnits],directionsTimeAttributeName:this.directionsTimeAttribute,impedanceAttributeName:this.impedanceAttribute,outputGeometryPrecision:this.outputGeometryPrecision,outputGeometryPrecisionUnits:this.outputGeometryPrecisionUnits,outputLines:this.outputLines,outSR:this.outSpatialReference?this.outSpatialReference.wkid||r.toJson(this.outSpatialReference.toJson()):null,overrides:this.overrides,restrictionAttributeNames:this.restrictionAttributes?this.restrictionAttributes.join(","):null,restrictUTurns:this.restrictUTurns,accumulateAttributeNames:this.accumulateAttributes?this.accumulateAttributes.join(","):null,travelDirection:this.travelDirection,timeOfDay:this.timeOfDay&&this.timeOfDay.getTime(),directionsStyleName:this.directionsStyleName,travelMode:"object"==typeof this.travelMode?r.toJson(this.travelMode):this.travelMode};if(this.directionsOutputType)switch(this.directionsOutputType.toLowerCase()){case"complete":t.directionsOutputType="esriDOTComplete";break;case"complete-no-events":t.directionsOutputType="esriDOTCompleteNoEvents";break;case"instructions-only":t.directionsOutputType="esriDOTInstructionsOnly";break;case"standard":t.directionsOutputType="esriDOTStandard";break;case"summary-only":t.directionsOutputType="esriDOTSummaryOnly";break;default:t.directionsOutputType=this.directionsOutputType}if(this.timeOfDayUsage){var i;switch(this.timeOfDayUsage.toLowerCase()){case"start":i="esriNATimeOfDayUseAsStartTime";break;case"end":i="esriNATimeOfDayUseAsEndTime";break;default:i=this.timeOfDayUsage}t.timeOfDayUsage=i}var s=this.incidents;"esri.tasks.FeatureSet"===s.declaredClass&&s.features.length>0?t.incidents=r.toJson({type:"features",features:n._encodeGraphics(s.features,e&&e["incidents.features"]),doNotLocateOnRestrictedElements:this.doNotLocateOnRestrictedElements}):"esri.tasks.DataLayer"===s.declaredClass?t.incidents=s:"esri.tasks.DataFile"===s.declaredClass&&(t.incidents=r.toJson({type:"features",url:s.url,doNotLocateOnRestrictedElements:this.doNotLocateOnRestrictedElements}));var l=this.facilities;"esri.tasks.FeatureSet"===l.declaredClass&&l.features.length>0?t.facilities=r.toJson({type:"features",features:n._encodeGraphics(l.features,e&&e["facilities.features"]),doNotLocateOnRestrictedElements:this.doNotLocateOnRestrictedElements}):"esri.tasks.DataLayer"===l.declaredClass?t.facilities=l:"esri.tasks.DataFile"===l.declaredClass&&(t.facilities=r.toJson({type:"features",url:l.url,doNotLocateOnRestrictedElements:this.doNotLocateOnRestrictedElements}));var o=function(t,i){return t?"esri.tasks.FeatureSet"===t.declaredClass?t.features.length>0?r.toJson({type:"features",features:n._encodeGraphics(t.features,e&&e[i])}):null:"esri.tasks.DataLayer"===t.declaredClass?t:"esri.tasks.DataFile"===t.declaredClass?r.toJson({type:"features",url:t.url}):r.toJson(t):null};return this.pointBarriers&&(t.barriers=o(this.pointBarriers,"pointBarriers.features")),this.polygonBarriers&&(t.polygonBarriers=o(this.polygonBarriers,"polygonBarriers.features")),this.polylineBarriers&&(t.polylineBarriers=o(this.polylineBarriers,"polylineBarriers.features")),a.filter(t,(function(e){if(null!==e)return!0}))}});return i("extend-esri")&&t.setObject("tasks.ClosestFacilityParameters",l,s),l}));