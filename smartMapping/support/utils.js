/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.26/esri/copyright.txt for details.
*/
define(["exports","../../chunks/_rollupPluginBabelHelpers","../../support/arcadeOnDemand","../../support/basemapUtils"],(function(e,t,r,n){"use strict";const i=",",a={light:["streets","gray","topo","terrain","national-geographic","oceans","osm","gray-vector","streets-vector","topo-vector","streets-relief-vector","streets-navigation-vector","arcgis-light-gray","arcgis-navigation","arcgis-streets","arcgis-streets-relief","arcgis-topographic","arcgis-oceans","osm-standard","osm-standard-relief","osm-streets","osm-streets-relief","osm-light-gray","arcgis-terrain","arcgis-charted-territory","arcgis-community","arcgis-colored-pencil","arcgis-modern-antique","arcgis-midcentury","arcgis-newspaper","arcgis-hillshade-light"],dark:["satellite","hybrid","dark-gray","dark-gray-vector","streets-night-vector","arcgis-imagery","arcgis-imagery-standard","arcgis-dark-gray","arcgis-navigation-night","arcgis-streets-night","osm-dark-gray","arcgis-nova","arcgis-hillshade-dark"]},s="percent-of-total",o="field",l={years:365,months:30,days:1,hours:1/24,minutes:1/1440,seconds:1/86400,milliseconds:1/864e5},c=["integer","small-integer"];let g=null;function u(e){return d.apply(this,arguments)}function d(){return(d=t._asyncToGenerator((function*(e){const{field:t,field2:n,field3:i,normalizationField:a,valueExpression:s}=e;let o=[];if(s){if(!g){const{arcadeUtils:e}=yield r.loadArcade();g=e}o=g.extractFieldNames(s)}return t&&o.push(t),n&&o.push(n),i&&o.push(i),a&&o.push(a),o}))).apply(this,arguments)}function f(e){let t=e.normalizationType;return t||(e.normalizationField?t=o:null!=e.normalizationTotal&&(t=s)),t}function p(e){return String(e).padStart(2,"0")}function m(e,t,r){let n;if("date"===t||"number"===t){"number"===t&&(e=new Date(e));n=`TIMESTAMP'${r?e.getFullYear():e.getUTCFullYear()}-${p((r?e.getMonth():e.getUTCMonth())+1)}-${p(r?e.getDate():e.getUTCDate())} ${p(r?e.getHours():e.getUTCHours())}:${p(r?e.getMinutes():e.getUTCMinutes())}:${p(r?e.getSeconds():e.getUTCSeconds())}'`}else n=e;return n}function y(e,t,r,n){const{hasQueryEngine:i}=e;let a=`(${m(r,h(e,r),i)} - ${m(t,h(e,t),i)})`;i&&(a=`(${a} * ${l.milliseconds})`);let s=l[n],o="/";s<1&&(s=1/s,o="*");return{sqlExpression:1===s?a:`(${a} ${o} ${s})`,sqlWhere:null}}function h(e,t){if(t instanceof Date)return"date";if("number"==typeof t)return"number";if("string"==typeof t){const r=e.getField(t);if("<now>"===t.toLowerCase())return;if(r&&"date"===r.type)return"field"}}function T(e,t=a){for(const r in t)if(t[r].includes(e))return r}function $(e,t,r=!0){let i=null;return e&&("string"==typeof e?t.includes(e)&&(i=e):i=n.getWellKnownBasemapId(e)),r?i||"gray":i}function v(e,t){const r=t&&e.getField(t);return r&&c.includes(r.type)}function F(e){return`cast(${e} as float)`}e.FIELD_DELIMITER=i,e.castIntegerFieldToFloat=F,e.defaultBasemapGroups=a,e.getBasemapGroup=T,e.getBasemapId=$,e.getDateDiffSQL=y,e.getDateType=h,e.getFieldsList=u,e.getNormalizationType=f,e.isIntegerField=v,e.unitValueInDays=l,Object.defineProperty(e,Symbol.toStringTag,{value:"Module"})}));
