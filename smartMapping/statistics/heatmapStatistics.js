/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.21/esri/copyright.txt for details.
*/
define(["../../chunks/_rollupPluginBabelHelpers","../../core/Error","../../core/maybe","../../layers/support/fieldUtils","./support/utils","../support/utils","../support/adapters/support/layerUtils"],(function(e,t,i,r,a,s,n){"use strict";const l=r.numericTypes;function p(e){return u.apply(this,arguments)}function u(){return(u=e._asyncToGenerator((function*(e){if(!(e&&e.layer&&e.view))throw new t("heatmap-statistics:missing-parameters","'layer' and 'view' parameters are required");const r=[0,2,3,1,6],{layer:p,...u}=e,o=n.createLayerAdapter(p,r),c={layerAdapter:o,...u};if(c.blurRadius=null==c.blurRadius?10:c.blurRadius,!o)throw new t("heatmap-statistics:invalid-parameters","'layer' must be one of these types: "+n.getLayerTypeLabels(r).join(", "));const y=i.isSome(c.signal)?{signal:c.signal}:null;yield o.load(y);const d=c.field,f=d?o.getField(d):null,h=yield s.getFieldsList({field:d}),m=a.verifyBasicFieldValidity(o,h,"heatmap-statistics:invalid-parameters");if(m)throw m;if(f){const e=a.verifyFieldType(o,f,"heatmap-statistics:invalid-parameters",l);if(e)throw e}return c}))).apply(this,arguments)}function o(e){return c.apply(this,arguments)}function c(){return(c=e._asyncToGenerator((function*(e){const{layerAdapter:t,...i}=yield p(e);return t.heatmapStatistics(i)}))).apply(this,arguments)}return o}));
