/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.20/esri/copyright.txt for details.
*/
define(["../../chunks/_rollupPluginBabelHelpers","../../core/Error","../../core/maybe","./support/utils","../support/adapters/support/layerUtils"],(function(e,r,t,a,i){"use strict";function n(e){return s.apply(this,arguments)}function s(){return(s=e._asyncToGenerator((function*(e){if(!(e&&e.layer&&e.view&&e.fields))throw new r("predominant-categories:missing-parameters","'layer', 'view' and 'fields' parameters are required");const n=[0,2,1,3,4,5],{layer:s,...o}=e,l=i.createLayerAdapter(s,n),p={layerAdapter:l,...o};if(!l)throw new r("predominant-categories:invalid-parameters","'layer' must be one of these types: "+i.getLayerTypeLabels(n).join(", "));const u=t.isSome(p.signal)?{signal:p.signal}:null;yield Promise.all([p.view.when(),l.load(u)]);const c=a.verifyBasicFieldValidity(l,p.fields,"predominant-categories:invalid-parameters");if(c)throw c;return p}))).apply(this,arguments)}function o(e){return l.apply(this,arguments)}function l(){return(l=e._asyncToGenerator((function*(e){const{layerAdapter:r,...t}=yield n(e);return r.predominantCategories(t)}))).apply(this,arguments)}return o}));
