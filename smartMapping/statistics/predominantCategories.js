/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.18/esri/copyright.txt for details.
*/
define(["../../core/maybe","../../core/Error","../../core/promiseUtils","./support/utils","../support/adapters/support/layerUtils"],(function(e,r,a,i,t){"use strict";return async function(s){const{layerAdapter:n,...o}=await async function(s){if(!(s&&s.layer&&s.view&&s.fields))throw new r("predominant-categories:missing-parameters","'layer', 'view' and 'fields' parameters are required");const n=[0,2,1,3,4],{layer:o,...l}=s,p=t.createLayerAdapter(o,n),d={layerAdapter:p,...l};if(!p)throw new r("predominant-categories:invalid-parameters","'layer' must be one of these types: "+t.getLayerTypeLabels(n).join(", "));const c=e.isSome(d.signal)?{signal:d.signal}:null;await a.all([d.view.when(),p.load(c)]);const y=i.verifyBasicFieldValidity(p,d.fields,"predominant-categories:invalid-parameters");if(y)throw y;return d}(s);return n.predominantCategories(o)}}));
