/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.26/esri/copyright.txt for details.
*/
define(["../../chunks/_rollupPluginBabelHelpers","../../core/Error","../../core/maybe","./support/utils","../support/binningUtils","../support/adapters/support/layerUtils"],(function(e,r,n,i,a,t){"use strict";function s(e){return o.apply(this,arguments)}function o(){return(o=e._asyncToGenerator((function*(e){if(!(e&&e.layer&&e.view&&e.fields))throw new r("predominant-categories:missing-parameters","'layer', 'view' and 'fields' parameters are required");e.forBinning&&a.verifyBinningParams(e,"predominant-categories");const{layer:s,...o}=e,l=e.forBinning?t.binningCapableLayerTypes:t.defaultSupportedLayerTypes,p=t.createLayerAdapter(s,l,e.forBinning),u={layerAdapter:p,...o};if(!p)throw new r("predominant-categories:invalid-parameters","'layer' must be one of these types: "+t.getLayerTypeLabels(l).join(", "));const y=n.isSome(u.signal)?{signal:u.signal}:null;yield Promise.all([u.view.when(),p.load(y)]);const d=i.verifyBasicFieldValidity(p,u.fields,"predominant-categories:invalid-parameters");if(d)throw d;return u}))).apply(this,arguments)}function l(e){return p.apply(this,arguments)}function p(){return(p=e._asyncToGenerator((function*(e){const{layerAdapter:r,...n}=yield s(e);return r.predominantCategories(n)}))).apply(this,arguments)}return l}));
