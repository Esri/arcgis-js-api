/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.18/esri/copyright.txt for details.
*/
define(["../../core/promiseUtils","../../geometry/support/coordsUtils"],(function(t,n){"use strict";function e(t,e=!1){let o=[];if(e){for(const n of t)if(n.geometry){const t=n.geometry;o.push.apply(o,t.points)}}else o=t.map((t=>t.geometry));const i=[],l=[];let s=1/0,c=-1/0,r=0,u=0,f=0,a=0;for(const t of o){if(!t)continue;e?(i[0]=t[0],i[1]=t[1]):(i[0]=t.x,i[1]=t.y);let g=1/0,m=-1/0;for(const r of o){if(r===t)continue;if(!r)continue;e?(l[0]=r[0],l[1]=r[1]):(l[0]=r.x,l[1]=r.y);const o=n.getLength(i,l);o>0&&(o<g&&(g=o),o<s&&(s=o),o>m&&(m=o),o>c&&(c=o))}g!==1/0&&(++f,r+=g),m!==-1/0&&(++a,u+=m)}return{minDistance:s!==1/0?s:null,maxDistance:c!==-1/0?c:null,avgMinDistance:f?r/f:null,avgMaxDistance:a?u/a:null}}return function(o){const{features:i}=o;let l=null;switch(o.geometryType){case"point":l=e(i);break;case"multipoint":l=e(i,!0);break;case"polyline":l=function(t){let e=0,o=0,i=1/0,l=-1/0;for(const s of t){const t=s.geometry;if(t){let s=0;for(const e of t.paths){const t=n.getPathLength(e);t>0&&(s+=t)}s>0&&(++e,o+=s,s<i&&(i=s),s>l&&(l=s))}}return{minLength:i!==1/0?i:null,maxLength:l!==-1/0?l:null,avgLength:e?o/e:null}}(i);break;case"polygon":l=function(t){let n=0,e=0,o=1/0,i=-1/0;for(const l of t){const t=l.geometry;if(t){const l=t.extent;if(l){const t=Math.sqrt(l.width*l.height);t>0&&(++n,e+=t,t<o&&(o=t),t>i&&(i=t))}}}return{minSize:o!==1/0?o:null,maxSize:i!==-1/0?i:null,avgSize:n?e/n:null}}(i)}return t.resolve(l)}}));
