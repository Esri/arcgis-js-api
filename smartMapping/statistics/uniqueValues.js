/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.25/esri/copyright.txt for details.
*/
define(["../../chunks/_rollupPluginBabelHelpers","../../core/Error","../../core/maybe","./support/utils","../support/binningUtils","../support/utils","../support/adapters/support/layerUtils"],(function(e,i,r,s,n,a,t){"use strict";function l(e){return u.apply(this,arguments)}function u(){return(u=e._asyncToGenerator((function*(e){if(!e||!e.layer||!e.field&&!e.valueExpression)throw new i("unique-values:missing-parameters","'layer' and 'field' or 'valueExpression' parameters are required");const l=e.valueExpression||e.sqlExpression,u=l&&!e.sqlExpression;if(l)if(u){if(!e.view)throw new i("unique-values:missing-parameters","View is required when 'valueExpression' is specified")}else if(!e.valueExpression)throw new i("unique-values:missing-parameters","'valueExpression' parameters are required");e.forBinning&&n.verifyBinningParams(e,"unique-values");const{layer:o,...p}=e,f=e.forBinning?t.binningCapableLayerTypes:t.defaultSupportedLayerTypes,d=t.createLayerAdapter(o,f,e.forBinning),y={layerAdapter:d,...p};if(!d)throw new i("unique-values:invalid-parameters","'layer' must be one of these types: "+t.getLayerTypeLabels(f).join(", "));const c=r.isSome(y.signal)?{signal:y.signal}:null;yield d.load(c);const v=yield a.getFieldsList({field:y.field,field2:y.field2,field3:y.field3,valueExpression:y.valueExpression}),m=s.verifyBasicFieldValidity(d,v,"unique-values:invalid-parameters");if(m)throw m;const g=s.verifyFilterValidty(y.filter,"summary-statistics:invalid-parameters");if(g)throw g;return y}))).apply(this,arguments)}function o(e){return p.apply(this,arguments)}function p(){return(p=e._asyncToGenerator((function*(e){const{layerAdapter:i,...r}=yield l(e);return i.uniqueValues(r)}))).apply(this,arguments)}return o}));
