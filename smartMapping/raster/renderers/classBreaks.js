/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.19/esri/copyright.txt for details.
*/
define(["exports","../../../core/maybe","../../../core/Error","../../../intl/number","../../../renderers/support/rasterRendererHelper","../support/utils"],(function(e,r,a,s,t,n){"use strict";async function o(e){const s=(e=await n.processRasterRendererParameters(e)).layer,{rasterInfo:t}=s;if(t.bandCount>1)throw new a("raster-class-breaks-renderer:not-supported","Multiband raster is not supported");if(!r.isSome(t.attributeTable)&&!r.isSome(t.histograms)&&(await s.updateRasterInfoWithEstimatedStats({renderingRule:e.renderingRule,signal:e.signal}),!r.isSome(t.histograms)))throw new a("raster-class-breaks-renderer:not-supported","Histograms or raster attribute table is required on the source raster. Unable to estimate histograms");const{colors:o,numClasses:i}=e;if(o&&i&&o.length!==i)throw new a("raster-class-breaks-renderer:not-supported","The size of the `colors` parameter does not match 'numClasses'");return e.field||(e.field="value"),e.classificationMethod||(e.classificationMethod="natural-breaks"),e}async function i(e){e=await o(e);const s=t.createClassBreaksRenderer(e.layer.rasterInfo,e);if(!r.isSome(s))throw new a("raster-class-breaks-renderer:not-supported","Class breaks renderer is not supported on this data");const n={minValue:s.minValue,maxValue:s.classBreakInfos[s.classBreakInfos.length-1].maxValue,normalizationTotal:null,classBreakInfos:s.classBreakInfos.map((e=>{const r=l(e.minValue,e.maxValue);return e.label=r,{minValue:e.minValue,maxValue:e.maxValue,label:r}}))};return{renderer:s,classBreaksResult:n}}function l(e,r){return s.formatNumber(e,{maximumFractionDigits:3})+" - "+s.formatNumber(r,{maximumFractionDigits:3})}e.createRenderer=i,Object.defineProperty(e,"__esModule",{value:!0})}));
