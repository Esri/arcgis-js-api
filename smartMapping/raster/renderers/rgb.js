/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.19/esri/copyright.txt for details.
*/
define(["exports","../../../core/Error","../../../renderers/support/rasterRendererHelper","../support/utils"],(function(e,r,t,n){"use strict";async function a(e){e=await n.processRasterRendererParameters(e);const{rasterInfo:a}=e.layer;if(1===a.bandCount)throw new r("raster-rgb-renderer:not-supported","Only multiband image is supported");const{rgbBandIds:s}=e;if(s&&3!==s.length)throw new r("raster-rgb-renderer:invalid-parameters","rgb band ids must have exactly three 0-based band indices");return s||(e.rgbBandIds=t.getDefaultBandCombination(a)),e}async function s(e){const r=(e=await a(e)).layer,{rasterInfo:n}=r,{rgbBandIds:s}=e,i={bandIds:s,stretchType:e.stretchType};let u=t.createStretchRenderer(n,i);return e.estimateStatistics&&u.dynamicRangeAdjustment&&(await r.updateRasterInfoWithEstimatedStats({renderingRule:e.renderingRule,signal:e.signal}),u=t.createStretchRenderer(n,i)),d(u,e),{renderer:u,rgbBandIds:s}}function d(e,r){const{gamma:t,useGamma:n,dynamicRangeAdjustment:a}=r;3===(null==t?void 0:t.length)&&(e.gamma=t),null!=n&&(e.useGamma=n),null!=a&&(e.dynamicRangeAdjustment=a)}e.createRenderer=s,Object.defineProperty(e,"__esModule",{value:!0})}));
