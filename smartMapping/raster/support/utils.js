/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.19/esri/copyright.txt for details.
*/
define(["exports","../../../core/Error","../../../renderers/support/rasterRendererHelper","./adapters/ImageryLayerAdapter","./adapters/ImageryTileLayerAdapter"],(function(e,r,a,t,s){"use strict";const n={imagery:{adapter:t,label:"ImageryLayer"},"imagery-tile":{adapter:s,label:"ImageryTileLayer"},wcs:{adapter:s,label:"WCSLayer"}},l={"raster-stretch":"raster-stretch","unique-value":"raster-unique-value","raster-rgb":"raster-rgb","class-breaks":"raster-class-breaks","raster-colormap":"raster-colormap","raster-shaded-relief":"raster-shaded-relief","vector-field":"raster-vector-field"},d=Object.keys(n).map((e=>n[e].label));function o(e){var r;if("raster-layer-adapter"===e.type)return e;const a=null==(r=n[e.type])?void 0:r.adapter;return null==a?null:new a({layer:e})}async function i(e){const r=o((e=await p(e)).layer),t=await r.generateRasterInfo(e),s=a.getSupportedRendererTypes(t).map((e=>l[e])),n=a.createDefaultRenderer(t),{bandCount:d}=t;return d>1&&s.push("raster-rgb"),{supportedTypes:s,defaultRenderer:n}}async function p(e){const{layer:a}=e;if(!a)throw new r("raster-renderer-creator:missing-parameters","'layer' parameter is required");const t=o(a);if(null==t)throw new r("raster-renderer-creator:invalid-parameters","'layer' must be one of these types: "+d.join(", "));return await t.load(),await t.updateRasterInfo({renderingRule:e.renderingRule,signal:e.signal}),{...e,layer:t}}e.createRasterLayerAdapter=o,e.getSupportedRendererInfo=i,e.processRasterRendererParameters=p,Object.defineProperty(e,"__esModule",{value:!0})}));
