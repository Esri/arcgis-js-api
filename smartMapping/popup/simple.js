/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.18/esri/copyright.txt for details.
*/
define(["exports","../../core/Error","../../core/promiseUtils","../../PopupTemplate","../../intl/messages","./support/utils"],(function(e,r,n,s,t,i){"use strict";async function a(e){const{layer:n,renderer:s}=e;await n.load();const t=s||n.renderer;if("simple"!==t.type)throw new r("simple-popup:invalid-parameters","renderer.type must be 'simple'");return{layer:n,renderer:t}}async function l(e,r,n="divide"){const{fieldInfos:t,expressionInfos:a}=await i.getFieldAndExpressionInfos({renderer:e,layer:r,normFieldExpressionTemplate:n});return new s({content:await i.getContentFromFieldInfos(r,{fieldInfos:t,expressionInfos:a}),expressionInfos:a,fieldInfos:t})}e.getTemplates=async function(e){const[{renderer:r,layer:s},o]=await n.all([a(e),t.fetchMessageBundle("esri/smartMapping/t9n/smartMapping")]),p=[];if(!i.getPrimaryVisualVariables(r).length)return null;const m={name:"simple",title:o.simple,value:await l(r,s)};return i.hasNormalizedField(r)&&p.push({name:"simple-percent",title:o.simpleNormFieldAsPercent,value:await l(r,s,"percentage")}),{primaryTemplate:m,secondaryTemplates:p}},Object.defineProperty(e,"__esModule",{value:!0})}));
