/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.18/esri/copyright.txt for details.
*/
define(["exports","../../core/Error","../../core/promiseUtils","../../PopupTemplate","../../intl/messages","./support/utils"],(function(e,n,r,s,t,a){"use strict";async function i(e){const{layer:r,renderer:s}=e;await r.load();const t=s||r.renderer;if("unique-value"!==t.type)throw new n("unique-values-popup:invalid-parameters","renderer.type must be 'unique-value'");return{layer:r,renderer:t}}async function o(e,n,r="divide"){const{fieldInfos:t,expressionInfos:i}=await a.getFieldAndExpressionInfos({renderer:e,layer:n,normFieldExpressionTemplate:r});return new s({content:await a.getContentFromFieldInfos(n,{fieldInfos:t,expressionInfos:i}),fieldInfos:t,expressionInfos:i})}e.getTemplates=async function(e){const[{renderer:n,layer:s},u]=await r.all([i(e),t.fetchMessageBundle("esri/smartMapping/t9n/smartMapping")]),l={name:"unique-values",title:u.uniqueValues,value:await o(n,s)},p=[];return a.hasNormalizedField(n)&&p.push({name:"unique-values-percent",title:u.uniqueValuesNormFieldAsPercent,value:await o(n,s,"percentage")}),{primaryTemplate:l,secondaryTemplates:p}},Object.defineProperty(e,"__esModule",{value:!0})}));
