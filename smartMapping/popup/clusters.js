/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.26/esri/copyright.txt for details.
*/
define(["exports","../../chunks/_rollupPluginBabelHelpers","../../PopupTemplate","../../core/Error","../../core/maybe","../../intl/messages","./support/clusterUtils","../../views/2d/layers/support/clusterUtils"],(function(e,t,r,n,s,l,i,o){"use strict";function p(e){return u.apply(this,arguments)}function u(){return(u=t._asyncToGenerator((function*(e){const{layer:t,renderer:r}=e;yield t.load();const s=r||t.renderer;if(!o.isClusterCompatibleRenderer(s))throw new n("clusters-popup:invalid-parameters","'renderer' is not valid");return{layer:t,renderer:s}}))).apply(this,arguments)}function a(e){return c.apply(this,arguments)}function c(){return(c=t._asyncToGenerator((function*(e){const[{renderer:t,layer:n},o]=yield Promise.all([p(e),l.fetchMessageBundle("esri/smartMapping/t9n/smartMapping")]),u=yield i.getContentAndInfos(n,t,o);if(!s.isSome(u))return null;const a={name:"clusters",title:o.clusters.templateTitle,value:new r({fieldInfos:u.fieldInfos,expressionInfos:u.expressionInfos,content:u.content,title:o.clusters.clusterPopupTitle})},c=[],d=n.featureReduction,f=d&&"renderer"in d?d.renderer:null;if("pie-chart"===f?.type){const e=yield i.getContentAndInfosForPieChart(n,f,o);s.isSome(e)&&c.push({name:"clusters-pie-chart",title:"clusters-pie-chart",value:new r({fieldInfos:e.fieldInfos,expressionInfos:e.expressionInfos,content:e.content,title:o.clusters.clusterPopupTitle})})}return{primaryTemplate:a,secondaryTemplates:c}}))).apply(this,arguments)}e.getTemplates=a,Object.defineProperty(e,Symbol.toStringTag,{value:"Module"})}));
