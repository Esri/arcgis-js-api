/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.25/esri/copyright.txt for details.
*/
define(["exports","../../chunks/_rollupPluginBabelHelpers","../../PopupTemplate","../../core/Error","../../core/maybe","../../intl/messages","./support/clusterUtils","../../views/2d/layers/support/clusterUtils"],(function(e,t,r,n,s,l,i,o){"use strict";function u(e){return a.apply(this,arguments)}function a(){return(a=t._asyncToGenerator((function*(e){const{layer:t,renderer:r}=e;yield t.load();const s=r||t.renderer;if(!o.isClusterCompatibleRenderer(s))throw new n("clusters-popup:invalid-parameters","'renderer' is not valid");return{layer:t,renderer:s}}))).apply(this,arguments)}function p(e){return c.apply(this,arguments)}function c(){return(c=t._asyncToGenerator((function*(e){const[{renderer:t,layer:n},o]=yield Promise.all([u(e),l.fetchMessageBundle("esri/smartMapping/t9n/smartMapping")]),a=yield i.getContentAndInfos(n,t,o);if(!s.isSome(a))return null;const p={name:"clusters",title:o.clusters.templateTitle,value:new r({fieldInfos:a.fieldInfos,expressionInfos:a.expressionInfos,content:a.content,title:o.clusters.clusterPopupTitle})},c=[],d=n.featureReduction,f=d&&"renderer"in d?d.renderer:null;if("pie-chart"===f?.type){const e=yield i.getContentAndInfosForPieChart(n,f,o);s.isSome(e)&&c.push({name:"clusters-pie-chart",title:"clusters-pie-chart",value:new r({fieldInfos:e.fieldInfos,expressionInfos:e.expressionInfos,content:e.content,title:o.clusters.clusterPopupTitle})})}return{primaryTemplate:p,secondaryTemplates:c}}))).apply(this,arguments)}e.getTemplates=p,Object.defineProperties(e,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})}));
