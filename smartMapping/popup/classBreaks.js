/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.18/esri/copyright.txt for details.
*/
define(["exports","../../core/Error","../../core/promiseUtils","../../PopupTemplate","../../intl/messages","./support/utils"],(function(e,s,r,a,n,t){"use strict";async function i(e){const{layer:r,renderer:a}=e;await r.load();const n=a||r.renderer;if("class-breaks"!==n.type)throw new s("class-breaks-popup:invalid-parameters","renderer.type must be 'class-breaks'");return{layer:r,renderer:n}}async function o(e,s,r="divide"){const{fieldInfos:n,expressionInfos:i}=await t.getFieldAndExpressionInfos({renderer:e,layer:s,normFieldExpressionTemplate:r});return new a({content:await t.getContentFromFieldInfos(s,{fieldInfos:n,expressionInfos:i}),fieldInfos:n,expressionInfos:i})}e.getTemplates=async function(e){const[{renderer:s,layer:a},l]=await r.all([i(e),n.fetchMessageBundle("esri/smartMapping/t9n/smartMapping")]),p={name:"class-breaks",title:l.classBreaks,value:await o(s,a)},c=[];return t.hasNormalizedField(s)&&c.push({name:"class-breaks-percent",title:l.classBreaksNormFieldAsPercent,value:await o(s,a,"percentage")}),{primaryTemplate:p,secondaryTemplates:c}},Object.defineProperty(e,"__esModule",{value:!0})}));
