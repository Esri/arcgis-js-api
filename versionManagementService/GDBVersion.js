/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.26/esri/copyright.txt for details.
*/
define(["require","../chunks/_rollupPluginBabelHelpers","../chunks/tslib.es6","../core/Error","../core/JSONSupport","../core/Loadable","../core/uuid","../core/accessorSupport/decorators/property","../core/accessorSupport/ensureType","../core/arrayUtils","../core/accessorSupport/decorators/subclass"],(function(e,r,i,t,s,n,o,u,a,d,c){"use strict";let p=function(i){r._inheritsLoose(n,i);var s=n.prototype;function n(e){var r;return(r=i.call(this,e)||this)._sessionId=null,r.url=null,r.sourceJSON=null,r.id=null,r.description=null,r.creationDate=null,r.access="private",r}return s.read=function(e,r){this.sourceJSON=e,i.prototype.read.call(this,e,r)},s.load=function(e){return this.addResolvingPromise(this._loadFromSource()),Promise.resolve(this)},s.startReading=function(){var i=r._asyncToGenerator((function*(){if(this.url){const{startReading:r}=yield new Promise(((r,i)=>e(["../rest/versionManagementService/gdbVersion/startReading"],r,i)));this._sessionId||(this._sessionId=`{${o.generateUUID()}}`);return yield r(this.url,this.guid,this._sessionId)}throw new t("gdb-version:missing-url","service url is missing")}));function s(){return i.apply(this,arguments)}return s}(),s.stopReading=function(){var i=r._asyncToGenerator((function*(){if(this.url){if(!this._sessionId)throw new t("gdb-version:missing-session-id","reading session has not been started");const{stopReading:r}=yield new Promise(((r,i)=>e(["../rest/versionManagementService/gdbVersion/stopReading"],r,i))),i=yield r(this.url,this.guid,this._sessionId);return i&&(this._sessionId=null),i}throw new t("gdb-version:missing-url","service url is missing")}));function s(){return i.apply(this,arguments)}return s}(),s.startEditing=function(){var i=r._asyncToGenerator((function*(){if(this.url){if(!this._sessionId)throw new t("gdb-version:missing-session-id","reading session has not been started");const{startEditing:r}=yield new Promise(((r,i)=>e(["../rest/versionManagementService/gdbVersion/startEditing"],r,i)));return yield r(this.url,this.guid,this._sessionId)}throw new t("gdb-version:missing-url","service url is missing")}));function s(){return i.apply(this,arguments)}return s}(),s.stopEditing=function(){var i=r._asyncToGenerator((function*(r){if(this.url){if(!this._sessionId)throw new t("gdb-version:missing-session-id","reading session has not been started");const{stopEditing:i}=yield new Promise(((r,i)=>e(["../rest/versionManagementService/gdbVersion/stopEditing"],r,i)));return yield i(this.url,this.guid,this._sessionId,r)}throw new t("gdb-version:missing-url","service url is missing")}));function s(e){return i.apply(this,arguments)}return s}(),s.getStatusInfo=function(){var e=r._asyncToGenerator((function*(){if(this.url){return yield this._loadFromUrl(this.url,this.guid)}throw new t("gdb-version:missing-url","service url is missing")}));function i(){return e.apply(this,arguments)}return i}(),s._loadFromSource=function(){var e=r._asyncToGenerator((function*(){this.sourceJSON&&this.read(this.sourceJSON),this.url&&this.guid&&(yield this._loadFromUrl(this.url,this.guid))}));function i(){return e.apply(this,arguments)}return i}(),s._loadFromUrl=function(){var i=r._asyncToGenerator((function*(r,i){const{getVersion:t}=yield new Promise(((r,i)=>e(["../rest/versionManagementService/getVersion"],r,i))),s=yield t(r,i);return s&&this.read(s),s}));function t(e,r){return i.apply(this,arguments)}return t}(),n}(s.JSONSupportMixin(n));i.__decorate([u.property()],p.prototype,"_sessionId",void 0),i.__decorate([u.property()],p.prototype,"url",void 0),i.__decorate([u.property()],p.prototype,"sourceJSON",void 0),i.__decorate([u.property({type:String,json:{name:"versionName",write:!0}})],p.prototype,"name",void 0),i.__decorate([u.property({type:String,json:{name:"versionGuid",write:!0}})],p.prototype,"guid",void 0),i.__decorate([u.property({type:Number,json:{name:"versionId",write:!0}})],p.prototype,"id",void 0),i.__decorate([u.property({type:String,json:{write:!0}})],p.prototype,"description",void 0),i.__decorate([u.property({type:Date,json:{type:Number,write:{writer:(e,r)=>{r.creationDate=e?e.getTime():null}}}})],p.prototype,"creationDate",void 0),i.__decorate([u.property({type:["private","public","protected","hidden"],json:{write:!0}})],p.prototype,"access",void 0),p=i.__decorate([c.subclass("esri.versionManagementService.GDBVersion")],p);return p}));
