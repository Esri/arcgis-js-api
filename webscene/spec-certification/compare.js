/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.18/esri/copyright.txt for details.
*/
define(["exports","./utils"],(function(e,n){"use strict";function t(e,n,c,o,p,s,r,u,f){if(r.has(o))return f;for(const l of o.properties){const d=n?`${n}.${l.name}`:l.name,m=c?`${c}.${l.name}`:l.name,y=p[m];if(y){const n=s[y[e].id];f.push({name:d,type:"ref",ref:y,refName:n}),i(e,m,y[e],p,s,u)}else"string"==typeof l.type?f.push(a(d,l)):(r.add(o),t(e,d,m,l.type,p,s,r,u,f))}return r.delete(o),f}function i(e,n,i,a,o,p){if(i.id in p)return p;const s={container:i,text:null,props:[]};return o[i.id].forEach((e=>p[e]=s)),t(e,"",n,i,a,o,new Set,p,s.props),s.props.sort(c),p}function a(e,n){return{name:e,type:n.enum||("string"==typeof n.type?n.type:""),default:JSON.stringify(n.default)}}function c(e,n){const t=e.name.localeCompare(n.name);if(0!==t)return t;const i=(e.type||"").localeCompare(n.type||"");return 0!==i?i:(e.default||"").localeCompare(n.default||"")}e.collect=function(e){const t=function(e){const t=n.collectClassPaths(e.api),i=n.collectClassPaths(e.spec),a={};a[""]={api:e.api,spec:e.spec};for(const e in t){const n=i[e];if(n){const i=t[e];a[e]={api:i,spec:n}}}return a}(e),a=[],c=function(e){const n={api:{},spec:{}};for(const t in e){const i=e[t],a=`${i.api.name} (${i.spec.name})${i.api.typeValue?` <${i.api.typeValue}>`:""}`;let c=n.api[i.api.id];c||(c=new Set,n.api[i.api.id]=c),c.add(a);let o=n.spec[i.spec.id];o||(o=new Set,n.spec[i.spec.id]=o),o.add(a)}return n}(t),o={};i("api","",e.api,t,c.api,o);const p={};i("spec","",e.spec,t,c.spec,p);const s=function(e){const n={};for(const t in e){const i=t?t.split(".").length:0,a=e[t].api.id;n[a]=a in n?Math.min(i,n[a]):i}return n}(t);for(const e in o){const n=o[e],t=p[e],i=s[n.container.id],c=`${n.container.name} (${t.container.name})${n.container.typeValue?` <${n.container.typeValue}>`:""}`;a.push({name:c,api:n,spec:t,indent:i})}return a},Object.defineProperty(e,"__esModule",{value:!0})}));
