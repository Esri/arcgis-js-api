/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.18/esri/copyright.txt for details.
*/
define(["exports","../../intl/number","../../intl"],(function(t,n,e){"use strict";const r=/^-?(\d+)(\.(\d+))?$/i;function o(t,n){return t-n}function i(t,n){let e,r;return e=Number(t.toFixed(n)),e<t?r=e+1/Math.pow(10,n):(r=e,e-=1/Math.pow(10,n)),e=Number(e.toFixed(n)),r=Number(r.toFixed(n)),[e,r]}function u(t,n,e,r,o){const i=c(t,n,e,r),u=null==i.previous||i.previous<=o,l=null==i.next||i.next<=o;return u&&l||i.previous+i.next<=2*o}function l(t){const n=String(t),e=n.match(r);if(e&&e[1])return{integer:e[1].split("").length,fractional:e[3]?e[3].split("").length:0};if(n.toLowerCase().indexOf("e")>-1){const t=n.split("e"),e=t[0],r=t[1];if(e&&r){const t=Number(e);let n=Number(r);const o=n>0;o||(n=Math.abs(n));const i=l(t);return o?(i.integer+=n,n>i.fractional?i.fractional=0:i.fractional-=n):(i.fractional+=n,n>i.integer?i.integer=1:i.integer-=n),i}}return{integer:0,fractional:0}}function c(t,n,e,r){const o={previous:null,next:null};if(null!=e){const r=t-e,i=n-e-r;o.previous=Math.floor(Math.abs(100*i/r))}if(null!=r){const e=r-t,i=r-n-e;o.next=Math.floor(Math.abs(100*i/e))}return o}const s={maximumFractionDigits:20};t.format=function(t){return n.formatNumber(t,s)},t.numDigits=l,t.percentChange=c,t.round=function(t,n={}){const e=t.slice(0),{tolerance:r=2,strictBounds:c=!1,indexes:s=e.map(((t,n)=>n))}=n;s.sort(o);for(let t=0;t<s.length;t++){const n=s[t],o=e[n],a=0===n?null:e[n-1],f=n===e.length-1?null:e[n+1],m=l(o).fractional;if(m){let l,s=0,g=!1;for(;s<=m&&!g;){const n=i(o,s);l=c&&0===t?n[1]:n[0],g=u(o,l,a,f,r),s++}g&&(e[n]=l)}}return e},Object.defineProperty(t,"__esModule",{value:!0})}));
