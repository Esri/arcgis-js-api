/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.25/esri/copyright.txt for details.
*/
define(["exports","../../core/Error","../../core/object","./parser","./utils"],(function(e,t,s,r,n){"use strict";function a(e,t,s){try{return u(e)}catch(r){s?.messages?.push(r)}return null}function c(e,t,r,n){try{const n=o(e);s.setDeepValue(r,n,t)}catch(a){n.messages&&n.messages.push(a)}}function o(e){const t=r.parse(e);return t?n.isEffectFunctions(t)?t.map((e=>e.toJSON())):t.map((({scale:e,effects:t})=>({scale:e,value:t.map((e=>e.toJSON()))}))):null}function u(e){if(!e||0===e.length)return null;if(i(e)){const t=[];for(const s of e)t.push({scale:s.scale,value:f(s.value)});return t}return f(e)}function i(e){const t=e[0];return!!t&&"scale"in t}function f(e){if(!e||!e.length)return"";const t=[];for(const s of e){let e=[];switch(s.type){case"grayscale":case"sepia":case"saturate":case"invert":case"brightness":case"contrast":case"opacity":e=[l(s,"amount")];break;case"blur":e=[l(s,"radius","pt")];break;case"hue-rotate":e=[l(s,"angle","deg")];break;case"drop-shadow":e=[l(s,"xoffset","pt"),l(s,"yoffset","pt"),l(s,"blurRadius","pt"),p(s,"color")];break;case"bloom":e=[l(s,"strength"),l(s,"radius","pt"),l(s,"threshold")]}const n=`${s.type}(${e.filter(Boolean).join(" ")})`;r.parse(n),t.push(n)}return t.join(" ")}function l(e,s,r){if(null==e[s])throw new t("effect:missing-parameter",`Missing parameter '${s}' in ${e.type} effect`,{effect:e});return r?e[s]+r:""+e[s]}function p(e,s){if(null==e[s])throw new t("effect:missing-parameter",`Missing parameter '${s}' in ${e.type} effect`,{effect:e});const r=e[s];return`rgba(${r[0]||0}, ${r[1]||0}, ${r[2]||0}, ${r[3]/255||0})`}e.effectFunctionsFromJSON=f,e.fromJSON=u,e.read=a,e.toJSON=o,e.write=c,Object.defineProperties(e,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})}));
