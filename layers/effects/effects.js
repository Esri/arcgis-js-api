/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.24/esri/copyright.txt for details.
*/
import{getNamedColor as t}from"../../colorUtils.js";import{px2pt as s}from"../../core/screenUtils.js";import{c as r}from"../../chunks/mat4f32.js";import{sepia as o,saturate as e,invert as i,grayscale as a,contrast as h,brightness as n,rotateHue as u}from"./colorMatrixFunctions.js";function c(t){return"colorMatrix"in t}class l{constructor(t,s,r){this.strength=t,this.radius=s,this.threshold=r,this.type="bloom"}interpolate(t,s,r){this.strength=y(t.strength,s.strength,r),this.radius=y(t.radius,s.radius,r),this.threshold=y(t.threshold,s.threshold,r)}clone(){return new l(this.strength,this.radius,this.threshold)}toJSON(){return{type:"bloom",radius:x(this.radius),strength:this.strength,threshold:this.threshold}}}class p{constructor(t){this.radius=t,this.type="blur"}interpolate(t,s,r){this.radius=Math.round(y(t.radius,s.radius,r))}clone(){return new p(this.radius)}toJSON(){return{type:"blur",radius:x(this.radius)}}}class d{constructor(t,s){this.type=t,this.amount=s,"invert"!==this.type&&"grayscale"!==this.type&&"sepia"!==this.type||(this.amount=Math.min(this.amount,1))}get colorMatrix(){return this._colorMatrix||this._updateMatrix(),this._colorMatrix}interpolate(t,s,r){this.amount=y(t.amount,s.amount,r),this._updateMatrix()}clone(){return new d(this.type,this.amount)}toJSON(){return{type:this.type,amount:this.amount}}_updateMatrix(){const t=this._colorMatrix||r();switch(this.type){case"brightness":this._colorMatrix=n(t,this.amount);break;case"contrast":this._colorMatrix=h(t,this.amount);break;case"grayscale":this._colorMatrix=a(t,this.amount);break;case"invert":this._colorMatrix=i(t,this.amount);break;case"saturate":this._colorMatrix=e(t,this.amount);break;case"sepia":this._colorMatrix=o(t,this.amount)}}}class m{constructor(t,s,r,o){this.offsetX=t,this.offsetY=s,this.blurRadius=r,this.color=o,this.type="drop-shadow"}interpolate(t,s,r){this.offsetX=y(t.offsetX,s.offsetX,r),this.offsetY=y(t.offsetY,s.offsetY,r),this.blurRadius=y(t.blurRadius,s.blurRadius,r),this.color[0]=Math.round(y(t.color[0],s.color[0],r)),this.color[1]=Math.round(y(t.color[1],s.color[1],r)),this.color[2]=Math.round(y(t.color[2],s.color[2],r)),this.color[3]=y(t.color[3],s.color[3],r)}clone(){return new m(this.offsetX,this.offsetY,this.blurRadius,[...this.color])}toJSON(){const t=[...this.color];return t[3]*=255,{type:"drop-shadow",xoffset:x(this.offsetX),yoffset:x(this.offsetY),blurRadius:x(this.blurRadius),color:t}}}class f{constructor(t){this.angle=t,this.type="hue-rotate"}get colorMatrix(){return this._colorMatrix||this._updateMatrix(),this._colorMatrix}interpolate(t,s,r){this.angle=y(t.angle,s.angle,r),this._updateMatrix()}clone(){return new f(this.angle)}toJSON(){return{type:"hue-rotate",angle:this.angle}}_updateMatrix(){const t=this._colorMatrix||r();this._colorMatrix=u(t,this.angle)}}class M{constructor(t){this.amount=t,this.type="opacity",this.amount=Math.min(this.amount,1)}interpolate(t,s,r){this.amount=y(t.amount,s.amount,r)}clone(){return new M(this.amount)}toJSON(){return{type:"opacity",amount:this.amount}}}function y(t,s,r){return t+(s-t)*r}function x(t){return Math.round(1e3*s(t))/1e3}function g(s){switch(s.type){case"grayscale":case"sepia":case"invert":return new d(s.type,0);case"saturate":case"brightness":case"contrast":return new d(s.type,1);case"opacity":return new M(1);case"hue-rotate":return new f(0);case"blur":return new p(0);case"drop-shadow":return new m(0,0,0,[...t("transparent")]);case"bloom":return new l(0,0,1)}}export{l as BloomEffect,p as BlurEffect,d as ColorMatrixEffect,m as DropShadowEffect,f as HueRotateEffect,M as OpacityEffect,g as createEffectWithInitialValues,c as isColorMatrixEffect};
