/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.25/esri/copyright.txt for details.
*/
define(["exports","../../geometry","../../Graphic","../../core/has","../../core/lang","../../core/maybe","../../core/typedArrayUtil","../../geometry/support/jsonUtils","./dehydratedFeatures","../../geometry/SpatialReference"],(function(e,t,n,r,a,s,i,o,l,c){"use strict";function u(e){return"declaredClass"in e}function m(e){return"declaredClass"in e}function h(e){return"declaredClass"in e}function y(e,t){if(!e)return null;if(h(e))return e;const r=new n({layer:t,sourceLayer:t});return r.visible=e.visible,r.symbol=a.clone(e.symbol),r.attributes=a.clone(e.attributes),r.geometry=f(e.geometry),r}function f(e){return s.isNone(e)?null:u(e)?e:o.fromJSON(d(e))}function d(e){const{wkid:t,wkt:n,latestWkid:r}=e.spatialReference,a={wkid:t,wkt:n,latestWkid:r};switch(e.type){case"point":{const{x:t,y:n,z:r,m:s}=e;return{x:t,y:n,z:r,m:s,spatialReference:a}}case"polygon":{const{rings:t,hasZ:n,hasM:r}=e;return{rings:p(t),hasZ:n,hasM:r,spatialReference:a}}case"polyline":{const{paths:t,hasZ:n,hasM:r}=e;return{paths:p(t),hasZ:n,hasM:r,spatialReference:a}}case"extent":{const{xmin:t,xmax:n,ymin:r,ymax:s,zmin:i,zmax:o,mmin:l,mmax:c,hasZ:u,hasM:m}=e;return{xmin:t,xmax:n,ymin:r,ymax:s,zmin:i,zmax:o,mmin:l,mmax:c,hasZ:u,hasM:m,spatialReference:a}}case"multipoint":{const{points:t,hasZ:n,hasM:r}=e;return{points:g(t)?x(t):t,hasZ:n,hasM:r,spatialReference:a}}default:return}}function p(e){return M(e)?e.map((e=>x(e))):e}function x(e){return e.map((e=>i.toArray(e)))}function M(e){for(const t of e)if(0!==t.length)return g(t);return!1}function g(e){return e.length&&(i.isFloat32Array(e[0])||i.isFloat64Array(e[0]))}function k(e,t){if(!e)return null;let n;if(m(e)){if(null==t)return e.clone();if(m(t))return t.copy(e)}return null!=t?(n=t,n.x=e.x,n.y=e.y,n.spatialReference=e.spatialReference,e.hasZ?(n.z=e.z,n.hasZ=e.hasZ):(n.z=null,n.hasZ=!1),e.hasM?(n.m=e.m,n.hasM=!0):(n.m=null,n.hasM=!1)):(n=l.makeDehydratedPoint(e.x,e.y,e.z,e.spatialReference),e.hasM&&(n.m=e.m,n.hasM=!0)),n}function Z(e){const{wkid:t,wkt:n,latestWkid:r}=e,a={wkid:t,wkt:n,latestWkid:r};return c.fromJSON(a)}e.clonePoint=k,e.hydrateGeometry=f,e.hydrateGraphic=y,e.hydratedSpatialReference=Z,e.isHydratedGeometry=u,e.isHydratedGraphic=h,e.isHydratedPoint=m,Object.defineProperties(e,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})}));
