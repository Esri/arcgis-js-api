/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.18/esri/copyright.txt for details.
*/
define(["exports","../../core/has","../../core/typedArrayUtil","../../core/lang","../../core/maybe","../../geometry/support/jsonUtils","../../Graphic","./dehydratedFeatures"],(function(e,n,t,r,a,s,i,o){"use strict";function c(e){return"declaredClass"in e}function l(e){return"declaredClass"in e}function u(e){return"declaredClass"in e}function m(e){return a.isNone(e)?null:c(e)?e:s.fromJSON(function(e){const n=e.spatialReference.toJSON();switch(e.type){case"point":{const{x:t,y:r,z:a,m:s}=e;return{x:t,y:r,z:a,m:s,spatialReference:n}}case"polygon":{const{rings:t,hasZ:r,hasM:a}=e;return{rings:h(t),hasZ:r,hasM:a,spatialReference:n}}case"polyline":{const{paths:t,hasZ:r,hasM:a}=e;return{paths:h(t),hasZ:r,hasM:a,spatialReference:n}}case"extent":{const{xmin:t,xmax:r,ymin:a,ymax:s,zmin:i,zmax:o,mmin:c,mmax:l,hasZ:u,hasM:m}=e;return{xmin:t,xmax:r,ymin:a,ymax:s,zmin:i,zmax:o,mmin:c,mmax:l,hasZ:u,hasM:m,spatialReference:n}}case"multipoint":{const{points:t,hasZ:r,hasM:a}=e;return{points:f(t)?y(t):t,hasZ:r,hasM:a,spatialReference:n}}default:return}}(e))}function h(e){return function(e){for(const n of e)if(0!==n.length)return f(n);return!1}(e)?e.map((e=>y(e))):e}function y(e){return e.map((e=>t.toArray(e)))}function f(e){return e.length&&(t.isFloat32Array(e[0])||t.isFloat64Array(e[0]))}e.clonePoint=function(e,n){if(!e)return null;let t;if(l(e)){if(null==n)return e.clone();if(l(n))return n.copy(e)}return null!=n?(t=n,t.x=e.x,t.y=e.y,t.spatialReference=e.spatialReference,e.hasZ?(t.z=e.z,t.hasZ=e.hasZ):(t.z=null,t.hasZ=!1),e.hasM?(t.m=e.m,t.hasM=!0):(t.m=null,t.hasM=!1)):(t=o.makeDehydratedPoint(e.x,e.y,e.z,e.spatialReference),e.hasM&&(t.m=e.m,t.hasM=!0)),t},e.hydrateGeometry=m,e.hydrateGraphic=function(e,n){if(!e)return null;if(u(e))return e;const t=new i({layer:n,sourceLayer:n});return t.visible=e.visible,t.symbol=r.clone(e.symbol),t.attributes=r.clone(e.attributes),t.geometry=m(e.geometry),t},e.isHydratedGeometry=c,e.isHydratedGraphic=u,e.isHydratedPoint=l,Object.defineProperty(e,"__esModule",{value:!0})}));
