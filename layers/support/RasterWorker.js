/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.18/esri/copyright.txt for details.
*/
define(["../../core/promiseUtils","../../geometry/Extent","../../geometry","./PixelBlock","./rasterFormats/RasterCodec","./rasterFunctions/pixelUtils","../../renderers/support/RasterSymbolizer"],(function(t,e,r,o,s,i,n){"use strict";return function(){function r(){}var c=r.prototype;return c.decode=async function(t){const e=await s.decode(t.data,t.options);return e&&e.toJSON()},c.symbolize=function(r){r.pixelBlock=o.fromJSON(r.pixelBlock),r.extent=r.extent?e.fromJSON(r.extent):null;const s=this.symbolizer.symbolize(r);return t.resolve(s&&s.toJSON())},c.updateSymbolizer=async function(t){var e;this.symbolizer=n.fromJSON(t.symbolizerJSON),t.histograms&&"rasterStretch"===(null==(e=this.symbolizer)?void 0:e.rendererJSON.type)&&(this.symbolizer.rendererJSON.histograms=t.histograms)},c.stretch=function(e){const r=this.symbolizer.simpleStretch(o.fromJSON(e.srcPixelBlock),e.stretchParams);return t.resolve(r&&r.toJSON())},c.estimateStatisticsHistograms=function(e){const r=i.estimateStatisticsHistograms(o.fromJSON(e.srcPixelBlock));return t.resolve(r)},c.split=function(e){const r=i.split(o.fromJSON(e.srcPixelBlock),e.tileSize,e.maximumPyramidLevel);return r&&r.forEach(((t,e)=>{r.set(e,null==t?void 0:t.toJSON())})),t.resolve(r)},c.mosaicAndTransform=async function(t){const e=t.srcPixelBlocks.map((t=>t?new o(t):null)),r=i.mosaic(e,t.srcMosaicSize);if(!t.coefs)return r&&r.toJSON();const s=i.approximateTransform(r,t.destDimension,t.coefs,t.sampleSpacing,t.interpolation);return s&&s.toJSON()},r}()}));
