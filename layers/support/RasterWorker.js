/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.20/esri/copyright.txt for details.
*/
define(["../../chunks/_rollupPluginBabelHelpers","../../geometry","./PixelBlock","./rasterFormats/RasterCodec","./rasterFunctions/pixelUtils","../../renderers/support/RasterSymbolizer","../../geometry/Extent"],(function(e,t,r,o,n,s,i){"use strict";return function(){function t(){}var l=t.prototype;return l.decode=function(){var t=e._asyncToGenerator((function*(e){const t=yield o.decode(e.data,e.options);return t&&t.toJSON()}));function r(e){return t.apply(this,arguments)}return r}(),l.symbolize=function(e){e.pixelBlock=r.fromJSON(e.pixelBlock),e.extent=e.extent?i.fromJSON(e.extent):null;const t=this.symbolizer.symbolize(e);return Promise.resolve(t&&t.toJSON())},l.updateSymbolizer=function(){var t=e._asyncToGenerator((function*(e){var t;this.symbolizer=s.fromJSON(e.symbolizerJSON),e.histograms&&"rasterStretch"===(null==(t=this.symbolizer)?void 0:t.rendererJSON.type)&&(this.symbolizer.rendererJSON.histograms=e.histograms)}));function r(e){return t.apply(this,arguments)}return r}(),l.stretch=function(e){const t=this.symbolizer.simpleStretch(r.fromJSON(e.srcPixelBlock),e.stretchParams);return Promise.resolve(t&&t.toJSON())},l.estimateStatisticsHistograms=function(e){const t=n.estimateStatisticsHistograms(r.fromJSON(e.srcPixelBlock));return Promise.resolve(t)},l.split=function(e){const t=n.split(r.fromJSON(e.srcPixelBlock),e.tileSize,e.maximumPyramidLevel);return t&&t.forEach(((e,r)=>{t.set(r,null==e?void 0:e.toJSON())})),Promise.resolve(t)},l.mosaicAndTransform=function(){var t=e._asyncToGenerator((function*(e){const t=e.srcPixelBlocks.map((e=>e?new r(e):null)),o=n.mosaic(t,e.srcMosaicSize,null,null,e.alignmentInfo);if(!e.coefs)return o&&o.toJSON();const s=n.approximateTransform(o,e.destDimension,e.coefs,e.sampleSpacing,e.interpolation);return s&&s.toJSON()}));function o(e){return t.apply(this,arguments)}return o}(),t}()}));
