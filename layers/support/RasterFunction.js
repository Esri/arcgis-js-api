/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.19/esri/copyright.txt for details.
*/
define(["../../chunks/_rollupPluginBabelHelpers","../../chunks/tslib.es6","../../core/has","../../core/lang","../../core/Logger","../../core/accessorSupport/ensureType","../../core/accessorSupport/decorators/property","../../core/accessorSupport/decorators/enumeration","../../core/accessorSupport/decorators/reader","../../core/accessorSupport/decorators/subclass","../../core/accessorSupport/decorators/writer","../../core/urlUtils","../../core/uuid","../../portal/support/resourceExtension","../../core/JSONSupport"],(function(e,t,r,n,o,i,u,s,c,a,p,l,f,d,y){"use strict";var m;const w=new Set(["raster","raster2","dem","fillraster"]),g=new Set(["rasters"]),_=e=>e&&e.rasterFunction?b.fromJSON(e):e,h=e=>e&&e instanceof b?e.toJSON():e,A=e=>(null==e?void 0:e.functionName)&&!e.declaredClass,F=e=>A(e)?new b(e):e;var N;!function(e){e[e.MOSAIC=0]="MOSAIC",e[e.GROUP=1]="GROUP",e[e.ITEM=2]="ITEM"}(N||(N={}));const S=e=>{if(null==e)return null;e=n.clone(e);const t={};for(const r of Object.keys(e))w.has(r.toLowerCase())?t[r]=_(e[r]):g.has(r.toLowerCase())&&Array.isArray(e[r])?t[r]=e[r].map(_):t[r]=e[r];return t};let b=m=function(t){function r(e){var r;return(r=t.call(this,e)||this).functionName=null,r.outputPixelType="unknown",r.variableName=null,r.description=null,r.functionDefinition=null,r.thumbnail=null,r}e._inheritsLoose(r,t);var o=r.prototype;return o.readFunctionArguments=function(e,t){return e=t.arguments||t.rasterFunctionArguments,S(e)},o.writeFunctionArguments=function(e,t,r){const n={};for(const o of Object.keys(e))w.has(o.toLowerCase())?n[o]=h(e[o]):g.has(o.toLowerCase())&&Array.isArray(e[o])?n[o]=e[o].map(h):n[o]=h(e[o]);this.functionDefinition?t.arguments=n:t[r]=n},o.readFunctionName=function(e,t){const r=t.rasterFunctionInfos,n=t.name;return n||(r&&r.length&&"None"!==r[0].name?r[0].name:t.rasterFunction)},o.writeFunctionName=function(e,t,r){this.functionDefinition?t.name=e:t[r]=e},o.readFunctionType=function(e){return N[e]},o.writeFunctionType=function(e,t,r){t[r]=N[e]},o.clone=function(){return new m({functionName:this.functionName,functionArguments:n.clone(this.functionArguments),outputPixelType:this.outputPixelType,variableName:this.variableName,description:this.description,functionType:this.functionType,functionDefinition:this.functionDefinition,thumbnail:this.thumbnail})},e._createClass(r,[{key:"functionArguments",set:function(e){if(e){const t=Object.keys(e);if(t.some((t=>w.has(t.toLowerCase())&&A(e[t])))||t.some((t=>g.has(t.toLowerCase())&&Array.isArray(e[t])&&e[t].some((e=>A(e)))))){e=n.clone(e);for(const r of t)w.has(r.toLowerCase())?e[r]=F(e[r]):g.has(r.toLowerCase())&&Array.isArray(e[r])&&(e[r]=e[r].map((e=>F(e))))}}this._set("functionArguments",e)}}]),r}(y.JSONSupport);return t.__decorate([u.property({json:{type:Object,write:{target:"rasterFunctionArguments"}}})],b.prototype,"functionArguments",null),t.__decorate([c.reader("functionArguments",["rasterFunctionArguments","arguments"])],b.prototype,"readFunctionArguments",null),t.__decorate([p.writer("functionArguments")],b.prototype,"writeFunctionArguments",null),t.__decorate([u.property({json:{type:String,write:{target:"rasterFunction"}}})],b.prototype,"functionName",void 0),t.__decorate([c.reader("functionName",["rasterFunction","rasterFunctionInfos","name"])],b.prototype,"readFunctionName",null),t.__decorate([p.writer("functionName")],b.prototype,"writeFunctionName",null),t.__decorate([s.enumeration({C128:"c128",C64:"c64",F32:"f32",F64:"f64",S16:"s16",S32:"s32",S8:"s8",U1:"u1",U16:"u16",U2:"u2",U32:"u32",U4:"u4",U8:"u8",UNKNOWN:"unknown"},{ignoreUnknown:!1}),u.property({json:{default:"unknown"}})],b.prototype,"outputPixelType",void 0),t.__decorate([u.property({type:String,json:{read:!0,write:!0}})],b.prototype,"variableName",void 0),t.__decorate([u.property({type:String,json:{read:!0,write:!0,origins:{"web-document":{read:!1,write:!1}}}})],b.prototype,"description",void 0),t.__decorate([u.property({json:{origins:{"web-document":{read:!1,write:!1}}}})],b.prototype,"functionType",void 0),t.__decorate([c.reader("functionType")],b.prototype,"readFunctionType",null),t.__decorate([p.writer("functionType")],b.prototype,"writeFunctionType",null),t.__decorate([u.property({type:Object,json:{read:{source:"function"},write:{target:"function"},origins:{"web-document":{read:!1,write:!1}}}})],b.prototype,"functionDefinition",void 0),t.__decorate([u.property({type:String,json:{read:!0,write:!0,origins:{"web-document":{read:!1,write:!1}}}})],b.prototype,"thumbnail",void 0),b=m=t.__decorate([a.subclass("esri.layers.support.RasterFunction")],b),b}));
