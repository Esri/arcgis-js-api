/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.26/esri/copyright.txt for details.
*/
define(["../../chunks/_rollupPluginBabelHelpers","../../chunks/tslib.es6","../../core/mathUtils","../../core/maybe","../../core/accessorSupport/decorators/property","../../core/accessorSupport/ensureType","../../core/arrayUtils","../../core/accessorSupport/decorators/subclass","../../chunks/common","../../geometry/Extent","../../geometry/Polygon","./GeoreferenceBase"],(function(e,t,r,n,o,s,i,a,c,p,u,l){"use strict";let y=function(t){function o(e){var r;return(r=t.call(this,e)||this).extent=null,r.rotation=0,r.type="extent-and-rotation",r}return e._inheritsLoose(o,t),e._createClass(o,[{key:"coords",get:function(){if(n.isNone(this.extent))return null;const{xmin:e,ymin:t,xmax:r,ymax:o,spatialReference:s}=this.extent;let i;if(this.rotation){const{x:n,y:s}=this.extent.center,a=x(n,s,this.rotation);i=[a(e,t),a(e,o),a(r,o),a(r,t)],i.push(i[0])}else i=[[e,t],[e,o],[r,o],[r,t],[e,t]];return new u({rings:[i],spatialReference:s})},set:function(e){if(n.isNone(e)||n.isNone(this.extent))return;const t=this.extent.spatialReference;if(e=this.projectOrWarn(e,t),n.isNone(e)||n.isNone(e.extent))return;const{rings:[[o,s,i]],extent:{center:{x:a,y:c}}}=e,u=r.rad2deg(Math.PI/2-Math.atan2(s[1]-o[1],s[0]-o[0])),l=x(a,c,-u),[y,h]=l(o[0],o[1]),[f,d]=l(i[0],i[1]);this.extent=new p({xmin:y,ymin:h,xmax:f,ymax:d,spatialReference:t}),this.rotation=u}}]),o}(l);function x(e,t,r){const n=c.toRadian(r),o=Math.cos(n),s=Math.sin(n);return(r,n)=>[o*(r-e)+s*(n-t)+e,o*(n-t)-s*(r-e)+t]}t.__decorate([o.property()],y.prototype,"coords",null),t.__decorate([o.property({type:p})],y.prototype,"extent",void 0),t.__decorate([o.property({type:Number})],y.prototype,"rotation",void 0),y=t.__decorate([a.subclass("esri.layers.support.ExtentAndRotationGeoreference")],y);return y}));
