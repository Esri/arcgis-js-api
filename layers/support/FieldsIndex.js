/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.25/esri/copyright.txt for details.
*/
define(["../../chunks/_rollupPluginBabelHelpers","./fieldUtils"],(function(e,i){"use strict";function t(e){return"date"===e.type||"esriFieldTypeDate"===e.type}function s(e){return"oid"===e.type||"esriFieldTypeOID"===e.type}function l(e){return"global-id"===e.type||"esriFieldTypeGlobalID"===e.type}function n(e){return e.trim().toLowerCase()}function r(e){return i.normalizeFieldName(e).toLowerCase()}return function(){function d(e=[]){if(this.fields=[],this._fieldsMap=new Map,this._normalizedFieldsMap=new Map,this._dateFieldsSet=new Set,this._numericFieldsSet=new Set,this.dateFields=[],this.numericFields=[],this._requiredFields=null,!e)return;this.fields=e;const d=[];for(const u of e){const e=u&&u.name;if(e){const a=n(e),o=r(e);this._fieldsMap.set(e,u),this._fieldsMap.set(a,u),this._normalizedFieldsMap.set(o,u),d.push(a),t(u)?(this.dateFields.push(u),this._dateFieldsSet.add(u)):i.isNumericField(u)&&(this._numericFieldsSet.add(u),this.numericFields.push(u)),s(u)||l(u)||(u.editable=null==u.editable||!!u.editable,u.nullable=null==u.nullable||!!u.nullable)}}d.sort(),this.uid=d.join(",")}var u=d.prototype;return u.destroy=function(){this._fieldsMap.clear()},u.has=function(e){return null!=this.get(e)},u.get=function(e){if(!e)return;let i=this._fieldsMap.get(e);return i||(i=this._fieldsMap.get(n(e))??this._normalizedFieldsMap.get(r(e)),i&&this._fieldsMap.set(e,i),i)},u.isDateField=function(e){return this._dateFieldsSet.has(this.get(e))},u.isNumericField=function(e){return this._numericFieldsSet.has(this.get(e))},u.normalizeFieldName=function(e){const i=this.get(e);if(i)return i.name??void 0},e._createClass(d,[{key:"requiredFields",get:function(){if(!this._requiredFields){this._requiredFields=[];for(const e of this.fields)s(e)||l(e)||e.nullable||void 0!==i.getFieldDefaultValue(e)||this._requiredFields.push(e)}return this._requiredFields}}]),d}()}));
