/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.18/esri/copyright.txt for details.
*/
define(["../../chunks/_rollupPluginBabelHelpers","../../chunks/tslib.es6","../../core/has","../../core/maybe","../../core/Logger","../../core/accessorSupport/ensureType","../../core/accessorSupport/decorators/property","../../core/accessorSupport/decorators/subclass","../../core/urlUtils","../../core/uuid","../../portal/support/resourceExtension","../../core/promiseUtils","../../core/JSONSupport","../../request","../../core/Promise","../../core/Loadable"],(function(e,r,t,o,s,i,p,l,a,n,u,c,d,y,m,_){"use strict";const g=s.getLogger("esri.layers.support.BuildingSummaryStatistics");let S=function(r){function t(){var e;return(e=r.apply(this,arguments)||this).fieldName=null,e.modelName=null,e.label=null,e.min=null,e.max=null,e.mostFrequentValues=null,e.subLayerIds=null,e}return e._inheritsLoose(t,r),t}(d.JSONSupport);r.__decorate([p.property({type:String})],S.prototype,"fieldName",void 0),r.__decorate([p.property({type:String})],S.prototype,"modelName",void 0),r.__decorate([p.property({type:String})],S.prototype,"label",void 0),r.__decorate([p.property({type:Number})],S.prototype,"min",void 0),r.__decorate([p.property({type:Number})],S.prototype,"max",void 0),r.__decorate([p.property({json:{read:e=>Array.isArray(e)&&(e.every((e=>"string"==typeof e))||e.every((e=>"number"==typeof e)))?e.slice():null}})],S.prototype,"mostFrequentValues",void 0),r.__decorate([p.property({type:[Number]})],S.prototype,"subLayerIds",void 0),S=r.__decorate([l.subclass("esri.layers.support.BuildingFieldStatistics")],S);let f=function(r){function t(){var e;return(e=r.apply(this,arguments)||this).url=null,e}e._inheritsLoose(t,r);var s=t.prototype;return s.load=function(e){const r=o.isSome(e)?e.signal:null;return this.addResolvingPromise(this._fetchService(r)),c.resolve(this)},s._fetchService=async function(e){const r=(await y(this.url,{query:{f:"json"},responseType:"json",signal:e})).data;this.read(r,{origin:"service"})},e._createClass(t,[{key:"fields",get:function(){return this.loaded||"loading"===this.loadStatus?this._get("fields"):(g.error("building summary statistics are not loaded"),null)}}]),t}(_.LoadableMixin(m.EsriPromiseMixin(d.JSONSupport)));return r.__decorate([p.property({constructOnly:!0,type:String})],f.prototype,"url",void 0),r.__decorate([p.property({readOnly:!0,type:[S],json:{read:{source:"summary"}}})],f.prototype,"fields",null),f=r.__decorate([l.subclass("esri.layers.support.BuildingSummaryStatistics")],f),f}));
