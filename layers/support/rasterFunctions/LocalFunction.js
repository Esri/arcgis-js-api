/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.25/esri/copyright.txt for details.
*/
define(["../../../chunks/_rollupPluginBabelHelpers","../../../chunks/tslib.es6","../../../core/maybe","../../../core/accessorSupport/decorators/property","../../../core/arrayUtils","../../../core/accessorSupport/ensureType","../../../core/accessorSupport/decorators/subclass","./BaseRasterFunction","./LocalFunctionArguments","./localUtils"],(function(t,e,s,o,r,n,u,i,c,a){"use strict";let p=function(e){function o(){var t;return(t=e.apply(this,arguments)||this).functionName="Local",t.functionArguments=null,t.rasterArgumentNames=["rasters"],t}t._inheritsLoose(o,e);var r=o.prototype;return r._bindSourceRasters=function(){const{sourceRasterInfos:t}=this,e=t[0],{bandCount:s}=e,{processAsMultiband:o}=this.functionArguments;if(o&&t.some((t=>t.bandCount!==s)))return{success:!1,error:"local-function: input rasters do not have same band count"};this.outputPixelType=this._getOutputPixelType("f32");const r=e.clone();return r.pixelType=this.outputPixelType,r.statistics=null,r.histograms=null,o||(r.bandCount=1),this.rasterInfo=r,{success:!0}},r._processPixels=function(t){const{pixelBlocks:e}=t;return s.isNone(e)||e.some((t=>s.isNone(t)))?null:a.local(e,this.functionArguments.operation,{processAsMultiband:this.functionArguments.processAsMultiband,outputPixelType:this.outputPixelType??void 0})},o}(i);e.__decorate([o.property({json:{write:!0,name:"rasterFunction"}})],p.prototype,"functionName",void 0),e.__decorate([o.property({type:c,json:{write:!0,name:"rasterFunctionArguments"}})],p.prototype,"functionArguments",void 0),e.__decorate([o.property()],p.prototype,"rasterArgumentNames",void 0),p=e.__decorate([u.subclass("esri.layers.support.rasterFunctions.LocalFunction")],p);return p}));
