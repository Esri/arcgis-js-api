/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.25/esri/copyright.txt for details.
*/
define(["../../../chunks/_rollupPluginBabelHelpers","../../../chunks/tslib.es6","../../../core/maybe","../../../core/accessorSupport/decorators/property","../../../core/arrayUtils","../../../core/accessorSupport/ensureType","../../../core/accessorSupport/decorators/subclass","./BaseRasterFunction","./ExtractBandFunctionArguments","./pixelUtils"],(function(t,e,s,r,n,o,i,c,a,u){"use strict";let p=function(e){function r(){var t;return(t=e.apply(this,arguments)||this).functionName="ExtractBand",t.functionArguments=null,t.rasterArgumentNames=["raster"],t}t._inheritsLoose(r,e);var n=r.prototype;return n._bindSourceRasters=function(){const{sourceRasterInfos:t}=this,e=t[0],{bandCount:r}=e,{bandIDs:n,missingBandAction:o}=this.functionArguments;if(o===u.MissingBandAction.fail&&n.some((t=>t<0||t>=r)))return{success:!1,error:"extract-band-function: invalid bandIDs"};this.outputPixelType=this._getOutputPixelType("f32");const i=e.clone();i.pixelType=this.outputPixelType;const{statistics:c,histograms:a}=i;return s.isSome(c)&&c.length&&(i.statistics=n.map((t=>c[t]||c[c.length-1]))),s.isSome(a)&&a.length&&(i.histograms=n.map((t=>a[t]||a[a.length-1]))),this.rasterInfo=i,{success:!0}},n._processPixels=function(t){const e=t.pixelBlocks?.[0];if(s.isNone(e))return null;const r=e.pixels.length,n=this.functionArguments.bandIDs.map((t=>t>=r?r-1:t));return e.extractBands(n)},r}(c);e.__decorate([r.property({json:{write:!0,name:"rasterFunction"}})],p.prototype,"functionName",void 0),e.__decorate([r.property({type:a,json:{write:!0,name:"rasterFunctionArguments"}})],p.prototype,"functionArguments",void 0),e.__decorate([r.property()],p.prototype,"rasterArgumentNames",void 0),p=e.__decorate([i.subclass("esri.layers.support.rasterFunctions.ExtractBandFunction")],p);return p}));
