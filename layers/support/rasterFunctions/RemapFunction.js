/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.25/esri/copyright.txt for details.
*/
define(["../../../chunks/_rollupPluginBabelHelpers","../../../chunks/tslib.es6","../../../core/maybe","../../../core/accessorSupport/decorators/property","../../../core/arrayUtils","../../../core/accessorSupport/ensureType","../../../core/accessorSupport/decorators/subclass","./BaseRasterFunction","./pixelUtils","./RemapFunctionArguments"],(function(t,e,o,r,s,n,u,i,p,a){"use strict";let l=function(e){function r(){var t;return(t=e.apply(this,arguments)||this).functionName="Remap",t.functionArguments=null,t.rasterArgumentNames=["raster"],t.lookup=null,t}t._inheritsLoose(r,e);var s=r.prototype;return s._bindSourceRasters=function(){const t=this.sourceRasterInfos[0].clone(),{pixelType:e}=t;this.outputPixelType=this._getOutputPixelType(e),t.pixelType=this.outputPixelType,t.colormap=null,t.histograms=null;const{statistics:r}=t,{allowUnmatched:s,outputValues:n}=this.functionArguments;if(o.isSome(r)&&r.length&&!s){let t=n[0],e=t;for(let o=0;o<n.length;o++)t=t>n[o]?n[o]:t,e=e>n[o]?e:n[o];for(let o=0;o<r.length;o++)r[o]={...r[o],min:t,max:e}}return this.rasterInfo=t,this.lookup=s?null:p.createRemapLUT(e,this.functionArguments.inputRanges,n),{success:!0}},s._processPixels=function(t){const e=t.pixelBlocks?.[0];if(o.isNone(e))return null;const{lookup:r,outputPixelType:s}=this;if(r)return p.lookupPixels(e,{lut:[r.lut],offset:r.offset,outputPixelType:s});const{inputRanges:n,outputValues:u,noDataRanges:i,allowUnmatched:a}=this.functionArguments;return p.remap(e,{inputRanges:n,outputValues:u,noDataRanges:i,allowUnmatched:a,outputPixelType:s})},r}(i);e.__decorate([r.property({json:{write:!0,name:"rasterFunction"}})],l.prototype,"functionName",void 0),e.__decorate([r.property({type:a,json:{write:!0,name:"rasterFunctionArguments"}})],l.prototype,"functionArguments",void 0),e.__decorate([r.property()],l.prototype,"rasterArgumentNames",void 0),e.__decorate([r.property({json:{write:!0}})],l.prototype,"lookup",void 0),l=e.__decorate([u.subclass("esri.layers.support.rasterFunctions.RemapFunction")],l);return l}));
