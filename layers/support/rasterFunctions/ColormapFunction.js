/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.26/esri/copyright.txt for details.
*/
define(["../../../chunks/_rollupPluginBabelHelpers","../../../chunks/tslib.es6","../../../core/accessorSupport/decorators/property","../../../core/accessorSupport/ensureType","../../../core/arrayUtils","../../../core/accessorSupport/decorators/subclass","./BaseRasterFunction","./ColormapFunctionArguments","./colormaps","../../../renderers/support/colorRampUtils"],(function(o,r,e,t,s,n,p,c,a,u){"use strict";let i=function(r){function e(){var o;return(o=r.apply(this,arguments)||this).functionName="Colormap",o.functionArguments=null,o.rasterArgumentNames=["raster"],o.isNoopProcess=!0,o}o._inheritsLoose(e,r);var t=e.prototype;return t._bindSourceRasters=function(){const o=this.sourceRasterInfos[0];if(o.bandCount>1)return{success:!1,supportsGPU:!1,error:"colormap-function: source data must be single band"};let{colormap:r,colormapName:e,colorRamp:t,colorRampName:s}=this.functionArguments;if(!r?.length)if(t)r=u.convertColorRampToColormap(t,{interpolateAlpha:!0});else if(s){const o=u.getColorRampJSON(s);o&&(r=u.convertColorRampToColormap(o))}else e&&(r=a.getColormapByName(e));if(!r?.length)return{success:!1,supportsGPU:!1,error:"colormap-function: missing colormap argument"};this.outputPixelType=this._getOutputPixelType("u8");const n=o.clone();return n.pixelType=this.outputPixelType,n.colormap=r,n.bandCount=1,this.rasterInfo=n,{success:!0,supportsGPU:!0}},t._processPixels=function(o){return o.pixelBlocks?.[0]},e}(p);r.__decorate([e.property({json:{write:!0,name:"rasterFunction"}})],i.prototype,"functionName",void 0),r.__decorate([e.property({type:c,json:{write:!0,name:"rasterFunctionArguments"}})],i.prototype,"functionArguments",void 0),r.__decorate([e.property()],i.prototype,"rasterArgumentNames",void 0),r.__decorate([e.property()],i.prototype,"isNoopProcess",void 0),r.__decorate([e.property({json:{write:!0}})],i.prototype,"indexedColormap",void 0),i=r.__decorate([n.subclass("esri.layers.support.rasterFunctions.ColormapFunction")],i);return i}));
