/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.24/esri/copyright.txt for details.
*/
import{_ as e}from"../../chunks/tslib.es6.js";import o from"../../request.js";import r from"../../core/Handles.js";import{JSONSupport as s}from"../../core/JSONSupport.js";import{clone as t}from"../../core/lang.js";import{isNone as i,get as a}from"../../core/maybe.js";import{on as p,sync as n}from"../../core/reactiveUtils.js";import{property as c}from"../../core/accessorSupport/decorators/property.js";import"../../core/accessorSupport/ensureType.js";import{reader as l}from"../../core/accessorSupport/decorators/reader.js";import{subclass as m}from"../../core/accessorSupport/decorators/subclass.js";import{persistable as u}from"../../core/accessorSupport/decorators/persistable.js";import h from"./PolygonCollection.js";import{f as d}from"../../chunks/persistableUrlUtils.js";var g;let f=g=class extends s{constructor(e){super(e),this.spatialRelationship="disjoint",this.geometries=new h,this._geometriesSource=null,this._handles=new r}initialize(){this._handles.add(p((()=>this.geometries),"after-changes",(()=>this.geometries=this.geometries),n))}destroy(){this._handles.destroy()}readGeometries(e,o,r){this._geometriesSource={url:d(e,r),context:r}}async loadGeometries(e,r){if(i(this._geometriesSource))return;const{url:s,context:t}=this._geometriesSource,p=await o(s,{responseType:"json",signal:a(r,"signal")}),n=e.toJSON(),c=p.data.map((e=>({...e,spatialReference:n})));this.geometries=h.fromJSON(c,t),this._geometriesSource=null}clone(){return new g({geometries:t(this.geometries),spatialRelationship:this.spatialRelationship})}};e([c({type:["disjoint","contains"],nonNullable:!0,json:{write:!0}})],f.prototype,"spatialRelationship",void 0),e([c({type:h,nonNullable:!0,json:{write:!0}}),u({origins:["web-scene","portal-item"],type:"resource",prefix:"geometries"})],f.prototype,"geometries",void 0),e([l(["web-scene","portal-item"],"geometries")],f.prototype,"readGeometries",null),f=g=e([m("esri.layers.support.SceneFilter")],f);const j=f;export{j as default};
