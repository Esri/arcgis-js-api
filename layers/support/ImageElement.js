/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.25/esri/copyright.txt for details.
*/
define(["../../chunks/_rollupPluginBabelHelpers","../../chunks/tslib.es6","../../request","../../core/Error","../../core/Logger","../../core/accessorSupport/decorators/property","../../core/arrayUtils","../../core/accessorSupport/ensureType","../../core/accessorSupport/decorators/subclass","./MediaElementBase"],(function(e,t,s,o,r,n,i,a,c,l){"use strict";let d=function(t){function n(e){var s;return(s=t.call(this,e)||this).content=null,s.type="image",s.image=null,s}return e._inheritsLoose(n,t),n.prototype.load=function(){const e=this.image;if("string"==typeof e){const t=s(e,{responseType:"image"}).then((({data:e})=>{this._set("content",e)}));this.addResolvingPromise(t)}else if(e instanceof HTMLImageElement){const t=e.decode().then((()=>{this._set("content",e)}));this.addResolvingPromise(t)}else e?this._set("content",e):this.addResolvingPromise(Promise.reject(new o("image-element:invalid-image-type","Invalid image type",{image:e})));return Promise.resolve(this)},e._createClass(n,[{key:"image",set:function(e){"not-loaded"===this.loadStatus?this._set("image",e):r.getLogger(this.declaredClass).error("#image","image cannot be changed after the element is loaded.")}}]),n}(l);t.__decorate([n.property({readOnly:!0})],d.prototype,"content",void 0),t.__decorate([n.property()],d.prototype,"image",null),d=t.__decorate([c.subclass("esri.layers.support.ImageElement")],d);return d}));
