/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.26/esri/copyright.txt for details.
*/
define(["exports","../../chunks/_rollupPluginBabelHelpers","../../geometry","../../core/maybe","../../geometry/support/spatialReferenceUtils","./ControlPointsGeoreference","../../geometry/Extent","../../geometry/Point"],(function(e,n,t,o,r,i,a,c){"use strict";const l=100,s=.5;function p(e,n){return u.apply(this,arguments)}function u(){return(u=n._asyncToGenerator((function*(e,n){e.loaded||(yield e.load());const{width:t,height:o}=e.content,{spatialReference:p}=n,u=r.getInfo(p);let y=!1;if(u){const e=u.valid[1]-u.valid[0];n.width>e&&(n=new a({xmin:u.valid[0],ymin:n.ymin,xmax:u.valid[1],ymax:n.ymax,spatialReference:n.spatialReference}),y=!0)}const f=n.expand(s),{center:x,width:d,height:P}=f,h=y||t>o?d:t/o*P,w=y||t>o?o/t*d:P,m=x.x-h/2,g=x.x+h/2,R=x.y+w/2,v=x.y-w/2;return new i({controlPoints:[{sourcePoint:{x:l,y:o-l},mapPoint:new c({x:m,y:v,spatialReference:p})},{sourcePoint:{x:l,y:l},mapPoint:new c({x:m,y:R,spatialReference:p})},{sourcePoint:{x:t-l,y:l},mapPoint:new c({x:g,y:R,spatialReference:p})},{sourcePoint:{x:t-l,y:o-l},mapPoint:new c({x:g,y:v,spatialReference:p})}],width:t,height:o})}))).apply(this,arguments)}function y(e){const n=o.unwrap(e.georeference);if("control-points"!==n.type)return null;const t={wkid:0},{width:r,height:a}=n,l=o.unwrap(n.controlPoints);return new i({controlPoints:l.map((e=>{const{x:n,y:r}=o.unwrap(o.unwrap(e).sourcePoint);return{sourcePoint:{x:n,y:r},mapPoint:new c({x:n,y:a-r,spatialReference:t})}})),width:r,height:a})}e.createDefaultControlPointsGeoreference=p,e.createLocalModeControlPointsGeoreference=y,Object.defineProperty(e,Symbol.toStringTag,{value:"Module"})}));
