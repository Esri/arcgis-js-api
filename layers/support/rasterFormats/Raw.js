/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.18/esri/copyright.txt for details.
*/
define((function(){"use strict";const e=function(e,n){const r=n.width*n.height,a=n.pixelType;return Math.floor(e.byteLength/(r*t(a)))},t=function(e){let t=1;switch(e){case Uint8Array:case Int8Array:t=1;break;case Uint16Array:case Int16Array:t=2;break;case Uint32Array:case Int32Array:case Float32Array:t=4;break;case Float64Array:t=8}return t};return function(){function n(){}return n.decode=function(n,r){const a=r.pixelType,i=[],c=r.width*r.height,s=e(n,r),{bandIds:o,format:f}=r,h=o&&o.length||e(n,r),u=n.byteLength-n.byteLength%(c*t(a)),y=new a(n,0,c*s);let l,b,g,A,p;if("bip"===f)for(l=0;l<h;l++){for(A=new a(c),p=o?o[l]:l,b=0;b<c;b++)A[b]=y[b*s+p];i.push(A)}else if("bsq"===f)for(l=0;l<h;l++)p=o?o[l]:l,i.push(y.subarray(p*c,(p+1)*c));return u<n.byteLength-1&&(g=function(e,t){if(8*e.byteLength<t)return null;const n=new Uint8Array(e,0,Math.ceil(t/8)),r=new Uint8Array(t);let a=0,i=0,c=0,s=0;for(c=0;c<n.length-1;c++)for(i=n[c],s=7;s>=0;s--)r[a++]=i>>s&1;for(s=7;a<t-1;)i=n[n.length-1],r[a++]=i>>s&1,s--;return r}(n.slice(u),c)),{pixels:i,mask:g}},n}()}));
