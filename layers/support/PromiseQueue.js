/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.21/esri/copyright.txt for details.
*/
define(["../../chunks/_rollupPluginBabelHelpers","../../core/promiseUtils"],(function(t,e){"use strict";let s=function(){function s(){this._tasks=new Array}var n=s.prototype;return n.push=function(t,e,s){return new Promise(((n,o)=>this._tasks.push(new r(n,o,t,e,s))))},n.unshift=function(t,e,s){return new Promise(((n,o)=>this._tasks.unshift(new r(n,o,t,e,s))))},n.process=function(){if(0===this._tasks.length)return!1;const t=this._tasks.shift();try{const s=e.isAborted(t.signal);if(s&&!t.abortCallback)t.reject(e.createAbortError());else{const r=s?t.abortCallback(e.createAbortError()):t.callback();e.isPromise(r)?r.then(t.resolve,t.reject):t.resolve(r)}}catch(s){t.reject(s)}return!0},n.cancelAll=function(){const t=e.createAbortError();for(const e of this._tasks)if(e.abortCallback){const s=e.abortCallback(t);e.resolve(s)}else e.reject(t);this._tasks.length=0},t._createClass(s,[{key:"length",get:function(){return this._tasks.length}}]),s}(),r=function(t,e,s,r,n){this.resolve=t,this.reject=e,this.callback=s,this.signal=r,this.abortCallback=n};return s}));
