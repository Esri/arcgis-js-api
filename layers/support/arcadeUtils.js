/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.25/esri/copyright.txt for details.
*/
define(["exports"],(function(e){"use strict";function n(e,n){const o=[];if(!e)return o;if("valueExpression"in e&&e.valueExpression){const r={expression:e.valueExpression,title:e.valueExpressionTitle,profileInfo:{name:"visualization",context:`${e.type}-renderer`,source:n}};o.push(r)}if("visualVariables"in e&&e.visualVariables){const r=e.visualVariables.filter((({valueExpression:e})=>e&&"$view.scale"!==e)).map((({valueExpression:e,valueExpressionTitle:o,type:r})=>({expression:e,title:o,profileInfo:{name:"visualization",context:`${r}-variable`,source:n}})));o.push(...r)}if("attributes"in e&&e.attributes){const r=e?.attributes.filter((({valueExpression:e})=>e)).map((({valueExpression:o,valueExpressionTitle:r})=>({expression:o,title:r,profileInfo:{name:"visualization",context:`${e.type}-renderer`,source:n}})));o.push(...r)}return o}function o(e,n){const o=[];if(e?.expressionInfos){const r=e?.expressionInfos.map((({title:e,name:o,expression:r,returnType:t})=>({title:e,name:o,expression:r,profileInfo:{name:"layer"===n?"popup":"feature-reduction-popup",context:"popup-template",returnType:t,source:n}})));o.push(...r)}if(e?.content&&Array.isArray(e.content)){const r=e?.content.filter((({type:e})=>"expression"===e)).map((({expressionInfo:e})=>({title:e.title,expression:e.expression,profileInfo:{name:"layer"===n?"popup-element":"feature-reduction-popup-element",context:"popup-expression-content",returnType:e.returnType,source:n}})));o.push(...r)}return o}function r(e){const n=[];if(e?.featureExpressionInfo?.expression){const o={expression:e?.featureExpressionInfo?.expression,profileInfo:{name:"feature-z",context:"elevation-info",source:"layer"}};n.push(o)}return n}function t(e){const n=[];if(e){const o=e.filter((({valueExpression:e})=>e)).map((({valueExpression:e})=>({expression:e,profileInfo:{name:"feature-z",context:"order-by",source:"layer"}})));n.push(...o)}return n}function s(e){const n=[];if(e?.expressionInfos){const o=e?.expressionInfos.map((({title:e,name:n,expression:o,returnType:r})=>({title:e,name:n,expression:o,profileInfo:{name:"boolean"===r?"constraint":"form-calculation",context:"form-template",returnType:r,source:"layer"}})));n.push(...o)}return n}function i(e){return[...o(e?.popupTemplate,"feature-reduction"),...p(e?.labelingInfo,"feature-reduction"),...n(e?.renderer,"feature-reduction")]}function p(e,n){const o=[];if(e){const r=e.filter((({labelExpressionInfo:e})=>e?.expression)).map((({labelExpressionInfo:e})=>({expression:e?.expression,title:e?.title,profileInfo:{name:"labeling",context:"label-class",source:n}})));o.push(...r)}return o}function u(e){const u=[...p(e.labelingInfo,"layer"),...o(e.popupTemplate,"layer"),...n(e.renderer,"layer")];return"elevationInfo"in e&&u.push(...r(e.elevationInfo)),"featureReduction"in e&&u.push(...i(e.featureReduction)),"orderBy"in e&&u.push(...t(e.orderBy)),"formTemplate"in e&&u.push(...s(e.formTemplate)),u}e.getExpressionsFromLayer=u,Object.defineProperties(e,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})}));
