// COPYRIGHT Â© 2019 Esri
//
// All rights reserved under the copyright laws of the United States
// and applicable international laws, treaties, and conventions.
//
// This material is licensed for use under the Esri Master License
// Agreement (MLA), and is bound by the terms of that agreement.
// You may redistribute and use this code without modification,
// provided you adhere to the terms of the MLA and include this
// copyright notice.
//
// See use restrictions at http://www.esri.com/legal/pdfs/mla_e204_e300/english
//
// For additional information, contact:
// Environmental Systems Research Institute, Inc.
// Attn: Contracts and Legal Services Department
// 380 New York Street
// Redlands, California, USA 92373
// USA
//
// email: contracts@esri.com
//
// See http://js.arcgis.com/next/esri/copyright.txt for details.

define(["require","exports","../../core/tsSupport/declareExtendsHelper","../../core/tsSupport/decorateHelper","../../core/Error","../../core/promiseUtils","../../core/accessorSupport/decorators","../../core/accessorSupport/read","../../core/accessorSupport/write","../support/commonProperties"],function(e,r,t,i,a,n,o,c,u,y){Object.defineProperty(r,"__esModule",{value:!0}),r.OperationalLayer=function(e){return function(e){function n(){var r=null!==e&&e.apply(this,arguments)||this;return r.title="Layer",r}return t(n,e),n.prototype.writeListMode=function(e,r,t,i){i&&"ground"===i.layerContainerType?r[t]=e:e&&u.willPropertyWrite(this,t,{},i)&&(r[t]=e)},n.prototype.writeTitle=function(e,r){r.title=e||"Layer"},n.prototype.writeOperationalLayerType=function(e,r){e&&(r.layerType=e)},n.prototype.read=function(e,r){var t=this,i=arguments;r&&(r.layer=this),c.readLoadable(this,e,function(r){return t.inherited(i,[e,r])},r)},n.prototype.write=function(e,t){if(t&&t.origin){var i=t.origin+"/"+(t.layerContainerType||"operational-layers"),n=r.supportedTypes[i],o=n&&n[this.operationalLayerType];if("write"!==o&&"readwrite"!==o)return t.messages&&t.messages.push(new a("layer:unsupported","Layers ("+this.title+", "+this.id+") of type '"+this.declaredClass+"' are not supported in the context of '"+i+"'",{layer:this})),null}var c=this.inherited(arguments,[e,t]),u=!!t&&!!t.messages&&!!t.messages.filter(function(e){return e instanceof a&&"web-document-write:property-required"===e.name}).length;return!this.url&&u?null:c},i([o.property({type:String,json:{write:{ignoreOrigin:!0},origins:{"web-scene":{write:{isRequired:!0,ignoreOrigin:!0}}}}})],n.prototype,"id",void 0),i([o.property({json:{write:{ignoreOrigin:!0}}})],n.prototype,"listMode",void 0),i([o.writer("listMode")],n.prototype,"writeListMode",null),i([o.property({type:String,json:{write:{ignoreOrigin:!0,allowNull:!0},origins:{"web-scene":{write:{isRequired:!0,ignoreOrigin:!0}}}}})],n.prototype,"title",void 0),i([o.writer("title")],n.prototype,"writeTitle",null),i([o.property({type:String,readOnly:!0,json:{write:{target:"layerType",ignoreOrigin:!0}}})],n.prototype,"operationalLayerType",void 0),i([o.writer("operationalLayerType")],n.prototype,"writeOperationalLayerType",null),i([o.property(y.opacity)],n.prototype,"opacity",void 0),i([o.property({type:Boolean,json:{read:{source:"visibility"},write:{target:"visibility"},origins:{"web-document":{read:{source:"visibility"},write:{target:"visibility"},default:!0}}}})],n.prototype,"visible",void 0),n=i([o.subclass("esri.layers.mixins.OperationalLayer")],n)}(o.declared(e))},r.typeModuleMap={ArcGISFeatureLayer:function(){return n.create(function(r){return e(["../FeatureLayer"],r)})},ArcGISImageServiceLayer:function(){return n.create(function(r){return e(["../ImageryLayer"],r)})},ArcGISImageServiceVectorLayer:function(){return n.resolve(null)},ArcGISMapServiceLayer:function(){return n.create(function(r){return e(["../MapImageLayer"],r)})},ArcGISSceneServiceLayer:function(){return n.create(function(r){return e(["../SceneLayer"],r)})},ArcGISStreamLayer:function(){return n.create(function(r){return e(["../StreamLayer"],r)})},ArcGISTiledElevationServiceLayer:function(){return n.create(function(r){return e(["../ElevationLayer"],r)})},ArcGISTiledImageServiceLayer:function(){return n.create(function(r){return e(["../TileLayer"],r)})},ArcGISTiledMapServiceLayer:function(){return n.create(function(r){return e(["../TileLayer"],r)})},BingMapsAerial:function(){return n.create(function(r){return e(["../BingMapsLayer"],r)})},BingMapsRoad:function(){return n.create(function(r){return e(["../BingMapsLayer"],r)})},BingMapsHybrid:function(){return n.create(function(r){return e(["../BingMapsLayer"],r)})},BuildingSceneLayer:function(){return n.create(function(r){return e(["../BuildingSceneLayer"],r)})},CSV:function(){return n.create(function(r){return e(["../CSVLayer"],r)})},GeoRSS:function(){return n.create(function(r){return e(["../GeoRSSLayer"],r)})},GroupLayer:function(){return n.create(function(r){return e(["../GroupLayer"],r)})},IntegratedMeshLayer:function(){return n.create(function(r){return e(["../IntegratedMeshLayer"],r)})},KML:function(){return n.create(function(r){return e(["../KMLLayer"],r)})},OpenStreetMap:function(){return n.create(function(r){return e(["../OpenStreetMapLayer"],r)})},PointCloudLayer:function(){return n.create(function(r){return e(["../PointCloudLayer"],r)})},VectorTileLayer:function(){return n.create(function(r){return e(["../VectorTileLayer"],r)})},WebTiledLayer:function(){return n.create(function(r){return e(["../WebTileLayer"],r)})},WFS:function(){return n.resolve(null)},WMS:function(){return n.create(function(r){return e(["../WMSLayer"],r)})},RasterDataLayer:function(){return n.resolve(null)}},r.supportedTypes={"web-scene/operational-layers":{ArcGISFeatureLayer:"readwrite",ArcGISImageServiceLayer:"readwrite",ArcGISMapServiceLayer:"readwrite",ArcGISSceneServiceLayer:"readwrite",ArcGISTiledElevationServiceLayer:"read",ArcGISTiledImageServiceLayer:"readwrite",ArcGISTiledMapServiceLayer:"readwrite",BuildingSceneLayer:"readwrite",GroupLayer:"readwrite",IntegratedMeshLayer:"readwrite",PointCloudLayer:"readwrite",WebTiledLayer:"readwrite",CSV:"readwrite",VectorTileLayer:"readwrite",WMS:"readwrite",KML:"readwrite",RasterDataLayer:"readwrite"},"web-scene/basemap":{ArcGISTiledImageServiceLayer:"readwrite",ArcGISTiledMapServiceLayer:"readwrite",WebTiledLayer:"readwrite",OpenStreetMap:"readwrite",VectorTileLayer:"readwrite",ArcGISImageServiceLayer:"readwrite",WMS:"readwrite",ArcGISMapServiceLayer:"readwrite"},"web-scene/ground":{ArcGISTiledElevationServiceLayer:"readwrite"},"web-map/operational-layers":{ArcGISImageServiceLayer:"readwrite",ArcGISImageServiceVectorLayer:"readwrite",ArcGISMapServiceLayer:"readwrite",ArcGISStreamLayer:"readwrite",ArcGISTiledImageServiceLayer:"readwrite",ArcGISTiledMapServiceLayer:"readwrite",ArcGISFeatureLayer:"readwrite",BingMapsAerial:"readwrite",BingMapsRoad:"readwrite",BingMapsHybrid:"readwrite",CSV:"readwrite",GeoRSS:"readwrite",KML:"readwrite",VectorTileLayer:"readwrite",WFS:"readwrite",WMS:"readwrite",WebTiledLayer:"readwrite"},"web-map/basemap":{ArcGISImageServiceLayer:"readwrite",ArcGISImageServiceVectorLayer:"readwrite",ArcGISMapServiceLayer:"readwrite",ArcGISTiledImageServiceLayer:"readwrite",ArcGISTiledMapServiceLayer:"readwrite",OpenStreetMap:"readwrite",VectorTileLayer:"readwrite",WMS:"readwrite",WebTiledLayer:"readwrite",BingMapsAerial:"readwrite",BingMapsRoad:"readwrite",BingMapsHybrid:"readwrite"}}});