/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.26/esri/copyright.txt for details.
*/
define(["exports","../../chunks/_rollupPluginBabelHelpers","../../chunks/tslib.es6","../../core/accessorSupport/decorators/property","../../core/accessorSupport/ensureType","../../core/arrayUtils","../../core/accessorSupport/decorators/subclass","../support/PublishingInfo"],(function(e,t,r,s,n,o,i,u){"use strict";const l="esri.layers.mixins.PublishableLayer",a=Symbol(l);function c(e){return null!=e&&"object"==typeof e&&a in e}const p=e=>{var n;let o=function(e){function r(){var t;return(t=e.apply(this,arguments)||this)[n]=!0,t}return t._inheritsLoose(r,e),r.prototype._checkPublishingStatus=function(e){var r=this;const s=250,n=125;let o=0;const i=function(){var s=t._asyncToGenerator((function*(t){let s;e.updating=!0;try{s=yield r.fetchPublishingStatus()}catch(l){s="unavailable"}"published"!==s&&"unavailable"!==s||("publishing"===e.status&&r.refresh(),u.remove()),e.status=s,e.updating=!1,u.removed||(o=setTimeout(i,t,t+n))}));return function(e){return s.apply(this,arguments)}}(),u={removed:!1,remove(){this.removed=!0,clearTimeout(o)}};this.when().catch((()=>u.remove())),i(s),this.own(u)},t._createClass(r,[{key:"publishingInfo",get:function(){if(this.destroyed)return null;const e=this._get("publishingInfo");if(e)return e;const t=new u;return this._checkPublishingStatus(t),t}}]),r}(e);return n=a,r.__decorate([s.property({readOnly:!0,clonable:!1})],o.prototype,"publishingInfo",null),o=r.__decorate([i.subclass(l)],o),o};e.PublishableLayer=p,e.isPublishableLayer=c,Object.defineProperty(e,Symbol.toStringTag,{value:"Module"})}));
