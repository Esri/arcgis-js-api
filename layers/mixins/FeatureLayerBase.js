/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.25/esri/copyright.txt for details.
*/
define(["exports","../../chunks/_rollupPluginBabelHelpers","../../chunks/tslib.es6","../../core/Collection","../../core/lang","../../core/Logger","../../core/accessorSupport/decorators/property","../../core/accessorSupport/ensureType","../../core/accessorSupport/decorators/reader","../../core/accessorSupport/decorators/subclass","../../core/accessorSupport/decorators/writer","../../geometry/Extent","../../geometry/HeightModelInfo","../../geometry/SpatialReference","../support/arcgisLayerUrl","../support/commonProperties","../support/FeatureIndex","../support/featureLayerUtils","../support/GeometryFieldsInfo","../support/LayerFloorInfo","../support/Relationship"],(function(e,r,o,t,i,a,n,p,d,l,s,c,y,u,_,v,f,g,I,m,S){"use strict";const F=e=>{let p=function(e){function o(){var r;return(r=e.apply(this,arguments)||this).capabilities=null,r.copyright=null,r.datesInUnknownTimezone=!1,r.displayField=null,r.definitionExpression=null,r.editFieldsInfo=null,r.editingInfo=null,r.elevationInfo=null,r.floorInfo=null,r.fullExtent=null,r.gdbVersion=null,r.geometryFieldsInfo=null,r.geometryType=null,r.hasM=void 0,r.hasZ=void 0,r.heightModelInfo=null,r.historicMoment=null,r.isTable=!1,r.layerId=void 0,r.minScale=0,r.maxScale=0,r.globalIdField=null,r.objectIdField=null,r.relationships=null,r.sourceJSON=null,r.returnM=void 0,r.returnZ=void 0,r.serviceDefinitionExpression=null,r.spatialReference=u.WGS84,r.subtypeField=null,r.trackIdField=null,r.indexes=new(t.ofType(f.FeatureIndex)),r.userIsAdmin=!1,r.version=void 0,r}r._inheritsLoose(o,e);var i=o.prototype;return i.readCapabilitiesFromService=function(e,r){return g.getFeatureLayerCapabilities(e,r,this.url)},i.readEditingInfo=function(e,r){const{editingInfo:o}=r;return o?{lastEditDate:null!=o.lastEditDate?new Date(o.lastEditDate):null}:null},i.readIsTableFromService=function(e,r){return"Table"===r.type},i.readMinScale=function(e,r){return r.effectiveMinScale||e||0},i.readMaxScale=function(e,r){return r.effectiveMaxScale||e||0},i.readGlobalIdFieldFromService=function(e,r){return g.readGlobalIdField(r)},i.readObjectIdFieldFromService=function(e,r){return g.readObjectIdField(r)},i.readServiceDefinitionExpression=function(e,r){return r.definitionQuery||r.definitionExpression},i.writeUrl=function(e,r,o,t){_.writeUrlWithLayerId(this,e,null,r,t)},i.readVersion=function(e,r){return g.readVersion(r)},r._createClass(o,[{key:"url",set:function(e){const r=_.sanitizeUrlWithLayerId({layer:this,url:e,nonStandardUrlAllowed:!0,logger:a.getLogger(this.declaredClass)});this._set("url",r.url),null!=r.layerId&&this._set("layerId",r.layerId)}}]),o}(e);return o.__decorate([n.property({readOnly:!0,json:{read:!1,origins:{service:{read:{source:["advancedQueryCapabilities","allowGeometryUpdates","allowUpdateWithoutMValues","archivingInfo","capabilities","datesInUnknownTimezone","hasAttachments","hasM","hasZ","maxRecordCount","maxRecordCountFactor","ownershipBasedAccessControlForFeatures","standardMaxRecordCount","supportedQueryFormats","supportsAdvancedQueries","supportsApplyEditsWithGlobalIds","supportsAttachmentsByUploadId","supportsAttachmentsResizing","supportsCalculate","supportsCoordinatesQuantization","supportsExceedsLimitStatistics","supportsFieldDescriptionProperty","supportsQuantizationEditMode","supportsRollbackOnFailureParameter","supportsStatistics","supportsTruncate","supportsValidateSql","tileMaxRecordCount","useStandardizedQueries"]}}}}})],p.prototype,"capabilities",void 0),o.__decorate([d.reader("service","capabilities")],p.prototype,"readCapabilitiesFromService",null),o.__decorate([n.property({type:String,json:{origins:{service:{read:{source:"copyrightText"}}}}})],p.prototype,"copyright",void 0),o.__decorate([n.property({type:Boolean})],p.prototype,"datesInUnknownTimezone",void 0),o.__decorate([n.property({type:String,json:{origins:{service:{read:{source:"displayField"}}}}})],p.prototype,"displayField",void 0),o.__decorate([n.property({type:String,json:{origins:{service:{read:!1,write:!1}},name:"layerDefinition.definitionExpression",write:{enabled:!0,allowNull:!0}}})],p.prototype,"definitionExpression",void 0),o.__decorate([n.property({readOnly:!0})],p.prototype,"editFieldsInfo",void 0),o.__decorate([n.property({readOnly:!0})],p.prototype,"editingInfo",void 0),o.__decorate([d.reader("editingInfo")],p.prototype,"readEditingInfo",null),o.__decorate([n.property((()=>{const e=i.clone(v.elevationInfo),r=e.json.origins;return r["web-map"]={read:!1,write:!1},r["portal-item"]={read:!1,write:!1},e})())],p.prototype,"elevationInfo",void 0),o.__decorate([n.property({type:m,json:{read:{source:"layerDefinition.floorInfo"},write:{target:"layerDefinition.floorInfo"}}})],p.prototype,"floorInfo",void 0),o.__decorate([n.property({type:c,json:{origins:{service:{read:{source:"extent"}}}}})],p.prototype,"fullExtent",void 0),o.__decorate([n.property()],p.prototype,"gdbVersion",void 0),o.__decorate([n.property({readOnly:!0,type:I,json:{read:{source:"geometryProperties"}}})],p.prototype,"geometryFieldsInfo",void 0),o.__decorate([n.property({type:["point","polygon","polyline","multipoint","multipatch","mesh"],json:{origins:{service:{read:g.geometryTypeKebabDict.read}}}})],p.prototype,"geometryType",void 0),o.__decorate([n.property({type:Boolean,json:{origins:{service:{read:!0}}}})],p.prototype,"hasM",void 0),o.__decorate([n.property({type:Boolean,json:{origins:{service:{read:!0}}}})],p.prototype,"hasZ",void 0),o.__decorate([n.property({readOnly:!0,type:y})],p.prototype,"heightModelInfo",void 0),o.__decorate([n.property({type:Date})],p.prototype,"historicMoment",void 0),o.__decorate([n.property({readOnly:!0})],p.prototype,"isTable",void 0),o.__decorate([d.reader("service","isTable",["type"])],p.prototype,"readIsTableFromService",null),o.__decorate([n.property({type:Number,json:{origins:{service:{read:{source:"id"}},"portal-item":{read:!1,write:{target:"id"}}},read:!1}})],p.prototype,"layerId",void 0),o.__decorate([n.property(v.minScale)],p.prototype,"minScale",void 0),o.__decorate([d.reader("service","minScale",["minScale","effectiveMinScale"])],p.prototype,"readMinScale",null),o.__decorate([n.property(v.maxScale)],p.prototype,"maxScale",void 0),o.__decorate([d.reader("service","maxScale",["maxScale","effectiveMaxScale"])],p.prototype,"readMaxScale",null),o.__decorate([n.property({type:String})],p.prototype,"globalIdField",void 0),o.__decorate([d.reader("service","globalIdField",["globalIdField","fields"])],p.prototype,"readGlobalIdFieldFromService",null),o.__decorate([n.property({type:String})],p.prototype,"objectIdField",void 0),o.__decorate([d.reader("service","objectIdField",["objectIdField","fields"])],p.prototype,"readObjectIdFieldFromService",null),o.__decorate([n.property({type:[S],readOnly:!0})],p.prototype,"relationships",void 0),o.__decorate([n.property()],p.prototype,"sourceJSON",void 0),o.__decorate([n.property({type:Boolean})],p.prototype,"returnM",void 0),o.__decorate([n.property({type:Boolean})],p.prototype,"returnZ",void 0),o.__decorate([n.property({readOnly:!0})],p.prototype,"serviceDefinitionExpression",void 0),o.__decorate([d.reader("service","serviceDefinitionExpression",["definitionQuery","definitionExpression"])],p.prototype,"readServiceDefinitionExpression",null),o.__decorate([n.property({type:u,json:{origins:{service:{read:{source:"extent.spatialReference"}}}}})],p.prototype,"spatialReference",void 0),o.__decorate([n.property({type:String,readOnly:!0,json:{origins:{service:{read:!0}}}})],p.prototype,"subtypeField",void 0),o.__decorate([n.property({type:String,json:{read:{source:"timeInfo.trackIdField"}}})],p.prototype,"trackIdField",void 0),o.__decorate([n.property({readOnly:!0,json:{write:!1}})],p.prototype,"serverGens",void 0),o.__decorate([n.property({type:t.ofType(f.FeatureIndex),readOnly:!0})],p.prototype,"indexes",void 0),o.__decorate([n.property(v.url)],p.prototype,"url",null),o.__decorate([s.writer("url")],p.prototype,"writeUrl",null),o.__decorate([n.property({readOnly:!0})],p.prototype,"userIsAdmin",void 0),o.__decorate([n.property({json:{origins:{service:{read:!0}},read:!1}})],p.prototype,"version",void 0),o.__decorate([d.reader("service","version",["currentVersion","capabilities","drawingInfo","hasAttachments","htmlPopupType","relationships","timeInfo","typeIdField","types"])],p.prototype,"readVersion",null),p=o.__decorate([l.subclass("esri.layers.mixins.FeatureLayerBase")],p),p};e.FeatureLayerBase=F,Object.defineProperties(e,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})}));
