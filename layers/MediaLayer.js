/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.25/esri/copyright.txt for details.
*/
define(["../chunks/_rollupPluginBabelHelpers","../chunks/tslib.es6","../core/Collection","../core/Logger","../core/maybe","../core/accessorSupport/decorators/property","../core/arrayUtils","../core/accessorSupport/decorators/cast","../core/accessorSupport/decorators/subclass","./Layer","./mixins/BlendLayer","./mixins/ScaleRangeLayer","./support/LocalMediaElementSource"],(function(e,r,t,o,s,a,c,n,l,i,p,u,d){"use strict";let y=function(r){function a(e){var t;return(t=r.call(this,e)||this).copyright=null,t.spatialReference=null,t.type="media",t.source=new d,t}e._inheritsLoose(a,r);var c=a.prototype;return c.load=function(e){this.spatialReference&&(this.source.spatialReference=this.spatialReference);const r=this.source.load(e).then((()=>{this.spatialReference=this.source.spatialReference}));return this.addResolvingPromise(r),Promise.resolve(this)},c.destroy=function(){s.unwrap(this.source)?.destroy()},c.castSource=function(e){return e?Array.isArray(e)||e instanceof t?new d({elements:e}):e:null},e._createClass(a,[{key:"fullExtent",get:function(){return this.source?.fullExtent}},{key:"source",set:function(e){"not-loaded"===this.loadStatus?this._set("source",e):o.getLogger(this.declaredClass).error("#source","source cannot be changed after the layer is loaded.")}}]),a}(p.BlendLayer(u.ScaleRangeLayer(i)));r.__decorate([a.property({type:String})],y.prototype,"copyright",void 0),r.__decorate([a.property({readOnly:!0})],y.prototype,"fullExtent",null),r.__decorate([a.property({type:["show","hide"]})],y.prototype,"listMode",void 0),r.__decorate([a.property({nonNullable:!0})],y.prototype,"source",null),r.__decorate([n.cast("source")],y.prototype,"castSource",null),r.__decorate([a.property()],y.prototype,"spatialReference",void 0),r.__decorate([a.property({readOnly:!0})],y.prototype,"type",void 0),y=r.__decorate([l.subclass("esri.layers.MediaLayer")],y);return y}));
