// COPYRIGHT © 201 Esri
//
// All rights reserved under the copyright laws of the United States
// and applicable international laws, treaties, and conventions.
//
// This material is licensed for use under the Esri Master License
// Agreement (MLA), and is bound by the terms of that agreement.
// You may redistribute and use this code without modification,
// provided you adhere to the terms of the MLA and include this
// copyright notice.
//
// See use restrictions at http://www.esri.com/legal/pdfs/mla_e204_e300/english
//
// For additional information, contact:
// Environmental Systems Research Institute, Inc.
// Attn: Contracts and Legal Services Department
// 380 New York Street
// Redlands, California, USA 92373
// USA
//
// email: contracts@esri.com
//
// See http://js.arcgis.com/3.26/esri/copyright.txt for details.

// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See http://js.arcgis.com/3.25/esri/copyright.txt for details.
//>>built

!function(e,t){var r,n=function(){return void 0!==m&&"function"!=typeof m?m:"undefined"!=typeof window?window:"undefined"!=typeof self?self:this}(),i=function(){},o=function(e){for(var t in e)return 0;return 1},s={}.toString,a=function(e){return"[object Function]"==s.call(e)},c=function(e){return"[object String]"==s.call(e)},u=function(e){return"[object Array]"==s.call(e)},l=function(e,t){if(e)for(var r=0;r<e.length;)t(e[r++])},f=function(e,t){for(var r in t)e[r]=t[r];return e},h=function(e,t){return f(Error(e),{src:"dojoLoader",info:t})},p=1,d=function(){return"_"+p++},y=function(e,t,r){return Z(e,t,r,0,y)},m=n,v=m.document,g=v&&v.createElement("DiV"),x=y.has=function(e){return a(_[e])?_[e]=_[e](m,v,g):_[e]},_=x.cache=t.hasCache;a(e)&&(e=e(n)),x.add=function(e,t,r,n){return(void 0===_[e]||n)&&(_[e]=t),r&&x(e)},f(t.hasCache,{"host-browser":0,dom:0,"dojo-dom-ready-api":0,"dojo-sniff":0,"dojo-inject-api":1,"host-webworker":1,"dojo-guarantee-console":0}),t.loaderPatch={injectUrl:function(e,t){try{importScripts(e),t()}catch(t){console.info("failed to load resource ("+e+")"),console.error(t)}}};for(var b in e.has)x.add(b,e.has[b],0,1);y.async=1;var w=x("csp-restrictions")?function(){}:new Function("return eval(arguments[0]);");y.eval=function(e,t){return w(e+"\r\n//# sourceURL="+t)};var I={},k=y.signal=function(e,t){var r=I[e];l(r&&r.slice(0),function(e){e.apply(null,u(t)?t:[t])})};b=y.on=function(e,t){var r=I[e]||(I[e]=[]);return r.push(t),{remove:function(){for(var e=0;e<r.length;e++)if(r[e]===t){r.splice(e,1);break}}}};var D=[],C={},T=[],S={},A=y.map={},P=[],j={},M="",B={},E={},n={},L=function(e){var t,r,n,i;for(t in E)r=E[t],(n=t.match(/^url\:(.+)/))?B["url:"+fe(n[1],e)]=r:"*now"==t?i=r:"*noref"!=t&&(n=se(t,e,!0),B[n.mid]=B["url:"+n.url]=r);i&&i(W(e)),E={}},O=function(e){return e.replace(/([\.$?*|{}\(\)\[\]\\\/\+^])/g,function(e){return"\\"+e})},z=function(e,t){t.splice(0,t.length);for(var r in e)t.push([r,e[r],new RegExp("^"+O(r)+"(/|$)"),r.length]);return t.sort(function(e,t){return t[3]-e[3]}),t},V=function(e,t){l(e,function(e){t.push([c(e[0])?new RegExp("^"+O(e[0])+"$"):e[0],e[1]])})},N=function(e){var t=e.name;t||(t=e,e={name:t}),e=f({main:"main"},e),e.location=e.location?e.location:t,e.packageMap&&(A[t]=e.packageMap),e.main.indexOf("./")||(e.main=e.main.substring(2)),S[t]=e},R=[],F=function(e,t,r){for(var n in e)"waitSeconds"==n&&(y.waitms=1e3*(e[n]||0)),"cacheBust"==n&&(M=e[n]?c(e[n])?e[n]:(new Date).getTime()+"":""),"baseUrl"!=n&&"combo"!=n||(y[n]=e[n]),e[n]!==_&&(y.rawConfig[n]=e[n],"has"!=n&&x.add("config-"+n,e[n],0,t));y.baseUrl||(y.baseUrl="./"),/\/$/.test(y.baseUrl)||(y.baseUrl+="/");for(n in e.has)x.add(n,e.has[n],0,t);l(e.packages,N);for(var i in e.packagePaths)l(e.packagePaths[i],function(e){var t=i+"/"+e;c(e)&&(e={name:e}),e.location=t,N(e)});if(z(f(A,e.map),P),l(P,function(e){e[1]=z(e[1],[]),"*"==e[0]&&(P.star=e)}),z(f(C,e.paths),T),V(e.aliases,D),t)R.push({config:e.config});else for(n in e.config)t=ue(n,r),t.config=f(t.config||{},e.config[n]);e.cache&&(L(),E=e.cache,e.cache["*noref"]&&L()),k("config",[e,y.rawConfig])};if(x("dojo-cdn")){var q=v.getElementsByTagName("script");r=0;for(var U,G,Y,J;r<q.length;)U=q[r++],(Y=U.getAttribute("src"))&&(J=Y.match(/(((.*)\/)|^)dojo\.js(\W|$)/i))&&(G=J[3]||"",t.baseUrl=t.baseUrl||G),(Y=U.getAttribute("data-dojo-config")||U.getAttribute("djConfig"))&&(n=y.eval("({ "+Y+" })","data-dojo-config"))}y.rawConfig={},F(t,1),x("dojo-cdn")&&((S.dojo.location=G)&&(G+="/"),S.dijit.location=G+"../dijit/",S.dojox.location=G+"../dojox/"),F(e,1),F(n,1);var H=function(e){ke(function(){l(e.deps,Pe)})},Z=function(e,t,r,n,o){var s;if(c(e)){if((s=ue(e,n,!0))&&s.executed)return s.result;throw h("undefinedModule",e)}if(u(e)||(F(e,0,n),e=t,t=r),u(e))if(e.length){r="require*"+d();for(var a,l=[],p=0;p<e.length;)a=e[p++],l.push(ue(a,n));s=f(ie("",r,0,""),{injected:2,deps:l,def:t||i,require:n?n.require:y,gc:1}),j[s.mid]=s,H(s);var m=Ie&&!0;ke(function(){we(s,m)}),s.executed||$.push(s),De()}else t&&t();return o},W=function(e){if(!e)return y;var t=e.require;return t||(t=function(r,n,i){return Z(r,n,i,e,t)},e.require=f(t,y),t.module=e,t.toUrl=function(t){return fe(t,e)},t.toAbsMid=function(t){return le(t,e)}),t},$=[],K=[],X={},Q=function(e){e.injected=1,X[e.mid]=1,e.url&&(X[e.url]=e.pack||1),Le()},ee=function(e){e.injected=2,delete X[e.mid],e.url&&delete X[e.url],o(X)&&Ee()},te=y.idle=function(){return!K.length&&o(X)&&!$.length&&!Ie},re=function(e,t){if(t)for(var r=0;r<t.length;r++)if(t[r][2].test(e))return t[r];return 0},ne=function(e){var t,r,n=[];for(e=e.replace(/\\/g,"/").split("/");e.length;)t=e.shift(),".."==t&&n.length&&".."!=r?(n.pop(),r=n[n.length-1]):"."!=t&&n.push(r=t);return n.join("/")},ie=function(e,t,r,n){return{pid:e,mid:t,pack:r,url:n,executed:0,def:0}},oe=function(e,t,r,n,i,o,s,c,u){var f,p,d,y;if(y=/^\./.test(e),/(^\/)|(\:)|(\.js$)/.test(e)||y&&!t)return ie(0,e,0,e);if(e=ne(y?t.mid+"/../"+e:e),/^\./.test(e))throw h("irrationalPath",e);t&&(d=re(t.mid,o)),(d=(d=d||o.star)&&re(e,d[1]))&&(e=d[1]+e.substring(d[3])),t=(J=e.match(/^([^\/]+)(\/(.+))?$/))?J[1]:"",(f=r[t])?e=t+"/"+(p=J[3]||f.main):t="";var m=0;return l(c,function(t){var r=e.match(t[0]);r&&0<r.length&&(m=a(t[1])?e.replace(t[0],t[1]):t[1])}),m?oe(m,0,r,n,i,o,s,c,u):(r=n[e])?u?ie(r.pid,r.mid,r.pack,r.url):n[e]:(n=(d=re(e,s))?d[1]+e.substring(d[3]):t?("/"===f.location.slice(-1)?f.location.slice(0,-1):f.location)+"/"+p:x("config-tlmSiblingOfDojo")?"../"+e:e,/(^\/)|(\:)/.test(n)||(n=i+n),ie(t,e,f,ne(n+".js")))},se=function(e,t,r){return oe(e,t,S,j,y.baseUrl,r?[]:P,r?[]:T,r?[]:D)},ae=function(e,t,r){return e.normalize?e.normalize(t,function(e){return le(e,r)}):le(t,r)},ce=0,ue=function(e,t,r){var n,i;return(n=e.match(/^(.+?)\!(.*)$/))?(i=ue(n[1],t,r),5!==i.executed||i.load||ge(i),i.load?(n=ae(i,n[2],t),e=i.mid+"!"+(i.dynamic?++ce+"!":"")+n):(n=n[2],e=i.mid+"!"+ ++ce+"!waitingForPlugin"),e={plugin:i,mid:e,req:W(t),prid:n}):e=se(e,t),j[e.mid]||!r&&(j[e.mid]=e)},le=y.toAbsMid=function(e,t){return se(e,t).mid},fe=y.toUrl=function(e,t){var r=se(e+"/x",t),n=r.url;return Ce(0===r.pid?e:n.substring(0,n.length-5))},he={injected:2,executed:5,def:3,result:3};G=function(e){return j[e]=f({mid:e},he)};var pe=G("require"),de=G("exports"),ye=G("module"),me={},ve=0,ge=function(e){var t=e.result;return e.dynamic=t.dynamic,e.normalize=t.normalize,e.load=t.load,e},xe=function(e){var t={};l(e.loadQ,function(r){var n=ae(e,r.prid,r.req.module),i=e.dynamic?r.mid.replace(/waitingForPlugin$/,n):e.mid+"!"+n,n=f(f({},r),{mid:i,prid:n,injected:0});j[i]&&j[i].injected||Te(j[i]=n),t[r.mid]=j[i],ee(r),delete j[r.mid]}),e.loadQ=0;var r,n=function(e){for(var r=e.deps||[],n=0;n<r.length;n++)(e=t[r[n].mid])&&(r[n]=e)};for(r in j)n(j[r]);l($,n)},_e=function(e){for(y.trace("loader-finish-exec",[e.mid]),e.executed=5,e.defOrder=ve++,e.loadQ&&(ge(e),xe(e)),r=0;r<$.length;)$[r]===e?$.splice(r,1):r++;/^require\*/.test(e.mid)&&delete j[e.mid]},be=[],we=function(e,t){if(4===e.executed)return y.trace("loader-circular-dependency",[be.concat(e.mid).join("->")]),!e.def||t?me:e.cjs&&e.cjs.exports;if(!e.executed){if(!e.def)return me;var r,n=e.mid,i=e.deps||[],o=[],s=0;for(e.executed=4;r=i[s++];){if((r=r===pe?W(e):r===de?e.cjs.exports:r===ye?e.cjs:we(r,t))===me)return e.executed=0,y.trace("loader-exec-module",["abort",n]),me;o.push(r)}y.trace("loader-run-factory",[e.mid]);var c,n=e.def;if(x("config-dojo-loader-catches"))try{c=a(n)?n.apply(null,o):n}catch(t){k("error",e.result=h("factoryThrew",[e,t]))}else c=a(n)?n.apply(null,o):n;e.result=void 0===c&&e.cjs?e.cjs.exports:c,_e(e)}return e.result},Ie=0,ke=function(e){try{Ie++,e()}catch(e){throw e}finally{Ie--}te()&&k("idle",[])},De=function(){Ie||ke(function(){for(var e,t,r=0;r<$.length;)e=ve,t=$[r],we(t),e!=ve?r=0:r++})},Ce="function"==typeof e.fixupUrl?e.fixupUrl:function(e){return(e+="")+(M?(/\?/.test(e)?"&":"?")+M:"")};void 0===x("dojo-loader-eval-hint-url")&&x.add("dojo-loader-eval-hint-url",1);var Te=function(e){var t=e.plugin;5!==t.executed||t.load||ge(t);var r=function(t){e.result=t,ee(e),_e(e),De()};t.load?t.load(e.prid,e.req,r):t.loadQ?t.loadQ.push(e):(t.loadQ=[e],$.unshift(t),Pe(t))},Se=0,Ae=function(e,t){if(x("config-stripStrict")&&(e=e.replace(/(["'])use strict\1/g,"")),x("config-dojo-loader-catches"))try{e===Se?Se.call(null):y.eval(e,x("dojo-loader-eval-hint-url")?t.url:t.mid)}catch(e){k("error",h("evalModuleThrew",t))}else e===Se?Se.call(null):y.eval(e,x("dojo-loader-eval-hint-url")?t.url:t.mid)},Pe=function(e){var t=e.mid,r=e.url;if(!(e.executed||e.injected||X[t]||e.url&&(e.pack&&X[e.url]===e.pack||1==X[e.url])))if(Q(e),e.plugin)Te(e);else{var n=function(){if(Me(e),2!==e.injected){if(x("dojo-enforceDefine"))return void k("error",h("noDefine",e));ee(e),f(e,he),y.trace("loader-define-nonmodule",[e.url])}De()};(Se=B[t]||B["url:"+e.url])?(y.trace("loader-inject",["cache",e.mid,r]),Ae(Se,e),n()):(y.trace("loader-inject",["script",e.mid,r]),y.injectUrl(Ce(r),n,e))}},je=function(e,t,r){if(y.trace("loader-define-module",[e.mid,t]),2===e.injected)return k("error",h("multipleDefine",e)),e;f(e,{deps:t,def:r,cjs:{id:e.mid,uri:e.url,exports:e.result={},setExports:function(t){e.cjs.exports=t},config:function(){return e.config}}});for(var n=0;t[n];n++)t[n]=ue(t[n],e);return ee(e),a(r)||t.length||(e.result=r,_e(e)),e},Me=function(e,t){for(var r,n,i=[];K.length;)n=K.shift(),t&&(n[0]=t.shift()),r=n[0]&&ue(n[0])||e,i.push([r,n[1],n[2]]);L(e),l(i,function(e){H(je.apply(null,e))})},Be=0,Ee=i,Le=i,Ee=function(){Be&&clearTimeout(Be),Be=0},Le=function(){Ee(),y.waitms&&(Be=m.setTimeout(function(){Ee(),k("error",h("timeout",X))},y.waitms))};y.log=function(){try{for(var e=0;e<arguments.length;e++)console.log(arguments[e])}catch(e){}},y.trace=i,G=function(e,t,r){var n=arguments.length,i=["require","exports","module"],o=[0,e,t];1==n?o=[0,a(e)?i:[],e]:2==n&&c(e)?o=[e,a(t)?i:[],t]:3==n&&(o=[e,t,r]),y.trace("loader-define",o.slice(0,2)),(n=o[0]&&ue(o[0]))&&!X[n.mid]?H(je(n,o[1],o[2])):(x("ie-event-behavior"),K.push(o))},G.amd={vendor:"dojotoolkit.org"},f(f(y,t.loaderPatch),e.loaderPatch),b("error",function(e){try{if(console.error(e),e instanceof Error){for(var t in e)console.log(t+":",e[t]);console.log(".")}}catch(e){}}),f(y,{uid:d,cache:B,packs:S}),m.define?k("error",h("defineAlreadyDefined",0)):(m.define=G,m.require=y,l(R,function(e){F(e)}),b=n.deps||e.deps||t.deps,n=n.callback||e.callback||t.callback,y.boot=b||n?[b||[],n]:0)}(function(e){return e.dojoConfig||e.djConfig||e.require||{}},{async:1,hasCache:{"config-selectorEngine":"acme","config-tlmSiblingOfDojo":1,"dojo-built":1,"dojo-loader":1,dom:1,"host-browser":1},packages:[{location:".",name:"dojo"},{location:"../dijit",name:"dijit"},{location:"../dojox",name:"dojox"},{location:"../dgrid",main:"OnDemandGrid",name:"dgrid"},{location:"../dgrid1",main:"OnDemandGrid",name:"dgrid1"},{location:"../dstore",main:"Store",name:"dstore"},{location:"../put-selector",main:"put",name:"put-selector"},{location:"../xstyle",name:"xstyle"},{location:"../moment",main:"moment.js",name:"moment"},{location:"../esri",name:"esri"}]}),require({cache:{"dojo/_base/lang":function(){define(["./kernel","../has","../sniff"],function(e,t){t.add("bug-for-in-skips-shadowed",function(){for(var e in{toString:1})return 0;return 1});var r=t("bug-for-in-skips-shadowed")?"hasOwnProperty valueOf isPrototypeOf propertyIsEnumerable toLocaleString toString constructor".split(" "):[],n=r.length,i=function(t,r,n){n||(n=t[0]&&e.scopeMap[t[0]]?e.scopeMap[t.shift()][1]:e.global);try{for(var i=0;i<t.length;i++){var o=t[i];if(!(o in n)){if(!r)return;n[o]={}}n=n[o]}return n}catch(e){}},o=Object.prototype.toString,s=function(e,t,r){return(r||[]).concat(Array.prototype.slice.call(e,t||0))},a=/\{([^\}]+)\}/g,c={_extraNames:r,_mixin:function(e,i,o){var s,a,c,u={};for(s in i)a=i[s],s in e&&(e[s]===a||s in u&&u[s]===a)||(e[s]=o?o(a):a);if(t("bug-for-in-skips-shadowed")&&i)for(c=0;c<n;++c)s=r[c],a=i[s],s in e&&(e[s]===a||s in u&&u[s]===a)||(e[s]=o?o(a):a);return e},mixin:function(e,t){e||(e={});for(var r=1,n=arguments.length;r<n;r++)c._mixin(e,arguments[r]);return e},setObject:function(e,t,r){var n=e.split(".");return e=n.pop(),(r=i(n,!0,r))&&e?r[e]=t:void 0},getObject:function(e,t,r){return e?i(e.split("."),t,r):r},exists:function(e,t){return void 0!==c.getObject(e,!1,t)},isString:function(e){return"string"==typeof e||e instanceof String},isArray:Array.isArray||function(e){return"[object Array]"==o.call(e)},isFunction:function(e){return"[object Function]"===o.call(e)},isObject:function(e){return void 0!==e&&(null===e||"object"==typeof e||c.isArray(e)||c.isFunction(e))},isArrayLike:function(e){return!!e&&!c.isString(e)&&!c.isFunction(e)&&!(e.tagName&&"form"==e.tagName.toLowerCase())&&(c.isArray(e)||isFinite(e.length))},isAlien:function(e){return e&&!c.isFunction(e)&&/\{\s*\[native code\]\s*\}/.test(String(e))},extend:function(e,t){for(var r=1,n=arguments.length;r<n;r++)c._mixin(e.prototype,arguments[r]);return e},_hitchArgs:function(t,r){var n=c._toArray(arguments,2),i=c.isString(r);return function(){var o=c._toArray(arguments),s=i?(t||e.global)[r]:r;return s&&s.apply(t||this,n.concat(o))}},hitch:function(t,r){if(2<arguments.length)return c._hitchArgs.apply(e,arguments);if(r||(r=t,t=null),c.isString(r)){if(t=t||e.global,!t[r])throw['lang.hitch: scope["',r,'"] is null (scope="',t,'")'].join("");return function(){return t[r].apply(t,arguments||[])}}return t?function(){return r.apply(t,arguments||[])}:r},delegate:function(){function e(){}return function(t,r){e.prototype=t;var n=new e;return e.prototype=null,r&&c._mixin(n,r),n}}(),_toArray:t("ie")?function(){function e(e,t,r){for(r=r||[],t=t||0;t<e.length;t++)r.push(e[t]);return r}return function(t){return(t.item?e:s).apply(this,arguments)}}():s,partial:function(t){return c.hitch.apply(e,[null].concat(c._toArray(arguments)))},clone:function(e){if(!e||"object"!=typeof e||c.isFunction(e))return e;if(e.nodeType&&"cloneNode"in e)return e.cloneNode(!0);if(e instanceof Date)return new Date(e.getTime());if(e instanceof RegExp)return new RegExp(e);var t,r,n;if(c.isArray(e))for(t=[],r=0,n=e.length;r<n;++r)r in e&&(t[r]=c.clone(e[r]));else t=e.constructor?new e.constructor:{};return c._mixin(t,e,c.clone)},trim:String.prototype.trim?function(e){return e.trim()}:function(e){return e.replace(/^\s\s*/,"").replace(/\s\s*$/,"")},replace:function(e,t,r){return e.replace(r||a,c.isFunction(t)?t:function(e,r){return c.getObject(r,!1,t)})}};return c.mixin(e,c),c})},"dojo/_base/kernel":function(){define(["../global","../has","./config","require","module"],function(e,t,r,n,i){var o,s={},a={},c={config:r,global:e,dijit:s,dojox:a},s={dojo:["dojo",c],dijit:["dijit",s],dojox:["dojox",a]};i=n.map&&n.map[i.id.match(/[^\/]+/)[0]];for(o in i)s[o]?s[o][0]=i[o]:s[o]=[i[o],{}];for(o in s)i=s[o],i[1]._scopeName=i[0],r.noGlobals||(e[i[0]]=i[1]);if(c.scopeMap=s,c.baseUrl=c.config.baseUrl=n.baseUrl,c.isAsync=n.async,c.locale=r.locale,e="$Rev: aaa6750 $".match(/[0-9a-f]{7,}/),c.version={major:1,minor:13,patch:0,flag:"",revision:e?e[0]:NaN,toString:function(){var e=c.version;return e.major+"."+e.minor+"."+e.patch+e.flag+" ("+e.revision+")"}},t("csp-restrictions")||Function("d","d.eval = function(){return d.global.eval ? d.global.eval(arguments[0]) : eval(arguments[0]);}")(c),c.exit=function(){},t.add("dojo-debug-messages",!!r.isDebug),c.deprecated=c.experimental=function(){},t("dojo-debug-messages")&&(c.deprecated=function(e,t,r){e="DEPRECATED: "+e,t&&(e+=" "+t),r&&(e+=" -- will be removed in version: "+r),console.warn(e)},c.experimental=function(e,t){var r="EXPERIMENTAL: "+e+" -- APIs subject to change without notice.";t&&(r+=" "+t),console.warn(r)}),r.modulePaths){c.deprecated("dojo.modulePaths","use paths configuration"),t={};for(o in r.modulePaths)t[o.replace(/\./g,"/")]=r.modulePaths[o];n({paths:t})}return c.moduleUrl=function(e,t){c.deprecated("dojo.moduleUrl()","use require.toUrl","2.0");var r=null;return e&&(r=n.toUrl(e.replace(/\./g,"/")+(t?"/"+t:"")+"/*.*").replace(/\/\*\.\*/,"")+(t?"":"/")),r},c._hasResource={},c})},"dojo/global":function(){define(function(){return"undefined"!=typeof global&&"function"!=typeof global?global:"undefined"!=typeof window?window:"undefined"!=typeof self?self:this})},"dojo/has":function(){define(["./global","require","module"],function(e,t,r){var n=t.has||function(){};return n.clearElement=function(e){return e.innerHTML="",e},n.normalize=function(e,t){var r=e.match(/[\?:]|[^:\?]*/g),i=0,o=function(e){var t=r[i++];return":"==t?0:"?"==r[i++]?!e&&n(t)?o():(o(!0),o(e)):t||0};return(e=o())&&t(e)},n.load=function(e,t,r){e?t([e],r):r()},n})},"dojo/_base/config":function(){define(["../global","../has","require"],function(e,t,r){e={},r=r.rawConfig;for(var n in r)e[n]=r[n];return!e.locale&&"undefined"!=typeof navigator&&(n=navigator.languages&&navigator.languages.length?navigator.languages[0]:navigator.language||navigator.userLanguage)&&(e.locale=n.toLowerCase()),e})},"dojo/sniff":function(){define(["./has"],function(e){return e})}}}),function(){var e=this.require;e({cache:{}}),!e.async&&e(["dojo"]),e.boot&&e.apply(null,e.boot)}(),require({cache:{"esri/config":function(){define(["dojo/_base/config","dojo/topic","dojo/has","./kernel"],function(e,t,r,n){var i=function(){return this}(),o={defaults:{screenDPI:96,geometryService:null,kmlService:null,map:{width:400,height:400,layerNamePrefix:"layer",graphicsLayerNamePrefix:"graphicsLayer",slider:{left:"30px",top:"30px",width:null,height:"200px"},sliderLabel:{tick:5,labels:null,style:"width:2em; font-family:Verdana; font-size:75%;"},sliderChangeImmediate:!0,zoomSymbol:{color:[0,0,0,64],outline:{color:[255,0,0,255],width:1.25,style:"esriSLSSolid"},style:"esriSFSSolid"},zoomDuration:500,zoomRate:25,zoomAnimationThrottled:!0,panDuration:350,panRate:25,logoLink:"http://www.esri.com"},autoSpatialIndexing:i.Worker&&!1,io:{errorHandler:function(e,r){t.publish("esri.Error",[e])},proxyUrl:null,alwaysUseProxy:!1,useCors:"with-credentials",corsEnabledServers:[/^https?:\/\/.+\.arcgis\.com(\/|$)/i,"server.arcgisonline.com","services.arcgisonline.com","www.arcgis.com","js.arcgis.com","jsdev.arcgis.com","jsqa.arcgis.com","tiles.arcgis.com","tiles1.arcgis.com","tiles2.arcgis.com","tiles3.arcgis.com","tiles4.arcgis.com","basemaps.arcgis.com","basemapsbeta.arcgis.com","elevation3d.arcgis.com","services.arcgis.com","services1.arcgis.com","services2.arcgis.com","services3.arcgis.com","services4.arcgis.com","services5.arcgis.com","services6.arcgis.com","services7.arcgis.com","services8.arcgis.com","services9.arcgis.com","cdn.arcgis.com","cdn-a.arcgis.com","cdn-b.arcgis.com","static.arcgis.com","utility.arcgis.com","utility.arcgisonline.com","geocode.arcgis.com","geoenrich.arcgis.com","qaext.arcgis.com","staticqa.arcgis.com","tilesqa.arcgis.com","servicesqa.arcgis.com","servicesqa1.arcgis.com","servicesqa2.arcgis.com","servicesqa3.arcgis.com","geocodeqa.arcgis.com","geoenrichqa.arcgis.com","dev.arcgis.com","devext.arcgis.com","localvtiles.arcgis.com","staticdev.arcgis.com","tilesdevext.arcgis.com","elevation3ddev.arcgis.com","servicesdev.arcgis.com","servicesdev1.arcgis.com","servicesdev2.arcgis.com","servicesdev3.arcgis.com","geocodedev.arcgis.com","geoenrichdev.arcgis.com","basemapsdev.arcgis.com","basemapsbetadev.arcgis.com"],corsDetection:!i.cordova,corsDetectionTimeout:15,corsStatus:{},webTierAuthServers:[],proxyRules:[],postLength:2e3,timeout:6e4,useWorkers:"on-request",maxRequestWorkers:5,httpsDomains:"arcgis.com arcgisonline.com esrikr.com premiumservices.blackbridge.com esripremium.accuweather.com gbm.digitalglobe.com firstlook.digitalglobe.com msi.digitalglobe.com".split(" ")},workers:{loaderConfig:{has:{},paths:{},map:{},packages:[]}}}};return r("extend-esri")&&(n.config=o),e.noGlobals||(i.esriConfig=o),o})},"dojo/topic":function(){define(["./Evented"],function(e){var t=new e;return{publish:function(e,r){return t.emit.apply(t,arguments)},subscribe:function(e,r){return t.on.apply(t,arguments)}}})},"dojo/Evented":function(){define(["./aspect","./on"],function(e,t){function r(){}var n=e.after;return r.prototype={on:function(e,r){return t.parse(this,e,r,function(e,t){return n(e,"on"+t,r,!0)})},emit:function(e,r){var n=[this];return n.push.apply(n,arguments),t.emit.apply(t,n)}},r})},"dojo/aspect":function(){define([],function(){function e(e,t,r,n){var i,o=e[t],s="around"==t;if(s){var a=r(function(){return o.advice(this,arguments)});i={remove:function(){a&&(a=e=r=null)},advice:function(e,t){return a?a.apply(e,t):o.advice(e,t)}}}else i={remove:function(){if(i.advice){var n=i.previous,o=i.next;o||n?(n?n.next=o:e[t]=o,o&&(o.previous=n)):delete e[t],e=r=i.advice=null}},id:e.nextId++,advice:r,receiveArguments:n};if(o&&!s)if("after"==t){for(;o.next&&(o=o.next););o.next=i,i.previous=o}else"before"==t&&(e[t]=i,i.next=o,o.previous=i);else e[t]=i;return i}function t(t){return function(n,i,o,s){var a,c=n[i];return c&&c.target==n||(n[i]=a=function(){for(var e=a.nextId,t=arguments,n=a.before;n;)n.advice&&(t=n.advice.apply(this,t)||t),n=n.next;if(a.around)var i=a.around.advice(this,t);for(n=a.after;n&&n.id<e;){if(n.advice)if(n.receiveArguments)var o=n.advice.apply(this,t),i=o===r?i:o;else i=n.advice.call(this,i,t);n=n.next}return i},c&&(a.around={advice:function(e,t){return c.apply(e,t)}}),a.target=n,a.nextId=a.nextId||0),n=e(a||c,t,o,s),o=null,n}}var r,n=t("after");return{before:t("before"),around:t("around"),after:n}})},"dojo/on":function(){define(["./has!dom-addeventlistener?:./aspect","./_base/kernel","./sniff"],function(e,t,r){function n(e,t,n,i,o){if(i=t.match(/(.*):(.*)/))return t=i[2],i=i[1],s.selector(i,t).call(o,e,n);if(r("touch")&&(a.test(t)&&(n=b(n)),r("event-orientationchange")||"orientationchange"!=t||(t="resize",e=window,n=b(n))),h&&(n=h(n)),e.addEventListener){var c=t in l,u=c?l[t]:t;return e.addEventListener(u,n,c),{remove:function(){e.removeEventListener(u,n,c)}}}if(m&&e.attachEvent)return m(e,"on"+t,n);throw Error("Target must be an event emitter")}function i(){this.cancelable=!1,this.defaultPrevented=!0}function o(){this.bubbles=!1}var s=function(e,t,r,i){return"function"!=typeof e.on||"function"==typeof t||e.nodeType?s.parse(e,t,r,n,i,this):e.on(t,r)};s.pausable=function(e,t,r,n){var i;return e=s(e,t,function(){if(!i)return r.apply(this,arguments)},n),e.pause=function(){i=!0},e.resume=function(){i=!1},e},s.once=function(e,t,r,n){var i=s(e,t,function(){return i.remove(),r.apply(this,arguments)});return i},s.parse=function(e,t,r,n,i,o){var a;if(t.call)return t.call(o,e,r);if(t instanceof Array?a=t:-1<t.indexOf(",")&&(a=t.split(/\s*,\s*/)),a){var c=[];t=0;for(var u;u=a[t++];)c.push(s.parse(e,u,r,n,i,o));return c.remove=function(){for(var e=0;e<c.length;e++)c[e].remove()},c}return n(e,t,r,i,o)};var a=/^touch/;s.matches=function(e,r,n,i,o){for(o=o&&"function"==typeof o.matches?o:t.query,i=!1!==i,1!=e.nodeType&&(e=e.parentNode);!o.matches(e,r,n);)if(e==n||!1===i||!(e=e.parentNode)||1!=e.nodeType)return!1;return e},s.selector=function(e,t,r){return function(n,i){function o(t){return s.matches(t,e,n,r,a)}var a="function"==typeof e?{matches:e}:this,c=t.bubble;return c?s(n,c(o),i):s(n,t,function(e){var t=o(e.target);if(t)return e.selectorTarget=t,i.call(t,e)})}};var c=[].slice,u=s.emit=function(e,t,r){var n=c.call(arguments,2),s="on"+t;if("parentNode"in e){var a,u=n[0]={};for(a in r)u[a]=r[a];u.preventDefault=i,u.stopPropagation=o,u.target=e,u.type=t,r=u}do{e[s]&&e[s].apply(e,n)}while(r&&r.bubbles&&(e=e.parentNode));return r&&r.cancelable&&r},l=r("event-focusin")?{}:{focusin:"focus",focusout:"blur"};if(!r("event-stopimmediatepropagation"))var f=function(){this.modified=this.immediatelyStopped=!0},h=function(e){return function(t){if(!t.immediatelyStopped)return t.stopImmediatePropagation=f,e.apply(this,arguments)}};if(r("dom-addeventlistener"))s.emit=function(e,t,r){if(e.dispatchEvent&&document.createEvent){var n=(e.ownerDocument||document).createEvent("HTMLEvents");n.initEvent(t,!!r.bubbles,!!r.cancelable);for(var i in r)i in n||(n[i]=r[i]);return e.dispatchEvent(n)&&n}return u.apply(s,arguments)};else{s._fixEvent=function(e,t){if(e||(e=(t&&(t.ownerDocument||t.document||t).parentWindow||window).event),!e)return e;try{p&&e.type==p.type&&e.srcElement==p.target&&(e=p)}catch(e){}if(!e.target)switch(e.target=e.srcElement,e.currentTarget=t||e.srcElement,"mouseover"==e.type&&(e.relatedTarget=e.fromElement),"mouseout"==e.type&&(e.relatedTarget=e.toElement),e.stopPropagation||(e.stopPropagation=v,e.preventDefault=g),e.type){case"keypress":var r="charCode"in e?e.charCode:e.keyCode;10==r?(r=0,e.keyCode=13):13==r||27==r?r=0:3==r&&(r=99),e.charCode=r,r=e,r.keyChar=r.charCode?String.fromCharCode(r.charCode):"",r.charOrCode=r.keyChar||r.keyCode}return e};var p,d=function(e){this.handle=e};d.prototype.remove=function(){delete _dojoIEListeners_[this.handle]};var y=function(e){return function(t){t=s._fixEvent(t,this);var r=e.call(this,t);return t.modified&&(p||setTimeout(function(){p=null}),p=t),r}},m=function(t,n,i){if(i=y(i),((t.ownerDocument?t.ownerDocument.parentWindow:t.parentWindow||t.window||window)!=top||5.8>r("jscript"))&&!r("config-_allow_leaks")){"undefined"==typeof _dojoIEListeners_&&(_dojoIEListeners_=[]);var o=t[n];if(!o||!o.listeners){var s=o,o=Function("event","var callee = arguments.callee; for(var i = 0; i<callee.listeners.length; i++){var listener = _dojoIEListeners_[callee.listeners[i]]; if(listener){listener.call(this,event);}}");o.listeners=[],t[n]=o,o.global=this,s&&o.listeners.push(_dojoIEListeners_.push(s)-1)}return o.listeners.push(t=o.global._dojoIEListeners_.push(i)-1),new d(t)}return e.after(t,n,i,!0)},v=function(){this.cancelBubble=!0},g=s._preventDefault=function(){if(this.bubbledKeyCode=this.keyCode,this.ctrlKey)try{this.keyCode=0}catch(e){}this.defaultPrevented=!0,this.returnValue=!1,this.modified=!0}}if(r("touch"))var x=function(){},_=window.orientation,b=function(e){return function(t){var n=t.corrected;if(!n){var i=t.type;try{delete t.type}catch(e){}if(t.type){if(r("touch-can-modify-event-delegate"))x.prototype=t,n=new x;else{var o,n={};for(o in t)n[o]=t[o]}n.preventDefault=function(){t.preventDefault()},n.stopPropagation=function(){t.stopPropagation()}}else n=t,n.type=i;if(t.corrected=n,"resize"==i)return _==window.orientation?null:(_=window.orientation,n.type="orientationchange",e.call(this,n));if("rotation"in n||(n.rotation=0,n.scale=1),window.TouchEvent&&t instanceof TouchEvent){var s,i=n.changedTouches[0];for(s in i)delete n[s],n[s]=i[s]}}return e.call(this,n)}};return s})},"esri/kernel":function(){define(["dojo/_base/kernel","dojo/_base/config","dojo/has"],function(e,t,r){var n=function(){return this}(),i=n.location,o=i.pathname,s=i.protocol,i={version:"3.25",_appBaseUrl:s+"//"+i.host+o.substring(0,o.lastIndexOf(o.split("/")[o.split("/").length-1]))};return t.noGlobals||(n.esri=i),e.isAsync||r.add("extend-esri",1),(i.dijit=i.dijit||{})._arcgisUrl=("http:"===s||"https:"===s?s:"http:")+"//www.arcgis.com/sharing/rest",i})},"esri/layers/vectorTiles/core/workers/RemoteClient":function(){define("require exports dojo/Deferred ../Error ../promiseUtils ./utils".split(" "),function(e,t,r,n,i,o){function s(e,t){e.delete(t)}var a=o.MessageType.CLOSE,c=o.MessageType.CANCEL,u=o.MessageType.INVOKE,l=o.MessageType.RESPONSE,f=o.MessageType.OPEN_PORT,h=function(){function e(e){this._timer=null,this._cancelledJobIds=new Set,this._invokeMessages=[],this._invoke=e,this._timer=null,this._process=this._process.bind(this)}return e.prototype.push=function(e){e.type===o.MessageType.CANCEL?this._cancelledJobIds.add(e.jobId):(this._invokeMessages.push(e),null===this._timer&&(this._timer=setTimeout(this._process,0)))},e.prototype.clear=function(){this._invokeMessages.length=0,this._cancelledJobIds.clear(),this._timer=null},e.prototype._process=function(){this._timer=null;for(var e=0,t=this._invokeMessages;e<t.length;e++){var r=t[e];this._cancelledJobIds.has(r.jobId)||this._invoke(r)}this._cancelledJobIds.clear(),this._invokeMessages.length=0},e}();return function(){function e(e,t,r){this._outJobs=new Map,this._inJobs=new Map,this._queue=new h(this._onInvoke.bind(this)),this._onMessage=this._onMessage.bind(this),this._client=t,this._port=e,this._port.addEventListener("message",this._onMessage),this._port.start(),this._channel=r}return e.connect=function(t){var r=new MessageChannel;return t="function"==typeof t?new t:"default"in t&&"function"==typeof t.default?new t.default:t,t.remoteClient=new e(r.port1,t,r),r.port2},e.prototype.close=function(){this._post({type:a}),this._close()},e.prototype.isBusy=function(){return 0<this._outJobs.size},e.prototype.invoke=function(e,t,a){var l=this;if(!this._port)return i.reject(new n("remote-client:port-closed","Can't invoke(), port is closed"));var f=o.newJobId(),h=new r(function(){s(l._outJobs,f),l._post({type:c,jobId:f})});return this._outJobs.set(f,h),this._post({type:u,jobId:f,methodName:e},t,a),h.promise},e.prototype.openPort=function(){var e=this,t=o.newJobId(),n=new r(function(){s(e._outJobs,t),e._post({type:c,jobId:t})});return this._outJobs.set(t,n),this._post({type:f,jobId:t}),n.promise},e.prototype._close=function(){this._channel&&(this._channel=null),this._port.removeEventListener("message",this._onMessage),this._port.close(),this._outJobs.forEach(function(e){e.cancel()}),this._inJobs.clear(),this._outJobs.clear(),this._queue.clear(),this._port=this._client=null},e.prototype._onMessage=function(e){if(e=o.receiveMessage(e))switch(e.type){case l:this._onResponse(e);break;case u:this._queue.push(e);break;case c:this._onCancel(e);break;case a:this._close();break;case f:this._onOpenPort(e)}},e.prototype._onCancel=function(e){var t=this._inJobs,r=e.jobId,n=t.get(r);this._queue.push(e),n&&(s(t,r),n.cancel())},e.prototype._onInvoke=function(e){var t=this,r=e.methodName,n=e.jobId;e=e.data;var a,c=this._inJobs,u=this._client,f=u[r];try{if(!f&&r&&-1!==r.indexOf("."))for(var h=r.split("."),p=0;p<h.length-1;p++)u=u[h[p]],f=u[h[p+1]];if("function"!=typeof f)throw new TypeError(r+" is not a function");a=f.call(u,e,this)}catch(e){return void this._post({type:l,jobId:n,error:o.toInvokeError(e)})}i.isThenable(a)?(c.set(n,a),a.then(function(e){c.has(n)&&(s(c,n),t._post({type:l,jobId:n},e))}).catch(function(e){c.has(n)&&(s(c,n),e&&"cancel"===e.dojoType||t._post({type:l,jobId:n,error:o.toInvokeError(e||{message:"Error encountered at method "+r})}))})):this._post({type:l,jobId:n},a)},e.prototype._onOpenPort=function(t){var r=new MessageChannel;new e(r.port1,this._client),this._post({type:l,jobId:t.jobId},r.port2,[r.port2])},e.prototype._onResponse=function(e){var t=e.jobId,r=e.error;e=e.data;var i=this._outJobs;if(i.has(t)){var o=i.get(t);s(i,t),r?o.reject(n.fromJSON(JSON.parse(r))):o.resolve(e)}},e.prototype._post=function(e,t,r){return o.postMessage(this._port,e,t,r)},e}()})},"dojo/Deferred":function(){define(["./has","./_base/lang","./errors/CancelError","./promise/Promise","./promise/instrumentation"],function(e,t,r,n,i){var o=Object.freeze||function(){},s=function(e,t,r,n,i){for(2===t&&l.instrumentRejected&&0===e.length&&l.instrumentRejected(r,!1,n,i),i=0;i<e.length;i++)a(e[i],t,r,n)},a=function(e,t,r,n){var i=e[t],o=e.deferred;if(i)try{var s=i(r);if(0===t)void 0!==s&&u(o,t,s);else{if(s&&"function"==typeof s.then)return e.cancel=s.cancel,void s.then(c(o,1),c(o,2),c(o,0));u(o,1,s)}}catch(e){u(o,2,e)}else u(o,t,r);2===t&&l.instrumentRejected&&l.instrumentRejected(r,!!i,n,o.promise)},c=function(e,t){return function(r){u(e,t,r)}},u=function(e,t,r){if(!e.isCanceled())switch(t){case 0:e.progress(r);break;case 1:e.resolve(r);break;case 2:e.reject(r)}},l=function(e){var t,i,c,u=this.promise=new n,f=this,h=!1,p=[];Error.captureStackTrace&&(Error.captureStackTrace(f,l),Error.captureStackTrace(u,l)),this.isResolved=u.isResolved=function(){return 1===t},this.isRejected=u.isRejected=function(){return 2===t},this.isFulfilled=u.isFulfilled=function(){return!!t},this.isCanceled=u.isCanceled=function(){return h},this.progress=function(e,r){if(t){if(!0===r)throw Error("This deferred has already been fulfilled.");return u}
return s(p,0,e,null,f),u},this.resolve=function(e,r){if(t){if(!0===r)throw Error("This deferred has already been fulfilled.");return u}return s(p,t=1,i=e,null,f),p=null,u};var d=this.reject=function(e,r){if(t){if(!0===r)throw Error("This deferred has already been fulfilled.");return u}return Error.captureStackTrace&&Error.captureStackTrace(c={},d),s(p,t=2,i=e,c,f),p=null,u};this.then=u.then=function(e,r,n){var o=[n,e,r];return o.cancel=u.cancel,o.deferred=new l(function(e){return o.cancel&&o.cancel(e)}),t&&!p?a(o,t,i,c):p.push(o),o.deferred.promise},this.cancel=u.cancel=function(n,o){if(t){if(!0===o)throw Error("This deferred has already been fulfilled.")}else{if(e){var s=e(n);n=void 0===s?n:s}if(h=!0,!t)return void 0===n&&(n=new r),d(n),n;if(2===t&&i===n)return n}},o(u)};return l.prototype.toString=function(){return"[object Deferred]"},i&&i(l),l})},"dojo/errors/CancelError":function(){define(["./create"],function(e){return e("CancelError",null,null,{dojoType:"cancel",log:!1})})},"dojo/errors/create":function(){define(["../_base/lang"],function(e){return function(t,r,n,i){n=n||Error;var o=function(e){if(n===Error){Error.captureStackTrace&&Error.captureStackTrace(this,o);var t,i=Error.call(this,e);for(t in i)i.hasOwnProperty(t)&&(this[t]=i[t]);this.message=e,this.stack=i.stack}else n.apply(this,arguments);r&&r.apply(this,arguments)};return o.prototype=e.delegate(n.prototype,i),o.prototype.name=t,o.prototype.constructor=o}})},"dojo/promise/Promise":function(){define(["../_base/lang"],function(e){function t(){throw new TypeError("abstract")}return e.extend(function(){},{then:function(e,r,n){t()},cancel:function(e,r){t()},isResolved:function(){t()},isRejected:function(){t()},isFulfilled:function(){t()},isCanceled:function(){t()},always:function(e){return this.then(e,e)},catch:function(e){return this.then(null,e)},otherwise:function(e){return this.then(null,e)},trace:function(){return this},traceRejected:function(){return this},toString:function(){return"[object Promise]"}})})},"dojo/promise/instrumentation":function(){define(["./tracer","../has","../_base/lang","../_base/array"],function(e,t,r,n){function i(e,t,r){if(!e||!1!==e.log){var n="";e&&e.stack&&(n+=e.stack),t&&t.stack&&(n+="\n    ----------------------------------------\n    rejected"+t.stack.split("\n").slice(1).join("\n").replace(/^\s+/," ")),r&&r.stack&&(n+="\n    ----------------------------------------\n"+r.stack),console.error(e,n)}}function o(e,t,r,n){t||i(e,r,n)}function s(e,t,r,i){n.some(c,function(r){if(r.error===e)return t&&(r.handled=!0),!0})||c.push({error:e,rejection:r,handled:t,deferred:i,timestamp:(new Date).getTime()}),u||(u=setTimeout(a,l))}function a(){var e=(new Date).getTime(),t=e-l;c=n.filter(c,function(e){return!(e.timestamp<t)||(e.handled||i(e.error,e.rejection,e.deferred),!1)}),u=!!c.length&&setTimeout(a,c[0].timestamp+l-e)}t.add("config-useDeferredInstrumentation","report-unhandled-rejections");var c=[],u=!1,l=1e3;return function(n){var i=t("config-useDeferredInstrumentation");if(i){e.on("resolved",r.hitch(console,"log","resolved")),e.on("rejected",r.hitch(console,"log","rejected")),e.on("progress",r.hitch(console,"log","progress"));var a=[];if("string"==typeof i&&(a=i.split(","),i=a.shift()),"report-rejections"===i)n.instrumentRejected=o;else{if("report-unhandled-rejections"!==i&&!0!==i&&1!==i)throw Error("Unsupported instrumentation usage <"+i+">");n.instrumentRejected=s,l=parseInt(a[0],10)||l}}}})},"dojo/promise/tracer":function(){define(["../_base/lang","./Promise","../Evented"],function(e,t,r){function n(e){setTimeout(function(){o.apply(i,e)},0)}var i=new r,o=i.emit;return i.emit=null,t.prototype.trace=function(){var t=e._toArray(arguments);return this.then(function(e){n(["resolved",e].concat(t))},function(e){n(["rejected",e].concat(t))},function(e){n(["progress",e].concat(t))}),this},t.prototype.traceRejected=function(){var t=e._toArray(arguments);return this.otherwise(function(e){n(["rejected",e].concat(t))}),this},i})},"dojo/_base/array":function(){define(["./kernel","../has","./lang"],function(e,t,r){function n(e){return a[e]=new Function("item","index","array",e)}function i(e){var t=!e;return function(r,i,o){var s,c=0,u=r&&r.length||0;if(u&&"string"==typeof r&&(r=r.split("")),"string"==typeof i&&(i=a[i]||n(i)),o){for(;c<u;++c)if(s=!i.call(o,r[c],c,r),e^s)return!s}else for(;c<u;++c)if(s=!i(r[c],c,r),e^s)return!s;return t}}function o(e){var t=1,r=0,n=0;return e||(t=r=n=-1),function(i,o,a,u){if(u&&0<t)return c.lastIndexOf(i,o,a);u=i&&i.length||0;var l=e?u+n:r;for(a===s?a=e?r:u+n:0>a?0>(a=u+a)&&(a=r):a=a>=u?u+n:a,u&&"string"==typeof i&&(i=i.split(""));a!=l;a+=t)if(i[a]==o)return a;return-1}}var s,a={},c={every:i(!1),some:i(!0),indexOf:o(!0),lastIndexOf:o(!1),forEach:function(e,t,r){var i=0,o=e&&e.length||0;if(o&&"string"==typeof e&&(e=e.split("")),"string"==typeof t&&(t=a[t]||n(t)),r)for(;i<o;++i)t.call(r,e[i],i,e);else for(;i<o;++i)t(e[i],i,e)},map:function(e,t,r,i){var o=0,s=e&&e.length||0;if(i=new(i||Array)(s),s&&"string"==typeof e&&(e=e.split("")),"string"==typeof t&&(t=a[t]||n(t)),r)for(;o<s;++o)i[o]=t.call(r,e[o],o,e);else for(;o<s;++o)i[o]=t(e[o],o,e);return i},filter:function(e,t,r){var i,o=0,s=e&&e.length||0,c=[];if(s&&"string"==typeof e&&(e=e.split("")),"string"==typeof t&&(t=a[t]||n(t)),r)for(;o<s;++o)i=e[o],t.call(r,i,o,e)&&c.push(i);else for(;o<s;++o)i=e[o],t(i,o,e)&&c.push(i);return c},clearCache:function(){a={}}};return r.mixin(e,c),c})},"esri/layers/vectorTiles/core/Error":function(){define(["require","exports","./tsSupport/extendsHelper","./lang","./Message"],function(e,t,r,n,i){return e=function(e){function t(r,n,i){var o=e.call(this,r,n,i)||this;return o instanceof t?o:new t(r,n,i)}return r(t,e),t.prototype.toJSON=function(){return{name:this.name,message:this.message,details:n.clone(this.details),dojoType:this.dojoType}},t.fromJSON=function(e){var r=new t(e.name,e.message,e.details);return null!=e.dojoType&&(r.dojoType=e.dojoType),r},t}(i),e.prototype.type="error",e})},"esri/layers/vectorTiles/core/tsSupport/extendsHelper":function(){define([],function(){return function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])};return function(t,r){function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}()})},"esri/layers/vectorTiles/core/lang":function(){define("dojo/_base/kernel dojo/_base/lang dojo/date dojo/number dojo/date/locale dojo/i18n!../nls/common".split(" "),function(e,t,r,n,i,o){function s(e){return void 0!==e&&null!==e}function a(e){return s(e)?e:""}function c(e,o,c){var u=c.match(/([^\(]+)(\([^\)]+\))?/i),l=t.trim(u[1]);c=o[e];var u=JSON.parse((u[2]?t.trim(u[2]):"{}").replace(/^\(/,"{").replace(/\)$/,"}").replace(/([{,])\s*([0-9a-zA-Z\_]+)\s*:/gi,'$1"$2":').replace(/\"\s*:\s*\'/gi,'":"').replace(/\'\s*(,|\})/gi,'"$1')),h=u.utcOffset;if(-1===f.indexOf(l))l=t.getObject(l),t.isFunction(l)&&(c=l(c,e,o,u));else if("number"==typeof c||"string"==typeof c&&c&&!isNaN(Number(c)))switch(c=Number(c),l){case"NumberFormat":return e=t.mixin({},u),o=parseFloat(e.places),(isNaN(o)||0>o)&&(e.places=1/0),n.format(c,e);case"DateString":return c=new Date(c),u.local||u.systemLocale?u.systemLocale?c.toLocaleDateString()+(u.hideTime?"":" "+c.toLocaleTimeString()):c.toDateString()+(u.hideTime?"":" "+c.toTimeString()):(c=c.toUTCString(),u.hideTime&&(c=c.replace(/\s+\d\d\:\d\d\:\d\d\s+(utc|gmt)/i,"")),c);case"DateFormat":return c=new Date(c),s(h)&&(c=r.add(c,"minute",c.getTimezoneOffset()-h)),i.format(c,u)}return a(c)}function u(e,t){var r;if(t)for(r in e)e.hasOwnProperty(r)&&(void 0===e[r]?delete e[r]:e[r]instanceof Object&&u(e[r],!0));else for(r in e)e.hasOwnProperty(r)&&void 0===e[r]&&delete e[r];return e}function l(e){if(!e||"object"!=typeof e||t.isFunction(e))return e;if(e instanceof Int8Array||e instanceof Uint8Array||e instanceof Uint8ClampedArray||e instanceof Int16Array||e instanceof Int32Array||e instanceof Uint16Array||e instanceof Uint32Array||e instanceof Float32Array||e instanceof Float64Array||e instanceof Date)return new e.constructor(e);if(e instanceof ArrayBuffer)return e.slice(0,e.byteLength);if("function"==typeof e.clone)e=e.clone();else if("function"==typeof e.map&&"function"==typeof e.forEach)e=e.map(l);else if("function"==typeof e.notifyChange&&"function"==typeof e.watch)e=e.clone();else{var r,n,i={},o={};for(r in e){n=e[r];var s=!(r in o)||o[r]!==n;r in i&&(i[r]===n||!s)||(i[r]=l?l(n):n)}e=i}return e}var f=["NumberFormat","DateString","DateFormat"],h=/<\/?[^>]+>/g;return{equals:function(e,r){return e===r||"number"==typeof e&&isNaN(e)&&"number"==typeof r&&isNaN(r)||t.isFunction((e||{}).getTime)&&t.isFunction((r||{}).getTime)&&e.getTime()==r.getTime()||t.isFunction((e||{}).equals)&&e.equals(r)||t.isFunction((r||{}).equals)&&r.equals(e)||!1},mixin:t.mixin,valueOf:function(e,t){for(var r in e)if(e[r]==t)return r;return null},stripTags:function(e){if(e){var t=typeof e;if("string"===t)e=e.replace(h,"");else if("object"===t)for(var r in e)(t=e[r])&&"string"==typeof t&&(t=t.replace(h,"")),e[r]=t}return e},substitute:function(e,r,n){var i,u,l;if(s(n)&&(t.isObject(n)?(i=n.first,u=n.dateFormat,l=n.numberFormat):i=n),r&&"{*}"!==r)return t.replace(r,t.hitch({obj:e},function(e,t){var r=t.split(":");return 1<r.length?(t=r[0],r.shift(),c(t,this.obj,r.join(":"))):u&&-1!==(u.properties||[]).indexOf(t)?c(t,this.obj,u.formatter||"DateString"):l&&-1!==(l.properties||[]).indexOf(t)?c(t,this.obj,l.formatter||"NumberFormat"):a(this.obj[t])}));r=[];var f;r.push('<table class="esri-widget__table" summary="'+o.fieldsSummary+'"><tbody>');for(f in e)if(n=e[f],u&&-1!==(u.properties||[]).indexOf(f)?n=c(f,e,u.formatter||"DateString"):l&&-1!==(l.properties||[]).indexOf(f)&&(n=c(f,e,l.formatter||"NumberFormat")),r.push("<tr><th>"+f+"</th><td>"+a(n)+"</td></tr>"),i)break;return r.push("</tbody></table>"),r.join("")},filter:function(r,n,i){n=[t.isString(r)?r.split(""):r,i||e.global,t.isString(n)?new Function("item","index","array",n):n],i={};var o;r=n[0];for(o in r)n[2].call(n[o],r[o],o,r)&&(i[o]=r[o]);return i},startsWith:function(e,t,r){return r=r||0,e.indexOf(t,r)===r},endsWith:function(e,t,r){return("number"!=typeof r||!isFinite(r)||Math.floor(r)!==r||r>e.length)&&(r=e.length),r-=t.length,-1!==(e=e.indexOf(t,r))&&e===r},isDefined:s,fixJson:u,clone:l}})},"dojo/date":function(){define(["./has","./_base/lang"],function(e,t){var r={getDaysInMonth:function(e){var t=e.getMonth();return 1==t&&r.isLeapYear(e)?29:[31,28,31,30,31,30,31,31,30,31,30,31][t]},isLeapYear:function(e){return!((e=e.getFullYear())%400&&(e%4||!(e%100)))},getTimezoneName:function(e){var t=e.toString(),r="",n=t.indexOf("(");return-1<n?r=t.substring(++n,t.indexOf(")")):(n=/([A-Z\/]+) \d{4}$/,(t=t.match(n))?r=t[1]:(t=e.toLocaleString(),n=/ ([A-Z\/]+)$/,(t=t.match(n))&&(r=t[1]))),"AM"==r||"PM"==r?"":r},compare:function(e,t,r){return e=new Date(+e),t=new Date(+(t||new Date)),"date"==r?(e.setHours(0,0,0,0),t.setHours(0,0,0,0)):"time"==r&&(e.setFullYear(0,0,0),t.setFullYear(0,0,0)),e>t?1:e<t?-1:0},add:function(e,t,r){var n=new Date(+e),i=!1,o="Date";switch(t){case"day":break;case"weekday":var s;(t=r%5)?s=parseInt(r/5):(t=0<r?5:-5,s=0<r?(r-5)/5:(r+5)/5);var a=e.getDay(),c=0;6==a&&0<r?c=1:0==a&&0>r&&(c=-1),a+=t,0!=a&&6!=a||(c=0<r?2:-2),r=7*s+t+c;break;case"year":o="FullYear",i=!0;break;case"week":r*=7;break;case"quarter":r*=3;case"month":i=!0,o="Month";break;default:o="UTC"+t.charAt(0).toUpperCase()+t.substring(1)+"s"}return o&&n["set"+o](n["get"+o]()+r),i&&n.getDate()<e.getDate()&&n.setDate(0),n},difference:function(e,t,n){t=t||new Date,n=n||"day";var i=t.getFullYear()-e.getFullYear(),o=1;switch(n){case"quarter":e=e.getMonth(),t=t.getMonth(),o=Math.floor(t/3)+1+4*i-(Math.floor(e/3)+1);break;case"weekday":if(i=Math.round(r.difference(e,t,"day")),n=parseInt(r.difference(e,t,"week")),0==i%7)i=5*n;else{var o=0,s=e.getDay(),a=t.getDay();if(n=parseInt(i/7),t=i%7,e=new Date(e),e.setDate(e.getDate()+7*n),e=e.getDay(),0<i)switch(!0){case 6==s:o=-1;break;case 0==s:o=0;break;case 6==a:o=-1;break;case 0==a:o=-2;break;case 5<e+t:o=-2}else if(0>i)switch(!0){case 6==s:o=0;break;case 0==s:o=1;break;case 6==a:o=2;break;case 0==a:o=1;break;case 0>e+t:o=2}i=i+o-2*n}o=i;break;case"year":o=i;break;case"month":o=t.getMonth()-e.getMonth()+12*i;break;case"week":o=parseInt(r.difference(e,t,"day")/7);break;case"day":o/=24;case"hour":o/=60;case"minute":o/=60;case"second":o/=1e3;case"millisecond":o*=t.getTime()-e.getTime()}return Math.round(o)}};return t.mixin(t.getObject("dojo.date",!0),r),r})},"dojo/number":function(){define(["./_base/lang","./i18n","./i18n!./cldr/nls/number","./string","./regexp"],function(e,t,r,n,i){var o={};if(e.setObject("dojo.number",o),o.format=function(r,n){n=e.mixin({},n||{});var i=t.normalizeLocale(n.locale),i=t.getLocalization("dojo.cldr","number",i);return n.customs=i,i=n.pattern||i[(n.type||"decimal")+"Format"],isNaN(r)||1/0==Math.abs(r)?null:o._applyPattern(r,i,n)},o._numberPatternRE=/[#0,]*[#0](?:\.0*#*)?/,o._applyPattern=function(e,t,r){r=r||{};var n=r.customs.group,i=r.customs.decimal;t=t.split(";");var s=t[0];if(t=t[0>e?1:0]||"-"+s,-1!=t.indexOf("%"))e*=100;else if(-1!=t.indexOf("‰"))e*=1e3;else if(-1!=t.indexOf("¤"))n=r.customs.currencyGroup||n,i=r.customs.currencyDecimal||i,t=t.replace(/([\s\xa0]*)(\u00a4{1,3})([\s\xa0]*)/,function(e,t,n,i){return(e=r[["symbol","currency","displayName"][n.length-1]]||r.currency||"")?t+e+i:""});else if(-1!=t.indexOf("E"))throw Error("exponential notation not supported");var a=o._numberPatternRE,s=s.match(a);if(!s)throw Error("unable to find a number expression in pattern: "+t);return!1===r.fractional&&(r.places=0),t.replace(a,o._formatAbsolute(e,s[0],{decimal:i,group:n,places:r.places,round:r.round}))},o.round=function(e,t,r){return r=10/(r||10),(r*+e).toFixed(t)/r},0==.9.toFixed()){var s=o.round;o.round=function(e,t,r){var n=Math.pow(10,-t||0),i=Math.abs(e);return!e||i>=n?n=0:(.5>(i/=n)||.95<=i)&&(n=0),s(e,t,r)+(0<e?n:-n)}}return o._formatAbsolute=function(e,t,r){r=r||{},!0===r.places&&(r.places=0),1/0===r.places&&(r.places=6),t=t.split(".");var i="string"==typeof r.places&&r.places.indexOf(","),s=r.places;i?s=r.places.substring(i+1):0<=s||(s=(t[1]||[]).length),0>r.round||(e=o.round(e,s,r.round)),e=String(Math.abs(e)).split(".");var a=e[1]||"";t[1]||r.places?(i&&(r.places=r.places.substring(0,i)),i=void 0!==r.places?r.places:t[1]&&t[1].lastIndexOf("0")+1,i>a.length&&(e[1]=n.pad(a,i,"0",!0)),s<a.length&&(e[1]=a.substr(0,s))):e[1]&&e.pop(),s=t[0].replace(",",""),-1!=(i=s.indexOf("0"))&&(i=s.length-i,i>e[0].length&&(e[0]=n.pad(e[0],i)),-1==s.indexOf("#")&&(e[0]=e[0].substr(e[0].length-i)));var c,u,s=t[0].lastIndexOf(",");for(-1!=s&&(c=t[0].length-s-1,t=t[0].substr(0,s),-1!=(s=t.lastIndexOf(","))&&(u=t.length-s-1)),t=[],s=e[0];s;)i=s.length-c,t.push(0<i?s.substr(i):s),s=0<i?s.slice(0,i):"",u&&(c=u,u=void 0);return e[0]=t.reverse().join(r.group||","),e.join(r.decimal||".")},o.regexp=function(e){return o._parseInfo(e).regexp},o._parseInfo=function(e){e=e||{};var r=t.normalizeLocale(e.locale),r=t.getLocalization("dojo.cldr","number",r),n=e.pattern||r[(e.type||"decimal")+"Format"],s=r.group,a=r.decimal,c=1;if(-1!=n.indexOf("%"))c/=100;else if(-1!=n.indexOf("‰"))c/=1e3;else{var u=-1!=n.indexOf("¤");u&&(s=r.currencyGroup||s,a=r.currencyDecimal||a)}return r=n.split(";"),1==r.length&&r.push("-"+r[0]),r=i.buildGroupRE(r,function(t){return t="(?:"+i.escapeString(t,".")+")",t.replace(o._numberPatternRE,function(t){var r={signed:!1,separator:e.strict?s:[s,""],fractional:e.fractional,decimal:a,exponent:!1};t=t.split(".");var n=e.places;return 1==t.length&&1!=c&&(t[1]="###"),1==t.length||0===n?r.fractional=!1:(void 0===n&&(n=e.pattern?t[1].lastIndexOf("0")+1:1/0),n&&void 0==e.fractional&&(r.fractional=!0),!e.places&&n<t[1].length&&(n+=","+t[1].length),r.places=n),t=t[0].split(","),1<t.length&&(r.groupSize=t.pop().length,1<t.length&&(r.groupSize2=t.pop().length)),"("+o._realNumberRegexp(r)+")"})},!0),u&&(r=r.replace(/([\s\xa0]*)(\u00a4{1,3})([\s\xa0]*)/g,function(t,r,n,o){return(t=i.escapeString(e[["symbol","currency","displayName"][n.length-1]]||e.currency||""))?(r=r?"[\\s\\xa0]":"",o=o?"[\\s\\xa0]":"",e.strict?r+t+o:(r&&(r+="*"),o&&(o+="*"),"(?:"+r+t+o+")?")):""})),{regexp:r.replace(/[\xa0 ]/g,"[\\s\\xa0]"),group:s,decimal:a,factor:c}},o.parse=function(e,t){var r=o._parseInfo(t),n=new RegExp("^"+r.regexp+"$").exec(e);if(!n)return NaN;var i=n[1];if(!n[1]){if(!n[2])return NaN;i=n[2],r.factor*=-1}return(i=i.replace(new RegExp("["+r.group+"\\s\\xa0]","g"),"").replace(r.decimal,"."))*r.factor},o._realNumberRegexp=function(e){e=e||{},"places"in e||(e.places=1/0),"string"!=typeof e.decimal&&(e.decimal="."),"fractional"in e&&!/^0/.test(e.places)||(e.fractional=[!0,!1]),"exponent"in e||(e.exponent=[!0,!1]),"eSigned"in e||(e.eSigned=[!0,!1]);var t=o._integerRegexp(e),r=i.buildGroupRE(e.fractional,function(t){var r="";return t&&0!==e.places&&(r="\\"+e.decimal,r=1/0==e.places?"(?:"+r+"\\d+)?":r+"\\d{"+e.places+"}"),r},!0),n=i.buildGroupRE(e.exponent,function(t){return t?"([eE]"+o._integerRegexp({signed:e.eSigned})+")":""}),t=t+r;return r&&(t="(?:(?:"+t+")|(?:"+r+"))"),t+n},o._integerRegexp=function(e){e=e||{},"signed"in e||(e.signed=[!0,!1]),"separator"in e?"groupSize"in e||(e.groupSize=3):e.separator="";var t=i.buildGroupRE(e.signed,function(e){return e?"[-+]":""},!0),r=i.buildGroupRE(e.separator,function(t){if(!t)return"(?:\\d+)";t=i.escapeString(t)," "==t?t="\\s":" "==t&&(t="\\s\\xa0");var r=e.groupSize,n=e.groupSize2;return n?(t="(?:0|[1-9]\\d{0,"+(n-1)+"}(?:["+t+"]\\d{"+n+"})*["+t+"]\\d{"+r+"})",0<r-n?"(?:"+t+"|(?:0|[1-9]\\d{0,"+(r-1)+"}))":t):"(?:0|[1-9]\\d{0,"+(r-1)+"}(?:["+t+"]\\d{"+r+"})*)"},!0);return t+r},o})},"dojo/i18n":function(){define("./_base/kernel require ./has ./_base/array ./_base/config ./_base/lang require ./json module".split(" "),function(e,t,r,n,i,o,s,a,c){r.add("dojo-preload-i18n-Api",1),s=e.i18n={};var u=/(^.*(^|\/)nls)(\/|$)([^\/]*)\/?([^\/]*)/,l=function(e,t,r,n){var i=[r+n];t=t.split("-");for(var o="",s=0;s<t.length;s++)o+=(o?"-":"")+t[s],(!e||e[o])&&(i.push(r+o+"/"+n),i.specificity=o);return i},f={},h=function(t,r,n){return n=n?n.toLowerCase():e.locale,t=t.replace(/\./g,"/"),r=r.replace(/\./g,"/"),/root/i.test(n)?t+"/nls/"+r:t+"/nls/"+n+"/"+r},p=e.getL10nName=function(e,t,r){return e=c.id+"!"+h(e,t,r)},d=function(e,t,r,n,i,s){e([t],function(a){var c=o.clone(a.root||a.ROOT),u=l(!a._v1x&&a,i,r,n);e(u,function(){for(var e=1;e<u.length;e++)c=o.mixin(o.clone(c),arguments[e]);f[t+"/"+i]=c,c.$locale=u.specificity,s()})})},y=function(e){var t=i.extraLocale||[],t=o.isArray(t)?t:[t];return t.push(e),t},m=function(t,i,s){var c=u.exec(t),l=c[1]+"/",h=c[5]||c[4],p=l+h,m=(c=c[5]&&c[4])||e.locale||"",v=p+"/"+m,c=c?[m]:y(m),w=c.length,I=function(){--w||s(o.delegate(f[v]))},m=t.split("*"),k="preload"==m[1];if(r("dojo-preload-i18n-Api")){if(k&&(f[t]||(f[t]=1,_(m[2],a.parse(m[3]),1,i)),s(1)),(m=k)||(g&&x.push([t,i,s]),m=g&&!f[v]),m)return}else if(k)return void s(1);n.forEach(c,function(e){var t=p+"/"+e;r("dojo-preload-i18n-Api")&&b(t),f[t]?I():d(i,p,l,h,e,I)})};r("dojo-preload-i18n-Api");var v=s.normalizeLocale=function(t){return t=t?t.toLowerCase():e.locale,"root"==t?"ROOT":t},g=0,x=[],_=s._preloadLocalizations=function(r,i,s,a){function c(e,t){a([e],t)}function u(e,t){for(var r=e.split("-");r.length;){if(t(r.join("-")))return;r.pop()}t("ROOT")}function l(){for(--g;!g&&x.length;)m.apply(null,x.shift())}function h(e){e=v(e),u(e,function(s){if(0<=n.indexOf(i,s)){var h=r.replace(/\./g,"/")+"_"+s;return g++,c(h,function(r){for(var n in r){var i,c=r[n],h=n.match(/(.+)\/([^\/]+)$/);if(h&&(i=h[2],h=h[1]+"/",c._localized)){var p;if("ROOT"===s){var d=p=c._localized;delete c._localized,d.root=c,f[t.toAbsMid(n)]=d}else p=c._localized,f[t.toAbsMid(h+i+"/"+s)]=c;s!==e&&function(r,n,i,s){var c=[],h=[];u(e,function(e){s[e]&&(c.push(t.toAbsMid(r+e+"/"+n)),h.push(t.toAbsMid(r+n+"/"+e)))}),c.length?(g++,a(c,function(){for(var s=c.length-1;0<=s;s--)i=o.mixin(o.clone(i),arguments[s]),f[h[s]]=i;f[t.toAbsMid(r+n+"/"+e)]=o.clone(i),l()})):f[t.toAbsMid(r+n+"/"+e)]=i}(h,i,c,p)}}l()}),!0}return!1})}a=a||t,h(),n.forEach(e.config.extraLocale,h)},b=function(){},b=function(t){for(var r,n=t.split("/"),i=e.global[n[0]],o=1;i&&o<n.length-1;i=i[n[o++]]);return i&&((r=i[n[o]])||(r=i[n[o].replace(/-/g,"_")]),r&&(f[t]=r)),r};return s.getLocalization=function(e,r,n){var i;return e=h(e,r,n),m(e,t,function(e){i=e}),i},o.mixin(s,{dynamic:!0,normalize:function(e,t){return/^\./.test(e)?t(e):e},load:m,cache:f,getL10nName:p})})},"dojo/json":function(){define(["./has"],function(p){var a="undefined"!=typeof JSON;if(p.add("json-parse",a),p.add("json-stringify",a&&'{"a":1}'==JSON.stringify({a:0},function(e,t){return t||1})),p("json-stringify"))return JSON;var g=function(e){return('"'+e.replace(/(["\\])/g,"\\$1")+'"').replace(/[\f]/g,"\\f").replace(/[\b]/g,"\\b").replace(/[\n]/g,"\\n").replace(/[\t]/g,"\\t").replace(/[\r]/g,"\\r")};return{parse:p("json-parse")?JSON.parse:function(a,f){if(f&&!/^([\s\[\{]*(?:"(?:\\.|[^"])*"|-?\d[\d\.]*(?:[Ee][+-]?\d+)?|null|true|false|)[\s\]\}]*(?:,|:|$))+$/.test(a))throw new SyntaxError("Invalid characters in JSON");return eval("("+a+")")},stringify:function(e,t,r){function n(e,o,s){t&&(e=t(s,e));var a;if("number"==(a=typeof e))return isFinite(e)?e+"":"null";if("boolean"==a)return e+"";if(null===e)return"null";if("string"==typeof e)return g(e);if("function"==a||"undefined"==a)return i;if("function"==typeof e.toJSON)return n(e.toJSON(s),o,s);if(e instanceof Date)return'"{FullYear}-{Month+}-{Date}T{Hours}:{Minutes}:{Seconds}Z"'.replace(/\{(\w+)(\+)?\}/g,function(t,r,n){return t=e["getUTC"+r]()+(n?1:0),10>t?"0"+t:t});if(e.valueOf()!==e)return n(e.valueOf(),o,s);var c=r?o+r:"",u=r?" ":"",l=r?"\n":"";if(e instanceof Array){var u=e.length,f=[];for(s=0;s<u;s++)a=n(e[s],c,s),"string"!=typeof a&&(a="null"),f.push(l+c+a);return"["+f.join(",")+l+o+"]"}f=[];for(s in e){var h;if(e.hasOwnProperty(s)){if("number"==typeof s)h='"'+s+'"';else{if("string"!=typeof s)continue;h=g(s)}a=n(e[s],c,s),"string"==typeof a&&f.push(l+c+h+":"+u+a)}}return"{"+f.join(",")+l+o+"}"}var i;return"string"==typeof t&&(r=t,t=null),n(e,"","")}}})},"dojo/string":function(){define(["./_base/kernel","./_base/lang"],function(e,t){var r=/[&<>'"\/]/g,n={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","/":"&#x2F;"},i={};return t.setObject("dojo.string",i),i.escape=function(e){return e?e.replace(r,function(e){return n[e]}):""},i.rep=function(e,t){if(0>=t||!e)return"";for(var r=[];1&t&&r.push(e),t>>=1;)e+=e;return r.join("")},i.pad=function(e,t,r,n){return r||(r="0"),e=String(e),t=i.rep(r,Math.ceil((t-e.length)/r.length)),n?e+t:t+e},i.substitute=function(r,n,i,o){return o=o||e.global,i=i?t.hitch(o,i):function(e){return e},r.replace(/\$\{([^\s\:\}]*)(?:\:([^\s\:\}]+))?\}/g,function(e,r,s){if(""==r)return"$";if(e=t.getObject(r,!1,n),s&&(e=t.getObject(s,!1,o).call(o,e,r)),void 0===(s=i(e,r)))throw Error('string.substitute could not find key "'+r+'" in template');return s.toString()})},i.trim=String.prototype.trim?t.trim:function(e){e=e.replace(/^\s+/,"");for(var t=e.length-1;0<=t;t--)if(/\S/.test(e.charAt(t))){e=e.substring(0,t+1);break}return e},i})},"dojo/regexp":function(){define(["./_base/kernel","./_base/lang"],function(e,t){var r={};return t.setObject("dojo.regexp",r),r.escapeString=function(e,t){return e.replace(/([\.$?*|{}\(\)\[\]\\\/\+\-^])/g,function(e){return t&&-1!=t.indexOf(e)?e:"\\"+e})},r.buildGroupRE=function(e,t,n){if(!(e instanceof Array))return t(e);for(var i=[],o=0;o<e.length;o++)i.push(t(e[o]));return r.group(i.join("|"),n)},r.group=function(e,t){return"("+(t?"?:":"")+e+")"},r})},"dojo/date/locale":function(){define("../_base/lang ../_base/array ../date ../cldr/supplemental ../i18n ../regexp ../string ../i18n!../cldr/nls/gregorian module".split(" "),function(e,t,r,n,i,o,s,a,c){function u(e,t,r,i){return i.replace(/([a-z])\1*/gi,function(o){var a,c,u=o.charAt(0);o=o.length;var l=["abbr","wide","narrow"];switch(u){case"G":a=t[4>o?"eraAbbr":"eraNames"][0>e.getFullYear()?0:1];break;case"y":switch(a=e.getFullYear(),o){case 1:break;case 2:if(!r.fullYear){a=String(a),a=a.substr(a.length-2);break}default:c=!0}break;case"Q":case"q":a=Math.ceil((e.getMonth()+1)/3),c=!0;break;case"M":case"L":a=e.getMonth(),3>o?(a+=1,c=!0):(u=["months","L"==u?"standAlone":"format",l[o-3]].join("-"),a=t[u][a]);break;case"w":a=h._getWeekOfYear(e,0),c=!0;break;case"d":a=e.getDate(),c=!0;break;case"D":a=h._getDayOfYear(e),c=!0;break;case"e":case"c":if(a=e.getDay(),2>o){a=(a-n.getFirstDayOfWeek(r.locale)+8)%7;break}case"E":a=e.getDay(),3>o?(a+=1,c=!0):(u=["days","c"==u?"standAlone":"format",l[o-3]].join("-"),a=t[u][a]);break;case"a":u=12>e.getHours()?"am":"pm",a=r[u]||t["dayPeriods-format-wide-"+u];break;case"h":case"H":case"K":case"k":switch(c=e.getHours(),u){case"h":a=c%12||12;break;case"H":a=c;break;case"K":a=c%12;break;case"k":a=c||24}c=!0;break;case"m":a=e.getMinutes(),c=!0;break;case"s":a=e.getSeconds(),c=!0;break;case"S":a=Math.round(e.getMilliseconds()*Math.pow(10,o-3)),c=!0;break;case"v":case"z":if(a=h._getZone(e,!0,r))break;o=4;case"Z":u=h._getZone(e,!1,r),u=[0>=u?"+":"-",s.pad(Math.floor(Math.abs(u)/60),2),s.pad(Math.abs(u)%60,2)],4==o&&(u.splice(0,0,"GMT"),u.splice(3,0,":")),a=u.join("");break;default:throw Error("dojo.date.locale.format: invalid pattern char: "+i)}return c&&(a=s.pad(a,o)),a})}function l(e,r,n,i){var o=function(e){return e};r=r||o,n=n||o,i=i||o;var s=e.match(/(''|[^'])+/g),a="'"==e.charAt(0);return t.forEach(s,function(e,t){e?(s[t]=(a?n:r)(e.replace(/''/g,"'")),a=!a):s[t]=""}),i(s.join(""))}function f(e,t,r,n){return n=o.escapeString(n),r.strict||(n=n.replace(" a"," ?a")),n.replace(/([a-z])\1*/gi,function(n){var i;i=n.charAt(0);var o=n.length,s="",a="";switch(r.strict?(1<o&&(s="0{"+(o-1)+"}"),2<o&&(a="0{"+(o-2)+"}")):(s="0?",a="0{0,2}"),i){case"y":i="\\d{2,4}";break;case"M":case"L":2<o?(i=t["months-"+("L"==i?"standAlone":"format")+"-"+p[o-3]].slice(0).join("|"),r.strict||(i=i.replace(/\./g,""),i="(?:"+i+")\\.?")):i="1[0-2]|"+s+"[1-9]";break;case"D":i="[12][0-9][0-9]|3[0-5][0-9]|36[0-6]|"+s+"[1-9][0-9]|"+a+"[1-9]";break;case"d":i="3[01]|[12]\\d|"+s+"[1-9]";break;case"w":i="[1-4][0-9]|5[0-3]|"+s+"[1-9]";break;case"E":case"e":case"c":i=".+?";break;case"h":i="1[0-2]|"+s+"[1-9]";break;case"k":i="1[01]|"+s+"\\d";break;case"H":i="1\\d|2[0-3]|"+s+"\\d";break;case"K":i="1\\d|2[0-4]|"+s+"[1-9]";break;case"m":case"s":i="[0-5]\\d";break;case"S":i="\\d{"+o+"}";break;case"a":o=r.am||t["dayPeriods-format-wide-am"],s=r.pm||t["dayPeriods-format-wide-pm"],i=o+"|"+s,r.strict||(o!=o.toLowerCase()&&(i+="|"+o.toLowerCase()),s!=s.toLowerCase()&&(i+="|"+s.toLowerCase()),-1!=i.indexOf(".")&&(i+="|"+i.replace(/\./g,""))),i=i.replace(/\./g,"\\.");break;default:i=".*"}return e&&e.push(n),"("+i+")"}).replace(/[\xa0 ]/g,"[\\s\\xa0]")}var h={};e.setObject(c.id.replace(/\//g,"."),h),h._getZone=function(e,t,n){return t?r.getTimezoneName(e):e.getTimezoneOffset()},h.format=function(t,r){r=r||{};var n=i.normalizeLocale(r.locale),o=r.formatLength||"short",n=h._getGregorianBundle(n),s=[],a=e.hitch(this,u,t,n,r);if("year"==r.selector)return l(n["dateFormatItem-yyyy"]||"yyyy",a);var c;return"date"!=r.selector&&(c=r.timePattern||n["timeFormat-"+o])&&s.push(l(c,a)),"time"!=r.selector&&(c=r.datePattern||n["dateFormat-"+o])&&s.push(l(c,a)),1==s.length?s[0]:n["dateTimeFormat-"+o].replace(/\'/g,"").replace(/\{(\d+)\}/g,function(e,t){return s[t]})},h.regexp=function(e){return h._parseInfo(e).regexp},h._parseInfo=function(t){t=t||{};var r=i.normalizeLocale(t.locale),r=h._getGregorianBundle(r),n=t.formatLength||"short",o=t.datePattern||r["dateFormat-"+n],s=t.timePattern||r["timeFormat-"+n],n="date"==t.selector?o:"time"==t.selector?s:r["dateTimeFormat-"+n].replace(/\{(\d+)\}/g,function(e,t){return[s,o][t]}),a=[];return{regexp:l(n,e.hitch(this,f,a,r,t)),tokens:a,bundle:r}},h.parse=function(e,n){var i=/[\u200E\u200F\u202A\u202E]/g,o=h._parseInfo(n),s=o.tokens,a=o.bundle,i=new RegExp("^"+o.regexp.replace(i,"")+"$",o.strict?"":"i").exec(e&&e.replace(i,""));if(!i)return null;var c=["abbr","wide","narrow"],u=[1970,0,1,0,0,0,0],l="",i=t.every(i,function(e,r){if(!r)return!0;var i=s[r-1],o=i.length,i=i.charAt(0);switch(i){case"y":if(2!=o&&n.strict)u[0]=e;else if(100>e)e=Number(e),i=""+(new Date).getFullYear(),o=100*i.substring(0,2),i=Math.min(Number(i.substring(2,4))+20,99),u[0]=e<i?o+e:o-100+e;else{if(n.strict)return!1;u[0]=e}break;case"M":case"L":if(2<o){if(o=a["months-"+("L"==i?"standAlone":"format")+"-"+c[o-3]].concat(),n.strict||(e=e.replace(".","").toLowerCase(),o=t.map(o,function(e){return e.replace(".","").toLowerCase()})),-1==(e=t.indexOf(o,e)))return!1}else e--;u[1]=e;break;case"E":case"e":case"c":if(o=a["days-"+("c"==i?"standAlone":"format")+"-"+c[o-3]].concat(),n.strict||(e=e.toLowerCase(),o=t.map(o,function(e){return e.toLowerCase()})),-1==(e=t.indexOf(o,e)))return!1;break;case"D":u[1]=0;case"d":u[2]=e;break;case"a":if(o=n.am||a["dayPeriods-format-wide-am"],i=n.pm||a["dayPeriods-format-wide-pm"],!n.strict){var f=/\./g;e=e.replace(f,"").toLowerCase(),o=o.replace(f,"").toLowerCase(),i=i.replace(f,"").toLowerCase()}if(n.strict&&e!=o&&e!=i)return!1;l=e==i?"p":e==o?"a":"";break;case"K":24==e&&(e=0);case"h":case"H":case"k":if(23<e)return!1;u[3]=e;break;case"m":u[4]=e;break;case"s":u[5]=e;break;case"S":u[6]=e}return!0}),o=+u[3];"p"===l&&12>o?u[3]=o+12:"a"===l&&12==o&&(u[3]=0),o=new Date(u[0],u[1],u[2],u[3],u[4],u[5],u[6]),n.strict&&o.setFullYear(u[0]);var f=s.join(""),p=-1!=f.indexOf("d"),f=-1!=f.indexOf("M");return!i||f&&o.getMonth()>u[1]||p&&o.getDate()>u[2]?null:((f&&o.getMonth()<u[1]||p&&o.getDate()<u[2])&&(o=r.add(o,"hour",1)),o)};var p=["abbr","wide","narrow"],d=[],y={};return h.addCustomFormats=function(e,t){d.push({pkg:e,name:t}),y={}},h._getGregorianBundle=function(r){if(y[r])return y[r];var n={};return t.forEach(d,function(t){t=i.getLocalization(t.pkg,t.name,r),n=e.mixin(n,t)},this),y[r]=n},h.addCustomFormats(c.id.replace(/\/date\/locale$/,".cldr"),"gregorian"),h.getNames=function(e,t,r,n){var i;return n=h._getGregorianBundle(n),e=[e,r,t],"standAlone"==r&&(r=e.join("-"),i=n[r],1==i[0]&&(i=void 0)),e[1]="format",(i||n[e.join("-")]).concat()},h.isWeekend=function(e,t){var r=n.getWeekend(t),i=(e||new Date).getDay();return r.end<r.start&&(r.end+=7,i<r.start&&(i+=7)),i>=r.start&&i<=r.end},h._getDayOfYear=function(e){return r.difference(new Date(e.getFullYear(),0,1,e.getHours()),e)+1},h._getWeekOfYear=function(e,t){1==arguments.length&&(t=0);var r=new Date(e.getFullYear(),0,1).getDay(),n=(r-t+7)%7,n=Math.floor((h._getDayOfYear(e)+n-1)/7);return r==t&&n++,n},h})},"dojo/cldr/supplemental":function(){define(["../_base/lang","../i18n"],function(e,t){var r={};return e.setObject("dojo.cldr.supplemental",r),r.getFirstDayOfWeek=function(e){return e={bd:5,mv:5,ae:6,af:6,bh:6,dj:6,dz:6,eg:6,iq:6,ir:6,jo:6,kw:6,ly:6,ma:6,om:6,qa:6,sa:6,sd:6,sy:6,ye:6,ag:0,ar:0,as:0,au:0,br:0,bs:0,bt:0,bw:0,by:0,bz:0,ca:0,cn:0,co:0,dm:0,do:0,et:0,gt:0,gu:0,hk:0,hn:0,id:0,ie:0,il:0,in:0,jm:0,jp:0,ke:0,kh:0,kr:0,la:0,mh:0,mm:0,mo:0,mt:0,mx:0,mz:0,ni:0,np:0,nz:0,pa:0,pe:0,ph:0,pk:0,pr:0,py:0,sg:0,sv:0,th:0,tn:0,tt:0,tw:0,um:0,us:0,ve:0,vi:0,ws:0,za:0,zw:0}[r._region(e)],void 0===e?1:e},r._region=function(e){e=t.normalizeLocale(e),e=e.split("-");var r=e[1];return r?4==r.length&&(r=e[2]):r={aa:"et",ab:"ge",af:"za",ak:"gh",am:"et",ar:"eg",as:"in",av:"ru",ay:"bo",az:"az",ba:"ru",be:"by",bg:"bg",bi:"vu",bm:"ml",bn:"bd",bo:"cn",br:"fr",bs:"ba",ca:"es",ce:"ru",ch:"gu",co:"fr",cr:"ca",cs:"cz",cv:"ru",cy:"gb",da:"dk",de:"de",dv:"mv",dz:"bt",ee:"gh",el:"gr",en:"us",es:"es",et:"ee",eu:"es",fa:"ir",ff:"sn",fi:"fi",fj:"fj",fo:"fo",fr:"fr",fy:"nl",ga:"ie",gd:"gb",gl:"es",gn:"py",gu:"in",gv:"gb",ha:"ng",he:"il",hi:"in",ho:"pg",hr:"hr",ht:"ht",hu:"hu",hy:"am",ia:"fr",id:"id",ig:"ng",ii:"cn",ik:"us",in:"id",is:"is",it:"it",iu:"ca",iw:"il",ja:"jp",ji:"ua",jv:"id",jw:"id",ka:"ge",kg:"cd",ki:"ke",
kj:"na",kk:"kz",kl:"gl",km:"kh",kn:"in",ko:"kr",ks:"in",ku:"tr",kv:"ru",kw:"gb",ky:"kg",la:"va",lb:"lu",lg:"ug",li:"nl",ln:"cd",lo:"la",lt:"lt",lu:"cd",lv:"lv",mg:"mg",mh:"mh",mi:"nz",mk:"mk",ml:"in",mn:"mn",mo:"ro",mr:"in",ms:"my",mt:"mt",my:"mm",na:"nr",nb:"no",nd:"zw",ne:"np",ng:"na",nl:"nl",nn:"no",no:"no",nr:"za",nv:"us",ny:"mw",oc:"fr",om:"et",or:"in",os:"ge",pa:"in",pl:"pl",ps:"af",pt:"br",qu:"pe",rm:"ch",rn:"bi",ro:"ro",ru:"ru",rw:"rw",sa:"in",sd:"in",se:"no",sg:"cf",si:"lk",sk:"sk",sl:"si",sm:"ws",sn:"zw",so:"so",sq:"al",sr:"rs",ss:"za",st:"za",su:"id",sv:"se",sw:"tz",ta:"in",te:"in",tg:"tj",th:"th",ti:"et",tk:"tm",tl:"ph",tn:"za",to:"to",tr:"tr",ts:"za",tt:"ru",ty:"pf",ug:"cn",uk:"ua",ur:"pk",uz:"uz",ve:"za",vi:"vn",wa:"be",wo:"sn",xh:"za",yi:"il",yo:"ng",za:"cn",zh:"cn",zu:"za",ace:"id",ady:"ru",agq:"cm",alt:"ru",amo:"ng",asa:"tz",ast:"es",awa:"in",bal:"pk",ban:"id",bas:"cm",bax:"cm",bbc:"id",bem:"zm",bez:"tz",bfq:"in",bft:"pk",bfy:"in",bhb:"in",bho:"in",bik:"ph",bin:"ng",bjj:"in",bku:"ph",bqv:"ci",bra:"in",brx:"in",bss:"cm",btv:"pk",bua:"ru",buc:"yt",bug:"id",bya:"id",byn:"er",cch:"ng",ccp:"in",ceb:"ph",cgg:"ug",chk:"fm",chm:"ru",chp:"ca",chr:"us",cja:"kh",cjm:"vn",ckb:"iq",crk:"ca",csb:"pl",dar:"ru",dav:"ke",den:"ca",dgr:"ca",dje:"ne",doi:"in",dsb:"de",dua:"cm",dyo:"sn",dyu:"bf",ebu:"ke",efi:"ng",ewo:"cm",fan:"gq",fil:"ph",fon:"bj",fur:"it",gaa:"gh",gag:"md",gbm:"in",gcr:"gf",gez:"et",gil:"ki",gon:"in",gor:"id",grt:"in",gsw:"ch",guz:"ke",gwi:"ca",haw:"us",hil:"ph",hne:"in",hnn:"ph",hoc:"in",hoj:"in",ibb:"ng",ilo:"ph",inh:"ru",jgo:"cm",jmc:"tz",kaa:"uz",kab:"dz",kaj:"ng",kam:"ke",kbd:"ru",kcg:"ng",kde:"tz",kdt:"th",kea:"cv",ken:"cm",kfo:"ci",kfr:"in",kha:"in",khb:"cn",khq:"ml",kht:"in",kkj:"cm",kln:"ke",kmb:"ao",koi:"ru",kok:"in",kos:"fm",kpe:"lr",krc:"ru",kri:"sl",krl:"ru",kru:"in",ksb:"tz",ksf:"cm",ksh:"de",kum:"ru",lag:"tz",lah:"pk",lbe:"ru",lcp:"cn",lep:"in",lez:"ru",lif:"np",lis:"cn",lki:"ir",lmn:"in",lol:"cd",lua:"cd",luo:"ke",luy:"ke",lwl:"th",mad:"id",mag:"in",mai:"in",mak:"id",man:"gn",mas:"ke",mdf:"ru",mdh:"ph",mdr:"id",men:"sl",mer:"ke",mfe:"mu",mgh:"mz",mgo:"cm",min:"id",mni:"in",mnk:"gm",mnw:"mm",mos:"bf",mua:"cm",mwr:"in",myv:"ru",nap:"it",naq:"na",nds:"de",new:"np",niu:"nu",nmg:"cm",nnh:"cm",nod:"th",nso:"za",nus:"sd",nym:"tz",nyn:"ug",pag:"ph",pam:"ph",pap:"bq",pau:"pw",pon:"fm",prd:"ir",raj:"in",rcf:"re",rej:"id",rjs:"np",rkt:"in",rof:"tz",rwk:"tz",saf:"gh",sah:"ru",saq:"ke",sas:"id",sat:"in",saz:"in",sbp:"tz",scn:"it",sco:"gb",sdh:"ir",seh:"mz",ses:"ml",shi:"ma",shn:"mm",sid:"et",sma:"se",smj:"se",smn:"fi",sms:"fi",snk:"ml",srn:"sr",srr:"sn",ssy:"er",suk:"tz",sus:"gn",swb:"yt",swc:"cd",syl:"bd",syr:"sy",tbw:"ph",tcy:"in",tdd:"cn",tem:"sl",teo:"ug",tet:"tl",tig:"er",tiv:"ng",tkl:"tk",tmh:"ne",tpi:"pg",trv:"tw",tsg:"ph",tts:"th",tum:"mw",tvl:"tv",twq:"ne",tyv:"ru",tzm:"ma",udm:"ru",uli:"fm",umb:"ao",unr:"in",unx:"in",vai:"lr",vun:"tz",wae:"ch",wal:"et",war:"ph",xog:"ug",xsr:"np",yao:"mz",yap:"fm",yav:"cm",zza:"tr"}[e[0]],r},r.getWeekend=function(e){var t=r._region(e);return e={in:0,af:4,dz:4,ir:4,om:4,sa:4,ye:4,ae:5,bh:5,eg:5,il:5,iq:5,jo:5,kw:5,ly:5,ma:5,qa:5,sd:5,sy:5,tn:5}[t],t={af:5,dz:5,ir:5,om:5,sa:5,ye:5,ae:6,bh:5,eg:6,il:6,iq:6,jo:6,kw:6,ly:6,ma:6,qa:6,sd:6,sy:6,tn:6}[t],void 0===e&&(e=6),void 0===t&&(t=0),{start:e,end:t}},r})},"esri/layers/vectorTiles/core/Message":function(){define(["require","exports","dojo/string"],function(e,t,r){return function(){function e(t,n,i){this instanceof e&&(this.name=t,this.message=n&&r.substitute(n,i,function(e){return null==e?"":e})||"",this.details=i)}return e.prototype.toString=function(){return"["+this.name+"]: "+this.message},e}()})},"esri/layers/vectorTiles/core/promiseUtils":function(){define("require exports dojo/Deferred dojo/when dojo/promise/all ./Error".split(" "),function(e,t,r,n,i,o){function s(e){if(e){if("function"!=typeof e.forEach){var t=Object.keys(e);return s(t.map(function(t){return e[t]})).then(function(e){var r={};return t.forEach(function(t,n){return r[t]=e[n]}),r})}var n=new r,i=[],o=e.length;return 0===o&&n.resolve(i),e.forEach(function(e){var t={promise:e};i.push(t),e.then(function(e){t.value=e}).catch(function(e){t.error=e}).then(function(){0===--o&&n.resolve(i)})}),n.promise}}Object.defineProperty(t,"__esModule",{value:!0}),t.all=function(e){return i(e)},t.filter=function(e,t){var r=e.slice();return i(e.map(function(e,r){return t(e,r)})).then(function(e){return r.filter(function(t,r){return e[r]})})},t.eachAlways=s,t.create=function(e,t){var i=new r(t);return e(function(e){return void 0===e&&(e=null),n(e).then(i.resolve)},i.reject),i.promise},t.reject=function(e){var t=new r;return t.reject(e),t.promise},t.resolve=function(e){void 0===e&&(e=null);var t=new r;return t.resolve(e),t.promise},t.after=function(e,t){void 0===t&&(t=null);var n=0,i=new r(function(){n&&(clearTimeout(n),n=0)}),n=setTimeout(function(){i.resolve(t)},e);return i.promise},t.timeout=function(e,t,n){var i=0,s=new r(e.cancel);return e.then(function(e){s.isFulfilled()||(s.resolve(e),i&&(clearTimeout(i),i=0))}),e.catch(function(e){s.isFulfilled()||(s.reject(e),i&&(clearTimeout(i),i=0))}),i=setTimeout(function(){var e=n||new o("promiseUtils:timeout","The wrapped promise did not resolve within "+t+" ms");s.reject(e)},t),s.promise},t.wrapCallback=function(e){var t=!1,n=new r(function(){return t=!0});return e(function(e){t||n.resolve(e)}),n.promise},t.isThenable=function(e){return e&&"function"==typeof e.then},t.when=function(e){return n(e)}})},"dojo/when":function(){define(["./Deferred","./promise/Promise"],function(e,t){return function(r,n,i,o){var s=r&&"function"==typeof r.then,a=s&&r instanceof t;return s?(a||(s=new e(r.cancel),r.then(s.resolve,s.reject,s.progress),r=s.promise),n||i||o?r.then(n,i,o):r):1<arguments.length?n?n(r):r:(new e).resolve(r)}})},"dojo/promise/all":function(){define(["../_base/array","../Deferred","../when"],function(e,t,r){var n=e.some;return function(e){var i,o;e instanceof Array?o=e:e&&"object"==typeof e&&(i=e);var s,a=[];if(i){o=[];for(var c in i)Object.hasOwnProperty.call(i,c)&&(a.push(c),o.push(i[c]));s={}}else o&&(s=[]);if(!o||!o.length)return(new t).resolve(s);var u=new t;u.promise.always(function(){s=a=null});var l=o.length;return n(o,function(e,t){return i||a.push(t),r(e,function(e){u.isFulfilled()||(s[a[t]]=e,0==--l&&u.resolve(s))},u.reject),u.isFulfilled()}),u.promise}})},"esri/layers/vectorTiles/core/workers/utils":function(){define(["require","exports","dojo/has"],function(e,t,r){function n(e){return e&&"object"==typeof e&&("result"in e||"transferList"in e)}Object.defineProperty(t,"__esModule",{value:!0}),function(e){e[e.HANDSHAKE=0]="HANDSHAKE",e[e.CONFIGURE=1]="CONFIGURE",e[e.CONFIGURED=2]="CONFIGURED",e[e.OPEN=3]="OPEN",e[e.OPENED=4]="OPENED",e[e.RESPONSE=5]="RESPONSE",e[e.INVOKE=6]="INVOKE",e[e.CANCEL=7]="CANCEL",e[e.CLOSE=8]="CLOSE",e[e.OPEN_PORT=9]="OPEN_PORT"}(t.MessageType||(t.MessageType={}));var i=0;t.newJobId=function(){return i++},t.isTranferableResult=n,t.toInvokeError=function(e){return e?e.toJSON?JSON.stringify(e):JSON.stringify({name:e.name,message:e.message,details:e.details,stack:e.stack}):null},t.postMessage=function(e,t,i,o){2===arguments.length||void 0===i&&void 0===o?e.postMessage(t):(r("esri-workers-supports-transfer-arraybuffer")||(o?(o=o.filter(function(e){return!(e instanceof ArrayBuffer)}),o.length||(o=null)):n(i)&&i.transferList&&(i.transferList=i.transferList.filter(function(e){return!(e instanceof ArrayBuffer)}),i.transferList.length||(i.transferList=null))),o?(t.data=i,e.postMessage(t,o)):n(i)?(t.data=i.result,i.transferList?e.postMessage(t,i.transferList):e.postMessage(t)):(t.data=i,e.postMessage(t)))},t.receiveMessage=function(e){return e&&(e=e.data)?"string"==typeof e?JSON.parse(e):e:null}})},"esri/layers/vectorTiles/views/vectorTiles/WorkerTileHandler":function(){define("require exports dojo/Deferred ../../core/promiseUtils ../2d/tiling/enums ./WorkerTile ./style/StyleRepository".split(" "),function(e,t,r,n,i,o,s){return function(){function e(){this._tiles=new Map,this._spriteInfo={},this._glyphInfo={}}return e.prototype.reset=function(){var e=new r;this._spriteInfo={},this._glyphInfo={};var t=this._tiles;return t.forEach(function(e){return e.setObsolete()}),t.clear(),e.resolve(),e.promise},e.prototype.getLayers=function(){return this._layers},e.prototype.setLayers=function(e){return this._layers=new s(e).layers,n.resolve({data:""})},e.prototype.getTile=function(e,t){var r=this,s=e.key,a=o.pool.acquire();a.initialize(e.key,e.refKey,this,e.rotation);var c=e.cacheTile;return t.invoke("fetchTileData",e.refKey).then(function(e){return a.setDataAndParse(e,t).then(function(e){return c&&a.status!==i.TileStatus.INVALID&&r._tiles.set(s,a),e}).catch(function(e){return a.setObsolete(),o.pool.release(a),r._tiles.delete(a.tileKey),n.reject(e)})}).catch(function(e){return a.setObsolete(),r._tiles.has(a.tileKey)&&r._tiles.delete(a.tileKey),n.reject(e)}).always(function(e){return c||o.pool.release(a),e})},e.prototype.update=function(e){var t=this._tiles.get(e.key);return t?t.updateSymbols(e.rotation):n.reject()},e.prototype.destructTileData=function(e){return this._tiles.has(e)&&(o.pool.release(this._tiles.get(e)),this._tiles.delete(e)),n.resolve()},e.prototype.fetchSprites=function(e,t){var r=[],i=this._spriteInfo;return e.forEach(function(e){void 0===i[e]&&r.push(e)}),0===r.length?n.resolve():t.invoke("getSprites",r).then(function(e){for(var t in e)i[t]=e[t]})},e.prototype.getSpriteItems=function(){return this._spriteInfo},e.prototype.fetchGlyphs=function(e,t,r,i){var o=[],s=this._glyphInfo[t];return s?r.forEach(function(e){s[e]||o.push(e)}):(s=this._glyphInfo[t]=[],r.forEach(function(e){return o.push(e)})),0===o.length?n.resolve():i.invoke("getGlyphs",{tileID:e,font:t,codePoints:o}).then(function(e){for(var t in e)s[t]=e[t]})},e.prototype.getGlyphItems=function(e){return this._glyphInfo[e]},e}()})},"esri/layers/vectorTiles/views/2d/tiling/enums":function(){define(["require","exports"],function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var r=t.TileStatus||(t.TileStatus={});r[r.INITIALIZED=0]="INITIALIZED",r[r.NO_DATA=1]="NO_DATA",r[r.READY=2]="READY",r[r.MODIFIED=3]="MODIFIED",r[r.INVALID=4]="INVALID"})},"esri/layers/vectorTiles/views/vectorTiles/WorkerTile":function(){define("require exports dojo/Deferred ../../core/executeAsync ../../core/ObjectPool ../../core/promiseUtils ../2d/tiling/enums ./BackgroundBucket ./CircleBucket ./FillBucket ./GeometryUtils ./IndexMemoryBuffer ./LineBucket ./Placement ./SymbolBucket ./TileParser ./VertexMemoryBuffer".split(" "),function(e,t,r,n,i,o,s,a,c,u,l,f,h,p,d,y,m){return function(){function e(){this.rotation=0,this.status=s.TileStatus.INITIALIZED,this._symbolBuckets=[],this.placementEngine=new p.PlacementEngine,this.fillVertexBuffer=new m.FillVertexBuffer(!1),this.fillDDVertexBuffer=new m.FillVertexBuffer(!0),this.fillIndexBuffer=new f.TriangleIndexBuffer,this.outlineVertexBuffer=new m.OutlineVertexBuffer(!1),this.outlineDDVertexBuffer=new m.OutlineVertexBuffer(!0),this.outlineIndexBuffer=new f.TriangleIndexBuffer,this.lineVertexBuffer=new m.LineVertexBuffer(!1),this.lineDDVertexBuffer=new m.LineVertexBuffer(!0),this.lineIndexBuffer=new f.TriangleIndexBuffer,this.iconVertexBuffer=new m.SymbolVertexBuffer(!1),this.iconDDVertexBuffer=new m.SymbolVertexBuffer(!0),this.iconIndexBuffer=new f.TriangleIndexBuffer,this.textVertexBuffer=new m.SymbolVertexBuffer(!1),this.textDDVertexBuffer=new m.SymbolVertexBuffer(!0),this.textIndexBuffer=new f.TriangleIndexBuffer,this.circleVertexBuffer=new m.CircleVertexBuffer,this.circleIndexBuffer=new f.TriangleIndexBuffer}return e.prototype.initialize=function(e,t,r,n){void 0===n&&(n=0),this.tileKey=e,this.refKey=t,this._workerTileHandler=r,this.rotation=n,this.placementEngine.setAngle(l.C_DEG_TO_RAD*n)},e.prototype.release=function(){this.tileKey=this.refKey="",this.status=s.TileStatus.INITIALIZED,this.rotation=0,this.fillVertexBuffer.reset(),this.fillDDVertexBuffer.reset(),this.fillIndexBuffer.reset(),this.outlineVertexBuffer.reset(),this.outlineDDVertexBuffer.reset(),this.outlineIndexBuffer.reset(),this.lineVertexBuffer.reset(),this.lineDDVertexBuffer.reset(),this.lineIndexBuffer.reset(),this.iconVertexBuffer.reset(),this.iconDDVertexBuffer.reset(),this.iconIndexBuffer.reset(),this.textVertexBuffer.reset(),this.textDDVertexBuffer.reset(),this.textIndexBuffer.reset(),this.circleVertexBuffer.reset(),this.circleIndexBuffer.reset(),this.placementEngine.reset(),this._symbolBuckets.length=0,this._workerTileHandler=null},e.prototype.setDataAndParse=function(e,t){var n=this,i=new r(function(e){n.status=s.TileStatus.INVALID});return this._parse(e,t).then(function(e){n.status=s.TileStatus.READY;for(var t=new Uint32Array([1,n.fillVertexBuffer.sizeInBytes,2,n.fillDDVertexBuffer.sizeInBytes,3,n.fillIndexBuffer.sizeInBytes,4,n.outlineVertexBuffer.sizeInBytes,5,n.outlineDDVertexBuffer.sizeInBytes,6,n.outlineIndexBuffer.sizeInBytes,7,n.lineVertexBuffer.sizeInBytes,8,n.lineDDVertexBuffer.sizeInBytes,9,n.lineIndexBuffer.sizeInBytes,10,n.iconVertexBuffer.sizeInBytes,11,n.iconDDVertexBuffer.sizeInBytes,12,n.iconIndexBuffer.sizeInBytes,13,n.textVertexBuffer.sizeInBytes,14,n.textDDVertexBuffer.sizeInBytes,15,n.textIndexBuffer.sizeInBytes,16,n.circleVertexBuffer.sizeInBytes,17,n.circleIndexBuffer.sizeInBytes]),r=[],o=e.length,l=0;l<o;l++){var f=e[l];if(f instanceof u)r.push(f.layerIndex),r.push(1),r.push(f.fillIndexStart),r.push(f.fillIndexCount),r.push(f.outlineIndexStart),r.push(f.outlineIndexCount);else if(f instanceof h)r.push(f.layerIndex),r.push(2),r.push(f.lineIndexStart),r.push(f.lineIndexCount);else if(f instanceof d){r.push(f.layerIndex),r.push(3),r.push(f.sdfMarker?1:0);var p=f.markerPageMap;r.push(p.size),p.forEach(function(e,t){r.push(t),r.push(e[0]),r.push(e[1])}),f=f.glyphsPageMap,r.push(f.size),f.forEach(function(e,t){r.push(t),r.push(e[0]),r.push(e[1])})}else f instanceof c?(r.push(f.layerIndex),r.push(4),r.push(f.circleIndexStart),r.push(f.circleIndexCount)):f instanceof a&&(r.push(f.layerIndex),r.push(0))}e=new Uint32Array(r);var o=n.fillVertexBuffer.toBuffer(),l=n.fillDDVertexBuffer.toBuffer(),f=n.fillIndexBuffer.toBuffer(),p=n.outlineVertexBuffer.toBuffer(),y=n.outlineDDVertexBuffer.toBuffer(),m=n.outlineIndexBuffer.toBuffer(),v=n.lineVertexBuffer.toBuffer(),g=n.lineDDVertexBuffer.toBuffer(),x=n.lineIndexBuffer.toBuffer(),_=n.iconVertexBuffer.toBuffer(),b=n.iconDDVertexBuffer.toBuffer(),w=n.iconIndexBuffer.toBuffer(),I=n.textVertexBuffer.toBuffer(),k=n.textDDVertexBuffer.toBuffer(),D=n.textIndexBuffer.toBuffer(),C=n.circleVertexBuffer.toBuffer(),T=n.circleIndexBuffer.toBuffer();i.resolve({result:{bufferDataInfo:t.buffer,bucketDataInfo:e.buffer,bufferData:[o,l,f,p,y,m,v,g,x,_,b,w,I,k,D,C,T]},transferList:[o,l,f,p,y,m,v,g,x,_,b,w,I,k,D,C,T,t.buffer,e.buffer]})}),i.promise},e.prototype.addBucket=function(e){this._symbolBuckets.push(e)},e.prototype.updateSymbols=function(e){var t=this,r=this._symbolBuckets;if(!r||0===r.length)return o.resolve();this.rotation=e;var i=this.placementEngine;i.reset(),i.setAngle(e/256*360*l.C_DEG_TO_RAD);var a=this.iconVertexBuffer;a.reset();var c=this.iconDDVertexBuffer;c.reset();var u=this.iconIndexBuffer;u.reset();var f=this.textVertexBuffer;f.reset();var h=this.textDDVertexBuffer;h.reset();var p=this.textIndexBuffer;p.reset();var d=[],y=r.length,m=0;return n(function(){if(t.status===s.TileStatus.INVALID||t.status===s.TileStatus.INITIALIZED)return!0;if(m<y){var e=r[m++],n=e.layer;(e=e.copy(n.hasDataDrivenIcon?c:a,u,n.hasDataDrivenText?h:f,p,i))&&(d.push(e),e.updateSymbols())}return m>=y}).then(function(){if(t.status===s.TileStatus.INVALID||t.status===s.TileStatus.INITIALIZED||0===a.sizeInBytes&&0===c.sizeInBytes&&0===u.sizeInBytes&&0===f.sizeInBytes&&0===h.sizeInBytes&&0===p.sizeInBytes)return{result:null,transferList:null};var e=new Uint32Array([10,a.sizeInBytes,11,c.sizeInBytes,12,u.sizeInBytes,13,f.sizeInBytes,14,h.sizeInBytes,15,p.sizeInBytes]),r=[];y=d.length;for(var n=0;n<y;n++){var i=d[n];r.push(i.layerIndex),r.push(3),r.push(i.sdfMarker?1:0);var o=i.markerPageMap;r.push(o.size),o.forEach(function(e,t){r.push(t),r.push(e[0]),r.push(e[1])}),i=i.glyphsPageMap,r.push(i.size),i.forEach(function(e,t){r.push(t),r.push(e[0]),r.push(e[1])})}var n=new Uint32Array(r),i=a.toBuffer(),o=c.toBuffer(),l=u.toBuffer(),m=f.toBuffer(),v=h.toBuffer(),g=p.toBuffer();return{result:{bufferDataInfo:e.buffer,bucketDataInfo:n.buffer,bufferData:[i,o,l,m,v,g]},transferList:[i,o,l,m,v,g,e.buffer,n.buffer]}}).catch(function(){return null})},e.prototype.setObsolete=function(){this.status=s.TileStatus.INVALID},e.prototype.getLayers=function(){return this._workerTileHandler.getLayers()},e.prototype.getWorkerTileHandler=function(){return this._workerTileHandler},e.prototype._parse=function(e,t){return e&&0!==e.byteLength?(this.status=s.TileStatus.MODIFIED,new y(e,this,t).parse()):o.resolve([])},e.pool=new i(e),e}()})},"esri/layers/vectorTiles/core/executeAsync":function(){define("require exports dojo/has ./nextTick ./now ./promiseUtils".split(" "),function(e,t,r,n,i,o){function s(){var e=0===a.length;if(!e){for(var t=i();!e&&200>i()-t;){var r=a[u];if(r){if(!0===r()){var o=c.get(r);a[u]=null,c.delete(r),o()}u=(u+1)%a.length}else a.splice(u,1),u=(e=0===a.length)?0:u%a.length}e||n(s)}}var a=[],c=new Map,u=0;return function(e){return e?o.create(function(t){a.push(e),c.set(e,t),1===a.length&&n(s)},function(){a[a.indexOf(e)]=null,c.delete(e)}):o.reject(new TypeError("callback is not a function"))}})},"esri/layers/vectorTiles/core/nextTick":function(){define(["require","exports","./global"],function(e,t,r){function n(){if(r.postMessage&&!r.importScripts){var e=r.onmessage,t=!0;return r.onmessage=function(){t=!1},r.postMessage("","*"),r.onmessage=e,t}return!1}var i=r.MutationObserver||r.WebKitMutationObserver;return function(){var e;if(r.process&&r.process.nextTick)e=function(e){r.process.nextTick(e)};else if(r.Promise)e=function(e){r.Promise.resolve().then(e)};else if(i){var t=[],o=document.createElement("div");new i(function(){for(;0<t.length;)t.shift()()}).observe(o,{attributes:!0}),e=function(e){t.push(e),o.setAttribute("queueStatus","1")}}else if(n()){var s=[];r.addEventListener("message",function(e){if(e.source===r&&"esri-nexttick-message"===e.data)for(e.stopPropagation();s.length;)s.shift()()},!0),e=function(e){s.push(e),r.postMessage("esri-nexttick-message","*")}}else e=r.setImmediate?function(e){return r.setImmediate(e)}:function(e){return r.setTimeout(e,0)};return e}()})},"esri/layers/vectorTiles/core/global":function(){define(["require","exports"],function(e,t){return function(){return"undefined"!=typeof global?global:"undefined"!=typeof window?window:"undefined"!=typeof self?self:void 0}()})},"esri/layers/vectorTiles/core/now":function(){define(["require","exports","./global"],function(e,t,r){return function(){var e=r.performance||{};if(e.now)return function(){return e.now()};if(e.webkitNow)return function(){return e.webkitNow()};if(e.mozNow)return function(){return e.mozNow()};if(e.msNow)return function(){return e.msNow()};if(e.oNow)return function(){return e.oNow()};var t;return t=e.timing&&e.timing.navigationStart?e.timing.navigationStart:Date.now(),function(){return Date.now()-t}}()})},"esri/layers/vectorTiles/core/ObjectPool":function(){define(["require","exports"],function(e,t){var r=function(){return function(){}}();return function(){function e(e,t,r,n,i){for(void 0===n&&(n=1),void 0===i&&(i=0),this.classConstructor=e,this.acquireFunctionOrWithConstructor=t,this.releaseFunction=r,this.growthSize=n,!0===t?this.acquireFunction=this._constructorAcquireFunction:"function"==typeof t&&(this.acquireFunction=t),this._pool=Array(i),this._set=new Set,this._initialSize=i,e=0;e<i;e++)this._pool[e]=new this.classConstructor;this.growthSize=Math.max(n,1)}return e.prototype.acquire=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];if(t=this.classConstructor||r,0===this._pool.length)for(var n=this.growthSize,i=0;i<n;i++)this._pool[i]=new t;return t=this._pool.shift(),this.acquireFunction?this.acquireFunction.apply(this,[t].concat(e)):t&&t.acquire&&"function"==typeof t.acquire&&t.acquire.apply(t,e),this._set.delete(t),t},e.prototype.release=function(e){e&&!this._set.has(e)&&(this.releaseFunction?this.releaseFunction(e):e&&e.release&&"function"==typeof e.release&&e.release(),this._pool.push(e),this._set.add(e))},e.prototype.prune=function(e){if(void 0===e&&(e=this._initialSize),!(this._pool.length<=e))for(var t;e>this._pool.length;)t=this._pool.shift(),this._set.delete(t),t.dispose&&"function"==typeof t.dispose&&t.dispose()},e.prototype._constructorAcquireFunction=function(e){for(var t=[],r=1;r<arguments.length;r++)t[r-1]=arguments[r];(n=this.classConstructor).call.apply(n,[e].concat(t));var n},e}()})},"esri/layers/vectorTiles/views/vectorTiles/BackgroundBucket":function(){define(["require","exports","../../core/tsSupport/extendsHelper","../../core/tsSupport/decorateHelper","./Bucket"],function(e,t,r,n,i){return function(e){function t(t,r){return e.call(this,t,r)||this}return r(t,e),t}(i)})},"esri/layers/vectorTiles/core/tsSupport/decorateHelper":function(){define([],function(){return function(e,t,r,n){var i,o=arguments.length,s=3>o?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,r,n);else for(var a=e.length-1;0<=a;a--)(i=e[a])&&(s=(3>o?i(s):3<o?i(t,r,s):i(t,r))||s);return 3<o&&s&&Object.defineProperty(t,r,s),s}})},"esri/layers/vectorTiles/views/vectorTiles/Bucket":function(){define(["require","exports"],function(e,t){return function(){function e(e,t){this.layerExtent=4096,this._features=[],this.layer=e,this.zoom=t,this._filter=e.getFeatureFilter()}return e.prototype.pushFeature=function(e){this._filter.filter(e)&&this._features.push(e)},e.prototype.hasFeatures=function(){return 0<this._features.length},e.prototype.processFeatures=function(e,t){},e.prototype.assignBufferInfo=function(e){},e}()})},"esri/layers/vectorTiles/views/vectorTiles/CircleBucket":function(){define(["require","exports","../../core/tsSupport/extendsHelper","../../core/tsSupport/decorateHelper","./Bucket"],function(e,t,r,n,i){return function(e){function t(t,r,n,i){return t=e.call(this,t,r)||this,t._circleVertexBuffer=n,t._circleIndexBuffer=i,t}return r(t,e),Object.defineProperty(t.prototype,"circleIndexStart",{get:function(){return this._circleIndexStart},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"circleIndexCount",{get:function(){return this._circleIndexCount},enumerable:!0,configurable:!0}),t.prototype.assignBufferInfo=function(e){e._circleIndexStart=this._circleIndexStart,e._circleIndexCount=this._circleIndexCount},t.prototype.processFeatures=function(e,t){var r=this._circleVertexBuffer,n=this._circleIndexBuffer;this._circleIndexStart=n.index,this._circleIndexCount=0;var i=this.layer,o=this.zoom;e&&e.setExtent(this.layerExtent);for(var s=1,a=[1,1,1,1],c=1,u=0,l=1,f=[1,1,1,1],h=1,p=0,d=this._features;p<d.length;p++){var y=d[p],m=y.getGeometry(e);if(m)for(i.hasDataDrivenRadius&&(s=i.getPaintValue("circle-radius",o,y)),i.hasDataDrivenColor&&(a=i.getPaintValue("circle-color",o,y)),i.hasDataDrivenOpacity&&(c=i.getPaintValue("circle-opacity",o,y)),i.hasDataDrivenStrokeWidth&&(l=i.getPaintValue("circle-stroke-width",o,y)),i.hasDataDrivenStrokeColor&&(f=i.getPaintValue("circle-stroke-color",o,y)),i.hasDataDrivenStrokeOpacity&&(h=i.getPaintValue("circle-stroke-opacity",o,y)),i.hasDataDrivenBlur&&(u=i.getPaintValue("circle-blur",o,y)),y=0;y<m.length;y++){var v=m[y];if(v)for(var g=0;g<v.length;g++){var x=v[g],_=r.index;r.add(x.x,x.y,0,0,s,a,c,u,l,f,h),r.add(x.x,x.y,0,1,s,a,c,u,l,f,h),r.add(x.x,x.y,1,0,s,a,c,u,l,f,h),r.add(x.x,x.y,1,1,s,a,c,u,l,f,h),n.add(_+0,_+1,_+2),n.add(_+1,_+2,_+3),this._circleIndexCount+=6}}}},t}(i)})},"esri/layers/vectorTiles/views/vectorTiles/FillBucket":function(){define("require exports ../../core/tsSupport/extendsHelper ../../core/tsSupport/decorateHelper ../../core/ArrayPool ../../core/libs/earcut/earcut ../2d/engine/webgl/Geometry ./Bucket".split(" "),function(e,t,r,n,i,o,s,a){return function(e){function t(t,r,n,i,o,s){if(r=e.call(this,t,r)||this,t.hasDataDrivenFill!==n.isDataDriven())throw Error("incompatible fill buffer");if(t.hasDataDrivenOutline!==o.isDataDriven())throw Error("incompatible outline buffer");return r._fillVertexBuffer=n,r._fillIndexBuffer=i,r._outlineVertexBuffer=o,r._outlineIndexBuffer=s,r}return r(t,e),Object.defineProperty(t.prototype,"fillIndexStart",{get:function(){return this._fillIndexStart},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"fillIndexCount",{get:function(){return this._fillIndexCount},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"outlineIndexStart",{get:function(){return this._outlineIndexStart},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"outlineIndexCount",{get:function(){return this._outlineIndexCount},enumerable:!0,configurable:!0}),t.prototype.assignBufferInfo=function(e){e._fillIndexStart=this._fillIndexStart,e._fillIndexCount=this._fillIndexCount,e.layer.getPaintProperty("fill-outline-color")?(e._outlineIndexStart=this._outlineIndexStart,e._outlineIndexCount=this._outlineIndexCount):(e._outlineIndexStart=0,e._outlineIndexCount=0)},t.prototype.processFeatures=function(e,t){this._fillIndexStart=this._fillIndexBuffer.index,this._fillIndexCount=0,this._outlineIndexStart=this._outlineIndexBuffer.index,this._outlineIndexCount=0;var r=this.layer,n=this.zoom,i=r.hasDataDrivenFill,o=r.hasDataDrivenOutline;e&&e.setExtent(this.layerExtent);var s=r.getPaintValue("fill-pattern",n),a=r.getPaintValue("fill-antialias",n)&&void 0===s,c=[1,1,1,1],u=[1,1,1,1],l=1;if(r.outlineUsesFillColor){if(a&&!r.hasDataDrivenOpacity){var f=r.getPaintValue("fill-opacity",n),h=r.getPaintValue("fill-opacity",n+1);1>f&&1>h&&(a=!1)}a&&!r.hasDataDrivenColor&&(f=r.getPaintValue("fill-color",n),h=r.getPaintValue("fill-color",n+1),1>f[3]&&1>h[3]&&(a=!1))}for(f=0,h=this._features;f<h.length;f++){var p=h[f];!s&&r.hasDataDrivenColor&&(c=r.getPaintValue("fill-color",n,p)),r.hasDataDrivenOpacity&&(l=r.getPaintValue("fill-opacity",n,p)),!s&&r.hasDataDrivenOutlineColor&&(u=r.getPaintValue("fill-outline-color",n,p));var d=void 0;i&&(d={color:c,opacity:l});var y=void 0;o&&(y={color:r.outlineUsesFillColor?c:u,opacity:l}),p=p.getGeometry(e),this._processFeature(p,a,r.outlineUsesFillColor,d,y)}},t.prototype._processFeature=function(e,r,n,i,o){if(e){var s=e.length;if(r&&(!n||!o||1==o.color[3]*o.opacity))for(r=0;r<s;r++)this._processOutline(e[r],o);var a;for(r=0;r<s;r++)o=t._area(e[r]),128<o?(void 0!==a&&this._processFill(e,a,i),a=[r]):-128>o&&void 0!==a&&a.push(r);void 0!==a&&this._processFill(e,a,i)}},t.prototype._processOutline=function(e,t){var r,n,i,o=this._outlineVertexBuffer,a=this._outlineIndexBuffer,c=a.index,u=new s.Point(0,0),l=new s.Point(0,0),f=new s.Point(0,0),h=-1,p=-1,d=-1,y=-1,m=-1,v=!1,g=e.length;if(!(2>g)){var x=e[0];for(r=e[g-1];g&&r.isEqual(x);)--g,r=e[g-1];if(!(2>g-0)){for(x=0;x<g;++x){0===x?(r=e[g-1],n=e[0],i=e[1],u.assignSub(n,r),u.normalize(),u.rightPerpendicular()):(r=n,n=i,i=x!==g-1?e[x+1]:e[0],u.assign(l)),r=this._isClipEdge(r,n),-1===y&&(v=r),l.assignSub(i,n),l.normalize(),l.rightPerpendicular(),d=u.x*l.y-u.y*l.x,f.assignAdd(u,l),f.normalize();var _=-f.x*-u.x+-f.y*-u.y,_=Math.abs(0!==_?1/_:1);8<_&&(_=8),0<=d?(d=o.add(n.x,n.y,u.x,u.y,0,1,t),-1===y&&(y=d),0<=h&&0<=p&&0<=d&&!r&&a.add(h,p,d),p=o.add(n.x,n.y,_*-f.x,_*-f.y,0,-1,t),-1===m&&(m=p),0<=h&&0<=p&&0<=d&&!r&&a.add(h,p,d),h=p,p=d,d=o.add(n.x,n.y,f.x,f.y,0,1,t),0<=h&&0<=p&&0<=d&&!r&&a.add(h,p,d),p=o.add(n.x,n.y,l.x,l.y,0,1,t)):(d=o.add(n.x,n.y,_*f.x,_*f.y,0,1,t),-1===y&&(y=d),0<=h&&0<=p&&0<=d&&!r&&a.add(h,p,d),p=o.add(n.x,n.y,-u.x,-u.y,0,-1,t),-1===m&&(m=p),0<=h&&0<=p&&0<=d&&!r&&a.add(h,p,d),h=p,p=d,d=o.add(n.x,n.y,-f.x,-f.y,0,-1,t),0<=h&&0<=p&&0<=d&&!r&&a.add(h,p,d),h=o.add(n.x,n.y,-l.x,-l.y,0,-1,t)),0<=h&&0<=p&&0<=d&&!r&&a.add(h,p,d)}0<=h&&0<=p&&0<=y&&!v&&a.add(h,p,y),0<=h&&0<=y&&0<=m&&!v&&a.add(h,m,y),this._outlineIndexCount+=3*(a.index-c)}}},t.prototype._processFill=function(e,t,r){var n;1<t.length&&(n=[]);for(var s=0,a=0;a<t.length;a++){var c=t[a];0!==s&&n.push(s),s+=e[c].length}for(var a=2*s,s=i.acquire(),u=0;u<t.length;u++)for(var c=t[u],c=e[c],l=c.length,f=0;f<l;++f)s.push(c[f].x),s.push(c[f].y);if(e=o(s,n,2),0<(t=e.length)){for(n=this._fillVertexBuffer.index,u=0;u<a;)this._fillVertexBuffer.add(s[u++],s[u++],r);for(r=0;r<t;)this._fillIndexBuffer.add(n+e[r++],n+e[r++],n+e[r++]);this._fillIndexCount+=t}i.release(s)},t.prototype._isClipEdge=function(e,t){return e.x===t.x?-64>=e.x||4160<=e.x:e.y===t.y&&(-64>=e.y||4160<=e.y)},t._area=function(e){for(var t=0,r=e.length-1,n=0;n<r;n++)t+=(e[n].x-e[n+1].x)*(e[n].y+e[n+1].y);return.5*(t+=(e[r].x-e[0].x)*(e[r].y+e[0].y))},t}(a)})},"esri/layers/vectorTiles/core/ArrayPool":function(){define(["require","exports","./ObjectPool"],function(e,t,r){function n(e){e.length=0}var i=Array.prototype.splice;e=function(){function e(e,t){void 0===e&&(e=50),void 0===t&&(t=50),this._pool=new r(Array,!1,n,t,e)}return e.prototype.acquire=function(){return this._pool.acquire()},e.prototype.copy=function(e){var t=this.acquire();return e.unshift(0,0),i.apply(t,e),e.splice(0,2),t},e.prototype.release=function(e){this._pool.release(e)},e.acquire=function(){return o.acquire()},e.copy=function(e){return o.copy(e)},e.release=function(e){return o.release(e)},e}();var o=new e(100);return e})},"esri/layers/vectorTiles/core/libs/earcut/earcut":function(){define([],function(){function e(e,i,a){a=a||2,x=e.length/a+(i?2*i.length:0),_=!1;var u=i&&i.length,l=u?i[0]*a:e.length,f=t(e,0,l,a,!0),h=[];if(!f)return h;var p,y,m,v;if(u)e:{var g,b,w,I=a,u=[];for(v=0,g=i.length;v<g;v++)b=i[v]*I,w=v<g-1?i[v+1]*I:e.length,b=t(e,b,w,I,!1),b===b.next&&(b.steiner=!0),u.push(c(b));for(u.sort(o),v=0;v<u.length;v++){if(!f){f=null;break e}i=u[v],I=f,(I=s(i,I))&&(i=d(I,i),r(i,i.next)),f=r(f,f.next)}}if(_)return h;if(e.length>80*a){for(p=m=e[0],y=u=e[1],I=a;I<l;I+=a)v=e[I],i=e[I+1],v<p&&(p=v),i<y&&(y=i),v>m&&(m=v),i>u&&(u=i);m=Math.max(m-p,u-y)}return n(f,h,a,p,y,m),h}function t(e,t,r,n,i){var o;if(i===0<g(e,t,r,n))for(i=t;i<r;i+=n)o=y(i,e[i],e[i+1],o);else for(i=r-n;i>=t;i-=n)o=y(i,e[i],e[i+1],o);return o&&f(o,o.next)&&(m(o),o=o.next),o}function r(e,t){if(!e)return e;t||(t=e);var r,n=e,i=0,o=x*x/2;do{if(r=!1,n.steiner||!f(n,n.next)&&0!==l(n.prev,n,n.next))n=n.next;else{if(m(n),(n=t=n.prev)===n.next)return null;r=!0}if(i++>o)return _=!0,null}while(r||n!==t);return t}function n(e,t,o,s,c,y,v){if(e){if(!v&&y){var g=e,x=g;do{null===x.z&&(x.z=a(x.x,x.y,s,c,y)),x.prevZ=x.prev,x=x.nextZ=x.next}while(x!==g);x.prevZ.nextZ=null,x.prevZ=null;var b,w,I,k,D,C,g=x,T=1;do{for(x=g,I=g=null,k=0;x;){for(k++,w=x,b=D=0;b<T&&(D++,w=w.nextZ);b++);for(C=T;0<D||0<C&&w;)0===D?(b=w,w=w.nextZ,C--):0!==C&&w?x.z<=w.z?(b=x,x=x.nextZ,D--):(b=w,w=w.nextZ,C--):(b=x,x=x.nextZ,D--),I?I.nextZ=b:g=b,b.prevZ=I,I=b;x=w}I.nextZ=null,T*=2}while(1<k)}for(g=e;e.prev!==e.next;){if(x=e.prev,w=e.next,y)e:{I=e,C=s;var S=c,A=y;if(k=I.prev,D=I,T=I.next,0<=l(k,D,T))I=!1;else{var P=k.x>D.x?k.x>T.x?k.x:T.x:D.x>T.x?D.x:T.x,j=k.y>D.y?k.y>T.y?k.y:T.y:D.y>T.y?D.y:T.y;for(b=a(k.x<D.x?k.x<T.x?k.x:T.x:D.x<T.x?D.x:T.x,k.y<D.y?k.y<T.y?k.y:T.y:D.y<T.y?D.y:T.y,C,S,A),C=a(P,j,C,S,A),S=I.nextZ;S&&S.z<=C;){if(S!==I.prev&&S!==I.next&&u(k.x,k.y,D.x,D.y,T.x,T.y,S.x,S.y)&&0<=l(S.prev,S,S.next)){I=!1;break e}S=S.nextZ}for(S=I.prevZ;S&&S.z>=b;){if(S!==I.prev&&S!==I.next&&u(k.x,k.y,D.x,D.y,T.x,T.y,S.x,S.y)&&0<=l(S.prev,S,S.next)){I=!1;break e}S=S.prevZ}I=!0}}else I=i(e);if(I)t.push(x.i/o),t.push(e.i/o),t.push(w.i/o),m(e),g=e=w.next;else{if(_)break;if((e=w)===g){if(v){if(1===v){v=t,g=o,x=e;do{w=x.prev,I=x.next.next,!f(w,I)&&h(w,x,x.next,I)&&p(w,I)&&p(I,w)&&(v.push(w.i/g),v.push(x.i/g),v.push(I.i/g),m(x),m(x.next),x=e=I),x=x.next}while(x!==e);e=x,n(e,t,o,s,c,y,2)}else if(2===v)e:{v=e;do{
for(g=v.next.next;g!==v.prev;){if(x=v.i!==g.i){if(x=v,w=g,I=void 0,I=x.next.i!==w.i&&x.prev.i!==w.i){I=void 0;t:{I=x;do{if(I.i!==x.i&&I.next.i!==x.i&&I.i!==w.i&&I.next.i!==w.i&&h(I,I.next,x,w)){I=!0;break t}I=I.next}while(I!==x);I=!1}I=!I}if(k=void 0,k=I&&p(x,w)&&p(w,x)){I=x,k=!1,D=(x.x+w.x)/2,w=(x.y+w.y)/2;do{I.y>w!=I.next.y>w&&D<(I.next.x-I.x)*(w-I.y)/(I.next.y-I.y)+I.x&&(k=!k),I=I.next}while(I!==x)}x=k}if(x){e=d(v,g),v=r(v,v.next),e=r(e,e.next),n(v,t,o,s,c,y),n(e,t,o,s,c,y);break e}g=g.next}v=v.next}while(v!==e)}}else n(r(e),t,o,s,c,y,1);break}}}}}function i(e){var t=e.prev,r=e.next;if(0<=l(t,e,r))return!1;for(var n=e.next.next,i=0;n!==e.prev;){if(u(t.x,t.y,e.x,e.y,r.x,r.y,n.x,n.y)&&0<=l(n.prev,n,n.next))return!1;if(n=n.next,i++>x)return _=!0,!1}return!0}function o(e,t){return e.x-t.x}function s(e,t){var r,n=t,i=e.x,o=e.y,s=-1/0;do{if(!n)return null;if(o<=n.y&&o>=n.next.y){var a=n.x+(o-n.y)*(n.next.x-n.x)/(n.next.y-n.y);if(a<=i&&a>s){if(s=a,a===i){if(o===n.y)return n;if(o===n.next.y)return n.next}r=n.x<n.next.x?n:n.next}}n=n.next}while(n!==t);if(!r)return null;if(i===s)return r.prev;for(var c,a=r,l=r.x,f=r.y,h=1/0,n=r.next;n!==a;)i>=n.x&&n.x>=l&&u(o<f?i:s,o,l,f,o<f?s:i,o,n.x,n.y)&&((c=Math.abs(o-n.y)/(i-n.x))<h||c===h&&n.x>r.x)&&p(n,e)&&(r=n,h=c),n=n.next;return r}function a(e,t,r,n,i){return e=32767*(e-r)/i,t=32767*(t-n)/i,e=16711935&(e|e<<8),e=252645135&(e|e<<4),e=858993459&(e|e<<2),t=16711935&(t|t<<8),t=252645135&(t|t<<4),t=858993459&(t|t<<2),1431655765&(e|e<<1)|(1431655765&(t|t<<1))<<1}function c(e){var t=e,r=e;do{t.x<r.x&&(r=t),t=t.next}while(t!==e);return r}function u(e,t,r,n,i,o,s,a){return 0<=(i-s)*(t-a)-(e-s)*(o-a)&&0<=(e-s)*(n-a)-(r-s)*(t-a)&&0<=(r-s)*(o-a)-(i-s)*(n-a)}function l(e,t,r){return(t.y-e.y)*(r.x-t.x)-(t.x-e.x)*(r.y-t.y)}function f(e,t){return e.x===t.x&&e.y===t.y}function h(e,t,r,n){return!!(f(e,t)&&f(r,n)||f(e,n)&&f(r,t))||0<l(e,t,r)!=0<l(e,t,n)&&0<l(r,n,e)!=0<l(r,n,t)}function p(e,t){return 0>l(e.prev,e,e.next)?0<=l(e,t,e.next)&&0<=l(e,e.prev,t):0>l(e,t,e.prev)||0>l(e,e.next,t)}function d(e,t){var r=new v(e.i,e.x,e.y),n=new v(t.i,t.x,t.y),i=e.next,o=t.prev;return e.next=t,t.prev=e,r.next=i,i.prev=r,n.next=r,r.prev=n,o.next=n,n.prev=o,n}function y(e,t,r,n){return e=new v(e,t,r),n?(e.next=n.next,e.prev=n,n.next.prev=e,n.next=e):(e.prev=e,e.next=e),e}function m(e){e.next.prev=e.prev,e.prev.next=e.next,e.prevZ&&(e.prevZ.nextZ=e.nextZ),e.nextZ&&(e.nextZ.prevZ=e.prevZ)}function v(e,t,r){this.i=e,this.x=t,this.y=r,this.nextZ=this.prevZ=this.z=this.next=this.prev=null,this.steiner=!1}function g(e,t,r,n){for(var i=0,o=r-n;t<r;t+=n)i+=(e[o]-e[t])*(e[t+1]+e[o+1]),o=t;return i}var x,_;return e.deviation=function(e,t,r,n){var i=t&&t.length,o=Math.abs(g(e,0,i?t[0]*r:e.length,r));if(i)for(var i=0,s=t.length;i<s;i++)o-=Math.abs(g(e,t[i]*r,i<s-1?t[i+1]*r:e.length,r));for(i=t=0;i<n.length;i+=3){var s=n[i]*r,a=n[i+1]*r,c=n[i+2]*r;t+=Math.abs((e[s]-e[c])*(e[a+1]-e[s+1])-(e[s]-e[a])*(e[c+1]-e[s+1]))}return 0===o&&0===t?0:Math.abs((t-o)/o)},e.flatten=function(e){for(var t=e[0][0].length,r={vertices:[],holes:[],dimensions:t},n=0,i=0;i<e.length;i++){for(var o=0;o<e[i].length;o++)for(var s=0;s<t;s++)r.vertices.push(e[i][o][s]);0<i&&(n+=e[i-1].length,r.holes.push(n))}return r},e})},"esri/layers/vectorTiles/views/2d/engine/webgl/Geometry":function(){define(["require","exports"],function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){this.x=e,this.y=t}return e.prototype.clone=function(){return new e(this.x,this.y)},e.prototype.equals=function(e,t){return e===this.x&&t===this.y},e.prototype.isEqual=function(e){return e.x===this.x&&e.y===this.y},e.prototype.setCoords=function(e,t){this.x=e,this.y=t},e.prototype.normalize=function(){var e=this.x,t=this.y,e=Math.sqrt(e*e+t*t);this.x/=e,this.y/=e},e.prototype.rightPerpendicular=function(){var e=this.x;this.x=this.y,this.y=-e},e.prototype.move=function(e,t){this.x+=e,this.y+=t},e.prototype.assign=function(e){this.x=e.x,this.y=e.y},e.prototype.assignAdd=function(e,t){this.x=e.x+t.x,this.y=e.y+t.y},e.prototype.assignSub=function(e,t){this.x=e.x-t.x,this.y=e.y-t.y},e.prototype.rotate=function(e,t){var r=this.x,n=this.y;this.x=r*e-n*t,this.y=r*t+n*e},e.prototype.scale=function(e){this.x*=e,this.y*=e},e.prototype.length=function(){var e=this.x,t=this.y;return Math.sqrt(e*e+t*t)},e.distance=function(e,t){var r=t.x-e.x,n=t.y-e.y;return Math.sqrt(r*r+n*n)},e.add=function(t,r){return new e(t.x+r.x,t.y+r.y)},e.sub=function(t,r){return new e(t.x-r.x,t.y-r.y)},e}();t.Point=r})},"esri/layers/vectorTiles/views/vectorTiles/GeometryUtils":function(){define(["require","exports"],function(e,t){function r(e,t){return e%=t,0<=e?e:e+t}Object.defineProperty(t,"__esModule",{value:!0}),t.C_INFINITY=Number.POSITIVE_INFINITY,t.C_PI=Math.PI,t.C_2PI=2*t.C_PI,t.C_PI_BY_2=t.C_PI/2,t.C_RAD_TO_256=128/t.C_PI,t.C_256_TO_RAD=t.C_PI/128,t.C_DEG_TO_256=256/360,t.C_DEG_TO_RAD=t.C_PI/180,t.C_SQRT2=1.414213562,t.C_SQRT2_INV=1/t.C_SQRT2;var n=1/Math.LN2;t.positiveMod=r,t.radToByte=function(e){return r(e*t.C_RAD_TO_256,256)},t.degToByte=function(e){return r(e*t.C_DEG_TO_256,256)},t.log2=function(e){return Math.log(e)*n},t.sqr=function(e){return e*e},t.clamp=function(e,t,r){return Math.min(Math.max(e,t),r)},t.interpolate=function(e,t,r){return e*(1-r)+t*r},t.between=function(e,t,r){return e>=t&&e<=r||e>=r&&e<=t}})},"esri/layers/vectorTiles/views/vectorTiles/IndexMemoryBuffer":function(){define(["require","exports","../../core/tsSupport/extendsHelper","../../core/tsSupport/decorateHelper","./MemoryBuffer"],function(e,t,r,n,i){Object.defineProperty(t,"__esModule",{value:!0}),e=function(e){function t(){return e.call(this,12)||this}return r(t,e),t.prototype.add=function(e,t,r){var n=this.array;n.push(e),n.push(t),n.push(r)},t}(i),t.TriangleIndexBuffer=e,i=function(e){function t(){return e.call(this,4)||this}return r(t,e),t.prototype.add=function(e){this.array.push(e)},t}(i),t.PointElementMemoryBuffer=i})},"esri/layers/vectorTiles/views/vectorTiles/MemoryBuffer":function(){define(["require","exports"],function(e,t){return function(){function e(e){this._array=[],0>=e&&console.error("strideInBytes must be positive!"),this._stride=e}return Object.defineProperty(e.prototype,"array",{get:function(){return this._array},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"index",{get:function(){return 4*this._array.length/this._stride},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"itemSize",{get:function(){return this._stride},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"sizeInBytes",{get:function(){return 4*this._array.length},enumerable:!0,configurable:!0}),e.prototype.reset=function(){this.array.length=0},e.prototype.toBuffer=function(){return new Uint32Array(this._array).buffer},e.i1616to32=function(e,t){return 65535&e|t<<16},e.i8888to32=function(e,t,r,n){return 255&e|(255&t)<<8|(255&r)<<16|n<<24},e.i8816to32=function(e,t,r){return 255&e|(255&t)<<8|r<<16},e}()})},"esri/layers/vectorTiles/views/vectorTiles/LineBucket":function(){define("require exports ../../core/tsSupport/extendsHelper ../../core/tsSupport/decorateHelper ../2d/engine/webgl/LineTess ./Bucket ./style/StyleLayer".split(" "),function(e,t,r,n,i,o,s){var a=new i.Tessellator({distanceAlongCorrection:!0});return function(e){function t(t,r,n,o){if(r=e.call(this,t,r)||this,r.extrudeVectorsDoubleBuffer=[i.allocExtrudeVectors(),i.allocExtrudeVectors()],r.firstExtrudeVectors=i.allocExtrudeVectors(),r.recycledTriangleBridge=i.allocTriangles(20),r.recycledTrianglePie=i.allocTriangles(20),t.hasDataDrivenLine!==n.isDataDriven())throw Error("incompatible line buffer");return r._lineVertexBuffer=n,r._lineIndexBuffer=o,r}return r(t,e),Object.defineProperty(t.prototype,"lineIndexStart",{get:function(){return this._lineIndexStart},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"lineIndexCount",{get:function(){return this._lineIndexCount},enumerable:!0,configurable:!0}),t.prototype.assignBufferInfo=function(e){e._lineIndexStart=this._lineIndexStart,e._lineIndexCount=this._lineIndexCount},t.prototype.processFeatures=function(e,t){this._lineIndexStart=this._lineIndexBuffer.index,this._lineIndexCount=0;var r=this.layer,n=this.zoom,i=r.hasDataDrivenLine;e&&e.setExtent(this.layerExtent);for(var o=r.getPaintValue("line-pattern",n),a=[1,1,1,1],c=1,u=1,l=0,f=this._features;l<f.length;l++){var h=f[l],p=new s.LineLayout(r,n,h);!o&&r.hasDataDrivenColor&&(a=r.getPaintValue("line-color",n,h)),r.hasDataDrivenOpacity&&(c=r.getPaintValue("line-opacity",n,h)),r.hasDataDrivenWidth&&(u=r.getPaintValue("line-width",n,h));var d=void 0;i&&(d={color:a,opacity:c,size:Math.max(Math.min(u,256),0)},0>=d.size||0>=d.opacity||0>=d.color[3])||(h=h.getGeometry(e),this._processFeature(p,h,d))}},t.prototype._processFeature=function(e,t,r){if(t)for(var n=t.length,i=0;i<n;i++)this._processGeometry(t[i],e,r)},t.prototype._processGeometry=function(e,t,r){if(!(2>e.length)){for(var n=e[0],o=e[e.length-1],s=o.x-n.x,o=o.y-n.y,n=1e-6>s*s+o*o,a=e[0],c=1;c<e.length;)s=e[c].x-a.x,o=e[c].y-a.y,1e-6>s*s+o*o?e.splice(c,1):(a=e[c],++c);if(!(2>e.length)){this.vertices=e,this.verticesLen=e.length,this.isClosed=n,this.cap=t.cap,this.join=t.join,this.almostParallelRads=.05,this.veryShallowRads=.1,this.miterSafeRads=i.MITER_SAFE_RADS,this.miterLimitMag=Math.min(t.miterLimit,i.SYSTEM_MAG_LIMIT),this.roundLimitRads=Math.min(t.roundLimit,.5),this.newRoundJoinsSafeRads=2.3,t=this._lineIndexBuffer.index;for(var s=0,u=void 0,o=this.verticesLen,a=0;a<o;++a){var c=e[a],l=e[(a+o-1)%o],f=n&&this._isClipEdge(l,c),l=u===this.extrudeVectorsDoubleBuffer[a%2]?this.extrudeVectorsDoubleBuffer[(a+1)%2]:this.extrudeVectorsDoubleBuffer[a%2];a<o-1||!n||this.hasPattern?(this._computeExtrudeVectors(l,a),this._writeGPUVertices(c.x,c.y,s,l,r),!l.capCenter||n&&a===o-1||this._writeGPUPieElements(l,f),n&&0===a&&!this.hasPattern&&i.copyExtrudeVectors(this.firstExtrudeVectors,l)):i.copyExtrudeVectors(l,this.firstExtrudeVectors),u&&this._writeGPUBridgeElements(u,l,f),a<o-1&&(u=e[a+1],c=i.length([u.x-c.x,u.y-c.y]),s+=c),u=l}this._lineIndexCount+=3*(this._lineIndexBuffer.index-t)}}},t.prototype._computeExtrudeVectors=function(e,t){var r=this.vertices,n=this.verticesLen,o=this.isClosed,s=r[t],a=[void 0,void 0],c=[void 0,void 0];if(0<t&&t<n-1){var u=r[(t+n-1)%n],l=r[(t+1)%n];i.normalize(a,[s.x-u.x,s.y-u.y]),i.normalize(c,[l.x-s.x,l.y-s.y])}else if(0===t)l=r[(t+1)%n],i.normalize(c,[l.x-s.x,l.y-s.y]),o?(r=r[n-2],i.normalize(a,[s.x-r.x,s.y-r.y])):a=c;else{if(t!==n-1)return void console.error("Vertex index 'i' out of range.");u=r[(t+n-1)%n],i.normalize(a,[s.x-u.x,s.y-u.y]),o?(r=r[1],i.normalize(c,[r.x-s.x,r.y-s.y])):c=a}o||0!==t?o||t!==n-1?this._computeJoinExtrudeVectors(e,a,c):this._computeCapExtrudeVectors(e,a,c,i.CapPosition.END):this._computeCapExtrudeVectors(e,a,c,i.CapPosition.START)},t.prototype._computeCapExtrudeVectors=function(e,t,r,n){0===this.cap?a.buttCap(e,t,r):1===this.cap?a.roundCap(e,t,r,n,i.getNumberOfSlices(Math.PI),n===i.CapPosition.START?-1:1):2===this.cap?a.squareCap(e,t,r,n):a.buttCap(e,t,r)},t.prototype._computeJoinExtrudeVectors=function(e,t,r){var n=i.getRads(t,r);if(n>Math.PI-this.almostParallelRads)a.rectJoin(e,t,r);else if(0===this.join&&n>=this.veryShallowRads)a.bevelJoin(e,t,r,1);else if(1===this.join&&n>=this.veryShallowRads){var o=i.getNumberOfSlices(n);n<this.newRoundJoinsSafeRads?2>o||n<this.roundLimitRads?a.bevelJoin(e,t,r,1):a.roundJoin(e,t,r,o):a.unitRoundJoin(e,t,r,o)}else n<this.almostParallelRads?a.fastMiterJoin(e,t,r):n<this.miterSafeRads?a.miterJoin(e,t,r):a.bevelJoin(e,t,r,this.miterLimitMag)},t.prototype._writeGPUVertices=function(e,t,r,n,i){for(var o=0;o<n.vectors.count;++o){var s=n.vectors.items[o].vector[0],a=n.vectors.items[o].vector[1],c=n.vectors.items[o].texCoords[0],u=n.vectors.items[o].texCoords[1];n.vectors.items[o].base=this._lineVertexBuffer.index,this._lineVertexBuffer.add(e,t,s,a,c,u,r,i)}},t.prototype._writeGPUBridgeElements=function(e,t,r){if(a.bridge(this.recycledTriangleBridge,e,t),!r)for(e=0;e<this.recycledTriangleBridge.count;++e)t=this.recycledTriangleBridge.items[e],this._lineIndexBuffer.add(t.v1.base,t.v2.base,t.v3.base)},t.prototype._writeGPUPieElements=function(e,t){if(a.pie(this.recycledTrianglePie,e),!t)for(var r=0;r<this.recycledTrianglePie.count;++r){var n=this.recycledTrianglePie.items[r];this._lineIndexBuffer.add(n.v1.base,n.v2.base,n.v3.base)}},t.prototype._isClipEdge=function(e,t){return e.x===t.x?-64>=e.x||4160<=e.x:e.y===t.y&&(-64>=e.y||4160<=e.y)},t}(o)})},"esri/layers/vectorTiles/views/2d/engine/webgl/LineTess":function(){define(["require","exports"],function(e,t){function r(e){var t,r={items:[],count:0};for(t=0;t<e;++t)r.items.push(void 0);return r}function n(e,t){x.vector[0]=e.vector[0],x.vector[1]=e.vector[1],x.texCoords[0]=e.texCoords[0],x.texCoords[1]=e.texCoords[1],x.direction[0]=e.direction[0],x.direction[1]=e.direction[1],x.base=e.base,e.vector[0]=t.vector[0],e.vector[1]=t.vector[1],e.texCoords[0]=t.texCoords[0],e.texCoords[1]=t.texCoords[1],e.direction[0]=t.direction[0],e.direction[1]=t.direction[1],e.base=t.base,t.vector[0]=x.vector[0],t.vector[1]=x.vector[1],t.texCoords[0]=x.texCoords[0],t.texCoords[1]=x.texCoords[1],t.direction[0]=x.direction[0],t.direction[1]=x.direction[1],t.base=x.base}function i(e,t){return e[0]*t[0]+e[1]*t[1]}function o(e){return Math.sqrt(i(e,e))}function s(e,t){var r=o(t);return e[0]=t[0]/r,e[1]=t[1]/r,e}function a(e,t){return e[0]=-t[1],e[1]=t[0],e}function c(e,t){return e[0]*t[1]-e[1]*t[0]}function u(e,t){return e[0]=-t[0],e[1]=-t[1],e}function l(e,t,r){return e[0]=t[0]*r,e[1]=t[1]*r,e}function f(e,t,r){return e[0]=t[0]+r[0],e[1]=t[1]+r[1],e}function h(e,t){var r=i(e,t);return.999<r?0:-.999>r?Math.PI:Math.acos(r)}function p(e,t,r,n,i){if(0===n)e.count=0;else{var s=o(t),a=l(b[0],t,1/s);r=l(b[1],r,1/s),a=h(a,r),a=(i?-1:1)*a/n,i=Math.cos(a),a=Math.sin(a),r=t[0];var c=t[1];for(t=0;t<n-1;++t)s=r,r=i*s-a*c,c=a*s+i*c,e.items[t][0]=r,e.items[t][1]=c;e.count=n-1}}function d(e){var t,r=e.count,n=Math.floor(r/2);for(t=0;t<n;++t){var i=e.items[t];e.items[t]=e.items[r-t-1],e.items[r-t-1]=i}}Object.defineProperty(t,"__esModule",{value:!0});var y;!function(e){e[e.ENTRY=1]="ENTRY",e[e.EXIT=2]="EXIT",e[e.CAP=3]="CAP"}(y=t.VectorRole||(t.VectorRole={}));var m;!function(e){e[e.START=1]="START",e[e.END=2]="END"}(m=t.CapPosition||(t.CapPosition={})),t.SYSTEM_MAG_LIMIT=3.8,t.MITER_SAFE_RADS=2*Math.acos(1/t.SYSTEM_MAG_LIMIT);var v=t.SYSTEM_MAG_LIMIT*t.SYSTEM_MAG_LIMIT,g=16/(2*Math.PI);t.allocTriangles=function(e){var t,r={items:[],count:0};for(t=0;t<e;++t)r.items.push({v1:{vector:[void 0,void 0],texCoords:[void 0,void 0],direction:[void 0,void 0]},v2:{vector:[void 0,void 0],texCoords:[void 0,void 0],direction:[void 0,void 0]},v3:{vector:[void 0,void 0],texCoords:[void 0,void 0],direction:[void 0,void 0]}});return r},t.allocExtrudeVectors=function(){var e,t={items:[],count:0};for(e=0;30>e;++e)t.items.push({vector:[void 0,void 0],texCoords:[void 0,void 0],direction:[void 0,void 0]});return e={},e[y.ENTRY]=r(20),e[y.EXIT]=r(20),e[y.CAP]=r(20),{vectors:t,lists:e}},t.copyExtrudeVectors=function(e,t){var r;for(r=0;r<t.vectors.count;++r)e.vectors.items[r].vector[0]=t.vectors.items[r].vector[0],e.vectors.items[r].vector[1]=t.vectors.items[r].vector[1],e.vectors.items[r].texCoords[0]=t.vectors.items[r].texCoords[0],e.vectors.items[r].texCoords[1]=t.vectors.items[r].texCoords[1],e.vectors.items[r].direction[0]=t.vectors.items[r].direction[0],e.vectors.items[r].direction[1]=t.vectors.items[r].direction[1],e.vectors.items[r].base=t.vectors.items[r].base;e.vectors.count=t.vectors.count;var n=t.lists[y.ENTRY],i=e.lists[y.ENTRY],o=t.lists[y.EXIT],s=e.lists[y.EXIT],a=t.lists[y.CAP],c=e.lists[y.CAP];for(r=0;r<n.count;++r)i.items[r]=n.items[r];for(i.count=n.count,r=0;r<o.count;++r)s.items[r]=o.items[r];for(s.count=o.count,r=0;r<a.count;++r)c.items[r]=a.items[r];c.count=a.count,e.capCenter=t.capCenter};var x={vector:[void 0,void 0],texCoords:[void 0,void 0],direction:[void 0,void 0],base:void 0};t.swapExtrudeVectors=n;var _,b=[];for(_=0;32>_;++_)b.push([void 0,void 0]);var w=function(e){var t,r={items:[],count:0};for(t=0;t<16;++t)r.items.push([void 0,void 0]);return r}();t.length=o,t.normalize=s,t.getNumberOfSlices=function(e){return Math.max(Math.round(e*g),1)},t.getRads=h,t.reverse=d;var I=[void 0,void 0],k=[void 0,void 0],D=[0,0],C=[0,0],T=[0,0],S=[0,0],A=Math.cos(Math.PI/4),P=Math.sin(Math.PI/4),j=Math.sqrt(2);_=function(){function e(e){this._distanceAlongCorrection=e.distanceAlongCorrection}return e.prototype.bridge=function(e,t,r){var i=t.vectors;t=t.lists[y.EXIT];var o,s,a=r.vectors,c=r.lists[y.ENTRY];if(t.count===c.count+1)r=t.items,o=i.items,s=c.items,a=a.items;else if(c.count===t.count+1)r=c.items,o=a.items,s=t.items,a=i.items;else{if(t.count!==c.count)return console.error("Cannot bridge "+t.count+" to "+c.count+"."),void(e.count=0);r=c.items,o=a.items,s=t.items,a=i.items}for(i=t.count+c.count-2,e.count=i,I[0]=r,I[1]=s,k[0]=o,k[1]=a,t=0;t<i;++t)r=e.items[t],o=(t+0)%2,o=k[o][I[o][Math.floor((t+0)/2)]],r.v1.vector[0]=o.vector[0],r.v1.vector[1]=o.vector[1],r.v1.texCoords[0]=o.texCoords[0],r.v1.texCoords[1]=o.texCoords[1],r.v1.direction[0]=o.direction[0],r.v1.direction[1]=o.direction[1],r.v1.base=o.base,o=(t+1)%2,o=k[o][I[o][Math.floor((t+1)/2)]],r.v2.vector[0]=o.vector[0],r.v2.vector[1]=o.vector[1],r.v2.texCoords[0]=o.texCoords[0],r.v2.texCoords[1]=o.texCoords[1],r.v2.direction[0]=o.direction[0],r.v2.direction[1]=o.direction[1],r.v2.base=o.base,o=(t+2)%2,o=k[o][I[o][Math.floor((t+2)/2)]],r.v3.vector[0]=o.vector[0],r.v3.vector[1]=o.vector[1],r.v3.texCoords[0]=o.texCoords[0],r.v3.texCoords[1]=o.texCoords[1],r.v3.direction[0]=o.direction[0],r.v3.direction[1]=o.direction[1],r.v3.base=o.base,o=r.v1.base&&r.v1.base.point||D,s=r.v2.base&&r.v2.base.point||D,a=r.v3.base&&r.v3.base.point||D,C[0]=o[0]+r.v1.vector[0],C[1]=o[1]+r.v1.vector[1],T[0]=s[0]+r.v2.vector[0],T[1]=s[1]+r.v2.vector[1],S[0]=a[0]+r.v3.vector[0],S[1]=a[1]+r.v3.vector[1],0>(T[0]-C[0])*(S[1]-C[1])-(S[0]-C[0])*(T[1]-C[1])||n(r.v2,r.v3)},e.prototype.pie=function(e,t){if(0===t.lists[y.CAP].count)e.count=0;else if(1===t.lists[y.CAP].count)console.error("A single vector is not enough to define a pie."),e.count=0;else{e.count=t.lists[y.CAP].count-1;var r;for(r=0;r<e.count;++r){var i=e.items[r],o=t.vectors.items[t.lists[y.CAP].items[r]];i.v1.vector[0]=o.vector[0],i.v1.vector[1]=o.vector[1],i.v1.texCoords[0]=o.texCoords[0],i.v1.texCoords[1]=o.texCoords[1],i.v1.direction[0]=o.direction[0],i.v1.direction[1]=o.direction[1],i.v1.base=o.base,o=t.vectors.items[t.lists[y.CAP].items[r+1]],i.v2.vector[0]=o.vector[0],i.v2.vector[1]=o.vector[1],i.v2.texCoords[0]=o.texCoords[0],i.v2.texCoords[1]=o.texCoords[1],i.v2.direction[0]=o.direction[0],i.v2.direction[1]=o.direction[1],i.v2.base=o.base,o=t.vectors.items[t.capCenter],i.v3.vector[0]=o.vector[0],i.v3.vector[1]=o.vector[1],i.v3.texCoords[0]=o.texCoords[0],i.v3.texCoords[1]=o.texCoords[1],i.v3.direction[0]=o.direction[0],i.v3.direction[1]=o.direction[1],i.v3.base=o.base;var o=i.v1.base&&i.v1.base.point||D,s=i.v2.base&&i.v2.base.point||D,a=i.v3.base&&i.v3.base.point||D;C[0]=o[0]+i.v1.vector[0],C[1]=o[1]+i.v1.vector[1],T[0]=s[0]+i.v2.vector[0],T[1]=s[1]+i.v2.vector[1],S[0]=a[0]+i.v3.vector[0],S[1]=a[1]+i.v3.vector[1],0>(T[0]-C[0])*(S[1]-C[1])-(S[0]-C[0])*(T[1]-C[1])||n(i.v2,i.v3)}}},e.prototype.buttCap=function(e,t,r){this.fastMiterJoin(e,t,r)},e.prototype.roundCap=function(e,t,r,n,i,o){void 0===o&&(o=0),this.fastMiterJoin(e,t,r),r=n===m.START?0:1,n=n===m.START?1:0,e.capCenter=e.vectors.count,t=e.vectors.items[e.capCenter],t.vector[0]=0,t.vector[1]=0,t.texCoords[0]=0,t.texCoords[1]=0,t.direction[0]=0,t.direction[1]=0,++e.vectors.count,p(w,e.vectors.items[r].vector,e.vectors.items[n].vector,i,!1),i=e.vectors.count,t=e.lists[y.CAP],t.items[0]=r,r=e.vectors.items[r].texCoords[1];var s,a=e.vectors.items[n].texCoords[1];for(s=0;s<w.count;++s){var c=o*(1-Math.abs(w.count/2-s)/(w.count/2)),u=r+s/(w.count-1)*(a-r),l=w.items[s],f=e.vectors.items[i+s];f.vector[0]=l[0],f.vector[1]=l[1],f.texCoords[0]=c,f.texCoords[1]=u,f.direction[0]=0,f.direction[1]=0,t.items[s+1]=i+s}t.items[w.count+1]=n,t.count=w.count+2,e.vectors.count=i+w.count},e.prototype.squareCap=function(e,t,r,n){this.fastMiterJoin(e,t,r),t=n===m.START?0:1,r=n===m.START?1:0;var i=b[0],o=b[1],s=b[2],a=b[3];n=b[4];var c=e.vectors.items[t].vector;i[0]=A*c[0]-P*c[1],i[1]=P*c[0]+A*c[1],l(a,i,j),o[0]=A*i[0]-P*i[1],o[1]=P*i[0]+A*i[1],s[0]=A*o[0]-P*o[1],s[1]=P*o[0]+A*o[1],l(n,s,j),t=e.vectors.items[t],t.vector[0]=a[0],t.vector[1]=a[1],e=e.vectors.items[r],e.vector[0]=n[0],e.vector[1]=n[1]},e.prototype.fastMiterJoin=function(e,t,r){r=a(b[0],r),t=u(b[1],r);var n=e.vectors.items[0];n.vector[0]=r[0],n.vector[1]=r[1],n.texCoords[0]=0,n.texCoords[1]=-1,n.direction[0]=0,n.direction[1]=0,r=e.vectors.items[1],r.vector[0]=t[0],r.vector[1]=t[1],r.texCoords[0]=0,r.texCoords[1]=1,r.direction[0]=0,r.direction[1]=0,e.vectors.count=2,t=e.lists[y.ENTRY],t.items[0]=0,t.items[1]=1,t.count=2,t=e.lists[y.EXIT],t.items[0]=0,t.items[1]=1,t.count=2,e.lists[y.CAP].count=0,e.capCenter=void 0},e.prototype.miterJoin=function(e,t,r){var n=a(b[0],t),o=a(b[1],r),c=b[2];c[0]=n[0]+o[0],c[1]=n[1]+o[1],o=s(b[3],c),n=i(o,n),o=l(b[4],o,1/n),n=u(b[5],o),this._distanceAlongCorrection?(c=e.vectors.items[0],c.vector[0]=o[0],c.vector[1]=o[1],c.texCoords[0]=0,c.texCoords[1]=-1,c.direction[0]=t[0],c.direction[1]=t[1],c=e.vectors.items[1],c.vector[0]=n[0],c.vector[1]=n[1],c.texCoords[0]=0,c.texCoords[1]=1,c.direction[0]=t[0],c.direction[1]=t[1],t=e.vectors.items[2],t.vector[0]=o[0],t.vector[1]=o[1],t.texCoords[0]=0,t.texCoords[1]=-1,t.direction[0]=r[0],t.direction[1]=r[1],t=e.vectors.items[3],t.vector[0]=n[0],t.vector[1]=n[1],t.texCoords[0]=0,t.texCoords[1]=1,t.direction[0]=r[0],t.direction[1]=r[1],e.vectors.count=4,r=e.lists[y.ENTRY],r.items[0]=0,r.items[1]=1,r.count=2,r=e.lists[y.EXIT],r.items[0]=2,r.items[1]=3):(c=e.vectors.items[0],c.vector[0]=o[0],c.vector[1]=o[1],c.texCoords[0]=0,c.texCoords[1]=-1,c.direction[0]=0,c.direction[1]=0,c=e.vectors.items[1],c.vector[0]=n[0],c.vector[1]=n[1],c.texCoords[0]=0,c.texCoords[1]=1,c.direction[0]=0,c.direction[1]=0,e.vectors.count=2,r=e.lists[y.ENTRY],r.items[0]=0,r.items[1]=1,r.count=2,r=e.lists[y.EXIT],r.items[0]=0,r.items[1]=1),r.count=2,e.lists[y.CAP].count=0,e.capCenter=void 0},e.prototype.bevelJoin=function(e,t,r,n){var o=n*n;n=c(t,r);var h=0<n?[-1,1]:[1,-1],p=h[0],h=h[1],m=0<n?u(b[0],a(b[1],t)):a(b[2],t),g=0<n?u(b[3],a(b[4],r)):a(b[5],r),x=b[6];x[0]=m[0]+g[0],x[1]=m[1]+g[1];var _=s(b[7],x),w=u(b[8],_),I=i(_,m),x=c(_,m),k=Math.abs(x/I),x=1+k*k,D=x<v?[k,this._distanceAlongCorrection]:[Math.sqrt(v-1),!0],C=D[0],D=D[1],T=x<o?[k,this._distanceAlongCorrection]:[Math.sqrt(o-1),!0],k=T[0];(T=T[1])&&D?(D=e.vectors.items[0],f(D.vector,u(b[9],m),l(b[10],u(b[11],t),C)),D.texCoords[0]=0,D.texCoords[1]=p,D.direction[0]=this._distanceAlongCorrection?t[0]:0,D.direction[1]=this._distanceAlongCorrection?t[1]:0,w=e.vectors.items[1],f(w.vector,u(b[12],g),l(b[13],r,C)),w.texCoords[0]=0,w.texCoords[1]=p,w.direction[0]=this._distanceAlongCorrection?r[0]:0,w.direction[1]=this._distanceAlongCorrection?r[1]:0,p=e.vectors.items[2],p.vector[0]=0,p.vector[1]=0,p.texCoords[0]=0,p.texCoords[1]=0,p.direction[0]=0,p.direction[1]=0,p=e.vectors.items[3],f(p.vector,m,l(b[14],t,k)),p.texCoords[0]=0,p.texCoords[1]=h,p.direction[0]=this._distanceAlongCorrection?t[0]:0,p.direction[1]=this._distanceAlongCorrection?t[1]:0,t=e.vectors.items[4],f(t.vector,g,l(b[15],u(b[16],r),k)),t.texCoords[0]=0,t.texCoords[1]=h,t.direction[0]=this._distanceAlongCorrection?r[0]:0,t.direction[1]=this._distanceAlongCorrection?r[1]:0,e.vectors.count=5,r=e.lists[y.ENTRY],r.items[0]=0,r.items[1]=2,r.items[2]=3,r.count=3,r=e.lists[y.EXIT],r.items[0]=1,r.items[1]=2,r.items[2]=4,r.count=3,x<o?(o=e.lists[y.CAP],o.count=0,e.capCenter=void 0):(o=e.lists[y.CAP],o.items[0]=3,o.items[1]=4,o.count=2,e.capCenter=2)):!T&&D?(D=e.vectors.items[0],f(D.vector,u(b[9],m),l(b[10],u(b[11],t),C)),D.texCoords[0]=0,D.texCoords[1]=p,D.direction[0]=this._distanceAlongCorrection?t[0]:0,D.direction[1]=this._distanceAlongCorrection?t[1]:0,w=e.vectors.items[1],f(w.vector,u(b[12],g),l(b[13],r,C)),w.texCoords[0]=0,w.texCoords[1]=p,w.direction[0]=this._distanceAlongCorrection?r[0]:0,w.direction[1]=this._distanceAlongCorrection?r[1]:0,p=e.vectors.items[2],p.vector[0]=0,p.vector[1]=0,p.texCoords[0]=0,p.texCoords[1]=0,p.direction[0]=0,p.direction[1]=0,p=e.vectors.items[3],l(p.vector,_,1/I),p.texCoords[0]=0,p.texCoords[1]=h,p.direction[0]=0,p.direction[1]=0,e.vectors.count=4,r=e.lists[y.ENTRY],r.items[0]=0,r.items[1]=2,r.items[2]=3,r.count=3,r=e.lists[y.EXIT],r.items[0]=1,r.items[1]=2,r.items[2]=3,r.count=3,e.lists[y.CAP].count=0,e.capCenter=void 0):T&&!D?(D=e.vectors.items[0],l(D.vector,w,1/I),D.texCoords[0]=0,D.texCoords[1]=p,D.direction[0]=0,D.direction[1]=0,w=e.vectors.items[1],w.vector[0]=0,w.vector[1]=0,w.texCoords[0]=0,w.texCoords[1]=0,w.direction[0]=0,w.direction[1]=0,p=e.vectors.items[2],f(p.vector,m,l(b[9],t,k)),p.texCoords[0]=0,p.texCoords[1]=h,p.direction[0]=this._distanceAlongCorrection?t[0]:0,p.direction[1]=this._distanceAlongCorrection?t[1]:0,p=e.vectors.items[3],f(p.vector,g,l(b[10],u(b[11],r),k)),p.texCoords[0]=0,p.texCoords[1]=h,p.direction[0]=this._distanceAlongCorrection?r[0]:0,p.direction[1]=this._distanceAlongCorrection?r[1]:0,e.vectors.count=4,r=e.lists[y.ENTRY],r.items[0]=0,r.items[1]=1,r.items[2]=2,r.count=3,r=e.lists[y.EXIT],r.items[0]=0,r.items[1]=1,r.items[2]=3,r.count=3,x<o?(o=e.lists[y.CAP],o.count=0,e.capCenter=void 0):(o=e.lists[y.CAP],o.items[0]=2,o.items[1]=3,o.count=2,e.capCenter=1)):T||D||(D=e.vectors.items[0],l(D.vector,w,1/I),D.texCoords[0]=0,D.texCoords[1]=p,D.direction[0]=0,D.direction[1]=0,w=e.vectors.items[1],l(w.vector,_,1/I),w.texCoords[0]=0,w.texCoords[1]=h,w.direction[0]=0,w.direction[1]=0,e.vectors.count=2,r=e.lists[y.ENTRY],r.items[0]=0,r.items[1]=1,r.count=2,r=e.lists[y.EXIT],r.items[0]=0,r.items[1]=1,r.count=2,e.lists[y.CAP].count=0,e.capCenter=void 0),0>n&&(d(e.lists[y.ENTRY]),d(e.lists[y.EXIT]))},e.prototype.roundJoin=function(e,t,r,n){var o=c(t,r),h=0<o?[-1,1]:[1,-1],m=h[0],h=h[1],g=0<o?u(b[0],a(b[1],t)):a(b[2],t),x=0<o?u(b[3],a(b[4],r)):a(b[5],r),_=b[6];_[0]=g[0]+x[0],_[1]=g[1]+x[1];var I=s(b[7],_),_=u(b[8],I),k=i(I,g),I=c(I,g),I=Math.abs(I/k),D=1+I*I<v?[I,this._distanceAlongCorrection]:[Math.sqrt(v-1),!0],I=D[0];for(D[1]?(D=e.vectors.items[0],D.vector[0]=g[0],D.vector[1]=g[1],D.texCoords[0]=0,D.texCoords[1]=h,D.direction[0]=0,D.direction[1]=0,D=e.vectors.items[1],D.vector[0]=x[0],D.vector[1]=x[1],D.texCoords[0]=0,D.texCoords[1]=h,D.direction[0]=0,D.direction[1]=0,D=e.vectors.items[2],f(D.vector,u(b[9],g),l(b[10],u(b[11],t),I)),D.texCoords[0]=0,D.texCoords[1]=m,D.direction[0]=this._distanceAlongCorrection?t[0]:0,D.direction[1]=this._distanceAlongCorrection?t[1]:0,t=e.vectors.items[3],f(t.vector,u(b[12],x),l(b[13],r,I)),t.texCoords[0]=0,t.texCoords[1]=m,t.direction[0]=this._distanceAlongCorrection?r[0]:0,t.direction[1]=this._distanceAlongCorrection?r[1]:0,r=e.vectors.items[4],r.vector[0]=0,r.vector[1]=0,r.texCoords[0]=0,r.texCoords[1]=0,r.direction[0]=0,r.direction[1]=0,e.vectors.count=5,r=e.lists[y.ENTRY],r.items[0]=2,r.items[1]=4,r.items[2]=0,r.count=3,r=e.lists[y.EXIT],r.items[0]=3,r.items[1]=4,r.items[2]=1,r.count=3,e.capCenter=4):(D=e.vectors.items[0],D.vector[0]=g[0],D.vector[1]=g[1],D.texCoords[0]=0,D.texCoords[1]=h,D.direction[0]=0,D.direction[1]=0,D=e.vectors.items[1],D.vector[0]=x[0],D.vector[1]=x[1],D.texCoords[0]=0,D.texCoords[1]=h,D.direction[0]=0,D.direction[1]=0,D=e.vectors.items[2],l(D.vector,_,1/k),D.texCoords[0]=0,D.texCoords[1]=m,D.direction[0]=0,D.direction[1]=0,t=e.vectors.items[3],t.vector[0]=0,t.vector[1]=0,t.texCoords[0]=0,t.texCoords[1]=0,t.direction[0]=0,t.direction[1]=0,e.vectors.count=4,r=e.lists[y.ENTRY],r.items[0]=2,r.items[1]=3,r.items[2]=0,r.count=3,r=e.lists[y.EXIT],r.items[0]=2,r.items[1]=3,r.items[2]=1,r.count=3,e.capCenter=3),p(w,g,x,n,0>o),n=e.vectors.count,g=e.lists[y.CAP],x=g.items[0]=0;x<w.count;++x)r=w.items[x],m=e.vectors.items[n+x],m.vector[0]=r[0],m.vector[1]=r[1],m.texCoords[0]=0,m.texCoords[1]=h,m.direction[0]=0,m.direction[1]=0,g.items[x+1]=n+x;g.items[w.count+1]=1,g.count=w.count+2,e.vectors.count=n+w.count,0>o&&(d(e.lists[y.ENTRY]),d(e.lists[y.EXIT]))},e.prototype.unitRoundJoin=function(e,t,r,n){var i=c(t,r),o=0<i?[-1,1]:[1,-1],s=o[0],o=o[1];t=0<i?u(b[0],a(b[1],t)):a(b[2],t),r=0<i?u(b[3],a(b[4],r)):a(b[5],r);var l=e.vectors.items[0];for(l.vector[0]=t[0],l.vector[1]=t[1],l.texCoords[0]=0,l.texCoords[1]=o,l.direction[0]=0,l.direction[1]=0,l=e.vectors.items[1],l.vector[0]=r[0],l.vector[1]=r[1],l.texCoords[0]=0,l.texCoords[1]=o,l.direction[0]=0,l.direction[1]=0,l=e.vectors.items[2],u(l.vector,t),l.texCoords[0]=0,l.texCoords[1]=s,l.direction[0]=0,l.direction[1]=0,l=e.vectors.items[3],u(l.vector,r),l.texCoords[0]=0,l.texCoords[1]=s,l.direction[0]=0,l.direction[1]=0,s=e.vectors.items[4],s.vector[0]=0,s.vector[1]=0,s.texCoords[0]=0,s.texCoords[1]=0,s.direction[0]=0,s.direction[1]=0,e.vectors.count=5,s=e.lists[y.ENTRY],s.items[0]=2,s.items[1]=0,s.count=2,s=e.lists[y.EXIT],s.items[0]=3,s.items[1]=1,s.count=2,e.capCenter=4,p(w,t,r,n,0>i),n=e.vectors.count,t=e.lists[y.CAP],s=t.items[0]=0;s<w.count;++s)r=w.items[s],l=e.vectors.items[n+s],l.vector[0]=r[0],l.vector[1]=r[1],l.texCoords[0]=0,l.texCoords[1]=o,l.direction[0]=0,l.direction[1]=0,t.items[s+1]=n+s;t.items[w.count+1]=1,t.count=w.count+2,e.vectors.count=n+w.count,0>i&&(d(e.lists[y.ENTRY]),d(e.lists[y.EXIT]))},e.prototype.rectJoin=function(e,t,r){t=a(b[0],t),r=a(b[1],r);var n=e.vectors.items[0];n.vector[0]=t[0],n.vector[1]=t[1],n.texCoords[0]=0,n.texCoords[1]=-1,n.direction[0]=0,n.direction[1]=0,n=e.vectors.items[1],n.vector[0]=r[0],n.vector[1]=r[1],n.texCoords[0]=0,n.texCoords[1]=-1,n.direction[0]=0,n.direction[1]=0,n=e.vectors.items[2],u(n.vector,t),n.texCoords[0]=0,n.texCoords[1]=1,n.direction[0]=0,n.direction[1]=0,t=e.vectors.items[3],u(t.vector,r),t.texCoords[0]=0,t.texCoords[1]=1,t.direction[0]=0,t.direction[1]=0,e.vectors.count=4,t=e.lists[y.ENTRY],t.items[0]=0,t.items[1]=2,t.count=2,t=e.lists[y.EXIT],t.items[0]=1,t.items[1]=3,t.count=2,e.capCenter=void 0},e}(),t.Tessellator=_})},"esri/layers/vectorTiles/views/vectorTiles/style/StyleLayer":function(){define("require exports ../../../core/tsSupport/extendsHelper ../../../core/tsSupport/decorateHelper ./Filter ./StyleDefinition ./StyleProperty".split(" "),function(e,t,r,n,i,o,s){Object.defineProperty(t,"__esModule",{value:!0}),e=function(){function e(e,t,r){switch(this.type=e,this.id=t.id,this.source=t.source,this.sourceLayer=t["source-layer"],this.minzoom=t.minzoom,this.maxzoom=t.maxzoom,this.filter=t.filter,this.layout=t.layout,this.paint=t.paint,this.z=r,e){case 0:this._layoutDefinition=o.StyleDefinition.backgroundLayoutDefinition,this._paintDefinition=o.StyleDefinition.backgroundPaintDefinition;break;case 1:this._layoutDefinition=o.StyleDefinition.fillLayoutDefinition,this._paintDefinition=o.StyleDefinition.fillPaintDefinition;break;case 2:this._layoutDefinition=o.StyleDefinition.lineLayoutDefinition,this._paintDefinition=o.StyleDefinition.linePaintDefinition;break;case 3:this._layoutDefinition=o.StyleDefinition.symbolLayoutDefinition,this._paintDefinition=o.StyleDefinition.symbolPaintDefinition;break;case 4:this._layoutDefinition=o.StyleDefinition.circleLayoutDefinition,this._paintDefinition=o.StyleDefinition.circlePaintDefinition}this._layoutProperties=this._parseLayout(this.layout),this._paintProperties=this._parsePaint(this.paint)}return e.prototype.getFeatureFilter=function(){return void 0!==this._featureFilter?this._featureFilter:this._featureFilter=i.createFilter(this.filter)},e.prototype.getLayoutProperty=function(e){var t=this._layoutProperties;if(t)return t[e]},e.prototype.getPaintProperty=function(e){var t=this._paintProperties;if(t)return t[e]},e.prototype.getLayoutValue=function(e,t,r){
var n,i=this._layoutProperties;return i&&(i=i[e])&&(n=i.getValue(t,r)),e=this._layoutDefinition[e],void 0===n&&(n=e.default),"enum"===e.type&&(n=e.values.indexOf(n)),n},e.prototype.getPaintValue=function(e,t,r){var n,i=this._paintProperties;return i&&(i=i[e])&&(n=i.getValue(t,r)),e=this._paintDefinition[e],void 0===n&&(n=e.default),"enum"===e.type&&(n=e.values.indexOf(n)),n},e.prototype._parseLayout=function(e){var t,r={};for(t in e){var n=this._layoutDefinition[t];n&&(r[t]=new s(t,n,e[t]))}return r},e.prototype._parsePaint=function(e){var t,r={};for(t in e){var n=this._paintDefinition[t];n&&(r[t]=new s(t,n,e[t]))}return r},e}(),t.StyleLayer=e,n=function(e){function t(t,r,n){return e.call(this,t,r,n)||this}return r(t,e),t}(e),t.BackgroundStyleLayer=n,n=function(e){function t(t,r,n){return t=e.call(this,t,r,n)||this,r=t.getPaintProperty("fill-color"),t.hasDataDrivenColor=!!r&&r.isDataDriven,r=t.getPaintProperty("fill-opacity"),t.hasDataDrivenOpacity=!!r&&r.isDataDriven,t.hasDataDrivenFill=t.hasDataDrivenColor||t.hasDataDrivenOpacity,r=t.getPaintProperty("fill-outline-color"),t.outlineUsesFillColor=!r,t.hasDataDrivenOutlineColor=!!r&&r.isDataDriven,t.hasDataDrivenOutline=(r?t.hasDataDrivenOutlineColor:t.hasDataDrivenColor)||t.hasDataDrivenOpacity,t}return r(t,e),t}(e),t.FillStyleLayer=n,n=function(e){function t(t,r,n){return t=e.call(this,t,r,n)||this,r=t.getPaintProperty("line-color"),t.hasDataDrivenColor=!!r&&r.isDataDriven,r=t.getPaintProperty("line-opacity"),t.hasDataDrivenOpacity=!!r&&r.isDataDriven,r=t.getPaintProperty("line-width"),t.hasDataDrivenWidth=!!r&&r.isDataDriven,t.hasDataDrivenLine=t.hasDataDrivenColor||t.hasDataDrivenOpacity||t.hasDataDrivenWidth,t}return r(t,e),t}(e),t.LineStyleLayer=n,n=function(e){function t(t,r,n){return t=e.call(this,t,r,n)||this,r=t.getPaintProperty("icon-color"),t.hasDataDrivenIconColor=!!r&&r.isDataDriven,r=t.getPaintProperty("icon-opacity"),t.hasDataDrivenIconOpacity=!!r&&r.isDataDriven,r=t.getLayoutProperty("icon-size"),t.hasDataDrivenIconSize=!!r&&r.isDataDriven,t.hasDataDrivenIcon=t.hasDataDrivenIconColor||t.hasDataDrivenIconOpacity||t.hasDataDrivenIconSize,r=t.getPaintProperty("text-color"),t.hasDataDrivenTextColor=!!r&&r.isDataDriven,r=t.getPaintProperty("text-opacity"),t.hasDataDrivenTextOpacity=!!r&&r.isDataDriven,r=t.getLayoutProperty("text-size"),t.hasDataDrivenTextSize=!!r&&r.isDataDriven,t.hasDataDrivenText=t.hasDataDrivenTextColor||t.hasDataDrivenTextOpacity||t.hasDataDrivenTextSize,t}return r(t,e),t}(e),t.SymbolStyleLayer=n,e=function(e){function t(t,r,n){return t=e.call(this,t,r,n)||this,r=t.getPaintProperty("circle-radius"),t.hasDataDrivenRadius=!!r&&r.isDataDriven,r=t.getPaintProperty("circle-color"),t.hasDataDrivenColor=!!r&&r.isDataDriven,r=t.getPaintProperty("circle-opacity"),t.hasDataDrivenOpacity=!!r&&r.isDataDriven,r=t.getPaintProperty("circle-stroke-width"),t.hasDataDrivenStrokeWidth=!!r&&r.isDataDriven,r=t.getPaintProperty("circle-stroke-color"),t.hasDataDrivenStrokeColor=!!r&&r.isDataDriven,r=t.getPaintProperty("circle-stroke-opacity"),t.hasDataDrivenStrokeOpacity=!!r&&r.isDataDriven,r=t.getPaintProperty("circle-blur"),t.hasDataDrivenBlur=!!r&&r.isDataDriven,t}return r(t,e),t}(e),t.CircleStyleLayer=e,e=function(){return function(e,t,r){this.cap=e.getLayoutValue("line-cap",t,r),this.join=e.getLayoutValue("line-join",t,r),this.miterLimit=e.getLayoutValue("line-miter-limit",t,r),this.roundLimit=e.getLayoutValue("line-round-limit",t,r)}}(),t.LineLayout=e,e=function(){return function(e,t,r,n){this.allowOverlap=e.getLayoutValue("icon-allow-overlap",t,n),this.ignorePlacement=e.getLayoutValue("icon-ignore-placement",t,n),this.optional=e.getLayoutValue("icon-optional",t,n),this.rotationAlignment=e.getLayoutValue("icon-rotation-alignment",t,n),this.size=e.getLayoutValue("icon-size",t,n),this.rotate=e.getLayoutValue("icon-rotate",t,n),this.padding=e.getLayoutValue("icon-padding",t,n),this.keepUpright=e.getLayoutValue("icon-keep-upright",t,n),this.offset=e.getLayoutValue("icon-offset",t,n),2===this.rotationAlignment&&(this.rotationAlignment=r?0:1)}}(),t.IconLayout=e,e=function(){return function(e,t,r,n){this.allowOverlap=e.getLayoutValue("text-allow-overlap",t,n),this.ignorePlacement=e.getLayoutValue("text-ignore-placement",t,n),this.optional=e.getLayoutValue("text-optional",t,n),this.rotationAlignment=e.getLayoutValue("text-rotation-alignment",t,n),this.fontArray=e.getLayoutValue("text-font",t,n),this.maxWidth=e.getLayoutValue("text-max-width",t,n),this.lineHeight=e.getLayoutValue("text-line-height",t,n),this.letterSpacing=e.getLayoutValue("text-letter-spacing",t,n),this.justify=e.getLayoutValue("text-justify",t,n),this.anchor=e.getLayoutValue("text-anchor",t,n),this.maxAngle=e.getLayoutValue("text-max-angle",t,n),this.size=e.getLayoutValue("text-size",t,n),this.rotate=e.getLayoutValue("text-rotate",t,n),this.padding=e.getLayoutValue("text-padding",t,n),this.keepUpright=e.getLayoutValue("text-keep-upright",t,n),this.transform=e.getLayoutValue("text-transform",t,n),this.offset=e.getLayoutValue("text-offset",t,n),2===this.rotationAlignment&&(this.rotationAlignment=r?0:1)}}(),t.TextLayout=e})},"esri/layers/vectorTiles/views/vectorTiles/style/Filter":function(){define(["require","exports"],function(e,t){return function(){function e(t,r,n){this._op=t,"$type"===r?(this._val=n instanceof Array?n.map(function(t){return e._types.indexOf(t)}):e._types.indexOf(n),this._op+=11):(this._key=r,this._val=n)}return e.prototype.filter=function(e){switch(this._op){case 0:return this._val;case 1:return e.values[this._key]===this._val;case 2:return e.values[this._key]!==this._val;case 3:return e.values[this._key]<this._val;case 4:return e.values[this._key]>this._val;case 5:return e.values[this._key]<=this._val;case 6:return e.values[this._key]>=this._val;case 7:return-1!==this._val.indexOf(e.values[this._key]);case 8:return-1===this._val.indexOf(e.values[this._key]);case 9:for(var t=0,r=this._val;t<r.length;t++){var n=r[t];if(n.filter(e))return!0}return!1;case 10:for(t=0,r=this._val;t<r.length;t++)if(n=r[t],!n.filter(e))return!1;return!0;case 11:for(t=0,r=this._val;t<r.length;t++)if(n=r[t],n.filter(e))return!1;return!0;case 12:return e.type===this._val;case 13:return e.type!==this._val;case 14:return e.type<this._val;case 15:return e.type>this._val;case 16:return e.type>=this._val;case 17:return e.type<=this._val;case 18:return-1!==this._val.indexOf(e.type);case 19:return-1===this._val.indexOf(e.type);case 20:return void 0!==e.values[this._key];case 21:return void 0===e.values[this._key]}},e.createFilter=function(t){if(!t)return new e(0,void 0,!0);var r=t[0];if(1>=t.length)return new e(0,void 0,"any"!==r);switch(r){case"==":return new e(1,t[1],t[2]);case"!=":return new e(2,t[1],t[2]);case">":return new e(4,t[1],t[2]);case"<":return new e(3,t[1],t[2]);case">=":return new e(6,t[1],t[2]);case"<=":return new e(5,t[1],t[2]);case"in":return new e(7,t[1],t.slice(2));case"!in":return new e(8,t[1],t.slice(2));case"any":return new e(9,void 0,t.slice(1).map(e.createFilter.bind(this)));case"all":return new e(10,void 0,t.slice(1).map(e.createFilter.bind(this)));case"none":return new e(11,void 0,t.slice(1).map(e.createFilter.bind(this)));case"has":return new e(20,t[1],void 0);case"!has":return new e(21,t[1],void 0);default:throw Error("invalid operator: "+r)}},e._types=["Unknown","Point","LineString","Polygon"],e}()})},"esri/layers/vectorTiles/views/vectorTiles/style/StyleDefinition":function(){define(["require","exports"],function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(){}return e.backgroundLayoutDefinition={visibility:{type:"enum",values:["visible","none"],default:"visible"}},e.fillLayoutDefinition={visibility:{type:"enum",values:["visible","none"],default:"visible"}},e.lineLayoutDefinition={visibility:{type:"enum",values:["visible","none"],default:"visible"},"line-cap":{type:"enum",values:["butt","round","square"],default:"butt"},"line-join":{type:"enum",values:["bevel","round","miter"],default:"miter"},"line-miter-limit":{type:"number",default:2},"line-round-limit":{type:"number",default:1.05}},e.symbolLayoutDefinition={visibility:{type:"enum",values:["visible","none"],default:"visible"},"symbol-placement":{type:"enum",values:["point","line"],default:"point"},"symbol-spacing":{type:"number",minimum:1,default:250},"symbol-avoid-edges":{type:"boolean",default:!1},"icon-image":{type:"string"},"icon-allow-overlap":{type:"boolean",default:!1},"icon-ignore-placement":{type:"boolean",default:!1},"icon-optional":{type:"boolean",default:!1},"icon-rotation-alignment":{type:"enum",values:["map","viewport","auto"],default:"auto"},"icon-size":{type:"number",minimum:0,default:1},"icon-rotate":{type:"number",default:0},"icon-padding":{type:"number",minimum:0,default:2},"icon-keep-upright":{type:"boolean",default:!1},"icon-offset":{type:"array",value:"number",length:2,default:[0,0]},"text-field":{type:"string"},"text-rotation-alignment":{type:"enum",values:["map","viewport","auto"],default:"auto"},"text-font":{type:"array",value:"string",default:["Open Sans Regular","Arial Unicode MS Regular"]},"text-size":{type:"number",minimum:0,default:16},"text-max-width":{type:"number",minimum:0,default:10},"text-line-height":{type:"number",default:1.2},"text-letter-spacing":{type:"number",default:0},"text-justify":{type:"enum",values:["left","center","right"],default:"center"},"text-anchor":{type:"enum",values:"center left right top bottom top-left top-right bottom-left bottom-right".split(" "),default:"center"},"text-max-angle":{type:"number",minimum:0,default:45},"text-rotate":{type:"number",default:0},"text-padding":{type:"number",minimum:0,default:2},"text-keep-upright":{type:"boolean",default:!0},"text-transform":{type:"enum",values:["none","uppercase","lowercase"],default:"none"},"text-offset":{type:"array",value:"number",length:2,default:[0,0]},"text-allow-overlap":{type:"boolean",default:!1},"text-ignore-placement":{type:"boolean",default:!1},"text-optional":{type:"boolean",default:!1}},e.circleLayoutDefinition={visibility:{type:"enum",values:["visible","none"],default:"visible"}},e.backgroundPaintDefinition={"background-opacity":{type:"number",minimum:0,maximum:1,default:1},"background-color":{type:"color",default:[0,0,0,1]},"background-pattern":{type:"string"}},e.fillPaintDefinition={"fill-opacity":{type:"number",minimum:0,maximum:1,default:1},"fill-antialias":{type:"boolean",default:!0},"fill-color":{type:"color",default:[0,0,0,1]},"fill-outline-color":{type:"color",default:[0,0,0,0]},"fill-translate":{type:"array",value:"number",length:2,default:[0,0]},"fill-translate-anchor":{type:"enum",values:["map","viewport"],default:"map"},"fill-pattern":{type:"string"}},e.linePaintDefinition={"line-opacity":{type:"number",minimum:0,maximum:1,default:1},"line-color":{type:"color",default:[0,0,0,1]},"line-translate":{type:"array",value:"number",length:2,default:[0,0]},"line-translate-anchor":{type:"enum",values:["map","viewport"],default:"map"},"line-width":{type:"number",minimum:0,default:1},"line-gap-width":{type:"number",minimum:0,default:0},"line-offset":{type:"number",default:0},"line-blur":{type:"number",minimum:0,default:0},"line-dasharray":{type:"array",value:"number",default:[]},"line-pattern":{type:"string"}},e.symbolPaintDefinition={"icon-opacity":{type:"number",minimum:0,maximum:1,default:1},"icon-color":{type:"color",default:[0,0,0,1]},"icon-halo-color":{type:"color",default:[0,0,0,0]},"icon-halo-width":{type:"number",minimum:0,default:0},"icon-halo-blur":{type:"number",minimum:0,default:0},"icon-translate":{type:"array",value:"number",length:2,default:[0,0]},"icon-translate-anchor":{type:"enum",values:["map","viewport"],default:"map"},"text-opacity":{type:"number",minimum:0,maximum:1,default:1},"text-color":{type:"color",default:[0,0,0,1]},"text-halo-color":{type:"color",default:[0,0,0,0]},"text-halo-width":{type:"number",minimum:0,default:0},"text-halo-blur":{type:"number",minimum:0,default:0},"text-translate":{type:"array",value:"number",length:2,default:[0,0]},"text-translate-anchor":{type:"enum",values:["map","viewport"],default:"map"}},e.rasterPaintDefinition={"raster-opacity":{type:"number",minimum:0,maximum:1,default:1},"raster-hue-rotate":{type:"number",default:0},"raster-brightness-min":{type:"number",minimum:0,maximum:1,default:0},"raster-brightness-max":{type:"number",minimum:0,maximum:1,default:1},"raster-saturation":{type:"number",minimum:-1,maximum:1,default:0},"raster-contrast":{type:"number",minimum:-1,maximum:1,default:0},"raster-fade-duration":{type:"number",minimum:0,default:300}},e.circlePaintDefinition={"circle-opacity":{type:"number",minimum:0,maximum:1,default:1},"circle-radius":{type:"number",minimum:0,default:5},"circle-color":{type:"color",default:[0,0,0,1]},"circle-blur":{type:"number",minimum:0,default:0},"circle-translate":{type:"array",value:"number",length:2,default:[0,0]},"circle-translate-anchor":{type:"enum",values:["map","viewport"],default:"map"},"circle-stroke-width":{type:"number",minimum:0,default:0},"circle-stroke-color":{type:"color",default:[0,0,0,1]},"circle-stroke-opacity":{type:"number",minimum:0,maximum:1,default:1}},e}();t.StyleDefinition=r})},"esri/layers/vectorTiles/views/vectorTiles/style/StyleProperty":function(){define(["require","exports","../../../Color","../GeometryUtils"],function(e,t,r,n){return function(){function e(t,r,n){switch(this.isDataDriven=!1,r.type){case"number":t=!0;break;case"color":t=!0,n=e._parseColor(n);break;case"array":t="number"===r.value;break;default:t=!1}null==n&&(n=r.default),t&&"interval"===n.type&&(t=!1);var i=n&&n.stops&&0<n.stops.length;if(i)for(var o=0,s=n.stops;o<s.length;o++){var a=s[o];a[1]=this._validate(a[1],r)}if(this.isDataDriven=!!n&&!!n.property)if(void 0!==n.default&&(n.default=this._validate(n.default,r)),i)switch(n.type){case"identity":this.getValue=this._buildIdentity(n,r);break;case"categorical":this.getValue=this._buildCategorical(n,r);break;default:this.getValue=t?this._buildInterpolate(n,r):this._buildInterval(n,r)}else this.getValue=this._buildIdentity(n,r);else i?this.getValue=t?this._buildZoomInterpolate(n):this._buildZoomInterval(n):(n=this._validate(n,r),this.getValue=this._buildSimple(n))}return e.prototype._validate=function(e,t){if("number"===t.type){if(e<t.minimum)return t.minimum;if(e>t.maximum)return t.maximum}return e},e.prototype._buildSimple=function(e){return function(){return e}},e.prototype._buildIdentity=function(t,r){var n=this;return function(i,o){var s;return o&&(s=o.values[t.property],"color"===r.type&&(s=e._parseColor(s))),void 0===s&&(s=t.default),void 0!==s?n._validate(s,r):r.default}},e.prototype._buildCategorical=function(e,t){var r=this;return function(n,i){var o;return i&&(o=i.values[e.property]),o=r._categorical(o,e.stops),void 0!==o?o:void 0!==e.default?e.default:t.default}},e.prototype._buildInterval=function(e,t){var r=this;return function(n,i){var o;return i&&(o=i.values[e.property]),"number"==typeof o?r._interval(o,e.stops):void 0!==e.default?e.default:t.default}},e.prototype._buildInterpolate=function(e,t){var r=this;return function(n,i){var o;return i&&(o=i.values[e.property]),"number"==typeof o?r._interpolate(o,e.stops,e.base||1):void 0!==e.default?e.default:t.default}},e.prototype._buildZoomInterpolate=function(e){var t=this;return function(r){return t._interpolate(r,e.stops,e.base||1)}},e.prototype._buildZoomInterval=function(e){var t=this;return function(r){return t._interval(r,e.stops)}},e.prototype._categorical=function(e,t){for(var r=t.length,n=0;n<r;n++)if(t[n][0]===e)return t[n][1]},e.prototype._interval=function(e,t){for(var r=t.length,n=0,i=0;i<r&&t[i][0]<=e;i++)n=i;return t[n][1]},e.prototype._interpolate=function(e,t,r){for(var i,o,s=t.length,a=0;a<s;a++){var c=t[a];if(!(c[0]<=e)){o=c;break}i=c}if(i&&o){if(a=o[0]-i[0],e-=i[0],r=1===r?e/a:(Math.pow(r,e)-1)/(Math.pow(r,a)-1),Array.isArray(i[1])){for(i=i[1],o=o[1],e=[],a=0;a<i.length;a++)e.push(n.interpolate(i[a],o[a],r));return e}return n.interpolate(i[1],o[1],r)}return i?i[1]:o?o[1]:void 0},e._isEmpty=function(e){for(var t in e)if(e.hasOwnProperty(t))return!1;return!0},e._parseColor=function(t){return Array.isArray(t)?t:"string"!=typeof t?(t&&t.default&&(t.default=e._parseColor(t.default)),t&&t.stops&&(t.stops=t.stops.map(function(t){return[t[0],e._parseColor(t[1])]})),t):(t=new r(t),this._isEmpty(t)?void 0:r.toUnitRGBA(t))},e}()})},"esri/layers/vectorTiles/Color":function(){define(["./core/declare","./core/accessorSupport/ensureType","dojo/colors"],function(e,t,r){function n(e){return Math.max(0,Math.min(t.ensureInteger(e),255))}var i=e([r],{declaredClass:"esri.Color",toJSON:function(){return[n(this.r),n(this.g),n(this.b),1<this.a?this.a:n(255*this.a)]},clone:function(){return new i(this.toRgba())}});i.toJSON=function(e){return e&&[n(e.r),n(e.g),n(e.b),1<e.a?e.a:n(255*e.a)]},i.fromJSON=function(e){return e&&new i([e[0],e[1],e[2],e[3]/255])},i.toUnitRGB=function(e){return[e.r/255,e.g/255,e.b/255]},i.toUnitRGBA=function(e){return[e.r/255,e.g/255,e.b/255,null!=e.a?e.a:1]};var o="named blendColors fromRgb fromHex fromArray fromString".split(" ");for(e=0;e<o.length;e++)i[o[e]]=r[o[e]];return i.named.rebeccapurple=[102,51,153],i})},"esri/layers/vectorTiles/core/declare":function(){define(["require","exports","dojo/_base/declare"],function(e,t,r){function n(e,t){return e&&!Array.isArray(e)&&"function"!=typeof e&&(t=e,e=null),e=e||[],t=t||{},i([this].concat(e),t)}function i(e,t){e&&!Array.isArray(e)&&"function"!=typeof e&&(t=e,e=null),"function"==typeof e?e=[e]:e||(e=[]),t=t||{};var i,a;for(i=0,a=o.length;i<a;i++)o[i](e,t);var c=r(e,t);for(c.createSubclass=n,i=0,a=s.length;i<a;i++)s[i](c);return c}var o=[],s=[];return function(e){e.hasMixin=function(e,t){var r;if(!(r=Array.isArray(e)?e.reduce(function(e,t){return t._meta?e.concat(t._meta.bases):e},[]):e._meta?e._meta.bases:e))return!1;if("string"==typeof t)for(var n=r.length-1;0<=n;n--)if(r[n].prototype.declaredClass===t)return!0;return-1!==r.indexOf(t)},e.safeMixin=function(e,t){return r.safeMixin(e,t)},e.before=function(e){o.push(e)},e.after=function(e){s.push(e)}}(i||(i={})),i})},"dojo/_base/declare":function(){define(["./kernel","../has","./lang"],function(e,t,r){function n(e,t){throw Error("declare"+(t?" "+t:"")+": "+e)}function i(e,t){for(var r,i,o,s,a,c=[],u=[{cls:0,refs:[]}],l={},f=1,h=e.length,p=0;p<h;++p){for((r=e[p])?"[object Function]"!=w.call(r)&&n("mixin #"+p+" is not a callable constructor.",t):n("mixin #"+p+" is unknown. Did you use dojo.require to pull it in?",t),i=r._meta?r._meta.bases:[r],o=0,r=i.length-1;0<=r;--r)s=i[r].prototype,s.hasOwnProperty("declaredClass")||(s.declaredClass="uniqName_"+I++),s=s.declaredClass,l.hasOwnProperty(s)||(l[s]={count:0,refs:[],cls:i[r]},++f),s=l[s],o&&o!==s&&(s.refs.push(o),++o.count),o=s;++o.count,u[0].refs.push(o)}for(;u.length;){for(o=u.pop(),c.push(o.cls),--f;a=o.refs,1==a.length;){if(!(o=a[0])||--o.count){o=0;break}c.push(o.cls),--f}if(o)for(p=0,h=a.length;p<h;++p)o=a[p],--o.count||u.push(o)}return f&&n("can't build consistent linearization",t),r=e[0],c[0]=r?r._meta&&r===c[c.length-r._meta.bases.length]?r._meta.bases.length:1:0,c}function o(e,t,r,i){var o,s,a,c,u,l,f=this._inherited=this._inherited||{};if("string"==typeof e&&(o=e,e=t,t=r,r=i),"function"==typeof e)a=e,e=t,t=r;else try{a=e.callee}catch(e){if(!(e instanceof TypeError))throw e;n("strict mode inherited() requires the caller function to be passed before arguments",this.declaredClass)}if((o=o||a.nom)||n("can't deduce a name to call inherited()",this.declaredClass),r=i=0,c=this.constructor._meta,i=c.bases,l=f.p,"constructor"!=o){if(f.c!==a&&(l=0,u=i[0],c=u._meta,c.hidden[o]!==a)){(s=c.chains)&&"string"==typeof s[o]&&n("calling chained method with inherited: "+o,this.declaredClass);do{if(c=u._meta,s=u.prototype,c&&(s[o]===a&&s.hasOwnProperty(o)||c.hidden[o]===a))break}while(u=i[++l]);l=u?l:-1}if(u=i[++l])if(s=u.prototype,u._meta&&s.hasOwnProperty(o))r=s[o];else{a=b[o];do{if(s=u.prototype,(r=s[o])&&(u._meta?s.hasOwnProperty(o):r!==a))break}while(u=i[++l])}r=u&&r||b[o]}else{if(f.c!==a&&(l=0,(c=i[0]._meta)&&c.ctor!==a)){for((s=c.chains)&&"manual"===s.constructor||n("calling chained constructor with inherited",this.declaredClass);(u=i[++l])&&(!(c=u._meta)||c.ctor!==a););l=u?l:-1}for(;(u=i[++l])&&!(r=(c=u._meta)?c.ctor:u););r=u&&r}if(f.c=r,f.p=l,r)return!0===t?r:r.apply(this,t||e)}function s(e,t,r){return"string"==typeof e?"function"==typeof t?this.__inherited(e,t,r,!0):this.__inherited(e,t,!0):"function"==typeof e?this.__inherited(e,t,!0):this.__inherited(e,!0)}function a(e,t,r,n){var i=this.getInherited(e,t,r);if(i)return i.apply(this,n||r||t||e)}function c(e){for(var t=this.constructor._meta.bases,r=0,n=t.length;r<n;++r)if(t[r]===e)return!0;return this instanceof e}function u(e,n){for(var i in n)"constructor"!=i&&n.hasOwnProperty(i)&&(e[i]=n[i]);if(t("bug-for-in-skips-shadowed"))for(var o=r._extraNames,s=o.length;s;)"constructor"!=(i=o[--s])&&n.hasOwnProperty(i)&&(e[i]=n[i])}function l(e){return g.safeMixin(this.prototype,e),this}function f(e,t){return e instanceof Array||"function"==typeof e||(t=e,e=void 0),t=t||{},e=e||[],g([this].concat(e),t)}function h(e,t){return function(){var r,n,i=arguments,o=i,s=i[0];n=e.length;var a;if(!(this instanceof i.callee))return v(i);if(t&&(s&&s.preamble||this.preamble))for(a=Array(e.length),a[0]=i,r=0;(s=i[0])&&(s=s.preamble)&&(i=s.apply(this,i)||i),s=e[r].prototype,(s=s.hasOwnProperty("preamble")&&s.preamble)&&(i=s.apply(this,i)||i),++r!=n;)a[r]=i;for(r=n-1;0<=r;--r)s=e[r],(s=(n=s._meta)?n.ctor:s)&&s.apply(this,a?a[r]:i);(s=this.postscript)&&s.apply(this,o)}}function p(e,t){return function(){var r=arguments,n=r,i=r[0];if(!(this instanceof r.callee))return v(r);t&&(i&&(i=i.preamble)&&(n=i.apply(this,n)||n),(i=this.preamble)&&i.apply(this,n)),e&&e.apply(this,r),(i=this.postscript)&&i.apply(this,r)}}function d(e){return function(){var t,r,n=arguments,i=0;if(!(this instanceof n.callee))return v(n);for(;t=e[i];++i)if(t=(r=t._meta)?r.ctor:t){t.apply(this,n);break}(t=this.postscript)&&t.apply(this,n)}}function y(e,t,r){return function(){var n,i,o=0,s=1;for(r&&(o=t.length-1,s=-1);n=t[o];o+=s)i=n._meta,(n=(i?i.hidden:n.prototype)[e])&&n.apply(this,arguments)}}function m(e){return x.prototype=e.prototype,e=new x,x.prototype=null,e}function v(e){var t=e.callee,r=m(t);return t.apply(r,e),r}function g(e,a,v){"string"!=typeof e&&(v=a,a=e,e=""),v=v||{};var x,I,D,C,T,S,A,P=1,j=a;if("[object Array]"==w.call(a)?(S=i(a,e),D=S[0],P=S.length-D,a=S[P]):(S=[0],a?"[object Function]"==w.call(a)?(D=a._meta,S=S.concat(D?D.bases:a)):n("base class is not a callable constructor.",e):null!==a&&n("unknown base class. Did you use dojo.require to pull it in?",e)),a)for(I=P-1;x=m(a),I;--I)D=S[I],(D._meta?u:_)(x,D.prototype),C=t("csp-restrictions")?function(){}:new Function,C.superclass=a,C.prototype=x,a=x.constructor=C;else x={};for(g.safeMixin(x,v),D=v.constructor,D!==b.constructor&&(D.nom="constructor",x.constructor=D),I=P-1;I;--I)(D=S[I]._meta)&&D.chains&&(A=_(A||{},D.chains));if(x["-chains-"]&&(A=_(A||{},x["-chains-"])),a&&a.prototype&&a.prototype["-chains-"]&&(A=_(A||{},a.prototype["-chains-"])),D=!A||!A.hasOwnProperty("constructor"),S[0]=C=A&&"manual"===A.constructor?d(S):1==S.length?p(v.constructor,D):h(S,D),C._meta={bases:S,hidden:v,chains:A,parents:j,ctor:v.constructor},C.superclass=a&&a.prototype,C.extend=l,C.createSubclass=f,C.prototype=x,x.constructor=C,x.getInherited=s,x.isInstanceOf=c,x.inherited=k,x.__inherited=o,e&&(x.declaredClass=e,r.setObject(e,C)),A)for(T in A)x[T]&&"string"==typeof A[T]&&"constructor"!=T&&(D=x[T]=y(T,S,"after"===A[T]),D.nom=T);return C}var x,_=r.mixin,b=Object.prototype,w=b.toString,I=0;x=t("csp-restrictions")?function(){}:new Function;var k=e.config.isDebug?a:o;return e.safeMixin=g.safeMixin=function(e,n){var i,o;for(i in n)(o=n[i])===b[i]&&i in b||"constructor"==i||("[object Function]"==w.call(o)&&(o.nom=i),e[i]=o);if(t("bug-for-in-skips-shadowed")&&n)for(var s=r._extraNames,a=s.length;a;)i=s[--a],(o=n[i])===b[i]&&i in b||"constructor"==i||("[object Function]"==w.call(o)&&(o.nom=i),e[i]=o);return e},e.declare=g})},"esri/layers/vectorTiles/core/accessorSupport/ensureType":function(){define(["require","exports","../Logger"],function(e,t,r){function n(e,t){return t.isInstanceOf?t.isInstanceOf(e):t instanceof e}function i(e){return null==e?e:new Date(e)}function o(e){return null==e?e:!!e}function s(e){return null==e?e:e.toString()}function a(e){return null==e?e:parseFloat(e)}function c(e){return null==e?e:Math.round(parseFloat(e))}function u(e){return e&&e.constructor&&void 0!==e.constructor._meta}function l(e,t){return null!=t&&e&&!n(e,t)}function f(e,t){return l(e,t)&&(u(t)?g.error("Accessor#set","Assigning an instance of '"+(t.declaredClass||"unknown")+"' which is not a subclass of '"+(e&&e.prototype&&e.prototype.declaredClass||"unknown")+"'"):t=new e(t)),t}function h(e){switch(e){case Number:return a;case x:return c;case Boolean:return o;case String:return s;case Date:return i;default:return f.bind(null,e)}}function p(e,t){var r=h(e);return 1===arguments.length?r:r(t)}function d(e,t){return 1===arguments.length?d.bind(null,e):t?Array.isArray(t)?t.map(e):[e(t)]:t}function y(e,t,r){return 0!==t&&Array.isArray(r)?r.map(function(r){return y(e,t-1,r)}):e(r)}function m(e,t,r){if(2===arguments.length)return m.bind(null,e,t);if(!r)return r;r=y(e,t,r);for(var n=t,i=r;0<n&&Array.isArray(i);)n--,i=i[0];if(void 0!==i)for(i=0;i<n;i++)r=[r];return r}function v(e,t){if(2===arguments.length)return v(e).call(null,t);var r,n={},i=[],o=[];for(r in e.typeMap){var s=e.typeMap[r];n[r]=p(s),i.push(s&&s.prototype&&s.prototype.declaredClass||"unknown"),o.push(r)}var a="string"==typeof e.key?function(t){return t[e.key]}:e.key;return function(t){if(e.base&&!l(e.base,t))return t;var r=a(t)||e.defaultKeyValue,s=n[r];if(!s)return g.error("Accessor#set","Invalid property value, value needs to be one of '"+i.join("', '")+"', or a plain object that can auto-cast (having .type = '"+o.join("', '")+"')"),null;if(!l(e.typeMap[r],t))return t;if("string"!=typeof e.key||u(t))return s(t);var c,r={};for(c in t)c!==e.key&&(r[c]=t[c]);return s(r)}}Object.defineProperty(t,"__esModule",{value:!0});var g=r.getLogger("esri.core.Accessor");t.isInstanceOf=n,t.ensureDate=i,t.ensureBoolean=o,t.ensureString=s,t.ensureNumber=a,t.ensureInteger=c,t.isClassedType=u,t.requiresType=l,t.ensureClass=f,t.ensureType=p,t.ensureArrayTyped=d,t.ensureArray=function(e,t){return 1===arguments.length?d(p.bind(null,e)):d(p.bind(null,e),t)},t.ensureNArrayTyped=m,t.ensureNArray=function(e,t,r){return 2===arguments.length?m(p.bind(null,e),t):m(p.bind(null,e),t,r)},t.ensureOneOfType=v;var x=function(){return function(){}}();t.Integer=x,t.default=p})},"esri/layers/vectorTiles/core/Logger":function(){define(["require","exports","dojo/has"],function(e,t,r){var n={info:0,warn:1,error:2};return e=function(){function e(t){void 0===t&&(t={}),this.module=t.module||"",this.writer=t.writer||null,this.level=t.level||null,null!=t.enabled&&(this.enabled=!!t.enabled),e._loggers[this.module]=this,-1!==(t=this.module.lastIndexOf("."))&&(this.parent=e.getLogger(this.module.slice(0,t)))}return e.prototype.log=function(e){for(var t=[],r=1;r<arguments.length;r++)t[r-1]=arguments[r];this._isEnabled()&&this._matchLevel(e)&&(r=this._inheritedWriter())&&r.apply(void 0,[e,this.module].concat(t))},e.prototype.error=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this.log.apply(this,["error"].concat(e))},e.prototype.warn=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this.log.apply(this,["warn"].concat(e))},e.prototype.info=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this.log.apply(this,["info"].concat(e))},e.prototype.getLogger=function(t){return e.getLogger(this.module+"."+t)},e.getLogger=function(t){var r=e._loggers[t];return r||(r=new e({module:t})),r},e.prototype._parentWithMember=function(e,t){for(var r=this;r&&null==r[e];)r=r.parent;return r?r[e]:t},e.prototype._inheritedWriter=function(){return this._parentWithMember("writer",this._consoleWriter)},e.prototype._consoleWriter=function(e,t){for(var r=[],n=2;n<arguments.length;n++)r[n-2]=arguments[n];console[e].apply(console,["["+t+"]"].concat(r))},e.prototype._matchLevel=function(e){return n[this._parentWithMember("level","error")]<=n[e]},e.prototype._isEnabled=function(){return this._parentWithMember("enabled",!0)},e._loggers={},e}(),t=e.getLogger("esri"),r("dojo-debug-messages")?t.level="info":t.level="warn",e})},"dojo/colors":function(){define(["./_base/kernel","./_base/lang","./_base/Color","./_base/array"],function(e,t,r,n){var i={};t.setObject("dojo.colors",i);var o=function(e,t,r){0>r&&++r,1<r&&--r;var n=6*r;return 1>n?e+(t-e)*n:1>2*r?t:2>3*r?e+(t-e)*(2/3-r)*6:e};e.colorFromRgb=r.fromRgb=function(e,t){var i=e.toLowerCase().match(/^(rgba?|hsla?)\(([\s\.\-,%0-9]+)\)/);if(i){var s=i[2].split(/\s*,\s*/),a=s.length,i=i[1];if("rgb"==i&&3==a||"rgba"==i&&4==a)return i=s[0],"%"==i.charAt(i.length-1)?(i=n.map(s,function(e){return 2.56*parseFloat(e)}),4==a&&(i[3]=s[3]),r.fromArray(i,t)):r.fromArray(s,t);if("hsl"==i&&3==a||"hsla"==i&&4==a){var i=(parseFloat(s[0])%360+360)%360/360,c=parseFloat(s[1])/100,u=parseFloat(s[2])/100,c=.5>=u?u*(c+1):u+c-u*c,u=2*u-c,i=[256*o(u,c,i+1/3),256*o(u,c,i),256*o(u,c,i-1/3),1];return 4==a&&(i[3]=s[3]),r.fromArray(i,t)}}return null};var s=function(e,t,r){return e=Number(e),isNaN(e)?r:e<t?t:e>r?r:e};return r.prototype.sanitize=function(){return this.r=Math.round(s(this.r,0,255)),this.g=Math.round(s(this.g,0,255)),this.b=Math.round(s(this.b,0,255)),this.a=s(this.a,0,1),this},i.makeGrey=r.makeGrey=function(e,t){return r.fromArray([e,e,e,t])},t.mixin(r.named,{aliceblue:[240,248,255],antiquewhite:[250,235,215],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],blanchedalmond:[255,235,205],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],oldlace:[253,245,230],
olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],whitesmoke:[245,245,245],yellowgreen:[154,205,50]}),r})},"dojo/_base/Color":function(){define(["./kernel","./lang","./array","./config"],function(e,t,r,n){var i=e.Color=function(e){e&&this.setColor(e)};return i.named={black:[0,0,0],silver:[192,192,192],gray:[128,128,128],white:[255,255,255],maroon:[128,0,0],red:[255,0,0],purple:[128,0,128],fuchsia:[255,0,255],green:[0,128,0],lime:[0,255,0],olive:[128,128,0],yellow:[255,255,0],navy:[0,0,128],blue:[0,0,255],teal:[0,128,128],aqua:[0,255,255],transparent:n.transparentColor||[0,0,0,0]},t.extend(i,{r:255,g:255,b:255,a:1,_set:function(e,t,r,n){this.r=e,this.g=t,this.b=r,this.a=n},setColor:function(e){return t.isString(e)?i.fromString(e,this):t.isArray(e)?i.fromArray(e,this):(this._set(e.r,e.g,e.b,e.a),e instanceof i||this.sanitize()),this},sanitize:function(){return this},toRgb:function(){return[this.r,this.g,this.b]},toRgba:function(){return[this.r,this.g,this.b,this.a]},toHex:function(){return"#"+r.map(["r","g","b"],function(e){return e=this[e].toString(16),2>e.length?"0"+e:e},this).join("")},toCss:function(e){var t=this.r+", "+this.g+", "+this.b;return(e?"rgba("+t+", "+this.a:"rgb("+t)+")"},toString:function(){return this.toCss(!0)}}),i.blendColors=e.blendColors=function(e,t,n,o){var s=o||new i;return r.forEach(["r","g","b","a"],function(r){s[r]=e[r]+(t[r]-e[r])*n,"a"!=r&&(s[r]=Math.round(s[r]))}),s.sanitize()},i.fromRgb=e.colorFromRgb=function(e,t){var r=e.toLowerCase().match(/^rgba?\(([\s\.,0-9]+)\)/);return r&&i.fromArray(r[1].split(/\s*,\s*/),t)},i.fromHex=e.colorFromHex=function(e,t){var n=t||new i,o=4==e.length?4:8,s=(1<<o)-1;return e=Number("0x"+e.substr(1)),isNaN(e)?null:(r.forEach(["b","g","r"],function(t){var r=e&s;e>>=o,n[t]=4==o?17*r:r}),n.a=1,n)},i.fromArray=e.colorFromArray=function(e,t){var r=t||new i;return r._set(Number(e[0]),Number(e[1]),Number(e[2]),Number(e[3])),isNaN(r.a)&&(r.a=1),r.sanitize()},i.fromString=e.colorFromString=function(e,t){var r=i.named[e];return r&&i.fromArray(r,t)||i.fromRgb(e,t)||i.fromHex(e,t)},i})},"esri/layers/vectorTiles/views/vectorTiles/Placement":function(){define(["require","exports","../2d/engine/webgl/Geometry","./Conflict","./GeometryUtils"],function(e,t,r,n,i){Object.defineProperty(t,"__esModule",{value:!0}),e=function(){return function(e,t,r,n,i){void 0===r&&(r=0),void 0===n&&(n=-1),void 0===i&&(i=c),this.x=e,this.y=t,this.angle=r,this.segment=n,this.minzoom=i}}(),t.Anchor=e;var o=function(){return function(e,t,r,n,o,s,a){void 0===o&&(o=!1),void 0===s&&(s=c),void 0===a&&(a=i.C_INFINITY),this.anchor=e,this.labelAngle=t,this.glyphAngle=r,this.page=n,this.upsideDown=o,this.minzoom=s,this.maxzoom=a}}(),s=function(){return function(e,t,r,n,i,o,s,a,c,u){this.tl=e,this.tr=t,this.bl=r,this.br=n,this.mosaicRect=i,this.labelAngle=o,this.anchor=s,this.minzoom=a,this.maxzoom=c,this.page=u}}();t.PlacedSymbol=s;var a=function(){return function(e,t){this.footprint=e,this.shapes=t}}();t.Placement=a;var c=.5;e=function(){function e(){this.mapAngle=0,this._conflictEngine=new n.ConflictEngine}return e.prototype.reset=function(){this._conflictEngine.reset()},e.prototype.setAngle=function(e){this.mapAngle=e,this._conflictEngine.setAngle(e)},e.prototype.getIconPlacement=function(e,t,o,u,l,f,h){var p=o.width/o.pixelRatio,d=o.height/o.pixelRatio;l=f.offset[0]-p/2;var y=f.offset[1]-d/2,p=l+p,d=y+d,m=o.rect,v=o.sdf?17:2,g=l-v,x=y-v,_=g+m.width/o.pixelRatio,b=x+m.height/o.pixelRatio;if(o=new r.Point(g,x),v=new r.Point(_,b),b=new r.Point(g,b),x=new r.Point(_,x),_=f.rotate*i.C_DEG_TO_RAD,g=1===f.rotationAlignment,0<=e.segment&&!g&&(_+=e.angle),0!==_){var w=Math.cos(_),I=Math.sin(_);o.rotate(w,I),v.rotate(w,I),b.rotate(w,I),x.rotate(w,I)}return w=8*f.padding,I=new r.Point(e.x,e.y),e=new n.Footprint(this.mapAngle,w,g),e.addBox(I,new n.Box(l,y,p,d),u,_,t,c,i.C_INFINITY),t=new s(o,x,b,v,m,0,I,c,i.C_INFINITY,0),t=new a(e,[t]),u=c,f.allowOverlap||(u=this._conflictEngine.getMinZoom(t.footprint,u,h,g)),e.minzoom=u,t},e.prototype.getTextPlacement=function(e,t,u,l,f,h,p,d){for(var y,m=new r.Point(e.x,e.y),v=p.rotate*i.C_DEG_TO_RAD,g=0===p.rotationAlignment,x=p.keepUpright,_=c,b=!g,w=b?0:e.angle,I=0<=e.segment&&g,k=new n.Footprint(this.mapAngle,8*p.padding,b),D=[],C=!I,T=Number.POSITIVE_INFINITY,S=Number.NEGATIVE_INFINITY,A=T,P=S,j=I?x:g&&x,M=0;M<l.length;M++){var B=l[M],E=B.glyphMosaicItem;if(E&&!E.rect.isEmpty){var L=E.rect,O=E.metrics,z=E.page;C&&(y&&y!==B.y&&(k.addBox(m,new n.Box(T,A,S,P),f,v,t,c,i.C_INFINITY),T=Number.POSITIVE_INFINITY,S=Number.NEGATIVE_INFINITY,A=T,P=S),y=B.y);var V=[];if(I){if(E=(u.x+B.x+O.left-4+.5*E.metrics.width)*f,_=this._placeGlyph(e,_,E,h,e.segment,1,z,V),x&&(_=this._placeGlyph(e,_,E,h,e.segment,-1,z,V)),2<=_)break}else V.push(new o(m,w,w,z)),g&&x&&V.push(new o(m,w+i.C_PI,w+i.C_PI,z,!0));for(var z=B.x+u.x+O.left,B=B.y+u.y-O.top,E=z+O.width,O=B+O.height,N=new r.Point(z-4,B-4),R=new r.Point(N.x+L.width,N.y+L.height),F=new r.Point(N.x,R.y),q=new r.Point(R.x,N.y),U=0;U<V.length;U++){var G=V[U],Y=N.clone(),J=F.clone(),H=q.clone(),Z=R.clone(),W=B,$=O,K=G.glyphAngle+v;if(0!==K){var X=Math.cos(K),Q=Math.sin(K);Y.rotate(X,Q),Z.rotate(X,Q),J.rotate(X,Q),H.rotate(X,Q)}D.push(new s(Y,H,J,Z,L,G.labelAngle,G.anchor,G.minzoom,G.maxzoom,G.page)),j&&!this._legible(G.labelAngle)||(C?(z<T&&(T=z),W<A&&(A=W),E>S&&(S=E),$>P&&(P=$)):2>G.minzoom&&k.addBox(G.anchor,new n.Box(z,W,E,$),f,K,t,G.minzoom,G.maxzoom))}}}return 2<=_?null:(C&&k.addBox(m,new n.Box(T,A,S,P),f,v,t,c,i.C_INFINITY),e=new a(k,D),p.allowOverlap||(_=this._conflictEngine.getMinZoom(e.footprint,_,d,b)),k.minzoom=_,e)},e.prototype.add=function(e){this._conflictEngine.add(e.footprint)},e.prototype._legible=function(e){return 65>(e=i.radToByte(e))||193<=e},e.prototype._placeGlyph=function(e,t,n,s,a,c,u,l){var f=0>c?i.positiveMod(e.angle+i.C_PI,i.C_2PI):e.angle,h=this._legible(f),p=0;0>n&&(c*=-1,n*=-1,p=i.C_PI),0<c&&++a,e=new r.Point(e.x,e.y);var d=s[a],y=i.C_INFINITY;if(s.length<=a)return y;for(;;){var m=d.x-e.x,v=d.y-e.y,g=Math.sqrt(m*m+v*v),x=Math.max(n/g,t),m=i.positiveMod(Math.atan2(v/g,m/g)+p,i.C_2PI);if(l.push(new o(e,f,m,u,h,x,y)),x<=t)return x;e=d.clone();do{if(a+=c,s.length<=a||0>a)return x;d=s[a]}while(e.isEqual(d));y=d.x-e.x,m=d.y-e.y,v=Math.sqrt(y*y+m*m),y*=g/v,m*=g/v,e.x-=y,e.y-=m,y=x}},e}(),t.PlacementEngine=e})},"esri/layers/vectorTiles/views/vectorTiles/Conflict":function(){define(["require","exports","../2d/engine/webgl/Geometry","./GeometryUtils"],function(e,t,r,n){Object.defineProperty(t,"__esModule",{value:!0}),e=function(){function e(e,t,r,n){this.left=e,this.top=t,this.right=r,this.bottom=n}return e.prototype.clone=function(){return new e(this.left,this.top,this.right,this.bottom)},e.prototype.move=function(e,t){this.left+=e,this.top+=t,this.right+=e,this.bottom+=t},e.prototype.rotate=function(e,t){var r=this.left,n=this.right,i=this.top,o=this.bottom,s=r*e-i*t,a=r*t+i*e,c=n*e-i*t,i=n*t+i*e,u=r*e-o*t,r=r*t+o*e,l=n*e-o*t,n=n*t+o*e;this.left=Math.min(s,c,u,l),this.top=Math.min(a,i,r,n),this.right=Math.max(s,c,u,l),this.bottom=Math.max(a,i,r,n)},e.overlaps=function(e,t){return e.right>t.left&&e.left<t.right&&e.bottom>t.top&&e.top<t.bottom},e}(),t.Box=e;var i=function(){function e(e,t,r,n){this.anchor=e,this.corners=t,this.minzoom=r,this.maxzoom=n}return e.prototype.left=function(){return this.corners[0].x},e.prototype.right=function(){return this.corners[2].x},e.prototype.top=function(){return this.corners[1].y},e.prototype.bottom=function(){return this.corners[3].y},e}();t.Obstacle=i,e=function(){function e(e,t,r){this.obstacles=[],this.mapAngle=e,this.padding=t,this.isScreenAligned=r,this.minzoom=o}return e.prototype.addBox=function(e,t,n,o,s,a,c){var u=t.left*n-this.padding,l=t.top*n-this.padding,f=t.right*n+this.padding;if(t=t.bottom*n+this.padding,u=[new r.Point(u,l),new r.Point(f,l),new r.Point(f,t),new r.Point(u,t)],0!==this.mapAngle&&(l=Math.cos(this.mapAngle),f=Math.sin(this.mapAngle),e=e.clone(),e.rotate(l,f)),this.isScreenAligned||(o+=this.mapAngle),0!==o){for(l=Math.cos(o),f=Math.sin(o),u[0].rotate(l,f),u[1].rotate(l,f),u[2].rotate(l,f),u[3].rotate(l,f),o=0,l=1;4>l;l++)u[l].x<u[o].x?o=l:u[l].x===u[o].x&&u[l].y<u[o].y&&(o=l);if(o){for(f=[],l=0;4>l;l++)f.push(u[(l+o)%4]);u=f}}if(s)for(o=0,l=u;o<l.length;o++)l[o].move(s[0],s[1]);this.obstacles.push(new i(e,u,a,c))},e}(),t.Footprint=e;var o=.5;e=function(){function e(){this._grid=[]}return e.prototype.setAngle=function(e){},e.prototype.reset=function(){this._grid=[]},e.prototype.add=function(t){var r=this._grid,n=0;for(t=t.obstacles;n<t.length;n++)for(var i=t[n],o=i.anchor,s=e._gridClamp(Math.min(i.left()+o.x,o.x)),a=e._gridClamp(Math.max(i.right()+o.x,o.x)),c=e._gridClamp(Math.min(i.top()+o.y,o.y)),o=e._gridClamp(Math.max(i.bottom()+o.y,o.y));c<=o;c++)for(var u=s;u<=a;u++){var l=r[16*c+u];l||(l=r[16*c+u]=[]),l.push(i)}},e.prototype.getMinZoom=function(t,r,i,o){if(0===t.obstacles.length)return n.C_INFINITY;for(i=this._grid,o=0,t=t.obstacles;o<t.length;o++)for(var s=t[o],a=s.anchor,c=e._gridClamp(Math.min(s.left()+a.x,a.x)),u=e._gridClamp(Math.max(s.right()+a.x,a.x)),l=e._gridClamp(Math.min(s.top()+a.y,a.y)),a=e._gridClamp(Math.max(s.bottom()+a.y,a.y));l<=a;l++)for(var f=c;f<=u;f++){var h=i[16*l+f];if(h)for(var p=0;p<h.length;p++){var d=h[p];if(!(s.minzoom>=d.maxzoom||d.minzoom>=s.maxzoom)&&2<=(r=e._calcPlacementZoom(s,d,r)))return n.C_INFINITY}}return 2>r?r:n.C_INFINITY},e._gridClamp=function(e){return n.clamp(e>>9,-7,8)},e._calcPlacementZoom=function(t,r,i){var o=r.anchor.x-t.anchor.x;if(0===o&&(t.right()<r.left()||r.right()<t.left()))return i;var s=r.anchor.y-t.anchor.y;if(0===s&&(t.bottom()<r.top()||r.bottom()<t.top()))return i;var a=n.C_INFINITY;if(0!==o){var c=(0<o?t.right()-r.left():t.left()-r.right())/o;c<a&&(a=c),o=0<o?e._calcExtZoomX(t,r,c):e._calcExtZoomX(r,t,c),o<a&&(a=o)}return 0!==s&&(o=(0<s?t.bottom()-r.top():t.top()-r.bottom())/s,o<a&&(a=o),(s=0<s?e._calcExtZoomY(t,r,o):e._calcExtZoomY(r,t,o))<a&&(a=s)),a<t.minzoom||a<r.minzoom?i:(a=Math.min(a,t.maxzoom,r.maxzoom),a<i&&(a=i),a)},e._calcExtZoomX=function(e,t,r){var n,i,o;if(e.anchor.y+e.corners[2].y/r<t.anchor.y+t.corners[0].y/r){n=e.corners[2].x-e.corners[3].x,o=e.corners[2].y-e.corners[3].y;var s=t.corners[1].x-t.corners[0].x;i=t.corners[1].y-t.corners[0].y,0<=n*i-o*s?e.anchor.y+e.corners[3].y/r<t.anchor.y+t.corners[0].y/r?(r=e.corners[3],n=t.corners[0],i=t.corners[1],o=1):(r=t.corners[0],n=e.corners[3],i=e.corners[2],o=-1):e.anchor.y+e.corners[2].y/r>t.anchor.y+t.corners[1].y/r?(r=e.corners[2],n=t.corners[0],i=t.corners[1],o=1):(r=t.corners[1],n=e.corners[3],i=e.corners[2],o=-1)}else n=e.corners[2].x-e.corners[1].x,o=e.corners[2].y-e.corners[1].y,s=t.corners[3].x-t.corners[0].x,i=t.corners[3].y-t.corners[0].y,0>n*i-o*s?e.anchor.y+e.corners[1].y/r>t.anchor.y+t.corners[0].y/r?(r=e.corners[1],n=t.corners[0],i=t.corners[3],o=1):(r=t.corners[0],n=e.corners[1],i=e.corners[2],o=-1):e.anchor.y+e.corners[2].y/r<t.anchor.y+t.corners[3].y/r?(r=e.corners[2],n=t.corners[0],i=t.corners[3],o=1):(r=t.corners[3],n=e.corners[1],i=e.corners[2],o=-1);return s=i.x-n.x,i=i.y-n.y,o*((r.y-n.y)*s-(r.x-n.x)*i)/((e.anchor.x-t.anchor.x)*i-(e.anchor.y-t.anchor.y)*s)},e._calcExtZoomY=function(e,t,r){var n,i,o;if(e.anchor.x+e.corners[3].x/r<t.anchor.x+t.corners[1].x/r){n=e.corners[3].x-e.corners[2].x,o=e.corners[3].y-e.corners[2].y;var s=t.corners[0].x-t.corners[1].x;i=t.corners[0].y-t.corners[1].y,0>n*i-o*s?e.anchor.x+e.corners[2].x/r<t.anchor.x+t.corners[1].x/r?(r=e.corners[2],n=t.corners[1],i=t.corners[0],o=1):(r=t.corners[1],n=e.corners[2],i=e.corners[3],o=-1):e.anchor.x+e.corners[3].x/r>t.anchor.x+t.corners[0].x/r?(r=e.corners[3],n=t.corners[1],i=t.corners[0],o=1):(r=t.corners[0],n=e.corners[2],i=e.corners[3],o=-1)}else n=e.corners[3].x-e.corners[0].x,o=e.corners[3].y-e.corners[0].y,s=t.corners[2].x-t.corners[1].x,i=t.corners[2].y-t.corners[1].y,0<n*i-o*s?e.anchor.x+e.corners[0].x/r>t.anchor.x+t.corners[1].x/r?(r=e.corners[0],n=t.corners[1],i=t.corners[2],o=1):(r=t.corners[1],n=e.corners[0],i=e.corners[3],o=-1):e.anchor.x+e.corners[3].x/r<t.anchor.x+t.corners[2].x/r?(r=e.corners[3],n=t.corners[1],i=t.corners[2],o=1):(r=t.corners[2],n=e.corners[0],i=e.corners[3],o=-1);return s=i.x-n.x,i=i.y-n.y,o*((r.y-n.y)*s-(r.x-n.x)*i)/((e.anchor.x-t.anchor.x)*i-(e.anchor.y-t.anchor.y)*s)},e}(),t.ConflictEngine=e})},"esri/layers/vectorTiles/views/vectorTiles/SymbolBucket":function(){define("require exports ../../core/tsSupport/extendsHelper ../../core/tsSupport/decorateHelper dojox/string/BidiEngine ../2d/engine/webgl/Geometry ../2d/engine/webgl/TextShaping ./Bucket ./GeometryUtils ./Placement ./style/StyleLayer".split(" "),function(e,t,r,n,i,o,s,a,c,u,l){function f(e,t){if(e.iconMosaicItem&&t.iconMosaicItem){if(e.iconMosaicItem.page!==t.iconMosaicItem.page)return e.iconMosaicItem.page<t.iconMosaicItem.page?-1:1}else{if(e.iconMosaicItem&&!t.iconMosaicItem)return 1;if(!e.iconMosaicItem&&t.iconMosaicItem)return-1}return 0}return function(e){function t(t,r,n,i,o,s,a,c){if(r=e.call(this,t,r)||this,r._markerMap=new Map,r._glyphMap=new Map,r._glyphBufferDataStorage=new Map,r._sdfMarkers=!1,t.hasDataDrivenIcon!==n.isDataDriven())throw Error("incompatible icon buffer");if(t.hasDataDrivenText!==o.isDataDriven())throw Error("incompatible text buffer");return r._iconVertexBuffer=n,r._iconIndexBuffer=i,r._textVertexBuffer=o,r._textIndexBuffer=s,r._placementEngine=a,r._workerTileHandler=c,r}return r(t,e),Object.defineProperty(t.prototype,"markerPageMap",{get:function(){return this._markerMap},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"glyphsPageMap",{get:function(){return this._glyphMap},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"sdfMarker",{get:function(){return this._sdfMarkers},enumerable:!0,configurable:!0}),t.prototype.copy=function(e,r,n,i,o){return e=new t(this.layer,this.zoom,e,r,n,i,o,this._workerTileHandler),e.layerIndex=this.layerIndex,e.layerExtent=this.layerExtent,e._iconIndexStart=r.index,e._textIndexStart=i.index,e._iconIndexCount=0,e._textIndexCount=0,e._symbolInstances=this._symbolInstances,e._workerTileHandler=this._workerTileHandler,e._fontArray=this._fontArray,e._textLayout=this._textLayout,e._iconLayout=this._iconLayout,e._isLinePlacement=this._isLinePlacement,e._avoidEdges=this._avoidEdges,e},t.prototype.getResources=function(e,r,n){var i=this.layer,o=this.zoom,s=i.hasDataDrivenIcon,a=i.hasDataDrivenText;e&&e.setExtent(this.layerExtent);for(var c=i.getLayoutProperty("icon-image"),u=i.getLayoutProperty("text-field"),l=i.getLayoutValue("text-font",o),f=i.getLayoutValue("text-transform",o),h=[],p=[1,1,1,1],d=1,y=1,m=[1,1,1,1],v=1,g=1,x=0,_=this._features;x<_.length;x++){var b=_[x],w=b.getGeometry(e);if(w&&0!==w.length){var I=void 0;c&&(I=i.getLayoutValue("icon-image",o,b),c.isDataDriven||(I=this._replaceKeys(I,b.values)),I&&r.add(I));var k=void 0,D=!1;if(u&&(k=i.getLayoutValue("text-field",o,b),u.isDataDriven||(k=this._replaceKeys(k,b.values)),k=k.replace(/\\n/g,"\n"))){switch(f){case 2:k=k.toLowerCase();break;case 1:k=k.toUpperCase()}t._bidiEngine.hasBidiChar(k)&&(D=void 0,D="rtl"===t._bidiEngine.checkContextual(k)?"IDNNN":"ICNNN",k=t._bidiEngine.bidiTransform(k,D,"VLYSN"),D=!0);var C=k.length;if(0<C)for(var T=0,S=l;T<S.length;T++){var A=S[T],P=n[A];for(P||(P=n[A]=new Set),A=0;A<C;A++){var j=k.charCodeAt(A);P.add(j)}}}(I||k)&&(C=i.getLayoutValue("icon-size",o,b),T=i.getLayoutValue("text-size",o,b),i.hasDataDrivenIconColor&&(p=i.getPaintValue("icon-color",o,b)),i.hasDataDrivenIconOpacity&&(d=i.getPaintValue("icon-opacity",o,b)),i.hasDataDrivenIconSize&&(y=C),i.hasDataDrivenTextColor&&(m=i.getPaintValue("text-color",o,b)),i.hasDataDrivenTextOpacity&&(v=i.getPaintValue("text-opacity",o,b)),i.hasDataDrivenTextSize&&(g=T),b={sprite:I,label:k,rtl:D,type:b.type,geometry:w,iconSize:C,iconRotate:i.getLayoutValue("icon-rotate",o,b),ddIconValues:s?{color:p,opacity:d,size:y}:null,textSize:T,textRotate:i.getLayoutValue("text-rotate",o,b),ddTextValues:a?{color:m,opacity:v,size:g}:null},h.push(b))}}this._symbolFeatures=h},t.prototype.processFeatures=function(e,r){e&&e.setExtent(this.layerExtent);var n,i,o=this.layer,a=this.zoom,h=this._isLinePlacement=1===o.getLayoutValue("symbol-placement",a),p=this._avoidEdges=o.getLayoutValue("symbol-avoid-edges",a)&&!h,d=8*o.getLayoutValue("symbol-spacing",a),y=o.getLayoutProperty("icon-image"),m=o.getLayoutProperty("text-field"),v=this._workerTileHandler;y&&(this._iconLayout=new l.IconLayout(o,a,h),n=v.getSpriteItems(),i=this._getTranslate(!0));var g,x,_;if(m){switch(g=this._textLayout=new l.TextLayout(o,a,h),this._fontArray=g.fontArray,_=.5,g.anchor){case 5:case 1:case 7:_=0;break;case 6:case 2:case 8:_=1}switch(x=.5,g.anchor){case 5:case 3:case 6:x=0;break;case 7:case 4:case 8:x=1}switch(o=.5,g.justify){case 0:o=0;break;case 2:o=1}var a=24*g.letterSpacing,y=h?0:24*g.maxWidth,m=24*g.lineHeight,b=[24*g.offset[0],24*g.offset[1]];g=this._fontArray.map(function(e){return v.getGlyphItems(e)}),x=new s(g,y,m,a,b,_,x,o),_=this._getTranslate(!1)}this._iconIndexStart=this._iconIndexBuffer.index,this._textIndexStart=this._textIndexBuffer.index,this._textIndexCount=this._iconIndexCount=0,this._markerMap.clear(),this._glyphMap.clear(),this._symbolInstances=o=[],a=this._textLayout,y=1,a&&a.size&&(y=a.size/24),m=a?a.maxAngle*c.C_DEG_TO_RAD:0,g=a?8*a.size:0;for(var b=0,w=this._symbolFeatures;b<w.length;b++){var I=w[b],k=void 0;I.sprite&&(k=n[I.sprite])&&k.sdf&&(this._sdfMarkers=!0);var D=void 0,C=I.label,T=0;if(C&&(D=x.getShaping(C,I.rtl))&&0<D.length){for(var T=1e30,C=-1e30,S=0,A=D;S<A.length;S++)var P=A[S],T=Math.min(T,P.x),C=Math.max(C,P.x);T=(C-T+48)*y*8}for(C=0,S=I.geometry;C<S.length;C++){var A=S[C],j=void 0;for(h?(D&&0<D.length&&a&&a.size&&t._smoothVertices(A,8*a.size*(2+Math.min(2,4*Math.abs(a.offset[1])))),j=t._findAnchors(A,d,T)):j=3===I.type?t._findCentroid(A):[new u.Anchor(A[0].x,A[0].y)],P=0;P<j.length;P++){var M=j[P];0>M.x||4096<M.x||0>M.y||4096<M.y||h&&0<T&&0===a.rotationAlignment&&!t._honorsTextMaxAngle(A,M,T,m,g)||o.push({shaping:D,line:A,iconMosaicItem:k,anchor:M,iconSize:I.iconSize,iconRotate:I.iconRotate,ddIconValues:I.ddIconValues,textSize:I.textSize,textRotate:I.textRotate,ddTextValues:I.ddTextValues})}}}for(o.sort(f),h=0;h<o.length;h++)this._processFeature(o[h],i,_,p);this._addPlacedGlyphs()},t.prototype.updateSymbols=function(){this._iconIndexStart=this._iconIndexBuffer.index,this._textIndexStart=this._textIndexBuffer.index,this._textIndexCount=this._iconIndexCount=0,this._markerMap.clear(),this._glyphMap.clear();var e,t=this._avoidEdges,r=this.layer;r.getLayoutProperty("icon-image")&&(e=this._getTranslate(!0));var n;r.getLayoutProperty("text-field")&&(n=this._getTranslate(!1));for(var r=0,i=this._symbolInstances;r<i.length;r++)this._processFeature(i[r],e,n,t);this._addPlacedGlyphs()},t.prototype._getTranslate=function(e){var t=this.layer.getPaintValue(e?"icon-translate":"text-translate",this.zoom);if(0!==t[0]||0!==t[1]){var r=this._placementEngine.mapAngle;return 0!==r&&0===this.layer.getPaintValue(e?"icon-translate-anchor":"text-translate-anchor",this.zoom)?(e=Math.sin(r),r=Math.cos(r),[8*(t[0]*r-t[1]*e),8*(t[0]*e+t[1]*r)]):[8*t[0],8*t[1]]}},t.prototype._replaceKeys=function(e,t){return e.replace(/{([^{}]+)}/g,function(e,r){return r in t?t[r]:""})},t.prototype._processFeature=function(e,t,r,n){var i=e.line,s=e.iconMosaicItem,a=e.shaping,u=e.anchor,l=this._iconLayout,f=l&&!!s,h=!0,p=1;f&&(l.size=e.iconSize,l.rotate=e.iconRotate,p=8*l.size,h=l.optional||!s);var d,y=this._textLayout,m=y&&a&&0<a.length;d=1;var v=!0;m&&(y.size=e.textSize,y.rotate=e.textRotate,d=y.size/24,d*=8,v=y.optional||!a||0===a.length);var g,x=new o.Point(0,-17);if(f&&(g=this._placementEngine.getIconPlacement(u,t,s,p,i,l,n),u.minzoom>g.footprint.minzoom&&(g.footprint.minzoom=u.minzoom),g.footprint.minzoom===c.C_INFINITY&&(g=null)),g||h){var _;m&&(_=this._placementEngine.getTextPlacement(u,r,x,a,d,i,y,n))&&(u.minzoom>_.footprint.minzoom&&(_.footprint.minzoom=u.minzoom),_.footprint.minzoom===c.C_INFINITY&&(_=null)),(_||v)&&(g&&_||(v||h?v||_?h||g||(_=null):g=null:_=g=null),g&&_&&!v&&!h&&(t=Math.max(g.footprint.minzoom,_.footprint.minzoom),g.footprint.minzoom=t,_.footprint.minzoom=t),_&&(y.ignorePlacement||this._placementEngine.add(_),this._storePlacedGlyphs(_.shapes,_.footprint.minzoom,this.zoom,e.ddTextValues)),g&&(l.ignorePlacement||this._placementEngine.add(g),this._addPlacedIcons(g.shapes,g.footprint.minzoom,this.zoom,s.page,e.ddIconValues)))}},t.prototype._addPlacedIcons=function(e,t,r,n,i){t=Math.max(r+c.log2(t),0);for(var o=this._iconVertexBuffer,s=this._iconIndexBuffer,a=0;a<e.length;a++){var u=e[a],l=Math.max(r+c.log2(u.minzoom),t),f=Math.min(r+c.log2(u.maxzoom),25);if(!(f<=l)){var h=u.tl,p=u.tr,d=u.bl,y=u.br,m=u.mosaicRect,v=u.labelAngle,u=u.anchor,g=o.index,x=m.x,_=m.y,b=x+m.width,m=_+m.height;o.add(u.x,u.y,h.x,h.y,x,_,v,l,f,t,i),o.add(u.x,u.y,p.x,p.y,b,_,v,l,f,t,i),o.add(u.x,u.y,d.x,d.y,x,m,v,l,f,t,i),o.add(u.x,u.y,y.x,y.y,b,m,v,l,f,t,i),s.add(g+0,g+1,g+2),s.add(g+1,g+2,g+3),this._markerMap.has(n)?this._markerMap.get(n)[1]+=6:this._markerMap.set(n,[this._iconIndexStart+this._iconIndexCount,6]),this._iconIndexCount+=2}}},t.prototype._addPlacedGlyphs=function(){var e=this,t=this._textVertexBuffer,r=this._textIndexBuffer;this._glyphBufferDataStorage.forEach(function(n,i){for(var o=0;o<n.length;o++){var s=n[o],a=t.index;t.add(s.glyphAnchor[0],s.glyphAnchor[1],s.tl[0],s.tl[1],s.xmin,s.ymin,s.labelAngle,s.minLod,s.maxLod,s.placementLod,s.ddValues),t.add(s.glyphAnchor[0],s.glyphAnchor[1],s.tr[0],s.tr[1],s.xmax,s.ymin,s.labelAngle,s.minLod,s.maxLod,s.placementLod,s.ddValues),t.add(s.glyphAnchor[0],s.glyphAnchor[1],s.bl[0],s.bl[1],s.xmin,s.ymax,s.labelAngle,s.minLod,s.maxLod,s.placementLod,s.ddValues),t.add(s.glyphAnchor[0],s.glyphAnchor[1],s.br[0],s.br[1],s.xmax,s.ymax,s.labelAngle,s.minLod,s.maxLod,s.placementLod,s.ddValues),r.add(a+0,a+1,a+2),r.add(a+1,a+2,a+3),e._glyphMap.has(i)?e._glyphMap.get(i)[1]+=6:e._glyphMap.set(i,[e._textIndexStart+e._textIndexCount,6]),e._textIndexCount+=2}}),this._glyphBufferDataStorage.clear()},t.prototype._storePlacedGlyphs=function(e,t,r,n){t=Math.max(r+c.log2(t),0);for(var i=0;i<e.length;i++){var o=e[i],s=Math.max(r+c.log2(o.minzoom),t),a=Math.min(r+c.log2(o.maxzoom),25);if(!(a<=s)){var u=o.tl,l=o.tr,f=o.bl,h=o.br,p=o.labelAngle,d=o.anchor,y=o.mosaicRect;this._glyphBufferDataStorage.has(o.page)||this._glyphBufferDataStorage.set(o.page,[]),this._glyphBufferDataStorage.get(o.page).push({glyphAnchor:[d.x,d.y],tl:[u.x,u.y],tr:[l.x,l.y],bl:[f.x,f.y],br:[h.x,h.y],xmin:y.x,ymin:y.y,xmax:y.x+y.width,ymax:y.y+y.height,labelAngle:p,minLod:s,maxLod:a,placementLod:t,ddValues:n})}}},t._findAnchors=function(e,t,r){t+=r;for(var n=0,i=e.length-1,s=0;s<i;s++)n+=o.Point.distance(e[s],e[s+1]);if(s=.5*(r||t),n<=s)return[];r=s/n,t=n/Math.max(Math.round(n/t),1);for(var n=0,i=-t/2,a=[],l=e.length-1,s=0;s<l;s++){for(var f=e[s],h=e[s+1],p=h.x-f.x,d=h.y-f.y,y=Math.sqrt(p*p+d*d),m=void 0;i+t<n+y;){var i=i+t,v=(i-n)/y,g=c.interpolate(f.x,h.x,v),v=c.interpolate(f.y,h.y,v);void 0===m&&(m=Math.atan2(d,p)),a.push(new u.Anchor(g,v,m,s,r))}n+=y}return a},t._deviation=function(e,t,r){return Math.atan2((t.x-e.x)*(r.y-t.y)-(t.y-e.y)*(r.x-t.x),(t.x-e.x)*(r.x-t.x)+(t.y-e.y)*(r.y-t.y))},t._honorsTextMaxAngle=function(e,t,r,n,i){var s=0;r/=2;for(var a=new o.Point(t.x,t.y),c=t.segment+1;s>-r;){if(0>--c)return!1;s-=o.Point.distance(e[c],a),a=e[c]}s+=o.Point.distance(e[c],e[c+1]),t=[];for(var a=0,u=e.length;s<r;){var l=e[c],f=void 0;do{if(++c===u)return!1;f=e[c]}while(f.isEqual(l));var h=c,p=void 0;do{if(++h===u)return!1;p=e[h]}while(p.isEqual(f));for(l=this._deviation(l,f,p),t.push({deviation:l,distToAnchor:s}),a+=l;s-t[0].distToAnchor>i;)a-=t.shift().deviation;if(Math.abs(a)>n)return!1;s+=o.Point.distance(f,p)}return!0},t._smoothVertices=function(e,t){if(!(0>=t)){var r=e.length;if(!(3>r)){var n=[],i=0;n.push(0);for(var s=1;s<r;s++)i+=o.Point.distance(e[s],e[s-1]),n.push(i);t=Math.min(t,.2*i),i=[],i.push(e[0].x),i.push(e[0].y);var a=e[r-1].x,c=e[r-1].y,s=o.Point.sub(e[0],e[1]);for(s.normalize(),e[0].x+=t*s.x,e[0].y+=t*s.y,s.assignSub(e[r-1],e[r-2]),s.normalize(),e[r-1].x+=t*s.x,e[r-1].y+=t*s.y,s=1;s<r;s++)n[s]+=t;n[r-1]+=t;for(var u=.5*t,s=1;s<r-1;s++){for(var l=0,f=0,h=0,p=s-1;0<=p&&!(n[p+1]<n[s]-u);p--){var d=u+n[p+1]-n[s],y=n[p+1]-n[p],m=n[s]-n[p]<u?1:d/y;if(1e-6>Math.abs(m))break;var v=m*m,g=m*d-.5*v*y,x=m*y/t,_=e[p+1],b=e[p].x-_.x,w=e[p].y-_.y,l=l+x/g*(_.x*m*d+.5*v*(d*b-y*_.x)-v*m*y*b/3),f=f+x/g*(_.y*m*d+.5*v*(d*w-y*_.y)-v*m*y*w/3),h=h+x}for(p=s+1;p<r&&!(n[p-1]>n[s]+u)&&(d=u-n[p-1]+n[s],y=n[p]-n[p-1],m=n[p]-n[s]<u?1:d/y,!(1e-6>Math.abs(m)));p++)v=m*m,g=m*d-.5*v*y,x=m*y/t,_=e[p-1],b=e[p].x-_.x,w=e[p].y-_.y,l+=x/g*(_.x*m*d+.5*v*(d*b-y*_.x)-v*m*y*b/3),f+=x/g*(_.y*m*d+.5*v*(d*w-y*_.y)-v*m*y*w/3),h+=x;i.push(l/h),i.push(f/h)}for(i.push(a),i.push(c),p=s=0;s<r;s++)e[s].x=i[p++],e[s].y=i[p++]}}},t._findCentroid=function(e){var t=e.length-1,r=0,n=0,i=0,o=e[0].x,s=e[0].y;4096<o&&(o=4096),0>o&&(o=0),4096<s&&(s=4096),0>s&&(s=0);for(var a=1;a<t;a++){var c=e[a].x,l=e[a].y,f=e[a+1].x,h=e[a+1].y;4096<c&&(c=4096),0>c&&(c=0),4096<l&&(l=4096),0>l&&(l=0),4096<f&&(f=4096),0>f&&(f=0),4096<h&&(h=4096),0>h&&(h=0);var p=(c-o)*(h-s)-(f-o)*(l-s),r=r+p*(o+c+f),n=n+p*(s+l+h),i=i+p}return r/=3*i,n/=3*i,isNaN(r)||isNaN(n)?[]:[new u.Anchor(r,n)]},t._bidiEngine=new i,t}(a)})},"dojox/string/BidiEngine":function(){define(["dojo/_base/lang","dojo/_base/declare","dojo/Stateful"],function(e,t,r){function n(e,t,r,s,c){var u=e;if(void 0===t&&(t=c.defInFormat),void 0===r&&(r=c.defOutFormat),void 0===s&&(s=c.defSwap),t!==r){var l,f=t.substring(0,1);l=t.substring(1,4);var h=r.substring(0,1),p=r.substring(1,4);"C"===l.charAt(0)&&(l=i(u),l="ltr"===l||"rtl"===l?l.toUpperCase():"L"===t.charAt(2)?"LTR":"RTL",t=f+l),"C"===p.charAt(0)&&(l=i(u),"rtl"===l?p="RTL":"ltr"===l?(u=u.split(""),u.reverse(),l=i(u.join("")),p=l.toUpperCase()):p="L"===r.charAt(2)?"LTR":"RTL",r=h+p)}if(t===r)return e;if(h=t.substring(0,1),u=t.substring(1,4),f=r.substring(0,1),p=r.substring(1,4),c.inFormat=t,c.outFormat=r,c.swap=s,"L"===h&&"VLTR"===r){if("LTR"===u)return c.dir=I,o(e,c);if("RTL"===u)return c.dir=k,o(e,c)}return"V"===h&&"V"===f?(c.dir="RTL"===u?k:I,a(e,c)):"L"===h&&"VRTL"===r?(c.dir="LTR"===u?I:k,e=o(e,c),a(e)):"VLTR"===t&&"LLTR"===r?(c.dir=I,o(e,c)):"V"===h&&"L"===f&&u!==p?(e=a(e),"RTL"===u?n(e,"LLTR","VLTR",s,c):n(e,"LRTL","VRTL",s,c)):"VRTL"===t&&"LRTL"===r?n(e,"LRTL","VRTL",s,c):"L"===h&&"L"===f?(t=c.swap,c.swap=t.substr(0,1)+"N","RTL"===u?(c.dir=k,e=o(e,c),c.swap="N"+t.substr(1,2),c.dir=I,e=o(e,c)):(c.dir=I,e=o(e,c),c.swap="N"+t.substr(1,2),e=n(e,"VLTR","LRTL",c.swap,c)),e):void 0}function i(e){return(e=/[A-Za-z\u05d0-\u065f\u066a-\u06ef\u06fa-\u07ff\ufb1d-\ufdff\ufe70-\ufefc]/.exec(e))?"z">=e[0]?"ltr":"rtl":""}function o(e,t){var r=e.split(""),n=[];if(s(r,n,t),0!==t.hiLevel&&t.swap.substr(0,1)!==t.swap.substr(1,2))for(var i=0;i<r.length;i++)if(1===n[i]){var o,a=i;e:{o=r[i];for(var c=void 0,u=0,f=T.length-1;u<=f;)if(c=Math.floor((u+f)/2),o<T[c][0])f=c-1;else{if(!(o>T[c][0])){o=T[c][1];break e}u=c+1}}r[a]=o}return l(2,r,n,t),l(1,r,n,t),x=n,r.join("")}function s(e,t,r){var n=e.length,i=r.dir?F:R,o=null,s=null,a=null,o=0,s=s=null,c=-1,u=s=null,l=[],h=[];for(r.hiLevel=r.dir,r.lastArabic=!1,r.hasUbatAl=!1,r.hasUbatB=!1,r.hasUbatS=!1,s=0;s<n;s++){var u=s,a=e[s].charCodeAt(0),p=le[a>>8];l[u]=p<ee?p:fe[p-ee][255&a]}for(u=0;u<n;u++){if(h[u]=s=f(e,l,h,u,r),o=i[o][s],s=240&o,o&=15,t[u]=a=i[o][b],0<s){if(16===s)for(s=c;s<u;s++)t[s]=1;c=-1}if(s=i[o][w])-1===c&&(c=u);else if(-1<c){for(s=c;s<u;s++)t[s]=a;c=-1}l[u]===H&&(t[u]=0),r.hiLevel|=a}if(r.hasUbatS)for(e=0;e<n;e++)if(l[e]===Z)for(t[e]=r.dir,i=e-1;0<=i&&l[i]===$;i--)t[i]=r.dir}function a(e,t){var r=e.split("");if(t){var n=[];s(r,n,t),x=n}return r.reverse(),v.reverse(),r.join("")}function c(e){for(var t=0;t<V.length;t++)if(e>=V[t]&&e<=N[t])return!0;return!1}function u(e,t,r,n){for(;t*r<n&&p(e[t]);)t+=r;return!!(t*r<n&&c(e[t]))}function l(e,t,r,n){if(!(n.hiLevel<e))if(1!==e||n.dir!==k||n.hasUbatB){n=t.length;for(var i,o,s,a=0;a<n;){if(r[a]>=e){for(i=a+1;i<n&&r[i]>=e;)i++;for(o=i-1;a<o;a++,o--)s=t[a],t[a]=t[o],t[o]=s,s=v[a],v[a]=v[o],v[o]=s;a=i}a++}}else t.reverse(),v.reverse()}function f(e,t,r,n,i){return{UBAT_L:function(){return i.lastArabic=!1,q},UBAT_R:function(){return i.lastArabic=!1,U},UBAT_ON:function(){return J},UBAT_AN:function(){return Y},UBAT_EN:function(){return i.lastArabic?Y:G},UBAT_AL:function(){return i.lastArabic=!0,i.hasUbatAl=!0,U},UBAT_WS:function(){return J},UBAT_CS:function(){var e,o;return 1>n||n+1>=t.length||(e=r[n-1])!==G&&e!==Y||(o=t[n+1])!==G&&o!==Y?J:(i.lastArabic&&(o=Y),o===e?o:J)},UBAT_ES:function(){return(0<n?r[n-1]:H)===G&&n+1<t.length&&t[n+1]===G?G:J},UBAT_ET:function(){if(0<n&&r[n-1]===G)return G;if(i.lastArabic)return J;for(var e=n+1,o=t.length;e<o&&t[e]===K;)e++;return e<o&&t[e]===G?G:J},UBAT_NSM:function(){if("VLTR"===i.inFormat){for(var o=t.length,s=n+1;s<o&&t[s]===X;)s++;if(s<o&&(o=e[n],s=t[s],(1425<=o&&2303>=o||64286===o)&&(s===U||s===W)))return U}return 1>n||t[n-1]===H?J:r[n-1]},UBAT_B:function(){return i.lastArabic=!0,i.hasUbatB=!0,i.dir},UBAT_S:function(){return i.hasUbatS=!0,J},UBAT_LRE:function(){return i.lastArabic=!1,J},UBAT_RLE:function(){return i.lastArabic=!1,J},UBAT_LRO:function(){return i.lastArabic=!1,J},UBAT_RLO:function(){return i.lastArabic=!1,J},UBAT_PDF:function(){return i.lastArabic=!1,J},UBAT_BN:function(){return J}}[Q[t[n]]]()}function h(e,t){for(var r=0;r<j.length;r++)if(e===j[r])return t[r];return e}function p(e){return"ً"<=e&&"ٕ">=e}function d(e){return"L"===e?"LTR":"R"===e?"RTL":"C"===e?"CLR":"D"===e?"CRL":void 0}function y(e,t){for(var r=0;r<S.length;r++)if(e===S[r])return t[r];return e}function m(e,t,r,n){for(var i=0;i<e.length;i++)(e[i]>t||!r&&e[i]===t)&&(e[i]+=n)}e.getObject("string",!0,dojox),e=t("dojox.string.BidiEngine",r,{inputFormat:"ILYNN",outputFormat:"VLNNN",sourceToTarget:[],targetToSource:[],levels:[],bidiTransform:function(e,t,r){if(this.sourceToTarget=[],this.targetToSource=[],!e)return"";var i=this.sourceToTarget,o=this.targetToSource,s=e.length;v=[],x=[];for(var a=0;a<s;a++)i[a]=a,o[a]=a,v[a]=a;if(!this.checkParameters(t,r))return e;t=this.inputFormat,r=this.outputFormat;var i=e,i=_,a=d(t.charAt(1)),o=d(r.charAt(1)),l="I"===t.charAt(0)?"L":t.charAt(0),s="I"===r.charAt(0)?"L":r.charAt(0),a=l+a,o=s+o,s=t.charAt(2)+r.charAt(2);for(i.defInFormat=a,i.defOutFormat=o,i.defSwap=s,e=n(e,a,o,s,i),i=!1,"R"===r.charAt(1)?i=!0:"C"!==r.charAt(1)&&"D"!==r.charAt(1)||(i=this.checkContextual(e)),o=this.sourceToTarget=v,s=Array(o.length),a=0;a<o.length;a++)s[o[a]]=a;if(g=this.targetToSource=s,t.charAt(3)===r.charAt(3))i=e;else if("S"===r.charAt(3))if(t=i,r=!0,0===e.length)i=void 0;else{void 0===t&&(t=!0),void 0===r&&(r=!0),e=String(e),e=e.split("");var f=0,o=1,i=e.length;t||(f=e.length-1,o=-1,i=1);for(var s=i,a=r,b=0,i=[],l=0;f*o<s;f+=o)if(c(e[f])||p(e[f])){var w;if(w="ل"===e[f])e:{for(var I=e,k=f+o,D=o,C=s;k*D<C&&p(I[k]);)k+=D;if(w=" ",k*D<C)for(w=I[k],I=0;I<S.length;I++)if(S[I]===w){w=!0;break e}w=!1}if(w){for(e[f]=0===b?y(e[f+o],A):y(e[f+o],P),f+=o,b=e,w=f,I=o,k=s;w*I<k&&p(b[w]);)w+=I;w*I<k&&(b[w]=" "),a&&(i[l]=f,l++),b=0}else{if(w=e[f],1===b){if(I=f,u(e,f+o,o,s)){e:for(k=e[f],
D=0;D<j.length;D++)if(k===j[D]){k=E[D];break e}}else k=h(e[f],B);e[I]=k}else!0===u(e,f+o,o,s)?e[f]=h(e[f],L):e[f]=h(e[f],M);p(w)||(b=1);e:{for(I=0;I<O.length;I++)if(O[I]===w){w=!0;break e}w=!1}!0===w&&(b=0)}}else b=0;for(o="",s=0;s<e.length;s++){if(a=r){e:{for(a=0;a<i.length;a++)if(i[a]===s)break e;a=-1}a=-1<a}a?(m(g,s,!t,-1),v.splice(s,1)):o+=e[s]}i=o}else if(t=e,r=i,e=!0,0===t.length)i=void 0;else for(void 0===e&&(e=!0),void 0===r&&(r=!0),t=String(t),i="",o=[],o=t.split(""),s=0;s<t.length;s++)a=!1,"ﹰ"<=o[s]&&"\ufeff">o[s]?(l=t.charCodeAt(s),"ﻵ"<=o[s]&&"ﻼ">=o[s]?(r?(0<s&&e&&" "===o[s-1]?i=i.substring(0,i.length-1)+"ل":(i+="ل",a=!0),i+=S[(l-65269)/2]):(i+=S[(l-65269)/2],i+="ل",s+1<t.length&&e&&" "===o[s+1]?s++:a=!0),a&&(m(g,s,!0,1),v.splice(s,0,v[s]))):i+=z[l-65136]):i+=o[s];return this.sourceToTarget=v,this.targetToSource=g,this.levels=x,i},_inputFormatSetter:function(e){if(!D.test(e))throw Error("dojox/string/BidiEngine: the bidi layout string is wrong!");this.inputFormat=e},_outputFormatSetter:function(e){if(!D.test(e))throw Error("dojox/string/BidiEngine: the bidi layout string is wrong!");this.outputFormat=e},checkParameters:function(e,t){return e?this.set("inputFormat",e):e=this.inputFormat,t?this.set("outputFormat",t):t=this.outputFormat,e!==t},checkContextual:function(e){if("ltr"!==(e=i(e))&&"rtl"!==e){try{e=document.dir.toLowerCase()}catch(e){}"ltr"!==e&&"rtl"!==e&&(e="ltr")}return e},hasBidiChar:function(e){return C.test(e)}});var v=[],g=[],x=[],_={dir:0,defInFormat:"LLTR",defoutFormat:"VLTR",defSwap:"YN",inFormat:"LLTR",outFormat:"VLTR",swap:"YN",hiLevel:0,lastArabic:!1,hasUbatAl:!1,hasBlockSep:!1,hasSegSep:!1},b=5,w=6,I=0,k=1,D=/^[(I|V)][(L|R|C|D)][(Y|N)][(S|N)][N]$/,C=/[\u0591-\u06ff\ufb1d-\ufefc]/,T=[["(",")"],[")","("],["<",">"],[">","<"],["[","]"],["]","["],["{","}"],["}","{"],["«","»"],["»","«"],["‹","›"],["›","‹"],["⁽","⁾"],["⁾","⁽"],["₍","₎"],["₎","₍"],["≤","≥"],["≥","≤"],["〈","〉"],["〉","〈"],["﹙","﹚"],["﹚","﹙"],["﹛","﹜"],["﹜","﹛"],["﹝","﹞"],["﹞","﹝"],["﹤","﹥"],["﹥","﹤"]],S=["آ","أ","إ","ا"],A=["ﻵ","ﻷ","ﻹ","ﻻ"],P=["ﻶ","ﻸ","ﻺ","ﻼ"],j="ابتثجحخدذرزسشصضطظعغفقكلمنهويإأآةىلمنهويإأآةىیئؤ".split(""),M="ﺍﺏﺕﺙﺝﺡﺥﺩﺫﺭﺯﺱﺵﺹﺽﻁﻅﻉﻍﻑﻕﻙﻝﻡﻥﻩﻭﻱﺇﺃﺁﺓﻯﯼﺉﺅﹰﹲﹴﹶﹸﹺﹼﹾﺀﺉﺅ".split(""),B="ﺎﺐﺖﺚﺞﺢﺦﺪﺬﺮﺰﺲﺶﺺﺾﻂﻆﻊﻎﻒﻖﻚﻞﻢﻦﻪﻮﻲﺈﺄﺂﺔﻰﯽﺊﺆﹰﹲﹴﹶﹸﹺﹼﹾﺀﺊﺆ".split(""),E="ﺎﺒﺘﺜﺠﺤﺨﺪﺬﺮﺰﺴﺸﺼﻀﻄﻈﻌﻐﻔﻘﻜﻠﻤﻨﻬﻮﻴﺈﺄﺂﺔﻰﯿﺌﺆﹱﹲﹴﹷﹹﹻﹽﹿﺀﺌﺆ".split(""),L="ﺍﺑﺗﺛﺟﺣﺧﺩﺫﺭﺯﺳﺷﺻﺿﻃﻇﻋﻏﻓﻗﻛﻟﻣﻧﻫﻭﻳﺇﺃﺁﺓﻯﯾﺋﺅﹰﹲﹴﹶﹸﹺﹼﹾﺀﺋﺅ".split(""),O="ءآأؤإاةدذرزوى".split(""),z="ًًٌ؟ٍ؟ََُُِِّّْْءآآأأؤؤإإئئئئااببببةةتتتتثثثثججججححححخخخخددذذررززسسسسششششصصصصضضضضططططظظظظععععغغغغففففققققككككللللممممننننههههووىىييييﻵﻶﻷﻸﻹﻺﻻﻼ؟؟؟".split(""),V=["ء","ف"],N=["غ","ي"],R=[[0,3,0,1,0,0,0],[0,3,0,1,2,2,0],[0,3,0,17,2,0,1],[0,3,5,5,4,1,0],[0,3,21,21,4,0,1],[0,3,5,5,4,2,0]],F=[[2,0,1,1,0,1,0],[2,0,1,1,0,2,0],[2,0,2,1,3,2,0],[2,0,2,33,3,1,1]],q=0,U=1,G=2,Y=3,J=4,H=5,Z=6,W=7,$=8,K=11,X=12,Q="UBAT_L UBAT_R UBAT_EN UBAT_AN UBAT_ON UBAT_B UBAT_S UBAT_AL UBAT_WS UBAT_CS UBAT_ES UBAT_ET UBAT_NSM UBAT_LRE UBAT_RLE UBAT_PDF UBAT_LRO UBAT_RLO UBAT_BN".split(" "),ee=100;t=q,r=U;var te=G,re=Y,ne=J,ie=H,oe=Z,se=W,ae=$,ce=K,ue=X,le=[ee+0,t,t,t,t,ee+1,ee+2,ee+3,r,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,ee+4,ne,ne,ne,t,ne,t,ne,t,ne,ne,ne,t,t,ne,ne,t,t,t,t,t,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,t,t,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,t,t,t,t,t,t,t,t,t,t,t,t,t,t,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,t,t,ne,ne,t,t,ne,ne,t,t,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,t,t,t,ee+5,se,se,ee+6,ee+7],fe=[[18,18,18,18,18,18,18,18,18,oe,ie,oe,ae,ie,18,18,18,18,18,18,18,18,18,18,18,18,18,18,ie,ie,ie,oe,ae,ne,ne,ce,ce,ce,ne,ne,ne,ne,ne,10,9,10,9,9,te,te,te,te,te,te,te,te,te,te,9,ne,ne,ne,ne,ne,ne,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,ne,ne,ne,ne,ne,ne,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,ne,ne,ne,ne,18,18,18,18,18,18,ie,18,18,18,18,18,18,18,18,18,18,18,18,18,18,18,18,18,18,18,18,18,18,18,18,18,18,9,ne,ce,ce,ce,ce,ne,ne,ne,ne,t,ne,ne,18,ne,ne,ce,ce,te,te,ne,t,ne,ne,ne,te,t,ne,ne,ne,ne,ne,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,ne,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,ne,t,t,t,t,t,t,t,t],[t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,ne,ne,ne,ne,ne,ne,ne,ne,ne,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,ne,ne,t,t,t,t,t,t,t,ne,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,ne,t,ne,ne,ne,ne,ne,ne,ne,ue,ue,ue,ue,ue,ue,ue,ue,ue,ue,ue,ue,ue,ue,ue,ue,ue,ue,ue,ue,ue,ue,ue,ue,ue,ue,ue,ue,ue,ue,ue,ue,ue,ue,ue,ue,ue,ue,ue,ue,ue,ue,ue,ue,ue,r,ue,r,ue,ue,r,ue,ue,r,ue,ne,ne,ne,ne,ne,ne,ne,ne,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,ne,ne,ne,ne,ne,r,r,r,r,r,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne],[re,re,re,re,ne,ne,ne,ne,se,ce,ce,se,9,se,ne,ne,ue,ue,ue,ue,ue,ue,ue,ue,ue,ue,ue,se,ne,ne,se,se,se,se,se,se,se,se,se,se,se,se,se,se,se,se,se,se,se,se,se,se,se,se,se,se,se,se,se,se,se,se,se,se,se,se,se,se,se,se,se,se,se,se,se,ue,ue,ue,ue,ue,ue,ue,ue,ue,ue,ue,ue,ue,ue,ue,ue,ue,ue,ue,ue,ue,re,re,re,re,re,re,re,re,re,re,ce,re,re,se,se,se,ue,se,se,se,se,se,se,se,se,se,se,se,se,se,se,se,se,se,se,se,se,se,se,se,se,se,se,se,se,se,se,se,se,se,se,se,se,se,se,se,se,se,se,se,se,se,se,se,se,se,se,se,se,se,se,se,se,se,se,se,se,se,se,se,se,se,se,se,se,se,se,se,se,se,se,se,se,se,se,se,se,se,se,se,se,se,se,se,se,se,se,se,se,se,se,se,se,se,se,se,se,se,ue,ue,ue,ue,ue,ue,ue,re,ne,ue,ue,ue,ue,ue,ue,se,se,ue,ue,ne,ue,ue,ue,ue,se,se,te,te,te,te,te,te,te,te,te,te,se,se,se,se,se,se],[se,se,se,se,se,se,se,se,se,se,se,se,se,se,ne,se,se,ue,se,se,se,se,se,se,se,se,se,se,se,se,se,se,se,se,se,se,se,se,se,se,se,se,se,se,se,se,se,se,ue,ue,ue,ue,ue,ue,ue,ue,ue,ue,ue,ue,ue,ue,ue,ue,ue,ue,ue,ue,ue,ue,ue,ue,ue,ue,ue,ne,ne,se,se,se,se,se,se,se,se,se,se,se,se,se,se,se,se,se,se,se,se,se,se,se,se,se,se,se,se,se,se,se,se,se,se,se,se,se,se,se,se,se,se,se,se,se,se,se,se,se,se,se,se,se,se,se,se,se,se,se,se,se,se,se,se,se,se,se,se,se,se,se,se,se,se,se,se,se,se,se,se,se,se,se,se,se,se,se,se,se,ue,ue,ue,ue,ue,ue,ue,ue,ue,ue,ue,se,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,ue,ue,ue,ue,ue,ue,ue,ue,ue,r,r,ne,ne,ne,ne,r,ne,ne,ne,ne,ne],[ae,ae,ae,ae,ae,ae,ae,ae,ae,ae,ae,18,18,18,t,r,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ae,ie,13,14,15,16,17,9,ce,ce,ce,ce,ce,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,9,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ae,18,18,18,18,18,ne,ne,ne,ne,ne,18,18,18,18,18,18,te,t,ne,ne,te,te,te,te,te,te,10,10,ne,ne,ne,t,te,te,te,te,te,te,te,te,te,te,10,10,ne,ne,ne,ne,t,t,t,t,t,t,t,t,t,t,t,t,t,ne,ne,ne,ce,ce,ce,ce,ce,ce,ce,ce,ce,ce,ce,ce,ce,ce,ce,ce,ce,ce,ce,ce,ce,ce,ce,ce,ce,ce,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ue,ue,ue,ue,ue,ue,ue,ue,ue,ue,ue,ue,ue,ue,ue,ue,ue,ue,ue,ue,ue,ue,ue,ue,ue,ue,ue,ue,ue,ue,ue,ue,ue,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne],[t,t,t,t,t,t,t,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,t,t,t,t,t,ne,ne,ne,ne,ne,r,ue,r,r,r,r,r,r,r,r,r,r,10,r,r,r,r,r,r,r,r,r,r,r,r,r,ne,r,r,r,r,r,ne,r,ne,r,r,ne,r,r,ne,r,r,r,r,r,r,r,r,r,r,se,se,se,se,se,se,se,se,se,se,se,se,se,se,se,se,se,se,se,se,se,se,se,se,se,se,se,se,se,se,se,se,se,se,se,se,se,se,se,se,se,se,se,se,se,se,se,se,se,se,se,se,se,se,se,se,se,se,se,se,se,se,se,se,se,se,se,se,se,se,se,se,se,se,se,se,se,se,se,se,se,se,se,se,se,se,se,se,se,se,se,se,se,se,se,se,se,se,se,se,se,se,se,se,se,se,se,se,se,se,se,se,se,se,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,se,se,se,se,se,se,se,se,se,se,se,se,se,se,se,se,se,se,se,se,se,se,se,se,se,se,se,se,se,se,se,se,se,se,se,se,se,se,se,se,se,se,se,se,se],[ue,ue,ue,ue,ue,ue,ue,ue,ue,ue,ue,ue,ue,ue,ue,ue,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ue,ue,ue,ue,ue,ue,ue,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,9,ne,9,ne,ne,9,ne,ne,ne,ne,ne,ne,ne,ne,ne,ce,ne,ne,10,10,ne,ne,ne,ne,ne,ce,ce,ne,ne,ne,ne,ne,se,se,se,se,se,ne,se,se,se,se,se,se,se,se,se,se,se,se,se,se,se,se,se,se,se,se,se,se,se,se,se,se,se,se,se,se,se,se,se,se,se,se,se,se,se,se,se,se,se,se,se,se,se,se,se,se,se,se,se,se,se,se,se,se,se,se,se,se,se,se,se,se,se,se,se,se,se,se,se,se,se,se,se,se,se,se,se,se,se,se,se,se,se,se,se,se,se,se,se,se,se,se,se,se,se,se,se,se,se,se,se,se,se,se,se,se,se,se,se,se,se,se,se,se,se,se,se,se,se,se,se,se,se,se,se,se,se,se,se,se,se,ne,ne,18],[ne,ne,ne,ce,ce,ce,ne,ne,ne,ne,ne,10,9,10,9,9,te,te,te,te,te,te,te,te,te,te,9,ne,ne,ne,ne,ne,ne,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,ne,ne,ne,ne,ne,ne,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,ne,ne,ne,t,t,t,t,t,t,ne,ne,t,t,t,t,t,t,ne,ne,t,t,t,t,t,t,ne,ne,t,t,t,ne,ne,ne,ce,ce,ne,ne,ne,ce,ce,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne]];return e})},"dojo/Stateful":function(){define(["./_base/declare","./_base/lang","./_base/array","./when"],function(e,t,r,n){return e("dojo.Stateful",null,{_attrPairNames:{},_getAttrNames:function(e){var t=this._attrPairNames;return t[e]?t[e]:t[e]={s:"_"+e+"Setter",g:"_"+e+"Getter"}},postscript:function(e){e&&this.set(e)},_get:function(e,t){return"function"==typeof this[t.g]?this[t.g]():this[e]},get:function(e){return this._get(e,this._getAttrNames(e))},set:function(e,t){if("object"==typeof e){for(var r in e)e.hasOwnProperty(r)&&"_watchCallbacks"!=r&&this.set(r,e[r]);return this}r=this._getAttrNames(e);var i=this._get(e,r);r=this[r.s];var o;if("function"==typeof r?o=r.apply(this,Array.prototype.slice.call(arguments,1)):this[e]=t,this._watchCallbacks){var s=this;n(o,function(){s._watchCallbacks(e,i,t)})}return this},_changeAttrValue:function(e,t){var r=this.get(e);return this[e]=t,this._watchCallbacks&&this._watchCallbacks(e,r,t),this},watch:function(e,t){var n=this._watchCallbacks;if(!n)var i=this,n=this._watchCallbacks=function(e,t,r,o){var s=function(n){if(n){n=n.slice();for(var o=0,s=n.length;o<s;o++)n[o].call(i,e,t,r)}};s(n["_"+e]),o||s(n["*"])};t||"function"!=typeof e?e="_"+e:(t=e,e="*");var o=n[e];"object"!=typeof o&&(o=n[e]=[]),o.push(t);var s={};return s.unwatch=s.remove=function(){var e=r.indexOf(o,t);-1<e&&o.splice(e,1)},s}})})},"esri/layers/vectorTiles/views/2d/engine/webgl/TextShaping":function(){define(["require","exports","./Rect"],function(e,t,r){return function(){function e(e,t,r,n,i,o,s,a){this._glyphItems=e,this._maxWidth=t,this._lineHeight=r,this._letterSpacing=n,this._offset=i,this._hAnchor=o,this._vAnchor=s,this._justify=a}return e.prototype.getShaping=function(e,t){for(var r=this._letterSpacing,n=this._lineHeight,i=this._justify,o=this._maxWidth,s=[],a=0,c=0,u=0,l=0,f=-1,h=0,p=-1,d=e.length,y=0;y<d;y++){var m=e.charCodeAt(y);if(10===m){if(y!==d-1){if(f>=l){var a=s[f],v=a.x+a.glyphMosaicItem.metrics.advance,h=Math.max(v,h);i&&this._applyJustification(s,l,f),l=s.length}c=t?c-n:c+n,a=0,++u}}else{for(var v=void 0,g=0,x=this._glyphItems;g<x.length&&!(v=x[g][m]);g++);if(v){if(s.push({codePoint:m,x:a,y:c,glyphMosaicItem:v}),a+=v.metrics.advance+r,0<o&&a>o&&0<=p){for(g=p+1,v=s[g].x,h=Math.max(v,h),x=g;x<s.length;x++)s[x].y=t?s[x].y-n:s[x].y+n,s[x].x-=v;i&&this._applyJustification(s,l,p),c=t?c-n:c+n,a-=v,++u,l=g,p=-1}++f,32===m&&(p=s.length-1)}}}if(f>=l&&(a=s[f],h=Math.max(h,a.x+a.glyphMosaicItem.metrics.advance),i&&this._applyJustification(s,l,f)),0<s.length)for(r=(i-this._hAnchor)*h,i=(-this._vAnchor*(u+1)+.5)*n,t&&u&&(i+=u*n),r+=this._offset[0],i+=this._offset[1],n=0;n<s.length;n++)u=s[n],u.x+=r,u.y+=i;return s},e.getBox=function(e){var t=e.length;if(0!==t){for(var r=e[0].x+e[0].glyphMosaicItem.metrics.left,n=r,i=e[0].y,o=i,s=i,a=1;a<t;a++){var c=e[a],u=c.x+c.glyphMosaicItem.metrics.left;u<r&&(r=u),u>n&&(n=u),c=c.y,c<i&&(i=c),c>o&&(o=c),c!==s&&(n=Math.max(n,e[a-1].x+e[a-1].glyphMosaicItem.metrics.left+e[a-1].glyphMosaicItem.metrics.width),s=c)}return n=Math.max(n,e[t-1].x+e[t-1].glyphMosaicItem.metrics.left+e[t-1].glyphMosaicItem.metrics.width),o+=12,{x:r,y:o,width:n-r,height:o-(i-12)}}},e.addDecoration=function(e,t){var n=e.length;if(0!==n){for(var i=e[0].x+e[0].glyphMosaicItem.metrics.left,o=e[0].y,s=1;s<n;s++){var a=e[s];if(a.y!==o){var c=e[s-1].x+e[s-1].glyphMosaicItem.metrics.left+e[s-1].glyphMosaicItem.metrics.width;e.push({codePoint:0,x:i,y:o+t-3,glyphMosaicItem:{rect:new r(4,0,4,8),metrics:{width:c-i,height:8,left:0,top:0,advance:0},page:0}}),o=a.y,i=a.x+a.glyphMosaicItem.metrics.left}}n=e[n-1].x+e[n-1].glyphMosaicItem.metrics.left+e[n-1].glyphMosaicItem.metrics.width,e.push({codePoint:0,x:i,y:o+t-3,glyphMosaicItem:{rect:new r(4,0,4,8),metrics:{width:n-i,height:8,left:0,top:0,advance:0},page:0}})}},e.prototype._applyJustification=function(e,t,r){for(var n=e[r],n=(n.x+n.glyphMosaicItem.metrics.advance)*this._justify;t<=r;t++)e[t].x-=n},e}()})},"esri/layers/vectorTiles/views/2d/engine/webgl/Rect":function(){define(["require","exports"],function(e,t){return function(){function e(e,t,r,n){void 0===e&&(e=0),void 0===t&&(t=0),void 0===r&&(r=0),void 0===n&&(n=0),this.x=e,this.y=t,this.width=r,this.height=n}return Object.defineProperty(e.prototype,"isEmpty",{get:function(){return 0>=this.width||0>=this.height},enumerable:!0,configurable:!0}),e}()})},"esri/layers/vectorTiles/views/vectorTiles/TileParser":function(){define("require exports dojo/promise/all ../../core/executeAsync ../../core/pbf ../../core/promiseUtils ../2d/engine/webgl/TileClipper ../2d/tiling/enums ./BackgroundBucket ./CircleBucket ./Feature ./FillBucket ./LineBucket ./SourceLayerData ./SymbolBucket".split(" "),function(e,t,r,n,i,o,s,a,c,u,l,f,h,p,d){return function(){function e(e,t,r){this._pbfTile=new i(new Uint8Array(e),new DataView(e)),this._tile=t,this._connection=r,this._layers=t.getLayers(),r=t.tileKey.split("/").map(parseFloat);var n=r[0];e=r[1],r=r[2],this._level=n,t.refKey&&(t=t.refKey.split("/").map(parseFloat)[0],0<(t=n-t)&&(n=(1<<t)-1,this._tileClipper=new s.TileClipper(t,e&n,r&n))),this._tileClipper||(this._tileClipper=new s.SimpleBuilder)}return e.prototype.parse=function(){for(var e,t=this,i=this._parseTileData(this._pbfTile),s=this._layers,c=s.length,u=this._level,f=[],h={},p=new Set,c=c-1;0<=c;c--)if(e=s[c],!(e.minzoom&&u<e.minzoom||e.maxzoom&&u>=e.maxzoom||e.layout&&"none"===e.layout.visibility))if(0===e.type)e=this._createBucket(e),e.layerIndex=c,f.push(e);else{var d=e.sourceLayer,y=i[d];y&&(p.add(d),e=this._createBucket(e))&&(e.layerIndex=c,e.layerExtent=y.extent,(y=h[d])||(y=h[d]=[]),y.push(e))}var m=10*this._level,v=10*(this._level+1),g=[],x=[],_=[],b=[],w=this._tileClipper,I=new Set,k={},D=[];p.forEach(function(e){return D.push(e)});var C=0,T=0,S=D.length;return n(function(){if(t._tile.status===a.TileStatus.INVALID)return!0;switch(C){case 0:if(T<S){var e=D[T++],r=i[e],n=h[e];if(n&&0!==n.length)for(e=r.getData();e.next(2);){var o=new l(e.getMessage(),r),s=o.values;if(s){var c=s._minzoom;if(c&&c>=v)continue;if((s=s._maxzoom)&&s<=m)continue}for(var c=0,u=n;c<u.length;c++)s=u[c],s.pushFeature(o)}}else{r=t._tile;for(e in h)for(n=h[e],o=0;o<n.length;o++)s=n[o],s.hasFeatures()&&(3===s.layer.type?(g.push(s),r.addBucket(s)):s.layer.refLayerId?_.push(s):(x.push(s),b[s.layer.id]=s));C=1,T=0,S=g.length}break;case 1:T<S?g[T++].getResources(w,I,k):C=2}return 2===C}).then(function(){if(t._tile.status===a.TileStatus.INVALID)return[];var e,i=[],s=t._tile.getWorkerTileHandler();0<I.size&&(e=s.fetchSprites(I,t._connection),i.push(e));for(var c in k)e=k[c],0<e.size&&(e=s.fetchGlyphs(t._tile.tileKey,c,e,t._connection),i.push(e));return r(i).then(function(e){if(t._tile.status===a.TileStatus.INVALID)return[];var r=0,i=0,o=x.length;return n(function(){if(t._tile.status===a.TileStatus.INVALID)return!0;switch(r){case 0:if(i<o){var e=x[i++];e.processFeatures(w,t._tile),f.push(e)}else r=1,i=0,o=_.length;break;case 1:for(var n=0;n<_.length;n++){var e=_[n],s=b[e.layer.refLayerId];s&&(s.assignBufferInfo(e),f.push(e))}r=2,i=0,o=g.length;break;case 2:i<o?(e=g[i++],e.processFeatures(w,t._tile),f.push(e)):r=3}return 3===r}).then(function(){return f.sort(function(e,t){return e.layerIndex-t.layerIndex}),f})}).catch(function(e){return o.reject(Error(e))})}).catch(function(e){return o.reject(Error(e))})},e.prototype._parseTileData=function(e){for(var t={};e.next();)switch(e.tag()){case 3:var r=new p(e.getMessage());t[r.name]=r;break;default:e.skip()}return t},e.prototype._createBucket=function(e){switch(e.type){case 0:return this._createBackgroundBucket(e);case 1:return this._createFillBucket(e);case 2:return this._createLineBucket(e);case 4:return this._createCircleBucket(e);case 3:return this._createSymbolBucket(e)}},e.prototype._createBackgroundBucket=function(e){return new c(e,this._level)},e.prototype._createFillBucket=function(e){var t=this._tile;return new f(e,this._level,e.hasDataDrivenFill?t.fillDDVertexBuffer:t.fillVertexBuffer,t.fillIndexBuffer,e.hasDataDrivenOutline?t.outlineDDVertexBuffer:t.outlineVertexBuffer,t.outlineIndexBuffer)},e.prototype._createLineBucket=function(e){var t=this._tile;return new h(e,this._level,e.hasDataDrivenLine?t.lineDDVertexBuffer:t.lineVertexBuffer,t.lineIndexBuffer)},e.prototype._createCircleBucket=function(e){var t=this._tile;return new u(e,this._level,t.circleVertexBuffer,t.circleIndexBuffer)},e.prototype._createSymbolBucket=function(e){var t=this._tile;return new d(e,this._level,e.hasDataDrivenIcon?t.iconDDVertexBuffer:t.iconVertexBuffer,t.iconIndexBuffer,e.hasDataDrivenText?t.textDDVertexBuffer:t.textVertexBuffer,t.textIndexBuffer,t.placementEngine,t.getWorkerTileHandler())},e}()})},"esri/layers/vectorTiles/core/pbf":function(){define(["require","exports"],function(e,t){return function(){function e(e,t,r,n){this._tag=0,this._dataType=99,this._data=e,this._dataView=t,this._pos=r||0,this._end=n||e.byteLength}return e.prototype.clone=function(){return new e(this._data,this._dataView,this._pos,this._end)},e.prototype.pos=function(){return this._pos},e.prototype.next=function(e){for(;;){if(this._pos===this._end)return!1;var t=this._decodeVarint();if(this._tag=t>>3,this._dataType=7&t,!e||e===this._tag)break;this.skip()}return!0},e.prototype.empty=function(){return this._pos>=this._end},e.prototype.tag=function(){return this._tag},e.prototype.getInt32=function(){return this._decodeVarint()},e.prototype.getInt64=function(){return this._decodeVarint()},e.prototype.getUInt32=function(){var e=4294967295,e=(127&this._data[this._pos])>>>0;return 128>this._data[this._pos++]?e:(e=(e|(127&this._data[this._pos])<<7)>>>0,128>this._data[this._pos++]?e:(e=(e|(127&this._data[this._pos])<<14)>>>0,128>this._data[this._pos++]?e:(e=(e|(127&this._data[this._pos])<<21)>>>0,128>this._data[this._pos++]?e:(e=(e|(15&this._data[this._pos])<<28)>>>0,128>this._data[this._pos++]?e:void 0))))},e.prototype.getUInt64=function(){return this._decodeVarint()},e.prototype.getSInt32=function(){var e=this.getUInt32();return e>>>1^-(1&e)|0},e.prototype.getSInt64=function(){return this._decodeSVarint()},e.prototype.getBool=function(){var e=0!==this._data[this._pos];return this._skip(1),e},e.prototype.getEnum=function(){return this._decodeVarint()},e.prototype.getFixed64=function(){var e=this._dataView,t=this._pos,e=e.getUint32(t,!0)+4294967296*e.getUint32(t+4,!0);return this._skip(8),e},e.prototype.getSFixed64=function(){var e=this._dataView,t=this._pos,e=e.getUint32(t,!0)+4294967296*e.getInt32(t+4,!0);return this._skip(8),e},e.prototype.getDouble=function(){var e=this._dataView.getFloat64(this._pos,!0);return this._skip(8),e},e.prototype.getFixed32=function(){var e=this._dataView.getUint32(this._pos,!0);return this._skip(4),e},e.prototype.getSFixed32=function(){var e=this._dataView.getInt32(this._pos,!0);return this._skip(4),e},e.prototype.getFloat=function(){var e=this._dataView.getFloat32(this._pos,!0);return this._skip(4),e},e.prototype.getString=function(){var e=this._getLength(),t=this._pos,t=this._toString(this._data,t,t+e);return this._skip(e),t},e.prototype.getBytes=function(){var e=this._getLength(),t=this._pos,t=this._toBytes(this._data,t,t+e);return this._skip(e),t},e.prototype.getMessage=function(){var t=this._getLength(),r=this._pos,r=new e(this._data,this._dataView,r,r+t);return this._skip(t),r},e.prototype.skip=function(){switch(this._dataType){case 0:this._decodeVarint();break;case 1:this._skip(8);break;case 2:this._skip(this._getLength());break;case 5:this._skip(4);break;default:throw Error("Invalid data type!")}},e.prototype._skip=function(e){if(this._pos+e>this._end)throw Error("Attempt to skip past the end of buffer!");this._pos+=e},e.prototype._decodeVarint=function(){var e,t=this._data,r=this._pos,n=0;if(10<=this._end-r){if(e=t[r++],n|=127&e,0!=(128&e)&&(e=t[r++],n|=(127&e)<<7,0!=(128&e)&&(e=t[r++],n|=(127&e)<<14,0!=(128&e)&&(e=t[r++],n|=(127&e)<<21,0!=(128&e)&&(e=t[r++],n+=268435456*(127&e),0!=(128&e)&&(e=t[r++],n+=34359738368*(127&e),0!=(128&e)&&(e=t[r++],n+=4398046511104*(127&e),0!=(128&e)&&(e=t[r++],n+=562949953421312*(127&e),0!=(128&e)&&(e=t[r++],n+=72057594037927940*(127&e),0!=(128&e)&&(e=t[r++],n+=0x8000000000000000*(127&e),0!=(128&e)))))))))))throw Error("Varint too long!")}else{for(var i=1;r!==this._end&&0!=(128&(e=t[r]));)++r,n+=(127&e)*i,i*=128;if(r===this._end)throw Error("Varint overrun!");++r,n+=e*i}return this._pos=r,n},e.prototype._decodeSVarint=function(){var e=this._decodeVarint();return e%2?-(e+1)/2:e/2},e.prototype._getLength=function(){if(2!==this._dataType)throw Error("Not a delimited data type!");return this._decodeVarint()},e.prototype._toString=function(e,t,r){var n="",i="";for(r=Math.min(this._end,r);t<r;++t){var o=e[t];128&o?i+="%"+o.toString(16):(n+=decodeURIComponent(i)+String.fromCharCode(o),i="")}return i.length&&(n+=decodeURIComponent(i)),n},e.prototype._toBytes=function(e,t,r){return r=Math.min(this._end,r),new Uint8Array(e.buffer,t,r-t)},e}()})},"esri/layers/vectorTiles/views/2d/engine/webgl/TileClipper":function(){define(["require","exports","./Geometry","./GeometryUtils"],function(e,t,r,n){Object.defineProperty(t,"__esModule",{value:!0});var i=function(){return function(e,t,r){this.ratio=e,this.x=t,this.y=r}}();e=function(){function e(e,t,r,n,i){void 0===n&&(n=8),void 0===i&&(i=8),this.lines=[],this.starts=[],this.pixelRatio=n,this.pixelMargin=i,this.tileSize=512*n,this.dz=e,this.yPos=t,this.xPos=r}return e.prototype.setExtent=function(e){this.finalRatio=this.tileSize/e*(1<<this.dz);var t=this.pixelRatio*this.pixelMargin,t=t/this.finalRatio;e>>=this.dz,t>e&&(t=e),this.margin=t,this.xmin=e*this.xPos-t,this.ymin=e*this.yPos-t,this.xmax=this.xmin+e+2*t,this.ymax=this.ymin+e+2*t},e.prototype.reset=function(e){this.type=e,this.lines=[],this.starts=[],this.line=null,this.start=0},e.prototype.moveTo=function(e,t){this._pushLine(),this._prevIsIn=this._isIn(e,t),this._moveTo(e,t,this._prevIsIn),this._prevPt=new r.Point(e,t),this._firstPt=new r.Point(e,t),this._dist=0},e.prototype.lineTo=function(e,t){var n,o,s,a,c,u=this._isIn(e,t),l=new r.Point(e,t),f=r.Point.distance(this._prevPt,l);if(u)this._prevIsIn?this._lineTo(e,t,!0):(n=this._prevPt,o=l,s=this._intersect(o,n),this.start=this._dist+f*(1-this._r),this._lineTo(s.x,s.y,!0),this._lineTo(o.x,o.y,!0));else if(this._prevIsIn)o=this._prevPt,n=l,s=this._intersect(o,n),this._lineTo(s.x,s.y,!0),this._lineTo(n.x,n.y,!1);else{var h=this._prevPt;if(!(h.x<=this.xmin&&l.x<=this.xmin||h.x>=this.xmax&&l.x>=this.xmax||h.y<=this.ymin&&l.y<=this.ymin||h.y>=this.ymax&&l.y>=this.ymax))if(n=[],(h.x<this.xmin&&l.x>this.xmin||h.x>this.xmin&&l.x<this.xmin)&&(o=(this.xmin-h.x)/(l.x-h.x),c=h.y+o*(l.y-h.y),c<=this.ymin?a=!1:c>=this.ymax?a=!0:n.push(new i(o,this.xmin,c))),(h.x<this.xmax&&l.x>this.xmax||h.x>this.xmax&&l.x<this.xmax)&&(o=(this.xmax-h.x)/(l.x-h.x),c=h.y+o*(l.y-h.y),c<=this.ymin?a=!1:c>=this.ymax?a=!0:n.push(new i(o,this.xmax,c))),(h.y<this.ymin&&l.y>this.ymin||h.y>this.ymin&&l.y<this.ymin)&&(o=(this.ymin-h.y)/(l.y-h.y),c=h.x+o*(l.x-h.x),c<=this.xmin?s=!1:c>=this.xmax?s=!0:n.push(new i(o,c,this.ymin))),(h.y<this.ymax&&l.y>this.ymax||h.y>this.ymax&&l.y<this.ymax)&&(o=(this.ymax-h.y)/(l.y-h.y),c=h.x+o*(l.x-h.x),c<=this.xmin?s=!1:c>=this.xmax?s=!0:n.push(new i(o,c,this.ymax))),0===n.length)s?a?this._lineTo(this.xmax,this.ymax,!0):this._lineTo(this.xmax,this.ymin,!0):a?this._lineTo(this.xmin,this.ymax,!0):this._lineTo(this.xmin,this.ymin,!0);else if(1<n.length&&n[0].ratio>n[1].ratio)this.start=this._dist+f*n[1].ratio,this._lineTo(n[1].x,n[1].y,!0),this._lineTo(n[0].x,n[0].y,!0);else for(this.start=this._dist+f*n[0].ratio,o=0;o<n.length;o++)this._lineTo(n[o].x,n[o].y,!0);this._lineTo(l.x,l.y,!1)}this._dist+=f,this._prevIsIn=u,this._prevPt=l},e.prototype.close=function(){if(2<this.line.length){var e=this._firstPt,t=this._prevPt;for(e.x===t.x&&e.y===t.y||this.lineTo(e.x,e.y),e=this.line,t=e.length;4<=t&&(e[0].x===e[1].x&&e[0].x===e[t-2].x||e[0].y===e[1].y&&e[0].y===e[t-2].y);)e.pop(),e[0].x=e[t-2].x,e[0].y=e[t-2].y,--t}},e.prototype.result=function(e){return void 0===e&&(e=!0),this._pushLine(),0===this.lines.length?null:(3===this.type&&e&&o.simplify(this.tileSize,this.margin*this.finalRatio,this.lines),this.lines)},e.prototype.resultWithStarts=function(){if(2!==this.type)throw Error("Only valid for lines");this._pushLine();var e=this.lines,t=e.length;if(0===t)return null;for(var r=[],n=0;n<t;n++)r.push({line:e[n],start:this.starts[n]||0});return r},e.prototype._isIn=function(e,t){return e>=this.xmin&&e<=this.xmax&&t>=this.ymin&&t<=this.ymax},e.prototype._intersect=function(e,t){var n,i,o;if(t.x>=this.xmin&&t.x<=this.xmax)i=t.y<=this.ymin?this.ymin:this.ymax,o=(i-e.y)/(t.y-e.y),n=e.x+o*(t.x-e.x);else if(t.y>=this.ymin&&t.y<=this.ymax)n=t.x<=this.xmin?this.xmin:this.xmax,o=(n-e.x)/(t.x-e.x),i=e.y+o*(t.y-e.y);else{i=t.y<=this.ymin?this.ymin:this.ymax,n=t.x<=this.xmin?this.xmin:this.xmax;var s=(n-e.x)/(t.x-e.x),a=(i-e.y)/(t.y-e.y);s<a?(o=s,i=e.y+s*(t.y-e.y)):(o=a,n=e.x+a*(t.x-e.x))}return this._r=o,new r.Point(n,i)},e.prototype._pushLine=function(){this.line&&(1===this.type?0<this.line.length&&(this.lines.push(this.line),this.starts.push(this.start)):2===this.type?1<this.line.length&&(this.lines.push(this.line),this.starts.push(this.start)):3===this.type&&3<this.line.length&&(this.lines.push(this.line),this.starts.push(this.start))),this.line=[],this.start=0},e.prototype._moveTo=function(e,t,n){3!==this.type?n&&(e=Math.round((e-(this.xmin+this.margin))*this.finalRatio),t=Math.round((t-(this.ymin+this.margin))*this.finalRatio),this.line.push(new r.Point(e,t))):(n||(e<this.xmin&&(e=this.xmin),e>this.xmax&&(e=this.xmax),t<this.ymin&&(t=this.ymin),t>this.ymax&&(t=this.ymax)),e=Math.round((e-(this.xmin+this.margin))*this.finalRatio),t=Math.round((t-(this.ymin+this.margin))*this.finalRatio),this.line.push(new r.Point(e,t)),this._is_v=this._is_h=!1)},e.prototype._lineTo=function(e,t,n){if(3!==this.type)if(n){if(e=Math.round((e-(this.xmin+this.margin))*this.finalRatio),t=Math.round((t-(this.ymin+this.margin))*this.finalRatio),0<this.line.length&&(n=this.line[this.line.length-1],n.equals(e,t)))return;this.line.push(new r.Point(e,t))}else this.line&&0<this.line.length&&this._pushLine();else if(n||(e<this.xmin&&(e=this.xmin),e>this.xmax&&(e=this.xmax),t<this.ymin&&(t=this.ymin),t>this.ymax&&(t=this.ymax)),e=Math.round((e-(this.xmin+this.margin))*this.finalRatio),t=Math.round((t-(this.ymin+this.margin))*this.finalRatio),this.line&&0<this.line.length){n=this.line[this.line.length-1];var i=n.x===e,o=n.y===t;i&&o||(this._is_h&&i?(n.x=e,n.y=t,n=this.line[this.line.length-2],n.x===e&&n.y===t?(this.line.pop(),1>=this.line.length?this._is_v=this._is_h=!1:(n=this.line[this.line.length-2],this._is_h=n.x===e,this._is_v=n.y===t)):(this._is_h=n.x===e,this._is_v=n.y===t)):this._is_v&&o?(n.x=e,n.y=t,n=this.line[this.line.length-2],n.x===e&&n.y===t?(this.line.pop(),1>=this.line.length?this._is_v=this._is_h=!1:(n=this.line[this.line.length-2],this._is_h=n.x===e,this._is_v=n.y===t)):(this._is_h=n.x===e,this._is_v=n.y===t)):(this.line.push(new r.Point(e,t)),this._is_h=i,this._is_v=o))}else this.line.push(new r.Point(e,t))},e}(),t.TileClipper=e,e=function(){function e(){}return e.prototype.setExtent=function(e){this._ratio=4096===e?1:4096/e},e.prototype.reset=function(e){this.type=e,this.lines=[],this.line=null},e.prototype.moveTo=function(e,t){this.line&&this.lines.push(this.line),this.line=[];var n=this._ratio;this.line.push(new r.Point(Math.round(e*n),Math.round(t*n)))},e.prototype.lineTo=function(e,t){var n=this._ratio;this.line.push(new r.Point(Math.round(e*n),Math.round(t*n)))},e.prototype.close=function(){var e=this.line;e&&!e[0].isEqual(e[e.length-1])&&e.push(e[0])},e.prototype.result=function(){return this.line&&this.lines.push(this.line),0===this.lines.length?null:(3===this.type&&1!==this._ratio&&o.simplify(4096,64,this.lines),this.lines)},e}(),t.SimpleBuilder=e;var o=function(){function e(){}return e.simplify=function(t,r,n){if(n){var i=-r,o=t+r,s=-r,a=t+r;t=[],r=[];for(var c=n.length,u=0;u<c;++u){var l=n[u];if(l&&!(2>l.length))for(var f=l[0],h=void 0,p=l.length,d=1;d<p;++d)h=l[d],f.x===h.x&&(f.x<=i&&(f.y>h.y?(t.push(u),t.push(d),t.push(0),t.push(-1)):(r.push(u),r.push(d),r.push(0),r.push(-1))),f.x>=o&&(f.y<h.y?(t.push(u),t.push(d),t.push(1),t.push(-1)):(r.push(u),r.push(d),r.push(1),r.push(-1)))),f.y===h.y&&(f.y<=s&&(f.x<h.x?(t.push(u),t.push(d),t.push(2),t.push(-1)):(r.push(u),r.push(d),r.push(2),r.push(-1))),f.y>=a&&(f.x>h.x?(t.push(u),t.push(d),t.push(3),t.push(-1)):(r.push(u),r.push(d),r.push(3),r.push(-1)))),f=h}0!==t.length&&0!==r.length&&(e.fillParent(n,r,t),e.fillParent(n,t,r),i=[],e.calcDeltas(i,r,t),e.calcDeltas(i,t,r),e.addDeltas(i,n))}},e.fillParent=function(e,t,r){for(var i=r.length,o=t.length,s=0;s<o;s+=4){for(var a=t[s],c=t[s+1],u=t[s+2],l=e[a][c-1],a=e[a][c],c=8092,f=-1,h=0;h<i;h+=4)if(r[h+2]===u){var p=r[h],d=r[h+1],y=e[p][d-1],p=e[p][d];switch(u){case 0:case 1:n.between(l.y,y.y,p.y)&&n.between(a.y,y.y,p.y)&&(y=Math.abs(p.y-y.y))<c&&(c=y,f=h);break;case 2:case 3:n.between(l.x,y.x,p.x)&&n.between(a.x,y.x,p.x)&&(y=Math.abs(p.x-y.x))<c&&(c=y,f=h)}}t[s+3]=f}},e.calcDeltas=function(t,r,n){for(var i=r.length,o=0;o<i;o+=4){var s=e.calcDelta(o,r,n,[]);t.push(r[o]),t.push(r[o+1]),t.push(r[o+2]),t.push(s)}},e.calcDelta=function(t,r,n,i){if(-1===(t=r[t+3]))return 0;var o=i.length;return 1<o&&i[o-2]===t?0:(i.push(t),e.calcDelta(t,n,r,i)+1)},e.addDeltas=function(e,t){for(var r=e.length,n=0,i=0;i<r;i+=4){var o=e[i+3];o>n&&(n=o)}for(i=0;i<r;i+=4){var s=t[e[i]],a=e[i+1],o=n-e[i+3];switch(e[i+2]){case 0:s[a-1].x-=o,s[a].x-=o,1===a&&(s[s.length-1].x-=o),a===s.length-1&&(s[0].x-=o);break;case 1:s[a-1].x+=o,s[a].x+=o,1===a&&(s[s.length-1].x+=o),a===s.length-1&&(s[0].x+=o);break;case 2:s[a-1].y-=o,s[a].y-=o,1===a&&(s[s.length-1].y-=o),a===s.length-1&&(s[0].y-=o);break;case 3:s[a-1].y+=o,s[a].y+=o,1===a&&(s[s.length-1].y+=o),a===s.length-1&&(s[0].y+=o)}}},e}()})},"esri/layers/vectorTiles/views/2d/engine/webgl/GeometryUtils":function(){define(["require","exports"],function(e,t){function r(e,t){return e%=t,0<=e?e:e+t}Object.defineProperty(t,"__esModule",{value:!0}),t.C_INFINITY=Number.POSITIVE_INFINITY,t.C_PI=Math.PI,t.C_2PI=2*t.C_PI,t.C_PI_BY_2=t.C_PI/2,t.C_RAD_TO_256=128/t.C_PI,t.C_256_TO_RAD=t.C_PI/128,t.C_DEG_TO_256=256/360,t.C_DEG_TO_RAD=t.C_PI/180,t.C_SQRT2=1.414213562,t.C_SQRT2_INV=1/t.C_SQRT2;var n=1/Math.LN2;t.positiveMod=r,t.radToByte=function(e){return r(e*t.C_RAD_TO_256,256)},t.degToByte=function(e){return r(e*t.C_DEG_TO_256,256)},t.log2=function(e){return Math.log(e)*n},t.sqr=function(e){return e*e},t.clamp=function(e,t,r){return Math.min(Math.max(e,t),r)
},t.interpolate=function(e,t,r){return e*(1-r)+t*r},t.between=function(e,t,r){return e>=t&&e<=r||e>=r&&e<=t}})},"esri/layers/vectorTiles/views/vectorTiles/Feature":function(){define(["require","exports","../2d/engine/webgl/Geometry"],function(e,t,r){return function(){function e(e,t){this.values={};for(var r=t.keys,n=t.values;e.next();)switch(e.tag()){case 1:this.id=e.getUInt64();break;case 2:for(var i=e.getMessage(),o=this.values;!i.empty();){var s=i.getUInt32(),a=i.getUInt32();o[r[s]]=n[a]}break;case 3:this.type=e.getUInt32();break;case 4:this._pbfGeometry=e.getMessage();break;default:e.skip()}}return e.prototype.getGeometry=function(e){if(void 0!==this._geometry)return this._geometry;var t,n,i=this._pbfGeometry;e?e.reset(this.type):t=[];for(var o=1,s=0,a=0,c=0;!i.empty();)switch(0===s&&(s=i.getUInt32(),o=7&s,s>>=3),s--,o){case 1:a+=i.getSInt32(),c+=i.getSInt32(),e?e.moveTo(a,c):(n&&t.push(n),n=[],n.push(new r.Point(a,c)));break;case 2:a+=i.getSInt32(),c+=i.getSInt32(),e?e.lineTo(a,c):n.push(new r.Point(a,c));break;case 7:e?e.close():n&&!n[0].equals(a,c)&&n.push(n[0].clone());break;default:throw Error("Invalid path operation")}return e?e=e.result():(n&&t.push(n),e=t),this._geometry=e},e}()})},"esri/layers/vectorTiles/views/vectorTiles/SourceLayerData":function(){define(["require","exports"],function(e,t){return function(){function e(t){for(this.extent=4096,this.keys=[],this.values=[],this._pbfLayer=t.clone();t.next();)switch(t.tag()){case 1:this.name=t.getString();break;case 3:this.keys.push(t.getString());break;case 4:this.values.push(e._parseValue(t.getMessage()));break;case 5:this.extent=t.getUInt32();break;default:t.skip()}}return e.prototype.getData=function(){return this._pbfLayer},e._parseValue=function(e){for(;e.next();)switch(e.tag()){case 1:return e.getString();case 2:return e.getFloat();case 3:return e.getDouble();case 4:return e.getInt64();case 5:return e.getUInt64();case 6:return e.getSInt64();case 7:return e.getBool();default:e.skip()}return null},e}()})},"esri/layers/vectorTiles/views/vectorTiles/VertexMemoryBuffer":function(){define("require exports ../../core/tsSupport/extendsHelper ../../core/tsSupport/decorateHelper ./GeometryUtils ./MemoryBuffer".split(" "),function(e,t,r,n,i,o){Object.defineProperty(t,"__esModule",{value:!0});var s=new Float32Array(1),a=new Uint32Array(s.buffer);e=function(e){function t(t){var r=e.call(this,t?20:12)||this;return r._isDataDriven=t,r}return r(t,e),t.prototype.isDataDriven=function(){return this._isDataDriven},t.prototype.add=function(e,t,r,n,i,c,u,l){var f=this.array;if(e=o.i1616to32(e,t),f.push(e),e=o.i8888to32(Math.round(31*r),Math.round(31*n),Math.round(31*i),Math.round(31*c)),f.push(e),e=o.i1616to32(u,0),f.push(e),this._isDataDriven){if(!l)throw Error("Expecting data driven values.");r=l.color,n=r[3]*l.opacity*255,f.push(o.i8888to32(r[0]*n,r[1]*n,r[2]*n,n)),s[0]=l.size,f.push(a[0])}},t}(o),t.LineVertexBuffer=e,e=function(e){function t(t){var r=e.call(this,t?8:4)||this;return r._isDataDriven=t,r}return r(t,e),t.prototype.isDataDriven=function(){return this._isDataDriven},t.prototype.add=function(e,t,r){var n=this.array;if(n.push(o.i1616to32(e,t)),this._isDataDriven){if(!r)throw Error("Expecting data driven values.");e=r.color,r=e[3]*r.opacity*255,n.push(o.i8888to32(e[0]*r,e[1]*r,e[2]*r,r))}},t}(o),t.FillVertexBuffer=e,e=function(e){function t(t){var r=e.call(this,t?12:8)||this;return r._isDataDriven=t,r}return r(t,e),t.prototype.isDataDriven=function(){return this._isDataDriven},t.prototype.add=function(e,t,r,n,i,s,a){var c=this.array,u=this.index;if(e=o.i1616to32(e,t),c.push(e),e=o.i8888to32(Math.round(15*r),Math.round(15*n),i,s),c.push(e),this._isDataDriven){if(!a)throw Error("Expecting data driven values.");r=a.color,a=r[3]*a.opacity*255,c.push(o.i8888to32(r[0]*a,r[1]*a,r[2]*a,a))}return u},t}(o),t.OutlineVertexBuffer=e,e=function(e){function t(t){var r=e.call(this,t?24:16)||this;return r._isDataDriven=t,r}return r(t,e),t.prototype.isDataDriven=function(){return this._isDataDriven},t.prototype.add=function(e,t,r,n,c,u,l,f,h,p,d){var y=this.array;if(e=o.i1616to32(e,t),y.push(e),e=o.i1616to32(Math.round(8*r),Math.round(8*n)),y.push(e),e=o.i8888to32(c/4,u/4,0,0),y.push(e),e=o.i8888to32(Math.ceil(10*p),i.radToByte(l),10*f,Math.min(10*h,255)),y.push(e),this._isDataDriven){if(!d)throw Error("Expecting data driven values.");r=d.color,n=r[3]*d.opacity*255,y.push(o.i8888to32(r[0]*n,r[1]*n,r[2]*n,n)),s[0]=d.size,y.push(a[0])}},t}(o),t.SymbolVertexBuffer=e,e=function(e){function t(){return e.call(this,16)||this}return r(t,e),t.prototype.add=function(e,t,r,n,i,s,a,c,u,l,f){var h=this.array;e=o.i1616to32(2*e+r,2*t+n),h.push(e),a=s[3]*a*255,e=o.i8888to32(s[0]*a,s[1]*a,s[2]*a,a),h.push(e),s=l[3]*f*255,e=o.i8888to32(l[0]*s,l[1]*s,l[2]*s,s),h.push(e),e=o.i8888to32(Math.min(32*c,255),Math.min(4*u,255),Math.min(i,255),0),h.push(e)},t}(o),t.CircleVertexBuffer=e})},"esri/layers/vectorTiles/views/vectorTiles/style/StyleRepository":function(){define(["require","exports","dojo/has","./StyleLayer"],function(e,t,r,n){return function(){function e(t,n){if(this.styleJSON=t,this.version=parseFloat(t.version),this.sprite=n?n.spriteUrl:t.sprite,this.glyphs=n?n.glyphsUrl:t.glyphs,r("stable-symbol-rendering")){var i=(t.layers||[]).filter(function(e){return e.layout&&e.layout["text-font"]})[0];i&&(t.layers||[]).forEach(function(e){e.layout&&e.layout["text-font"]&&(e.layout["text-font"]=i.layout["text-font"])})}this.layers=(t.layers||[]).map(e._create),this._identifyRefLayers()}return e.prototype._identifyRefLayers=function(){for(var e=[],t=[],r=0,n=0,i=this.layers;n<i.length;n++){var o=i[n];if(1===o.type){var s=o,a=o.sourceLayer,a=a+"|"+JSON.stringify(o.minzoom),a=a+"|"+JSON.stringify(o.maxzoom),a=a+"|"+JSON.stringify(o.filter);(s.hasDataDrivenFill||s.hasDataDrivenOutline)&&(a+="|"+JSON.stringify(r)),e.push({key:a,layer:o})}2===o.type&&(s=o,a=o.sourceLayer,a+="|"+JSON.stringify(o.minzoom),a+="|"+JSON.stringify(o.maxzoom),a+="|"+JSON.stringify(o.filter),a+="|"+JSON.stringify(o.layout&&o.layout["line-cap"]),a+="|"+JSON.stringify(o.layout&&o.layout["line-join"]),s.hasDataDrivenLine&&(a+="|"+JSON.stringify(r)),t.push({key:a,layer:o})),++r}this._assignRefLayers(e),this._assignRefLayers(t)},e.prototype._assignRefLayers=function(e){e.sort(function(e,t){return e.key<t.key?-1:e.key>t.key?1:0});for(var t,r,n=e.length,i=0;i<n;i++){var o=e[i];if(o.key===t)o.layer.refLayerId=r;else if(t=o.key,r=o.layer.id,1===o.layer.type&&!o.layer.getPaintProperty("fill-outline-color"))for(var s=i+1;s<n;s++){var a=e[s];if(a.key!==t)break;if(a.layer.getPaintProperty("fill-outline-color")){e[i]=a,e[s]=o,r=a.layer.id;break}}}},e._create=function(e,t,r){switch(t=1-1/(r.length+1)*(1+t),e.type){case"background":return new n.BackgroundStyleLayer(0,e,t);case"fill":return new n.FillStyleLayer(1,e,t);case"line":return new n.LineStyleLayer(2,e,t);case"symbol":return new n.SymbolStyleLayer(3,e,t);case"raster":throw Error("Unsupported vector tile raster layer");case"circle":return new n.CircleStyleLayer(4,e,t)}throw Error("Unknown vector tile layer")},e}()})},"*now":function(e){e(['dojo/i18n!*preload*esri/layers/vectorTiles/core/workers/nls/worker-init*["ar","ca","cs","da","de","el","en-gb","en-us","es-es","fi-fi","fr-fr","he-il","hu","it-it","ja-jp","ko-kr","nl-nl","nb","pl","pt-br","pt-pt","ru","sk","sl","sv","th","tr","zh-tw","zh-cn","ROOT"]'])}}}),define("esri/layers/vectorTiles/core/workers/worker-init",[],1);