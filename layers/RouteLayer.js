/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.18/esri/copyright.txt for details.
*/
define(["../chunks/_rollupPluginBabelHelpers","../chunks/tslib.es6","../core/has","../core/Logger","../core/accessorSupport/ensureType","../core/accessorSupport/decorators/property","../core/accessorSupport/decorators/reader","../core/accessorSupport/decorators/subclass","../core/urlUtils","../core/uuid","../portal/support/resourceExtension","../core/promiseUtils","../core/Collection","./Layer","../core/MultiOriginJSONSupport","./mixins/OperationalLayer","./mixins/PortalLayer","./FeatureLayer"],(function(e,t,r,o,n,l,a,i,s,u,c,p,d,y,f,_,m,h){"use strict";let C=function(t){function r(...e){var r;return(r=t.call(this,...e)||this).type="route",r}e._inheritsLoose(r,t);var o=r.prototype;return o.readFeatureCollectionsFromItem=function(e,t,r){return this.revert("featureCollections","portal-item"),t.layers.map((e=>{const t=new h;return t.read(e,r),t}))},o.readFeatureCollectionsFromWebMap=function(e,t,r){return t.featureCollection.layers.map((e=>{const t=new h;return t.read(e,r),t}))},o.load=function(e){return this.addResolvingPromise(this.loadFromPortal({supportedTypes:["Feature Collection"]},e)),p.resolve(this)},o._getNamedFeatureLayer=function(e){if(this.featureCollections)return this.featureCollections.find((t=>t.title===e))},e._createClass(r,[{key:"barrierLines",get:function(){return this._getNamedFeatureLayer("PolylineBarriers")}},{key:"barrierPoints",get:function(){return this._getNamedFeatureLayer("Barriers")}},{key:"barrierPolygons",get:function(){return this._getNamedFeatureLayer("PolygonBarriers")}},{key:"directionLines",get:function(){return this._getNamedFeatureLayer("DirectionLines")}},{key:"directionPoints",get:function(){return this._getNamedFeatureLayer("DirectionPoints")}},{key:"fullExtent",get:function(){return this.featureCollections?this.featureCollections.reduce(((e,t)=>e?e.union(t.fullExtent):t.fullExtent),null):null}},{key:"maxScale",get:function(){return this.featureCollections?this.featureCollections.reduce(((e,t)=>null==e?t.maxScale:Math.min(e,t.maxScale)),null):0},set:function(e){this.featureCollections.forEach((t=>{t.maxScale=e})),this._set("maxScale",e)}},{key:"minScale",get:function(){return this.featureCollections?this.featureCollections.reduce(((e,t)=>null==e?t.minScale:Math.min(e,t.minScale)),null):0},set:function(e){this.featureCollections.forEach((t=>{t.minScale=e})),this._set("minScale",e)}},{key:"routeInfo",get:function(){return this._getNamedFeatureLayer("RouteInfo")}},{key:"stops",get:function(){return this._getNamedFeatureLayer("Stops")}}]),r}(_.OperationalLayer(m.PortalLayer(f.MultiOriginJSONMixin(y))));return t.__decorate([l.property({dependsOn:["featureCollections"]})],C.prototype,"barrierLines",null),t.__decorate([l.property({dependsOn:["featureCollections"]})],C.prototype,"barrierPoints",null),t.__decorate([l.property({dependsOn:["featureCollections"]})],C.prototype,"barrierPolygons",null),t.__decorate([l.property({dependsOn:["featureCollections"]})],C.prototype,"directionLines",null),t.__decorate([l.property({dependsOn:["featureCollections"]})],C.prototype,"directionPoints",null),t.__decorate([l.property({type:d.ofType(h)})],C.prototype,"featureCollections",void 0),t.__decorate([a.reader("portal-item","featureCollections",["layers"])],C.prototype,"readFeatureCollectionsFromItem",null),t.__decorate([a.reader("web-map","featureCollections",["featureCollection.layers"])],C.prototype,"readFeatureCollectionsFromWebMap",null),t.__decorate([l.property({dependsOn:["featureCollections"],readOnly:!0})],C.prototype,"fullExtent",null),t.__decorate([l.property({type:["show","hide"]})],C.prototype,"listMode",void 0),t.__decorate([l.property({dependsOn:["featureCollections"]})],C.prototype,"maxScale",null),t.__decorate([l.property({dependsOn:["featureCollections"]})],C.prototype,"minScale",null),t.__decorate([l.property({dependsOn:["featureCollections"]})],C.prototype,"routeInfo",null),t.__decorate([l.property({dependsOn:["featureCollections"]})],C.prototype,"stops",null),t.__decorate([l.property({readOnly:!0,json:{read:!1}})],C.prototype,"type",void 0),C=t.__decorate([i.subclass("esri.layers.RouteLayer")],C),C}));
