/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
define(["../chunks/_rollupPluginBabelHelpers","../chunks/tslib.es6","../core/Collection","../core/maybe","../core/MultiOriginJSONSupport","../core/accessorSupport/decorators/property","../core/arrayUtils","../core/has","../core/accessorSupport/ensureType","../core/accessorSupport/decorators/reader","../core/accessorSupport/decorators/subclass","./FeatureLayer","./Layer","./mixins/OperationalLayer","./mixins/PortalLayer"],(function(e,t,r,o,n,i,a,l,s,u,c,p,y,d,f){"use strict";let _=function(t){function r(...e){var r;return(r=t.call(this,...e)||this).type="route",r}e._inheritsLoose(r,t);var n=r.prototype;return n.readFeatureCollectionsFromItem=function(e,t,r){return this.revert("featureCollections","portal-item"),t.layers.map((e=>{const t=new p;return t.read(e,r),t}))},n.readFeatureCollectionsFromWebMap=function(e,t,r){return t.featureCollection.layers.map((e=>{const t=new p;return t.read(e,r),t}))},n.load=function(e){return this.addResolvingPromise(this.loadFromPortal({supportedTypes:["Feature Collection"]},e)),Promise.resolve(this)},n._getNamedFeatureLayer=function(e){if(!o.isNone(this.featureCollections))return this.featureCollections.find((t=>t.title===e))},e._createClass(r,[{key:"barrierLines",get:function(){return this._getNamedFeatureLayer("PolylineBarriers")}},{key:"barrierPoints",get:function(){return this._getNamedFeatureLayer("Barriers")}},{key:"barrierPolygons",get:function(){return this._getNamedFeatureLayer("PolygonBarriers")}},{key:"directionLines",get:function(){return this._getNamedFeatureLayer("DirectionLines")}},{key:"directionPoints",get:function(){return this._getNamedFeatureLayer("DirectionPoints")}},{key:"fullExtent",get:function(){if(o.isNone(this.featureCollections))return null;const e=null;return this.featureCollections.reduce(((e,t)=>o.isNone(t.fullExtent)?e:o.isNone(e)?t.fullExtent.clone():e.union(t.fullExtent)),e)}},{key:"maxScale",get:function(){if(o.isNone(this.featureCollections))return 0;const e=null;return this.featureCollections.reduce(((e,t)=>null==e?t.maxScale:Math.min(e,t.maxScale)),e)},set:function(e){o.isSome(this.featureCollections)&&this.featureCollections.forEach((t=>{t.maxScale=e})),this._set("maxScale",e)}},{key:"minScale",get:function(){if(o.isNone(this.featureCollections))return 0;const e=null;return this.featureCollections.reduce(((e,t)=>null==e?t.minScale:Math.min(e,t.minScale)),e)},set:function(e){o.isSome(this.featureCollections)&&this.featureCollections.forEach((t=>{t.minScale=e})),this._set("minScale",e)}},{key:"routeInfo",get:function(){return this._getNamedFeatureLayer("RouteInfo")}},{key:"stops",get:function(){return this._getNamedFeatureLayer("Stops")}}]),r}(d.OperationalLayer(f.PortalLayer(n.MultiOriginJSONMixin(y))));t.__decorate([i.property()],_.prototype,"barrierLines",null),t.__decorate([i.property()],_.prototype,"barrierPoints",null),t.__decorate([i.property()],_.prototype,"barrierPolygons",null),t.__decorate([i.property()],_.prototype,"directionLines",null),t.__decorate([i.property()],_.prototype,"directionPoints",null),t.__decorate([i.property({type:r.ofType(p)})],_.prototype,"featureCollections",void 0),t.__decorate([u.reader("portal-item","featureCollections",["layers"])],_.prototype,"readFeatureCollectionsFromItem",null),t.__decorate([u.reader("web-map","featureCollections",["featureCollection.layers"])],_.prototype,"readFeatureCollectionsFromWebMap",null),t.__decorate([i.property({readOnly:!0})],_.prototype,"fullExtent",null),t.__decorate([i.property({type:["show","hide"]})],_.prototype,"listMode",void 0),t.__decorate([i.property()],_.prototype,"minScale",null),t.__decorate([i.property()],_.prototype,"routeInfo",null),t.__decorate([i.property()],_.prototype,"stops",null),t.__decorate([i.property({readOnly:!0,json:{read:!1}})],_.prototype,"type",void 0),_=t.__decorate([c.subclass("esri.layers.RouteLayer")],_);return _}));
