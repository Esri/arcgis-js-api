/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.25/esri/copyright.txt for details.
*/
define(["exports"],(function(t){"use strict";const e=16,o=8,n=4,r=2,c=1,s=new Float64Array(2),h=new Float64Array(2),u=-90,l=90,a=-180,f=180,i="0123456789bcdefghjkmnpqrstuvwxyz";function g(t){return t<=57?t-48:t<=104?t-88:t<=107?t-89:t<=110?t-90:t-91}function d(t){return i[t]}function G(t){return(t[0]+t[1])/2}function M(t,e,o){return t[0]=e,t[1]=o,t}function X(t,e){const o=G(t),n=e,r=!e;t[0]=r*t[0]+n*o,t[1]=r*o+n*t[1]}function Y(t,e){const o=e>G(t);return X(t,o),o}function p(t,i){const d=M(s,u,l),Y=M(h,a,f);for(let s=0;s<i.length;s++){const t=g(i.charCodeAt(s));s%2==0?(X(Y,!!(e&t)),X(Y,!!(n&t)),X(Y,!!(c&t)),X(d,!!(o&t)),X(d,!!(r&t))):(X(d,!!(e&t)),X(d,!!(n&t)),X(d,!!(c&t)),X(Y,!!(o&t)),X(Y,!!(r&t)))}return t[0]=G(d),t[1]=G(Y),t}function v(t,e){let o=0,n=0,r=30,c=30;for(let s=0;s<e.length;s++){const t=g(e.charCodeAt(s)),h=s%2==0;r-=h?3:2,c-=h?2:3,o|=P(t,h)<<r,n|=j(t,h)<<c}return{geohashX:o,geohashY:n}}function A(t,e){let o=-90,n=90,r=-180,c=180;for(let s=0;s<e;s++){const e=Math.ceil((s+1)/2),h=Math.floor((s+1)/2),u=1-s%2,l=30-(3*e+2*h),a=30-(2*e+3*h),f=3*u+2*(1-u),i=2*u+3*(1-u),g=3*u+7*(1-u)<<a,d=(7*u+3*(1-u)<<l&t.geohashX)>>l,G=(g&t.geohashY)>>a;for(let t=f-1;t>=0;t--){const e=(r+c)/2,o=d&1<<t?1:0;r=(1-o)*r+o*e,c=(1-o)*e+o*c}for(let t=i-1;t>=0;t--){const e=(o+n)/2,r=G&1<<t?1:0;o=(1-r)*o+r*e,n=(1-r)*e+r*n}}return[r,o,c,n]}function B(t,e,o,n){n%2&&(n+=1);let r=0,c=0,s=-90,h=90,u=-180,l=180;for(let a=0;a<n/2;a++){for(let t=0;t<5;t++){const e=(u+l)/2,n=o>e?1:0;r|=n<<29-(t+5*a),u=(1-n)*u+n*e,l=(1-n)*e+n*l}for(let t=0;t<5;t++){const o=(s+h)/2,n=e>o?1:0;c|=n<<29-(t+5*a),s=(1-n)*s+n*o,h=(1-n)*o+n*h}}t.geohashX=r,t.geohashY=c}function C(t,e,o,n,r){r%2&&(r+=1);let c=0,s=0,h=-90,u=90,l=-180,a=180;for(let f=0;f<r/2;f++){for(let t=0;t<5;t++){const e=(l+a)/2,o=n>e?1:0;c|=o<<29-(t+5*f),l=(1-o)*l+o*e,a=(1-o)*e+o*a}for(let t=0;t<5;t++){const e=(h+u)/2,n=o>e?1:0;s|=n<<29-(t+5*f),h=(1-n)*h+n*e,u=(1-n)*e+n*u}}t[2*e]=c,t[2*e+1]=s}function b(t,e,o){let n="";const r=M(s,-90,90),c=M(h,-180,180);for(let s=0;s<o;s++){let o=0;!(s%2)?(o|=Y(c,e)<<4,o|=Y(r,t)<<3,o|=Y(c,e)<<2,o|=Y(r,t)<<1,o|=Y(c,e)<<0):(o|=Y(r,t)<<4,o|=Y(c,e)<<3,o|=Y(r,t)<<2,o|=Y(c,e)<<1,o|=Y(r,t)<<0),n+=d(o)}return n}function y(t){const e=Math.floor(5*t/2);return(l-u)/2**e}function k(t){const e=Math.ceil(5*t/2);return(f-a)/2**e}function w(t,e,o){return o?t&c|(e&c)<<1|(t&r)<<1|(e&r)<<2|(t&n)<<2:e&c|(t&c)<<1|(e&r)<<1|(t&r)<<2|(e&n)<<2}function P(t,s){return s?c&t|(n&t)>>1|(e&t)>>2:(r&t)>>1|(o&t)>>2}function j(t,s){return s?(r&t)>>1|(o&t)>>2:c&t|(n&t)>>1|(e&t)>>2}function m(t,s,h){const u=!((t.length-1)%2),l=t.substring(0,t.length-1),a=g(t.charCodeAt(t.length-1));let f=0,i=0,G=0,M=0;u?(f=8,i=4,G=c&a|(n&a)>>1|(e&a)>>2,M=(r&a)>>1|(o&a)>>2):(f=4,i=8,M=c&a|(n&a)>>1|(e&a)>>2,G=(r&a)>>1|(o&a)>>2);const X=G+s,Y=M+h,p=Math.floor(X/f),v=Math.floor(Y/i),A=d(w(X-p*f,Y-v*i,u));return t.length>1&&(p||v)?m(l,p,v)+A:l+A}t.convertGeohash32ToXY=v,t.decodeBase32Char=g,t.decodeGeohash=p,t.decodeGeohashXY=A,t.encodeBase32Char=d,t.encodeGeohash=b,t.getRelativeGeohash=m,t.latDistPerGeohash=y,t.lonDistPerGeohash=k,t.setGeohashBuf=C,t.setGeohashXY=B,t.unpackXBits=P,t.unpackYBits=j,Object.defineProperties(t,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})}));
