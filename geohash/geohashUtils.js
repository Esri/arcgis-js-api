/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.26/esri/copyright.txt for details.
*/
define(["exports"],(function(t){"use strict";const e=16,n=8,o=4,r=2,c=1,h=new Float64Array(2),s=new Float64Array(2),u=-90,f=90,l=-180,a=180,i="0123456789bcdefghjkmnpqrstuvwxyz";function g(t){return t<=57?t-48:t<=104?t-88:t<=107?t-89:t<=110?t-90:t-91}function d(t){return i[t]}function G(t){return(t[0]+t[1])/2}function X(t,e,n){return t[0]=e,t[1]=n,t}function Y(t,e){const n=G(t),o=e,r=!e;t[0]=r*t[0]+o*n,t[1]=r*n+o*t[1]}function p(t,e){const n=e>G(t);return Y(t,n),n}function y(t,i){const d=X(h,u,f),p=X(s,l,a);for(let h=0;h<i.length;h++){const t=g(i.charCodeAt(h));h%2==0?(Y(p,!!(e&t)),Y(p,!!(o&t)),Y(p,!!(c&t)),Y(d,!!(n&t)),Y(d,!!(r&t))):(Y(d,!!(e&t)),Y(d,!!(o&t)),Y(d,!!(c&t)),Y(p,!!(n&t)),Y(p,!!(r&t)))}return t[0]=G(d),t[1]=G(p),t}function A(t,e){let n=0,o=0,r=30,c=30;for(let h=0;h<e.length;h++){const t=g(e.charCodeAt(h)),s=h%2==0;r-=s?3:2,c-=s?2:3,n|=k(t,s)<<r,o|=w(t,s)<<c}return{geohashX:n,geohashY:o}}function B(t,e){let n=-90,o=90,r=-180,c=180;for(let h=0;h<e;h++){const e=Math.ceil((h+1)/2),s=Math.floor((h+1)/2),u=1-h%2,f=30-(3*e+2*s),l=30-(2*e+3*s),a=3*u+2*(1-u),i=2*u+3*(1-u),g=3*u+7*(1-u)<<l,d=(7*u+3*(1-u)<<f&t.geohashX)>>f,G=(g&t.geohashY)>>l;for(let t=a-1;t>=0;t--){const e=(r+c)/2,n=d&1<<t?1:0;r=(1-n)*r+n*e,c=(1-n)*e+n*c}for(let t=i-1;t>=0;t--){const e=(n+o)/2,r=G&1<<t?1:0;n=(1-r)*n+r*e,o=(1-r)*e+r*o}}return[r,n,c,o]}function C(t,e,n,o){o%2&&(o+=1);let r=0,c=0,h=-90,s=90,u=-180,f=180;for(let l=0;l<o/2;l++){for(let t=0;t<5;t++){const e=(u+f)/2,o=n>e?1:0;r|=o<<29-(t+5*l),u=(1-o)*u+o*e,f=(1-o)*e+o*f}for(let t=0;t<5;t++){const n=(h+s)/2,o=e>n?1:0;c|=o<<29-(t+5*l),h=(1-o)*h+o*n,s=(1-o)*n+o*s}}t.geohashX=r,t.geohashY=c}function M(t,e,n,o,r){r%2&&(r+=1);let c=0,h=0,s=-90,u=90,f=-180,l=180;for(let a=0;a<r/2;a++){for(let t=0;t<5;t++){const e=(f+l)/2,n=o>e?1:0;c|=n<<29-(t+5*a),f=(1-n)*f+n*e,l=(1-n)*e+n*l}for(let t=0;t<5;t++){const e=(s+u)/2,o=n>e?1:0;h|=o<<29-(t+5*a),s=(1-o)*s+o*e,u=(1-o)*e+o*u}}t[2*e]=c,t[2*e+1]=h}function b(t,e,n){let o="";const r=X(h,-90,90),c=X(s,-180,180);for(let h=0;h<n;h++){let n=0;!(h%2)?(n|=p(c,e)<<4,n|=p(r,t)<<3,n|=p(c,e)<<2,n|=p(r,t)<<1,n|=p(c,e)<<0):(n|=p(r,t)<<4,n|=p(c,e)<<3,n|=p(r,t)<<2,n|=p(c,e)<<1,n|=p(r,t)<<0),o+=d(n)}return o}function v(t,e,n){return n?t&c|(e&c)<<1|(t&r)<<1|(e&r)<<2|(t&o)<<2:e&c|(t&c)<<1|(e&r)<<1|(t&r)<<2|(e&o)<<2}function k(t,h){return h?c&t|(o&t)>>1|(e&t)>>2:(r&t)>>1|(n&t)>>2}function w(t,h){return h?(r&t)>>1|(n&t)>>2:c&t|(o&t)>>1|(e&t)>>2}function j(t,h,s){const u=!((t.length-1)%2),f=t.substring(0,t.length-1),l=g(t.charCodeAt(t.length-1));let a=0,i=0,G=0,X=0;u?(a=8,i=4,G=c&l|(o&l)>>1|(e&l)>>2,X=(r&l)>>1|(n&l)>>2):(a=4,i=8,X=c&l|(o&l)>>1|(e&l)>>2,G=(r&l)>>1|(n&l)>>2);const Y=G+h,p=X+s,y=Math.floor(Y/a),A=Math.floor(p/i),B=d(v(Y-y*a,p-A*i,u));return t.length>1&&(y||A)?j(f,y,A)+B:f+B}t.convertGeohash32ToXY=A,t.decodeBase32Char=g,t.decodeGeohash=y,t.decodeGeohashXY=B,t.encodeBase32Char=d,t.encodeGeohash=b,t.getRelativeGeohash=j,t.setGeohashBuf=M,t.setGeohashXY=C,t.unpackXBits=k,t.unpackYBits=w,Object.defineProperty(t,Symbol.toStringTag,{value:"Module"})}));
